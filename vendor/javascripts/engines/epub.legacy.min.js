(function(I,M){'object'==typeof exports&&'object'==typeof module?module.exports=M(function(){try{return require('JSZip')}catch(W){}}(),require('xmldom')):'function'==typeof define&&define.amd?define(['JSZip','xmldom'],M):'object'==typeof exports?exports.ePub=M(function(){try{return require('JSZip')}catch(W){}}(),require('xmldom')):I.ePub=M(I.JSZip,I.xmldom)})(this,function(N,I){return function(M){function U(H){if(W[H])return W[H].exports;var Y=W[H]={i:H,l:!1,exports:{}};return M[H].call(Y.exports,Y,Y.exports,U),Y.l=!0,Y.exports}var W={};return U.m=M,U.c=W,U.i=function(H){return H},U.d=function(H,Y,G){U.o(H,Y)||Object.defineProperty(H,Y,{configurable:!1,enumerable:!0,get:G})},U.n=function(H){var Y=H&&H.__esModule?function(){return H['default']}:function(){return H};return U.d(Y,'a',Y),Y},U.o=function(H,Y){return Object.prototype.hasOwnProperty.call(H,Y)},U.p='/dist/',U(U.s=347)}([function(M,U,W){var H=W(2),Y=W(26),G=W(13),X=W(14),$=W(27),J='prototype',Z=function(Q,ee,te){var ne=Q&Z.F,ae=Q&Z.G,ie=Q&Z.S,oe=Q&Z.P,se=Q&Z.B,le=ae?H:ie?H[ee]||(H[ee]={}):(H[ee]||{})[J],de=ae?Y:Y[ee]||(Y[ee]={}),ue=de[J]||(de[J]={}),pe,ce,fe,ge;for(pe in ae&&(te=ee),te)ce=!ne&&le&&void 0!==le[pe],fe=(ce?le:te)[pe],ge=se&&ce?$(fe,H):oe&&'function'==typeof fe?$(Function.call,fe):fe,le&&X(le,pe,fe,Q&Z.U),de[pe]!=fe&&G(de,pe,ge),oe&&ue[pe]!=fe&&(ue[pe]=fe)};H.core=Y,Z.F=1,Z.G=2,Z.S=4,Z.P=8,Z.B=16,Z.W=32,Z.U=64,Z.R=128,M.exports=Z},function(M,U,W){var H=W(4);M.exports=function(Y){if(!H(Y))throw TypeError(Y+' is not an object!');return Y}},function(M){var U=M.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=U)},function(M){M.exports=function(U){try{return!!U()}catch(W){return!0}}},function(M){M.exports=function(U){return'object'==typeof U?null!==U:'function'==typeof U}},function(M,U,W){var H=W(62)('wks'),Y=W(41),G=W(2).Symbol,X='function'==typeof G,$=M.exports=function(J){return H[J]||(H[J]=X&&G[J]||(X?G:Y)('Symbol.'+J))};$.store=H},function(M,U,W){M.exports=!W(3)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(M,U,W){var H=W(1),Y=W(108),G=W(25),X=Object.defineProperty;U.f=W(6)?Object.defineProperty:function(J,Z,Q){if(H(J),Z=G(Z,!0),H(Q),Y)try{return X(J,Z,Q)}catch(ee){}if('get'in Q||'set'in Q)throw TypeError('Accessors not supported!');return'value'in Q&&(J[Z]=Q.value),J}},function(M,U,W){'use strict';'use strict';function H(){var Q=new Date().getTime(),ee='xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(te){var ne=0|(Q+16*Math.random())%16;return Q=Math.floor(Q/16),('x'==te?ne:8|7&ne).toString(16)});return ee}function Y(Q){return!isNaN(parseFloat(Q))&&isFinite(Q)}function G(Q,ee,te,ne,ae){var ie=ne||0,oe=ae||ee.length,se=parseInt(ie+(oe-ie)/2),le;return(te||(te=function(ue,pe){return ue>pe?1:ue<pe?-1:ue==pe?0:void 0}),0>=oe-ie)?se:(le=te(ee[se],Q),1==oe-ie?0<le?se:se+1:0===le?se:-1===le?G(Q,ee,te,se,oe):G(Q,ee,te,ie,se))}function X(Q,ee,te,ne,ae){var ie=ne||0,oe=ae||ee.length,se=parseInt(ie+(oe-ie)/2),le;return(te||(te=function(ue,pe){return ue>pe?1:ue<pe?-1:ue==pe?0:void 0}),0>=oe-ie)?-1:(le=te(ee[se],Q),1==oe-ie?0===le?se:-1:0===le?se:-1===le?X(Q,ee,te,se,oe):X(Q,ee,te,ie,se))}function $(Q,ee){return'undefined'==typeof Q.querySelector?Q.getElementsByTagName(ee):Q.querySelectorAll(ee)}function J(Q,ee,te){for(var ne=document.createTreeWalker(Q,te,null,!1),ae=void 0;ae=ne.nextNode();)ee(ae)}function Z(Q,ee){if(ee(Q))return!0;if(Q=Q.firstChild,Q)do{var te=Z(Q,ee);if(te)return!0;Q=Q.nextSibling}while(Q)}Object.defineProperty(U,'__esModule',{value:!0}),U.isElement=function(ee){return!!(ee&&1==ee.nodeType)},U.uuid=H,U.documentHeight=function(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)},U.isNumber=Y,U.isFloat=function(ee){return Y(ee)&&Math.floor(ee)!==ee},U.prefixed=function(ee){var te=['Webkit','Moz','O','ms'],ne=ee[0].toUpperCase()+ee.slice(1),ae=te.length;if('undefined'==typeof document||'undefined'!=typeof document.body.style[ee])return ee;for(var ie=0;ie<ae;ie++)if('undefined'!=typeof document.body.style[te[ie]+ne])return te[ie]+ne;return ee},U.defaults=function(ee){for(var te=1,ne=arguments.length;te<ne;te++){var ae=arguments[te];for(var ie in ae)void 0===ee[ie]&&(ee[ie]=ae[ie])}return ee},U.extend=function(ee){var te=[].slice.call(arguments,1);return te.forEach(function(ne){ne&&Object.getOwnPropertyNames(ne).forEach(function(ae){Object.defineProperty(ee,ae,Object.getOwnPropertyDescriptor(ne,ae))})}),ee},U.insert=function(ee,te,ne){var ae=G(ee,te,ne);return te.splice(ae,0,ee),ae},U.locationOf=G,U.indexOfSorted=X,U.bounds=function(ee){var te=window.getComputedStyle(ee),ne=0,ae=0;return['width','paddingRight','paddingLeft','marginRight','marginLeft','borderRightWidth','borderLeftWidth'].forEach(function(ie){ne+=parseFloat(te[ie])||0}),['height','paddingTop','paddingBottom','marginTop','marginBottom','borderTopWidth','borderBottomWidth'].forEach(function(ie){ae+=parseFloat(te[ie])||0}),{height:ae,width:ne}},U.borders=function(ee){var te=window.getComputedStyle(ee),ne=0,ae=0;return['paddingRight','paddingLeft','marginRight','marginLeft','borderRightWidth','borderLeftWidth'].forEach(function(ie){ne+=parseFloat(te[ie])||0}),['paddingTop','paddingBottom','marginTop','marginBottom','borderTopWidth','borderBottomWidth'].forEach(function(ie){ae+=parseFloat(te[ie])||0}),{height:ae,width:ne}},U.windowBounds=function(){var ee=window.innerWidth,te=window.innerHeight;return{top:0,left:0,right:ee,bottom:te,width:ee,height:te}},U.cleanStringForXpath=function(ee){var te=ee.match(/[^'"]+|['"]/g);return te=te.map(function(ne){return'\''===ne?'"\'"':'"'===ne?'\'"\'':'\''+ne+'\''}),'concat(\'\','+te.join(',')+')'},U.indexOfTextNode=function(ee){var te=ee.parentNode,ne=te.childNodes,ae,ie=-1;for(var oe=0;oe<ne.length&&(ae=ne[oe],ae.nodeType===Node.TEXT_NODE&&ie++,ae!=ee);oe++);return ie},U.isXml=function(ee){return-1<['xml','opf','ncx'].indexOf(ee)},U.createBlob=function(ee,te){return new Blob([ee],{type:te})},U.createBlobUrl=function(ee,te){var ne=window.URL||window.webkitURL||window.mozURL,ie=this.createBlob(ee,te),ae;return ae=ne.createObjectURL(ie),ae},U.createBase64Url=function(ee,te){var ne,ae;if('string'==typeof ee)return ne=btoa(ee),ae='data:'+te+';base64,'+ne,ae},U.type=function(ee){return Object.prototype.toString.call(ee).slice(8,-1)},U.parse=function(ee,te,ne){var ae,ie;return ie='undefined'==typeof DOMParser||ne?W(129).DOMParser:DOMParser,ae=new ie().parseFromString(ee,te),ae},U.qs=function(ee,te){var ne;if(!ee)throw new Error('No Element Provided');return'undefined'==typeof ee.querySelector?(ne=ee.getElementsByTagName(te),ne.length)?ne[0]:void 0:ee.querySelector(te)},U.qsa=$,U.qsp=function(ee,te,ne){var ae,ie;if('undefined'!=typeof ee.querySelector){for(var oe in te+='[',ne)te+=oe+'=\''+ne[oe]+'\'';return te+=']',ee.querySelector(te)}return(ae=ee.getElementsByTagName(te),ie=Array.prototype.slice.call(ae,0).filter(function(se){for(var le in ne)if(se.getAttribute(le)===ne[le])return!0;return!1}),ie)?ie[0]:void 0},U.sprint=function(ee,te){var ne=ee.ownerDocument||ee;'undefined'==typeof ne.createTreeWalker?Z(ee,function(ae){ae&&3===ae.nodeType&&te(ae)},!0):J(ee,te,NodeFilter.SHOW_TEXT)},U.treeWalker=J,U.walk=Z,U.blob2base64=function(ee,te){var ne=new FileReader;ne.readAsDataURL(ee),ne.onloadend=function(){te(ne.result)}},U.defer=function(){var ee=this;this.resolve=null,this.reject=null,this.id=H(),this.promise=new Promise(function(te,ne){ee.resolve=te,ee.reject=ne}),Object.freeze(this)},U.querySelectorByType=function(ee,te,ne){var ae;if('undefined'!=typeof ee.querySelector&&(ae=ee.querySelector(te+'[*|type="'+ne+'"]')),!ae||0===ae.length){ae=$(ee,te);for(var ie=0;ie<ae.length;ie++)if(ae[ie].getAttributeNS('http://www.idpf.org/2007/ops','type')===ne)return ae[ie]}else return ae},U.findChildren=function(ee){var te=[],ne=ee.parentNode.childNodes;for(var ae=0;ae<ne.length;ae++){var ie=ne[ae];1===ie.nodeType&&te.push(ie)}return te},U.requestAnimationFrame='undefined'!=typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame)},function(M,U,W){var H=W(32),Y=Math.min;M.exports=function(G){return 0<G?Y(H(G),9007199254740991):0}},function(M,U,W){var H=W(20);M.exports=function(Y){return Object(H(Y))}},function(M){var U={}.hasOwnProperty;M.exports=function(W,H){return U.call(W,H)}},function(M){M.exports=function(U){if('function'!=typeof U)throw TypeError(U+' is not a function!');return U}},function(M,U,W){var H=W(7),Y=W(31);M.exports=W(6)?function(G,X,$){return H.f(G,X,Y(1,$))}:function(G,X,$){return G[X]=$,G}},function(M,U,W){var H=W(2),Y=W(13),G=W(11),X=W(41)('src'),$='toString',J=Function[$],Z=(''+J).split($);W(26).inspectSource=function(Q){return J.call(Q)},(M.exports=function(Q,ee,te,ne){var ae='function'==typeof te;ae&&(G(te,'name')||Y(te,'name',ee)),Q[ee]===te||(ae&&(G(te,X)||Y(te,X,Q[ee]?''+Q[ee]:Z.join(ee+''))),Q===H?Q[ee]=te:ne?Q[ee]?Q[ee]=te:Y(Q,ee,te):(delete Q[ee],Y(Q,ee,te)))})(Function.prototype,$,function(){return'function'==typeof this&&this[X]||J.call(this)})},function(M,U,W){var H=W(0),Y=W(3),G=W(20),X=/"/g,$=function(J,Z,Q,ee){var te=G(J)+'',ne='<'+Z;return''!==Q&&(ne+=' '+Q+'="'+(ee+'').replace(X,'&quot;')+'"'),ne+'>'+te+'</'+Z+'>'};M.exports=function(J,Z){var Q={};Q[J]=Z($),H(H.P+H.F*Y(function(){var ee=''[J]('"');return ee!==ee.toLowerCase()||3<ee.split('"').length}),'String',Q)}},function(M,U,W){var H=W(50),Y=W(20);M.exports=function(G){return H(Y(G))}},function(M,U,W){var H=W(51),Y=W(31),G=W(16),X=W(25),$=W(11),J=W(108),Z=Object.getOwnPropertyDescriptor;U.f=W(6)?Z:function(ee,te){if(ee=G(ee),te=X(te,!0),J)try{return Z(ee,te)}catch(ne){}return $(ee,te)?Y(!H.f.call(ee,te),ee[te]):void 0}},function(M,U,W){var H=W(11),Y=W(10),G=W(86)('IE_PROTO'),X=Object.prototype;M.exports=Object.getPrototypeOf||function($){return $=Y($),H($,G)?$[G]:'function'==typeof $.constructor&&$ instanceof $.constructor?$.constructor.prototype:$ instanceof Object?X:null}},function(M){var U={}.toString;M.exports=function(W){return U.call(W).slice(8,-1)}},function(M){M.exports=function(U){if(U==void 0)throw TypeError('Can\'t call method on  '+U);return U}},function(M,U,W){var H=W(3);M.exports=function(Y,G){return!!Y&&H(function(){G?Y.call(null,function(){},1):Y.call(null)})}},function(M,U,W){'use strict';'use strict';function H(Q,ee){if(!(Q instanceof ee))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&'function'==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?'symbol':typeof Q},G=function(){function Q(ee,te){for(var ne=0;ne<te.length;ne++){var ae=te[ne];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,'value'in ae&&(ae.writable=!0),Object.defineProperty(ee,ae.key,ae)}}return function(ee,te,ne){return te&&Q(ee.prototype,te),ne&&Q(ee,ne),ee}}(),X=W(8),$=1,J=3,Z=function(){function Q(ee,te,ne){H(this,Q);var ae;if(this.str='',this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof Q))return new Q(ee,te,ne);if('string'==typeof te?this.base=this.parseComponent(te):'object'===('undefined'==typeof te?'undefined':Y(te))&&te.steps&&(this.base=te),ae=this.checkType(ee),'string'===ae)return this.str=ee,(0,X.extend)(this,this.parse(ee));if('range'===ae)return(0,X.extend)(this,this.fromRange(ee,this.base,ne));if('node'===ae)return(0,X.extend)(this,this.fromNode(ee,this.base,ne));if('EpubCFI'===ae&&ee.path)return ee;if(!ee)return this;throw new TypeError('not a valid argument for EpubCFI')}return G(Q,[{key:'checkType',value:function(te){return this.isCfiString(te)?'string':'object'===('undefined'==typeof te?'undefined':Y(te))&&('Range'===(0,X.type)(te)||'undefined'!=typeof te.startContainer)?'range':'object'===('undefined'==typeof te?'undefined':Y(te))&&'undefined'!=typeof te.nodeType?'node':'object'===('undefined'==typeof te?'undefined':Y(te))&&te instanceof Q&&'EpubCFI'}},{key:'parse',value:function(te){var ne={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},ae,ie,oe;return'string'==typeof te?(0===te.indexOf('epubcfi(')&&')'===te[te.length-1]&&(te=te.slice(8,te.length-1)),ae=this.getChapterComponent(te),!ae)?{spinePos:-1}:(ne.base=this.parseComponent(ae),ie=this.getPathComponent(te),ne.path=this.parseComponent(ie),oe=this.getRange(te),oe&&(ne.range=!0,ne.start=this.parseComponent(oe[0]),ne.end=this.parseComponent(oe[1])),ne.spinePos=ne.base.steps[1].index,ne):{spinePos:-1}}},{key:'parseComponent',value:function(te){var ne={steps:[],terminal:{offset:null,assertion:null}},ae=te.split(':'),ie=ae[0].split('/'),oe;return 1<ae.length&&(oe=ae[1],ne.terminal=this.parseTerminal(oe)),''===ie[0]&&ie.shift(),ne.steps=ie.map(function(se){return this.parseStep(se)}.bind(this)),ne}},{key:'parseStep',value:function(te){var ne,ae,ie,oe,se;if(oe=te.match(/\[(.*)\]/),oe&&oe[1]&&(se=oe[1]),ae=parseInt(te),!isNaN(ae))return 0==ae%2?(ne='element',ie=ae/2-1):(ne='text',ie=(ae-1)/2),{type:ne,index:ie,id:se||null}}},{key:'parseTerminal',value:function(te){var ie=te.match(/\[(.*)\]/),ne,ae;return ie&&ie[1]?(ne=parseInt(te.split('[')[0])||null,ae=ie[1]):ne=parseInt(te)||null,{offset:ne,assertion:ae}}},{key:'getChapterComponent',value:function(te){var ne=te.split('!');return ne[0]}},{key:'getPathComponent',value:function(te){var ne=te.split('!');if(ne[1]){var ae=ne[1].split(',');return ae[0]}}},{key:'getRange',value:function(te){var ne=te.split(',');return 3===ne.length&&[ne[1],ne[2]]}},{key:'getCharecterOffsetComponent',value:function(te){var ne=te.split(':');return ne[1]||''}},{key:'joinSteps',value:function(te){return te?te.map(function(ne){var ae='';return'element'===ne.type&&(ae+=2*(ne.index+1)),'text'===ne.type&&(ae+=1+2*ne.index),ne.id&&(ae+='['+ne.id+']'),ae}).join('/'):''}},{key:'segmentString',value:function(te){var ee='/';return ee+=this.joinSteps(te.steps),te.terminal&&null!=te.terminal.offset&&(ee+=':'+te.terminal.offset),te.terminal&&null!=te.terminal.assertion&&(ee+='['+te.terminal.assertion+']'),ee}},{key:'toString',value:function(){var te='epubcfi(';return te+=this.segmentString(this.base),te+='!',te+=this.segmentString(this.path),this.start&&(te+=',',te+=this.segmentString(this.start)),this.end&&(te+=',',te+=this.segmentString(this.end)),te+=')',te}},{key:'compare',value:function(te,ne){var ae,ie,oe,se;if('string'==typeof te&&(te=new Q(te)),'string'==typeof ne&&(ne=new Q(ne)),te.spinePos>ne.spinePos)return 1;if(te.spinePos<ne.spinePos)return-1;te.range?(ae=te.path.steps.concat(te.start.steps),oe=te.start.terminal):(ae=te.path.steps,oe=te.path.terminal),ne.range?(ie=ne.path.steps.concat(ne.start.steps),se=ne.start.terminal):(ie=ne.path.steps,se=ne.path.terminal);for(var le=0;le<ae.length;le++){if(!ae[le])return-1;if(!ie[le])return 1;if(ae[le].index>ie[le].index)return 1;if(ae[le].index<ie[le].index)return-1}return ae.length<ie.length?1:oe.offset>se.offset?1:oe.offset<se.offset?-1:0}},{key:'step',value:function(te){var ne=te.nodeType===J?'text':'element';return{id:te.id,tagName:te.tagName,type:ne,index:this.position(te)}}},{key:'filteredStep',value:function(te,ne){var ae=this.filter(te,ne),ie;if(ae)return ie=ae.nodeType===J?'text':'element',{id:ae.id,tagName:ae.tagName,type:ie,index:this.filteredPosition(ae,ne)}}},{key:'pathTo',value:function(te,ne,ae){for(var ie={steps:[],terminal:{offset:null,assertion:null}},oe=te,se;oe&&oe.parentNode&&9!=oe.parentNode.nodeType;)se=ae?this.filteredStep(oe,ae):this.step(oe),se&&ie.steps.unshift(se),oe=oe.parentNode;return null!=ne&&0<=ne&&(ie.terminal.offset=ne,'text'!=ie.steps[ie.steps.length-1].type&&ie.steps.push({type:'text',index:0})),ie}},{key:'equalStep',value:function(te,ne){return te&&ne&&te.index===ne.index&&te.id===ne.id&&te.type===ne.type}},{key:'fromRange',value:function(te,ne,ae){var ie={range:!1,base:{},path:{},start:null,end:null},oe=te.startContainer,se=te.endContainer,le=te.startOffset,de=te.endOffset,ue=!1;if(ae&&(ue=null!=oe.ownerDocument.querySelector('.'+ae)),'string'==typeof ne?(ie.base=this.parseComponent(ne),ie.spinePos=ie.base.steps[1].index):'object'===('undefined'==typeof ne?'undefined':Y(ne))&&(ie.base=ne),te.collapsed)ue&&(le=this.patchOffset(oe,le,ae)),ie.path=this.pathTo(oe,le,ae);else{ie.range=!0,ue&&(le=this.patchOffset(oe,le,ae)),ie.start=this.pathTo(oe,le,ae),ue&&(de=this.patchOffset(se,de,ae)),ie.end=this.pathTo(se,de,ae),ie.path={steps:[],terminal:null};var pe=ie.start.steps.length,ce;for(ce=0;ce<pe&&this.equalStep(ie.start.steps[ce],ie.end.steps[ce]);ce++)ce===pe-1?ie.start.terminal===ie.end.terminal&&(ie.path.steps.push(ie.start.steps[ce]),ie.range=!1):ie.path.steps.push(ie.start.steps[ce]);ie.start.steps=ie.start.steps.slice(ie.path.steps.length),ie.end.steps=ie.end.steps.slice(ie.path.steps.length)}return ie}},{key:'fromNode',value:function(te,ne,ae){var ie={range:!1,base:{},path:{},start:null,end:null};return'string'==typeof ne?(ie.base=this.parseComponent(ne),ie.spinePos=ie.base.steps[1].index):'object'===('undefined'==typeof ne?'undefined':Y(ne))&&(ie.base=ne),ie.path=this.pathTo(te,null,ae),ie}},{key:'filter',value:function(te,ne){var de=!1,ae,ie,oe,se,le;return(te.nodeType===J?(de=!0,oe=te.parentNode,ae=te.parentNode.classList.contains(ne)):(de=!1,ae=te.classList.contains(ne)),ae&&de)?(se=oe.previousSibling,le=oe.nextSibling,se&&se.nodeType===J?ie=se:le&&le.nodeType===J&&(ie=le),ie)?ie:te:ae&&!de?!1:te}},{key:'patchOffset',value:function(te,ne,ae){if(te.nodeType!=J)throw new Error('Anchor must be a text node');var ie=te,oe=ne;for(te.parentNode.classList.contains(ae)&&(ie=te.parentNode);ie.previousSibling;){if(ie.previousSibling.nodeType!==$)oe+=ie.previousSibling.textContent.length;else if(ie.previousSibling.classList.contains(ae))oe+=ie.previousSibling.textContent.length;else break;ie=ie.previousSibling}return oe}},{key:'normalizedMap',value:function(te,ne,ae){var ie={},oe=-1,le=te.length,se,de,ue;for(se=0;se<le;se++)de=te[se].nodeType,de===$&&te[se].classList.contains(ae)&&(de=J),0<se&&de===J&&ue===J?ie[se]=oe:ne===de&&(oe=oe+1,ie[se]=oe),ue=de;return ie}},{key:'position',value:function(te){var ne,ae;return te.nodeType===$?(ne=te.parentNode.children,!ne&&(ne=(0,X.findChildren)(te.parentNode)),ae=Array.prototype.indexOf.call(ne,te)):(ne=this.textNodes(te.parentNode),ae=ne.indexOf(te)),ae}},{key:'filteredPosition',value:function(te,ne){var ae,ie,oe;return te.nodeType===$?(ae=te.parentNode.children,oe=this.normalizedMap(ae,$,ne)):(ae=te.parentNode.childNodes,te.parentNode.classList.contains(ne)&&(te=te.parentNode,ae=te.parentNode.childNodes),oe=this.normalizedMap(ae,J,ne)),ie=Array.prototype.indexOf.call(ae,te),oe[ie]}},{key:'stepsToXpath',value:function(te){var ne=['.','*'];return te.forEach(function(ae){var ie=ae.index+1;ae.id?ne.push('*[position()='+ie+' and @id=\''+ae.id+'\']'):'text'===ae.type?ne.push('text()['+ie+']'):ne.push('*['+ie+']')}),ne.join('/')}},{key:'stepsToQuerySelector',value:function(te){var ne=['html'];return te.forEach(function(ae){var ie=ae.index+1;ae.id?ne.push('#'+ae.id):'text'!==ae.type&&ne.push('*:nth-child('+ie+')')}),ne.join('>')}},{key:'textNodes',value:function(te,ne){return Array.prototype.slice.call(te.childNodes).filter(function(ae){return ae.nodeType===J||ne&&ae.classList.contains(ne)})}},{key:'walkToNode',value:function(te,ne,ae){var ie=ne||document,oe=ie.documentElement,le=te.length,se,de;for(de=0;de<le;de++)se=te[de],'element'===se.type?oe=oe.children[se.index]:'text'===se.type&&(oe=this.textNodes(oe,ae)[se.index]);return oe}},{key:'findNode',value:function(te,ne,ae){var ie=ne||document,oe,se;return ae||'undefined'==typeof ie.evaluate?ae?oe=this.walkToNode(te,ie,ae):oe=this.walkToNode(te,ie):(se=this.stepsToXpath(te),oe=ie.evaluate(se,ie,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue),oe}},{key:'fixMiss',value:function(te,ne,ae,ie){var oe=this.findNode(te.slice(0,-1),ae,ie),se=oe.childNodes,le=this.normalizedMap(se,J,ie),pe=te[te.length-1].index,de,ue;for(var ce in le){if(!le.hasOwnProperty(ce))return;if(le[ce]===pe)if(de=se[ce],ue=de.textContent.length,ne>ue)ne=ne-ue;else{oe=de.nodeType===$?de.childNodes[0]:de;break}}return{container:oe,offset:ne}}},{key:'toRange',value:function(te,ne){var ae=te||document,ie=ae.createRange(),ue=this,fe=!!ne&&null!=ae.querySelector('.'+ne),oe,se,le,de,pe,ce,ge;if(ue.range?(oe=ue.start,pe=ue.path.steps.concat(oe.steps),le=this.findNode(pe,ae,fe?ne:null),se=ue.end,ce=ue.path.steps.concat(se.steps),de=this.findNode(ce,ae,fe?ne:null)):(oe=ue.path,pe=ue.path.steps,le=this.findNode(ue.path.steps,ae,fe?ne:null)),le)try{null==oe.terminal.offset?ie.setStart(le,0):ie.setStart(le,oe.terminal.offset)}catch(he){ge=this.fixMiss(pe,oe.terminal.offset,ae,fe?ne:null),ie.setStart(ge.container,ge.offset)}else return null;if(de)try{null==se.terminal.offset?ie.setEnd(de,0):ie.setEnd(de,se.terminal.offset)}catch(he){ge=this.fixMiss(ce,ue.end.terminal.offset,ae,fe?ne:null),ie.setEnd(ge.container,ge.offset)}return ie}},{key:'isCfiString',value:function(te){return'string'==typeof te&&0===te.indexOf('epubcfi(')&&')'===te[te.length-1]}},{key:'generateChapterComponent',value:function(te,ne,ae){var ie=parseInt(ne),oe='/'+(te+1)+'/';return oe+=2*(ie+1),ae&&(oe+='['+ae+']'),oe}}]),Q}();U.default=Z,M.exports=U['default']},function(M,U,W){var H=W(27),Y=W(50),G=W(10),X=W(9),$=W(152);M.exports=function(J,Z){var Q=1==J,ee=4==J,te=6==J,ne=Z||$;return function(ae,ie,oe){for(var se=G(ae),le=Y(se),de=H(ie,oe,3),ue=X(le.length),pe=0,ce=Q?ne(ae,ue):2==J?ne(ae,0):void 0,fe,ge;ue>pe;pe++)if((5==J||te||pe in le)&&(fe=le[pe],ge=de(fe,pe,se),J))if(Q)ce[pe]=ge;else if(ge)switch(J){case 3:return!0;case 5:return fe;case 6:return pe;case 2:ce.push(fe);}else if(ee)return!1;return te?-1:3==J||ee?ee:ce}}},function(M,U,W){var H=W(0),Y=W(26),G=W(3);M.exports=function(X,$){var J=(Y.Object||{})[X]||Object[X],Z={};Z[X]=$(J),H(H.S+H.F*G(function(){J(1)}),'Object',Z)}},function(M,U,W){var H=W(4);M.exports=function(Y,G){if(!H(Y))return Y;var X,$;if(G&&'function'==typeof(X=Y.toString)&&!H($=X.call(Y)))return $;if('function'==typeof(X=Y.valueOf)&&!H($=X.call(Y)))return $;if(!G&&'function'==typeof(X=Y.toString)&&!H($=X.call(Y)))return $;throw TypeError('Can\'t convert object to primitive value')}},function(M){var U=M.exports={version:'2.4.0'};'number'==typeof __e&&(__e=U)},function(M,U,W){var H=W(12);M.exports=function(Y,G,X){return(H(Y),void 0===G)?Y:1===X?function($){return Y.call(G,$)}:2===X?function($,J){return Y.call(G,$,J)}:3===X?function($,J,Z){return Y.call(G,$,J,Z)}:function(){return Y.apply(G,arguments)}}},function(M,U,W){var H=W(124),Y=W(0),G=W(62)('metadata'),X=G.store||(G.store=new(W(127))),$=function(J,Z,Q){var ee=X.get(J);if(!ee){if(!Q)return void 0;X.set(J,ee=new H)}var te=ee.get(Z);if(!te){if(!Q)return void 0;ee.set(Z,te=new H)}return te};M.exports={store:X,map:$,has:function(J,Z,Q){var ee=$(Z,Q,!1);return ee!==void 0&&ee.has(J)},get:function(J,Z,Q){var ee=$(Z,Q,!1);return ee===void 0?void 0:ee.get(J)},set:function(J,Z,Q,ee){$(Q,ee,!0).set(J,Z)},keys:function(J,Z){var Q=$(J,Z,!1),ee=[];return Q&&Q.forEach(function(te,ne){ee.push(ne)}),ee},key:function(J){return J===void 0||'symbol'==typeof J?J:J+''},exp:function(J){Y(Y.S,'Reflect',J)}}},function(M,U,W){'use strict';'use strict';if(W(6)){var H=W(34),Y=W(2),G=W(3),X=W(0),$=W(63),J=W(93),Z=W(27),Q=W(33),ee=W(31),te=W(13),ne=W(38),ae=W(32),ie=W(9),oe=W(40),se=W(25),le=W(11),de=W(121),ue=W(49),pe=W(4),ce=W(10),fe=W(78),ge=W(35),he=W(18),ye=W(36).f,me=W(95),ve=W(41),be=W(5),xe=W(23),_e=W(53),ke=W(87),we=W(96),Se=W(44),Ee=W(59),Pe=W(39),Te=W(71),Ce=W(101),Re=W(7),Oe=W(17),Le=Re.f,Ne=Oe.f,Ae=Y.RangeError,Ie=Y.TypeError,Fe=Y.Uint8Array,ze='ArrayBuffer',qe='Shared'+ze,Me='BYTES_PER_ELEMENT',je='prototype',Be=Array[je],De=J.ArrayBuffer,Ue=J.DataView,We=xe(0),He=xe(2),Ye=xe(3),Ve=xe(4),Ge=xe(5),Xe=xe(6),Ke=_e(!0),$e=_e(!1),Je=we.values,Ze=we.keys,Qe=we.entries,et=Be.lastIndexOf,tt=Be.reduce,nt=Be.reduceRight,ot=Be.join,st=Be.sort,dt=Be.slice,ut=Be.toString,pt=Be.toLocaleString,ct=be('iterator'),ft=be('toStringTag'),ht=ve('typed_constructor'),yt=ve('def_constructor'),mt=$.CONSTR,vt=$.TYPED,bt=$.VIEW,xt='Wrong length!',_t=xe(1,function(Wt,Ht){return Tt(ke(Wt,Wt[yt]),Ht)}),kt=G(function(){return 1===new Fe(new Uint16Array([1]).buffer)[0]}),wt=!!Fe&&!!Fe[je].set&&G(function(){new Fe(1).set({})}),St=function(Wt,Ht){if(Wt===void 0)throw Ie(xt);var Yt=ie(Wt);if(Ht&&!de(+Wt,Yt))throw Ae(xt);return Yt},Et=function(Wt,Ht){var Yt=ae(Wt);if(0>Yt||Yt%Ht)throw Ae('Wrong offset!');return Yt},Pt=function(Wt){if(pe(Wt)&&vt in Wt)return Wt;throw Ie(Wt+' is not a typed array!')},Tt=function(Wt,Ht){if(!(pe(Wt)&&ht in Wt))throw Ie('It is not a typed array constructor!');return new Wt(Ht)},Ct=function(Wt,Ht){return Rt(ke(Wt,Wt[yt]),Ht)},Rt=function(Wt,Ht){for(var Yt=0,Vt=Ht.length,Gt=Tt(Wt,Vt);Vt>Yt;)Gt[Yt]=Ht[Yt++];return Gt},Ot=function(Wt,Ht,Yt){Le(Wt,Ht,{get:function(){return this._d[Yt]}})},Lt=function(Ht){var Yt=ce(Ht),Vt=arguments.length,Gt=1<Vt?arguments[1]:void 0,Xt=Gt!==void 0,Kt=me(Yt),$t,Jt,Zt,Qt,en,tn;if(Kt!=void 0&&!fe(Kt)){for(tn=Kt.call(Yt),Zt=[],$t=0;!(en=tn.next()).done;$t++)Zt.push(en.value);Yt=Zt}for(Xt&&2<Vt&&(Gt=Z(Gt,arguments[2],2)),$t=0,Jt=ie(Yt.length),Qt=Tt(this,Jt);Jt>$t;$t++)Qt[$t]=Xt?Gt(Yt[$t],$t):Yt[$t];return Qt},Nt=function(){for(var Ht=0,Yt=arguments.length,Vt=Tt(this,Yt);Yt>Ht;)Vt[Ht]=arguments[Ht++];return Vt},At=!!Fe&&G(function(){pt.call(new Fe(1))}),It=function(){return pt.apply(At?dt.call(Pt(this)):Pt(this),arguments)},Ft={copyWithin:function(Ht,Yt){return Ce.call(Pt(this),Ht,Yt,2<arguments.length?arguments[2]:void 0)},every:function(Ht){return Ve(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},fill:function(){return Te.apply(Pt(this),arguments)},filter:function(Ht){return Ct(this,He(Pt(this),Ht,1<arguments.length?arguments[1]:void 0))},find:function(Ht){return Ge(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},findIndex:function(Ht){return Xe(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},forEach:function(Ht){We(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},indexOf:function(Ht){return $e(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},includes:function(Ht){return Ke(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},join:function(){return ot.apply(Pt(this),arguments)},lastIndexOf:function(){return et.apply(Pt(this),arguments)},map:function(Ht){return _t(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},reduce:function(){return tt.apply(Pt(this),arguments)},reduceRight:function(){return nt.apply(Pt(this),arguments)},reverse:function(){for(var Ht=this,Yt=Pt(Ht).length,Vt=Math.floor(Yt/2),Gt=0,Xt;Gt<Vt;)Xt=Ht[Gt],Ht[Gt++]=Ht[--Yt],Ht[Yt]=Xt;return Ht},some:function(Ht){return Ye(Pt(this),Ht,1<arguments.length?arguments[1]:void 0)},sort:function(Ht){return st.call(Pt(this),Ht)},subarray:function(Ht,Yt){var Vt=Pt(this),Gt=Vt.length,Xt=oe(Ht,Gt);return new(ke(Vt,Vt[yt]))(Vt.buffer,Vt.byteOffset+Xt*Vt.BYTES_PER_ELEMENT,ie((Yt===void 0?Gt:oe(Yt,Gt))-Xt))}},zt=function(Ht,Yt){return Ct(this,dt.call(Pt(this),Ht,Yt))},qt=function(Ht){Pt(this);var Yt=Et(arguments[1],1),Vt=this.length,Gt=ce(Ht),Xt=ie(Gt.length),Kt=0;if(Xt+Yt>Vt)throw Ae(xt);for(;Kt<Xt;)this[Yt+Kt]=Gt[Kt++]},Mt={entries:function(){return Qe.call(Pt(this))},keys:function(){return Ze.call(Pt(this))},values:function(){return Je.call(Pt(this))}},jt=function(Wt,Ht){return pe(Wt)&&Wt[vt]&&'symbol'!=typeof Ht&&Ht in Wt&&+Ht+''==Ht+''},Bt=function(Ht,Yt){return jt(Ht,Yt=se(Yt,!0))?ee(2,Ht[Yt]):Ne(Ht,Yt)},Dt=function(Ht,Yt,Vt){return jt(Ht,Yt=se(Yt,!0))&&pe(Vt)&&le(Vt,'value')&&!le(Vt,'get')&&!le(Vt,'set')&&!Vt.configurable&&(!le(Vt,'writable')||Vt.writable)&&(!le(Vt,'enumerable')||Vt.enumerable)?(Ht[Yt]=Vt.value,Ht):Le(Ht,Yt,Vt)};mt||(Oe.f=Bt,Re.f=Dt),X(X.S+X.F*!mt,'Object',{getOwnPropertyDescriptor:Bt,defineProperty:Dt}),G(function(){ut.call({})})&&(ut=pt=function(){return ot.call(this)});var Ut=ne({},Ft);ne(Ut,Mt),te(Ut,ct,Mt.values),ne(Ut,{slice:zt,set:qt,constructor:function(){},toString:ut,toLocaleString:It}),Ot(Ut,'buffer','b'),Ot(Ut,'byteOffset','o'),Ot(Ut,'byteLength','l'),Ot(Ut,'length','e'),Le(Ut,ft,{get:function(){return this[vt]}}),M.exports=function(Wt,Ht,Yt,Vt){Vt=!!Vt;var Gt=Wt+(Vt?'Clamped':'')+'Array',Xt=Y[Gt],Kt=Xt||{},$t=Xt&&he(Xt),Jt=!Xt||!$.ABV,Zt={},Qt=Xt&&Xt[je],en=function(ln,dn){var pn=ln._d;return pn.v['get'+Wt](dn*Ht+pn.o,kt)},tn=function(ln,dn,pn){var cn=ln._d;Vt&&(pn=0>(pn=Math.round(pn))?0:255<pn?255:255&pn),cn.v['set'+Wt](dn*Ht+cn.o,pn,kt)},nn=function(ln,dn){Le(ln,dn,{get:function(){return en(this,dn)},set:function(pn){return tn(this,dn,pn)},enumerable:!0})};Jt?(Xt=Yt(function(ln,dn,pn,cn){Q(ln,Xt,Gt,'_d');var gn=0,hn=0,mn,vn,bn,_n;if(!pe(dn))bn=St(dn,!0),vn=bn*Ht,mn=new De(vn);else if(dn instanceof De||(_n=ue(dn))==ze||_n==qe){mn=dn,hn=Et(pn,Ht);var kn=dn.byteLength;if(void 0===cn){if(kn%Ht)throw Ae(xt);if(vn=kn-hn,0>vn)throw Ae(xt)}else if(vn=ie(cn)*Ht,vn+hn>kn)throw Ae(xt);bn=vn/Ht}else{if(vt in dn)return Rt(Xt,dn);return Lt.call(Xt,dn)}for(te(ln,'_d',{b:mn,o:hn,l:vn,e:bn,v:new Ue(mn)});gn<bn;)nn(ln,gn++)}),Qt=Xt[je]=ge(Ut),te(Qt,'constructor',Xt)):!Ee(function(ln){new Xt(null),new Xt(ln)},!0)&&(Xt=Yt(function(ln,dn,pn,cn){Q(ln,Xt,Gt);var gn;return pe(dn)?dn instanceof De||(gn=ue(dn))==ze||gn==qe?void 0===cn?void 0===pn?new Kt(dn):new Kt(dn,Et(pn,Ht)):new Kt(dn,Et(pn,Ht),cn):vt in dn?Rt(Xt,dn):Lt.call(Xt,dn):new Kt(St(dn,'Uint8Array'!=Gt))}),We($t===Function.prototype?ye(Kt):ye(Kt).concat(ye($t)),function(ln){ln in Xt||te(Xt,ln,Kt[ln])}),Xt[je]=Qt,!H&&(Qt.constructor=Xt));var an=Qt[ct],rn=!!an&&('values'==an.name||an.name==void 0),sn=Mt.values;te(Xt,ht,!0),te(Qt,vt,Gt),te(Qt,bt,!0),te(Qt,yt,Xt),(Vt?new Xt(1)[ft]!=Gt:!(ft in Qt))&&Le(Qt,ft,{get:function(){return Gt}}),Zt[Gt]=Xt,X(X.G+X.W+X.F*(Xt!=Kt),Zt),X(X.S,Gt,{BYTES_PER_ELEMENT:Ht,from:Lt,of:Nt}),Me in Qt||te(Qt,Me,Ht),X(X.P,Gt,Ft),Pe(Gt),X(X.P+X.F*wt,Gt,{set:qt}),X(X.P+X.F*!rn,Gt,Mt),X(X.P+X.F*(Qt.toString!=ut),Gt,{toString:ut}),X(X.P+X.F*G(function(){new Xt(1).slice()}),Gt,{slice:zt}),X(X.P+X.F*(G(function(){return[1,2].toLocaleString()!=new Xt([1,2]).toLocaleString()})||!G(function(){Qt.toLocaleString.call([1,2])})),Gt,{toLocaleString:It}),Se[Gt]=rn?an:sn,H||rn||te(Qt,ct,sn)}}else M.exports=function(){}},function(M,U,W){var H=W(41)('meta'),Y=W(4),G=W(11),X=W(7).f,$=0,J=Object.isExtensible||function(){return!0},Z=!W(3)(function(){return J(Object.preventExtensions({}))}),Q=function(te){X(te,H,{value:{i:'O'+ ++$,w:{}}})},ee=M.exports={KEY:H,NEED:!1,fastKey:function(te,ne){if(!Y(te))return'symbol'==typeof te?te:('string'==typeof te?'S':'P')+te;if(!G(te,H)){if(!J(te))return'F';if(!ne)return'E';Q(te)}return te[H].i},getWeak:function(te,ne){if(!G(te,H)){if(!J(te))return!0;if(!ne)return!1;Q(te)}return te[H].w},onFreeze:function(te){return Z&&ee.NEED&&J(te)&&!G(te,H)&&Q(te),te}}},function(M){M.exports=function(U,W){return{enumerable:!(1&U),configurable:!(2&U),writable:!(4&U),value:W}}},function(M){var U=Math.ceil,W=Math.floor;M.exports=function(H){return isNaN(H=+H)?0:(0<H?W:U)(H)}},function(M){M.exports=function(U,W,H,Y){if(!(U instanceof W)||Y!==void 0&&Y in U)throw TypeError(H+': incorrect invocation!');return U}},function(M){M.exports=!1},function(M,U,W){var H=W(1),Y=W(114),G=W(74),X=W(86)('IE_PROTO'),$=function(){},J='prototype',Z=function(){var Q=W(73)('iframe'),ee=G.length,te='<',ne='>',ae;for(Q.style.display='none',W(76).appendChild(Q),Q.src='javascript:',ae=Q.contentWindow.document,ae.open(),ae.write(te+'script'+ne+'document.F=Object'+te+'/script'+ne),ae.close(),Z=ae.F;ee--;)delete Z[J][G[ee]];return Z()};M.exports=Object.create||function(ee,te){var ne;return null===ee?ne=Z():($[J]=H(ee),ne=new $,$[J]=null,ne[X]=ee),void 0===te?ne:Y(ne,te)}},function(M,U,W){var H=W(116),Y=W(74).concat('length','prototype');U.f=Object.getOwnPropertyNames||function(X){return H(X,Y)}},function(M,U,W){var H=W(116),Y=W(74);M.exports=Object.keys||function(X){return H(X,Y)}},function(M,U,W){var H=W(14);M.exports=function(Y,G,X){for(var $ in G)H(Y,$,G[$],X);return Y}},function(M,U,W){'use strict';'use strict';var H=W(2),Y=W(7),G=W(6),X=W(5)('species');M.exports=function($){var J=H[$];G&&J&&!J[X]&&Y.f(J,X,{configurable:!0,get:function(){return this}})}},function(M,U,W){var H=W(32),Y=Math.max,G=Math.min;M.exports=function(X,$){return X=H(X),0>X?Y(X+$,0):G(X,$)}},function(M){var U=0,W=Math.random();M.exports=function(H){return'Symbol('.concat(H===void 0?'':H,')_',(++U+W).toString(36))}},function(M,U,W){var H=W(5)('unscopables'),Y=Array.prototype;Y[H]==void 0&&W(13)(Y,H,{}),M.exports=function(G){Y[H][G]=!0}},function(M,U,W){var H=W(27),Y=W(110),G=W(78),X=W(1),$=W(9),J=W(95),Z={},Q={},U=M.exports=function(ee,te,ne,ae,ie){var oe=ie?function(){return ee}:J(ee),se=H(ne,ae,te?2:1),le=0,de,ue,pe,ce;if('function'!=typeof oe)throw TypeError(ee+' is not iterable!');if(G(oe)){for(de=$(ee.length);de>le;le++)if(ce=te?se(X(ue=ee[le])[0],ue[1]):se(ee[le]),ce===Z||ce===Q)return ce;}else for(pe=oe.call(ee);!(ue=pe.next()).done;)if(ce=Y(pe,se,ue.value,te),ce===Z||ce===Q)return ce};U.BREAK=Z,U.RETURN=Q},function(M){M.exports={}},function(M,U,W){var H=W(7).f,Y=W(11),G=W(5)('toStringTag');M.exports=function(X,$,J){X&&!Y(X=J?X:X.prototype,G)&&H(X,G,{configurable:!0,value:$})}},function(M,U,W){var H=W(0),Y=W(20),G=W(3),X=W(91),$='['+X+']',J='\u200B\x85',Z=RegExp('^'+$+$+'*'),Q=RegExp($+$+'*$'),ee=function(ne,ae,ie){var oe={},se=G(function(){return!!X[ne]()||J[ne]()!=J}),le=oe[ne]=se?ae(te):X[ne];ie&&(oe[ie]=le),H(H.P+H.F*se,'String',oe)},te=ee.trim=function(ne,ae){return ne=Y(ne)+'',1&ae&&(ne=ne.replace(Z,'')),2&ae&&(ne=ne.replace(Q,'')),ne};M.exports=ee},function(M,U,W){'use strict';'use strict';var H=W(331),Y=W(340),G=Function.prototype.apply,X=Function.prototype.call,$=Object.create,J=Object.defineProperty,Z=Object.defineProperties,Q=Object.prototype.hasOwnProperty,ee={configurable:!0,enumerable:!1,writable:!0},te,ne,ae,ie,oe,se,le;te=function(de,ue){var pe;return Y(ue),Q.call(this,'__ee__')?pe=this.__ee__:(pe=ee.value=$(null),J(this,'__ee__',ee),ee.value=null),pe[de]?'object'==typeof pe[de]?pe[de].push(ue):pe[de]=[pe[de],ue]:pe[de]=ue,this},ne=function(de,ue){var pe,ce;return Y(ue),ce=this,te.call(this,de,pe=function(){ae.call(ce,de,pe),G.call(ue,this,arguments)}),pe.__eeOnceListener__=ue,this},ae=function(de,ue){var pe,ce,fe,ge;if(Y(ue),!Q.call(this,'__ee__'))return this;if(pe=this.__ee__,!pe[de])return this;if(ce=pe[de],'object'==typeof ce)for(ge=0;fe=ce[ge];++ge)(fe===ue||fe.__eeOnceListener__===ue)&&(2===ce.length?pe[de]=ce[ge?0:1]:ce.splice(ge,1));else(ce===ue||ce.__eeOnceListener__===ue)&&delete pe[de];return this},ie=function(de){var ue,pe,ce,fe,ge;if(Q.call(this,'__ee__')&&(fe=this.__ee__[de],fe))if('object'==typeof fe){for(pe=arguments.length,ge=Array(pe-1),ue=1;ue<pe;++ue)ge[ue-1]=arguments[ue];for(fe=fe.slice(),ue=0;ce=fe[ue];++ue)G.call(ce,this,ge)}else switch(arguments.length){case 1:X.call(fe,this);break;case 2:X.call(fe,this,arguments[1]);break;case 3:X.call(fe,this,arguments[1],arguments[2]);break;default:for(pe=arguments.length,ge=Array(pe-1),ue=1;ue<pe;++ue)ge[ue-1]=arguments[ue];G.call(fe,this,ge);}},oe={on:te,once:ne,off:ae,emit:ie},se={on:H(te),once:H(ne),off:H(ae),emit:H(ie)},le=Z({},se),M.exports=U=function(de){return null==de?$(le):Z(Object(de),se)},U.methods=oe},function(M,U,W){'use strict';'use strict';function H(J,Z){if(!(J instanceof Z))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function J(Z,Q){for(var ee=0;ee<Q.length;ee++){var te=Q[ee];te.enumerable=te.enumerable||!1,te.configurable=!0,'value'in te&&(te.writable=!0),Object.defineProperty(Z,te.key,te)}}return function(Z,Q,ee){return Q&&J(Z.prototype,Q),ee&&J(Z,ee),Z}}(),G=W(64),X=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G),$=function(){function J(Z){H(this,J);var Q,ee;Q=Z.indexOf('://'),-1<Q&&(Z=new URL(Z).pathname),ee=this.parse(Z),this.path=Z,this.directory=this.isDirectory(Z)?Z:ee.dir+'/',this.filename=ee.base,this.extension=ee.ext.slice(1)}return Y(J,[{key:'parse',value:function(Q){return X.default.parse(Q)}},{key:'isAbsolute',value:function(Q){return X.default.isAbsolute(Q||this.path)}},{key:'isDirectory',value:function(Q){return'/'===Q.charAt(Q.length-1)}},{key:'resolve',value:function(Q){return X.default.resolve(this.directory,Q)}},{key:'relative',value:function(Q){return X.default.relative(this.directory,Q)}},{key:'splitPath',value:function(Q){return this.splitPathRe.exec(Q).slice(1)}},{key:'toString',value:function(){return this.path}}]),J}();U.default=$,M.exports=U['default']},function(M,U,W){var H=W(19),Y=W(5)('toStringTag'),G='Arguments'==H(function(){return arguments}()),X=function($,J){try{return $[J]}catch(Z){}};M.exports=function($){var J,Z,Q;return $===void 0?'Undefined':null===$?'Null':'string'==typeof(Z=X(J=Object($),Y))?Z:G?H(J):'Object'==(Q=H(J))&&'function'==typeof J.callee?'Arguments':Q}},function(M,U,W){var H=W(19);M.exports=Object('z').propertyIsEnumerable(0)?Object:function(Y){return'String'==H(Y)?Y.split(''):Object(Y)}},function(M,U){U.f={}.propertyIsEnumerable},function(M,U,W){'use strict';'use strict';Object.defineProperty(U,'__esModule',{value:!0}),U.replaceBase=function($,J){var Z,Q;$&&(Q=(0,H.qs)($,'head'),Z=(0,H.qs)(Q,'base'),!Z&&(Z=$.createElement('base'),Q.insertBefore(Z,Q.firstChild)),Z.setAttribute('href',J.url))},U.replaceCanonical=function($,J){var Z,Q,ee=J.url;$&&(Z=(0,H.qs)($,'head'),Q=(0,H.qs)(Z,'link[rel=\'canonical\']'),Q?Q.setAttribute('href',ee):(Q=$.createElement('link'),Q.setAttribute('rel','canonical'),Q.setAttribute('href',ee),Z.appendChild(Q)))},U.replaceLinks=function($,J){var Z=$.querySelectorAll('a[href]'),Q=(0,H.qs)($.ownerDocument,'base'),ee=Q?Q.href:void 0,te=function(ae){var ie=ae.getAttribute('href');if(0!==ie.indexOf('mailto:')){var oe=-1<ie.indexOf('://'),se=new G.default(ie,ee);oe?ae.setAttribute('target','_blank'):ae.onclick=function(){return se&&se.hash?J(se.Path.path+se.hash):se?J(se.Path.path):J(ie),!1}}}.bind(this);for(var ne=0;ne<Z.length;ne++)te(Z[ne])},U.substitute=function($,J,Z){return J.forEach(function(Q,ee){Q&&Z[ee]&&($=$.replace(new RegExp(Q,'g'),Z[ee]))}),$};var H=W(8),Y=W(70),G=function($){return $&&$.__esModule?$:{default:$}}(Y)},function(M,U,W){var H=W(16),Y=W(9),G=W(40);M.exports=function(X){return function($,J,Z){var Q=H($),ee=Y(Q.length),te=G(Z,ee),ne;if(X&&J!=J){for(;ee>te;)if(ne=Q[te++],ne!=ne)return!0;}else for(;ee>te;te++)if((X||te in Q)&&Q[te]===J)return X||te||0;return!X&&-1}}},function(M,U,W){'use strict';'use strict';var H=W(2),Y=W(0),G=W(14),X=W(38),$=W(30),J=W(43),Z=W(33),Q=W(4),ee=W(3),te=W(59),ne=W(45),ae=W(77);M.exports=function(ie,oe,se,le,de,ue){var pe=H[ie],ce=pe,fe=de?'set':'add',ge=ce&&ce.prototype,he={},ye=function(ke){var we=ge[ke];G(ge,ke,'delete'==ke?function(Se){return ue&&!Q(Se)?!1:we.call(this,0===Se?0:Se)}:'has'==ke?function(Ee){return ue&&!Q(Ee)?!1:we.call(this,0===Ee?0:Ee)}:'get'==ke?function(Ee){return ue&&!Q(Ee)?void 0:we.call(this,0===Ee?0:Ee)}:'add'==ke?function(Ee){return we.call(this,0===Ee?0:Ee),this}:function(Ee,Pe){return we.call(this,0===Ee?0:Ee,Pe),this})};if('function'!=typeof ce||!(ue||ge.forEach&&!ee(function(){new ce().entries().next()})))ce=le.getConstructor(oe,ie,de,fe),X(ce.prototype,se),$.NEED=!0;else{var me=new ce,ve=me[fe](ue?{}:-0,1)!=me,be=ee(function(){me.has(1)}),xe=te(function(ke){new ce(ke)}),_e=!ue&&ee(function(){for(var ke=new ce,we=5;we--;)ke[fe](we,we);return!ke.has(-0)});xe||(ce=oe(function(ke,we){Z(ke,ce,ie);var Se=ae(new pe,ke,ce);return void 0!=we&&J(we,de,Se[fe],Se),Se}),ce.prototype=ge,ge.constructor=ce),(be||_e)&&(ye('delete'),ye('has'),de&&ye('get')),(_e||ve)&&ye(fe),ue&&ge.clear&&delete ge.clear}return ne(ce,ie),he[ie]=ce,Y(Y.G+Y.W+Y.F*(ce!=pe),he),ue||le.setStrong(ce,ie,de),ce}},function(M,U,W){'use strict';'use strict';var H=W(13),Y=W(14),G=W(3),X=W(20),$=W(5);M.exports=function(J,Z,Q){var ee=$(J),te=Q(X,ee,''[J]),ne=te[0],ae=te[1];G(function(){var ie={};return ie[ee]=function(){return 7},7!=''[J](ie)})&&(Y(String.prototype,J,ne),H(RegExp.prototype,ee,2==Z?function(ie,oe){return ae.call(ie,this,oe)}:function(ie){return ae.call(ie,this)}))}},function(M,U,W){'use strict';'use strict';var H=W(1);M.exports=function(){var Y=H(this),G='';return Y.global&&(G+='g'),Y.ignoreCase&&(G+='i'),Y.multiline&&(G+='m'),Y.unicode&&(G+='u'),Y.sticky&&(G+='y'),G}},function(M){M.exports=function(U,W,H){var Y=H===void 0;switch(W.length){case 0:return Y?U():U.call(H);case 1:return Y?U(W[0]):U.call(H,W[0]);case 2:return Y?U(W[0],W[1]):U.call(H,W[0],W[1]);case 3:return Y?U(W[0],W[1],W[2]):U.call(H,W[0],W[1],W[2]);case 4:return Y?U(W[0],W[1],W[2],W[3]):U.call(H,W[0],W[1],W[2],W[3]);}return U.apply(H,W)}},function(M,U,W){var H=W(4),Y=W(19),G=W(5)('match');M.exports=function(X){var $;return H(X)&&(($=X[G])===void 0?'RegExp'==Y(X):!!$)}},function(M,U,W){var H=W(5)('iterator'),Y=!1;try{var G=[7][H]();G['return']=function(){Y=!0},Array.from(G,function(){throw 2})}catch(X){}M.exports=function(X,$){if(!$&&!Y)return!1;var J=!1;try{var Z=[7],Q=Z[H]();Q.next=function(){return{done:J=!0}},Z[H]=function(){return Q},X(Z)}catch(ee){}return J}},function(M,U,W){M.exports=W(34)||!W(3)(function(){var H=Math.random();__defineSetter__.call(null,H,function(){}),delete W(2)[H]})},function(M,U){U.f=Object.getOwnPropertySymbols},function(M,U,W){var H=W(2),Y='__core-js_shared__',G=H[Y]||(H[Y]={});M.exports=function(X){return G[X]||(G[X]={})}},function(M,U,W){for(var H=W(2),Y=W(13),G=W(41),X=G('typed_array'),$=G('view'),J=!!(H.ArrayBuffer&&H.DataView),Z=J,Q=0,te='Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'.split(','),ee;9>Q;)(ee=H[te[Q++]])?(Y(ee.prototype,X,!0),Y(ee.prototype,$,!0)):Z=!1;M.exports={ABV:J,CONSTR:Z,TYPED:X,VIEW:$}},function(M,U,W){'use strict';(function(H){'use strict';function Y(J){if('string'!=typeof J)throw new TypeError('Path must be a string. Received '+J)}function G(J,Z){var Q='',ee=-1,te=0,ne;for(var ae=0;ae<=J.length;++ae){if(ae<J.length)ne=J.charCodeAt(ae);else if(47===ne)break;else ne=47;if(47===ne){if(ee==ae-1||1==te);else if(ee!=ae-1&&2==te){if(2>Q.length||46!==Q.charCodeAt(Q.length-1)||46!==Q.charCodeAt(Q.length-2))if(2<Q.length){for(var ie=Q.length-1,oe=ie;0<=oe&&47!==Q.charCodeAt(oe);--oe);if(oe!==ie){Q=-1===oe?'':Q.slice(0,oe),ee=ae,te=0;continue}}else if(2===Q.length||1===Q.length){Q='',ee=ae,te=0;continue}Z&&(0<Q.length?Q+='/..':Q='..')}else 0<Q.length?Q+='/'+J.slice(ee+1,ae):Q=J.slice(ee+1,ae);ee=ae,te=0}else 46===ne&&-1!=te?++te:te=-1}return Q}function X(J,Z){var Q=Z.dir||Z.root,ee=Z.base||(Z.name||'')+(Z.ext||'');return Q?Q===Z.root?Q+ee:Q+J+ee:ee}var $={resolve:function(){var Z='',Q=!1,ee;for(var te=arguments.length-1;-1<=te&&!Q;te--){var ne;(0<=te?ne=arguments[te]:(void 0==ee&&(ee=H.cwd()),ne=ee),Y(ne),0!==ne.length)&&(Z=ne+'/'+Z,Q=47===ne.charCodeAt(0))}return(Z=G(Z,!Q),Q)?0<Z.length?'/'+Z:'/':0<Z.length?Z:'.'},normalize:function(Z){if(Y(Z),0===Z.length)return'.';var Q=47===Z.charCodeAt(0),ee=47===Z.charCodeAt(Z.length-1);return Z=G(Z,!Q),0!==Z.length||Q||(Z='.'),0<Z.length&&ee&&(Z+='/'),Q?'/'+Z:Z},isAbsolute:function(Z){return Y(Z),0<Z.length&&47===Z.charCodeAt(0)},join:function(){if(0===arguments.length)return'.';var Z;for(var Q=0;Q<arguments.length;++Q){var ee=arguments[Q];Y(ee),0<ee.length&&(Z==void 0?Z=ee:Z+='/'+ee)}return void 0===Z?'.':$.normalize(Z)},relative:function(Z,Q){if(Y(Z),Y(Q),Z===Q)return'';if(Z=$.resolve(Z),Q=$.resolve(Q),Z===Q)return'';for(var ee=1;ee<Z.length&&47===Z.charCodeAt(ee);++ee);for(var te=Z.length,ne=te-ee,ae=1;ae<Q.length&&47===Q.charCodeAt(ae);++ae);for(var ie=Q.length,oe=ie-ae,se=ne<oe?ne:oe,le=-1,de=0;de<=se;++de){if(de===se){if(oe>se){if(47===Q.charCodeAt(ae+de))return Q.slice(ae+de+1);if(0==de)return Q.slice(ae+de)}else ne>se&&(47===Z.charCodeAt(ee+de)?le=de:0===de&&(le=0));break}var ue=Z.charCodeAt(ee+de),pe=Q.charCodeAt(ae+de);if(ue!==pe)break;else 47===ue&&(le=de)}var ce='';for(de=ee+le+1;de<=te;++de)(de===te||47===Z.charCodeAt(de))&&(ce+=0===ce.length?'..':'/..');return 0<ce.length?ce+Q.slice(ae+le):(ae+=le,47===Q.charCodeAt(ae)&&++ae,Q.slice(ae))},_makeLong:function(Z){return Z},dirname:function(Z){if(Y(Z),0===Z.length)return'.';var Q=Z.charCodeAt(0),ee=47===Q,te=-1,ne=!0;for(var ae=Z.length-1;1<=ae;--ae)if(Q=Z.charCodeAt(ae),47!==Q)ne=!1;else if(!ne){te=ae;break}return-1===te?ee?'/':'.':ee&&1===te?'//':Z.slice(0,te)},basename:function(Z,Q){if(Q!==void 0&&'string'!=typeof Q)throw new TypeError('"ext" argument must be a string');Y(Z);var ee=0,te=-1,ne=!0,ae;if(void 0!==Q&&0<Q.length&&Q.length<=Z.length){if(Q.length===Z.length&&Q===Z)return'';var ie=Q.length-1,oe=-1;for(ae=Z.length-1;0<=ae;--ae){var se=Z.charCodeAt(ae);if(47!==se)-1==oe&&(ne=!1,oe=ae+1),0<=ie&&(se===Q.charCodeAt(ie)?-1==--ie&&(te=ae):(ie=-1,te=oe));else if(!ne){ee=ae+1;break}}return ee===te?te=oe:-1===te&&(te=Z.length),Z.slice(ee,te)}for(ae=Z.length-1;0<=ae;--ae)if(47!==Z.charCodeAt(ae))-1==te&&(ne=!1,te=ae+1);else if(!ne){ee=ae+1;break}return-1===te?'':Z.slice(ee,te)},extname:function(Z){Y(Z);var Q=-1,ee=0,te=-1,ne=!0,ae=0;for(var ie=Z.length-1;0<=ie;--ie){var oe=Z.charCodeAt(ie);if(47===oe){if(!ne){ee=ie+1;break}continue}-1==te&&(ne=!1,te=ie+1),46===oe?-1==Q?Q=ie:1!=ae&&(ae=1):-1!=Q&&(ae=-1)}return-1===Q||-1===te||0==ae||1==ae&&Q===te-1&&Q===ee+1?'':Z.slice(Q,te)},format:function(Z){if(null===Z||'object'!=typeof Z)throw new TypeError('Parameter "pathObject" must be an object, not '+typeof Z);return X('/',Z)},parse:function(Z){Y(Z);var Q={root:'',dir:'',base:'',ext:'',name:''};if(0===Z.length)return Q;var ee=Z.charCodeAt(0),te=47===ee,ne;te?(Q.root='/',ne=1):ne=0;for(var ae=-1,ie=0,oe=-1,se=!0,le=Z.length-1,de=0;le>=ne;--le){if(ee=Z.charCodeAt(le),47===ee){if(!se){ie=le+1;break}continue}-1==oe&&(se=!1,oe=le+1),46===ee?-1==ae?ae=le:1!=de&&(de=1):-1!=ae&&(de=-1)}return-1==ae||-1==oe||0==de||1==de&&ae==oe-1&&ae==ie+1?-1!=oe&&(0==ie&&te?Q.base=Q.name=Z.slice(1,oe):Q.base=Q.name=Z.slice(ie,oe)):(0==ie&&te?(Q.name=Z.slice(1,ae),Q.base=Z.slice(1,oe)):(Q.name=Z.slice(ie,ae),Q.base=Z.slice(ie,oe)),Q.ext=Z.slice(ae,oe)),0<ie?Q.dir=Z.slice(0,ie-1):te&&(Q.dir='/'),Q},sep:'/',delimiter:':',posix:null};M.exports=$}).call(U,W(128))},function(M,U,W){'use strict';'use strict';function H(oe){return oe&&oe.__esModule?oe:{default:oe}}function Y(oe,se){if(!(oe instanceof se))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function oe(se,le){for(var de=0;de<le.length;de++){var ue=le[de];ue.enumerable=ue.enumerable||!1,ue.configurable=!0,'value'in ue&&(ue.writable=!0),Object.defineProperty(se,ue.key,ue)}}return function(se,le,de){return le&&oe(se.prototype,le),de&&oe(se,de),se}}(),X=W(47),$=H(X),J=W(8),Z=W(22),Q=H(Z),ee=W(66),te=H(ee),ne=W(52),ae=['keydown','keyup','keypressed','mouseup','mousedown','click','touchend','touchstart'],ie=function(){function oe(se,le,de){Y(this,oe),this.epubcfi=new Q.default,this.document=se,this.documentElement=this.document.documentElement,this.content=le||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.cfiBase=de||'',this.listeners()}return G(oe,[{key:'width',value:function(le){var de=this.content;return le&&(0,J.isNumber)(le)&&(le=le+'px'),le&&(de.style.width=le),this.window.getComputedStyle(de).width}},{key:'height',value:function(le){var de=this.content;return le&&(0,J.isNumber)(le)&&(le=le+'px'),le&&(de.style.height=le),this.window.getComputedStyle(de).height}},{key:'contentWidth',value:function(le){var de=this.content||this.document.body;return le&&(0,J.isNumber)(le)&&(le=le+'px'),le&&(de.style.width=le),this.window.getComputedStyle(de).width}},{key:'contentHeight',value:function(le){var de=this.content||this.document.body;return le&&(0,J.isNumber)(le)&&(le=le+'px'),le&&(de.style.height=le),this.window.getComputedStyle(de).height}},{key:'textWidth',value:function(){var de=this.document.createRange(),ue=this.content||this.document.body,le;return de.selectNodeContents(ue),le=de.getBoundingClientRect().width,le}},{key:'textHeight',value:function(){var de=this.document.createRange(),ue=this.content||this.document.body,le;return de.selectNodeContents(ue),le=de.getBoundingClientRect().height,le}},{key:'scrollWidth',value:function(){var le=this.documentElement.scrollWidth;return le}},{key:'scrollHeight',value:function(){var le=this.documentElement.scrollHeight;return le}},{key:'overflow',value:function(le){return le&&(this.documentElement.style.overflow=le),this.window.getComputedStyle(this.documentElement).overflow}},{key:'overflowX',value:function(le){return le&&(this.documentElement.style.overflowX=le),this.window.getComputedStyle(this.documentElement).overflowX}},{key:'overflowY',value:function(le){return le&&(this.documentElement.style.overflowY=le),this.window.getComputedStyle(this.documentElement).overflowY}},{key:'css',value:function(le,de){var ue=this.content||this.document.body;return de&&(ue.style[le]=de),this.window.getComputedStyle(ue)[le]}},{key:'viewport',value:function(le){var fe=this.document.querySelector('meta[name=\'viewport\']'),ge='',de,ue,pe,ce;if(fe&&fe.hasAttribute('content')){var he=fe.getAttribute('content'),ye=he.split(/\s*,\s*/);ye[0]&&(de=ye[0].replace('width=','').trim()),ye[1]&&(ue=ye[1].replace('height=','').trim()),ye[2]&&(pe=ye[2].replace('initial-scale=','').trim()),ye[3]&&(ce=ye[3].replace('user-scalable=','').trim())}return le&&(ge+='width='+(le.width||de),ge+=', height='+(le.height||ue),(le.scale||pe)&&(ge+=', initial-scale='+(le.scale||pe)),(le.scalable||ce)&&(ge+=', user-scalable='+(le.scalable||ce)),!fe&&(fe=this.document.createElement('meta'),fe.setAttribute('name','viewport'),this.document.querySelector('head').appendChild(fe)),fe.setAttribute('content',ge)),{width:parseInt(de),height:parseInt(ue)}}},{key:'expand',value:function(){this.emit('expand')}},{key:'listeners',value:function(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),this.resizeListeners(),this.linksHandler()}},{key:'removeListeners',value:function(){this.removeEventListeners(),this.removeSelectionListeners()}},{key:'resizeListeners',value:function(){var le,de;clearTimeout(this.expanding),le=this.scrollWidth(),de=this.scrollHeight(),(le!=this._size.width||de!=this._size.height)&&(this._size={width:le,height:de},this.emit('resize',this._size)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}},{key:'mediaQueryListeners',value:function(){var le=this.document.styleSheets,de=function(ge){ge.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}.bind(this);for(var ue=0;ue<le.length;ue+=1){var pe;try{pe=le[ue].cssRules}catch(ge){return}if(!pe)return;for(var ce=0;ce<pe.length;ce+=1)if(pe[ce].media){var fe=this.window.matchMedia(pe[ce].media.mediaText);fe.addListener(de)}}}},{key:'observe',value:function(le){var de=this,ue=new MutationObserver(function(){de._expanding&&de.expand()});return ue.observe(le,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),ue}},{key:'imageLoadListeners',value:function(){var le=this.document.querySelectorAll('img'),de;for(var ue=0;ue<le.length;ue++)de=le[ue],'undefined'!=typeof de.naturalWidth&&0===de.naturalWidth&&(de.onload=this.expand.bind(this))}},{key:'fontLoadListeners',value:function(){this.document&&this.document.fonts&&this.document.fonts.ready.then(function(){this.expand()}.bind(this))}},{key:'root',value:function(){return this.document?this.document.documentElement:null}},{key:'locationOf',value:function(le,de){var pe={left:0,top:0},ue;if(this.document){if(this.epubcfi.isCfiString(le)){var ce=new Q.default(le).toRange(this.document,de);ce&&(ce.startContainer.nodeType===Node.ELEMENT_NODE?(ue=ce.startContainer.getBoundingClientRect(),pe.left=ue.left,pe.top=ue.top):ce.collapsed?ue=ce.getClientRects()[0]:ue=ce.getBoundingClientRect())}else if('string'==typeof le&&-1<le.indexOf('#')){var fe=le.substring(le.indexOf('#')+1),ge=this.document.getElementById(fe);ge&&(ue=ge.getBoundingClientRect())}return ue&&(pe.left=ue.left,pe.top=ue.top),pe}}},{key:'addStylesheet',value:function(le){return new Promise(function(de){var pe=!1,ue;return this.document?(ue=this.document.querySelector('link[href=\''+le+'\']'),ue?void de(!0):void(ue=this.document.createElement('link'),ue.type='text/css',ue.rel='stylesheet',ue.href=le,ue.onload=ue.onreadystatechange=function(){pe||this.readyState&&'complete'!=this.readyState||(pe=!0,setTimeout(function(){de(!0)},1))},this.document.head.appendChild(ue))):void de(!1)}.bind(this))}},{key:'addStylesheetRules',value:function(le){var pe='epubjs-inserted-css',de,ue;if(this.document){de=this.document.getElementById('#'+pe),de||(de=this.document.createElement('style'),de.id=pe),this.document.head.appendChild(de),ue=de.sheet;for(var ce=0,fe=le.length;ce<fe;ce++){var ge=1,he=le[ce],ye=le[ce][0],me='';'[object Array]'===Object.prototype.toString.call(he[1][0])&&(he=he[1],ge=0);for(var ve=he.length;ge<ve;ge++){var be=he[ge];me+=be[0]+':'+be[1]+(be[2]?' !important':'')+';\n'}ue.insertRule(ye+'{'+me+'}',ue.cssRules.length)}}}},{key:'addScript',value:function(le){return new Promise(function(de){var pe=!1,ue;return this.document?void(ue=this.document.createElement('script'),ue.type='text/javascript',ue.async=!0,ue.src=le,ue.onload=ue.onreadystatechange=function(){pe||this.readyState&&'complete'!=this.readyState||(pe=!0,setTimeout(function(){de(!0)},1))},this.document.head.appendChild(ue)):void de(!1)}.bind(this))}},{key:'addClass',value:function(le){var de;this.document&&(de=this.content||this.document.body,de.classList.add(le))}},{key:'removeClass',value:function(le){var de;this.document&&(de=this.content||this.document.body,de.classList.remove(le))}},{key:'addEventListeners',value:function(){this.document&&ae.forEach(function(le){this.document.addEventListener(le,this.triggerEvent.bind(this),!1)},this)}},{key:'removeEventListeners',value:function(){this.document&&ae.forEach(function(le){this.document.removeEventListener(le,this.triggerEvent,!1)},this)}},{key:'triggerEvent',value:function(le){this.emit(le.type,le)}},{key:'addSelectionListeners',value:function(){this.document&&this.document.addEventListener('selectionchange',this.onSelectionChange.bind(this),!1)}},{key:'removeSelectionListeners',value:function(){this.document&&this.document.removeEventListener('selectionchange',this.onSelectionChange,!1)}},{key:'onSelectionChange',value:function(){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout(function(){var le=this.window.getSelection();this.triggerSelectedEvent(le)}.bind(this),500)}},{key:'triggerSelectedEvent',value:function(le){var de,ue;le&&0<le.rangeCount&&(de=le.getRangeAt(0),!de.collapsed&&(ue=new Q.default(de,this.cfiBase).toString(),this.emit('selected',ue),this.emit('selectedRange',de)))}},{key:'range',value:function(le,de){var ue=new Q.default(le);return ue.toRange(this.document,de)}},{key:'map',value:function(le){var se=new te.default(le);return se.section()}},{key:'size',value:function(le,de){0<=le&&this.width(le),0<=de&&this.height(de),this.css('margin','0'),this.css('boxSizing','border-box')}},{key:'columns',value:function(le,de,ue,pe){var ce=(0,J.prefixed)('columnAxis'),fe=(0,J.prefixed)('columnGap'),ge=(0,J.prefixed)('columnWidth'),he=(0,J.prefixed)('columnFill');this.width(le),this.height(de),this.viewport({width:le,height:de,scale:1}),this.css('overflowY','hidden'),this.css('margin','0'),this.css('boxSizing','border-box'),this.css('maxWidth','inherit'),this.css(ce,'horizontal'),this.css(he,'auto'),this.css(fe,pe+'px'),this.css(ge,ue+'px')}},{key:'scaler',value:function(le,de,ue){var pe='';this.css('transformOrigin','top left'),(0<=de||0<=ue)&&(pe=' translate('+(de||0)+'px, '+(ue||0)+'px )'),this.css('transform','scale('+le+')'+pe)}},{key:'fit',value:function(le,de){var ue=this.viewport(),pe=le/ue.width,ce=de/ue.height,fe=pe<ce?pe:ce,ge=(de-ue.height*fe)/2;this.width(le),this.height(de),this.overflow('hidden'),this.viewport({scale:1}),this.scaler(fe,0,ge),this.css('backgroundColor','transparent')}},{key:'mapPage',value:function(le,de,ue){var pe=new te.default;return pe.page(this,le,de,ue)}},{key:'linksHandler',value:function(){var le=this;(0,ne.replaceLinks)(this.content,function(de){le.emit('link',de)})}},{key:'destroy',value:function(){this.observer&&this.observer.disconnect(),this.removeListeners()}}],[{key:'listenedEvents',get:function(){return ae}}]),oe}();(0,$.default)(ie.prototype),U.default=ie,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(J,Z){if(!(J instanceof Z))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function J(Z,Q){for(var ee=0;ee<Q.length;ee++){var te=Q[ee];te.enumerable=te.enumerable||!1,te.configurable=!0,'value'in te&&(te.writable=!0),Object.defineProperty(Z,te.key,te)}}return function(Z,Q,ee){return Q&&J(Z.prototype,Q),ee&&J(Z,ee),Z}}(),G=W(22),X=function(Z){return Z&&Z.__esModule?Z:{default:Z}}(G),$=function(){function J(Z){H(this,J),this.layout=Z}return Y(J,[{key:'section',value:function(Q){var ee=this.findRanges(Q),te=this.rangeListToCfiList(Q.section.cfiBase,ee);return te}},{key:'page',value:function(Q,ee,te,ne){var ae=Q&&Q.document&&Q.document.body;return ae?this.rangePairToCfiPair(ee,{start:this.findStart(ae,te,ne),end:this.findEnd(ae,te,ne)}):void 0}},{key:'walk',value:function(Q,ee){for(var te=document.createTreeWalker(Q,NodeFilter.SHOW_TEXT,{acceptNode:function(oe){return 0<oe.data.trim().length?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1),ne,ae;(ne=te.nextNode())&&(ae=ee(ne),!ae););return ae}},{key:'findRanges',value:function(Q){var ee=[],te=Q.contents.scrollWidth(),ne=this.layout.count(te),ae=this.layout.column,ie=this.layout.gap,oe,se;for(var le=0;le<ne.pages;le++)oe=(ae+ie)*le,se=ae*(le+1)+ie*le,ee.push({start:this.findStart(Q.document.body,oe,se),end:this.findEnd(Q.document.body,oe,se)});return ee}},{key:'findStart',value:function(Q,ee,te){for(var ne=[Q],oe=Q,ae,ie;ne.length;)if(ae=ne.shift(),ie=this.walk(ae,function(se){var le,de,ue,pe;return(se.nodeType==Node.TEXT_NODE?(pe=document.createRange(),pe.selectNodeContents(se),ue=pe.getBoundingClientRect()):ue=se.getBoundingClientRect(),le=ue.left,de=ue.right,le>=ee&&le<=te)?se:de>ee?se:void(oe=se,ne.push(se))}),ie)return this.findTextStartRange(ie,ee,te);return this.findTextStartRange(oe,ee,te)}},{key:'findEnd',value:function(Q,ee,te){for(var ne=[Q],ie=Q,ae,oe;ne.length;)if(ae=ne.shift(),oe=this.walk(ae,function(se){var le,de,ue,pe;return(se.nodeType==Node.TEXT_NODE?(pe=document.createRange(),pe.selectNodeContents(se),ue=pe.getBoundingClientRect()):ue=se.getBoundingClientRect(),le=ue.left,de=ue.right,le>te&&ie)?ie:de>te?se:void(ie=se,ne.push(se))}),oe)return this.findTextEndRange(oe,ee,te);return this.findTextEndRange(ie,ee,te)}},{key:'findTextStartRange',value:function(Q,ee){var te=this.splitTextNodeIntoRanges(Q),ne,ae;for(var ie=0;ie<te.length;ie++)if(ne=te[ie],ae=ne.getBoundingClientRect(),ae.left>=ee)return ne;return te[0]}},{key:'findTextEndRange',value:function(Q,ee,te){var ne=this.splitTextNodeIntoRanges(Q),ae,ie,oe;for(var se=0;se<ne.length;se++){if(ie=ne[se],oe=ie.getBoundingClientRect(),oe.left>te&&ae)return ae;if(oe.right>te)return ie;ae=ie}return ne[ne.length-1]}},{key:'splitTextNodeIntoRanges',value:function(Q,ee){var te=[],ne=Q.textContent||'',ae=ne.trim(),oe=Q.ownerDocument,se=ee||' ',le=ae.indexOf(se),ie;if(-1===le||Q.nodeType!=Node.TEXT_NODE)return ie=oe.createRange(),ie.selectNodeContents(Q),[ie];for(ie=oe.createRange(),ie.setStart(Q,0),ie.setEnd(Q,le),te.push(ie),ie=!1;-1!=le;)le=ae.indexOf(se,le+1),0<le&&(ie&&(ie.setEnd(Q,le),te.push(ie)),ie=oe.createRange(),ie.setStart(Q,le+1));return ie&&(ie.setEnd(Q,ae.length),te.push(ie)),te}},{key:'rangePairToCfiPair',value:function(Q,ee){var te=ee.start,ne=ee.end;te.collapse(!0),ne.collapse(!0);var ae=new X.default(te,Q).toString(),ie=new X.default(ne,Q).toString();return{start:ae,end:ie}}},{key:'rangeListToCfiList',value:function(Q,ee){var te=[],ne;for(var ae=0;ae<ee.length;ae++)ne=this.rangePairToCfiPair(Q,ee[ae]),te.push(ne);return te}}]),J}();U.default=$,M.exports=U['default']},function(M,U){'use strict';'use strict';function W(G,X){if(!(G instanceof X))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var H=function(){function G(X,$){for(var J=0;J<$.length;J++){var Z=$[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(X,Z.key,Z)}}return function(X,$,J){return $&&G(X.prototype,$),J&&G(X,J),X}}(),Y=function(){function G(X){W(this,G),this.context=X||this,this.hooks=[]}return H(G,[{key:'register',value:function(){for(var $=0;$<arguments.length;++$)if('function'==typeof arguments[$])this.hooks.push(arguments[$]);else for(var J=0;J<arguments[$].length;++J)this.hooks.push(arguments[$][J])}},{key:'trigger',value:function(){var $=arguments,J=this.context,Z=[];return this.hooks.forEach(function(Q){var ee=Q.apply(J,$);ee&&'function'==typeof ee.then&&Z.push(ee)}),Promise.all(Z)}},{key:'list',value:function(){return this.hooks}},{key:'clear',value:function(){return this.hooks=[]}}]),G}();U.default=Y,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H($,J){if(!($ instanceof J))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0}),U.Task=void 0;var Y=function(){function $(J,Z){for(var Q=0;Q<Z.length;Q++){var ee=Z[Q];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,Z,Q){return Z&&$(J.prototype,Z),Q&&$(J,Q),J}}(),G=W(8),X=function(){function $(J){H(this,$),this._q=[],this.context=J,this.tick=G.requestAnimationFrame,this.running=!1,this.paused=!1}return Y($,[{key:'enqueue',value:function(){var te=[].shift.call(arguments),ne=arguments,Z,Q,ee;if(!te)throw new Error('No Task Provided');return'function'==typeof te?(Z=new G.defer,Q=Z.promise,ee={task:te,args:ne,deferred:Z,promise:Q}):ee={promise:te},this._q.push(ee),!1!=this.paused||this.running||this.run(),ee.promise}},{key:'dequeue',value:function(){var Z,Q,ee;if(this._q.length){if(Z=this._q.shift(),Q=Z.task,Q)return(ee=Q.apply(this.context,Z.args),ee&&'function'==typeof ee.then)?ee.then(function(){Z.deferred.resolve.apply(this.context,arguments)}.bind(this),function(){Z.deferred.reject.apply(this.context,arguments)}.bind(this)):(Z.deferred.resolve.apply(this.context,ee),Z.promise);if(Z.promise)return Z.promise}else return Z=new G.defer,Z.deferred.resolve(),Z.promise}},{key:'dump',value:function(){for(;this._q.length;)this.dequeue()}},{key:'run',value:function(){var Z=this;return this.running||(this.running=!0,this.defered=new G.defer),this.tick.call(window,function(){Z._q.length?Z.dequeue().then(function(){this.run()}.bind(Z)):(Z.defered.resolve(),Z.running=void 0)}),!0==this.paused&&(this.paused=!1),this.defered.promise}},{key:'flush',value:function(){return this.running?this.running:this._q.length?(this.running=this.dequeue().then(function(){return this.running=void 0,this.flush()}.bind(this)),this.running):void 0}},{key:'clear',value:function(){this._q=[],this.running=!1}},{key:'length',value:function(){return this._q.length}},{key:'pause',value:function(){this.paused=!0}}]),$}();U.default=X,U.Task=function $(J,Z,Q){return H(this,$),function(){var ee=this,te=arguments||[];return new Promise(function(ne,ae){te.push(function(oe,se){!oe&&se?ae(se):ne(oe)}),J.apply(Q||ee,te)})}}},function(M,U,W){'use strict';'use strict';Object.defineProperty(U,'__esModule',{value:!0});var H=W(8),Y=W(48),G=function($){return $&&$.__esModule?$:{default:$}}(Y);U.default=function($,J,Z,Q){var ee='undefined'!=typeof window&&window.URL,te=ee?'blob':'arraybuffer',ne=new H.defer,ae=new XMLHttpRequest,ie=XMLHttpRequest.prototype;for(var oe in'overrideMimeType'in ie||Object.defineProperty(ie,'overrideMimeType',{value:function(){}}),Z&&(ae.withCredentials=!0),ae.onreadystatechange=function(){if(this.readyState===XMLHttpRequest.DONE){var le=!1;if((''===this.responseType||'document'===this.responseType)&&(le=this.responseXML),200===this.status||le){var de;if(!this.response&&!le)return ne.reject({status:this.status,message:'Empty Response',stack:new Error().stack}),ne.promise;if(403===this.status)return ne.reject({status:this.status,response:this.response,message:'Forbidden',stack:new Error().stack}),ne.promise;de=le?this.responseXML:(0,H.isXml)(J)?(0,H.parse)(this.response,'text/xml'):'xhtml'==J?(0,H.parse)(this.response,'application/xhtml+xml'):'html'==J||'htm'==J?(0,H.parse)(this.response,'text/html'):'json'==J?JSON.parse(this.response):'blob'==J?ee?this.response:new Blob([this.response]):this.response,ne.resolve(de)}else ne.reject({status:this.status,message:this.response,stack:new Error().stack})}},ae.onerror=function(le){ne.reject(le)},ae.open('GET',$,!0),Q)ae.setRequestHeader(oe,Q[oe]);return'json'==J&&ae.setRequestHeader('Accept','application/json'),J||(J=new G.default($).extension),'blob'==J&&(ae.responseType=te),(0,H.isXml)(J)&&ae.overrideMimeType('text/xml'),'xhtml'==J,'html'!=J&&'htm'!=J,'binary'==J&&(ae.responseType='arraybuffer'),ae.send(),ne.promise},M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(ee){return ee&&ee.__esModule?ee:{default:ee}}function Y(ee,te){if(!(ee instanceof te))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ee(te,ne){for(var ae=0;ae<ne.length;ae++){var ie=ne[ae];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,'value'in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}return function(te,ne,ae){return ne&&ee(te.prototype,ne),ae&&ee(te,ae),te}}(),X=W(48),$=H(X),J=W(64),Z=H(J),Q=function(){function ee(te,ne){Y(this,ee);var ae=-1<te.indexOf('://'),ie=te;if(this.Url=void 0,this.href=te,this.protocol='',this.origin='',this.hash='',this.hash='',this.search='',this.base=ne,!ae&&!1!==ne&&'string'!=typeof ne&&window&&window.location&&(this.base=window.location.href),ae||this.base)try{this.Url=this.base?new URL(te,this.base):new URL(te),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,ie=this.Url.pathname}catch(oe){this.Url=void 0}this.Path=new $.default(ie),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}return G(ee,[{key:'path',value:function(){return this.Path}},{key:'resolve',value:function(ne){var ae=-1<ne.indexOf('://'),ie;return ae?ne:(ie=Z.default.resolve(this.directory,ne),this.origin+ie)}},{key:'relative',value:function(ne){return Z.default.relative(ne,this.directory)}},{key:'toString',value:function(){return this.href}}]),ee}();U.default=Q,M.exports=U['default']},function(M,U,W){'use strict';'use strict';var H=W(10),Y=W(40),G=W(9);M.exports=function($){for(var J=H(this),Z=G(J.length),Q=arguments.length,ee=Y(1<Q?arguments[1]:void 0,Z),te=2<Q?arguments[2]:void 0,ne=void 0===te?Z:Y(te,Z);ne>ee;)J[ee++]=$;return J}},function(M,U,W){'use strict';'use strict';var H=W(7),Y=W(31);M.exports=function(G,X,$){X in G?H.f(G,X,Y(0,$)):G[X]=$}},function(M,U,W){var H=W(4),Y=W(2).document,G=H(Y)&&H(Y.createElement);M.exports=function(X){return G?Y.createElement(X):{}}},function(M){M.exports='constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',')},function(M,U,W){var H=W(5)('match');M.exports=function(Y){var G=/./;try{'/./'[Y](G)}catch(X){try{return G[H]=!1,!'/./'[Y](G)}catch($){}}return!0}},function(M,U,W){M.exports=W(2).document&&document.documentElement},function(M,U,W){var H=W(4),Y=W(85).set;M.exports=function(G,X,$){var Z=X.constructor,J;return Z!==$&&'function'==typeof Z&&(J=Z.prototype)!==$.prototype&&H(J)&&Y&&Y(G,J),G}},function(M,U,W){var H=W(44),Y=W(5)('iterator'),G=Array.prototype;M.exports=function(X){return X!==void 0&&(H.Array===X||G[Y]===X)}},function(M,U,W){var H=W(19);M.exports=Array.isArray||function(G){return'Array'==H(G)}},function(M,U,W){'use strict';'use strict';var H=W(35),Y=W(31),G=W(45),X={};W(13)(X,W(5)('iterator'),function(){return this}),M.exports=function($,J,Z){$.prototype=H(X,{next:Y(1,Z)}),G($,J+' Iterator')}},function(M,U,W){'use strict';'use strict';var H=W(34),Y=W(0),G=W(14),X=W(13),$=W(11),J=W(44),Z=W(80),Q=W(45),ee=W(18),te=W(5)('iterator'),ne=!([].keys&&'next'in[].keys()),ae='keys',ie='values',oe=function(){return this};M.exports=function(se,le,de,ue,pe,ce,fe){Z(de,le,ue);var ge=function(Pe){return!ne&&Pe in ve?ve[Pe]:Pe===ae?function(){return new de(this,Pe)}:Pe===ie?function(){return new de(this,Pe)}:function(){return new de(this,Pe)}},he=le+' Iterator',ye=pe==ie,me=!1,ve=se.prototype,be=ve[te]||ve['@@iterator']||pe&&ve[pe],xe=be||ge(pe),_e=pe?ye?ge('entries'):xe:void 0,ke='Array'==le?ve.entries||be:be,we,Se,Ee;if(ke&&(Ee=ee(ke.call(new se)),Ee!==Object.prototype&&(Q(Ee,he,!0),!H&&!$(Ee,te)&&X(Ee,te,oe))),ye&&be&&be.name!==ie&&(me=!0,xe=function(){return be.call(this)}),(!H||fe)&&(ne||me||!ve[te])&&X(ve,te,xe),J[le]=xe,J[he]=oe,pe)if(we={values:ye?xe:ge(ie),keys:ce?xe:ge(ae),entries:_e},fe)for(Se in we)Se in ve||G(ve,Se,we[Se]);else Y(Y.P+Y.F*(ne||me),le,we);return we}},function(M){var U=Math.expm1;M.exports=!U||22025.465794806718<U(10)||22025.465794806718>U(10)||-2e-17!=U(-2e-17)?function(H){return 0==(H=+H)?H:-1e-6<H&&1e-6>H?H+H*H/2:Math.exp(H)-1}:U},function(M){M.exports=Math.sign||function(W){return 0==(W=+W)||W!=W?W:0>W?-1:1}},function(M,U,W){var H=W(2),Y=W(92).set,G=H.MutationObserver||H.WebKitMutationObserver,X=H.process,$=H.Promise,J='process'==W(19)(X);M.exports=function(){var Z,Q,ee,te=function(){var oe,se;for(J&&(oe=X.domain)&&oe.exit();Z;){se=Z.fn,Z=Z.next;try{se()}catch(le){throw Z?ee():Q=void 0,le}}Q=void 0,oe&&oe.enter()};if(J)ee=function(){X.nextTick(te)};else if(G){var ne=!0,ae=document.createTextNode('');new G(te).observe(ae,{characterData:!0}),ee=function(){ae.data=ne=!ne}}else if($&&$.resolve){var ie=$.resolve();ee=function(){ie.then(te)}}else ee=function(){Y.call(H,te)};return function(oe){var se={fn:oe,next:void 0};Q&&(Q.next=se),Z||(Z=se,ee()),Q=se}}},function(M,U,W){var H=W(4),Y=W(1),G=function(X,$){if(Y(X),!H($)&&null!==$)throw TypeError($+': can\'t set as prototype!')};M.exports={set:Object.setPrototypeOf||('__proto__'in{}?function(X,$,J){try{J=W(27)(Function.call,W(17).f(Object.prototype,'__proto__').set,2),J(X,[]),$=!(X instanceof Array)}catch(Z){$=!0}return function(Q,ee){return G(Q,ee),$?Q.__proto__=ee:J(Q,ee),Q}}({},!1):void 0),check:G}},function(M,U,W){var H=W(62)('keys'),Y=W(41);M.exports=function(G){return H[G]||(H[G]=Y(G))}},function(M,U,W){var H=W(1),Y=W(12),G=W(5)('species');M.exports=function(X,$){var J=H(X).constructor,Z;return J===void 0||(Z=H(J)[G])==void 0?$:Y(Z)}},function(M,U,W){var H=W(32),Y=W(20);M.exports=function(G){return function(X,$){var J=Y(X)+'',Z=H($),Q=J.length,ee,te;return 0>Z||Z>=Q?G?'':void 0:(ee=J.charCodeAt(Z),55296>ee||56319<ee||Z+1===Q||56320>(te=J.charCodeAt(Z+1))||57343<te?G?J.charAt(Z):ee:G?J.slice(Z,Z+2):(ee-55296<<10)+(te-56320)+65536)}}},function(M,U,W){var H=W(58),Y=W(20);M.exports=function(G,X,$){if(H(X))throw TypeError('String#'+$+' doesn\'t accept regex!');return Y(G)+''}},function(M,U,W){'use strict';'use strict';var H=W(32),Y=W(20);M.exports=function(X){var $=Y(this)+'',J='',Z=H(X);if(0>Z||Z==1/0)throw RangeError('Count can\'t be negative');for(;0<Z;(Z>>>=1)&&($+=$))1&Z&&(J+=$);return J}},function(M){M.exports='\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF'},function(M,U,W){var H=W(27),Y=W(57),G=W(76),X=W(73),$=W(2),J=$.process,Z=$.setImmediate,Q=$.clearImmediate,ee=$.MessageChannel,te=0,ne={},ae='onreadystatechange',ie,oe,se,le=function(){var ue=+this;if(ne.hasOwnProperty(ue)){var pe=ne[ue];delete ne[ue],pe()}},de=function(ue){le.call(ue.data)};Z&&Q||(Z=function(pe){for(var ce=[],fe=1;arguments.length>fe;)ce.push(arguments[fe++]);return ne[++te]=function(){Y('function'==typeof pe?pe:Function(pe),ce)},ie(te),te},Q=function(pe){delete ne[pe]},'process'==W(19)(J)?ie=function(ue){J.nextTick(H(le,ue,1))}:ee?(oe=new ee,se=oe.port2,oe.port1.onmessage=de,ie=H(se.postMessage,se,1)):$.addEventListener&&'function'==typeof postMessage&&!$.importScripts?(ie=function(ue){$.postMessage(ue+'','*')},$.addEventListener('message',de,!1)):ae in X('script')?ie=function(ue){G.appendChild(X('script'))[ae]=function(){G.removeChild(this),le.call(ue)}}:ie=function(ue){setTimeout(H(le,ue,1),0)}),M.exports={set:Z,clear:Q}},function(M,U,W){'use strict';'use strict';var H=W(2),Y=W(6),G=W(34),X=W(63),$=W(13),J=W(38),Z=W(3),Q=W(33),ee=W(32),te=W(9),ne=W(36).f,ae=W(7).f,ie=W(71),oe=W(45),se='ArrayBuffer',le='DataView',de='prototype',ue='Wrong length!',pe='Wrong index!',ce=H[se],fe=H[le],ge=H.Math,he=H.RangeError,ye=H.Infinity,me=ce,ve=ge.abs,be=ge.pow,xe=ge.floor,_e=ge.log,ke=ge.LN2,we='buffer',Se='byteLength',Ee='byteOffset',Pe=Y?'_b':we,Te=Y?'_l':Se,Ce=Y?'_o':Ee,Re=function(Ge,Xe,Ke){var $e=Array(Ke),Je=8*Ke-Xe-1,Ze=(1<<Je)-1,Qe=Ze>>1,et=23===Xe?be(2,-24)-be(2,-77):0,tt=0,nt=0>Ge||0===Ge&&0>1/Ge?1:0,ot,st,dt;for(Ge=ve(Ge),Ge!=Ge||Ge===ye?(st=Ge==Ge?0:1,ot=Ze):(ot=xe(_e(Ge)/ke),1>Ge*(dt=be(2,-ot))&&(ot--,dt*=2),Ge+=1<=ot+Qe?et/dt:et*be(2,1-Qe),2<=Ge*dt&&(ot++,dt/=2),ot+Qe>=Ze?(st=0,ot=Ze):1<=ot+Qe?(st=(Ge*dt-1)*be(2,Xe),ot=ot+Qe):(st=Ge*be(2,Qe-1)*be(2,Xe),ot=0));8<=Xe;$e[tt++]=255&st,st/=256,Xe-=8);for(ot=ot<<Xe|st,Je+=Xe;0<Je;$e[tt++]=255&ot,ot/=256,Je-=8);return $e[--tt]|=128*nt,$e},Oe=function(Ge,Xe,Ke){var $e=8*Ke-Xe-1,Je=(1<<$e)-1,Ze=Je>>1,Qe=$e-7,et=Ke-1,tt=Ge[et--],nt=127&tt,ot;for(tt>>=7;0<Qe;nt=256*nt+Ge[et],et--,Qe-=8);for(ot=nt&(1<<-Qe)-1,nt>>=-Qe,Qe+=Xe;0<Qe;ot=256*ot+Ge[et],et--,Qe-=8);if(0===nt)nt=1-Ze;else{if(nt===Je)return ot?NaN:tt?-ye:ye;ot=ot+be(2,Xe),nt=nt-Ze}return(tt?-1:1)*ot*be(2,nt-Xe)},Le=function(Ge){return Ge[3]<<24|Ge[2]<<16|Ge[1]<<8|Ge[0]},Ne=function(Ge){return[255&Ge]},Ae=function(Ge){return[255&Ge,255&Ge>>8]},Ie=function(Ge){return[255&Ge,255&Ge>>8,255&Ge>>16,255&Ge>>24]},Fe=function(Ge){return Re(Ge,52,8)},ze=function(Ge){return Re(Ge,23,4)},qe=function(Ge,Xe,Ke){ae(Ge[de],Xe,{get:function(){return this[Ke]}})},Me=function(Ge,Xe,Ke,$e){var Je=+Ke,Ze=ee(Je);if(Je!=Ze||0>Ze||Ze+Xe>Ge[Te])throw he(pe);var Qe=Ge[Pe]._b,et=Ze+Ge[Ce],tt=Qe.slice(et,et+Xe);return $e?tt:tt.reverse()},je=function(Ge,Xe,Ke,$e,Je,Ze){var Qe=+Ke,et=ee(Qe);if(Qe!=et||0>et||et+Xe>Ge[Te])throw he(pe);var tt=Ge[Pe]._b,nt=et+Ge[Ce],ot=$e(+Je);for(var st=0;st<Xe;st++)tt[nt+st]=ot[Ze?st:Xe-st-1]},Be=function(Ge,Xe){Q(Ge,ce,se);var Ke=+Xe,$e=te(Ke);if(Ke!=$e)throw he(ue);return $e};if(!X.ABV)ce=function(Xe){var Ke=Be(this,Xe);this._b=ie.call(Array(Ke),0),this[Te]=Ke},fe=function(Xe,Ke,$e){Q(this,fe,le),Q(Xe,ce,le);var Je=Xe[Te],Ze=ee(Ke);if(0>Ze||Ze>Je)throw he('Wrong offset!');if($e=void 0===$e?Je-Ze:te($e),Ze+$e>Je)throw he(ue);this[Pe]=Xe,this[Ce]=Ze,this[Te]=$e},Y&&(qe(ce,Se,'_l'),qe(fe,we,'_b'),qe(fe,Se,'_l'),qe(fe,Ee,'_o')),J(fe[de],{getInt8:function(Xe){return Me(this,1,Xe)[0]<<24>>24},getUint8:function(Xe){return Me(this,1,Xe)[0]},getInt16:function(Xe){var Ke=Me(this,2,Xe,arguments[1]);return(Ke[1]<<8|Ke[0])<<16>>16},getUint16:function(Xe){var Ke=Me(this,2,Xe,arguments[1]);return Ke[1]<<8|Ke[0]},getInt32:function(Xe){return Le(Me(this,4,Xe,arguments[1]))},getUint32:function(Xe){return Le(Me(this,4,Xe,arguments[1]))>>>0},getFloat32:function(Xe){return Oe(Me(this,4,Xe,arguments[1]),23,4)},getFloat64:function(Xe){return Oe(Me(this,8,Xe,arguments[1]),52,8)},setInt8:function(Xe,Ke){je(this,1,Xe,Ne,Ke)},setUint8:function(Xe,Ke){je(this,1,Xe,Ne,Ke)},setInt16:function(Xe,Ke){je(this,2,Xe,Ae,Ke,arguments[2])},setUint16:function(Xe,Ke){je(this,2,Xe,Ae,Ke,arguments[2])},setInt32:function(Xe,Ke){je(this,4,Xe,Ie,Ke,arguments[2])},setUint32:function(Xe,Ke){je(this,4,Xe,Ie,Ke,arguments[2])},setFloat32:function(Xe,Ke){je(this,4,Xe,ze,Ke,arguments[2])},setFloat64:function(Xe,Ke){je(this,8,Xe,Fe,Ke,arguments[2])}});else{if(!Z(function(){new ce})||!Z(function(){new ce(.5)})){ce=function(Xe){return new me(Be(this,Xe))};var De=ce[de]=me[de];for(var Ue=ne(me),We=0,He;Ue.length>We;)(He=Ue[We++])in ce||$(ce,He,me[He]);G||(De.constructor=ce)}var Ye=new fe(new ce(2)),Ve=fe[de].setInt8;Ye.setInt8(0,2147483648),Ye.setInt8(1,2147483649),(Ye.getInt8(0)||!Ye.getInt8(1))&&J(fe[de],{setInt8:function(Xe,Ke){Ve.call(this,Xe,Ke<<24>>24)},setUint8:function(Xe,Ke){Ve.call(this,Xe,Ke<<24>>24)}},!0)}oe(ce,se),oe(fe,le),$(fe[de],X.VIEW,!0),U[se]=ce,U[le]=fe},function(M,U,W){var H=W(2),Y=W(26),G=W(34),X=W(123),$=W(7).f;M.exports=function(J){var Z=Y.Symbol||(Y.Symbol=G?{}:H.Symbol||{});'_'==J.charAt(0)||J in Z||$(Z,J,{value:X.f(J)})}},function(M,U,W){var H=W(49),Y=W(5)('iterator'),G=W(44);M.exports=W(26).getIteratorMethod=function(X){if(X!=void 0)return X[Y]||X['@@iterator']||G[H(X)]}},function(M,U,W){'use strict';'use strict';var H=W(42),Y=W(111),G=W(44),X=W(16);M.exports=W(81)(Array,'Array',function($,J){this._t=X($),this._i=0,this._k=J},function(){var $=this._t,J=this._k,Z=this._i++;return!$||Z>=$.length?(this._t=void 0,Y(1)):'keys'==J?Y(0,Z):'values'==J?Y(0,$[Z]):Y(0,[Z,$[Z]])},'values'),G.Arguments=G.Array,H('keys'),H('values'),H('entries')},function(M){var U=function(){return this}();try{U=U||Function('return this')()||(1,eval)('this')}catch(W){'object'==typeof window&&(U=window)}M.exports=U},function(M,U,W){'use strict';'use strict';function H(le){return le&&le.__esModule?le:{default:le}}function Y(le,de){if(!(le instanceof de))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function le(de,ue){for(var pe=0;pe<ue.length;pe++){var ce=ue[pe];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,'value'in ce&&(ce.writable=!0),Object.defineProperty(de,ce.key,ce)}}return function(de,ue,pe){return ue&&le(de.prototype,ue),pe&&le(de,pe),de}}(),X=W(47),$=H(X),J=W(8),Z=W(66),Q=H(Z),ee=W(68),te=H(ee),ne=W(140),ae=H(ne),ie=W(141),oe=H(ie),se=function(){function le(de){Y(this,le),this.name='default',this.View=de.view,this.request=de.request,this.renditionQueue=de.queue,this.q=new te.default(this),this.settings=(0,J.extend)(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:'vertical',ignoreClass:''}),(0,J.extend)(this.settings,de.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,layout:this.layout,width:0,height:0}}return G(le,[{key:'render',value:function(ue,pe){this.stage=new ae.default({width:pe.width,height:pe.height,overflow:this.settings.overflow,hidden:this.settings.hidden,axis:this.settings.axis}),this.stage.attachTo(ue),this.container=this.stage.getContainer(),this.views=new oe.default(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout()}},{key:'addEventListeners',value:function(){window.addEventListener('unload',function(){this.destroy()}.bind(this))}},{key:'destroy',value:function(){}},{key:'onResized',value:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.resize()}.bind(this),150)}},{key:'resize',value:function(ue,pe){this.q.clear(),this._stageSize=this.stage.size(ue,pe),this._bounds=this.bounds(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.views.each(function(ce){ce.size(this._stageSize.width,this._stageSize.height)}.bind(this)),this.updateLayout(),this.emit('resized',{width:this.stage.width,height:this.stage.height})}},{key:'createView',value:function(ue){return new this.View(ue,this.viewSettings)}},{key:'display',value:function(ue,pe){var ce=new J.defer,fe=ce.promise,ge=this.views.find(ue);if(ge&&pe){var he=ge.locationOf(pe);return this.moveTo(he),ce.resolve(),fe}return this.views.hide(),this.views.clear(),this.add(ue).then(function(ye){if(pe){var me=ye.locationOf(pe);this.moveTo(me)}}.bind(this)).then(function(){var ye;if('pre-paginated'===this.layout.name&&1<this.layout.divisor&&(ye=ue.next(),ye))return this.add(ye)}.bind(this)).then(function(){this.views.show(),ce.resolve()}.bind(this)),fe}},{key:'afterDisplayed',value:function(ue){this.emit('added',ue)}},{key:'afterResized',value:function(ue){this.emit('resize',ue.section)}},{key:'moveTo',value:function(ue){var pe=0,ce=0;'vertical'===this.settings.axis?ce=ue.top:(pe=Math.floor(ue.left/this.layout.delta)*this.layout.delta,pe+this.layout.delta>this.container.scrollWidth&&(pe=this.container.scrollWidth-this.layout.delta)),this.scrollTo(pe,ce)}},{key:'add',value:function(ue){var pe=this.createView(ue);return this.views.append(pe),pe.onDisplayed=this.afterDisplayed.bind(this),pe.onResize=this.afterResized.bind(this),pe.display(this.request)}},{key:'append',value:function(ue){var pe=this.createView(ue);return this.views.append(pe),pe.onDisplayed=this.afterDisplayed.bind(this),pe.onResize=this.afterResized.bind(this),pe.display(this.request)}},{key:'prepend',value:function(ue){var pe=this.createView(ue);return this.views.prepend(pe),pe.onDisplayed=this.afterDisplayed.bind(this),pe.onResize=this.afterResized.bind(this),pe.display(this.request)}},{key:'next',value:function(){var de,ue;if(this.views.length&&('horizontal'===this.settings.axis?(this.scrollLeft=this.container.scrollLeft,ue=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,ue<this.container.scrollWidth?this.scrollBy(this.layout.delta,0):ue-this.layout.columnWidth===this.container.scrollWidth?this.scrollTo(this.container.scrollWidth-this.layout.delta,0):de=this.views.last().section.next()):de=this.views.last().section.next(),de))return this.views.clear(),this.append(de).then(function(){var ge;if(this.layout.name&&1<this.layout.divisor&&(ge=de.next(),ge))return this.append(ge)}.bind(this)).then(function(){this.views.show()}.bind(this))}},{key:'prev',value:function(){var de,ue;if(this.views.length&&('horizontal'===this.settings.axis?(this.scrollLeft=this.container.scrollLeft,ue=this.container.scrollLeft,0<ue?this.scrollBy(-this.layout.delta,0):de=this.views.first().section.prev()):de=this.views.first().section.prev(),de))return this.views.clear(),this.prepend(de).then(function(){var ye;if(this.layout.name&&1<this.layout.divisor&&(ye=de.prev(),ye))return this.prepend(ye)}.bind(this)).then(function(){'horizontal'===this.settings.axis&&this.scrollTo(this.container.scrollWidth-this.layout.delta,0),this.views.show()}.bind(this))}},{key:'current',value:function(){var ue=this.visible();return ue.length?ue[ue.length-1]:null}},{key:'currentLocation',value:function(){return this.location='vertical'===this.settings.axis?this.scrolledLocation():this.paginatedLocation(),this.location}},{key:'scrolledLocation',value:function(){var ue;if(this.views.length)return ue=this.views.first(),this.mapping.page(ue,ue.section.cfiBase)}},{key:'paginatedLocation',value:function(){var ue,pe,ce;if(this.views.length)return ue=this.views.first(),pe=this._bounds.left-ue.position().left,ce=pe+this.layout.spreadWidth,this.mapping.page(ue,ue.section.cfiBase,pe,ce)}},{key:'isVisible',value:function(ue,pe,ce,fe){var ge=ue.position(),he=fe||this.bounds();return'horizontal'===this.settings.axis&&ge.right>he.left-pe&&ge.left<he.right+ce||'vertical'===this.settings.axis&&ge.bottom>he.top-pe&&ge.top<he.bottom+ce}},{key:'visible',value:function(){var ue=this.bounds(),pe=this.views.displayed(),ce=pe.length,de=[],fe,ge;for(var he=0;he<ce;he++)ge=pe[he],fe=this.isVisible(ge,0,0,ue),!0===fe&&de.push(ge);return de}},{key:'scrollBy',value:function(ue,pe,ce){ce&&(this.ignore=!0),this.settings.height?(ue&&(this.container.scrollLeft+=ue),pe&&(this.container.scrollTop+=pe)):window.scrollBy(ue,pe),this.scrolled=!0,this.onScroll()}},{key:'scrollTo',value:function(ue,pe,ce){ce&&(this.ignore=!0),this.settings.height?(this.container.scrollLeft=ue,this.container.scrollTop=pe):window.scrollTo(ue,pe),this.scrolled=!0,this.onScroll()}},{key:'onScroll',value:function(){}},{key:'bounds',value:function(){var de=this.stage.bounds();return de}},{key:'applyLayout',value:function(ue){this.layout=ue,this.updateLayout(),this.mapping=new Q.default(this.layout)}},{key:'updateLayout',value:function(){this.stage&&(this._stageSize=this.stage.size(),'vertical'===this.settings.axis?this.layout.calculate(this._stageSize.width,this._stageSize.height):(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta,this.stage.addStyleRules('iframe',[{'margin-right':this.layout.gap+'px'}])),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}},{key:'setLayout',value:function(ue){this.viewSettings.layout=ue,this.views&&this.views.each(function(pe){pe.setLayout(ue)})}},{key:'updateFlow',value:function(ue){var pe='paginated'===ue?'horizontal':'vertical';this.settings.axis=pe,this.viewSettings.axis=pe,this.settings.overflow='paginated'===ue?'hidden':'auto'}},{key:'getContents',value:function(){var ue=[];return this.views.each(function(pe){ue.push(pe.contents)}),ue}}]),le}();(0,$.default)(se.prototype),U.default=se,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(he){return he&&he.__esModule?he:{default:he}}function Y(he,ye){if(!(he instanceof ye))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(he){return typeof he}:function(he){return he&&'function'==typeof Symbol&&he.constructor===Symbol&&he!==Symbol.prototype?'symbol':typeof he},X=function(){function he(ye,me){for(var ve=0;ve<me.length;ve++){var be=me[ve];be.enumerable=be.enumerable||!1,be.configurable=!0,'value'in be&&(be.writable=!0),Object.defineProperty(ye,be.key,be)}}return function(ye,me,ve){return me&&he(ye.prototype,me),ve&&he(ye,ve),ye}}(),$=W(47),J=H($),Z=W(8),Q=W(67),ee=H(Q),te=W(22),ne=H(te),ae=W(68),ie=H(ae),oe=W(137),se=H(oe),le=W(66),de=H(le),ue=W(149),pe=H(ue),ce=W(65),fe=H(ce),ge=function(){function he(ye,me){Y(this,he),this.settings=(0,Z.extend)(this.settings||{},{width:null,height:null,ignoreClass:'',manager:'default',view:'iframe',flow:null,layout:null,spread:null,minSpreadWidth:800}),(0,Z.extend)(this.settings,me),'object'===G(this.settings.manager)&&(this.manager=this.settings.manager),this.viewSettings={ignoreClass:this.settings.ignoreClass},this.book=ye,this.views=null,this.hooks={},this.hooks.display=new ee.default(this),this.hooks.serialize=new ee.default(this),this.hooks.content=new ee.default(this),this.hooks.layout=new ee.default(this),this.hooks.render=new ee.default(this),this.hooks.show=new ee.default(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.themes=new pe.default(this),this.epubcfi=new ne.default,this.q=new ie.default(this),this.q.enqueue(this.book.opened),this.starting=new Z.defer,this.started=this.starting.promise,this.q.enqueue(this.start)}return X(he,[{key:'setManager',value:function(me){this.manager=me}},{key:'requireManager',value:function(me){var ve;return ve='string'==typeof me?'undefined'==typeof ePub?void 0:ePub.ViewManagers[me]:me,ve}},{key:'requireView',value:function(me){var ve;return ve='string'==typeof me?'undefined'==typeof ePub?void 0:ePub.Views[me]:me,ve}},{key:'start',value:function(){this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on('added',this.afterDisplayed.bind(this)),this.manager.on('resized',this.onResized.bind(this)),this.manager.on('scroll',this.reportLocation.bind(this)),this.on('displayed',this.reportLocation.bind(this)),this.emit('started'),this.starting.resolve()}},{key:'attachTo',value:function(me){return this.q.enqueue(function(){this.manager.render(me,{width:this.settings.width,height:this.settings.height}),this.emit('attached')}.bind(this))}},{key:'display',value:function(me){return this.q.enqueue(this._display,me)}},{key:'_display',value:function(me){var ve=this.epubcfi.isCfiString(me),be=new Z.defer,xe=be.promise,_e,ke;return(this.book.locations.length&&(0,Z.isFloat)(me)&&(me=this.book.locations.cfiFromPercentage(me)),_e=this.book.spine.get(me),!_e)?(be.reject(new Error('No Section Found')),xe):(!ve&&'string'==typeof me&&-1<me.indexOf('#')&&(ke=me.substring(me.indexOf('#')+1)),ve&&(ke=me),this.manager.display(_e,ke).then(function(){}.bind(this)))}},{key:'afterDisplayed',value:function(me){this.hooks.content.trigger(me.contents,this),this.emit('rendered',me.section),this.reportLocation()}},{key:'onResized',value:function(me){this.location&&this.display(this.location.start),this.emit('resized',{width:me.width,height:me.height})}},{key:'moveTo',value:function(me){this.manager.moveTo(me)}},{key:'next',value:function(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:'prev',value:function(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}},{key:'determineLayoutProperties',value:function(me){var be=this.settings.layout||me.layout||'reflowable',xe=this.settings.spread||me.spread||'auto',_e=this.settings.orientation||me.orientation||'auto',ke=this.settings.flow||me.flow||'auto',we=me.viewport||'',Se=this.settings.minSpreadWidth||me.minSpreadWidth||800,ve;return 0<=this.settings.width&&0<=this.settings.height&&(we='width='+this.settings.width+', height='+this.settings.height+''),ve={layout:be,spread:xe,orientation:_e,flow:ke,viewport:we,minSpreadWidth:Se},ve}},{key:'flow',value:function(me){var ve=me;('scrolled-doc'===me||'scrolled-continuous'===me)&&(ve='scrolled'),('auto'===me||'paginated'===me)&&(ve='paginated'),this._layout&&this._layout.flow(ve),this.manager&&this.manager.updateFlow(ve)}},{key:'layout',value:function(me){return me&&(this._layout=new se.default(me),this._layout.spread(me.spread,this.settings.minSpreadWidth),this.mapping=new de.default(this._layout)),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}},{key:'spread',value:function(me,ve){this._layout.spread(me,ve),this.manager.isRendered()&&this.manager.updateLayout()}},{key:'reportLocation',value:function(){return this.q.enqueue(function(){var me=this.manager.currentLocation();me&&me.then&&'function'==typeof me.then?me.then(function(ve){this.location=ve,this.percentage=this.book.locations.percentageFromCfi(ve),null!=this.percentage&&(this.location.percentage=this.percentage),this.emit('locationChanged',this.location)}.bind(this)):me&&(this.location=me,this.percentage=this.book.locations.percentageFromCfi(me),null!=this.percentage&&(this.location.percentage=this.percentage),this.emit('locationChanged',this.location))}.bind(this))}},{key:'currentLocation',value:function(){var me=this.manager.currentLocation();if(me&&me.then&&'function'==typeof me.then)me.then(function(be){var xe=this.book.locations.percentageFromCfi(be);return null!=xe&&(be.percentage=xe),be}.bind(this));else if(me){var ve=this.book.locations.percentageFromCfi(me);return null!=ve&&(me.percentage=ve),me}}},{key:'destroy',value:function(){this.q.clear(),this.manager.destroy()}},{key:'passEvents',value:function(me){var ve=fe.default.listenedEvents;ve.forEach(function(be){me.on(be,this.triggerViewEvent.bind(this))}.bind(this)),me.on('selected',this.triggerSelectedEvent.bind(this))}},{key:'triggerViewEvent',value:function(me){this.emit(me.type,me)}},{key:'triggerSelectedEvent',value:function(me){this.emit('selected',me)}},{key:'range',value:function(me,ve){var be=new ne.default(me),xe=this.visible().filter(function(_e){if(be.spinePos===_e.index)return!0});if(xe.length)return xe[0].range(be,ve)}},{key:'adjustImages',value:function(me){return'pre-paginated'===this._layout.name?new Promise(function(ve){ve()}):(me.addStylesheetRules([['img',['max-width',this._layout.columnWidth+'px'],['max-height',this._layout.height+'px']]]),new Promise(function(ve){setTimeout(function(){ve()},1)}))}},{key:'getContents',value:function(){return this.manager?this.manager.getContents():[]}},{key:'handleLinks',value:function(me){var ve=this;me.on('link',function(be){var xe=ve.book.path.relative(be);ve.display(xe)})}}]),he}();(0,J.default)(ge.prototype),U.default=ge,M.exports=U['default']},function(M,U,W){var H=W(19);M.exports=function(Y,G){if('number'!=typeof Y&&'Number'!=H(Y))throw TypeError(G);return+Y}},function(M,U,W){'use strict';'use strict';var H=W(10),Y=W(40),G=W(9);M.exports=[].copyWithin||function($,J){var Z=H(this),Q=G(Z.length),ee=Y($,Q),te=Y(J,Q),ne=2<arguments.length?arguments[2]:void 0,ae=Math.min((ne===void 0?Q:Y(ne,Q))-te,Q-ee),ie=1;for(te<ee&&ee<te+ae&&(ie=-1,te+=ae-1,ee+=ae-1);0<ae--;)te in Z?Z[ee]=Z[te]:delete Z[ee],ee+=ie,te+=ie;return Z}},function(M,U,W){var H=W(43);M.exports=function(Y,G){var X=[];return H(Y,!1,X.push,X,G),X}},function(M,U,W){var H=W(12),Y=W(10),G=W(50),X=W(9);M.exports=function($,J,Z,Q,ee){H(J);var te=Y($),ne=G(te),ae=X(te.length),ie=ee?ae-1:0,oe=ee?-1:1;if(2>Z)for(;;){if(ie in ne){Q=ne[ie],ie+=oe;break}if(ie+=oe,ee?0>ie:ae<=ie)throw TypeError('Reduce of empty array with no initial value')}for(;ee?0<=ie:ae>ie;ie+=oe)ie in ne&&(Q=J(Q,ne[ie],ie,te));return Q}},function(M,U,W){'use strict';'use strict';var H=W(12),Y=W(4),G=W(57),X=[].slice,$={},J=function(Z,Q,ee){if(!(Q in $)){for(var te=[],ne=0;ne<Q;ne++)te[ne]='a['+ne+']';$[Q]=Function('F,a','return new F('+te.join(',')+')')}return $[Q](Z,ee)};M.exports=Function.bind||function(Q){var ee=H(this),te=X.call(arguments,1),ne=function(){var ae=te.concat(X.call(arguments));return this instanceof ne?J(ee,ae.length,ae):G(ee,ae,Q)};return Y(ee.prototype)&&(ne.prototype=ee.prototype),ne}},function(M,U,W){'use strict';'use strict';var H=W(7).f,Y=W(35),G=W(38),X=W(27),$=W(33),J=W(20),Z=W(43),Q=W(81),ee=W(111),te=W(39),ne=W(6),ae=W(30).fastKey,ie=ne?'_s':'size',oe=function(se,le){var de=ae(le),ue;if('F'!==de)return se._i[de];for(ue=se._f;ue;ue=ue.n)if(ue.k==le)return ue};M.exports={getConstructor:function(se,le,de,ue){var pe=se(function(ce,fe){$(ce,pe,le,'_i'),ce._i=Y(null),ce._f=void 0,ce._l=void 0,ce[ie]=0,void 0!=fe&&Z(fe,de,ce[ue],ce)});return G(pe.prototype,{clear:function(){for(var fe=this,ge=fe._i,he=fe._f;he;he=he.n)he.r=!0,he.p&&(he.p=he.p.n=void 0),delete ge[he.i];fe._f=fe._l=void 0,fe[ie]=0},'delete':function(ce){var fe=this,ge=oe(fe,ce);if(ge){var he=ge.n,ye=ge.p;delete fe._i[ge.i],ge.r=!0,ye&&(ye.n=he),he&&(he.p=ye),fe._f==ge&&(fe._f=he),fe._l==ge&&(fe._l=ye),fe[ie]--}return!!ge},forEach:function(fe){$(this,pe,'forEach');for(var ge=X(fe,1<arguments.length?arguments[1]:void 0,3),he;he=he?he.n:this._f;)for(ge(he.v,he.k,this);he&&he.r;)he=he.p},has:function(fe){return!!oe(this,fe)}}),ne&&H(pe.prototype,'size',{get:function(){return J(this[ie])}}),pe},def:function(se,le,de){var ue=oe(se,le),pe,ce;return ue?ue.v=de:(se._l=ue={i:ce=ae(le,!0),k:le,v:de,p:pe=se._l,n:void 0,r:!1},!se._f&&(se._f=ue),pe&&(pe.n=ue),se[ie]++,'F'!==ce&&(se._i[ce]=ue)),se},getEntry:oe,setStrong:function(se,le,de){Q(se,le,function(ue,pe){this._t=ue,this._k=pe,this._l=void 0},function(){for(var ue=this,pe=ue._k,ce=ue._l;ce&&ce.r;)ce=ce.p;return ue._t&&(ue._l=ce=ce?ce.n:ue._t._f)?'keys'==pe?ee(0,ce.k):'values'==pe?ee(0,ce.v):ee(0,[ce.k,ce.v]):(ue._t=void 0,ee(1))},de?'entries':'values',!de,!0),te(le)}}},function(M,U,W){var H=W(49),Y=W(102);M.exports=function(G){return function(){if(H(this)!=G)throw TypeError(G+'#toJSON isn\'t generic');return Y(this)}}},function(M,U,W){'use strict';'use strict';var H=W(38),Y=W(30).getWeak,G=W(1),X=W(4),$=W(33),J=W(43),Z=W(23),Q=W(11),ee=Z(5),te=Z(6),ne=0,ae=function(se){return se._l||(se._l=new ie)},ie=function(){this.a=[]},oe=function(se,le){return ee(se.a,function(de){return de[0]===le})};ie.prototype={get:function(se){var le=oe(this,se);if(le)return le[1]},has:function(se){return!!oe(this,se)},set:function(se,le){var de=oe(this,se);de?de[1]=le:this.a.push([se,le])},'delete':function(se){var le=te(this.a,function(de){return de[0]===se});return~le&&this.a.splice(le,1),!!~le}},M.exports={getConstructor:function(se,le,de,ue){var pe=se(function(ce,fe){$(ce,pe,le,'_i'),ce._i=ne++,ce._l=void 0,void 0!=fe&&J(fe,de,ce[ue],ce)});return H(pe.prototype,{'delete':function(ce){if(!X(ce))return!1;var fe=Y(ce);return!0===fe?ae(this)['delete'](ce):fe&&Q(fe,this._i)&&delete fe[this._i]},has:function(fe){if(!X(fe))return!1;var ge=Y(fe);return!0===ge?ae(this).has(fe):ge&&Q(ge,this._i)}}),pe},def:function(se,le,de){var ue=Y(G(le),!0);return!0===ue?ae(se).set(le,de):ue[se._i]=de,se},ufstore:ae}},function(M,U,W){M.exports=!W(6)&&!W(3)(function(){return 7!=Object.defineProperty(W(73)('div'),'a',{get:function(){return 7}}).a})},function(M,U,W){var H=W(4),Y=Math.floor;M.exports=function(X){return!H(X)&&isFinite(X)&&Y(X)===X}},function(M,U,W){var H=W(1);M.exports=function(Y,G,X,$){try{return $?G(H(X)[0],X[1]):G(X)}catch(Z){var J=Y['return'];throw void 0!==J&&H(J.call(Y)),Z}}},function(M){M.exports=function(U,W){return{value:W,done:!!U}}},function(M){M.exports=Math.log1p||function(W){return-1e-8<(W=+W)&&1e-8>W?W-W*W/2:Math.log(1+W)}},function(M,U,W){'use strict';'use strict';var H=W(37),Y=W(61),G=W(51),X=W(10),$=W(50),J=Object.assign;M.exports=!J||W(3)(function(){var Z={},Q={},ee=Symbol(),te='abcdefghijklmnopqrst';return Z[ee]=7,te.split('').forEach(function(ne){Q[ne]=ne}),7!=J({},Z)[ee]||Object.keys(J({},Q)).join('')!=te})?function(Q){for(var ee=X(Q),te=arguments.length,ne=1,ae=Y.f,ie=G.f;te>ne;)for(var oe=$(arguments[ne++]),se=ae?H(oe).concat(ae(oe)):H(oe),le=se.length,de=0,ue;le>de;)ie.call(oe,ue=se[de++])&&(ee[ue]=oe[ue]);return ee}:J},function(M,U,W){var H=W(7),Y=W(1),G=W(37);M.exports=W(6)?Object.defineProperties:function($,J){Y($);for(var Z=G(J),Q=Z.length,ee=0,te;Q>ee;)H.f($,te=Z[ee++],J[te]);return $}},function(M,U,W){var H=W(16),Y=W(36).f,G={}.toString,X='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],$=function(J){try{return Y(J)}catch(Z){return X.slice()}};M.exports.f=function(Z){return X&&'[object Window]'==G.call(Z)?$(Z):Y(H(Z))}},function(M,U,W){var H=W(11),Y=W(16),G=W(53)(!1),X=W(86)('IE_PROTO');M.exports=function($,J){var Z=Y($),Q=0,ee=[],te;for(te in Z)te!=X&&H(Z,te)&&ee.push(te);for(;J.length>Q;)H(Z,te=J[Q++])&&(~G(ee,te)||ee.push(te));return ee}},function(M,U,W){var H=W(37),Y=W(16),G=W(51).f;M.exports=function(X){return function($){for(var J=Y($),Z=H(J),Q=Z.length,ee=0,te=[],ne;Q>ee;)G.call(J,ne=Z[ee++])&&te.push(X?[ne,J[ne]]:J[ne]);return te}}},function(M,U,W){var H=W(36),Y=W(61),G=W(1),X=W(2).Reflect;M.exports=X&&X.ownKeys||function(J){var Z=H.f(G(J)),Q=Y.f;return Q?Z.concat(Q(J)):Z}},function(M,U,W){var H=W(2).parseFloat,Y=W(46).trim;M.exports=1/H(W(91)+'-0')==-(1/0)?H:function(X){var $=Y(X+'',3),J=H($);return 0===J&&'-'==$.charAt(0)?-0:J}},function(M,U,W){var H=W(2).parseInt,Y=W(46).trim,G=W(91),X=/^[\-+]?0[xX]/;M.exports=8!==H(G+'08')||22!==H(G+'0x16')?function(J,Z){var Q=Y(J+'',3);return H(Q,Z>>>0||(X.test(Q)?16:10))}:H},function(M){M.exports=Object.is||function(W,H){return W===H?0!==W||1/W==1/H:W!=W&&H!=H}},function(M,U,W){var H=W(9),Y=W(90),G=W(20);M.exports=function(X,$,J,Z){var Q=G(X)+'',ee=Q.length,te=void 0===J?' ':J+'',ne=H($);if(ne<=ee||''==te)return Q;var ae=ne-ee,ie=Y.call(te,Math.ceil(ae/te.length));return ie.length>ae&&(ie=ie.slice(0,ae)),Z?ie+Q:Q+ie}},function(M,U,W){U.f=W(5)},function(M,U,W){'use strict';'use strict';var H=W(105);M.exports=W(54)('Map',function(Y){return function(){return Y(this,0<arguments.length?arguments[0]:void 0)}},{get:function(G){var X=H.getEntry(this,G);return X&&X.v},set:function(G,X){return H.def(this,0===G?0:G,X)}},H,!0)},function(M,U,W){W(6)&&'g'!=/./g.flags&&W(7).f(RegExp.prototype,'flags',{configurable:!0,get:W(56)})},function(M,U,W){'use strict';'use strict';var H=W(105);M.exports=W(54)('Set',function(Y){return function(){return Y(this,0<arguments.length?arguments[0]:void 0)}},{add:function(G){return H.def(this,G=0===G?0:G,G)}},H)},function(M,U,W){'use strict';'use strict';var H=W(23)(0),Y=W(14),G=W(30),X=W(113),$=W(107),J=W(4),Z=G.getWeak,Q=Object.isExtensible,ee=$.ufstore,te={},ne,ae=function(se){return function(){return se(this,0<arguments.length?arguments[0]:void 0)}},ie={get:function(le){if(J(le)){var de=Z(le);return!0===de?ee(this).get(le):de?de[this._i]:void 0}},set:function(le,de){return $.def(this,le,de)}},oe=M.exports=W(54)('WeakMap',ae,ie,$,!0,!0);7!=new oe().set((Object.freeze||Object)(te),7).get(te)&&(ne=$.getConstructor(ae),X(ne.prototype,ie),G.NEED=!0,H(['delete','has','get','set'],function(se){var le=oe.prototype,de=le[se];Y(le,se,function(ue,pe){if(J(ue)&&!Q(ue)){this._f||(this._f=new ne);var ce=this._f[se](ue,pe);return'set'==se?this:ce}return de.call(this,ue,pe)})}))},function(M){function U(){throw new Error('setTimeout has not been defined')}function W(){throw new Error('clearTimeout has not been defined')}function H(oe){if(Q===setTimeout)return setTimeout(oe,0);if((Q===U||!Q)&&setTimeout)return Q=setTimeout,setTimeout(oe,0);try{return Q(oe,0)}catch(se){try{return Q.call(null,oe,0)}catch(le){return Q.call(this,oe,0)}}}function Y(oe){if(ee===clearTimeout)return clearTimeout(oe);if((ee===W||!ee)&&clearTimeout)return ee=clearTimeout,clearTimeout(oe);try{return ee(oe)}catch(se){try{return ee.call(null,oe)}catch(le){return ee.call(this,oe)}}}function G(){ne&&ae&&(ne=!1,ae.length?te=ae.concat(te):ie=-1,te.length&&X())}function X(){if(!ne){var oe=H(G);ne=!0;for(var se=te.length;se;){for(ae=te,te=[];++ie<se;)ae&&ae[ie].run();ie=-1,se=te.length}ae=null,ne=!1,Y(oe)}}function $(oe,se){this.fun=oe,this.array=se}function J(){}var Z=M.exports={},Q,ee;(function(){try{Q='function'==typeof setTimeout?setTimeout:U}catch(oe){Q=U}try{ee='function'==typeof clearTimeout?clearTimeout:W}catch(oe){ee=W}})();var te=[],ne=!1,ae,ie=-1;Z.nextTick=function(oe){var se=Array(arguments.length-1);if(1<arguments.length)for(var le=1;le<arguments.length;le++)se[le-1]=arguments[le];te.push(new $(oe,se)),1!==te.length||ne||H(X)},$.prototype.run=function(){this.fun.apply(null,this.array)},Z.title='browser',Z.browser=!0,Z.env={},Z.argv=[],Z.version='',Z.versions={},Z.on=J,Z.addListener=J,Z.once=J,Z.off=J,Z.removeListener=J,Z.removeAllListeners=J,Z.emit=J,Z.binding=function(){throw new Error('process.binding is not supported')},Z.cwd=function(){return'/'},Z.chdir=function(){throw new Error('process.chdir is not supported')},Z.umask=function(){return 0}},function(M){M.exports=I},function(M,U){'use strict';var W,H,Y,G='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&'function'==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?'symbol':typeof X};(function(X,$){H=[],W=$,Y='function'==typeof W?W.apply(U,H):W,!(Y!==void 0&&(M.exports=Y))})(void 0,function(X){function $(fe){return void 0!==se[fe]}function J(){ne.call(this),this._isInvalid=!0}function Z(fe){return''==fe&&J.call(this),fe.toLowerCase()}function Q(fe){var ge=fe.charCodeAt(0);return 32<ge&&127>ge&&-1==[34,35,60,62,63,96].indexOf(ge)?fe:encodeURIComponent(fe)}function ee(fe){var ge=fe.charCodeAt(0);return 32<ge&&127>ge&&-1==[34,35,60,62,96].indexOf(ge)?fe:encodeURIComponent(fe)}function te(fe,ge,he){function ye(Le){ke.push(Le)}var me=ge||'scheme start',ve=0,be='',xe=!1,_e=!1,ke=[];loop:for(;(fe[ve-1]!=de||0==ve)&&!this._isInvalid;){var we=fe[ve];switch(me){case'scheme start':if(we&&ue.test(we))be+=we.toLowerCase(),me='scheme';else if(!ge){be='',me='no scheme';continue}else{ye('Invalid scheme.');break loop}break;case'scheme':if(we&&pe.test(we))be+=we.toLowerCase();else if(':'==we){if(this._scheme=be,be='',ge)break loop;$(this._scheme)&&(this._isRelative=!0),me='file'==this._scheme?'relative':this._isRelative&&he&&he._scheme==this._scheme?'relative or authority':this._isRelative?'authority first slash':'scheme data'}else if(!ge){be='',ve=0,me='no scheme';continue}else if(de==we)break loop;else{ye('Code point not allowed in scheme: '+we);break loop}break;case'scheme data':'?'==we?(this._query='?',me='query'):'#'==we?(this._fragment='#',me='fragment'):de!=we&&'\t'!=we&&'\n'!=we&&'\r'!=we&&(this._schemeData+=Q(we));break;case'no scheme':if(!he||!$(he._scheme))ye('Missing scheme.'),J.call(this);else{me='relative';continue}break;case'relative or authority':if('/'==we&&'/'==fe[ve+1])me='authority ignore slashes';else{ye('Expected /, got: '+we),me='relative';continue}break;case'relative':if(this._isRelative=!0,'file'!=this._scheme&&(this._scheme=he._scheme),de==we){this._host=he._host,this._port=he._port,this._path=he._path.slice(),this._query=he._query,this._username=he._username,this._password=he._password;break loop}else if('/'==we||'\\'==we)'\\'==we&&ye('\\ is an invalid code point.'),me='relative slash';else if('?'==we)this._host=he._host,this._port=he._port,this._path=he._path.slice(),this._query='?',this._username=he._username,this._password=he._password,me='query';else if('#'==we)this._host=he._host,this._port=he._port,this._path=he._path.slice(),this._query=he._query,this._fragment='#',this._username=he._username,this._password=he._password,me='fragment';else{var Se=fe[ve+1],Ee=fe[ve+2];'file'==this._scheme&&ue.test(we)&&(':'==Se||'|'==Se)&&(de==Ee||'/'==Ee||'\\'==Ee||'?'==Ee||'#'==Ee)||(this._host=he._host,this._port=he._port,this._username=he._username,this._password=he._password,this._path=he._path.slice(),this._path.pop()),me='relative path';continue}break;case'relative slash':if('/'==we||'\\'==we)'\\'==we&&ye('\\ is an invalid code point.'),me='file'==this._scheme?'file host':'authority ignore slashes';else{'file'!=this._scheme&&(this._host=he._host,this._port=he._port,this._username=he._username,this._password=he._password),me='relative path';continue}break;case'authority first slash':if('/'==we)me='authority second slash';else{ye('Expected \'/\', got: '+we),me='authority ignore slashes';continue}break;case'authority second slash':if(me='authority ignore slashes','/'!=we){ye('Expected \'/\', got: '+we);continue}break;case'authority ignore slashes':if('/'!=we&&'\\'!=we){me='authority';continue}else ye('Expected authority, got: '+we);break;case'authority':if('@'==we){xe&&(ye('@ already seen.'),be+='%40'),xe=!0;for(var Pe=0;Pe<be.length;Pe++){var Te=be[Pe];if('\t'==Te||'\n'==Te||'\r'==Te){ye('Invalid whitespace in authority.');continue}if(':'==Te&&null===this._password){this._password='';continue}var Ce=Q(Te);null===this._password?this._username+=Ce:this._password+=Ce}be=''}else if(de==we||'/'==we||'\\'==we||'?'==we||'#'==we){ve-=be.length,be='',me='host';continue}else be+=we;break;case'file host':if(de==we||'/'==we||'\\'==we||'?'==we||'#'==we){2==be.length&&ue.test(be[0])&&(':'==be[1]||'|'==be[1])?me='relative path':0==be.length?me='relative path start':(this._host=Z.call(this,be),be='',me='relative path start');continue}else'\t'==we||'\n'==we||'\r'==we?ye('Invalid whitespace in file host.'):be+=we;break;case'host':case'hostname':if(':'==we&&!_e){if(this._host=Z.call(this,be),be='',me='port','hostname'==ge)break loop;}else if(de==we||'/'==we||'\\'==we||'?'==we||'#'==we){if(this._host=Z.call(this,be),be='',me='relative path start',ge)break loop;continue}else'\t'!=we&&'\n'!=we&&'\r'!=we?('['==we?_e=!0:']'==we&&(_e=!1),be+=we):ye('Invalid code point in host/hostname: '+we);break;case'port':if(/[0-9]/.test(we))be+=we;else if(de==we||'/'==we||'\\'==we||'?'==we||'#'==we||ge){if(''!=be){var Re=parseInt(be,10);Re!=se[this._scheme]&&(this._port=Re+''),be=''}if(ge)break loop;me='relative path start';continue}else'\t'==we||'\n'==we||'\r'==we?ye('Invalid code point in port: '+we):J.call(this);break;case'relative path start':if('\\'==we&&ye('\'\\\' not allowed in path.'),me='relative path','/'!=we&&'\\'!=we)continue;break;case'relative path':if(de==we||'/'==we||'\\'==we||!ge&&('?'==we||'#'==we)){'\\'==we&&ye('\\ not allowed in relative path.');var Oe;(Oe=le[be.toLowerCase()])&&(be=Oe),'..'==be?(this._path.pop(),'/'!=we&&'\\'!=we&&this._path.push('')):'.'==be&&'/'!=we&&'\\'!=we?this._path.push(''):'.'!=be&&('file'==this._scheme&&0==this._path.length&&2==be.length&&ue.test(be[0])&&'|'==be[1]&&(be=be[0]+':'),this._path.push(be)),be='','?'==we?(this._query='?',me='query'):'#'==we&&(this._fragment='#',me='fragment')}else'\t'!=we&&'\n'!=we&&'\r'!=we&&(be+=Q(we));break;case'query':ge||'#'!=we?de!=we&&'\t'!=we&&'\n'!=we&&'\r'!=we&&(this._query+=ee(we)):(this._fragment='#',me='fragment');break;case'fragment':de!=we&&'\t'!=we&&'\n'!=we&&'\r'!=we&&(this._fragment+=we);}ve++}}function ne(){this._scheme='',this._schemeData='',this._username='',this._password=null,this._host='',this._port='',this._path=[],this._query='',this._fragment='',this._isInvalid=!1,this._isRelative=!1}function ae(fe,ge){void 0===ge||ge instanceof ae||(ge=new ae(ge+'')),this._url=fe,ne.call(this);var he=fe.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,'');te.call(this,he,null,ge)}var ie=!1;if(!X.forceJURL)try{var oe=new URL('b','http://a');oe.pathname='c%20d',ie='http://a/c%20d'===oe.href}catch(fe){}if(ie)return X.URL;var se=Object.create(null);se.ftp=21,se.file=0,se.gopher=70,se.http=80,se.https=443,se.ws=80,se.wss=443;var le=Object.create(null);le['%2e']='.',le['.%2e']='..',le['%2e.']='..',le['%2e%2e']='..';var de=void 0,ue=/[a-zA-Z]/,pe=/[a-zA-Z0-9\+\-\.]/;ae.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var fe='';return(''!=this._username||null!=this._password)&&(fe=this._username+(null==this._password?'':':'+this._password)+'@'),this.protocol+(this._isRelative?'//'+fe+this.host:'')+this.pathname+this._query+this._fragment},set href(fe){ne.call(this),te.call(this,fe)},get protocol(){return this._scheme+':'},set protocol(fe){this._isInvalid||te.call(this,fe+':','scheme start')},get host(){return this._isInvalid?'':this._port?this._host+':'+this._port:this._host},set host(fe){this._isInvalid||!this._isRelative||te.call(this,fe,'host')},get hostname(){return this._host},set hostname(fe){this._isInvalid||!this._isRelative||te.call(this,fe,'hostname')},get port(){return this._port},set port(fe){this._isInvalid||!this._isRelative||te.call(this,fe,'port')},get pathname(){return this._isInvalid?'':this._isRelative?'/'+this._path.join('/'):this._schemeData},set pathname(fe){this._isInvalid||!this._isRelative||(this._path=[],te.call(this,fe,'relative path start'))},get search(){return this._isInvalid||!this._query||'?'==this._query?'':this._query},set search(fe){this._isInvalid||!this._isRelative||(this._query='?','?'==fe[0]&&(fe=fe.slice(1)),te.call(this,fe,'query'))},get hash(){return this._isInvalid||!this._fragment||'#'==this._fragment?'':this._fragment},set hash(fe){this._isInvalid||(this._fragment='#','#'==fe[0]&&(fe=fe.slice(1)),te.call(this,fe,'fragment'))},get origin(){var fe;if(this._isInvalid||!this._scheme)return'';switch(this._scheme){case'data':case'file':case'javascript':case'mailto':return'null';}return fe=this.host,fe?this._scheme+'://'+fe:''}};var ce=X.URL;return ce&&(ae.createObjectURL=function(){return ce.createObjectURL.apply(ce,arguments)},ae.revokeObjectURL=function(fe){ce.revokeObjectURL(fe)}),ae})},function(M,U,W){'use strict';(function(H){'use strict';function Y(ae){return ae&&ae.__esModule?ae:{default:ae}}function G(ae,ie){return new $.default(ae,ie)}Object.defineProperty(U,'__esModule',{value:!0});var X=W(135),$=Y(X),J=W(22),Z=Y(J),Q=W(99),ee=Y(Q),te=W(65),ne=Y(te);G.VERSION='0.3','undefined'!=typeof H&&(H.EPUBJS_VERSION=G.VERSION),G.CFI=Z.default,G.Rendition=ee.default,G.Contents=ne.default,G.ViewManagers={},G.Views={},G.register={manager:function(ie,oe){return G.ViewManagers[ie]=oe},view:function(ie,oe){return G.Views[ie]=oe}},G.register.view('iframe',W(142)),G.register.manager('default',W(98)),G.register.manager('continuous',W(139)),U.default=G,M.exports=U['default']}).call(U,W(97))},function(M,U,W){'use strict';(function(H){'use strict';function Y(G,X,$){G[X]||Object.defineProperty(G,X,{writable:!0,configurable:!0,value:$})}if(W(330),W(345),W(150),H._babelPolyfill)throw new Error('only one instance of babel-polyfill is allowed');H._babelPolyfill=!0,Y(String.prototype,'padLeft',''.padStart),Y(String.prototype,'padRight',''.padEnd),'pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill'.split(',').forEach(function(G){[][G]&&Y(Array,G,Function.call.bind([][G]))})}).call(U,W(97))},function(M){'use strict';'use strict';var U={application:{ecmascript:['es','ecma'],javascript:'js',ogg:'ogx',pdf:'pdf',postscript:['ps','ai','eps','epsi','epsf','eps2','eps3'],'rdf+xml':'rdf',smil:['smi','smil'],'xhtml+xml':['xhtml','xht'],xml:['xml','xsl','xsd','opf','ncx'],zip:'zip','x-httpd-eruby':'rhtml','x-latex':'latex','x-maker':['frm','maker','frame','fm','fb','book','fbdoc'],'x-object':'o','x-shockwave-flash':['swf','swfl'],'x-silverlight':'scr','epub+zip':'epub','font-tdpfr':'pfr','inkml+xml':['ink','inkml'],json:'json','jsonml+json':'jsonml','mathml+xml':'mathml','metalink+xml':'metalink',mp4:'mp4s','omdoc+xml':'omdoc',oxps:'oxps','vnd.amazon.ebook':'azw',widget:'wgt','x-dtbook+xml':'dtb','x-dtbresource+xml':'res','x-font-bdf':'bdf','x-font-ghostscript':'gsf','x-font-linux-psf':'psf','x-font-otf':'otf','x-font-pcf':'pcf','x-font-snf':'snf','x-font-ttf':['ttf','ttc'],'x-font-type1':['pfa','pfb','pfm','afm'],'x-font-woff':'woff','x-mobipocket-ebook':['prc','mobi'],'x-mspublisher':'pub','x-nzb':'nzb','x-tgif':'obj','xaml+xml':'xaml','xml-dtd':'dtd','xproc+xml':'xpl','xslt+xml':'xslt','internet-property-stream':'acx','x-compress':'z','x-compressed':'tgz','x-gzip':'gz'},audio:{flac:'flac',midi:['mid','midi','kar','rmi'],mpeg:['mpga','mpega','mp2','mp3','m4a','mp2a','m2a','m3a'],mpegurl:'m3u',ogg:['oga','ogg','spx'],'x-aiff':['aif','aiff','aifc'],'x-ms-wma':'wma','x-wav':'wav',adpcm:'adp',mp4:'mp4a',webm:'weba','x-aac':'aac','x-caf':'caf','x-matroska':'mka','x-pn-realaudio-plugin':'rmp',xm:'xm',mid:['mid','rmi']},image:{gif:'gif',ief:'ief',jpeg:['jpeg','jpg','jpe'],pcx:'pcx',png:'png','svg+xml':['svg','svgz'],tiff:['tiff','tif'],'x-icon':'ico',bmp:'bmp',webp:'webp','x-pict':['pic','pct'],'x-tga':'tga','cis-cod':'cod'},text:{'cache-manifest':['manifest','appcache'],css:'css',csv:'csv',html:['html','htm','shtml','stm'],mathml:'mml',plain:['txt','text','brf','conf','def','list','log','in','bas'],richtext:'rtx','tab-separated-values':'tsv','x-bibtex':'bib'},video:{mpeg:['mpeg','mpg','mpe','m1v','m2v','mp2','mpa','mpv2'],mp4:['mp4','mp4v','mpg4'],quicktime:['qt','mov'],ogg:'ogv','vnd.mpegurl':['mxu','m4u'],'x-flv':'flv','x-la-asf':['lsf','lsx'],'x-mng':'mng','x-ms-asf':['asf','asx','asr'],'x-ms-wm':'wm','x-ms-wmv':'wmv','x-ms-wmx':'wmx','x-ms-wvx':'wvx','x-msvideo':'avi','x-sgi-movie':'movie','x-matroska':['mpv','mkv','mk3d','mks'],'3gpp2':'3g2',h261:'h261',h263:'h263',h264:'h264',jpeg:'jpgv',jpm:['jpm','jpgm'],mj2:['mj2','mjp2'],'vnd.ms-playready.media.pyv':'pyv','vnd.uvvu.mp4':['uvu','uvvu'],'vnd.vivo':'viv',webm:'webm','x-f4v':'f4v','x-m4v':'m4v','x-ms-vob':'vob','x-smv':'smv'}},W=function(){var $={},H,Y,G,X;for(H in U)if(U.hasOwnProperty(H))for(Y in U[H])if(U[H].hasOwnProperty(Y))if(G=U[H][Y],'string'==typeof G)$[G]=H+'/'+Y;else for(X=0;X<G.length;X++)$[G[X]]=H+'/'+Y;return $}();M.exports={lookup:function(Y){return Y&&W[Y.split('.').pop().toLowerCase()]||'text/plain'}}},function(M,U,W){'use strict';'use strict';function H(ae){return ae&&ae.__esModule?ae:{default:ae}}function Y(ae,ie){if(!(ae instanceof ie))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ae(ie,oe){for(var se=0;se<oe.length;se++){var le=oe[se];le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(ie,le.key,le)}}return function(ie,oe,se){return oe&&ae(ie.prototype,oe),se&&ae(ie,se),ie}}(),X=W(8),$=W(69),J=H($),Z=W(133),Q=H(Z),ee=W(48),te=H(ee),ne=function(){function ae(){Y(this,ae),this.zip=void 0,this.checkRequirements(),this.urlCache={}}return G(ae,[{key:'checkRequirements',value:function(){try{if('undefined'==typeof JSZip){var oe=W(346);this.zip=new oe}else this.zip=new JSZip}catch(se){throw new Error('JSZip lib not loaded')}}},{key:'open',value:function(oe,se){return this.zip.loadAsync(oe,{base64:se})}},{key:'openUrl',value:function(oe,se){return(0,J.default)(oe,'binary').then(function(le){return this.zip.loadAsync(le,{base64:se})}.bind(this))}},{key:'request',value:function(oe,se){var le=new X.defer,ue=new te.default(oe),de;return se||(se=ue.extension),de='blob'==se?this.getBlob(oe):this.getText(oe),de?de.then(function(pe){var ce=this.handleResponse(pe,se);le.resolve(ce)}.bind(this)):le.reject({message:'File not found in the epub: '+oe,stack:new Error().stack}),le.promise}},{key:'handleResponse',value:function(oe,se){var le;return le='json'==se?JSON.parse(oe):(0,X.isXml)(se)?(0,X.parse)(oe,'text/xml'):'xhtml'==se?(0,X.parse)(oe,'application/xhtml+xml'):'html'==se||'htm'==se?(0,X.parse)(oe,'text/html'):oe,le}},{key:'getBlob',value:function(oe,se){var le=window.decodeURIComponent(oe.substr(1)),de=this.zip.file(le);if(de)return se=se||Q.default.lookup(de.name),de.async('uint8array').then(function(ue){return new Blob([ue],{type:se})})}},{key:'getText',value:function(oe){var se=window.decodeURIComponent(oe.substr(1)),le=this.zip.file(se);if(le)return le.async('string').then(function(de){return de})}},{key:'getBase64',value:function(oe,se){var le=window.decodeURIComponent(oe.substr(1)),de=this.zip.file(le);if(de)return se=se||Q.default.lookup(de.name),de.async('base64').then(function(ue){return'data:'+se+';base64,'+ue})}},{key:'createUrl',value:function(oe,se){var le=new X.defer,de=window.URL||window.webkitURL||window.mozURL,ce=se&&se.base64,ue,pe;return oe in this.urlCache?(le.resolve(this.urlCache[oe]),le.promise):(ce?(pe=this.getBase64(oe),pe&&pe.then(function(fe){this.urlCache[oe]=fe,le.resolve(fe)}.bind(this))):(pe=this.getBlob(oe),pe&&pe.then(function(fe){ue=de.createObjectURL(fe),this.urlCache[oe]=ue,le.resolve(ue)}.bind(this))),pe||le.reject({message:'File not found in the epub: '+oe,stack:new Error().stack}),le.promise)}},{key:'revokeUrl',value:function(oe){var se=window.URL||window.webkitURL||window.mozURL,le=this.urlCache[oe];le&&se.revokeObjectURL(le)}}]),ae}();U.default=ne,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(Ce){return Ce&&Ce.__esModule?Ce:{default:Ce}}function Y(Ce,Re){if(!(Ce instanceof Re))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(Ce){return typeof Ce}:function(Ce){return Ce&&'function'==typeof Symbol&&Ce.constructor===Symbol&&Ce!==Symbol.prototype?'symbol':typeof Ce},X=function(){function Ce(Re,Oe){for(var Le=0;Le<Oe.length;Le++){var Ne=Oe[Le];Ne.enumerable=Ne.enumerable||!1,Ne.configurable=!0,'value'in Ne&&(Ne.writable=!0),Object.defineProperty(Re,Ne.key,Ne)}}return function(Re,Oe,Le){return Oe&&Ce(Re.prototype,Oe),Le&&Ce(Re,Le),Re}}(),$=W(47),J=H($),Z=W(8),Q=W(70),ee=H(Q),te=W(48),ne=H(te),ae=W(148),ie=H(ae),oe=W(138),se=H(oe),le=W(136),de=H(le),ue=W(144),pe=H(ue),ce=W(143),fe=H(ce),ge=W(146),he=H(ge),ye=W(145),me=H(ye),ve=W(99),be=H(ve),xe=W(134),_e=H(xe),ke=W(69),we=H(ke),Se=W(22),Ee=H(Se),Pe='META-INF/container.xml',Te=function(){function Ce(Re,Oe){var Le=this;Y(this,Ce),'undefined'==typeof Oe&&'object'===('undefined'==typeof Re?'undefined':G(Re))&&(Oe=Re,Re=void 0),this.settings=(0,Z.extend)(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:'base64'}),(0,Z.extend)(this.settings,Oe),this.opening=new Z.defer,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new Z.defer,spine:new Z.defer,metadata:new Z.defer,cover:new Z.defer,navigation:new Z.defer,pageList:new Z.defer,resources:new Z.defer},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources]),this.isRendered=!1,this.request=this.settings.requestMethod||we.default,this.spine=new ie.default,this.locations=new se.default(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=new me.default,this.url=void 0,this.path=void 0,this.archived=!1,Re&&this.open(Re).catch(function(){var Ne=new Error('Cannot load book at '+Re);Le.emit('openFailed',Ne)})}return X(Ce,[{key:'open',value:function(Oe,Le){var Ae=Le||this.determineType(Oe),Ne;return'binary'===Ae?(this.archived=!0,this.url=new ee.default('/',''),Ne=this.openEpub(Oe)):'base64'===Ae?(this.archived=!0,this.url=new ee.default('/',''),Ne=this.openEpub(Oe,Ae)):'epub'===Ae?(this.archived=!0,this.url=new ee.default('/',''),Ne=this.request(Oe,'binary').then(this.openEpub.bind(this))):'opf'==Ae?(this.url=new ee.default(Oe),Ne=this.openPackaging(this.url.Path.toString())):(this.url=new ee.default(Oe),Ne=this.openContainer(Pe).then(this.openPackaging.bind(this))),Ne}},{key:'openEpub',value:function(Oe,Le){var Ne=this;return this.unarchive(Oe,Le||this.settings.encoding).then(function(){return Ne.openContainer(Pe)}).then(function(Ae){return Ne.openPackaging(Ae)})}},{key:'openContainer',value:function(Oe){var Le=this;return this.load(Oe).then(function(Ne){return Le.container=new de.default(Ne),Le.resolve(Le.container.packagePath)})}},{key:'openPackaging',value:function(Oe){var Le=this;return this.path=new ne.default(Oe),this.load(Oe).then(function(Ne){return Le.packaging=new pe.default(Ne),Le.unpack(Le.packaging)})}},{key:'load',value:function(Oe){var Le;return this.archived?(Le=this.resolve(Oe),this.archive.request(Le)):(Le=this.resolve(Oe),this.request(Le,null,this.settings.requestCredentials,this.settings.requestHeaders))}},{key:'resolve',value:function(Oe,Le){var Ne=Oe,Ae=-1<Oe.indexOf('://');return Ae?Oe:(this.path&&(Ne=this.path.resolve(Oe)),!1!=Le&&this.url&&(Ne=this.url.resolve(Ne)),Ne)}},{key:'determineType',value:function(Oe){var Le,Ne,Ae;return'base64'===this.settings.encoding?'base64':'string'==typeof Oe?(Le=new ee.default(Oe),Ne=Le.path(),Ae=Ne.extension,Ae?'epub'===Ae?'epub':'opf'===Ae?'opf':void 0:'directory'):'binary'}},{key:'unpack',value:function(Oe){var Le=this;this.package=Oe,this.spine.unpack(this.package,this.resolve.bind(this)),this.resources=new he.default(this.package.manifest,{archive:this.archive,resolver:this.resolve.bind(this),replacements:this.settings.replacements}),this.loadNavigation(this.package).then(function(){Le.toc=Le.navigation.toc,Le.loading.navigation.resolve(Le.navigation)}),this.package.coverPath&&(this.cover=this.resolve(this.package.coverPath)),this.loading.manifest.resolve(this.package.manifest),this.loading.metadata.resolve(this.package.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived?this.replacements().then(function(){Le.opening.resolve(Le)}):this.opening.resolve(this)}},{key:'loadNavigation',value:function(Oe){var Le=this,Ne=Oe.navPath||Oe.ncxPath;return Ne?this.load(Ne,'xml').then(function(Ae){return Le.navigation=new fe.default(Ae),Le.pageList=new me.default(Ae),Le.navigation}):void 0}},{key:'section',value:function(Oe){return this.spine.get(Oe)}},{key:'renderTo',value:function(Oe,Le){return this.rendition=new be.default(this,Le),this.rendition.attachTo(Oe),this.rendition}},{key:'setRequestCredentials',value:function(Oe){this.settings.requestCredentials=Oe}},{key:'setRequestHeaders',value:function(Oe){this.settings.requestHeaders=Oe}},{key:'unarchive',value:function(Oe,Le){return this.archive=new _e.default,this.archive.open(Oe,Le)}},{key:'coverUrl',value:function(){var Oe=this,Le=this.loaded.cover.then(function(){return Oe.archived?Oe.resources.get(Oe.cover):Oe.cover});return Le}},{key:'replacements',value:function(){var Oe=this;return this.spine.hooks.serialize.register(function(Le,Ne){Ne.output=Oe.resources.substitute(Le,Ne.url)}),this.resources.replacements().then(function(){return Oe.resources.replaceCss()})}},{key:'range',value:function(Oe){var Le=new Ee.default(Oe),Ne=this.spine.get(Le.spinePos);return Ne.load().then(function(){var Ae=Le.toRange(Ne.document);return Ae})}},{key:'key',value:function(Oe){var Le=Oe||this.package.metadata.identifier||this.url.filename;return'epubjs:0.3:'+Le}}]),Ce}();(0,J.default)(Te.prototype),U.default=Te,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function Z(Q,ee){for(var te=0;te<ee.length;te++){var ne=ee[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,'value'in ne&&(ne.writable=!0),Object.defineProperty(Q,ne.key,ne)}}return function(Q,ee,te){return ee&&Z(Q.prototype,ee),te&&Z(Q,te),Q}}(),G=W(64),X=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G),$=W(8),J=function(){function Z(Q){H(this,Z),Q&&this.parse(Q)}return Y(Z,[{key:'parse',value:function(ee){var te;if(!ee)throw new Error('Container File Not Found');if(te=(0,$.qs)(ee,'rootfile'),!te)throw new Error('No RootFile Found');this.packagePath=te.getAttribute('full-path'),this.directory=X.default.dirname(this.packagePath),this.encoding=ee.xmlEncoding}}]),Z}();U.default=J,M.exports=U['default']},function(M,U){'use strict';'use strict';function W(G,X){if(!(G instanceof X))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var H=function(){function G(X,$){for(var J=0;J<$.length;J++){var Z=$[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(X,Z.key,Z)}}return function(X,$,J){return $&&G(X.prototype,$),J&&G(X,J),X}}(),Y=function(){function G(X){W(this,G),this.name=X.layout||'reflowable',this._spread='none'!==X.spread,this._minSpreadWidth=X.minSpreadWidth||800,this._evenSpreads=X.evenSpreads||!1,this._flow='scrolled-continuous'===X.flow||'scrolled-doc'===X.flow?'scrolled':'paginated',this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1}return H(G,[{key:'flow',value:function($){this._flow='paginated'===$?'paginated':'scrolled'}},{key:'spread',value:function($,J){this._spread='none'!==$,0<=J&&(this._minSpreadWidth=J)}},{key:'calculate',value:function($,J,Z){var Q=1,ee=Z||0,te=$,ne=Math.floor(te/8),ae,ie,oe;Q=this._spread&&te>=this._minSpreadWidth?2:1,'reflowable'!==this.name||'paginated'!==this._flow||0<=Z||(ee=0==ne%2?ne:ne-1),'pre-paginated'===this.name&&(ee=0),ae=1<Q?(te-ee)/Q:te,'pre-paginated'===this.name&&1<Q&&(te=ae),ie=ae*Q,oe=(ae+ee)*Q,this.width=te,this.height=J,this.spreadWidth=ie,this.delta=oe,this.columnWidth=ae,this.gap=ee,this.divisor=Q}},{key:'format',value:function($){var J;return J='pre-paginated'===this.name?$.fit(this.columnWidth,this.height):'paginated'===this._flow?$.columns(this.width,this.height,this.columnWidth,this.gap):$.size(this.width,null),J}},{key:'count',value:function($){var J=Math.ceil($/this.spreadWidth);return{spreads:J,pages:J*this.divisor}}}]),G}();U.default=Y,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(ae){return ae&&ae.__esModule?ae:{default:ae}}function Y(ae,ie){if(!(ae instanceof ie))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ae(ie,oe){for(var se=0;se<oe.length;se++){var le=oe[se];le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(ie,le.key,le)}}return function(ie,oe,se){return oe&&ae(ie.prototype,oe),se&&ae(ie,se),ie}}(),X=W(8),$=W(68),J=H($),Z=W(22),Q=H(Z),ee=W(47),te=H(ee),ne=function(){function ae(ie,oe){Y(this,ae),this.spine=ie,this.request=oe,this.q=new J.default(this),this.epubcfi=new Q.default,this._locations=[],this.total=0,this.break=150,this._current=0}return G(ae,[{key:'generate',value:function(oe){return oe&&(this.break=oe),this.q.pause(),this.spine.each(function(se){this.q.enqueue(this.process.bind(this),se)}.bind(this)),this.q.run().then(function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}.bind(this))}},{key:'createRange',value:function(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}},{key:'process',value:function(oe){return oe.load(this.request).then(function(se){var le=this.parse(se,oe.cfiBase);this._locations=this._locations.concat(le)}.bind(this))}},{key:'parse',value:function(oe,se,le){var de=[],pe=oe.ownerDocument,ce=(0,X.qs)(pe,'body'),fe=0,he=le||this.break,ue,ge;if((0,X.sprint)(ce,function(ve){var be=ve.length,_e=0,xe;if(0===ve.textContent.trim().length)return!1;for(0==fe&&(ue=this.createRange(),ue.startContainer=ve,ue.startOffset=0),xe=he-fe,xe>be&&(fe+=be,_e=be);_e<be;)if(_e+=xe,_e>=be)fe=be-(_e-he);else{ue.endContainer=ve,ue.endOffset=_e;var ke=new Q.default(ue,se).toString();de.push(ke),fe=0,_e+=1,ue=this.createRange(),ue.startContainer=ve,ue.startOffset=_e,xe=he}ge=ve}.bind(this)),ue&&ue.startContainer&&ge){ue.endContainer=ge,ue.endOffset=ge.length;var ye=new Q.default(ue,se).toString();de.push(ye),fe=0}return de}},{key:'locationFromCfi',value:function(oe){return 0===this._locations.length?-1:(0,X.locationOf)(oe.start,this._locations,this.epubcfi.compare)}},{key:'percentageFromCfi',value:function(oe){if(0===this._locations.length)return null;var se=this.locationFromCfi(oe);return this.percentageFromLocation(se)}},{key:'percentageFromLocation',value:function(oe){return oe&&this.total?oe/this.total:0}},{key:'cfiFromLocation',value:function(oe){var se=-1;return'number'!=typeof oe&&(oe=parseInt(oe)),0<=oe&&oe<this._locations.length&&(se=this._locations[oe]),se}},{key:'cfiFromPercentage',value:function(oe){var se=1<oe?oe/100:oe,le=Math.ceil(this.total*se);return this.cfiFromLocation(le)}},{key:'load',value:function(oe){return this._locations=JSON.parse(oe),this.total=this._locations.length-1,this._locations}},{key:'save',value:function(){return JSON.stringify(this._locations)}},{key:'getCurrent',value:function(){return this._current}},{key:'setCurrent',value:function(oe){var se;if('string'==typeof oe)this._currentCfi=oe;else if('number'==typeof oe)this._current=oe;else return;0===this._locations.length||('string'==typeof oe?(se=this.locationFromCfi(oe),this._current=se):se=oe,this.emit('changed',{percentage:this.percentageFromLocation(se)}))}},{key:'length',value:function(){return this._locations.length}},{key:'currentLocation',get:function(){return this._current},set:function(oe){this.setCurrent(oe)}}]),ae}();(0,te.default)(ne.prototype),U.default=ne,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(ee,te){if(!(ee instanceof te))throw new TypeError('Cannot call a class as a function')}function Y(ee,te){if(!ee)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return te&&('object'==typeof te||'function'==typeof te)?te:ee}function G(ee,te){if('function'!=typeof te&&null!==te)throw new TypeError('Super expression must either be null or a function, not '+typeof te);ee.prototype=Object.create(te&&te.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),te&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,te):ee.__proto__=te)}Object.defineProperty(U,'__esModule',{value:!0});var X=function(){function ee(te,ne){for(var ae=0;ae<ne.length;ae++){var ie=ne[ae];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,'value'in ie&&(ie.writable=!0),Object.defineProperty(te,ie.key,ie)}}return function(te,ne,ae){return ne&&ee(te.prototype,ne),ae&&ee(te,ae),te}}(),$=W(8),J=W(98),Z=function(te){return te&&te.__esModule?te:{default:te}}(J),Q=function(ee){function te(ne){H(this,te);var ae=Y(this,(te.__proto__||Object.getPrototypeOf(te)).call(this,ne));return ae.name='continuous',ae.settings=(0,$.extend)(ae.settings||{},{infinite:!0,overflow:'auto',axis:'vertical',offset:500,offsetDelta:250,width:void 0,height:void 0}),(0,$.extend)(ae.settings,ne.settings||{}),'undefined'!=ne.settings.gap&&0===ne.settings.gap&&(ae.settings.gap=ne.settings.gap),ae.viewSettings={ignoreClass:ae.settings.ignoreClass,axis:ae.settings.axis,layout:ae.layout,width:0,height:0},ae.scrollTop=0,ae.scrollLeft=0,ae}return G(te,ee),X(te,[{key:'display',value:function(ae,ie){return Z.default.prototype.display.call(this,ae,ie).then(function(){return this.fill()}.bind(this))}},{key:'fill',value:function(ae){var ie=ae||new $.defer;return this.check().then(function(oe){oe?this.fill(ie):ie.resolve()}.bind(this)),ie.promise}},{key:'moveTo',value:function(ae){var ie=0,oe=0,se=0,le=0;return'vertical'===this.settings.axis?(oe=ae.top,le=ae.top+this.settings.offset):(ie=Math.floor(ae.left/this.layout.delta)*this.layout.delta,se=ie+this.settings.offset),this.check(se,le).then(function(){this.scrollBy(ie,oe)}.bind(this))}},{key:'resize',value:function(ae,ie){this.q.clear(),this._stageSize=this.stage.size(ae,ie),this._bounds=this.bounds(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.views.each(function(oe){oe.size(this._stageSize.width,this._stageSize.height)}.bind(this)),this.updateLayout(),this.emit('resized',{width:this.stage.width,height:this.stage.height})}},{key:'onResized',value:function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.resize()}.bind(this),150)}},{key:'afterResized',value:function(ae){this.emit('resize',ae.section)}},{key:'removeShownListeners',value:function(ae){ae.onDisplayed=function(){}}},{key:'append',value:function(ae){var ie=this.createView(ae);return this.views.append(ie),ie.onDisplayed=this.afterDisplayed.bind(this),ie}},{key:'prepend',value:function(ae){var ie=this.createView(ae);return ie.on('resized',this.counter.bind(this)),this.views.prepend(ie),ie.onDisplayed=this.afterDisplayed.bind(this),ie}},{key:'counter',value:function(ae){'vertical'===this.settings.axis?this.scrollBy(0,ae.heightDelta,!0):this.scrollBy(ae.widthDelta,0,!0)}},{key:'update',value:function(ae){var ie=this.bounds(),oe=this.views.all(),se=oe.length,le=[],de='undefined'==typeof ae?this.settings.offset||0:ae,ce=new $.defer,fe=[],ue,pe;for(var ge=0;ge<se;ge++)pe=oe[ge],ue=this.isVisible(pe,de,de,ie),!0===ue?(!pe.displayed&&fe.push(pe.display(this.request).then(function(he){he.show()})),le.push(pe)):(this.q.enqueue(pe.destroy.bind(pe)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout(function(){this.q.enqueue(this.trim.bind(this))}.bind(this),250));return fe.length?Promise.all(fe):(ce.resolve(),ce.promise)}},{key:'check',value:function(ae,ie){var ue=new $.defer,pe=[],ce='horizontal'===this.settings.axis,fe=this.settings.offset||0,oe,se,le,de;ae&&ce&&(fe=ae),ie&&!ce&&(fe=ie);var ge=this._bounds,he=ce?this.scrollLeft:this.scrollTop,ye=ce?ge.width:ge.height,me=ce?this.container.scrollWidth:this.container.scrollHeight;return he+ye+fe>=me&&(oe=this.views.last(),le=oe&&oe.section.next(),le&&pe.push(this.append(le))),0>he-fe&&(se=this.views.first(),de=se&&se.section.prev(),de&&pe.push(this.prepend(de))),pe.length?this.q.enqueue(function(){return this.update(fe)}.bind(this)):(ue.resolve(!1),ue.promise)}},{key:'trim',value:function(){var ae=new $.defer,ie=this.views.displayed(),oe=ie[0],se=ie[ie.length-1],le=this.views.indexOf(oe),de=this.views.indexOf(se),ue=this.views.slice(0,le),pe=this.views.slice(de+1);for(var ce=0;ce<ue.length-1;ce++)this.erase(ue[ce],ue);for(var fe=1;fe<pe.length;fe++)this.erase(pe[fe]);return ae.resolve(),ae.promise}},{key:'erase',value:function(ae,ie){var oe,se;this.settings.height?(oe=this.container.scrollTop,se=this.container.scrollLeft):(oe=window.scrollY,se=window.scrollX);var le=ae.bounds();this.views.remove(ae),ie&&('vertical'===this.settings.axis?this.scrollTo(0,oe-le.height,!0):this.scrollTo(se-le.width,0,!0))}},{key:'addEventListeners',value:function(){window.addEventListener('unload',function(){this.ignore=!0,this.destroy()}.bind(this)),this.addScrollListeners()}},{key:'addScrollListeners',value:function(){var ae;this.tick=$.requestAnimationFrame,this.settings.height?(this.prevScrollTop=this.container.scrollTop,this.prevScrollLeft=this.container.scrollLeft):(this.prevScrollTop=window.scrollY,this.prevScrollLeft=window.scrollX),this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.height?(ae=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft):(ae=window,this.scrollTop=window.scrollY,this.scrollLeft=window.scrollX),ae.addEventListener('scroll',this.onScroll.bind(this)),this.scrolled=!1}},{key:'onScroll',value:function(){var ae=void 0,ie=void 0;this.settings.height?(ae=this.container.scrollTop,ie=this.container.scrollLeft):(ae=window.scrollY,ie=window.scrollX),this.scrollTop=ae,this.scrollLeft=ie,this.ignore?this.ignore=!1:(0===this.scrollDeltaVert&&0===this.scrollDeltaHorz||this.scrollDeltaVert>this.settings.offsetDelta||this.scrollDeltaHorz>this.settings.offsetDelta)&&(this.q.enqueue(function(){this.check()}.bind(this)),this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.emit('scroll',{top:ae,left:ie}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout(function(){this.emit('scrolled',{top:this.scrollTop,left:this.scrollLeft})}.bind(this))),this.scrollDeltaVert+=Math.abs(ae-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(ie-this.prevScrollLeft),this.prevScrollTop=ae,this.prevScrollLeft=ie,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}.bind(this),150),this.scrolled=!1}},{key:'currentLocation',value:function(){return this.location='vertical'===this.settings.axis?this.scrolledLocation():this.paginatedLocation(),this.location}},{key:'scrolledLocation',value:function(){var ae=this.visible(),ie,oe;return 1===ae.length?this.mapping.page(ae[0].contents,ae[0].section.cfiBase):1<ae.length?(ie=this.mapping.page(ae[0].contents,ae[0].section.cfiBase),oe=this.mapping.page(ae[ae.length-1].contents,ae[ae.length-1].section.cfiBase),{start:ie.start,end:oe.end}):void 0}},{key:'paginatedLocation',value:function(){var ae=this.visible(),pe=this.container.getBoundingClientRect(),ie,oe,se,le,de,ue;return 1===ae.length?(ie=pe.left-ae[0].position().left,se=ie+this.layout.spreadWidth,this.mapping.page(ae[0].contents,ae[0].section.cfiBase,ie,se)):1<ae.length?(ie=pe.left-ae[0].position().left,se=ie+this.layout.columnWidth,oe=pe.left+this.layout.spreadWidth-ae[ae.length-1].position().left,le=oe+this.layout.columnWidth,de=this.mapping.page(ae[0].contents,ae[0].section.cfiBase,ie,se),ue=this.mapping.page(ae[ae.length-1].contents,ae[ae.length-1].section.cfiBase,oe,le),{start:de.start,end:ue.end}):void 0}},{key:'updateLayout',value:function(){this.stage&&('vertical'===this.settings.axis?this.layout.calculate(this._stageSize.width,this._stageSize.height):(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta,this.stage.addStyleRules('iframe',[{'margin-right':this.layout.gap+'px'}])),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}},{key:'next',value:function(){'horizontal'===this.settings.axis?(this.scrollLeft=this.container.scrollLeft,this.container.scrollLeft+this.container.offsetWidth+this.layout.delta<this.container.scrollWidth?this.scrollBy(this.layout.delta,0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0)):this.scrollBy(0,this.layout.height)}},{key:'prev',value:function(){'horizontal'===this.settings.axis?this.scrollBy(-this.layout.delta,0):this.scrollBy(0,-this.layout.height)}},{key:'updateFlow',value:function(ae){var ie='paginated'===ae?'horizontal':'vertical';this.settings.axis=ie,this.viewSettings.axis=ie,this.settings.overflow='paginated'===ae?'hidden':'auto',this.settings.infinite='vertical'===this.settings.axis}}]),te}(Z.default);U.default=Q,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H($,J){if(!($ instanceof J))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function $(J,Z){for(var Q=0;Q<Z.length;Q++){var ee=Z[Q];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,Z,Q){return Z&&$(J.prototype,Z),Q&&$(J,Q),J}}(),G=W(8),X=function(){function $(J){H(this,$),this.settings=J||{},this.id='epubjs-container-'+(0,G.uuid)(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}return Y($,[{key:'create',value:function(Z){var Q=Z.height,ee=Z.width,te=Z.overflow||!1,ne=Z.axis||'vertical';Z.height&&(0,G.isNumber)(Z.height)&&(Q=Z.height+'px'),Z.width&&(0,G.isNumber)(Z.width)&&(ee=Z.width+'px');var ae=document.createElement('div');return ae.id=this.id,ae.classList.add('epub-container'),ae.style.wordSpacing='0',ae.style.lineHeight='0',ae.style.verticalAlign='top','horizontal'===ne&&(ae.style.whiteSpace='nowrap'),ee&&(ae.style.width=ee),Q&&(ae.style.height=Q),te&&(ae.style.overflow=te),ae}},{key:'wrap',value:function(Z){var Q=document.createElement('div');return Q.style.visibility='hidden',Q.style.overflow='hidden',Q.style.width='0',Q.style.height='0',Q.appendChild(Z),Q}},{key:'getElement',value:function(Z){var Q;if((0,G.isElement)(Z)?Q=Z:'string'==typeof Z&&(Q=document.getElementById(Z)),!Q)throw new Error('Not an Element');return Q}},{key:'attachTo',value:function(Z){var Q=this.getElement(Z),ee;if(Q)return ee=this.settings.hidden?this.wrapper:this.container,Q.appendChild(ee),this.element=Q,Q}},{key:'getContainer',value:function(){return this.container}},{key:'onResize',value:function(Z){(0,G.isNumber)(this.settings.width)&&(0,G.isNumber)(this.settings.height)||window.addEventListener('resize',Z,!1)}},{key:'size',value:function(Z,Q){var ee;return null===Z&&(ee=this.element.getBoundingClientRect(),ee.width&&(Z=ee.width,this.container.style.width=ee.width+'px')),null===Q&&(ee=ee||this.element.getBoundingClientRect(),ee.height&&(Q=ee.height,this.container.style.height=ee.height+'px')),(0,G.isNumber)(Z)||(ee=this.container.getBoundingClientRect(),Z=ee.width),(0,G.isNumber)(Q)||(ee=ee||this.container.getBoundingClientRect(),Q=ee.height),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles['padding-left'])||0,right:parseFloat(this.containerStyles['padding-right'])||0,top:parseFloat(this.containerStyles['padding-top'])||0,bottom:parseFloat(this.containerStyles['padding-bottom'])||0},{width:Z-this.containerPadding.left-this.containerPadding.right,height:Q-this.containerPadding.top-this.containerPadding.bottom}}},{key:'bounds',value:function(){return this.container?this.container.getBoundingClientRect():(0,G.windowBounds)()}},{key:'getSheet',value:function(){var Z=document.createElement('style');return Z.appendChild(document.createTextNode('')),document.head.appendChild(Z),Z.sheet}},{key:'addStyleRules',value:function(Z,Q){var ee='#'+this.id+' ',te='';this.sheet||(this.sheet=this.getSheet()),Q.forEach(function(ne){for(var ae in ne)ne.hasOwnProperty(ae)&&(te+=ae+':'+ne[ae]+';')}),this.sheet.insertRule(ee+Z+' {'+te+'}',0)}}]),$}();U.default=X,M.exports=U['default']},function(M,U){'use strict';'use strict';function W(G,X){if(!(G instanceof X))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var H=function(){function G(X,$){for(var J=0;J<$.length;J++){var Z=$[J];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,'value'in Z&&(Z.writable=!0),Object.defineProperty(X,Z.key,Z)}}return function(X,$,J){return $&&G(X.prototype,$),J&&G(X,J),X}}(),Y=function(){function G(X){W(this,G),this.container=X,this._views=[],this.length=0,this.hidden=!1}return H(G,[{key:'all',value:function(){return this._views}},{key:'first',value:function(){return this._views[0]}},{key:'last',value:function(){return this._views[this._views.length-1]}},{key:'indexOf',value:function($){return this._views.indexOf($)}},{key:'slice',value:function(){return this._views.slice.apply(this._views,arguments)}},{key:'get',value:function($){return this._views[$]}},{key:'append',value:function($){return this._views.push($),this.container&&this.container.appendChild($.element),this.length++,$}},{key:'prepend',value:function($){return this._views.unshift($),this.container&&this.container.insertBefore($.element,this.container.firstChild),this.length++,$}},{key:'insert',value:function($,J){return this._views.splice(J,0,$),this.container&&(J<this.container.children.length?this.container.insertBefore($.element,this.container.children[J]):this.container.appendChild($.element)),this.length++,$}},{key:'remove',value:function($){var J=this._views.indexOf($);-1<J&&this._views.splice(J,1),this.destroy($),this.length--}},{key:'destroy',value:function($){$.displayed&&$.destroy(),this.container&&this.container.removeChild($.element),$=null}},{key:'each',value:function(){return this._views.forEach.apply(this._views,arguments)}},{key:'clear',value:function(){var J=this.length,$;if(this.length){for(var Z=0;Z<J;Z++)$=this._views[Z],this.destroy($);this._views=[],this.length=0}}},{key:'find',value:function($){var Z=this.length,J;for(var Q=0;Q<Z;Q++)if(J=this._views[Q],J.displayed&&J.section.index==$.index)return J}},{key:'displayed',value:function(){var X=[],J=this.length,$;for(var Z=0;Z<J;Z++)$=this._views[Z],$.displayed&&X.push($);return X}},{key:'show',value:function(){var J=this.length,$;for(var Z=0;Z<J;Z++)$=this._views[Z],$.displayed&&$.show();this.hidden=!1}},{key:'hide',value:function(){var J=this.length,$;for(var Z=0;Z<J;Z++)$=this._views[Z],$.displayed&&$.hide();this.hidden=!0}}]),G}();U.default=Y,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(ae){return ae&&ae.__esModule?ae:{default:ae}}function Y(ae,ie){if(!(ae instanceof ie))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ae(ie,oe){for(var se=0;se<oe.length;se++){var le=oe[se];le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(ie,le.key,le)}}return function(ie,oe,se){return oe&&ae(ie.prototype,oe),se&&ae(ie,se),ie}}(),X=W(47),$=H(X),J=W(8),Z=W(22),Q=H(Z),ee=W(65),te=H(ee),ne=function(){function ae(ie,oe){Y(this,ae),this.settings=(0,J.extend)({ignoreClass:'',axis:'vertical',width:0,height:0,layout:void 0,globalLayoutProperties:{}},oe||{}),this.id='epubjs-view-'+(0,J.uuid)(),this.section=ie,this.index=ie.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.width=this.settings.width,this.height=this.settings.height,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new Q.default,this.layout=this.settings.layout}return G(ae,[{key:'container',value:function(oe){var se=document.createElement('div');return se.classList.add('epub-view'),se.style.height='0px',se.style.width='0px',se.style.overflow='hidden',se.style.display=oe&&'horizontal'==oe?'inline-block':'block',se}},{key:'create',value:function(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement('iframe'),this.iframe.id=this.id,this.iframe.scrolling='no',this.iframe.style.overflow='hidden',this.iframe.seamless='seamless',this.iframe.style.border='none',this.resizing=!0,this.element.style.visibility='hidden',this.iframe.style.visibility='hidden',this.iframe.style.width='0',this.iframe.style.height='0',this._width=0,this._height=0,this.element.appendChild(this.iframe),this.added=!0,this.elementBounds=(0,J.bounds)(this.element),this.supportsSrcdoc=!('srcdoc'in this.iframe),this.iframe)}},{key:'render',value:function(oe,se){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(oe)),this.sectionRender.then(function(le){return this.load(le)}.bind(this)).then(function(){}.bind(this)).then(function(){this.settings.layout.format(this.contents),this.expand(),this.addListeners(),!1!==se,this.emit('rendered',this.section)}.bind(this)).catch(function(le){this.emit('loaderror',le)}.bind(this))}},{key:'size',value:function(oe,se){var le=oe||this.settings.width,de=se||this.settings.height;'pre-paginated'===this.layout.name?this.lock('both',le,de):'horizontal'===this.settings.axis?this.lock('height',le,de):this.lock('width',le,de)}},{key:'lock',value:function(oe,se,le){var de=(0,J.borders)(this.element),ue;ue=this.iframe?(0,J.borders)(this.iframe):{width:0,height:0},'width'==oe&&(0,J.isNumber)(se)&&(this.lockedWidth=se-de.width-ue.width,this.resize(this.lockedWidth,se)),'height'==oe&&(0,J.isNumber)(le)&&(this.lockedHeight=le-de.height-ue.height,this.resize(se,this.lockedHeight)),'both'===oe&&(0,J.isNumber)(se)&&(0,J.isNumber)(le)&&(this.lockedWidth=se-de.width-ue.width,this.lockedHeight=le-de.height-ue.height,this.resize(this.lockedWidth,this.lockedHeight)),this.displayed&&this.iframe&&this.expand()}},{key:'expand',value:function(){var oe=this.lockedWidth,se=this.lockedHeight,le,de,ue;!this.iframe||this._expanding||'pre-paginated'===this.layout.name||(this._expanding=!0,'horizontal'===this.settings.axis?(de=this.contents.textWidth(),de==this._textWidth?oe=this._contentWidth:(oe=this.contentWidth(de),le=Math.ceil(oe/(this.settings.layout.columnWidth+this.settings.layout.gap)),1<this.settings.layout.divisor&&'reflowable'===this.settings.layout.name&&0<le%2&&(oe+=this.settings.layout.gap+this.settings.layout.columnWidth),this._textWidth=de,this._contentWidth=oe)):'vertical'===this.settings.axis&&(ue=this.contents.textHeight(),ue==this._textHeight?se=this._contentHeight:(se=this.contentHeight(ue),this._textHeight=ue,this._contentHeight=se)),(this._needsReframe||oe!=this._width||se!=this._height)&&this.resize(oe,se),this._expanding=!1)}},{key:'contentWidth',value:function(oe){var se,le;return se=this.iframe.style.width,this.iframe.style.width=(oe||0)+'px',le=this.contents.scrollWidth(),this.iframe.style.width=se,le}},{key:'contentHeight',value:function(oe){var se,le;return se=this.iframe.style.height,this.iframe.style.height=(oe||0)+'px',le=this.contents.scrollHeight(),this.iframe.style.height=se,le}},{key:'resize',value:function(oe,se){this.iframe&&((0,J.isNumber)(oe)&&(this.iframe.style.width=oe+'px',this._width=oe),(0,J.isNumber)(se)&&(this.iframe.style.height=se+'px',this._height=se),this.iframeBounds=(0,J.bounds)(this.iframe),this.reframe(this.iframeBounds.width,this.iframeBounds.height))}},{key:'reframe',value:function(oe,se){var le;(0,J.isNumber)(oe)&&(this.element.style.width=oe+'px'),(0,J.isNumber)(se)&&(this.element.style.height=se+'px'),this.prevBounds=this.elementBounds,this.elementBounds=(0,J.bounds)(this.element),le={width:this.elementBounds.width,height:this.elementBounds.height,widthDelta:this.elementBounds.width-this.prevBounds.width,heightDelta:this.elementBounds.height-this.prevBounds.height},this.onResize(this,le),this.emit('resized',le)}},{key:'load',value:function(oe){var se=new J.defer,le=se.promise;if(!this.iframe)return se.reject(new Error('No Iframe Available')),le;if(this.iframe.onload=function(de){this.onLoad(de,se)}.bind(this),this.supportsSrcdoc)this.iframe.srcdoc=oe;else{if(this.document=this.iframe.contentDocument,!this.document)return se.reject(new Error('No Document Available')),le;this.iframe.contentDocument.open(),this.iframe.contentDocument.write(oe),this.iframe.contentDocument.close()}return le}},{key:'onLoad',value:function(oe,se){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new te.default(this.document,this.document.body,this.section.cfiBase),this.rendering=!1;var le=this.document.querySelector('link[rel=\'canonical\']');le?le.setAttribute('href',this.section.url):(le=this.document.createElement('link'),le.setAttribute('rel','canonical'),le.setAttribute('href',this.section.url),this.document.querySelector('head').appendChild(le)),this.contents.on('expand',function(){this.displayed&&this.iframe&&this.expand()}),se.resolve(this.contents)}},{key:'setLayout',value:function(oe){this.layout=oe}},{key:'setAxis',value:function(oe){this.settings.axis=oe}},{key:'resizeListenters',value:function(){clearTimeout(this.expanding),this.expanding=setTimeout(this.expand.bind(this),350)}},{key:'addListeners',value:function(){}},{key:'removeListeners',value:function(){}},{key:'display',value:function(oe){var se=new J.defer;return this.displayed?se.resolve(this):this.render(oe).then(function(){this.emit('displayed',this),this.onDisplayed(this),this.displayed=!0,se.resolve(this)}.bind(this)),se.promise}},{key:'show',value:function(){this.element.style.visibility='visible',this.iframe&&(this.iframe.style.visibility='visible'),this.emit('shown',this)}},{key:'hide',value:function(){this.element.style.visibility='hidden',this.iframe.style.visibility='hidden',this.stopExpanding=!0,this.emit('hidden',this)}},{key:'position',value:function(){return this.element.getBoundingClientRect()}},{key:'locationOf',value:function(oe){var se=this.iframe.getBoundingClientRect(),le=this.contents.locationOf(oe,this.settings.ignoreClass);return{left:window.scrollX+se.left+le.left,top:window.scrollY+se.top+le.top}}},{key:'onDisplayed',value:function(){}},{key:'onResize',value:function(){}},{key:'bounds',value:function(){return this.elementBounds||(this.elementBounds=(0,J.bounds)(this.element)),this.elementBounds}},{key:'destroy',value:function(){this.displayed&&(this.displayed=!1,this.removeListeners(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.displayed=!1,this.iframe=null,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}]),ae}();(0,$.default)(ne.prototype),U.default=ne,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H($,J){if(!($ instanceof J))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function $(J,Z){for(var Q=0;Q<Z.length;Q++){var ee=Z[Q];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,Z,Q){return Z&&$(J.prototype,Z),Q&&$(J,Q),J}}(),G=W(8),X=function(){function $(J){H(this,$),this.toc=[],this.tocByHref={},this.tocById={},J&&this.parse(J)}return Y($,[{key:'parse',value:function(Z){var Q=(0,G.qs)(Z,'html'),ee=(0,G.qs)(Z,'ncx');Q?this.toc=this.parseNav(Z):ee&&(this.toc=this.parseNcx(Z)),this.unpack(this.toc)}},{key:'unpack',value:function(Z){var Q;for(var ee=0;ee<Z.length;ee++)Q=Z[ee],this.tocByHref[Q.href]=ee,this.tocById[Q.id]=ee}},{key:'get',value:function(Z){var Q;return Z?(0===Z.indexOf('#')?Q=this.tocById[Z.substring(1)]:Z in this.tocByHref&&(Q=this.tocByHref[Z]),this.toc[Q]):this.toc}},{key:'parseNav',value:function(Z){var Q=(0,G.querySelectorByType)(Z,'nav','toc'),ee=Q?(0,G.qsa)(Q,'li'):[],te=ee.length,ae={},ie=[],ne,oe,se;if(!ee||0===te)return ie;for(ne=0;ne<te;++ne)oe=this.navItem(ee[ne]),ae[oe.id]=oe,oe.parent?(se=ae[oe.parent],se.subitems.push(oe)):ie.push(oe);return ie}},{key:'navItem',value:function(Z){var Q=Z.getAttribute('id')||!1,ee=(0,G.qs)(Z,'a'),te=ee.getAttribute('href')||'',ne=ee.textContent||'',ae=Z.parentNode,ie;return ae&&'navPoint'===ae.nodeName&&(ie=ae.getAttribute('id')),{id:Q,href:te,label:ne,subitems:[],parent:ie}}},{key:'parseNcx',value:function(Z){var Q=(0,G.qsa)(Z,'navPoint'),ee=Q.length,ne={},ae=[],te,ie,oe;if(!Q||0===ee)return ae;for(te=0;te<ee;++te)ie=this.ncxItem(Q[te]),ne[ie.id]=ie,ie.parent?(oe=ne[ie.parent],oe.subitems.push(ie)):ae.push(ie);return ae}},{key:'ncxItem',value:function(Z){var Q=Z.getAttribute('id')||!1,ee=(0,G.qs)(Z,'content'),te=ee.getAttribute('src'),ne=(0,G.qs)(Z,'navLabel'),ae=ne.textContent?ne.textContent:'',ie=Z.parentNode,oe;return ie&&'navPoint'===ie.nodeName&&(oe=ie.getAttribute('id')),{id:Q,href:te,label:ae,subitems:[],parent:oe}}},{key:'forEach',value:function(Z){return this.toc.forEach(Z)}}]),$}();U.default=X,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H($,J){if(!($ instanceof J))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function $(J,Z){for(var Q=0;Q<Z.length;Q++){var ee=Z[Q];ee.enumerable=ee.enumerable||!1,ee.configurable=!0,'value'in ee&&(ee.writable=!0),Object.defineProperty(J,ee.key,ee)}}return function(J,Z,Q){return Z&&$(J.prototype,Z),Q&&$(J,Q),J}}(),G=W(8),X=function(){function $(J){H(this,$),J&&this.parse(J)}return Y($,[{key:'parse',value:function(Z){var Q,ee,te;if(!Z)throw new Error('Package File Not Found');if(Q=(0,G.qs)(Z,'metadata'),!Q)throw new Error('No Metadata Found');if(ee=(0,G.qs)(Z,'manifest'),!ee)throw new Error('No Manifest Found');if(te=(0,G.qs)(Z,'spine'),!te)throw new Error('No Spine Found');return this.manifest=this.parseManifest(ee),this.navPath=this.findNavPath(ee),this.ncxPath=this.findNcxPath(ee,te),this.coverPath=this.findCoverPath(Z),this.spineNodeIndex=Array.prototype.indexOf.call(te.parentNode.childNodes,te),this.spine=this.parseSpine(te,this.manifest),this.metadata=this.parseMetadata(Q),this.metadata.direction=te.getAttribute('page-progression-direction'),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}},{key:'parseMetadata',value:function(Z){var Q={};return Q.title=this.getElementText(Z,'title'),Q.creator=this.getElementText(Z,'creator'),Q.description=this.getElementText(Z,'description'),Q.pubdate=this.getElementText(Z,'date'),Q.publisher=this.getElementText(Z,'publisher'),Q.identifier=this.getElementText(Z,'identifier'),Q.language=this.getElementText(Z,'language'),Q.rights=this.getElementText(Z,'rights'),Q.modified_date=this.getPropertyText(Z,'dcterms:modified'),Q.layout=this.getPropertyText(Z,'rendition:layout'),Q.orientation=this.getPropertyText(Z,'rendition:orientation'),Q.flow=this.getPropertyText(Z,'rendition:flow'),Q.viewport=this.getPropertyText(Z,'rendition:viewport'),Q}},{key:'parseManifest',value:function(Z){var Q={},ee=(0,G.qsa)(Z,'item'),te=Array.prototype.slice.call(ee);return te.forEach(function(ne){var ae=ne.getAttribute('id'),ie=ne.getAttribute('href')||'',oe=ne.getAttribute('media-type')||'',se=ne.getAttribute('properties')||'';Q[ae]={href:ie,type:oe,properties:se.length?se.split(' '):[]}}),Q}},{key:'parseSpine',value:function(Z){var Q=[],ee=Z.getElementsByTagName('itemref'),te=Array.prototype.slice.call(ee);return te.forEach(function(ne,ae){var ie=ne.getAttribute('idref'),oe=ne.getAttribute('properties')||'',se=oe.length?oe.split(' '):[],le={idref:ie,linear:ne.getAttribute('linear')||'',properties:se,index:ae};Q.push(le)}),Q}},{key:'findNavPath',value:function(Z){var Q=(0,G.qsp)(Z,'item',{properties:'nav'});return!!Q&&Q.getAttribute('href')}},{key:'findNcxPath',value:function(Z,Q){var ee=(0,G.qsp)(Z,'item',{'media-type':'application/x-dtbncx+xml'}),te;return ee||(te=Q.getAttribute('toc'),te&&(ee=Z.getElementById(te))),!!ee&&ee.getAttribute('href')}},{key:'findCoverPath',value:function(Z){var Q=(0,G.qs)(Z,'package'),ee=Q.getAttribute('version');if('2.0'===ee){var te=(0,G.qsp)(Z,'meta',{name:'cover'});if(te){var ne=te.getAttribute('content'),ae=Z.getElementById(ne);return ae?ae.getAttribute('href'):''}return!1}var ie=(0,G.qsp)(Z,'item',{properties:'cover-image'});return ie?ie.getAttribute('href'):''}},{key:'getElementText',value:function(Z,Q){var ee=Z.getElementsByTagNameNS('http://purl.org/dc/elements/1.1/',Q),te;return ee&&0!==ee.length?(te=ee[0],te.childNodes.length?te.childNodes[0].nodeValue:''):''}},{key:'getPropertyText',value:function(Z,Q){var ee=(0,G.qsp)(Z,'meta',{property:Q});return ee&&ee.childNodes.length?ee.childNodes[0].nodeValue:''}}]),$}();U.default=X,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y=function(){function Z(Q,ee){for(var te=0;te<ee.length;te++){var ne=ee[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,'value'in ne&&(ne.writable=!0),Object.defineProperty(Q,ne.key,ne)}}return function(Q,ee,te){return ee&&Z(Q.prototype,ee),te&&Z(Q,te),Q}}(),G=W(22),X=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(G),$=W(8),J=function(){function Z(Q){H(this,Z),this.pages=[],this.locations=[],this.epubcfi=new X.default,Q&&(this.pageList=this.parse(Q)),this.pageList&&this.pageList.length&&this.process(this.pageList)}return Y(Z,[{key:'parse',value:function(ee){var te=(0,$.qs)(ee,'html'),ne=(0,$.qs)(ee,'ncx');te?this.toc=this.parseNav(ee):ne}},{key:'parseNav',value:function(ee){var te=(0,$.querySelectorByType)(ee,'nav','page-list'),ne=te?(0,$.qsa)(te,'li'):[],ae=ne.length,oe=[],ie,se;if(!ne||0===ae)return oe;for(ie=0;ie<ae;++ie)se=this.item(ne[ie]),oe.push(se);return oe}},{key:'item',value:function(ee){var te=(0,$.qs)(ee,'a'),ne=te.getAttribute('href')||'',ae=te.textContent||'',ie=parseInt(ae),oe=ne.indexOf('epubcfi'),se,le,de;return-1==oe?{href:ne,page:ie}:(se=ne.split('#'),le=se[0],de=!!(1<se.length)&&se[1],{cfi:de,href:ne,packageUrl:le,page:ie})}},{key:'process',value:function(ee){ee.forEach(function(te){this.pages.push(te.page),te.cfi&&this.locations.push(te.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}},{key:'addCFIs',value:function(){this.pageList.forEach(function(ee){!ee.cfi})}},{key:'pageFromCfi',value:function(ee){var te=-1;if(0===this.locations.length)return-1;var ne=(0,$.indexOfSorted)(ee,this.locations,this.epubcfi.compare);return-1==ne?(ne=(0,$.locationOf)(ee,this.locations,this.epubcfi.compare),te=0<=ne-1?this.pages[ne-1]:this.pages[0],void 0===te&&(te=-1)):te=this.pages[ne],te}},{key:'cfiFromPage',value:function(ee){var te=-1;'number'!=typeof ee&&(ee=parseInt(ee));var ne=this.pages.indexOf(ee);return-1!=ne&&(te=this.locations[ne]),te}},{key:'pageFromPercentage',value:function(ee){var te=Math.round(this.totalPages*ee);return te}},{key:'percentageFromPage',value:function(ee){var te=(ee-this.firstPage)/this.totalPages;return Math.round(1e3*te)/1e3}},{key:'percentageFromCfi',value:function(ee){var te=this.pageFromCfi(ee),ne=this.percentageFromPage(te);return ne}}]),Z}();U.default=J,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(ne){return ne&&ne.__esModule?ne:{default:ne}}function Y(ne,ae){if(!(ne instanceof ae))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ne(ae,ie){for(var oe=0;oe<ie.length;oe++){var se=ie[oe];se.enumerable=se.enumerable||!1,se.configurable=!0,'value'in se&&(se.writable=!0),Object.defineProperty(ae,se.key,se)}}return function(ae,ie,oe){return ie&&ne(ae.prototype,ie),oe&&ne(ae,oe),ae}}(),X=W(52),$=W(8),J=W(48),Z=H(J),Q=W(64),ee=H(Q),te=function(){function ne(ae,ie){Y(this,ne),this.settings={replacements:ie&&ie.replacements||'base64',archive:ie&&ie.archive,resolver:ie&&ie.resolver},this.manifest=ae,this.resources=Object.keys(ae).map(function(oe){return ae[oe]}),this.replacementUrls=[],this.split(),this.splitUrls()}return G(ne,[{key:'split',value:function(){this.html=this.resources.filter(function(ie){if('application/xhtml+xml'===ie.type||'text/html'===ie.type)return!0}),this.assets=this.resources.filter(function(ie){if('application/xhtml+xml'!==ie.type&&'text/html'!==ie.type)return!0}),this.css=this.resources.filter(function(ie){if('text/css'===ie.type)return!0})}},{key:'splitUrls',value:function(){this.urls=this.assets.map(function(ie){return ie.href}.bind(this)),this.cssUrls=this.css.map(function(ie){return ie.href})}},{key:'replacements',value:function(ie,oe){var se=this;if(ie=ie||this.settings.archive,oe=oe||this.settings.resolver,'none'===this.settings.replacements)return new Promise(function(le){le(this.urls)}.bind(this));var ae=this.urls.map(function(le){var de=oe(le);return ie.createUrl(de,{base64:'base64'===se.settings.replacements})});return Promise.all(ae).then(function(le){return se.replacementUrls=le,le})}},{key:'replaceCss',value:function(ie,oe){var se=[];return ie=ie||this.settings.archive,oe=oe||this.settings.resolver,this.cssUrls.forEach(function(le){var de=this.createCssFile(le,ie,oe).then(function(ue){var pe=this.urls.indexOf(le);-1<pe&&(this.replacementUrls[pe]=ue)}.bind(this));se.push(de)}.bind(this)),Promise.all(se)}},{key:'createCssFile',value:function(ie,oe,se){var le=this,de;if(oe=oe||this.settings.archive,se=se||this.settings.resolver,ee.default.isAbsolute(ie))return new Promise(function(fe){fe()});var ue=se(ie),pe=oe.getText(ue),ce=this.urls.map(function(fe){var ge=se(fe),he=new Z.default(ue).relative(ge);return he});return pe.then(function(fe){return fe=(0,X.substitute)(fe,ce,le.replacementUrls),de='base64'===le.settings.replacements?(0,$.createBase64Url)(fe,'text/css'):(0,$.createBlobUrl)(fe,'text/css'),de})}},{key:'relativeTo',value:function(ie,oe){return oe=oe||this.settings.resolver,this.urls.map(function(se){var le=oe(se),de=new Z.default(ie).relative(le);return de}.bind(this))}},{key:'get',value:function(ie){var oe=this.urls.indexOf(ie);return-1===oe?void 0:this.replacementUrls.length?new Promise(function(se){se(this.replacementUrls[oe])}.bind(this)):this.archive.createUrl(ie,{base64:'base64'===this.settings.replacements})}},{key:'substitute',value:function(ie,oe){var se;return se=oe?this.relativeTo(oe):this.urls,(0,X.substitute)(ie,se,this.replacementUrls)}}]),ne}();U.default=te,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(ne){return ne&&ne.__esModule?ne:{default:ne}}function Y(ne,ae){if(!(ne instanceof ae))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ne(ae,ie){for(var oe=0;oe<ie.length;oe++){var se=ie[oe];se.enumerable=se.enumerable||!1,se.configurable=!0,'value'in se&&(se.writable=!0),Object.defineProperty(ae,se.key,se)}}return function(ae,ie,oe){return ie&&ne(ae.prototype,ie),oe&&ne(ae,oe),ae}}(),X=W(8),$=W(22),J=H($),Z=W(67),Q=H(Z),ee=W(52),te=function(){function ne(ae,ie){Y(this,ne),this.idref=ae.idref,this.linear=ae.linear,this.properties=ae.properties,this.index=ae.index,this.href=ae.href,this.url=ae.url,this.next=ae.next,this.prev=ae.prev,this.cfiBase=ae.cfiBase,ie?this.hooks=ie:(this.hooks={},this.hooks.serialize=new Q.default(this),this.hooks.content=new Q.default(this))}return G(ne,[{key:'load',value:function(ie){var oe=ie||this.request||W(69),se=new X.defer,le=se.promise;return this.contents?se.resolve(this.contents):oe(this.url).then(function(de){return this.document=de,this.contents=de.documentElement,this.hooks.content.trigger(this.document,this)}.bind(this)).then(function(){se.resolve(this.contents)}.bind(this)).catch(function(de){se.reject(de)}),le}},{key:'base',value:function(){return(0,ee.replaceBase)(this.document,this)}},{key:'render',value:function(ie){var oe=new X.defer,se=oe.promise;return this.output,this.load(ie).then(function(le){var de,ue;return ue='undefined'==typeof XMLSerializer?W(129).XMLSerializer:XMLSerializer,de=new ue,this.output=de.serializeToString(le),this.output}.bind(this)).then(function(){return this.hooks.serialize.trigger(this.output,this)}.bind(this)).then(function(){oe.resolve(this.output)}.bind(this)).catch(function(le){oe.reject(le)}),se}},{key:'find',value:function(){}},{key:'reconcileLayoutSettings',value:function(ie){var oe={layout:ie.layout,spread:ie.spread,orientation:ie.orientation};return this.properties.forEach(function(se){var le=se.replace('rendition:',''),de=le.indexOf('-'),ue,pe;-1!=de&&(ue=le.slice(0,de),pe=le.slice(de+1),oe[ue]=pe)}),oe}},{key:'cfiFromRange',value:function(ie){return new J.default(ie,this.cfiBase).toString()}},{key:'cfiFromElement',value:function(ie){return new J.default(ie,this.cfiBase).toString()}}]),ne}();U.default=te,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(ae){return ae&&ae.__esModule?ae:{default:ae}}function Y(ae,ie){if(!(ae instanceof ie))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var G=function(){function ae(ie,oe){for(var se=0;se<oe.length;se++){var le=oe[se];le.enumerable=le.enumerable||!1,le.configurable=!0,'value'in le&&(le.writable=!0),Object.defineProperty(ie,le.key,le)}}return function(ie,oe,se){return oe&&ae(ie.prototype,oe),se&&ae(ie,se),ie}}(),X=W(22),$=H(X),J=W(67),Z=H(J),Q=W(147),ee=H(Q),te=W(52),ne=function(){function ae(){Y(this,ae),this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Z.default,this.hooks.content=new Z.default,this.hooks.content.register(te.replaceBase),this.hooks.content.register(te.replaceCanonical),this.epubcfi=new $.default,this.loaded=!1}return G(ae,[{key:'unpack',value:function(oe,se){var le=this;this.items=oe.spine,this.manifest=oe.manifest,this.spineNodeIndex=oe.spineNodeIndex,this.baseUrl=oe.baseUrl||oe.basePath||'',this.length=this.items.length,this.items.forEach(function(de,ue){var pe=le.manifest[de.idref],ce;de.cfiBase=le.epubcfi.generateChapterComponent(le.spineNodeIndex,de.index,de.idref),pe&&(de.href=pe.href,de.url=se(de.href,!0),pe.properties.length&&de.properties.push.apply(de.properties,pe.properties)),de.prev=function(){return this.get(ue-1)}.bind(le),de.next=function(){return this.get(ue+1)}.bind(le),ce=new ee.default(de,le.hooks),le.append(ce)}),this.loaded=!0}},{key:'get',value:function(oe){var se=0;if(this.epubcfi.isCfiString(oe)){var le=new $.default(oe);se=le.spinePos}else oe&&('number'==typeof oe||!1===isNaN(oe))?se=oe:oe&&0===oe.indexOf('#')?se=this.spineById[oe.substring(1)]:oe&&(oe=oe.split('#')[0],se=this.spineByHref[oe]);return this.spineItems[se]||null}},{key:'append',value:function(oe){var se=this.spineItems.length;return oe.index=se,this.spineItems.push(oe),this.spineByHref[oe.href]=se,this.spineById[oe.idref]=se,se}},{key:'prepend',value:function(oe){return this.spineByHref[oe.href]=0,this.spineById[oe.idref]=0,this.spineItems.forEach(function(se,le){se.index=le}),0}},{key:'remove',value:function(oe){var se=this.spineItems.indexOf(oe);if(-1<se)return delete this.spineByHref[oe.href],delete this.spineById[oe.idref],this.spineItems.splice(se,1)}},{key:'each',value:function(){return this.spineItems.forEach.apply(this.spineItems,arguments)}}]),ae}();U.default=ne,M.exports=U['default']},function(M,U,W){'use strict';'use strict';function H(Z,Q){if(!(Z instanceof Q))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(U,'__esModule',{value:!0});var Y='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(Z){return typeof Z}:function(Z){return Z&&'function'==typeof Symbol&&Z.constructor===Symbol&&Z!==Symbol.prototype?'symbol':typeof Z},G=function(){function Z(Q,ee){for(var te=0;te<ee.length;te++){var ne=ee[te];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,'value'in ne&&(ne.writable=!0),Object.defineProperty(Q,ne.key,ne)}}return function(Q,ee,te){return ee&&Z(Q.prototype,ee),te&&Z(Q,te),Q}}(),X=W(70),$=function(Q){return Q&&Q.__esModule?Q:{default:Q}}(X),J=function(){function Z(Q){H(this,Z),this.rendition=Q,this._themes={'default':{rules:[],url:'',serialized:''}},this._overrides={},this._current='default',this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}return G(Z,[{key:'register',value:function(){return 0===arguments.length?void 0:1===arguments.length&&'object'===Y(arguments[0])?this.registerThemes(arguments[0]):1===arguments.length&&'string'==typeof arguments[0]?this.default(arguments[0]):2===arguments.length&&'string'==typeof arguments[1]?this.registerUrl(arguments[0],arguments[1]):2===arguments.length&&'object'===Y(arguments[1])?this.registerRules(arguments[0],arguments[1]):void 0}},{key:'default',value:function(ee){return ee?'string'==typeof ee?this.registerUrl('default',ee):'object'===('undefined'==typeof ee?'undefined':Y(ee))?this.registerRules('default',ee):void 0:void 0}},{key:'registerThemes',value:function(ee){for(var te in ee)ee.hasOwnProperty(te)&&('string'==typeof ee[te]?this.registerUrl(te,ee[te]):this.registerRules(te,ee[te]))}},{key:'registerUrl',value:function(ee,te){var ne=new $.default(te);this._themes[ee]={url:ne.toString()}}},{key:'registerRules',value:function(ee,te){this._themes[ee]={rules:te}}},{key:'apply',value:function(ee){var te=this._current,ne;this._current=ee,this.update(ee),ne=this.rendition.getContents(),ne.forEach(function(ae){ae.removeClass(te),ae.addClass(ee)})}},{key:'update',value:function(ee){var te=this,ne=this.rendition.getContents();ne.forEach(function(ae){te.add(ee,ae)})}},{key:'inject',value:function(ee){var te=[],ne=this._themes,ae;for(var ie in ne)ne.hasOwnProperty(ie)&&(ae=ne[ie],(ae.rules||ae.url&&-1===te.indexOf(ae.url))&&this.add(ie,ee));this._current&&ee.addClass(this._current)}},{key:'add',value:function(ee,te){var ne=this._themes[ee];ne&&(ne.url?te.addStylesheet(ne.url):ne.serialized||ne.rules&&ne.rules.length&&(te.addStylesheetRules(ne.rules),ne.injected=!0))}},{key:'override',value:function(ee,te){var ne=this,ae=this.rendition.getContents();this._overrides[ee]=te,ae.forEach(function(ie){ie.css(ee,ne._overrides[ee])})}},{key:'overrides',value:function(ee){var Q=this._overrides;for(var te in Q)Q.hasOwnProperty(te)&&ee.css(te,Q[te])}},{key:'fontSize',value:function(ee){this.override('font-size',ee)}}]),Z}();U.default=J,M.exports=U['default']},function(M,U,W){W(159),M.exports=W(26).RegExp.escape},function(M,U,W){var H=W(4),Y=W(79),G=W(5)('species');M.exports=function(X){var $;return Y(X)&&($=X.constructor,'function'==typeof $&&($===Array||Y($.prototype))&&($=void 0),H($)&&($=$[G],null===$&&($=void 0))),void 0==$?Array:$}},function(M,U,W){var H=W(151);M.exports=function(Y,G){return new(H(Y))(G)}},function(M,U,W){'use strict';'use strict';var H=W(1),Y=W(25),G='number';M.exports=function(X){if('string'!==X&&X!==G&&'default'!==X)throw TypeError('Incorrect hint');return Y(H(this),X!=G)}},function(M,U,W){var H=W(37),Y=W(61),G=W(51);M.exports=function(X){var $=H(X),J=Y.f;if(J)for(var Z=J(X),Q=G.f,ee=0,te;Z.length>ee;)Q.call(X,te=Z[ee++])&&$.push(te);return $}},function(M,U,W){var H=W(37),Y=W(16);M.exports=function(G,X){for(var $=Y(G),J=H($),Z=J.length,Q=0,ee;Z>Q;)if($[ee=J[Q++]]===X)return ee}},function(M,U,W){'use strict';'use strict';var H=W(157),Y=W(57),G=W(12);M.exports=function(){for(var X=G(this),$=arguments.length,J=Array($),Z=0,Q=H._,ee=!1;$>Z;)(J[Z]=arguments[Z++])===Q&&(ee=!0);return function(){var te=this,ne=arguments.length,ae=0,ie=0,oe;if(!ee&&!ne)return Y(X,J,te);if(oe=J.slice(),ee)for(;$>ae;ae++)oe[ae]===Q&&(oe[ae]=arguments[ie++]);for(;ne>ie;)oe.push(arguments[ie++]);return Y(X,oe,te)}}},function(M,U,W){M.exports=W(2)},function(M){M.exports=function(U,W){var H=W===Object(W)?function(Y){return W[Y]}:W;return function(Y){return(Y+'').replace(U,H)}}},function(M,U,W){var H=W(0),Y=W(158)(/[\\^$*+?.()|[\]{}]/g,'\\$&');H(H.S,'RegExp',{escape:function(X){return Y(X)}})},function(M,U,W){var H=W(0);H(H.P,'Array',{copyWithin:W(101)}),W(42)('copyWithin')},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(23)(4);H(H.P+H.F*!W(21)([].every,!0),'Array',{every:function(X){return Y(this,X,arguments[1])}})},function(M,U,W){var H=W(0);H(H.P,'Array',{fill:W(71)}),W(42)('fill')},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(23)(2);H(H.P+H.F*!W(21)([].filter,!0),'Array',{filter:function(X){return Y(this,X,arguments[1])}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(23)(6),G='findIndex',X=!0;G in[]&&[,][G](function(){X=!1}),H(H.P+H.F*X,'Array',{findIndex:function(J){return Y(this,J,1<arguments.length?arguments[1]:void 0)}}),W(42)(G)},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(23)(5),G='find',X=!0;G in[]&&[,][G](function(){X=!1}),H(H.P+H.F*X,'Array',{find:function(J){return Y(this,J,1<arguments.length?arguments[1]:void 0)}}),W(42)(G)},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(23)(0),G=W(21)([].forEach,!0);H(H.P+H.F*!G,'Array',{forEach:function($){return Y(this,$,arguments[1])}})},function(M,U,W){'use strict';'use strict';var H=W(27),Y=W(0),G=W(10),X=W(110),$=W(78),J=W(9),Z=W(72),Q=W(95);Y(Y.S+Y.F*!W(59)(function(ee){Array.from(ee)}),'Array',{from:function(te){var ne=G(te),ae='function'==typeof this?this:Array,ie=arguments.length,oe=1<ie?arguments[1]:void 0,se=void 0!==oe,le=0,de=Q(ne),ue,pe,ce,fe;if(se&&(oe=H(oe,2<ie?arguments[2]:void 0,2)),void 0!=de&&!(ae==Array&&$(de)))for(fe=de.call(ne),pe=new ae;!(ce=fe.next()).done;le++)Z(pe,le,se?X(fe,oe,[ce.value,le],!0):ce.value);else for(ue=J(ne.length),pe=new ae(ue);ue>le;le++)Z(pe,le,se?oe(ne[le],le):ne[le]);return pe.length=le,pe}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(53)(!1),G=[].indexOf,X=!!G&&0>1/[1].indexOf(1,-0);H(H.P+H.F*(X||!W(21)(G)),'Array',{indexOf:function(J){return X?G.apply(this,arguments)||0:Y(this,J,arguments[1])}})},function(M,U,W){var H=W(0);H(H.S,'Array',{isArray:W(79)})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(16),G=[].join;H(H.P+H.F*(W(50)!=Object||!W(21)(G)),'Array',{join:function($){return G.call(Y(this),$===void 0?',':$)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(16),G=W(32),X=W(9),$=[].lastIndexOf,J=!!$&&0>1/[1].lastIndexOf(1,-0);H(H.P+H.F*(J||!W(21)($)),'Array',{lastIndexOf:function(Q){if(J)return $.apply(this,arguments)||0;var ee=Y(this),te=X(ee.length),ne=te-1;for(1<arguments.length&&(ne=Math.min(ne,G(arguments[1]))),0>ne&&(ne=te+ne);0<=ne;ne--)if(ne in ee&&ee[ne]===Q)return ne||0;return-1}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(23)(1);H(H.P+H.F*!W(21)([].map,!0),'Array',{map:function(X){return Y(this,X,arguments[1])}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(72);H(H.S+H.F*W(3)(function(){function G(){}return!(Array.of.call(G)instanceof G)}),'Array',{of:function(){for(var X=0,$=arguments.length,J=new('function'==typeof this?this:Array)($);$>X;)Y(J,X,arguments[X++]);return J.length=$,J}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(103);H(H.P+H.F*!W(21)([].reduceRight,!0),'Array',{reduceRight:function(X){return Y(this,X,arguments.length,arguments[1],!0)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(103);H(H.P+H.F*!W(21)([].reduce,!0),'Array',{reduce:function(X){return Y(this,X,arguments.length,arguments[1],!1)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(76),G=W(19),X=W(40),$=W(9),J=[].slice;H(H.P+H.F*W(3)(function(){Y&&J.call(Y)}),'Array',{slice:function(Q,ee){var te=$(this.length),ne=G(this);if(ee=void 0===ee?te:ee,'Array'==ne)return J.call(this,Q,ee);for(var ae=X(Q,te),ie=X(ee,te),oe=$(ie-ae),se=Array(oe),le=0;le<oe;le++)se[le]='String'==ne?this.charAt(ae+le):this[ae+le];return se}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(23)(3);H(H.P+H.F*!W(21)([].some,!0),'Array',{some:function(X){return Y(this,X,arguments[1])}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(12),G=W(10),X=W(3),$=[].sort,J=[1,2,3];H(H.P+H.F*(X(function(){J.sort(void 0)})||!X(function(){J.sort(null)})||!W(21)($)),'Array',{sort:function(Q){return Q===void 0?$.call(G(this)):$.call(G(this),Y(Q))}})},function(M,U,W){W(39)('Array')},function(M,U,W){var H=W(0);H(H.S,'Date',{now:function(){return new Date().getTime()}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(3),G=Date.prototype.getTime,X=function($){return 9<$?$:'0'+$};H(H.P+H.F*(Y(function(){return'0385-07-25T07:06:39.999Z'!=new Date(-50000000000001).toISOString()})||!Y(function(){new Date(NaN).toISOString()})),'Date',{toISOString:function(){if(!isFinite(G.call(this)))throw RangeError('Invalid time value');var J=this,Z=J.getUTCFullYear(),Q=J.getUTCMilliseconds(),ee=0>Z?'-':9999<Z?'+':'';return ee+('00000'+Math.abs(Z)).slice(ee?-6:-4)+'-'+X(J.getUTCMonth()+1)+'-'+X(J.getUTCDate())+'T'+X(J.getUTCHours())+':'+X(J.getUTCMinutes())+':'+X(J.getUTCSeconds())+'.'+(99<Q?Q:'0'+X(Q))+'Z'}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(10),G=W(25);H(H.P+H.F*W(3)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),'Date',{toJSON:function(){var $=Y(this),J=G($);return'number'!=typeof J||isFinite(J)?$.toISOString():null}})},function(M,U,W){var H=W(5)('toPrimitive'),Y=Date.prototype;H in Y||W(13)(Y,H,W(153))},function(M,U,W){var H=Date.prototype,Y='Invalid Date',G='toString',X=H[G],$=H.getTime;new Date(NaN)+''!=Y&&W(14)(H,G,function(){var Z=$.call(this);return Z===Z?X.call(this):Y})},function(M,U,W){var H=W(0);H(H.P,'Function',{bind:W(104)})},function(M,U,W){'use strict';'use strict';var H=W(4),Y=W(18),G=W(5)('hasInstance'),X=Function.prototype;G in X||W(7).f(X,G,{value:function($){if('function'!=typeof this||!H($))return!1;if(!H(this.prototype))return $ instanceof this;for(;$=Y($);)if(this.prototype===$)return!0;return!1}})},function(M,U,W){var H=W(7).f,Y=W(31),G=W(11),X=Function.prototype,$=/^\s*function ([^ (]*)/,J='name',Z=Object.isExtensible||function(){return!0};J in X||W(6)&&H(X,J,{configurable:!0,get:function(){try{var Q=this,ee=(''+Q).match($)[1];return G(Q,J)||!Z(Q)||H(Q,J,Y(5,ee)),ee}catch(te){return''}}})},function(M,U,W){var H=W(0),Y=W(112),G=Math.sqrt,X=Math.acosh;H(H.S+H.F*!(X&&710==Math.floor(X(Number.MAX_VALUE))&&X(1/0)==1/0),'Math',{acosh:function(J){return 1>(J=+J)?NaN:94906265.62425156<J?Math.log(J)+Math.LN2:Y(J-1+G(J-1)*G(J+1))}})},function(M,U,W){function H(X){return isFinite(X=+X)&&0!=X?0>X?-H(-X):Math.log(X+Math.sqrt(X*X+1)):X}var Y=W(0),G=Math.asinh;Y(Y.S+Y.F*!(G&&0<1/G(0)),'Math',{asinh:H})},function(M,U,W){var H=W(0),Y=Math.atanh;H(H.S+H.F*!(Y&&0>1/Y(-0)),'Math',{atanh:function(X){return 0==(X=+X)?X:Math.log((1+X)/(1-X))/2}})},function(M,U,W){var H=W(0),Y=W(83);H(H.S,'Math',{cbrt:function(X){return Y(X=+X)*Math.pow(Math.abs(X),1/3)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{clz32:function(G){return(G>>>=0)?31-Math.floor(Math.log(G+0.5)*Math.LOG2E):32}})},function(M,U,W){var H=W(0),Y=Math.exp;H(H.S,'Math',{cosh:function(X){return(Y(X=+X)+Y(-X))/2}})},function(M,U,W){var H=W(0),Y=W(82);H(H.S+H.F*(Y!=Math.expm1),'Math',{expm1:Y})},function(M,U,W){var H=W(0),Y=W(83),G=Math.pow,X=G(2,-52),$=G(2,-23),J=G(2,127)*(2-$),Z=G(2,-126),Q=function(ee){return ee+1/X-1/X};H(H.S,'Math',{fround:function(te){var ne=Math.abs(te),ae=Y(te),ie,oe;return ne<Z?ae*Q(ne/Z/$)*Z*$:(ie=(1+$/X)*ne,oe=ie-(ie-ne),oe>J||oe!=oe?ae*(1/0):ae*oe)}})},function(M,U,W){var H=W(0),Y=Math.abs;H(H.S,'Math',{hypot:function(){for(var X=0,$=0,J=arguments.length,Z=0,Q,ee;$<J;)Q=Y(arguments[$++]),Z<Q?(ee=Z/Q,X=X*ee*ee+1,Z=Q):0<Q?(ee=Q/Z,X+=ee*ee):X+=Q;return Z==1/0?1/0:Z*Math.sqrt(X)}})},function(M,U,W){var H=W(0),Y=Math.imul;H(H.S+H.F*W(3)(function(){return-5!=Y(4294967295,5)||2!=Y.length}),'Math',{imul:function(X,$){var J=65535,Z=+X,Q=+$,ee=J&Z,te=J&Q;return 0|ee*te+((J&Z>>>16)*te+ee*(J&Q>>>16)<<16>>>0)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{log10:function(G){return Math.log(G)/Math.LN10}})},function(M,U,W){var H=W(0);H(H.S,'Math',{log1p:W(112)})},function(M,U,W){var H=W(0);H(H.S,'Math',{log2:function(G){return Math.log(G)/Math.LN2}})},function(M,U,W){var H=W(0);H(H.S,'Math',{sign:W(83)})},function(M,U,W){var H=W(0),Y=W(82),G=Math.exp;H(H.S+H.F*W(3)(function(){return-2e-17!=!Math.sinh(-2e-17)}),'Math',{sinh:function($){return 1>Math.abs($=+$)?(Y($)-Y(-$))/2:(G($-1)-G(-$-1))*(Math.E/2)}})},function(M,U,W){var H=W(0),Y=W(82),G=Math.exp;H(H.S,'Math',{tanh:function($){var J=Y($=+$),Z=Y(-$);return J==1/0?1:Z==1/0?-1:(J-Z)/(G($)+G(-$))}})},function(M,U,W){var H=W(0);H(H.S,'Math',{trunc:function(G){return(0<G?Math.floor:Math.ceil)(G)}})},function(M,U,W){'use strict';'use strict';var H=W(2),Y=W(11),G=W(19),X=W(77),$=W(25),J=W(3),Z=W(36).f,Q=W(17).f,ee=W(7).f,te=W(46).trim,ne='Number',ae=H[ne],ie=ae,oe=ae.prototype,se=G(W(35)(oe))==ne,le='trim'in String.prototype,de=function(fe){var ge=$(fe,!1);if('string'==typeof ge&&2<ge.length){ge=le?ge.trim():te(ge,3);var he=ge.charCodeAt(0),ye,me,ve;if(43===he||45===he){if(ye=ge.charCodeAt(2),88===ye||120===ye)return NaN;}else if(48===he){switch(ge.charCodeAt(1)){case 66:case 98:me=2,ve=49;break;case 79:case 111:me=8,ve=55;break;default:return+ge;}for(var be=ge.slice(2),xe=0,_e=be.length,ke;xe<_e;xe++)if(ke=be.charCodeAt(xe),48>ke||ke>ve)return NaN;return parseInt(be,me)}}return+ge};if(!ae(' 0o1')||!ae('0b1')||ae('+0x1')){ae=function(ge){var he=1>arguments.length?0:ge,ye=this;return ye instanceof ae&&(se?J(function(){oe.valueOf.call(ye)}):G(ye)!=ne)?X(new ie(de(he)),ye,ae):de(he)};for(var ue=W(6)?Z(ie):'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'.split(','),pe=0,ce;ue.length>pe;pe++)Y(ie,ce=ue[pe])&&!Y(ae,ce)&&ee(ae,ce,Q(ie,ce));ae.prototype=oe,oe.constructor=ae,W(14)(H,ne,ae)}},function(M,U,W){var H=W(0);H(H.S,'Number',{EPSILON:Math.pow(2,-52)})},function(M,U,W){var H=W(0),Y=W(2).isFinite;H(H.S,'Number',{isFinite:function(X){return'number'==typeof X&&Y(X)}})},function(M,U,W){var H=W(0);H(H.S,'Number',{isInteger:W(109)})},function(M,U,W){var H=W(0);H(H.S,'Number',{isNaN:function(G){return G!=G}})},function(M,U,W){var H=W(0),Y=W(109),G=Math.abs;H(H.S,'Number',{isSafeInteger:function($){return Y($)&&9007199254740991>=G($)}})},function(M,U,W){var H=W(0);H(H.S,'Number',{MAX_SAFE_INTEGER:9007199254740991})},function(M,U,W){var H=W(0);H(H.S,'Number',{MIN_SAFE_INTEGER:-9007199254740991})},function(M,U,W){var H=W(0),Y=W(119);H(H.S+H.F*(Number.parseFloat!=Y),'Number',{parseFloat:Y})},function(M,U,W){var H=W(0),Y=W(120);H(H.S+H.F*(Number.parseInt!=Y),'Number',{parseInt:Y})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(32),G=W(100),X=W(90),$=1 .toFixed,J=Math.floor,Z=[0,0,0,0,0,0],Q='Number.toFixed: incorrect invocation!',ee='0',te=function(se,le){for(var de=-1,ue=le;6>++de;)ue+=se*Z[de],Z[de]=ue%1e7,ue=J(ue/1e7)},ne=function(se){for(var le=6,de=0;0<=--le;)de+=Z[le],Z[le]=J(de/se),de=1e7*(de%se)},ae=function(){for(var se=6,le='';0<=--se;)if(''!==le||0===se||0!==Z[se]){var de=Z[se]+'';le=''===le?de:le+X.call(ee,7-de.length)+de}return le},ie=function(se,le,de){return 0===le?de:1==le%2?ie(se,le-1,de*se):ie(se*se,le/2,de)},oe=function(se){for(var le=0,de=se;4096<=de;)le+=12,de/=4096;for(;2<=de;)le+=1,de/=2;return le};H(H.P+H.F*('0.000'!==8e-5.toFixed(3)||'1'!==0.9.toFixed(0)||'1.25'!==1.255.toFixed(2)||'1000000000000000128'!==1000000000000000100 .toFixed(0)||!W(3)(function(){$.call({})})),'Number',{toFixed:function(le){var de=G(this,Q),ue=Y(le),pe='',ce=ee,fe,ge,he,ye;if(0>ue||20<ue)throw RangeError(Q);if(de!=de)return'NaN';if(-1e21>=de||1e21<=de)return de+'';if(0>de&&(pe='-',de=-de),1e-21<de)if(fe=oe(de*ie(2,69,1))-69,ge=0>fe?de*ie(2,-fe,1):de/ie(2,fe,1),ge*=4503599627370496,fe=52-fe,0<fe){for(te(0,ge),he=ue;7<=he;)te(1e7,0),he-=7;for(te(ie(10,he,1),0),he=fe-1;23<=he;)ne(8388608),he-=23;ne(1<<he),te(1,1),ne(2),ce=ae()}else te(0,ge),te(1<<-fe,0),ce=ae()+X.call(ee,ue);return 0<ue?(ye=ce.length,ce=pe+(ye<=ue?'0.'+X.call(ee,ue-ye)+ce:ce.slice(0,ye-ue)+'.'+ce.slice(ye-ue))):ce=pe+ce,ce}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(3),G=W(100),X=1 .toPrecision;H(H.P+H.F*(Y(function(){return'1'!==X.call(1,void 0)})||!Y(function(){X.call({})})),'Number',{toPrecision:function(J){var Z=G(this,'Number#toPrecision: incorrect invocation!');return J===void 0?X.call(Z):X.call(Z,J)}})},function(M,U,W){var H=W(0);H(H.S+H.F,'Object',{assign:W(113)})},function(M,U,W){var H=W(0);H(H.S,'Object',{create:W(35)})},function(M,U,W){var H=W(0);H(H.S+H.F*!W(6),'Object',{defineProperties:W(114)})},function(M,U,W){var H=W(0);H(H.S+H.F*!W(6),'Object',{defineProperty:W(7).f})},function(M,U,W){var H=W(4),Y=W(30).onFreeze;W(24)('freeze',function(G){return function($){return G&&H($)?G(Y($)):$}})},function(M,U,W){var H=W(16),Y=W(17).f;W(24)('getOwnPropertyDescriptor',function(){return function(X,$){return Y(H(X),$)}})},function(M,U,W){W(24)('getOwnPropertyNames',function(){return W(115).f})},function(M,U,W){var H=W(10),Y=W(18);W(24)('getPrototypeOf',function(){return function(X){return Y(H(X))}})},function(M,U,W){var H=W(4);W(24)('isExtensible',function(Y){return function(X){return!!H(X)&&(!Y||Y(X))}})},function(M,U,W){var H=W(4);W(24)('isFrozen',function(Y){return function(X){return!H(X)||!!Y&&Y(X)}})},function(M,U,W){var H=W(4);W(24)('isSealed',function(Y){return function(X){return!H(X)||!!Y&&Y(X)}})},function(M,U,W){var H=W(0);H(H.S,'Object',{is:W(121)})},function(M,U,W){var H=W(10),Y=W(37);W(24)('keys',function(){return function(X){return Y(H(X))}})},function(M,U,W){var H=W(4),Y=W(30).onFreeze;W(24)('preventExtensions',function(G){return function($){return G&&H($)?G(Y($)):$}})},function(M,U,W){var H=W(4),Y=W(30).onFreeze;W(24)('seal',function(G){return function($){return G&&H($)?G(Y($)):$}})},function(M,U,W){var H=W(0);H(H.S,'Object',{setPrototypeOf:W(85).set})},function(M,U,W){'use strict';'use strict';var H=W(49),Y={};Y[W(5)('toStringTag')]='z',W(14)(Object.prototype,'toString',function(){return'[object '+H(this)+']'},!0)},function(M,U,W){var H=W(0),Y=W(119);H(H.G+H.F*(parseFloat!=Y),{parseFloat:Y})},function(M,U,W){var H=W(0),Y=W(120);H(H.G+H.F*(parseInt!=Y),{parseInt:Y})},function(M,U,W){'use strict';'use strict';var H=W(34),Y=W(2),G=W(27),X=W(49),$=W(0),J=W(4),Z=W(12),Q=W(33),ee=W(43),te=W(87),ne=W(92).set,ae=W(84)(),ie='Promise',oe=Y.TypeError,se=Y.process,le=Y[ie],se=Y.process,de='process'==X(se),ue=function(){},pe,ce,fe,ge=!!function(){try{var Pe=le.resolve(1),Te=(Pe.constructor={})[W(5)('species')]=function(Ce){Ce(ue,ue)};return(de||'function'==typeof PromiseRejectionEvent)&&Pe.then(ue)instanceof Te}catch(Ce){}}(),he=function(Pe,Te){return Pe===Te||Pe===le&&Te===fe},ye=function(Pe){var Te;return J(Pe)&&'function'==typeof(Te=Pe.then)&&Te},me=function(Pe){return he(le,Pe)?new ve(Pe):new ce(Pe)},ve=ce=function(Pe){var Te,Ce;this.promise=new Pe(function(Re,Oe){if(Te!=void 0||Ce!=void 0)throw oe('Bad Promise constructor');Te=Re,Ce=Oe}),this.resolve=Z(Te),this.reject=Z(Ce)},be=function(Pe){try{Pe()}catch(Te){return{error:Te}}},xe=function(Pe,Te){if(!Pe._n){Pe._n=!0;var Ce=Pe._c;ae(function(){for(var De=Pe._v,Ue=1==Pe._s,We=0,He=function(Ye){var Ve=Ue?Ye.ok:Ye.fail,Ge=Ye.resolve,Qe=Ye.reject,et=Ye.domain,tt,nt;try{Ve?(!Ue&&(2==Pe._h&&we(Pe),Pe._h=1),!0===Ve?tt=De:(et&&et.enter(),tt=Ve(De),et&&et.exit()),tt===Ye.promise?Qe(oe('Promise-chain cycle')):(nt=ye(tt))?nt.call(tt,Ge,Qe):Ge(tt)):Qe(De)}catch(ot){Qe(ot)}};Ce.length>We;)He(Ce[We++]);Pe._c=[],Pe._n=!1,Te&&!Pe._h&&_e(Pe)})}},_e=function(Pe){ne.call(Y,function(){var Te=Pe._v,Ce,Re,Oe;if(ke(Pe)&&(Ce=be(function(){de?se.emit('unhandledRejection',Te,Pe):(Re=Y.onunhandledrejection)?Re({promise:Pe,reason:Te}):(Oe=Y.console)&&Oe.error&&Oe.error('Unhandled promise rejection',Te)}),Pe._h=de||ke(Pe)?2:1),Pe._a=void 0,Ce)throw Ce.error})},ke=function(Pe){if(1==Pe._h)return!1;for(var Te=Pe._a||Pe._c,Ce=0,Re;Te.length>Ce;)if(Re=Te[Ce++],Re.fail||!ke(Re.promise))return!1;return!0},we=function(Pe){ne.call(Y,function(){var Te;de?se.emit('rejectionHandled',Pe):(Te=Y.onrejectionhandled)&&Te({promise:Pe,reason:Pe._v})})},Se=function(Pe){var Te=this;Te._d||(Te._d=!0,Te=Te._w||Te,Te._v=Pe,Te._s=2,!Te._a&&(Te._a=Te._c.slice()),xe(Te,!0))},Ee=function(Pe){var Te=this,Ce;if(!Te._d){Te._d=!0,Te=Te._w||Te;try{if(Te===Pe)throw oe('Promise can\'t be resolved itself');(Ce=ye(Pe))?ae(function(){var De={_w:Te,_d:!1};try{Ce.call(Pe,G(Ee,De,1),G(Se,De,1))}catch(Ue){Se.call(De,Ue)}}):(Te._v=Pe,Te._s=1,xe(Te,!1))}catch(De){Se.call({_w:Te,_d:!1},De)}}};ge||(le=function(Te){Q(this,le,ie,'_h'),Z(Te),pe.call(this);try{Te(G(Ee,this,1),G(Se,this,1))}catch(Ce){Se.call(this,Ce)}},pe=function(){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},pe.prototype=W(38)(le.prototype,{then:function(Te,Ce){var Re=me(te(this,le));return Re.ok='function'!=typeof Te||Te,Re.fail='function'==typeof Ce&&Ce,Re.domain=de?se.domain:void 0,this._c.push(Re),this._a&&this._a.push(Re),this._s&&xe(this,!1),Re.promise},'catch':function(Pe){return this.then(void 0,Pe)}}),ve=function(){var Pe=new pe;this.promise=Pe,this.resolve=G(Ee,Pe,1),this.reject=G(Se,Pe,1)}),$($.G+$.W+$.F*!ge,{Promise:le}),W(45)(le,ie),W(39)(ie),fe=W(26)[ie],$($.S+$.F*!ge,ie,{reject:function(Te){var Ce=me(this),Re=Ce.reject;return Re(Te),Ce.promise}}),$($.S+$.F*(H||!ge),ie,{resolve:function(Te){if(Te instanceof le&&he(Te.constructor,this))return Te;var Ce=me(this),Re=Ce.resolve;return Re(Te),Ce.promise}}),$($.S+$.F*!(ge&&W(59)(function(Pe){le.all(Pe)['catch'](ue)})),ie,{all:function(Te){var Ce=this,Re=me(Ce),Oe=Re.resolve,Le=Re.reject,Ne=be(function(){var Ae=[],Ie=0,Fe=1;ee(Te,!1,function(ze){var qe=Ie++,Me=!1;Ae.push(void 0),Fe++,Ce.resolve(ze).then(function(je){Me||(Me=!0,Ae[qe]=je,--Fe||Oe(Ae))},Le)}),--Fe||Oe(Ae)});return Ne&&Le(Ne.error),Re.promise},race:function(Te){var Ce=this,Re=me(Ce),Oe=Re.reject,Le=be(function(){ee(Te,!1,function(Ne){Ce.resolve(Ne).then(Re.resolve,Oe)})});return Le&&Oe(Le.error),Re.promise}})},function(M,U,W){var H=W(0),Y=W(12),G=W(1),X=(W(2).Reflect||{}).apply,$=Function.apply;H(H.S+H.F*!W(3)(function(){X(function(){})}),'Reflect',{apply:function(Z,Q,ee){var te=Y(Z),ne=G(ee);return X?X(te,Q,ne):$.call(te,Q,ne)}})},function(M,U,W){var H=W(0),Y=W(35),G=W(12),X=W(1),$=W(4),J=W(3),Z=W(104),Q=(W(2).Reflect||{}).construct,ee=J(function(){function ne(){}return!(Q(function(){},[],ne)instanceof ne)}),te=!J(function(){Q(function(){})});H(H.S+H.F*(ee||te),'Reflect',{construct:function(ae,ie){G(ae),X(ie);var oe=3>arguments.length?ae:G(arguments[2]);if(te&&!ee)return Q(ae,ie,oe);if(ae==oe){switch(ie.length){case 0:return new ae;case 1:return new ae(ie[0]);case 2:return new ae(ie[0],ie[1]);case 3:return new ae(ie[0],ie[1],ie[2]);case 4:return new ae(ie[0],ie[1],ie[2],ie[3]);}var se=[null];return se.push.apply(se,ie),new(Z.apply(ae,se))}var le=oe.prototype,de=Y($(le)?le:Object.prototype),ue=Function.apply.call(ae,de,ie);return $(ue)?ue:de}})},function(M,U,W){var H=W(7),Y=W(0),G=W(1),X=W(25);Y(Y.S+Y.F*W(3)(function(){Reflect.defineProperty(H.f({},1,{value:1}),1,{value:2})}),'Reflect',{defineProperty:function(J,Z,Q){G(J),Z=X(Z,!0),G(Q);try{return H.f(J,Z,Q),!0}catch(ee){return!1}}})},function(M,U,W){var H=W(0),Y=W(17).f,G=W(1);H(H.S,'Reflect',{deleteProperty:function($,J){var Z=Y(G($),J);return Z&&!Z.configurable?!1:delete $[J]}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(1),G=function(X){this._t=Y(X),this._i=0;var $=this._k=[],J;for(J in X)$.push(J)};W(80)(G,'Object',function(){var X=this,$=X._k,J;do if(X._i>=$.length)return{value:void 0,done:!0};while(!((J=$[X._i++])in X._t));return{value:J,done:!1}}),H(H.S,'Reflect',{enumerate:function($){return new G($)}})},function(M,U,W){var H=W(17),Y=W(0),G=W(1);Y(Y.S,'Reflect',{getOwnPropertyDescriptor:function($,J){return H.f(G($),J)}})},function(M,U,W){var H=W(0),Y=W(18),G=W(1);H(H.S,'Reflect',{getPrototypeOf:function($){return Y(G($))}})},function(M,U,W){function H(Q,ee){var te=3>arguments.length?Q:arguments[2],ne,ae;return Z(Q)===te?Q[ee]:(ne=Y.f(Q,ee))?X(ne,'value')?ne.value:void 0===ne.get?void 0:ne.get.call(te):J(ae=G(Q))?H(ae,ee,te):void 0}var Y=W(17),G=W(18),X=W(11),$=W(0),J=W(4),Z=W(1);$($.S,'Reflect',{get:H})},function(M,U,W){var H=W(0);H(H.S,'Reflect',{has:function(G,X){return X in G}})},function(M,U,W){var H=W(0),Y=W(1),G=Object.isExtensible;H(H.S,'Reflect',{isExtensible:function($){return Y($),!G||G($)}})},function(M,U,W){var H=W(0);H(H.S,'Reflect',{ownKeys:W(118)})},function(M,U,W){var H=W(0),Y=W(1),G=Object.preventExtensions;H(H.S,'Reflect',{preventExtensions:function($){Y($);try{return G&&G($),!0}catch(J){return!1}}})},function(M,U,W){var H=W(0),Y=W(85);Y&&H(H.S,'Reflect',{setPrototypeOf:function(X,$){Y.check(X,$);try{return Y.set(X,$),!0}catch(J){return!1}}})},function(M,U,W){function H(te,ne,ae){var ie=4>arguments.length?te:arguments[3],oe=G.f(Q(te),ne),se,le;if(!oe){if(ee(le=X(te)))return H(le,ne,ae,ie);oe=Z(0)}return $(oe,'value')?!1!==oe.writable&&ee(ie)&&(se=G.f(ie,ne)||Z(0),se.value=ae,Y.f(ie,ne,se),!0):void 0!==oe.set&&(oe.set.call(ie,ae),!0)}var Y=W(7),G=W(17),X=W(18),$=W(11),J=W(0),Z=W(31),Q=W(1),ee=W(4);J(J.S,'Reflect',{set:H})},function(M,U,W){var H=W(2),Y=W(77),G=W(7).f,X=W(36).f,$=W(58),J=W(56),Z=H.RegExp,Q=Z,ee=Z.prototype,te=/a/g,ne=/a/g,ae=new Z(te)!==te;if(W(6)&&(!ae||W(3)(function(){return ne[W(5)('match')]=!1,Z(te)!=te||Z(ne)==ne||'/a/i'!=Z(te,'i')}))){Z=function(de,ue){var pe=this instanceof Z,ce=$(de),fe=ue===void 0;return!pe&&ce&&de.constructor===Z&&fe?de:Y(ae?new Q(ce&&!fe?de.source:de,ue):Q((ce=de instanceof Z)?de.source:de,ce&&fe?J.call(de):ue),pe?this:ee,Z)};var ie=function(le){le in Z||G(Z,le,{configurable:!0,get:function(){return Q[le]},set:function(de){Q[le]=de}})};for(var oe=X(Q),se=0;oe.length>se;)ie(oe[se++]);ee.constructor=Z,Z.prototype=ee,W(14)(H,'RegExp',Z)}W(39)('RegExp')},function(M,U,W){W(55)('match',1,function(H,Y,G){return[function($){'use strict';var J=H(this),Z=$==void 0?void 0:$[Y];return Z===void 0?new RegExp($)[Y](J+''):Z.call($,J)},G]})},function(M,U,W){W(55)('replace',2,function(H,Y,G){return[function($,J){'use strict';var Z=H(this),Q=$==void 0?void 0:$[Y];return Q===void 0?G.call(Z+'',$,J):Q.call($,Z,J)},G]})},function(M,U,W){W(55)('search',1,function(H,Y,G){return[function($){'use strict';var J=H(this),Z=$==void 0?void 0:$[Y];return Z===void 0?new RegExp($)[Y](J+''):Z.call($,J)},G]})},function(M,U,W){W(55)('split',2,function(H,Y,G){'use strict';var X=W(58),$=G,J=[].push,Z='split',Q='length',ee='lastIndex';if('c'=='abbc'[Z](/(b)*/)[1]||4!='test'[Z](/(?:)/,-1)[Q]||2!='ab'[Z](/(?:ab)*/)[Q]||4!='.'[Z](/(.?)(.?)/)[Q]||1<'.'[Z](/()()/)[Q]||''[Z](/.?/)[Q]){var te=/()??/.exec('')[1]===void 0;G=function(ne,ae){var ie=this+'';if(void 0===ne&&0===ae)return[];if(!X(ne))return $.call(ie,ne,ae);var oe=[],se=(ne.ignoreCase?'i':'')+(ne.multiline?'m':'')+(ne.unicode?'u':'')+(ne.sticky?'y':''),le=0,de=void 0===ae?4294967295:ae>>>0,ue=new RegExp(ne.source,se+'g'),pe,ce,fe,ge,he;for(te||(pe=new RegExp('^'+ue.source+'$(?!\\s)',se));(ce=ue.exec(ie))&&(fe=ce.index+ce[0][Q],!(fe>le&&(oe.push(ie.slice(le,ce.index)),!te&&1<ce[Q]&&ce[0].replace(pe,function(){for(he=1;he<arguments[Q]-2;he++)void 0===arguments[he]&&(ce[he]=void 0)}),1<ce[Q]&&ce.index<ie[Q]&&J.apply(oe,ce.slice(1)),ge=ce[0][Q],le=fe,oe[Q]>=de)));)ue[ee]===ce.index&&ue[ee]++;return le===ie[Q]?(ge||!ue.test(''))&&oe.push(''):oe.push(ie.slice(le)),oe[Q]>de?oe.slice(0,de):oe}}else'0'[Z](void 0,0)[Q]&&(G=function(ne,ae){return void 0===ne&&0===ae?[]:$.call(this,ne,ae)});return[function(ae,ie){var oe=H(this),se=ae==void 0?void 0:ae[Y];return se===void 0?G.call(oe+'',ae,ie):se.call(ae,oe,ie)},G]})},function(M,U,W){'use strict';'use strict';W(125);var H=W(1),Y=W(56),G=W(6),X='toString',$=/./[X],J=function(Z){W(14)(RegExp.prototype,X,Z,!0)};W(3)(function(){return'/a/b'!=$.call({source:'a',flags:'b'})})?J(function(){var Q=H(this);return'/'.concat(Q.source,'/','flags'in Q?Q.flags:!G&&Q instanceof RegExp?Y.call(Q):void 0)}):$.name!=X&&J(function(){return $.call(this)})},function(M,U,W){'use strict';'use strict';W(15)('anchor',function(H){return function(G){return H(this,'a','name',G)}})},function(M,U,W){'use strict';'use strict';W(15)('big',function(H){return function(){return H(this,'big','','')}})},function(M,U,W){'use strict';'use strict';W(15)('blink',function(H){return function(){return H(this,'blink','','')}})},function(M,U,W){'use strict';'use strict';W(15)('bold',function(H){return function(){return H(this,'b','','')}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(88)(!1);H(H.P,'String',{codePointAt:function(X){return Y(this,X)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(9),G=W(89),X='endsWith',$=''[X];H(H.P+H.F*W(75)(X),'String',{endsWith:function(Z){var Q=G(this,Z,X),ee=1<arguments.length?arguments[1]:void 0,te=Y(Q.length),ne=ee===void 0?te:Math.min(Y(ee),te),ae=Z+'';return Q.slice(ne-ae.length,ne)===ae}})},function(M,U,W){'use strict';'use strict';W(15)('fixed',function(H){return function(){return H(this,'tt','','')}})},function(M,U,W){'use strict';'use strict';W(15)('fontcolor',function(H){return function(G){return H(this,'font','color',G)}})},function(M,U,W){'use strict';'use strict';W(15)('fontsize',function(H){return function(G){return H(this,'font','size',G)}})},function(M,U,W){var H=W(0),Y=W(40),G=String.fromCharCode,X=String.fromCodePoint;H(H.S+H.F*(!!X&&1!=X.length),'String',{fromCodePoint:function(){for(var J=[],Z=arguments.length,Q=0,ee;Z>Q;){if(ee=+arguments[Q++],Y(ee,1114111)!==ee)throw RangeError(ee+' is not a valid code point');J.push(65536>ee?G(ee):G(((ee-=65536)>>10)+55296,ee%1024+56320))}return J.join('')}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(89),G='includes';H(H.P+H.F*W(75)(G),'String',{includes:function($){return!!~Y(this,$,G).indexOf($,1<arguments.length?arguments[1]:void 0)}})},function(M,U,W){'use strict';'use strict';W(15)('italics',function(H){return function(){return H(this,'i','','')}})},function(M,U,W){'use strict';'use strict';var H=W(88)(!0);W(81)(String,'String',function(Y){this._t=Y+'',this._i=0},function(){var Y=this._t,G=this._i,X;return G>=Y.length?{value:void 0,done:!0}:(X=H(Y,G),this._i+=X.length,{value:X,done:!1})})},function(M,U,W){'use strict';'use strict';W(15)('link',function(H){return function(G){return H(this,'a','href',G)}})},function(M,U,W){var H=W(0),Y=W(16),G=W(9);H(H.S,'String',{raw:function($){for(var J=Y($.raw),Z=G(J.length),Q=arguments.length,ee=[],te=0;Z>te;)ee.push(J[te++]+''),te<Q&&ee.push(arguments[te]+'');return ee.join('')}})},function(M,U,W){var H=W(0);H(H.P,'String',{repeat:W(90)})},function(M,U,W){'use strict';'use strict';W(15)('small',function(H){return function(){return H(this,'small','','')}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(9),G=W(89),X='startsWith',$=''[X];H(H.P+H.F*W(75)(X),'String',{startsWith:function(Z){var Q=G(this,Z,X),ee=Y(Math.min(1<arguments.length?arguments[1]:void 0,Q.length)),te=Z+'';return Q.slice(ee,ee+te.length)===te}})},function(M,U,W){'use strict';'use strict';W(15)('strike',function(H){return function(){return H(this,'strike','','')}})},function(M,U,W){'use strict';'use strict';W(15)('sub',function(H){return function(){return H(this,'sub','','')}})},function(M,U,W){'use strict';'use strict';W(15)('sup',function(H){return function(){return H(this,'sup','','')}})},function(M,U,W){'use strict';'use strict';W(46)('trim',function(H){return function(){return H(this,3)}})},function(M,U,W){'use strict';'use strict';var H=W(2),Y=W(11),G=W(6),X=W(0),$=W(14),J=W(30).KEY,Z=W(3),Q=W(62),ee=W(45),te=W(41),ne=W(5),ae=W(123),ie=W(94),oe=W(155),se=W(154),le=W(79),de=W(1),ue=W(16),pe=W(25),ce=W(31),fe=W(35),ge=W(115),he=W(17),ye=W(7),me=W(37),ve=he.f,be=ye.f,xe=ge.f,_e=H.Symbol,ke=H.JSON,we=ke&&ke.stringify,Se='prototype',Ee=ne('_hidden'),Pe=ne('toPrimitive'),Te={}.propertyIsEnumerable,Ce=Q('symbol-registry'),Re=Q('symbols'),Oe=Q('op-symbols'),Le=Object[Se],Ne='function'==typeof _e,Ae=H.QObject,Ie=!Ae||!Ae[Se]||!Ae[Se].findChild,Fe=G&&Z(function(){return 7!=fe(be({},'a',{get:function(){return be(this,'a',{value:7}).a}})).a})?function(Ve,Ge,Xe){var Ke=ve(Le,Ge);Ke&&delete Le[Ge],be(Ve,Ge,Xe),Ke&&Ve!==Le&&be(Le,Ge,Ke)}:be,ze=function(Ve){var Ge=Re[Ve]=fe(_e[Se]);return Ge._k=Ve,Ge},qe=Ne&&'symbol'==typeof _e.iterator?function(Ve){return'symbol'==typeof Ve}:function(Ve){return Ve instanceof _e},Me=function(Ge,Xe,Ke){return Ge===Le&&Me(Oe,Xe,Ke),de(Ge),Xe=pe(Xe,!0),de(Ke),Y(Re,Xe)?(Ke.enumerable?(Y(Ge,Ee)&&Ge[Ee][Xe]&&(Ge[Ee][Xe]=!1),Ke=fe(Ke,{enumerable:ce(0,!1)})):(!Y(Ge,Ee)&&be(Ge,Ee,ce(1,{})),Ge[Ee][Xe]=!0),Fe(Ge,Xe,Ke)):be(Ge,Xe,Ke)},je=function(Ge,Xe){de(Ge);for(var Ke=se(Xe=ue(Xe)),$e=0,Je=Ke.length,Ze;Je>$e;)Me(Ge,Ze=Ke[$e++],Xe[Ze]);return Ge},Be=function(Ge){var Xe=Te.call(this,Ge=pe(Ge,!0));return this===Le&&Y(Re,Ge)&&!Y(Oe,Ge)?!1:Xe||!Y(this,Ge)||!Y(Re,Ge)||Y(this,Ee)&&this[Ee][Ge]?Xe:!0},De=function(Ge,Xe){if(Ge=ue(Ge),Xe=pe(Xe,!0),Ge!==Le||!Y(Re,Xe)||Y(Oe,Xe)){var Ke=ve(Ge,Xe);return Ke&&Y(Re,Xe)&&!(Y(Ge,Ee)&&Ge[Ee][Xe])&&(Ke.enumerable=!0),Ke}},Ue=function(Ge){for(var Xe=xe(ue(Ge)),Ke=[],$e=0,Je;Xe.length>$e;)Y(Re,Je=Xe[$e++])||Je==Ee||Je==J||Ke.push(Je);return Ke},We=function(Ge){for(var Xe=Ge===Le,Ke=xe(Xe?Oe:ue(Ge)),$e=[],Je=0,Ze;Ke.length>Je;)Y(Re,Ze=Ke[Je++])&&(!Xe||Y(Le,Ze))&&$e.push(Re[Ze]);return $e};Ne||(_e=function(){if(this instanceof _e)throw TypeError('Symbol is not a constructor!');var Ge=te(0<arguments.length?arguments[0]:void 0),Xe=function(Ke){this===Le&&Xe.call(Oe,Ke),Y(this,Ee)&&Y(this[Ee],Ge)&&(this[Ee][Ge]=!1),Fe(this,Ge,ce(1,Ke))};return G&&Ie&&Fe(Le,Ge,{configurable:!0,set:Xe}),ze(Ge)},$(_e[Se],'toString',function(){return this._k}),he.f=De,ye.f=Me,W(36).f=ge.f=Ue,W(51).f=Be,W(61).f=We,G&&!W(34)&&$(Le,'propertyIsEnumerable',Be,!0),ae.f=function(Ve){return ze(ne(Ve))}),X(X.G+X.W+X.F*!Ne,{Symbol:_e});for(var He='hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(','),Ye=0;He.length>Ye;)ne(He[Ye++]);for(var He=me(ne.store),Ye=0;He.length>Ye;)ie(He[Ye++]);X(X.S+X.F*!Ne,'Symbol',{'for':function(Ve){return Y(Ce,Ve+='')?Ce[Ve]:Ce[Ve]=_e(Ve)},keyFor:function(Ge){if(qe(Ge))return oe(Ce,Ge);throw TypeError(Ge+' is not a symbol!')},useSetter:function(){Ie=!0},useSimple:function(){Ie=!1}}),X(X.S+X.F*!Ne,'Object',{create:function(Ge,Xe){return Xe===void 0?fe(Ge):je(fe(Ge),Xe)},defineProperty:Me,defineProperties:je,getOwnPropertyDescriptor:De,getOwnPropertyNames:Ue,getOwnPropertySymbols:We}),ke&&X(X.S+X.F*(!Ne||Z(function(){var Ve=_e();return'[null]'!=we([Ve])||'{}'!=we({a:Ve})||'{}'!=we(Object(Ve))})),'JSON',{stringify:function(Ge){if(!(void 0===Ge||qe(Ge))){for(var Xe=[Ge],Ke=1,$e,Je;arguments.length>Ke;)Xe.push(arguments[Ke++]);return $e=Xe[1],'function'==typeof $e&&(Je=$e),(Je||!le($e))&&($e=function(st,dt){if(Je&&(dt=Je.call(this,st,dt)),!qe(dt))return dt}),Xe[1]=$e,we.apply(ke,Xe)}}}),_e[Se][Pe]||W(13)(_e[Se],Pe,_e[Se].valueOf),ee(_e,'Symbol'),ee(Math,'Math',!0),ee(H.JSON,'JSON',!0)},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(63),G=W(93),X=W(1),$=W(40),J=W(9),Z=W(4),Q=W(2).ArrayBuffer,ee=W(87),te=G.ArrayBuffer,ne=G.DataView,ae=Y.ABV&&Q.isView,ie=te.prototype.slice,oe=Y.VIEW,se='ArrayBuffer';H(H.G+H.W+H.F*(Q!==te),{ArrayBuffer:te}),H(H.S+H.F*!Y.CONSTR,se,{isView:function(de){return ae&&ae(de)||Z(de)&&oe in de}}),H(H.P+H.U+H.F*W(3)(function(){return!new te(2).slice(1,void 0).byteLength}),se,{slice:function(de,ue){if(ie!==void 0&&ue===void 0)return ie.call(X(this),de);for(var pe=X(this).byteLength,ce=$(de,pe),fe=$(void 0===ue?pe:ue,pe),ge=new(ee(this,te))(J(fe-ce)),he=new ne(this),ye=new ne(ge),me=0;ce<fe;)ye.setUint8(me++,he.getUint8(ce++));return ge}}),W(39)(se)},function(M,U,W){var H=W(0);H(H.G+H.W+H.F*!W(63).ABV,{DataView:W(93).DataView})},function(M,U,W){W(29)('Float32',4,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Float64',8,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Int16',2,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Int32',4,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Int8',1,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Uint16',2,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Uint32',4,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Uint8',1,function(H){return function(G,X,$){return H(this,G,X,$)}})},function(M,U,W){W(29)('Uint8',1,function(H){return function(G,X,$){return H(this,G,X,$)}},!0)},function(M,U,W){'use strict';'use strict';var H=W(107);W(54)('WeakSet',function(Y){return function(){return Y(this,0<arguments.length?arguments[0]:void 0)}},{add:function(G){return H.def(this,G,!0)}},H,!1,!0)},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(53)(!0);H(H.P,'Array',{includes:function(X){return Y(this,X,1<arguments.length?arguments[1]:void 0)}}),W(42)('includes')},function(M,U,W){var H=W(0),Y=W(84)(),G=W(2).process,X='process'==W(19)(G);H(H.G,{asap:function(J){var Z=X&&G.domain;Y(Z?Z.bind(J):J)}})},function(M,U,W){var H=W(0),Y=W(19);H(H.S,'Error',{isError:function(X){return'Error'===Y(X)}})},function(M,U,W){var H=W(0);H(H.P+H.R,'Map',{toJSON:W(106)('Map')})},function(M,U,W){var H=W(0);H(H.S,'Math',{iaddh:function(G,X,$,J){var Z=G>>>0,Q=$>>>0;return 0|(X>>>0)+(J>>>0)+((Z&Q|(Z|Q)&~(Z+Q>>>0))>>>31)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{imulh:function(G,X){var $=65535,J=+G,Z=+X,Q=J&$,ee=Z&$,te=J>>16,ne=Z>>16,ae=(te*ee>>>0)+(Q*ee>>>16);return te*ne+(ae>>16)+((Q*ne>>>0)+(ae&$)>>16)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{isubh:function(G,X,$,J){var Z=G>>>0,Q=$>>>0;return 0|(X>>>0)-(J>>>0)-((~Z&Q|~(Z^Q)&Z-Q>>>0)>>>31)}})},function(M,U,W){var H=W(0);H(H.S,'Math',{umulh:function(G,X){var $=65535,J=+G,Z=+X,Q=J&$,ee=Z&$,te=J>>>16,ne=Z>>>16,ae=(te*ee>>>0)+(Q*ee>>>16);return te*ne+(ae>>>16)+((Q*ne>>>0)+(ae&$)>>>16)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(10),G=W(12),X=W(7);W(6)&&H(H.P+W(60),'Object',{__defineGetter__:function(J,Z){X.f(Y(this),J,{get:G(Z),enumerable:!0,configurable:!0})}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(10),G=W(12),X=W(7);W(6)&&H(H.P+W(60),'Object',{__defineSetter__:function(J,Z){X.f(Y(this),J,{set:G(Z),enumerable:!0,configurable:!0})}})},function(M,U,W){var H=W(0),Y=W(117)(!0);H(H.S,'Object',{entries:function(X){return Y(X)}})},function(M,U,W){var H=W(0),Y=W(118),G=W(16),X=W(17),$=W(72);H(H.S,'Object',{getOwnPropertyDescriptors:function(Z){for(var Q=G(Z),ee=X.f,te=Y(Q),ne={},ae=0,ie;te.length>ae;)$(ne,ie=te[ae++],ee(Q,ie));return ne}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(10),G=W(25),X=W(18),$=W(17).f;W(6)&&H(H.P+W(60),'Object',{__lookupGetter__:function(Z){var Q=Y(this),ee=G(Z,!0),te;do if(te=$(Q,ee))return te.get;while(Q=X(Q))}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(10),G=W(25),X=W(18),$=W(17).f;W(6)&&H(H.P+W(60),'Object',{__lookupSetter__:function(Z){var Q=Y(this),ee=G(Z,!0),te;do if(te=$(Q,ee))return te.set;while(Q=X(Q))}})},function(M,U,W){var H=W(0),Y=W(117)(!1);H(H.S,'Object',{values:function(X){return Y(X)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(2),G=W(26),X=W(84)(),$=W(5)('observable'),J=W(12),Z=W(1),Q=W(33),ee=W(38),te=W(13),ne=W(43),ae=ne.RETURN,ie=function(ce){return null==ce?void 0:J(ce)},oe=function(ce){var fe=ce._c;fe&&(ce._c=void 0,fe())},se=function(ce){return ce._o===void 0},le=function(ce){se(ce)||(ce._o=void 0,oe(ce))},de=function(ce,fe){Z(ce),this._c=void 0,this._o=ce,ce=new ue(this);try{var ge=fe(ce),he=ge;null!=ge&&('function'==typeof ge.unsubscribe?ge=function(){he.unsubscribe()}:J(ge),this._c=ge)}catch(ye){return void ce.error(ye)}se(this)&&oe(this)};de.prototype=ee({},{unsubscribe:function(){le(this)}});var ue=function(ce){this._s=ce};ue.prototype=ee({},{next:function(fe){var ge=this._s;if(!se(ge)){var he=ge._o;try{var ye=ie(he.next);if(ye)return ye.call(he,fe)}catch(me){try{le(ge)}finally{throw me}}}},error:function(fe){var ge=this._s;if(se(ge))throw fe;var he=ge._o;ge._o=void 0;try{var ye=ie(he.error);if(!ye)throw fe;fe=ye.call(he,fe)}catch(me){try{oe(ge)}finally{throw me}}return oe(ge),fe},complete:function(fe){var ge=this._s;if(!se(ge)){var he=ge._o;ge._o=void 0;try{var ye=ie(he.complete);fe=ye?ye.call(he,fe):void 0}catch(me){try{oe(ge)}finally{throw me}}return oe(ge),fe}}});var pe=function(fe){Q(this,pe,'Observable','_f')._f=J(fe)};ee(pe.prototype,{subscribe:function(fe){return new de(fe,this._f)},forEach:function(fe){var ge=this;return new(G.Promise||Y.Promise)(function(he,ye){J(fe);var me=ge.subscribe({next:function(ve){try{return fe(ve)}catch(be){ye(be),me.unsubscribe()}},error:ye,complete:he})})}}),ee(pe,{from:function(fe){var ge='function'==typeof this?this:pe,he=ie(Z(fe)[$]);if(he){var ye=Z(he.call(fe));return ye.constructor===ge?ye:new ge(function(me){return ye.subscribe(me)})}return new ge(function(me){var ve=!1;return X(function(){if(!ve){try{if(ne(fe,!1,function(be){if(me.next(be),ve)return ae})===ae)return}catch(be){if(ve)throw be;return void me.error(be)}me.complete()}}),function(){ve=!0}})},of:function(){for(var fe=0,ge=arguments.length,he=Array(ge);fe<ge;)he[fe]=arguments[fe++];return new('function'==typeof this?this:pe)(function(ye){var me=!1;return X(function(){if(!me){for(var ve=0;ve<he.length;++ve)if(ye.next(he[ve]),me)return;ye.complete()}}),function(){me=!0}})}}),te(pe.prototype,$,function(){return this}),H(H.G,{Observable:pe}),W(39)('Observable')},function(M,U,W){var H=W(28),Y=W(1),G=H.key,X=H.set;H.exp({defineMetadata:function(J,Z,Q,ee){X(J,Z,Y(Q),G(ee))}})},function(M,U,W){var H=W(28),Y=W(1),G=H.key,X=H.map,$=H.store;H.exp({deleteMetadata:function(Z,Q){var ee=3>arguments.length?void 0:G(arguments[2]),te=X(Y(Q),ee,!1);if(void 0===te||!te['delete'](Z))return!1;if(te.size)return!0;var ne=$.get(Q);return ne['delete'](ee),!!ne.size||$['delete'](Q)}})},function(M,U,W){var H=W(126),Y=W(102),G=W(28),X=W(1),$=W(18),J=G.keys,Z=G.key,Q=function(ee,te){var ne=J(ee,te),ae=$(ee);if(null===ae)return ne;var ie=Q(ae,te);return ie.length?ne.length?Y(new H(ne.concat(ie))):ie:ne};G.exp({getMetadataKeys:function(te){return Q(X(te),2>arguments.length?void 0:Z(arguments[1]))}})},function(M,U,W){var H=W(28),Y=W(1),G=W(18),X=H.has,$=H.get,J=H.key,Z=function(Q,ee,te){var ne=X(Q,ee,te);if(ne)return $(Q,ee,te);var ae=G(ee);return null===ae?void 0:Z(Q,ae,te)};H.exp({getMetadata:function(ee,te){return Z(ee,Y(te),3>arguments.length?void 0:J(arguments[2]))}})},function(M,U,W){var H=W(28),Y=W(1),G=H.keys,X=H.key;H.exp({getOwnMetadataKeys:function(J){return G(Y(J),2>arguments.length?void 0:X(arguments[1]))}})},function(M,U,W){var H=W(28),Y=W(1),G=H.get,X=H.key;H.exp({getOwnMetadata:function(J,Z){return G(J,Y(Z),3>arguments.length?void 0:X(arguments[2]))}})},function(M,U,W){var H=W(28),Y=W(1),G=W(18),X=H.has,$=H.key,J=function(Z,Q,ee){var te=X(Z,Q,ee);if(te)return!0;var ne=G(Q);return null!==ne&&J(Z,ne,ee)};H.exp({hasMetadata:function(Q,ee){return J(Q,Y(ee),3>arguments.length?void 0:$(arguments[2]))}})},function(M,U,W){var H=W(28),Y=W(1),G=H.has,X=H.key;H.exp({hasOwnMetadata:function(J,Z){return G(J,Y(Z),3>arguments.length?void 0:X(arguments[2]))}})},function(M,U,W){var H=W(28),Y=W(1),G=W(12),X=H.key,$=H.set;H.exp({metadata:function(Z,Q){return function(te,ne){$(Z,Q,(ne===void 0?G:Y)(te),X(ne))}}})},function(M,U,W){var H=W(0);H(H.P+H.R,'Set',{toJSON:W(106)('Set')})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(88)(!0);H(H.P,'String',{at:function(X){return Y(this,X)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(20),G=W(9),X=W(58),$=W(56),J=RegExp.prototype,Z=function(Q,ee){this._r=Q,this._s=ee};W(80)(Z,'RegExp String',function(){var ee=this._r.exec(this._s);return{value:ee,done:null===ee}}),H(H.P,'String',{matchAll:function(ee){if(Y(this),!X(ee))throw TypeError(ee+' is not a regexp!');var te=this+'',ne='flags'in J?ee.flags+'':$.call(ee),ae=new RegExp(ee.source,~ne.indexOf('g')?ne:'g'+ne);return ae.lastIndex=G(ee.lastIndex),new Z(ae,te)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(122);H(H.P,'String',{padEnd:function(X){return Y(this,X,1<arguments.length?arguments[1]:void 0,!1)}})},function(M,U,W){'use strict';'use strict';var H=W(0),Y=W(122);H(H.P,'String',{padStart:function(X){return Y(this,X,1<arguments.length?arguments[1]:void 0,!0)}})},function(M,U,W){'use strict';'use strict';W(46)('trimLeft',function(H){return function(){return H(this,1)}},'trimStart')},function(M,U,W){'use strict';'use strict';W(46)('trimRight',function(H){return function(){return H(this,2)}},'trimEnd')},function(M,U,W){W(94)('asyncIterator')},function(M,U,W){W(94)('observable')},function(M,U,W){var H=W(0);H(H.S,'System',{global:W(2)})},function(M,U,W){var H=W(96),Y=W(14),G=W(2),X=W(13),$=W(44),J=W(5),Z=J('iterator'),Q=J('toStringTag'),ee=$.Array;for(var te=['NodeList','DOMTokenList','MediaList','StyleSheetList','CSSRuleList'],ne=0;5>ne;ne++){var ae=te[ne],ie=G[ae],oe=ie&&ie.prototype,se;if(oe)for(se in oe[Z]||X(oe,Z,ee),oe[Q]||X(oe,Q,ae),$[ae]=ee,H)oe[se]||Y(oe,se,H[se],!0)}},function(M,U,W){var H=W(0),Y=W(92);H(H.G+H.B,{setImmediate:Y.set,clearImmediate:Y.clear})},function(M,U,W){var H=W(2),Y=W(0),G=W(57),X=W(156),$=H.navigator,J=!!$&&/MSIE .\./.test($.userAgent),Z=function(Q){return J?function(ee,te){return Q(G(X,[].slice.call(arguments,2),'function'==typeof ee?ee:Function(ee)),te)}:Q};Y(Y.G+Y.B+Y.F*J,{setTimeout:Z(H.setTimeout),setInterval:Z(H.setInterval)})},function(M,U,W){W(279),W(218),W(220),W(219),W(222),W(224),W(229),W(223),W(221),W(231),W(230),W(226),W(227),W(225),W(217),W(228),W(232),W(233),W(185),W(187),W(186),W(235),W(234),W(205),W(215),W(216),W(206),W(207),W(208),W(209),W(210),W(211),W(212),W(213),W(214),W(188),W(189),W(190),W(191),W(192),W(193),W(194),W(195),W(196),W(197),W(198),W(199),W(200),W(201),W(202),W(203),W(204),W(266),W(271),W(278),W(269),W(261),W(262),W(267),W(272),W(274),W(257),W(258),W(259),W(260),W(263),W(264),W(265),W(268),W(270),W(273),W(275),W(276),W(277),W(180),W(182),W(181),W(184),W(183),W(169),W(167),W(173),W(170),W(176),W(178),W(166),W(172),W(163),W(177),W(161),W(175),W(174),W(168),W(171),W(160),W(162),W(165),W(164),W(179),W(96),W(251),W(256),W(125),W(252),W(253),W(254),W(255),W(236),W(124),W(126),W(127),W(291),W(280),W(281),W(286),W(289),W(290),W(284),W(287),W(285),W(288),W(282),W(283),W(237),W(238),W(239),W(240),W(241),W(244),W(242),W(243),W(245),W(246),W(247),W(248),W(250),W(249),W(292),W(318),W(321),W(320),W(322),W(323),W(319),W(324),W(325),W(303),W(306),W(302),W(300),W(301),W(304),W(305),W(295),W(317),W(326),W(294),W(296),W(298),W(297),W(299),W(308),W(309),W(311),W(310),W(313),W(312),W(314),W(315),W(316),W(293),W(307),W(329),W(328),W(327),M.exports=W(26)},function(M,U,W){'use strict';'use strict';var H=W(332),Y=W(339),G=W(335),X=W(342),$;$=M.exports=function(J,Z){var Q,ee,te,ne,ae;return 2>arguments.length||'string'!=typeof J?(ne=Z,Z=J,J=null):ne=arguments[2],null==J?(Q=te=!0,ee=!1):(Q=X.call(J,'c'),ee=X.call(J,'e'),te=X.call(J,'w')),ae={value:Z,configurable:Q,enumerable:ee,writable:te},ne?H(Y(ne),ae):ae},$.gs=function(J,Z,Q){var ee,te,ne,ae;return'string'==typeof J?ne=arguments[3]:(ne=Q,Q=Z,Z=J,J=null),null==Z?Z=void 0:G(Z)?null==Q?Q=void 0:!G(Q)&&(ne=Q,Q=void 0):(ne=Z,Z=Q=void 0),null==J?(ee=!0,te=!1):(ee=X.call(J,'c'),te=X.call(J,'e')),ae={get:Z,set:Q,configurable:ee,enumerable:te},ne?H(Y(ne),ae):ae}},function(M,U,W){'use strict';'use strict';M.exports=W(333)()?Object.assign:W(334)},function(M){'use strict';'use strict';M.exports=function(){var U=Object.assign,W;return!('function'!=typeof U)&&(W={foo:'raz'},U(W,{bar:'dwa'},{trzy:'trzy'}),'razdwatrzy'===W.foo+W.bar+W.trzy)}},function(M,U,W){'use strict';'use strict';var H=W(336),Y=W(341),G=Math.max;M.exports=function(X,$){var Q=G(arguments.length,2),J,Z,ee;for(X=Object(Y(X)),ee=function(te){try{X[te]=$[te]}catch(ne){J||(J=ne)}},Z=1;Z<Q;++Z)$=arguments[Z],H($).forEach(ee);if(J!==void 0)throw J;return X}},function(M){'use strict';'use strict';M.exports=function(U){return'function'==typeof U}},function(M,U,W){'use strict';'use strict';M.exports=W(337)()?Object.keys:W(338)},function(M){'use strict';'use strict';M.exports=function(){try{return Object.keys('primitive'),!0}catch(U){return!1}}},function(M){'use strict';'use strict';var U=Object.keys;M.exports=function(W){return U(null==W?W:Object(W))}},function(M){'use strict';'use strict';var U=Array.prototype.forEach,W=Object.create,H=function(Y,G){for(var X in Y)G[X]=Y[X]};M.exports=function(){var Y=W(null);return U.call(arguments,function(G){null==G||H(Object(G),Y)}),Y}},function(M){'use strict';'use strict';M.exports=function(U){if('function'!=typeof U)throw new TypeError(U+' is not a function');return U}},function(M){'use strict';'use strict';M.exports=function(U){if(null==U)throw new TypeError('Cannot use null or undefined');return U}},function(M,U,W){'use strict';'use strict';M.exports=W(343)()?String.prototype.contains:W(344)},function(M){'use strict';'use strict';var U='razdwatrzy';M.exports=function(){return!('function'!=typeof U.contains)&&!0===U.contains('dwa')&&!1===U.contains('foo')}},function(M){'use strict';'use strict';var U=String.prototype.indexOf;M.exports=function(W){return-1<U.call(this,W,arguments[1])}},function(M,U,W){(function(H,Y){!function(G){'use strict';function X(Pe,Te,Ce,Re){var Oe=Te&&Te.prototype instanceof J?Te:J,Le=Object.create(Oe.prototype),Ne=new oe(Re||[]);return Le._invoke=ne(Pe,Ce,Ne),Le}function $(Pe,Te,Ce){try{return{type:'normal',arg:Pe.call(Te,Ce)}}catch(Re){return{type:'throw',arg:Re}}}function J(){}function Z(){}function Q(){}function ee(Pe){['next','throw','return'].forEach(function(Te){Pe[Te]=function(Ce){return this._invoke(Te,Ce)}})}function te(Pe){function Te(Re,Oe,Le,Ne){var Ae=$(Pe[Re],Pe,Oe);if('throw'===Ae.type)Ne(Ae.arg);else{var Ie=Ae.arg,Fe=Ie.value;return Fe&&'object'==typeof Fe&&ue.call(Fe,'__await')?Promise.resolve(Fe.__await).then(function(ze){Te('next',ze,Le,Ne)},function(ze){Te('throw',ze,Le,Ne)}):Promise.resolve(Fe).then(function(ze){Ie.value=ze,Le(Ie)},Ne)}}'object'==typeof Y&&Y.domain&&(Te=Y.domain.bind(Te));var Ce;this._invoke=function(Oe,Le){function Ne(){return new Promise(function(Ae,Ie){Te(Oe,Le,Ae,Ie)})}return Ce=Ce?Ce.then(Ne,Ne):Ne()}}function ne(Pe,Te,Ce){var Re=me;return function(Le,Ne){if(Re===be)throw new Error('Generator is already running');if(Re===xe){if('throw'===Le)throw Ne;return le()}for(;!0;){var Ae=Ce.delegate;if(Ae){if('return'===Le||'throw'===Le&&Ae.iterator[Le]===pe){Ce.delegate=null;var Ie=Ae.iterator['return'];if(Ie){var Fe=$(Ie,Ae.iterator,Ne);if('throw'===Fe.type){Le='throw',Ne=Fe.arg;continue}}if('return'===Le)continue}var Fe=$(Ae.iterator[Le],Ae.iterator,Ne);if('throw'===Fe.type){Ce.delegate=null,Le='throw',Ne=Fe.arg;continue}Le='next',Ne=pe;var ze=Fe.arg;if(ze.done)Ce[Ae.resultName]=ze.value,Ce.next=Ae.nextLoc;else return Re=ve,ze;Ce.delegate=null}if('next'===Le)Ce.sent=Ce._sent=Ne;else if('throw'===Le){if(Re===me)throw Re=xe,Ne;Ce.dispatchException(Ne)&&(Le='next',Ne=pe)}else'return'===Le&&Ce.abrupt('return',Ne);Re=be;var Fe=$(Pe,Te,Ce);if('normal'===Fe.type){Re=Ce.done?xe:ve;var ze={value:Fe.arg,done:Ce.done};if(Fe.arg===_e)Ce.delegate&&'next'===Le&&(Ne=pe);else return ze}else'throw'===Fe.type&&(Re=xe,Le='throw',Ne=Fe.arg)}}}function ae(Pe){var Te={tryLoc:Pe[0]};1 in Pe&&(Te.catchLoc=Pe[1]),2 in Pe&&(Te.finallyLoc=Pe[2],Te.afterLoc=Pe[3]),this.tryEntries.push(Te)}function ie(Pe){var Te=Pe.completion||{};Te.type='normal',delete Te.arg,Pe.completion=Te}function oe(Pe){this.tryEntries=[{tryLoc:'root'}],Pe.forEach(ae,this),this.reset(!0)}function se(Pe){if(Pe){var Te=Pe[fe];if(Te)return Te.call(Pe);if('function'==typeof Pe.next)return Pe;if(!isNaN(Pe.length)){var Ce=-1,Re=function Oe(){for(;++Ce<Pe.length;)if(ue.call(Pe,Ce))return Oe.value=Pe[Ce],Oe.done=!1,Oe;return Oe.value=pe,Oe.done=!0,Oe};return Re.next=Re}}return{next:le}}function le(){return{value:pe,done:!0}}var de=Object.prototype,ue=de.hasOwnProperty,pe,ce='function'==typeof Symbol?Symbol:{},fe=ce.iterator||'@@iterator',ge=ce.toStringTag||'@@toStringTag',he='object'==typeof M,ye=G.regeneratorRuntime;if(ye)return void(he&&(M.exports=ye));ye=G.regeneratorRuntime=he?M.exports:{},ye.wrap=X;var me='suspendedStart',ve='suspendedYield',be='executing',xe='completed',_e={},ke={};ke[fe]=function(){return this};var we=Object.getPrototypeOf,Se=we&&we(we(se([])));Se&&Se!==de&&ue.call(Se,fe)&&(ke=Se);var Ee=Q.prototype=J.prototype=Object.create(ke);Z.prototype=Ee.constructor=Q,Q.constructor=Z,Q[ge]=Z.displayName='GeneratorFunction',ye.isGeneratorFunction=function(Pe){var Te='function'==typeof Pe&&Pe.constructor;return!!Te&&(Te===Z||'GeneratorFunction'===(Te.displayName||Te.name))},ye.mark=function(Pe){return Object.setPrototypeOf?Object.setPrototypeOf(Pe,Q):(Pe.__proto__=Q,!(ge in Pe)&&(Pe[ge]='GeneratorFunction')),Pe.prototype=Object.create(Ee),Pe},ye.awrap=function(Pe){return{__await:Pe}},ee(te.prototype),ye.AsyncIterator=te,ye.async=function(Pe,Te,Ce,Re){var Oe=new te(X(Pe,Te,Ce,Re));return ye.isGeneratorFunction(Te)?Oe:Oe.next().then(function(Le){return Le.done?Le.value:Oe.next()})},ee(Ee),Ee[ge]='Generator',Ee.toString=function(){return'[object Generator]'},ye.keys=function(Pe){var Te=[];for(var Ce in Pe)Te.push(Ce);return Te.reverse(),function Re(){for(;Te.length;){var Oe=Te.pop();if(Oe in Pe)return Re.value=Oe,Re.done=!1,Re}return Re.done=!0,Re}},ye.values=se,oe.prototype={constructor:oe,reset:function(Pe){if(this.prev=0,this.next=0,this.sent=this._sent=pe,this.done=!1,this.delegate=null,this.tryEntries.forEach(ie),!Pe)for(var Te in this)'t'===Te.charAt(0)&&ue.call(this,Te)&&!isNaN(+Te.slice(1))&&(this[Te]=pe)},stop:function(){this.done=!0;var Pe=this.tryEntries[0],Te=Pe.completion;if('throw'===Te.type)throw Te.arg;return this.rval},dispatchException:function(Pe){function Te(Ie,Fe){return Le.type='throw',Le.arg=Pe,Ce.next=Ie,!!Fe}if(this.done)throw Pe;var Ce=this;for(var Re=this.tryEntries.length-1;0<=Re;--Re){var Oe=this.tryEntries[Re],Le=Oe.completion;if('root'===Oe.tryLoc)return Te('end');if(Oe.tryLoc<=this.prev){var Ne=ue.call(Oe,'catchLoc'),Ae=ue.call(Oe,'finallyLoc');if(Ne&&Ae){if(this.prev<Oe.catchLoc)return Te(Oe.catchLoc,!0);if(this.prev<Oe.finallyLoc)return Te(Oe.finallyLoc)}else if(Ne){if(this.prev<Oe.catchLoc)return Te(Oe.catchLoc,!0);}else if(!Ae)throw new Error('try statement without catch or finally');else if(this.prev<Oe.finallyLoc)return Te(Oe.finallyLoc)}}},abrupt:function(Pe,Te){for(var Ce=this.tryEntries.length-1;0<=Ce;--Ce){var Re=this.tryEntries[Ce];if(Re.tryLoc<=this.prev&&ue.call(Re,'finallyLoc')&&this.prev<Re.finallyLoc){var Oe=Re;break}}Oe&&('break'===Pe||'continue'===Pe)&&Oe.tryLoc<=Te&&Te<=Oe.finallyLoc&&(Oe=null);var Le=Oe?Oe.completion:{};return Le.type=Pe,Le.arg=Te,Oe?this.next=Oe.finallyLoc:this.complete(Le),_e},complete:function(Pe,Te){if('throw'===Pe.type)throw Pe.arg;'break'===Pe.type||'continue'===Pe.type?this.next=Pe.arg:'return'===Pe.type?(this.rval=Pe.arg,this.next='end'):'normal'===Pe.type&&Te&&(this.next=Te)},finish:function(Pe){for(var Te=this.tryEntries.length-1;0<=Te;--Te){var Ce=this.tryEntries[Te];if(Ce.finallyLoc===Pe)return this.complete(Ce.completion,Ce.afterLoc),ie(Ce),_e}},'catch':function(Pe){for(var Te=this.tryEntries.length-1;0<=Te;--Te){var Ce=this.tryEntries[Te];if(Ce.tryLoc===Pe){var Re=Ce.completion;if('throw'===Re.type){var Oe=Re.arg;ie(Ce)}return Oe}}throw new Error('illegal catch attempt')},delegateYield:function(Pe,Te,Ce){return this.delegate={iterator:se(Pe),resultName:Te,nextLoc:Ce},_e}}}('object'==typeof H?H:'object'==typeof window?window:'object'==typeof self?self:this)}).call(U,W(97),W(128))},function(M){if('undefined'==typeof N){var U=new Error('Cannot find module "JSZip"');throw U.code='MODULE_NOT_FOUND',U}M.exports=N},function(M,U,W){W(132),W(130),M.exports=W(131)}])});