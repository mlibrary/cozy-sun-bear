<<<<<<< HEAD
{"version":3,"file":"cozy-sun-bear.js","sources":["../node_modules/url-polyfill/url-polyfill.js","../node_modules/classlist-polyfill/src/index.js","../node_modules/intersection-observer/intersection-observer.js","../src/core/Util.js","../src/core/Class.js","../src/core/Events.js","../src/core/Browser.js","../src/geometry/Point.js","../src/dom/DomEvent.Pointer.js","../src/dom/DomEvent.DoubleTap.js","../src/dom/DomEvent.js","../src/dom/DomUtil.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_defineProperty.js","../node_modules/lodash/_baseAssignValue.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assignValue.js","../node_modules/lodash/_copyObject.js","../node_modules/lodash/identity.js","../node_modules/lodash/_apply.js","../node_modules/lodash/_overRest.js","../node_modules/lodash/constant.js","../node_modules/lodash/_baseSetToString.js","../node_modules/lodash/_shortOut.js","../node_modules/lodash/_setToString.js","../node_modules/lodash/_baseRest.js","../node_modules/lodash/isLength.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/_isIterateeCall.js","../node_modules/lodash/_createAssigner.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/isArray.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_nativeKeys.js","../node_modules/lodash/_baseKeys.js","../node_modules/lodash/keys.js","../node_modules/lodash/assign.js","../src/screenfull.js","../src/reader/Reader.js","../src/control/Control.js","../src/control/Control.Paging.js","../src/control/Modal.js","../src/control/Control.Contents.js","../src/control/Control.Title.js","../src/control/Control.PublicationMetadata.js","../src/control/Control.Preferences.js","../src/control/Control.Widget.js","../src/control/Control.Citation.js","../src/control/Control.Search.js","../src/control/Control.BibliographicInformation.js","../src/control/Control.Download.js","../src/control/Control.Navigator.js","../src/control/Control.Fullscreen.js","../src/control/index.js","../src/core/Bus.js","../src/core/index.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/assign/is-implemented.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/keys/is-implemented.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/function/noop.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/is-value.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/keys/shim.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/keys/index.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/valid-value.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/assign/shim.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/assign/index.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/normalize-options.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/is-callable.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/string/#/contains/is-implemented.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/string/#/contains/shim.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/string/#/contains/index.js","../../epub.js/node_modules/event-emitter/node_modules/d/index.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/valid-callable.js","../../epub.js/node_modules/event-emitter/index.js","../../epub.js/src/utils/core.js","../../epub.js/node_modules/path-webpack/path.js","../../epub.js/src/utils/path.js","../../epub.js/src/utils/url.js","../../epub.js/src/epubcfi.js","../../epub.js/src/utils/hook.js","../../epub.js/src/utils/replacements.js","../../epub.js/src/section.js","../../epub.js/src/spine.js","../../epub.js/src/utils/queue.js","../../epub.js/src/utils/constants.js","../../epub.js/src/locations.js","../../epub.js/src/container.js","../../epub.js/src/packaging.js","../../epub.js/src/navigation.js","../../epub.js/libs/mime/mime.js","../../epub.js/src/resources.js","../../epub.js/src/pagelist.js","../../epub.js/src/layout.js","../../epub.js/src/themes.js","../../epub.js/src/mapping.js","../../epub.js/src/contents.js","../../epub.js/src/annotations.js","../../epub.js/node_modules/marks-pane/src/svg.js","../../epub.js/node_modules/marks-pane/src/events.js","../../epub.js/node_modules/marks-pane/src/marks.js","../../epub.js/src/managers/views/iframe.js","../../epub.js/node_modules/lodash/isObject.js","../../epub.js/node_modules/lodash/_freeGlobal.js","../../epub.js/node_modules/lodash/_root.js","../../epub.js/node_modules/lodash/now.js","../../epub.js/node_modules/lodash/_Symbol.js","../../epub.js/node_modules/lodash/_getRawTag.js","../../epub.js/node_modules/lodash/_objectToString.js","../../epub.js/node_modules/lodash/_baseGetTag.js","../../epub.js/node_modules/lodash/isObjectLike.js","../../epub.js/node_modules/lodash/isSymbol.js","../../epub.js/node_modules/lodash/toNumber.js","../../epub.js/node_modules/lodash/debounce.js","../../epub.js/node_modules/lodash/throttle.js","../../epub.js/src/managers/helpers/stage.js","../../epub.js/src/managers/helpers/views.js","../../epub.js/src/managers/default/index.js","../../epub.js/src/managers/helpers/snap.js","../../epub.js/src/managers/continuous/index.js","../../epub.js/src/rendition.js","../../epub.js/src/utils/request.js","../../epub.js/src/archive.js","../../epub.js/src/store.js","../../epub.js/src/book.js","../../epub.js/libs/url/url-polyfill.js","../../epub.js/src/epub.js","../node_modules/path-webpack/path.js","../src/epubjs/managers/helpers/prefab.js","../src/epubjs/managers/continuous/prepaginated.js","../src/epubjs/managers/views/iframe.js","../node_modules/es5-ext/object/assign/is-implemented.js","../node_modules/es5-ext/object/keys/is-implemented.js","../node_modules/es5-ext/object/keys/shim.js","../node_modules/es5-ext/object/keys/index.js","../node_modules/es5-ext/object/valid-value.js","../node_modules/es5-ext/object/assign/shim.js","../node_modules/es5-ext/object/assign/index.js","../node_modules/es5-ext/object/normalize-options.js","../node_modules/es5-ext/object/is-callable.js","../node_modules/es5-ext/string/#/contains/is-implemented.js","../node_modules/es5-ext/string/#/contains/shim.js","../node_modules/es5-ext/string/#/contains/index.js","../node_modules/d/index.js","../node_modules/es5-ext/object/valid-callable.js","../node_modules/event-emitter/index.js","../src/epubjs/managers/helpers/scrolling_views.js","../src/epubjs/managers/continuous/scrolling.js","../node_modules/viewprt/dist/viewprt.esm.js","../src/epubjs/managers/views/sticky.js","../src/utils/manglers.js","../src/utils/focus.js","../src/reader/Reader.EpubJS.js","../src/reader/Reader.Mock.js","../src/reader/index.js"],"sourcesContent":["(function(global) {\r\n  /**\r\n   * Polyfill URLSearchParams\r\n   *\r\n   * Inspired from : https://github.com/WebReflection/url-search-params/blob/master/src/url-search-params.js\r\n   */\r\n\r\n  var checkIfIteratorIsSupported = function() {\r\n    try {\r\n      return !!Symbol.iterator;\r\n    } catch(error) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n\r\n  var iteratorSupported = checkIfIteratorIsSupported();\r\n\r\n  var createIterator = function(items) {\r\n    var iterator = {\r\n      next: function() {\r\n        var value = items.shift();\r\n        return { done: value === void 0, value: value };\r\n      }\r\n    };\r\n\r\n    if(iteratorSupported) {\r\n      iterator[Symbol.iterator] = function() {\r\n        return iterator;\r\n      };\r\n    }\r\n\r\n    return iterator;\r\n  };\r\n\r\n  /**\r\n   * Search param name and values should be encoded according to https://url.spec.whatwg.org/#urlencoded-serializing\r\n   * encodeURIComponent() produces the same result except encoding spaces as `%20` instead of `+`.\r\n   */\r\n  var serializeParam = function(value) {\r\n    return encodeURIComponent(value).replace(/%20/g, '+');\r\n  };\r\n\r\n  var deserializeParam = function(value) {\r\n    return decodeURIComponent(value).replace(/\\+/g, ' ');\r\n  };\r\n\r\n  var polyfillURLSearchParams= function() {\r\n\r\n    var URLSearchParams = function(searchString) {\r\n      Object.defineProperty(this, '_entries', { value: {} });\r\n\r\n      if(typeof searchString === 'string') {\r\n        if(searchString !== '') {\r\n          searchString = searchString.replace(/^\\?/, '');\r\n          var attributes = searchString.split('&');\r\n          var attribute;\r\n          for(var i = 0; i < attributes.length; i++) {\r\n            attribute = attributes[i].split('=');\r\n            this.append(\r\n              deserializeParam(attribute[0]),\r\n              (attribute.length > 1) ? deserializeParam(attribute[1]) : ''\r\n            );\r\n          }\r\n        }\r\n      } else if(searchString instanceof URLSearchParams) {\r\n        var _this = this;\r\n        searchString.forEach(function(value, name) {\r\n          _this.append(value, name);\r\n        });\r\n      }\r\n    };\r\n\r\n    var proto = URLSearchParams.prototype;\r\n\r\n    proto.append = function(name, value) {\r\n      if(name in this._entries) {\r\n        this._entries[name].push(value.toString());\r\n      } else {\r\n        this._entries[name] = [value.toString()];\r\n      }\r\n    };\r\n\r\n    proto.delete = function(name) {\r\n      delete this._entries[name];\r\n    };\r\n\r\n    proto.get = function(name) {\r\n      return (name in this._entries) ? this._entries[name][0] : null;\r\n    };\r\n\r\n    proto.getAll = function(name) {\r\n      return (name in this._entries) ? this._entries[name].slice(0) : [];\r\n    };\r\n\r\n    proto.has = function(name) {\r\n      return (name in this._entries);\r\n    };\r\n\r\n    proto.set = function(name, value) {\r\n      this._entries[name] = [value.toString()];\r\n    };\r\n\r\n    proto.forEach = function(callback, thisArg) {\r\n      var entries;\r\n      for(var name in this._entries) {\r\n        if(this._entries.hasOwnProperty(name)) {\r\n          entries = this._entries[name];\r\n          for(var i = 0; i < entries.length; i++) {\r\n            callback.call(thisArg, entries[i], name, this);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    proto.keys = function() {\r\n      var items = [];\r\n      this.forEach(function(value, name) { items.push(name); });\r\n      return createIterator(items);\r\n    };\r\n\r\n    proto.values = function() {\r\n      var items = [];\r\n      this.forEach(function(value) { items.push(value); });\r\n      return createIterator(items);\r\n    };\r\n\r\n    proto.entries = function() {\r\n      var items = [];\r\n      this.forEach(function(value, name) { items.push([name, value]); });\r\n      return createIterator(items);\r\n    };\r\n\r\n    if(iteratorSupported) {\r\n      proto[Symbol.iterator] = proto.entries;\r\n    }\r\n\r\n    proto.toString = function() {\r\n      var searchString = '';\r\n      this.forEach(function(value, name) {\r\n        if(searchString.length > 0) searchString+= '&';\r\n        searchString += serializeParam(name) + '=' + serializeParam(value);\r\n      });\r\n      return searchString;\r\n    };\r\n\r\n    global.URLSearchParams = URLSearchParams;\r\n  };\r\n\r\n  if(!('URLSearchParams' in global) || (new URLSearchParams('?a=1').toString() !== 'a=1')) {\r\n    polyfillURLSearchParams();\r\n  }\r\n\r\n  // HTMLAnchorElement\r\n\r\n})(\r\n  (typeof global !== 'undefined') ? global\r\n    : ((typeof window !== 'undefined') ? window\r\n    : ((typeof self !== 'undefined') ? self : this))\r\n);\r\n\r\n(function(global) {\r\n  /**\r\n   * Polyfill URL\r\n   *\r\n   * Inspired from : https://github.com/arv/DOM-URL-Polyfill/blob/master/src/url.js\r\n   */\r\n\r\n  var checkIfURLIsSupported = function() {\r\n    try {\r\n      var u = new URL('b', 'http://a');\r\n      u.pathname = 'c%20d';\r\n      return (u.href === 'http://a/c%20d') && u.searchParams;\r\n    } catch(e) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n\r\n  var polyfillURL = function() {\r\n    var _URL = global.URL;\r\n\r\n    var URL = function(url, base) {\r\n      if(typeof url !== 'string') url = String(url);\r\n\r\n      var doc = document.implementation.createHTMLDocument('');\r\n      window.doc = doc;\r\n      if(base) {\r\n        var baseElement = doc.createElement('base');\r\n        baseElement.href = base;\r\n        doc.head.appendChild(baseElement);\r\n      }\r\n\r\n      var anchorElement = doc.createElement('a');\r\n      anchorElement.href = url;\r\n      doc.body.appendChild(anchorElement);\r\n      anchorElement.href = anchorElement.href; // force href to refresh\r\n\r\n      if(anchorElement.protocol === ':' || !/:/.test(anchorElement.href)) {\r\n        throw new TypeError('Invalid URL');\r\n      }\r\n\r\n      Object.defineProperty(this, '_anchorElement', {\r\n        value: anchorElement\r\n      });\r\n    };\r\n\r\n    var proto = URL.prototype;\r\n\r\n    var linkURLWithAnchorAttribute = function(attributeName) {\r\n      Object.defineProperty(proto, attributeName, {\r\n        get: function() {\r\n          return this._anchorElement[attributeName];\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement[attributeName] = value;\r\n        },\r\n        enumerable: true\r\n      });\r\n    };\r\n\r\n    ['hash', 'host', 'hostname', 'port', 'protocol', 'search']\r\n    .forEach(function(attributeName) {\r\n      linkURLWithAnchorAttribute(attributeName);\r\n    });\r\n\r\n    Object.defineProperties(proto, {\r\n\r\n      'toString': {\r\n        get: function() {\r\n          var _this = this;\r\n          return function() {\r\n            return _this.href;\r\n          };\r\n        }\r\n      },\r\n\r\n      'href' : {\r\n        get: function() {\r\n          return this._anchorElement.href.replace(/\\?$/,'');\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement.href = value;\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'pathname' : {\r\n        get: function() {\r\n          return this._anchorElement.pathname.replace(/(^\\/?)/,'/');\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement.pathname = value;\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'origin': {\r\n        get: function() {\r\n          // get expected port from protocol\r\n          var expectedPort = {'http:': 80, 'https:': 443, 'ftp:': 21}[this._anchorElement.protocol];\r\n          // add port to origin if, expected port is different than actual port\r\n          // and it is not empty f.e http://foo:8080\r\n          // 8080 != 80 && 8080 != ''\r\n          var addPortToOrigin = this._anchorElement.port != expectedPort &&\r\n            this._anchorElement.port !== ''\r\n\r\n          return this._anchorElement.protocol +\r\n            '//' +\r\n            this._anchorElement.hostname +\r\n            (addPortToOrigin ? (':' + this._anchorElement.port) : '');\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'password': { // TODO\r\n        get: function() {\r\n          return '';\r\n        },\r\n        set: function(value) {\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'username': { // TODO\r\n        get: function() {\r\n          return '';\r\n        },\r\n        set: function(value) {\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'searchParams': {\r\n        get: function() {\r\n          var searchParams = new URLSearchParams(this.search);\r\n          var _this = this;\r\n          ['append', 'delete', 'set'].forEach(function(methodName) {\r\n            var method = searchParams[methodName];\r\n            searchParams[methodName] = function() {\r\n              method.apply(searchParams, arguments);\r\n              _this.search = searchParams.toString();\r\n            };\r\n          });\r\n          return searchParams;\r\n        },\r\n        enumerable: true\r\n      }\r\n    });\r\n\r\n    URL.createObjectURL = function(blob) {\r\n      return _URL.createObjectURL.apply(_URL, arguments);\r\n    };\r\n\r\n    URL.revokeObjectURL = function(url) {\r\n      return _URL.revokeObjectURL.apply(_URL, arguments);\r\n    };\r\n\r\n    global.URL = URL;\r\n\r\n  };\r\n\r\n  if(!checkIfURLIsSupported()) {\r\n    polyfillURL();\r\n  }\r\n\r\n  if((global.location !== void 0) && !('origin' in global.location)) {\r\n    var getOrigin = function() {\r\n      return global.location.protocol + '//' + global.location.hostname + (global.location.port ? (':' + global.location.port) : '');\r\n    };\r\n\r\n    try {\r\n      Object.defineProperty(global.location, 'origin', {\r\n        get: getOrigin,\r\n        enumerable: true\r\n      });\r\n    } catch(e) {\r\n      setInterval(function() {\r\n        global.location.origin = getOrigin();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n})(\r\n  (typeof global !== 'undefined') ? global\r\n    : ((typeof window !== 'undefined') ? window\r\n    : ((typeof self !== 'undefined') ? self : this))\r\n);\r\n","/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.1.20170427\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif (\"document\" in window.self) {\n\n// Full polyfill for browsers with no classList support\n// Including IE < Edge missing SVGElement.classList\nif (!(\"classList\" in document.createElement(\"_\")) \n\t|| document.createElementNS && !(\"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))) {\n\n(function (view) {\n\n\"use strict\";\n\nif (!('Element' in view)) return;\n\nvar\n\t  classListProp = \"classList\"\n\t, protoProp = \"prototype\"\n\t, elemCtrProto = view.Element[protoProp]\n\t, objCtr = Object\n\t, strTrim = String[protoProp].trim || function () {\n\t\treturn this.replace(/^\\s+|\\s+$/g, \"\");\n\t}\n\t, arrIndexOf = Array[protoProp].indexOf || function (item) {\n\t\tvar\n\t\t\t  i = 0\n\t\t\t, len = this.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\t// Vendors: please allow content code to instantiate DOMExceptions\n\t, DOMEx = function (type, message) {\n\t\tthis.name = type;\n\t\tthis.code = DOMException[type];\n\t\tthis.message = message;\n\t}\n\t, checkTokenAndGetIndex = function (classList, token) {\n\t\tif (token === \"\") {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"SYNTAX_ERR\"\n\t\t\t\t, \"An invalid or illegal string was specified\"\n\t\t\t);\n\t\t}\n\t\tif (/\\s/.test(token)) {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"INVALID_CHARACTER_ERR\"\n\t\t\t\t, \"String contains an invalid character\"\n\t\t\t);\n\t\t}\n\t\treturn arrIndexOf.call(classList, token);\n\t}\n\t, ClassList = function (elem) {\n\t\tvar\n\t\t\t  trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n\t\t\t, classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : []\n\t\t\t, i = 0\n\t\t\t, len = classes.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tthis.push(classes[i]);\n\t\t}\n\t\tthis._updateClassName = function () {\n\t\t\telem.setAttribute(\"class\", this.toString());\n\t\t};\n\t}\n\t, classListProto = ClassList[protoProp] = []\n\t, classListGetter = function () {\n\t\treturn new ClassList(this);\n\t}\n;\n// Most DOMException implementations don't allow calling DOMException's toString()\n// on non-DOMExceptions. Error's toString() is sufficient here.\nDOMEx[protoProp] = Error[protoProp];\nclassListProto.item = function (i) {\n\treturn this[i] || null;\n};\nclassListProto.contains = function (token) {\n\ttoken += \"\";\n\treturn checkTokenAndGetIndex(this, token) !== -1;\n};\nclassListProto.add = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tif (checkTokenAndGetIndex(this, token) === -1) {\n\t\t\tthis.push(token);\n\t\t\tupdated = true;\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.remove = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t\t, index\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tindex = checkTokenAndGetIndex(this, token);\n\t\twhile (index !== -1) {\n\t\t\tthis.splice(index, 1);\n\t\t\tupdated = true;\n\t\t\tindex = checkTokenAndGetIndex(this, token);\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.toggle = function (token, force) {\n\ttoken += \"\";\n\n\tvar\n\t\t  result = this.contains(token)\n\t\t, method = result ?\n\t\t\tforce !== true && \"remove\"\n\t\t:\n\t\t\tforce !== false && \"add\"\n\t;\n\n\tif (method) {\n\t\tthis[method](token);\n\t}\n\n\tif (force === true || force === false) {\n\t\treturn force;\n\t} else {\n\t\treturn !result;\n\t}\n};\nclassListProto.toString = function () {\n\treturn this.join(\" \");\n};\n\nif (objCtr.defineProperty) {\n\tvar classListPropDesc = {\n\t\t  get: classListGetter\n\t\t, enumerable: true\n\t\t, configurable: true\n\t};\n\ttry {\n\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t} catch (ex) { // IE 8 doesn't support enumerable:true\n\t\t// adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n\t\t// modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n\t\tif (ex.number === undefined || ex.number === -0x7FF5EC54) {\n\t\t\tclassListPropDesc.enumerable = false;\n\t\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t\t}\n\t}\n} else if (objCtr[protoProp].__defineGetter__) {\n\telemCtrProto.__defineGetter__(classListProp, classListGetter);\n}\n\n}(window.self));\n\n}\n\n// There is full or partial native classList support, so just check if we need\n// to normalize the add/remove and toggle APIs.\n\n(function () {\n\t\"use strict\";\n\n\tvar testElement = document.createElement(\"_\");\n\n\ttestElement.classList.add(\"c1\", \"c2\");\n\n\t// Polyfill for IE 10/11 and Firefox <26, where classList.add and\n\t// classList.remove exist but support only one argument at a time.\n\tif (!testElement.classList.contains(\"c2\")) {\n\t\tvar createMethod = function(method) {\n\t\t\tvar original = DOMTokenList.prototype[method];\n\n\t\t\tDOMTokenList.prototype[method] = function(token) {\n\t\t\t\tvar i, len = arguments.length;\n\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\ttoken = arguments[i];\n\t\t\t\t\toriginal.call(this, token);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tcreateMethod('add');\n\t\tcreateMethod('remove');\n\t}\n\n\ttestElement.classList.toggle(\"c3\", false);\n\n\t// Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n\t// support the second argument.\n\tif (testElement.classList.contains(\"c3\")) {\n\t\tvar _toggle = DOMTokenList.prototype.toggle;\n\n\t\tDOMTokenList.prototype.toggle = function(token, force) {\n\t\t\tif (1 in arguments && !this.contains(token) === !force) {\n\t\t\t\treturn force;\n\t\t\t} else {\n\t\t\t\treturn _toggle.call(this, token);\n\t\t\t}\n\t\t};\n\n\t}\n\n\ttestElement = null;\n}());\n\n}\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n */\n\n(function(window, document) {\n'use strict';\n\n\n// Exits early if all IntersectionObserver and IntersectionObserverEntry\n// features are natively supported.\nif ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n  // Minimal polyfill for Edge 15's lack of `isIntersecting`\n  // See: https://github.com/w3c/IntersectionObserver/issues/211\n  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n    Object.defineProperty(window.IntersectionObserverEntry.prototype,\n      'isIntersecting', {\n      get: function () {\n        return this.intersectionRatio > 0;\n      }\n    });\n  }\n  return;\n}\n\n\n/**\n * An IntersectionObserver registry. This registry exists to hold a strong\n * reference to IntersectionObserver instances currently observing a target\n * element. Without this registry, instances without another reference may be\n * garbage collected.\n */\nvar registry = [];\n\n\n/**\n * Creates the global IntersectionObserverEntry constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-entry\n * @param {Object} entry A dictionary of instance properties.\n * @constructor\n */\nfunction IntersectionObserverEntry(entry) {\n  this.time = entry.time;\n  this.target = entry.target;\n  this.rootBounds = entry.rootBounds;\n  this.boundingClientRect = entry.boundingClientRect;\n  this.intersectionRect = entry.intersectionRect || getEmptyRect();\n  this.isIntersecting = !!entry.intersectionRect;\n\n  // Calculates the intersection ratio.\n  var targetRect = this.boundingClientRect;\n  var targetArea = targetRect.width * targetRect.height;\n  var intersectionRect = this.intersectionRect;\n  var intersectionArea = intersectionRect.width * intersectionRect.height;\n\n  // Sets intersection ratio.\n  if (targetArea) {\n    // Round the intersection ratio to avoid floating point math issues:\n    // https://github.com/w3c/IntersectionObserver/issues/324\n    this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4));\n  } else {\n    // If area is zero and is intersecting, sets to 1, otherwise to 0\n    this.intersectionRatio = this.isIntersecting ? 1 : 0;\n  }\n}\n\n\n/**\n * Creates the global IntersectionObserver constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-interface\n * @param {Function} callback The function to be invoked after intersection\n *     changes have queued. The function is not invoked if the queue has\n *     been emptied by calling the `takeRecords` method.\n * @param {Object=} opt_options Optional configuration options.\n * @constructor\n */\nfunction IntersectionObserver(callback, opt_options) {\n\n  var options = opt_options || {};\n\n  if (typeof callback != 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (options.root && options.root.nodeType != 1) {\n    throw new Error('root must be an Element');\n  }\n\n  // Binds and throttles `this._checkForIntersections`.\n  this._checkForIntersections = throttle(\n      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);\n\n  // Private properties.\n  this._callback = callback;\n  this._observationTargets = [];\n  this._queuedEntries = [];\n  this._rootMarginValues = this._parseRootMargin(options.rootMargin);\n\n  // Public properties.\n  this.thresholds = this._initThresholds(options.threshold);\n  this.root = options.root || null;\n  this.rootMargin = this._rootMarginValues.map(function(margin) {\n    return margin.value + margin.unit;\n  }).join(' ');\n}\n\n\n/**\n * The minimum interval within which the document will be checked for\n * intersection changes.\n */\nIntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;\n\n\n/**\n * The frequency in which the polyfill polls for intersection changes.\n * this can be updated on a per instance basis and must be set prior to\n * calling `observe` on the first target.\n */\nIntersectionObserver.prototype.POLL_INTERVAL = null;\n\n/**\n * Use a mutation observer on the root element\n * to detect intersection changes.\n */\nIntersectionObserver.prototype.USE_MUTATION_OBSERVER = true;\n\n\n/**\n * Starts observing a target element for intersection changes based on\n * the thresholds values.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.observe = function(target) {\n  var isTargetAlreadyObserved = this._observationTargets.some(function(item) {\n    return item.element == target;\n  });\n\n  if (isTargetAlreadyObserved) {\n    return;\n  }\n\n  if (!(target && target.nodeType == 1)) {\n    throw new Error('target must be an Element');\n  }\n\n  this._registerInstance();\n  this._observationTargets.push({element: target, entry: null});\n  this._monitorIntersections();\n  this._checkForIntersections();\n};\n\n\n/**\n * Stops observing a target element for intersection changes.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.unobserve = function(target) {\n  this._observationTargets =\n      this._observationTargets.filter(function(item) {\n\n    return item.element != target;\n  });\n  if (!this._observationTargets.length) {\n    this._unmonitorIntersections();\n    this._unregisterInstance();\n  }\n};\n\n\n/**\n * Stops observing all target elements for intersection changes.\n */\nIntersectionObserver.prototype.disconnect = function() {\n  this._observationTargets = [];\n  this._unmonitorIntersections();\n  this._unregisterInstance();\n};\n\n\n/**\n * Returns any queue entries that have not yet been reported to the\n * callback and clears the queue. This can be used in conjunction with the\n * callback to obtain the absolute most up-to-date intersection information.\n * @return {Array} The currently queued entries.\n */\nIntersectionObserver.prototype.takeRecords = function() {\n  var records = this._queuedEntries.slice();\n  this._queuedEntries = [];\n  return records;\n};\n\n\n/**\n * Accepts the threshold value from the user configuration object and\n * returns a sorted array of unique threshold values. If a value is not\n * between 0 and 1 and error is thrown.\n * @private\n * @param {Array|number=} opt_threshold An optional threshold value or\n *     a list of threshold values, defaulting to [0].\n * @return {Array} A sorted list of unique and valid threshold values.\n */\nIntersectionObserver.prototype._initThresholds = function(opt_threshold) {\n  var threshold = opt_threshold || [0];\n  if (!Array.isArray(threshold)) threshold = [threshold];\n\n  return threshold.sort().filter(function(t, i, a) {\n    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {\n      throw new Error('threshold must be a number between 0 and 1 inclusively');\n    }\n    return t !== a[i - 1];\n  });\n};\n\n\n/**\n * Accepts the rootMargin value from the user configuration object\n * and returns an array of the four margin values as an object containing\n * the value and unit properties. If any of the values are not properly\n * formatted or use a unit other than px or %, and error is thrown.\n * @private\n * @param {string=} opt_rootMargin An optional rootMargin value,\n *     defaulting to '0px'.\n * @return {Array<Object>} An array of margin objects with the keys\n *     value and unit.\n */\nIntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {\n  var marginString = opt_rootMargin || '0px';\n  var margins = marginString.split(/\\s+/).map(function(margin) {\n    var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);\n    if (!parts) {\n      throw new Error('rootMargin must be specified in pixels or percent');\n    }\n    return {value: parseFloat(parts[1]), unit: parts[2]};\n  });\n\n  // Handles shorthand.\n  margins[1] = margins[1] || margins[0];\n  margins[2] = margins[2] || margins[0];\n  margins[3] = margins[3] || margins[1];\n\n  return margins;\n};\n\n\n/**\n * Starts polling for intersection changes if the polling is not already\n * happening, and if the page's visibility state is visible.\n * @private\n */\nIntersectionObserver.prototype._monitorIntersections = function() {\n  if (!this._monitoringIntersections) {\n    this._monitoringIntersections = true;\n\n    // If a poll interval is set, use polling instead of listening to\n    // resize and scroll events or DOM mutations.\n    if (this.POLL_INTERVAL) {\n      this._monitoringInterval = setInterval(\n          this._checkForIntersections, this.POLL_INTERVAL);\n    }\n    else {\n      addEvent(window, 'resize', this._checkForIntersections, true);\n      addEvent(document, 'scroll', this._checkForIntersections, true);\n\n      if (this.USE_MUTATION_OBSERVER && 'MutationObserver' in window) {\n        this._domObserver = new MutationObserver(this._checkForIntersections);\n        this._domObserver.observe(document, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          subtree: true\n        });\n      }\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @private\n */\nIntersectionObserver.prototype._unmonitorIntersections = function() {\n  if (this._monitoringIntersections) {\n    this._monitoringIntersections = false;\n\n    clearInterval(this._monitoringInterval);\n    this._monitoringInterval = null;\n\n    removeEvent(window, 'resize', this._checkForIntersections, true);\n    removeEvent(document, 'scroll', this._checkForIntersections, true);\n\n    if (this._domObserver) {\n      this._domObserver.disconnect();\n      this._domObserver = null;\n    }\n  }\n};\n\n\n/**\n * Scans each observation target for intersection changes and adds them\n * to the internal entries queue. If new entries are found, it\n * schedules the callback to be invoked.\n * @private\n */\nIntersectionObserver.prototype._checkForIntersections = function() {\n  var rootIsInDom = this._rootIsInDom();\n  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();\n\n  this._observationTargets.forEach(function(item) {\n    var target = item.element;\n    var targetRect = getBoundingClientRect(target);\n    var rootContainsTarget = this._rootContainsTarget(target);\n    var oldEntry = item.entry;\n    var intersectionRect = rootIsInDom && rootContainsTarget &&\n        this._computeTargetAndRootIntersection(target, rootRect);\n\n    var newEntry = item.entry = new IntersectionObserverEntry({\n      time: now(),\n      target: target,\n      boundingClientRect: targetRect,\n      rootBounds: rootRect,\n      intersectionRect: intersectionRect\n    });\n\n    if (!oldEntry) {\n      this._queuedEntries.push(newEntry);\n    } else if (rootIsInDom && rootContainsTarget) {\n      // If the new entry intersection ratio has crossed any of the\n      // thresholds, add a new entry.\n      if (this._hasCrossedThreshold(oldEntry, newEntry)) {\n        this._queuedEntries.push(newEntry);\n      }\n    } else {\n      // If the root is not in the DOM or target is not contained within\n      // root but the previous entry for this target had an intersection,\n      // add a new record indicating removal.\n      if (oldEntry && oldEntry.isIntersecting) {\n        this._queuedEntries.push(newEntry);\n      }\n    }\n  }, this);\n\n  if (this._queuedEntries.length) {\n    this._callback(this.takeRecords(), this);\n  }\n};\n\n\n/**\n * Accepts a target and root rect computes the intersection between then\n * following the algorithm in the spec.\n * TODO(philipwalton): at this time clip-path is not considered.\n * https://w3c.github.io/IntersectionObserver/#calculate-intersection-rect-algo\n * @param {Element} target The target DOM element\n * @param {Object} rootRect The bounding rect of the root after being\n *     expanded by the rootMargin value.\n * @return {?Object} The final intersection rect object or undefined if no\n *     intersection is found.\n * @private\n */\nIntersectionObserver.prototype._computeTargetAndRootIntersection =\n    function(target, rootRect) {\n\n  // If the element isn't displayed, an intersection can't happen.\n  if (window.getComputedStyle(target).display == 'none') return;\n\n  var targetRect = getBoundingClientRect(target);\n  var intersectionRect = targetRect;\n  var parent = getParentNode(target);\n  var atRoot = false;\n\n  while (!atRoot) {\n    var parentRect = null;\n    var parentComputedStyle = parent.nodeType == 1 ?\n        window.getComputedStyle(parent) : {};\n\n    // If the parent isn't displayed, an intersection can't happen.\n    if (parentComputedStyle.display == 'none') return;\n\n    if (parent == this.root || parent == document) {\n      atRoot = true;\n      parentRect = rootRect;\n    } else {\n      // If the element has a non-visible overflow, and it's not the <body>\n      // or <html> element, update the intersection rect.\n      // Note: <body> and <html> cannot be clipped to a rect that's not also\n      // the document rect, so no need to compute a new intersection.\n      if (parent != document.body &&\n          parent != document.documentElement &&\n          parentComputedStyle.overflow != 'visible') {\n        parentRect = getBoundingClientRect(parent);\n      }\n    }\n\n    // If either of the above conditionals set a new parentRect,\n    // calculate new intersection data.\n    if (parentRect) {\n      intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n\n      if (!intersectionRect) break;\n    }\n    parent = getParentNode(parent);\n  }\n  return intersectionRect;\n};\n\n\n/**\n * Returns the root rect after being expanded by the rootMargin value.\n * @return {Object} The expanded root rect.\n * @private\n */\nIntersectionObserver.prototype._getRootRect = function() {\n  var rootRect;\n  if (this.root) {\n    rootRect = getBoundingClientRect(this.root);\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var html = document.documentElement;\n    var body = document.body;\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n  return this._expandRectByRootMargin(rootRect);\n};\n\n\n/**\n * Accepts a rect and expands it by the rootMargin value.\n * @param {Object} rect The rect object to expand.\n * @return {Object} The expanded rect.\n * @private\n */\nIntersectionObserver.prototype._expandRectByRootMargin = function(rect) {\n  var margins = this._rootMarginValues.map(function(margin, i) {\n    return margin.unit == 'px' ? margin.value :\n        margin.value * (i % 2 ? rect.width : rect.height) / 100;\n  });\n  var newRect = {\n    top: rect.top - margins[0],\n    right: rect.right + margins[1],\n    bottom: rect.bottom + margins[2],\n    left: rect.left - margins[3]\n  };\n  newRect.width = newRect.right - newRect.left;\n  newRect.height = newRect.bottom - newRect.top;\n\n  return newRect;\n};\n\n\n/**\n * Accepts an old and new entry and returns true if at least one of the\n * threshold values has been crossed.\n * @param {?IntersectionObserverEntry} oldEntry The previous entry for a\n *    particular target element or null if no previous entry exists.\n * @param {IntersectionObserverEntry} newEntry The current entry for a\n *    particular target element.\n * @return {boolean} Returns true if a any threshold has been crossed.\n * @private\n */\nIntersectionObserver.prototype._hasCrossedThreshold =\n    function(oldEntry, newEntry) {\n\n  // To make comparing easier, an entry that has a ratio of 0\n  // but does not actually intersect is given a value of -1\n  var oldRatio = oldEntry && oldEntry.isIntersecting ?\n      oldEntry.intersectionRatio || 0 : -1;\n  var newRatio = newEntry.isIntersecting ?\n      newEntry.intersectionRatio || 0 : -1;\n\n  // Ignore unchanged ratios\n  if (oldRatio === newRatio) return;\n\n  for (var i = 0; i < this.thresholds.length; i++) {\n    var threshold = this.thresholds[i];\n\n    // Return true if an entry matches a threshold or if the new ratio\n    // and the old ratio are on the opposite sides of a threshold.\n    if (threshold == oldRatio || threshold == newRatio ||\n        threshold < oldRatio !== threshold < newRatio) {\n      return true;\n    }\n  }\n};\n\n\n/**\n * Returns whether or not the root element is an element and is in the DOM.\n * @return {boolean} True if the root element is an element and is in the DOM.\n * @private\n */\nIntersectionObserver.prototype._rootIsInDom = function() {\n  return !this.root || containsDeep(document, this.root);\n};\n\n\n/**\n * Returns whether or not the target element is a child of root.\n * @param {Element} target The target element to check.\n * @return {boolean} True if the target element is a child of root.\n * @private\n */\nIntersectionObserver.prototype._rootContainsTarget = function(target) {\n  return containsDeep(this.root || document, target);\n};\n\n\n/**\n * Adds the instance to the global IntersectionObserver registry if it isn't\n * already present.\n * @private\n */\nIntersectionObserver.prototype._registerInstance = function() {\n  if (registry.indexOf(this) < 0) {\n    registry.push(this);\n  }\n};\n\n\n/**\n * Removes the instance from the global IntersectionObserver registry.\n * @private\n */\nIntersectionObserver.prototype._unregisterInstance = function() {\n  var index = registry.indexOf(this);\n  if (index != -1) registry.splice(index, 1);\n};\n\n\n/**\n * Returns the result of the performance.now() method or null in browsers\n * that don't support the API.\n * @return {number} The elapsed time since the page was requested.\n */\nfunction now() {\n  return window.performance && performance.now && performance.now();\n}\n\n\n/**\n * Throttles a function and delays its execution, so it's only called at most\n * once within a given time period.\n * @param {Function} fn The function to throttle.\n * @param {number} timeout The amount of time that must pass before the\n *     function can be called again.\n * @return {Function} The throttled function.\n */\nfunction throttle(fn, timeout) {\n  var timer = null;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function() {\n        fn();\n        timer = null;\n      }, timeout);\n    }\n  };\n}\n\n\n/**\n * Adds an event handler to a DOM node ensuring cross-browser compatibility.\n * @param {Node} node The DOM node to add the event handler to.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to add.\n * @param {boolean} opt_useCapture Optionally adds the even to the capture\n *     phase. Note: this only works in modern browsers.\n */\nfunction addEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.addEventListener == 'function') {\n    node.addEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.attachEvent == 'function') {\n    node.attachEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Removes a previously added event handler from a DOM node.\n * @param {Node} node The DOM node to remove the event handler from.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to remove.\n * @param {boolean} opt_useCapture If the event handler was added with this\n *     flag set to true, it should be set to true here in order to remove it.\n */\nfunction removeEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.removeEventListener == 'function') {\n    node.removeEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.detatchEvent == 'function') {\n    node.detatchEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Returns the intersection between two rect objects.\n * @param {Object} rect1 The first rect.\n * @param {Object} rect2 The second rect.\n * @return {?Object} The intersection rect or undefined if no intersection\n *     is found.\n */\nfunction computeRectIntersection(rect1, rect2) {\n  var top = Math.max(rect1.top, rect2.top);\n  var bottom = Math.min(rect1.bottom, rect2.bottom);\n  var left = Math.max(rect1.left, rect2.left);\n  var right = Math.min(rect1.right, rect2.right);\n  var width = right - left;\n  var height = bottom - top;\n\n  return (width >= 0 && height >= 0) && {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n\n/**\n * Shims the native getBoundingClientRect for compatibility with older IE.\n * @param {Element} el The element whose bounding rect to get.\n * @return {Object} The (possibly shimmed) rect of the element.\n */\nfunction getBoundingClientRect(el) {\n  var rect;\n\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (err) {\n    // Ignore Windows 7 IE11 \"Unspecified error\"\n    // https://github.com/w3c/IntersectionObserver/pull/205\n  }\n\n  if (!rect) return getEmptyRect();\n\n  // Older IE\n  if (!(rect.width && rect.height)) {\n    rect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    };\n  }\n  return rect;\n}\n\n\n/**\n * Returns an empty rect object. An empty rect is returned when an element\n * is not in the DOM.\n * @return {Object} The empty rect.\n */\nfunction getEmptyRect() {\n  return {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0\n  };\n}\n\n/**\n * Checks to see if a parent element contains a child element (including inside\n * shadow DOM).\n * @param {Node} parent The parent element.\n * @param {Node} child The child element.\n * @return {boolean} True if the parent node contains the child node.\n */\nfunction containsDeep(parent, child) {\n  var node = child;\n  while (node) {\n    if (node == parent) return true;\n\n    node = getParentNode(node);\n  }\n  return false;\n}\n\n\n/**\n * Gets the parent node of an element or its host element if the parent node\n * is a shadow root.\n * @param {Node} node The node whose parent to get.\n * @return {Node|null} The parent node or null if no parent exists.\n */\nfunction getParentNode(node) {\n  var parent = node.parentNode;\n\n  if (parent && parent.nodeType == 11 && parent.host) {\n    // If the parent is a shadow root, return the host element.\n    return parent.host;\n  }\n  return parent;\n}\n\n\n// Exposes the constructors globally.\nwindow.IntersectionObserver = IntersectionObserver;\nwindow.IntersectionObserverEntry = IntersectionObserverEntry;\n\n}(window, document));\n","/*\n * @namespace Util\n *\n * Various utility functions, used by Leaflet internally.\n */\n\n// @function extend(dest: Object, src?: Object): Object\n// Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.\nexport function extend(dest) {\n    var i, j, len, src;\n\n    for (j = 1, len = arguments.length; j < len; j++) {\n        src = arguments[j];\n        for (i in src) {\n            dest[i] = src[i];\n        }\n    }\n    return dest;\n}\n\n// @function create(proto: Object, properties?: Object): Object\n// Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)\nexport var create = Object.create || (function () {\n    function F() {}\n    return function (proto) {\n        F.prototype = proto;\n        return new F();\n    };\n})();\n\n// @function bind(fn: Function, â€¦): Function\n// Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n// Has a `L.bind()` shortcut.\nexport function bind(fn, obj) {\n    var slice = Array.prototype.slice;\n\n    if (fn.bind) {\n        return fn.bind.apply(fn, slice.call(arguments, 1));\n    }\n\n    var args = slice.call(arguments, 2);\n\n    return function () {\n        return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\n    };\n}\n\n// @property lastId: Number\n// Last unique ID used by [`stamp()`](#util-stamp)\nexport var lastId = 0;\n\n// @function stamp(obj: Object): Number\n// Returns the unique ID of an object, assiging it one if it doesn't have it.\nexport function stamp(obj) {\n    /*eslint-disable */\n    obj._cozy_id = obj._cozy_id || ++lastId;\n    return obj._cozy_id; /* not leaflet */\n    /*eslint-enable */\n}\n\n// @function throttle(fn: Function, time: Number, context: Object): Function\n// Returns a function which executes function `fn` with the given scope `context`\n// (so that the `this` keyword refers to `context` inside `fn`'s code). The function\n// `fn` will be called no more than one time per given amount of `time`. The arguments\n// received by the bound function will be any arguments passed when binding the\n// function, followed by any arguments passed when invoking the bound function.\n// Has an `L.throttle` shortcut.\nexport function throttle(fn, time, context) {\n    var lock, args, wrapperFn, later;\n\n    later = function () {\n        // reset lock and call if queued\n        lock = false;\n        if (args) {\n            wrapperFn.apply(context, args);\n            args = false;\n        }\n    };\n\n    wrapperFn = function () {\n        if (lock) {\n            // called too soon, queue to call later\n            args = arguments;\n\n        } else {\n            // call and lock until later\n            fn.apply(context, arguments);\n            setTimeout(later, time);\n            lock = true;\n        }\n    };\n\n    return wrapperFn;\n}\n\n// @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number\n// Returns the number `num` modulo `range` in such a way so it lies within\n// `range[0]` and `range[1]`. The returned value will be always smaller than\n// `range[1]` unless `includeMax` is set to `true`.\nexport function wrapNum(x, range, includeMax) {\n    var max = range[1],\n        min = range[0],\n        d = max - min;\n    return x === max && includeMax ? x : ((x - min) % d + d) % d + min;\n}\n\n// @function falseFn(): Function\n// Returns a function which always returns `false`.\nexport function falseFn() { return false; }\n\n// @function formatNum(num: Number, digits?: Number): Number\n// Returns the number `num` rounded to `digits` decimals, or to 5 decimals by default.\nexport function formatNum(num, digits) {\n    var pow = Math.pow(10, digits || 5);\n    return Math.round(num * pow) / pow;\n}\n\n// @function isNumeric(num: Number): Boolean\n// Returns whether num is actually numeric\nexport function isNumeric(num) {\n  return !isNaN(parseFloat(num)) && isFinite(num);\n}\n\n// @function trim(str: String): String\n// Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)\nexport function trim(str) {\n    return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\n// @function splitWords(str: String): String[]\n// Trims and splits the string on whitespace and returns the array of parts.\nexport function splitWords(str) {\n    return trim(str).split(/\\s+/);\n}\n\n// @function setOptions(obj: Object, options: Object): Object\n// Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.\nexport function setOptions(obj, options) {\n    if (!obj.hasOwnProperty('options')) {\n        obj.options = obj.options ? create(obj.options) : {};\n    }\n    for (var i in options) {\n        obj.options[i] = options[i];\n    }\n    return obj.options;\n}\n\n// @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String\n// Converts an object into a parameter URL string, e.g. `{a: \"foo\", b: \"bar\"}`\n// translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will\n// be appended at the end. If `uppercase` is `true`, the parameter names will\n// be uppercased (e.g. `'?A=foo&B=bar'`)\nexport function getParamString(obj, existingUrl, uppercase) {\n    var params = [];\n    for (var i in obj) {\n        params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n    }\n    return ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\n}\n\nvar templateRe = /\\{ *([\\w_\\-]+) *\\}/g;\n\n// @function template(str: String, data: Object): String\n// Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`\n// and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string\n// `('Hello foo, bar')`. You can also specify functions instead of strings for\n// data values â€” they will be evaluated passing `data` as an argument.\nexport function template(str, data) {\n    return str.replace(templateRe, function (str, key) {\n        var value = data[key];\n\n        if (value === undefined) {\n            throw new Error('No value provided for variable ' + str);\n\n        } else if (typeof value === 'function') {\n            value = value(data);\n        }\n        return value;\n    });\n}\n\n// @function isArray(obj): Boolean\n// Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)\nexport var isArray = Array.isArray || function (obj) {\n    return (Object.prototype.toString.call(obj) === '[object Array]');\n};\n\n// @function indexOf(array: Array, el: Object): Number\n// Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)\nexport function indexOf(array, el) {\n    for (var i = 0; i < array.length; i++) {\n        if (array[i] === el) { return i; }\n    }\n    return -1;\n}\n\n// @property emptyImageUrl: String\n// Data URI string containing a base64-encoded empty GIF image.\n// Used as a hack to free memory from unused images on WebKit-powered\n// mobile devices (by setting image `src` to this string).\nexport var emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\n\n// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n\nfunction getPrefixed(name) {\n    return window['webkit' + name] || window['moz' + name] || window['ms' + name];\n}\n\nvar lastTime = 0;\n\n// fallback for IE 7-8\nfunction timeoutDefer(fn) {\n    var time = +new Date(),\n        timeToCall = Math.max(0, 16 - (time - lastTime));\n\n    lastTime = time + timeToCall;\n    return window.setTimeout(fn, timeToCall);\n}\n\nexport var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\nexport var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\n        getPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\n\n// @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): Number\n// Schedules `fn` to be executed when the browser repaints. `fn` is bound to\n// `context` if given. When `immediate` is set, `fn` is called immediately if\n// the browser doesn't have native support for\n// [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),\n// otherwise it's delayed. Returns a request ID that can be used to cancel the request.\nexport function requestAnimFrame(fn, context, immediate) {\n    if (immediate && requestFn === timeoutDefer) {\n        fn.call(context);\n    } else {\n        return requestFn.call(window, bind(fn, context));\n    }\n}\n\n// @function cancelAnimFrame(id: Number): undefined\n// Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).\nexport function cancelAnimFrame(id) {\n    if (id) {\n        cancelFn.call(window, id);\n    }\n}\n\nexport function inVp(elem, threshold = {}, container = null) {\n\n    if ( threshold instanceof HTMLElement ) {\n        container = threshold;\n        threshold = {};\n    }\n\n    threshold = Object.assign({\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n    }, threshold);\n\n    container = container || document.documentElement;\n\n    // Get the viewport dimensions\n    const vp = {\n        width: container.clientWidth,\n        height: container.clientHeight\n    };\n\n    // Get the viewport offset and size of the element.\n    // Normailze right and bottom to show offset from their\n    // respective edges istead of the top-left edges.\n    const box = elem.getBoundingClientRect();\n    const {\n        top,\n        left,\n        width,\n        height\n    } = box;\n    const right = vp.width - box.right;\n    const bottom = vp.height - box.bottom;\n\n    // Calculate which sides of the element are cut-off\n    // by the viewport.\n    const cutOff = {\n        top: top < threshold.top,\n        left: left < threshold.left,\n        bottom: bottom < threshold.bottom,\n        right: right < threshold.right\n    };\n\n    // Calculate which sides of the element are partially shown\n    const partial = {\n        top: cutOff.top && top > -height + threshold.top,\n        left: cutOff.left && left > -width + threshold.left,\n        bottom: cutOff.bottom && bottom > -height + threshold.bottom,\n        right: cutOff.right && right > -width + threshold.right\n    };\n\n    const isFullyVisible = top >= threshold.top &&\n        right >= threshold.right &&\n        bottom >= threshold.bottom &&\n        left >= threshold.left;\n\n    const isPartiallyVisible = partial.top ||\n        partial.right ||\n        partial.bottom ||\n        partial.left;\n\n\n    var elH = elem.offsetHeight;\n    var H = container.offsetHeight;\n    var percentage = Math.max(0, top > 0 ? Math.min(elH, H - top) : (box.bottom < H ? box.bottom : H));\n\n    // Calculate which edge of the element are visible.\n    // Every edge can have three states:\n    // - 'fully':     The edge is completely visible.\n    // - 'partially': Some part of the edge can be seen.\n    // - false:       The edge is not visible at all.\n    const edges = {\n        top: !isFullyVisible && !isPartiallyVisible ? false : ((!cutOff.top && !cutOff.left && !cutOff.right) && 'fully') ||\n            (!cutOff.top && 'partially') ||\n            false,\n        right: !isFullyVisible && !isPartiallyVisible ? false : ((!cutOff.right && !cutOff.top && !cutOff.bottom) && 'fully') ||\n            (!cutOff.right && 'partially') ||\n            false,\n        bottom: !isFullyVisible && !isPartiallyVisible ? false : ((!cutOff.bottom && !cutOff.left && !cutOff.right) && 'fully') ||\n            (!cutOff.bottom && 'partially') ||\n            false,\n        left: !isFullyVisible && !isPartiallyVisible ? false : ((!cutOff.left && !cutOff.top && !cutOff.bottom) && 'fully') ||\n            (!cutOff.left && 'partially') ||\n            false,\n        percentage: percentage\n    };\n\n    return {\n        fully: isFullyVisible,\n        partially: isPartiallyVisible,\n        edges\n    };\n}\n\nexport var loader = {\n    js: function(url) {\n        var handler = { _resolved: false };\n        handler.callbacks = [];\n        handler.error = [];\n        handler.then = function(cb) {\n            handler.callbacks.push(cb);\n            if ( handler._resolved ) { return handler.resolve(); }\n            return handler;\n        }\n        handler.catch = function(cb) {\n            handler.error.push(cb);\n            if ( handler._resolved ) { return handler.reject(); }\n            return handler;\n        }\n        handler.resolve = function(_argv) {\n            // var _argv;\n            handler._resolved = true;\n            while ( handler.callbacks.length ) {\n                var cb = handler.callbacks.shift();\n                var retval;\n                try {\n                    _argv = cb(_argv);\n                } catch(e) {\n                    console.log(e);\n                    handler.reject(e);\n                    break;\n                }\n            }\n            return handler;\n        }\n\n        handler.reject = function(e) {\n            while ( handler.error.length ) {\n                var cb = handler.error.shift();\n                cb(e);\n            }\n            console.log(e);\n            console.trace();\n            return handler;\n        }\n\n        if ( url == undefined ) {\n            handler._resolved = true;\n            return handler;\n        }\n\n        var element = document.createElement('script');\n\n        element.onload = function() {\n          handler.resolve(url);\n        };\n        element.onerror = function() {\n          handler.catch.apply(arguments);\n        };\n\n        element.async = true;\n        var parent = 'body';\n        var attr = 'src';\n        element[attr] = url;\n        document[parent].appendChild(element);\n\n        console.log(\"AHOY APPENDED\", url);\n\n        return handler;\n    }\n}","import * as Util from './Util';\r\n\r\n// @class Class\r\n// @aka L.Class\r\n\r\n// @section\r\n// @uninheritable\r\n\r\n// Thanks to John Resig and Dean Edwards for inspiration!\r\n\r\nexport function Class() {}\r\n\r\nClass.extend = function (props) {\r\n\r\n\t// @function extend(props: Object): Function\r\n\t// [Extends the current class](#class-inheritance) given the properties to be included.\r\n\t// Returns a Javascript function that is a class constructor (to be called with `new`).\r\n\tvar NewClass = function () {\r\n\r\n\t\t// call the constructor\r\n\t\tif (this.initialize) {\r\n\t\t\tthis.initialize.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\t// call all constructor hooks\r\n\t\tthis.callInitHooks();\r\n\t};\r\n\r\n\tvar parentProto = NewClass.__super__ = this.prototype;\r\n\r\n\tvar proto = Util.create(parentProto);\r\n\tproto.constructor = NewClass;\r\n\r\n\tNewClass.prototype = proto;\r\n\r\n\t// inherit parent's statics\r\n\tfor (var i in this) {\r\n\t\tif (this.hasOwnProperty(i) && i !== 'prototype') {\r\n\t\t\tNewClass[i] = this[i];\r\n\t\t}\r\n\t}\r\n\r\n\t// mix static properties into the class\r\n\tif (props.statics) {\r\n\t\tUtil.extend(NewClass, props.statics);\r\n\t\tdelete props.statics;\r\n\t}\r\n\r\n\t// mix includes into the prototype\r\n\tif (props.includes) {\r\n\t\tcheckDeprecatedMixinEvents(props.includes);\r\n\t\tUtil.extend.apply(null, [proto].concat(props.includes));\r\n\t\tdelete props.includes;\r\n\t}\r\n\r\n\t// merge options\r\n\tif (proto.options) {\r\n\t\tprops.options = Util.extend(Util.create(proto.options), props.options);\r\n\t}\r\n\r\n\t// mix given properties into the prototype\r\n\tUtil.extend(proto, props);\r\n\t\r\n\tproto._initHooks = [];\r\n\r\n\t// add method for calling all hooks\r\n\tproto.callInitHooks = function () {\r\n\r\n\t\tif (this._initHooksCalled) { return; }\r\n\r\n\t\tif (parentProto.callInitHooks) {\r\n\t\t\tparentProto.callInitHooks.call(this);\r\n\t\t}\r\n\r\n\t\tthis._initHooksCalled = true;\r\n\r\n\t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\r\n\t\t\tproto._initHooks[i].call(this);\r\n\t\t}\r\n\t};\r\n\r\n\treturn NewClass;\r\n};\r\n\r\n\r\n// @function include(properties: Object): this\r\n// [Includes a mixin](#class-includes) into the current class.\r\nClass.include = function (props) {\r\n\tUtil.extend(this.prototype, props);\r\n\treturn this;\r\n};\r\n\r\n// @function mergeOptions(options: Object): this\r\n// [Merges `options`](#class-options) into the defaults of the class.\r\nClass.mergeOptions = function (options) {\r\n\tUtil.extend(this.prototype.options, options);\r\n\treturn this;\r\n};\r\n\r\n// @function addInitHook(fn: Function): this\r\n// Adds a [constructor hook](#class-constructor-hooks) to the class.\r\nClass.addInitHook = function (fn) { // (Function) || (String, args...)\r\n\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n\tvar init = typeof fn === 'function' ? fn : function () {\r\n\t\tthis[fn].apply(this, args);\r\n\t};\r\n\r\n\tthis.prototype._initHooks = this.prototype._initHooks || [];\r\n\tthis.prototype._initHooks.push(init);\r\n\treturn this;\r\n};\r\n\r\nfunction checkDeprecatedMixinEvents(includes) {\r\n\tif (!cozy || !cozy.Mixin) { return; }\r\n\r\n\tincludes = cozy.Util.isArray(includes) ? includes : [includes];\r\n\r\n\t// for (var i = 0; i < includes.length; i++) {\r\n\t// \tif (includes[i] === cozy.Mixin.Events) {\r\n\t// \t\tconsole.warn('Deprecated include of cozy.Mixin.Events: ' +\r\n\t// \t\t\t'this property will be removed in future releases, ' +\r\n\t// \t\t\t'please inherit from cozy.Evented instead.', new Error().stack);\r\n\t// \t}\r\n\t// }\r\n}\r\n","import {Class} from './Class';\r\nimport * as Util from './Util';\r\n\r\n/*\r\n * @class Evented\r\n * @aka L.Evented\r\n * @inherits Class\r\n *\r\n * A set of methods shared between event-powered classes (like `Map` and `Marker`). Generally, events allow you to execute some function when something happens with an object (e.g. the user clicks on the map, causing the map to fire `'click'` event).\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * map.on('click', function(e) {\r\n * \talert(e.latlng);\r\n * } );\r\n * ```\r\n *\r\n * Leaflet deals with event listeners by reference, so if you want to add a listener and then remove it, define it as a function:\r\n *\r\n * ```js\r\n * function onClick(e) { ... }\r\n *\r\n * map.on('click', onClick);\r\n * map.off('click', onClick);\r\n * ```\r\n */\r\n\r\nexport var Evented = Class.extend({\r\n\r\n\t/* @method on(type: String, fn: Function, context?: Object): this\r\n\t * Adds a listener function (`fn`) to a particular event type of the object. You can optionally specify the context of the listener (object the this keyword will point to). You can also pass several space-separated types (e.g. `'click dblclick'`).\r\n\t *\r\n\t * @alternative\r\n\t * @method on(eventMap: Object): this\r\n\t * Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n\t */\r\n\ton: function (types, fn, context) {\r\n\r\n\t\t// types can be a map of types/handlers\r\n\t\tif (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\t// we don't process space-separated events here for performance;\r\n\t\t\t\t// it's a hot path since Layer uses the on(obj) syntax\r\n\t\t\t\tthis._on(type, types[type], fn);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// types can be a string of space-separated words\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tthis._on(types[i], fn, context);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/* @method off(type: String, fn?: Function, context?: Object): this\r\n\t * Removes a previously added listener function. If no function is specified, it will remove all the listeners of that particular event from the object. Note that if you passed a custom context to `on`, you must pass the same context to `off` in order to remove the listener.\r\n\t *\r\n\t * @alternative\r\n\t * @method off(eventMap: Object): this\r\n\t * Removes a set of type/listener pairs.\r\n\t *\r\n\t * @alternative\r\n\t * @method off: this\r\n\t * Removes all listeners to all events on the object.\r\n\t */\r\n\toff: function (types, fn, context) {\r\n\r\n\t\tif (!types) {\r\n\t\t\t// clear all listeners if called without arguments\r\n\t\t\tdelete this._events;\r\n\r\n\t\t} else if (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\tthis._off(type, types[type], fn);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tthis._off(types[i], fn, context);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// attach listener (without syntactic sugar now)\r\n\t_on: function (type, fn, context) {\r\n\t\tthis._events = this._events || {};\r\n\r\n\t\t/* get/init listeners for type */\r\n\t\tvar typeListeners = this._events[type];\r\n\t\tif (!typeListeners) {\r\n\t\t\ttypeListeners = [];\r\n\t\t\tthis._events[type] = typeListeners;\r\n\t\t}\r\n\r\n\t\tif (context === this) {\r\n\t\t\t// Less memory footprint.\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\t\tvar newListener = {fn: fn, ctx: context},\r\n\t\t    listeners = typeListeners;\r\n\r\n\t\t// check if fn already there\r\n\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\tif (listeners[i].fn === fn && listeners[i].ctx === context) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlisteners.push(newListener);\r\n\t},\r\n\r\n\t_off: function (type, fn, context) {\r\n\t\tvar listeners,\r\n\t\t    i,\r\n\t\t    len;\r\n\r\n\t\tif (!this._events) { return; }\r\n\r\n\t\tlisteners = this._events[type];\r\n\r\n\t\tif (!listeners) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!fn) {\r\n\t\t\t// Set all removed listeners to noop so they are not called if remove happens in fire\r\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\tlisteners[i].fn = Util.falseFn;\r\n\t\t\t}\r\n\t\t\t// clear all listeners for a type if function isn't specified\r\n\t\t\tdelete this._events[type];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (context === this) {\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\r\n\t\tif (listeners) {\r\n\r\n\t\t\t// find fn and remove it\r\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\tvar l = listeners[i];\r\n\t\t\t\tif (l.ctx !== context) { continue; }\r\n\t\t\t\tif (l.fn === fn) {\r\n\r\n\t\t\t\t\t// set the removed listener to noop so that's not called if remove happens in fire\r\n\t\t\t\t\tl.fn = Util.falseFn;\r\n\r\n\t\t\t\t\tif (this._firingCount) {\r\n\t\t\t\t\t\t/* copy array in case events are being fired */\r\n\t\t\t\t\t\tthis._events[type] = listeners = listeners.slice();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlisteners.splice(i, 1);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// @method fire(type: String, data?: Object, propagate?: Boolean): this\r\n\t// Fires an event of the specified type. You can optionally provide an data\r\n\t// object â€” the first argument of the listener function will contain its\r\n\t// properties. The event can optionally be propagated to event parents.\r\n\tfire: function (type, data, propagate) {\r\n\t\tif (!this.listens(type, propagate)) { return this; }\r\n\r\n\t\tvar event = Util.extend({}, data, {type: type, target: this});\r\n\r\n\t\tif (this._events) {\r\n\t\t\tvar listeners = this._events[type];\r\n\r\n\t\t\tif (listeners) {\r\n\t\t\t\tthis._firingCount = (this._firingCount + 1) || 1;\r\n\t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\t\tvar l = listeners[i];\r\n\t\t\t\t\tl.fn.call(l.ctx || this, event);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._firingCount--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (propagate) {\r\n\t\t\t// propagate the event to parents (set with addEventParent)\r\n\t\t\tthis._propagateEvent(event);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method listens(type: String): Boolean\r\n\t// Returns `true` if a particular event type has any listeners attached to it.\r\n\tlistens: function (type, propagate) {\r\n\t\tvar listeners = this._events && this._events[type];\r\n\t\tif (listeners && listeners.length) { return true; }\r\n\r\n\t\tif (propagate) {\r\n\t\t\t// also check parents for listeners if event propagates\r\n\t\t\tfor (var id in this._eventParents) {\r\n\t\t\t\tif (this._eventParents[id].listens(type, propagate)) { return true; }\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t// @method once(â€¦): this\r\n\t// Behaves as [`on(â€¦)`](#evented-on), except the listener will only get fired once and then removed.\r\n\tonce: function (types, fn, context) {\r\n\r\n\t\tif (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\tthis.once(type, types[type], fn);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar handler = Util.bind(function () {\r\n\t\t\tthis\r\n\t\t\t    .off(types, fn, context)\r\n\t\t\t    .off(types, handler, context);\r\n\t\t}, this);\r\n\r\n\t\t// add a listener that's executed once and removed after that\r\n\t\treturn this\r\n\t\t    .on(types, fn, context)\r\n\t\t    .on(types, handler, context);\r\n\t},\r\n\r\n\t// @method addEventParent(obj: Evented): this\r\n\t// Adds an event parent - an `Evented` that will receive propagated events\r\n\taddEventParent: function (obj) {\r\n\t\tthis._eventParents = this._eventParents || {};\r\n\t\tthis._eventParents[Util.stamp(obj)] = obj;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method removeEventParent(obj: Evented): this\r\n\t// Removes an event parent, so it will stop receiving propagated events\r\n\tremoveEventParent: function (obj) {\r\n\t\tif (this._eventParents) {\r\n\t\t\tdelete this._eventParents[Util.stamp(obj)];\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_propagateEvent: function (e) {\r\n\t\tfor (var id in this._eventParents) {\r\n\t\t\tthis._eventParents[id].fire(e.type, Util.extend({layer: e.target}, e), true);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar proto = Evented.prototype;\r\n\r\n// aliases; we should ditch those eventually\r\n\r\n// @method addEventListener(â€¦): this\r\n// Alias to [`on(â€¦)`](#evented-on)\r\nproto.addEventListener = proto.on;\r\n\r\n// @method removeEventListener(â€¦): this\r\n// Alias to [`off(â€¦)`](#evented-off)\r\n\r\n// @method clearAllEventListeners(â€¦): this\r\n// Alias to [`off()`](#evented-off)\r\nproto.removeEventListener = proto.clearAllEventListeners = proto.off;\r\n\r\n// @method addOneTimeEventListener(â€¦): this\r\n// Alias to [`once(â€¦)`](#evented-once)\r\nproto.addOneTimeEventListener = proto.once;\r\n\r\n// @method fireEvent(â€¦): this\r\n// Alias to [`fire(â€¦)`](#evented-fire)\r\nproto.fireEvent = proto.fire;\r\n\r\n// @method hasEventListeners(â€¦): Boolean\r\n// Alias to [`listens(â€¦)`](#evented-listens)\r\nproto.hasEventListeners = proto.listens;\r\n","\n/*\n * @namespace Browser\n * @aka L.Browser\n *\n * A namespace with static properties for browser/feature detection used by Leaflet internally.\n *\n * @example\n *\n * ```js\n * if (L.Browser.ielt9) {\n *   alert('Upgrade your browser, dude!');\n * }\n * ```\n */\n\nvar style = document.documentElement.style;\n\n// @property ie: Boolean; `true` for all Internet Explorer versions (not Edge).\nexport var ie = 'ActiveXObject' in window;\n\n// @property ielt9: Boolean; `true` for Internet Explorer versions less than 9.\nexport var ielt9 = ie && !document.addEventListener;\n\n// @property edge: Boolean; `true` for the Edge web browser.\nexport var edge = 'msLaunchUri' in navigator && !('documentMode' in document);\n\n// @property webkit: Boolean;\n// `true` for webkit-based browsers like Chrome and Safari (including mobile versions).\nexport var webkit = userAgentContains('webkit');\n\n// @property android: Boolean\n// `true` for any browser running on an Android platform.\nexport var android = userAgentContains('android');\n\n// @property android23: Boolean; `true` for browsers running on Android 2 or Android 3.\nexport var android23 = userAgentContains('android 2') || userAgentContains('android 3');\n\n// @property opera: Boolean; `true` for the Opera browser\nexport var opera = !!window.opera;\n\n// @property chrome: Boolean; `true` for the Chrome browser.\nexport var chrome = userAgentContains('chrome');\n\n// @property gecko: Boolean; `true` for gecko-based browsers like Firefox.\nexport var gecko = userAgentContains('gecko') && !webkit && !opera && !ie;\n\n// @property safari: Boolean; `true` for the Safari browser.\nexport var safari = !chrome && userAgentContains('safari');\n\nexport var phantom = userAgentContains('phantom');\n\n// @property opera12: Boolean\n// `true` for the Opera browser supporting CSS transforms (version 12 or later).\nexport var opera12 = 'OTransition' in style;\n\n// @property win: Boolean; `true` when the browser is running in a Windows platform\nexport var win = navigator.platform.indexOf('Win') === 0;\n\n// @property ie3d: Boolean; `true` for all Internet Explorer versions supporting CSS transforms.\nexport var ie3d = ie && ('transition' in style);\n\n// @property webkit3d: Boolean; `true` for webkit-based browsers supporting CSS transforms.\nexport var webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23;\n\n// @property gecko3d: Boolean; `true` for gecko-based browsers supporting CSS transforms.\nexport var gecko3d = 'MozPerspective' in style;\n\n// @property any3d: Boolean\n// `true` for all browsers supporting CSS transforms.\nexport var any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantom;\n\n// @property mobile: Boolean; `true` for all browsers running in a mobile device.\nexport var mobile = typeof orientation !== 'undefined' || userAgentContains('mobile');\n\n// @property mobileWebkit: Boolean; `true` for all webkit-based browsers in a mobile device.\nexport var mobileWebkit = mobile && webkit;\n\n// @property mobileWebkit3d: Boolean\n// `true` for all webkit-based browsers in a mobile device supporting CSS transforms.\nexport var mobileWebkit3d = mobile && webkit3d;\n\n// @property msPointer: Boolean\n// `true` for browsers implementing the Microsoft touch events model (notably IE10).\nexport var msPointer = !window.PointerEvent && window.MSPointerEvent;\n\n// @property pointer: Boolean\n// `true` for all browsers supporting [pointer events](https://msdn.microsoft.com/en-us/library/dn433244%28v=vs.85%29.aspx).\nexport var pointer = !!(window.PointerEvent || msPointer);\n\n// @property touch: Boolean\n// `true` for all browsers supporting [touch events](https://developer.mozilla.org/docs/Web/API/Touch_events).\n// This does not necessarily mean that the browser is running in a computer with\n// a touchscreen, it only means that the browser is capable of understanding\n// touch events.\nexport var touch = !window.L_NO_TOUCH && (pointer || 'ontouchstart' in window ||\n        (window.DocumentTouch && document instanceof window.DocumentTouch));\n\n// @property mobileOpera: Boolean; `true` for the Opera browser in a mobile device.\nexport var mobileOpera = mobile && opera;\n\n// @property mobileGecko: Boolean\n// `true` for gecko-based browsers running in a mobile device.\nexport var mobileGecko = mobile && gecko;\n\n// @property retina: Boolean\n// `true` for browsers on a high-resolution \"retina\" screen.\nexport var retina = (window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI)) > 1;\n\n\n// @property canvas: Boolean\n// `true` when the browser supports [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).\nexport var canvas = (function () {\n    return !!document.createElement('canvas').getContext;\n}());\n\n// @property svg: Boolean\n// `true` when the browser supports [SVG](https://developer.mozilla.org/docs/Web/SVG).\n// export var svg = !!(document.createElementNS && svgCreate('svg').createSVGRect);\nexport var svg = true;\n\n// @property vml: Boolean\n// `true` if the browser supports [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language).\nexport var vml = !svg && (function () {\n    try {\n        var div = document.createElement('div');\n        div.innerHTML = '<v:shape adj=\"1\"/>';\n\n        var shape = div.firstChild;\n        shape.style.behavior = 'url(#default#VML)';\n\n        return shape && (typeof shape.adj === 'object');\n\n    } catch (e) {\n        return false;\n    }\n}());\n\nexport var columnCount = ( 'columnCount' in style );\nexport var classList = ( document.documentElement.classList !== undefined );\n\nfunction userAgentContains(str) {\n    return navigator.userAgent.toLowerCase().indexOf(str) >= 0;\n}\n","import {isArray, formatNum} from '../core/Util';\r\n\r\n/*\r\n * @class Point\r\n * @aka L.Point\r\n *\r\n * Represents a point with `x` and `y` coordinates in pixels.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var point = L.point(200, 300);\r\n * ```\r\n *\r\n * All Leaflet methods and options that accept `Point` objects also accept them in a simple Array form (unless noted otherwise), so these lines are equivalent:\r\n *\r\n * ```js\r\n * map.panBy([200, 300]);\r\n * map.panBy(L.point(200, 300));\r\n * ```\r\n */\r\n\r\nexport function Point(x, y, round) {\r\n\t// @property x: Number; The `x` coordinate of the point\r\n\tthis.x = (round ? Math.round(x) : x);\r\n\t// @property y: Number; The `y` coordinate of the point\r\n\tthis.y = (round ? Math.round(y) : y);\r\n}\r\n\r\nPoint.prototype = {\r\n\r\n\t// @method clone(): Point\r\n\t// Returns a copy of the current point.\r\n\tclone: function () {\r\n\t\treturn new Point(this.x, this.y);\r\n\t},\r\n\r\n\t// @method add(otherPoint: Point): Point\r\n\t// Returns the result of addition of the current and the given points.\r\n\tadd: function (point) {\r\n\t\t// non-destructive, returns a new point\r\n\t\treturn this.clone()._add(toPoint(point));\r\n\t},\r\n\r\n\t_add: function (point) {\r\n\t\t// destructive, used directly for performance in situations where it's safe to modify existing point\r\n\t\tthis.x += point.x;\r\n\t\tthis.y += point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method subtract(otherPoint: Point): Point\r\n\t// Returns the result of subtraction of the given point from the current.\r\n\tsubtract: function (point) {\r\n\t\treturn this.clone()._subtract(toPoint(point));\r\n\t},\r\n\r\n\t_subtract: function (point) {\r\n\t\tthis.x -= point.x;\r\n\t\tthis.y -= point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method divideBy(num: Number): Point\r\n\t// Returns the result of division of the current point by the given number.\r\n\tdivideBy: function (num) {\r\n\t\treturn this.clone()._divideBy(num);\r\n\t},\r\n\r\n\t_divideBy: function (num) {\r\n\t\tthis.x /= num;\r\n\t\tthis.y /= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method multiplyBy(num: Number): Point\r\n\t// Returns the result of multiplication of the current point by the given number.\r\n\tmultiplyBy: function (num) {\r\n\t\treturn this.clone()._multiplyBy(num);\r\n\t},\r\n\r\n\t_multiplyBy: function (num) {\r\n\t\tthis.x *= num;\r\n\t\tthis.y *= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method scaleBy(scale: Point): Point\r\n\t// Multiply each coordinate of the current point by each coordinate of\r\n\t// `scale`. In linear algebra terms, multiply the point by the\r\n\t// [scaling matrix](https://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)\r\n\t// defined by `scale`.\r\n\tscaleBy: function (point) {\r\n\t\treturn new Point(this.x * point.x, this.y * point.y);\r\n\t},\r\n\r\n\t// @method unscaleBy(scale: Point): Point\r\n\t// Inverse of `scaleBy`. Divide each coordinate of the current point by\r\n\t// each coordinate of `scale`.\r\n\tunscaleBy: function (point) {\r\n\t\treturn new Point(this.x / point.x, this.y / point.y);\r\n\t},\r\n\r\n\t// @method round(): Point\r\n\t// Returns a copy of the current point with rounded coordinates.\r\n\tround: function () {\r\n\t\treturn this.clone()._round();\r\n\t},\r\n\r\n\t_round: function () {\r\n\t\tthis.x = Math.round(this.x);\r\n\t\tthis.y = Math.round(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method floor(): Point\r\n\t// Returns a copy of the current point with floored coordinates (rounded down).\r\n\tfloor: function () {\r\n\t\treturn this.clone()._floor();\r\n\t},\r\n\r\n\t_floor: function () {\r\n\t\tthis.x = Math.floor(this.x);\r\n\t\tthis.y = Math.floor(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method ceil(): Point\r\n\t// Returns a copy of the current point with ceiled coordinates (rounded up).\r\n\tceil: function () {\r\n\t\treturn this.clone()._ceil();\r\n\t},\r\n\r\n\t_ceil: function () {\r\n\t\tthis.x = Math.ceil(this.x);\r\n\t\tthis.y = Math.ceil(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method distanceTo(otherPoint: Point): Number\r\n\t// Returns the cartesian distance between the current and the given points.\r\n\tdistanceTo: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\tvar x = point.x - this.x,\r\n\t\t    y = point.y - this.y;\r\n\r\n\t\treturn Math.sqrt(x * x + y * y);\r\n\t},\r\n\r\n\t// @method equals(otherPoint: Point): Boolean\r\n\t// Returns `true` if the given point has the same coordinates.\r\n\tequals: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\treturn point.x === this.x &&\r\n\t\t       point.y === this.y;\r\n\t},\r\n\r\n\t// @method contains(otherPoint: Point): Boolean\r\n\t// Returns `true` if both coordinates of the given point are less than the corresponding current point coordinates (in absolute values).\r\n\tcontains: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\r\n\t\t       Math.abs(point.y) <= Math.abs(this.y);\r\n\t},\r\n\r\n\t// @method toString(): String\r\n\t// Returns a string representation of the point for debugging purposes.\r\n\ttoString: function () {\r\n\t\treturn 'Point(' +\r\n\t\t        formatNum(this.x) + ', ' +\r\n\t\t        formatNum(this.y) + ')';\r\n\t}\r\n};\r\n\r\n// @factory L.point(x: Number, y: Number, round?: Boolean)\r\n// Creates a Point object with the given `x` and `y` coordinates. If optional `round` is set to true, rounds the `x` and `y` values.\r\n\r\n// @alternative\r\n// @factory L.point(coords: Number[])\r\n// Expects an array of the form `[x, y]` instead.\r\n\r\n// @alternative\r\n// @factory L.point(coords: Object)\r\n// Expects a plain object of the form `{x: Number, y: Number}` instead.\r\nexport function toPoint(x, y, round) {\r\n\tif (x instanceof Point) {\r\n\t\treturn x;\r\n\t}\r\n\tif (isArray(x)) {\r\n\t\treturn new Point(x[0], x[1]);\r\n\t}\r\n\tif (x === undefined || x === null) {\r\n\t\treturn x;\r\n\t}\r\n\tif (typeof x === 'object' && 'x' in x && 'y' in x) {\r\n\t\treturn new Point(x.x, x.y);\r\n\t}\r\n\treturn new Point(x, y, round);\r\n}\r\n","import * as DomEvent from './DomEvent';\nimport * as Util from '../core/Util';\nimport * as Browser from '../core/Browser';\n\n/*\n * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.\n */\n\n\nvar POINTER_DOWN =   Browser.msPointer ? 'MSPointerDown'   : 'pointerdown',\n    POINTER_MOVE =   Browser.msPointer ? 'MSPointerMove'   : 'pointermove',\n    POINTER_UP =     Browser.msPointer ? 'MSPointerUp'     : 'pointerup',\n    POINTER_CANCEL = Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',\n    TAG_WHITE_LIST = ['INPUT', 'SELECT', 'OPTION'],\n\n    _pointers = {},\n    _pointerDocListener = false;\n\n// DomEvent.DoubleTap needs to know about this\nexport var _pointersCount = 0;\n\n// Provides a touch events wrapper for (ms)pointer events.\n// ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890\n\nexport function addPointerListener(obj, type, handler, id) {\n\tif (type === 'touchstart') {\n\t\t_addPointerStart(obj, handler, id);\n\n\t} else if (type === 'touchmove') {\n\t\t_addPointerMove(obj, handler, id);\n\n\t} else if (type === 'touchend') {\n\t\t_addPointerEnd(obj, handler, id);\n\t}\n\n\treturn this;\n}\n\nexport function removePointerListener(obj, type, id) {\n\tvar handler = obj['_leaflet_' + type + id];\n\n\tif (type === 'touchstart') {\n\t\tobj.removeEventListener(POINTER_DOWN, handler, false);\n\n\t} else if (type === 'touchmove') {\n\t\tobj.removeEventListener(POINTER_MOVE, handler, false);\n\n\t} else if (type === 'touchend') {\n\t\tobj.removeEventListener(POINTER_UP, handler, false);\n\t\tobj.removeEventListener(POINTER_CANCEL, handler, false);\n\t}\n\n\treturn this;\n}\n\nfunction _addPointerStart(obj, handler, id) {\n\tvar onDown = Util.bind(function (e) {\n\t\tif (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {\n\t\t\t// In IE11, some touch events needs to fire for form controls, or\n\t\t\t// the controls will stop working. We keep a whitelist of tag names that\n\t\t\t// need these events. For other target tags, we prevent default on the event.\n\t\t\tif (TAG_WHITE_LIST.indexOf(e.target.tagName) < 0) {\n\t\t\t\tDomEvent.preventDefault(e);\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t_handlePointer(e, handler);\n\t});\n\n\tobj['_leaflet_touchstart' + id] = onDown;\n\tobj.addEventListener(POINTER_DOWN, onDown, false);\n\n\t// need to keep track of what pointers and how many are active to provide e.touches emulation\n\tif (!_pointerDocListener) {\n\t\t// we listen documentElement as any drags that end by moving the touch off the screen get fired there\n\t\tdocument.documentElement.addEventListener(POINTER_DOWN, _globalPointerDown, true);\n\t\tdocument.documentElement.addEventListener(POINTER_MOVE, _globalPointerMove, true);\n\t\tdocument.documentElement.addEventListener(POINTER_UP, _globalPointerUp, true);\n\t\tdocument.documentElement.addEventListener(POINTER_CANCEL, _globalPointerUp, true);\n\n\t\t_pointerDocListener = true;\n\t}\n}\n\nfunction _globalPointerDown(e) {\n\t_pointers[e.pointerId] = e;\n\t_pointersCount++;\n}\n\nfunction _globalPointerMove(e) {\n\tif (_pointers[e.pointerId]) {\n\t\t_pointers[e.pointerId] = e;\n\t}\n}\n\nfunction _globalPointerUp(e) {\n\tdelete _pointers[e.pointerId];\n\t_pointersCount--;\n}\n\nfunction _handlePointer(e, handler) {\n\te.touches = [];\n\tfor (var i in _pointers) {\n\t\te.touches.push(_pointers[i]);\n\t}\n\te.changedTouches = [e];\n\n\thandler(e);\n}\n\nfunction _addPointerMove(obj, handler, id) {\n\tvar onMove = function (e) {\n\t\t// don't fire touch moves when mouse isn't down\n\t\tif ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }\n\n\t\t_handlePointer(e, handler);\n\t};\n\n\tobj['_leaflet_touchmove' + id] = onMove;\n\tobj.addEventListener(POINTER_MOVE, onMove, false);\n}\n\nfunction _addPointerEnd(obj, handler, id) {\n\tvar onUp = function (e) {\n\t\t_handlePointer(e, handler);\n\t};\n\n\tobj['_leaflet_touchend' + id] = onUp;\n\tobj.addEventListener(POINTER_UP, onUp, false);\n\tobj.addEventListener(POINTER_CANCEL, onUp, false);\n}\n\n","import * as Browser from '../core/Browser';\r\nimport {_pointersCount} from './DomEvent.Pointer';\r\n\r\n/*\r\n * Extends the event handling code with double tap support for mobile browsers.\r\n */\r\n\r\nvar _touchstart = Browser.msPointer ? 'MSPointerDown' : Browser.pointer ? 'pointerdown' : 'touchstart',\r\n    _touchend = Browser.msPointer ? 'MSPointerUp' : Browser.pointer ? 'pointerup' : 'touchend',\r\n    _pre = '_leaflet_';\r\n\r\n// inspired by Zepto touch code by Thomas Fuchs\r\nexport function addDoubleTapListener(obj, handler, id) {\r\n\tvar last, touch,\r\n\t    doubleTap = false,\r\n\t    delay = 250;\r\n\r\n\tfunction onTouchStart(e) {\r\n\t\tvar count;\r\n\r\n\t\tif (Browser.pointer) {\r\n\t\t\tif ((!Browser.edge) || e.pointerType === 'mouse') { return; }\r\n\t\t\tcount = _pointersCount;\r\n\t\t} else {\r\n\t\t\tcount = e.touches.length;\r\n\t\t}\r\n\r\n\t\tif (count > 1) { return; }\r\n\r\n\t\tvar now = Date.now(),\r\n\t\t    delta = now - (last || now);\r\n\r\n\t\ttouch = e.touches ? e.touches[0] : e;\r\n\t\tdoubleTap = (delta > 0 && delta <= delay);\r\n\t\tlast = now;\r\n\t}\r\n\r\n\tfunction onTouchEnd(e) {\r\n\t\tif (doubleTap && !touch.cancelBubble) {\r\n\t\t\tif (Browser.pointer) {\r\n\t\t\t\tif ((!Browser.edge) || e.pointerType === 'mouse') { return; }\r\n\t\t\t\t// work around .type being readonly with MSPointer* events\r\n\t\t\t\tvar newTouch = {},\r\n\t\t\t\t    prop, i;\r\n\r\n\t\t\t\tfor (i in touch) {\r\n\t\t\t\t\tprop = touch[i];\r\n\t\t\t\t\tnewTouch[i] = prop && prop.bind ? prop.bind(touch) : prop;\r\n\t\t\t\t}\r\n\t\t\t\ttouch = newTouch;\r\n\t\t\t}\r\n\t\t\ttouch.type = 'dblclick';\r\n\t\t\thandler(touch);\r\n\t\t\tlast = null;\r\n\t\t}\r\n\t}\r\n\r\n\tobj[_pre + _touchstart + id] = onTouchStart;\r\n\tobj[_pre + _touchend + id] = onTouchEnd;\r\n\tobj[_pre + 'dblclick' + id] = handler;\r\n\r\n\tobj.addEventListener(_touchstart, onTouchStart, false);\r\n\tobj.addEventListener(_touchend, onTouchEnd, false);\r\n\r\n\t// On some platforms (notably, chrome<55 on win10 + touchscreen + mouse),\r\n\t// the browser doesn't fire touchend/pointerup events but does fire\r\n\t// native dblclicks. See #4127.\r\n\t// Edge 14 also fires native dblclicks, but only for pointerType mouse, see #5180.\r\n\tobj.addEventListener('dblclick', handler, false);\r\n\r\n\treturn this;\r\n}\r\n\r\nexport function removeDoubleTapListener(obj, id) {\r\n\tvar touchstart = obj[_pre + _touchstart + id],\r\n\t    touchend = obj[_pre + _touchend + id],\r\n\t    dblclick = obj[_pre + 'dblclick' + id];\r\n\r\n\tobj.removeEventListener(_touchstart, touchstart, false);\r\n\tobj.removeEventListener(_touchend, touchend, false);\r\n\tif (!Browser.edge) {\r\n\t\tobj.removeEventListener('dblclick', dblclick, false);\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n","import {Point} from '../geometry/Point';\r\nimport * as Util from '../core/Util';\r\nimport * as Browser from '../core/Browser';\r\nimport {addPointerListener, removePointerListener} from './DomEvent.Pointer';\r\nimport {addDoubleTapListener, removeDoubleTapListener} from './DomEvent.DoubleTap';\r\n\r\n/*\r\n * @namespace DomEvent\r\n * Utility functions to work with the [DOM events](https://developer.mozilla.org/docs/Web/API/Event), used by Leaflet internally.\r\n */\r\n\r\n// Inspired by John Resig, Dean Edwards and YUI addEvent implementations.\r\n\r\n// @function on(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n// Adds a listener function (`fn`) to a particular DOM event type of the\r\n// element `el`. You can optionally specify the context of the listener\r\n// (object the `this` keyword will point to). You can also pass several\r\n// space-separated types (e.g. `'click dblclick'`).\r\n\r\n// @alternative\r\n// @function on(el: HTMLElement, eventMap: Object, context?: Object): this\r\n// Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\nexport function on(obj, types, fn, context) {\r\n\r\n\tif (typeof types === 'object') {\r\n\t\tfor (var type in types) {\r\n\t\t\taddOne(obj, type, types[type], fn);\r\n\t\t}\r\n\t} else {\r\n\t\ttypes = Util.splitWords(types);\r\n\r\n\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\taddOne(obj, types[i], fn, context);\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n\r\nvar eventsKey = '_leaflet_events';\r\n\r\n// @function off(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n// Removes a previously added listener function. If no function is specified,\r\n// it will remove all the listeners of that particular DOM event from the element.\r\n// Note that if you passed a custom context to on, you must pass the same\r\n// context to `off` in order to remove the listener.\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement, eventMap: Object, context?: Object): this\r\n// Removes a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement): this\r\n// Removes all known event listeners\r\nexport function off(obj, types, fn, context) {\r\n\r\n\tif (typeof types === 'object') {\r\n\t\tfor (var type in types) {\r\n\t\t\tremoveOne(obj, type, types[type], fn);\r\n\t\t}\r\n\t} else if (types) {\r\n\t\ttypes = Util.splitWords(types);\r\n\r\n\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\tremoveOne(obj, types[i], fn, context);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (var j in obj[eventsKey]) {\r\n\t\t\tremoveOne(obj, j, obj[eventsKey][j]);\r\n\t\t}\r\n\t\tdelete obj[eventsKey];\r\n\t}\r\n}\r\n\r\nfunction addOne(obj, type, fn, context) {\r\n\tvar id = type + Util.stamp(fn) + (context ? '_' + Util.stamp(context) : '');\r\n\r\n\tif (obj[eventsKey] && obj[eventsKey][id]) { return this; }\r\n\r\n\tvar handler = function (e) {\r\n\t\treturn fn.call(context || obj, e || window.event);\r\n\t};\r\n\r\n\tvar originalHandler = handler;\r\n\r\n\tif (Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\t// Needs DomEvent.Pointer.js\r\n\t\taddPointerListener(obj, type, handler, id);\r\n\r\n\t} else if (Browser.touch && (type === 'dblclick') && addDoubleTapListener &&\r\n\t           !(Browser.pointer && Browser.chrome)) {\r\n\t\t// Chrome >55 does not need the synthetic dblclicks from addDoubleTapListener\r\n\t\t// See #5180\r\n\t\taddDoubleTapListener(obj, handler, id);\r\n\r\n\t} else if ('addEventListener' in obj) {\r\n\r\n\t\tif (type === 'mousewheel') {\r\n\t\t\tobj.addEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);\r\n\r\n\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\r\n\t\t\thandler = function (e) {\r\n\t\t\t\te = e || window.event;\r\n\t\t\t\tif (isExternalTarget(obj, e)) {\r\n\t\t\t\t\toriginalHandler(e);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tobj.addEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);\r\n\r\n\t\t} else {\r\n\t\t\tif (type === 'click' && Browser.android) {\r\n\t\t\t\thandler = function (e) {\r\n\t\t\t\t\tfilterClick(e, originalHandler);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tobj.addEventListener(type, handler, false);\r\n\t\t}\r\n\r\n\t} else if ('attachEvent' in obj) {\r\n\t\tobj.attachEvent('on' + type, handler);\r\n\t}\r\n\r\n\tobj[eventsKey] = obj[eventsKey] || {};\r\n\tobj[eventsKey][id] = handler;\r\n}\r\n\r\nfunction removeOne(obj, type, fn, context) {\r\n\r\n\tvar id = type + Util.stamp(fn) + (context ? '_' + Util.stamp(context) : ''),\r\n\t    handler = obj[eventsKey] && obj[eventsKey][id];\r\n\r\n\tif (!handler) { return this; }\r\n\r\n\tif (Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\tremovePointerListener(obj, type, id);\r\n\r\n\t} else if (Browser.touch && (type === 'dblclick') && removeDoubleTapListener) {\r\n\t\tremoveDoubleTapListener(obj, id);\r\n\r\n\t} else if ('removeEventListener' in obj) {\r\n\r\n\t\tif (type === 'mousewheel') {\r\n\t\t\tobj.removeEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);\r\n\r\n\t\t} else {\r\n\t\t\tobj.removeEventListener(\r\n\t\t\t\ttype === 'mouseenter' ? 'mouseover' :\r\n\t\t\t\ttype === 'mouseleave' ? 'mouseout' : type, handler, false);\r\n\t\t}\r\n\r\n\t} else if ('detachEvent' in obj) {\r\n\t\tobj.detachEvent('on' + type, handler);\r\n\t}\r\n\r\n\tobj[eventsKey][id] = null;\r\n}\r\n\r\n// @function stopPropagation(ev: DOMEvent): this\r\n// Stop the given event from propagation to parent elements. Used inside the listener functions:\r\n// ```js\r\n// L.DomEvent.on(div, 'click', function (ev) {\r\n// \tL.DomEvent.stopPropagation(ev);\r\n// });\r\n// ```\r\nexport function stopPropagation(e) {\r\n\r\n\tif (e.stopPropagation) {\r\n\t\te.stopPropagation();\r\n\t} else if (e.originalEvent) {  // In case of Leaflet event.\r\n\t\te.originalEvent._stopped = true;\r\n\t} else {\r\n\t\te.cancelBubble = true;\r\n\t}\r\n\tskipped(e);\r\n\r\n\treturn this;\r\n}\r\n\r\n// @function disableScrollPropagation(el: HTMLElement): this\r\n// Adds `stopPropagation` to the element's `'mousewheel'` events (plus browser variants).\r\nexport function disableScrollPropagation(el) {\r\n\treturn addOne(el, 'mousewheel', stopPropagation);\r\n}\r\n\r\n// @function disableClickPropagation(el: HTMLElement): this\r\n// Adds `stopPropagation` to the element's `'click'`, `'doubleclick'`,\r\n// `'mousedown'` and `'touchstart'` events (plus browser variants).\r\nexport function disableClickPropagation(el) {\r\n\ton(el, 'mousedown touchstart dblclick', stopPropagation);\r\n\taddOne(el, 'click', fakeStop);\r\n\treturn this;\r\n}\r\n\r\n// @function preventDefault(ev: DOMEvent): this\r\n// Prevents the default action of the DOM Event `ev` from happening (such as\r\n// following a link in the href of the a element, or doing a POST request\r\n// with page reload when a `<form>` is submitted).\r\n// Use it inside listener functions.\r\nexport function preventDefault(e) {\r\n\tif (e.preventDefault) {\r\n\t\te.preventDefault();\r\n\t} else {\r\n\t\te.returnValue = false;\r\n\t}\r\n\treturn this;\r\n}\r\n\r\n// @function stop(ev): this\r\n// Does `stopPropagation` and `preventDefault` at the same time.\r\nexport function stop(e) {\r\n\tpreventDefault(e);\r\n\tstopPropagation(e);\r\n\treturn this;\r\n}\r\n\r\n// @function getMousePosition(ev: DOMEvent, container?: HTMLElement): Point\r\n// Gets normalized mouse position from a DOM event relative to the\r\n// `container` or to the whole page if not specified.\r\nexport function getMousePosition(e, container) {\r\n\tif (!container) {\r\n\t\treturn new Point(e.clientX, e.clientY);\r\n\t}\r\n\r\n\tvar rect = container.getBoundingClientRect();\r\n\r\n\treturn new Point(\r\n\t\te.clientX - rect.left - container.clientLeft,\r\n\t\te.clientY - rect.top - container.clientTop);\r\n}\r\n\r\n// Chrome on Win scrolls double the pixels as in other platforms (see #4538),\r\n// and Firefox scrolls device pixels, not CSS pixels\r\nvar wheelPxFactor =\r\n\t(Browser.win && Browser.chrome) ? 2 :\r\n\tBrowser.gecko ? window.devicePixelRatio : 1;\r\n\r\n// @function getWheelDelta(ev: DOMEvent): Number\r\n// Gets normalized wheel delta from a mousewheel DOM event, in vertical\r\n// pixels scrolled (negative if scrolling down).\r\n// Events from pointing devices without precise scrolling are mapped to\r\n// a best guess of 60 pixels.\r\nexport function getWheelDelta(e) {\r\n\treturn (Browser.edge) ? e.wheelDeltaY / 2 : // Don't trust window-geometry-based delta\r\n\t       (e.deltaY && e.deltaMode === 0) ? -e.deltaY / wheelPxFactor : // Pixels\r\n\t       (e.deltaY && e.deltaMode === 1) ? -e.deltaY * 20 : // Lines\r\n\t       (e.deltaY && e.deltaMode === 2) ? -e.deltaY * 60 : // Pages\r\n\t       (e.deltaX || e.deltaZ) ? 0 :\t// Skip horizontal/depth wheel events\r\n\t       e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : // Legacy IE pixels\r\n\t       (e.detail && Math.abs(e.detail) < 32765) ? -e.detail * 20 : // Legacy Moz lines\r\n\t       e.detail ? e.detail / -32765 * 60 : // Legacy Moz pages\r\n\t       0;\r\n}\r\n\r\nvar skipEvents = {};\r\n\r\nexport function fakeStop(e) {\r\n\t// fakes stopPropagation by setting a special event flag, checked/reset with skipped(e)\r\n\tskipEvents[e.type] = true;\r\n}\r\n\r\nexport function skipped(e) {\r\n\tvar events = skipEvents[e.type];\r\n\t// reset when checking, as it's only used in map container and propagates outside of the map\r\n\tskipEvents[e.type] = false;\r\n\treturn events;\r\n}\r\n\r\n// check if element really left/entered the event target (for mouseenter/mouseleave)\r\nexport function isExternalTarget(el, e) {\r\n\r\n\tvar related = e.relatedTarget;\r\n\r\n\tif (!related) { return true; }\r\n\r\n\ttry {\r\n\t\twhile (related && (related !== el)) {\r\n\t\t\trelated = related.parentNode;\r\n\t\t}\r\n\t} catch (err) {\r\n\t\treturn false;\r\n\t}\r\n\treturn (related !== el);\r\n}\r\n\r\nvar lastClick;\r\n\r\n// this is a horrible workaround for a bug in Android where a single touch triggers two click events\r\nfunction filterClick(e, handler) {\r\n\tvar timeStamp = (e.timeStamp || (e.originalEvent && e.originalEvent.timeStamp)),\r\n\t    elapsed = lastClick && (timeStamp - lastClick);\r\n\r\n\t// are they closer together than 500ms yet more than 100ms?\r\n\t// Android typically triggers them ~300ms apart while multiple listeners\r\n\t// on the same event should be triggered far faster;\r\n\t// or check if click is simulated on the element, and if it is, reject any non-simulated events\r\n\r\n\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {\r\n\t\tstop(e);\r\n\t\treturn;\r\n\t}\r\n\tlastClick = timeStamp;\r\n\r\n\thandler(e);\r\n}\r\n\r\n// @function addListener(â€¦): this\r\n// Alias to [`L.DomEvent.on`](#domevent-on)\r\nexport {on as addListener};\r\n\r\n// @function removeListener(â€¦): this\r\n// Alias to [`L.DomEvent.off`](#domevent-off)\r\nexport {off as removeListener};\r\n","import * as DomEvent from './DomEvent';\nimport * as Util from '../core/Util';\nimport {Point} from '../geometry/Point';\nimport * as Browser from '../core/Browser';\n\n/*\n * @namespace DomUtil\n *\n * Utility functions to work with the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)\n * tree, used by Leaflet internally.\n *\n * Most functions expecting or returning a `HTMLElement` also work for\n * SVG elements. The only difference is that classes refer to CSS classes\n * in HTML and SVG classes in SVG.\n */\n\n if (!Element.prototype.matches) {\n    var ep = Element.prototype;\n \n    if (ep.webkitMatchesSelector) // Chrome <34, SF<7.1, iOS<8\n      ep.matches = ep.webkitMatchesSelector;\n \n    if (ep.msMatchesSelector) // IE9/10/11 & Edge\n      ep.matches = ep.msMatchesSelector;\n \n    if (ep.mozMatchesSelector) // FF<34\n      ep.matches = ep.mozMatchesSelector;\n }\n\n// @property TRANSFORM: String\n// Vendor-prefixed fransform style name (e.g. `'webkitTransform'` for WebKit).\nexport var TRANSFORM = testProp(\n    ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\n\n// webkitTransition comes first because some browser versions that drop vendor prefix don't do\n// the same for the transitionend event, in particular the Android 4.1 stock browser\n\n// @property TRANSITION: String\n// Vendor-prefixed transform style name.\nexport var TRANSITION = testProp(\n    ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\n\nexport var TRANSITION_END =\n    TRANSITION === 'webkitTransition' || TRANSITION === 'OTransition' ? TRANSITION + 'End' : 'transitionend';\n\n\n// @function get(id: String|HTMLElement): HTMLElement\n// Returns an element given its DOM id, or returns the element itself\n// if it was passed directly.\nexport function get(id) {\n    return typeof id === 'string' ? document.getElementById(id) : id;\n}\n\n// @function getStyle(el: HTMLElement, styleAttrib: String): String\n// Returns the value for a certain style attribute on an element,\n// including computed values or values set through CSS.\nexport function getStyle(el, style) {\n    var value = el.style[style] || (el.currentStyle && el.currentStyle[style]);\n\n    if ((!value || value === 'auto') && document.defaultView) {\n        var css = document.defaultView.getComputedStyle(el, null);\n        value = css ? css[style] : null;\n    }\n    return value === 'auto' ? null : value;\n}\n\n// @function create(tagName: String, className?: String, container?: HTMLElement): HTMLElement\n// Creates an HTML element with `tagName`, sets its class to `className`, and optionally appends it to `container` element.\nexport function create(tagName, className, container) {\n    var el = document.createElement(tagName);\n    el.className = className || '';\n\n    if (container) {\n        container.appendChild(el);\n    }\n    return el;\n}\n\n// @function remove(el: HTMLElement)\n// Removes `el` from its parent element\nexport function remove(el) {\n    var parent = el.parentNode;\n    if (parent) {\n        parent.removeChild(el);\n    }\n}\n\n// @function empty(el: HTMLElement)\n// Removes all of `el`'s children elements from `el`\nexport function empty(el) {\n    while (el.firstChild) {\n        el.removeChild(el.firstChild);\n    }\n}\n\n// @function toFront(el: HTMLElement)\n// Makes `el` the last child of its parent, so it renders in front of the other children.\nexport function toFront(el) {\n    el.parentNode.appendChild(el);\n}\n\n// @function toBack(el: HTMLElement)\n// Makes `el` the first child of its parent, so it renders behind the other children.\nexport function toBack(el) {\n    var parent = el.parentNode;\n    parent.insertBefore(el, parent.firstChild);\n}\n\n// @function hasClass(el: HTMLElement, name: String): Boolean\n// Returns `true` if the element's class attribute contains `name`.\nexport function hasClass(el, name) {\n    if (el.classList !== undefined) {\n        return el.classList.contains(name);\n    }\n    var className = getClass(el);\n    return className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\n}\n\n// @function addClass(el: HTMLElement, name: String)\n// Adds `name` to the element's class attribute.\nexport function addClass(el, name) {\n    if (el.classList !== undefined) {\n        var classes = Util.splitWords(name);\n        for (var i = 0, len = classes.length; i < len; i++) {\n            el.classList.add(classes[i]);\n        }\n    } else if (!hasClass(el, name)) {\n        var className = getClass(el);\n        setClass(el, (className ? className + ' ' : '') + name);\n    }\n}\n\n// @function removeClass(el: HTMLElement, name: String)\n// Removes `name` from the element's class attribute.\nexport function removeClass(el, name) {\n    if (el.classList !== undefined) {\n        el.classList.remove(name);\n    } else {\n        setClass(el, Util.trim((' ' + getClass(el) + ' ').replace(' ' + name + ' ', ' ')));\n    }\n}\n\n// @function setClass(el: HTMLElement, name: String)\n// Sets the element's class.\nexport function setClass(el, name) {\n    if (el.className.baseVal === undefined) {\n        el.className = name;\n    } else {\n        // in case of SVG element\n        el.className.baseVal = name;\n    }\n}\n\n// @function getClass(el: HTMLElement): String\n// Returns the element's class.\nexport function getClass(el) {\n    return el.className.baseVal === undefined ? el.className : el.className.baseVal;\n}\n\n// @function setOpacity(el: HTMLElement, opacity: Number)\n// Set the opacity of an element (including old IE support).\n// `opacity` must be a number from `0` to `1`.\nexport function setOpacity(el, value) {\n    if ('opacity' in el.style) {\n        el.style.opacity = value;\n    } else if ('filter' in el.style) {\n        _setOpacityIE(el, value);\n    }\n}\n\nfunction _setOpacityIE(el, value) {\n    var filter = false,\n        filterName = 'DXImageTransform.Microsoft.Alpha';\n\n    // filters collection throws an error if we try to retrieve a filter that doesn't exist\n    try {\n        filter = el.filters.item(filterName);\n    } catch (e) {\n        // don't set opacity to 1 if we haven't already set an opacity,\n        // it isn't needed and breaks transparent pngs.\n        if (value === 1) { return; }\n    }\n\n    value = Math.round(value * 100);\n\n    if (filter) {\n        filter.Enabled = (value !== 100);\n        filter.Opacity = value;\n    } else {\n        el.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';\n    }\n}\n\n// @function testProp(props: String[]): String|false\n// Goes through the array of style names and returns the first name\n// that is a valid style name for an element. If no such name is found,\n// it returns false. Useful for vendor-prefixed styles like `transform`.\nexport function testProp(props) {\n    var style = document.documentElement.style;\n\n    for (var i = 0; i < props.length; i++) {\n        if (props[i] in style) {\n            return props[i];\n        }\n    }\n    return false;\n}\n\nexport function isPropertySupported(prop) {\n    var style = document.documentElement.style;\n    return prop in style;\n}\n\n// @function setTransform(el: HTMLElement, offset: Point, scale?: Number)\n// Resets the 3D CSS transform of `el` so it is translated by `offset` pixels\n// and optionally scaled by `scale`. Does not have an effect if the\n// browser doesn't support 3D CSS transforms.\nexport function setTransform(el, offset, scale) {\n    var pos = offset || new Point(0, 0);\n\n    el.style[TRANSFORM] =\n        (Browser.ie3d ?\n            'translate(' + pos.x + 'px,' + pos.y + 'px)' :\n            'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +\n        (scale ? ' scale(' + scale + ')' : '');\n}\n\n// @function setPosition(el: HTMLElement, position: Point)\n// Sets the position of `el` to coordinates specified by `position`,\n// using CSS translate or top/left positioning depending on the browser\n// (used by Leaflet internally to position its layers).\nexport function setPosition(el, point) {\n\n    /*eslint-disable */\n    el._leaflet_pos = point;\n    /*eslint-enable */\n\n    if (Browser.any3d) {\n        setTransform(el, point);\n    } else {\n        el.style.left = point.x + 'px';\n        el.style.top = point.y + 'px';\n    }\n}\n\n// @function getPosition(el: HTMLElement): Point\n// Returns the coordinates of an element previously positioned with setPosition.\nexport function getPosition(el) {\n    // this method is only used for elements previously positioned using setPosition,\n    // so it's safe to cache the position for performance\n\n    return el._leaflet_pos || new Point(0, 0);\n}\n\n// @function disableTextSelection()\n// Prevents the user from generating `selectstart` DOM events, usually generated\n// when the user drags the mouse through a page with text. Used internally\n// by Leaflet to override the behaviour of any click-and-drag interaction on\n// the map. Affects drag interactions on the whole document.\n\n// @function enableTextSelection()\n// Cancels the effects of a previous [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection).\nexport var disableTextSelection;\nexport var enableTextSelection;\nvar _userSelect;\nif ('onselectstart' in document) {\n    disableTextSelection = function () {\n        DomEvent.on(window, 'selectstart', DomEvent.preventDefault);\n    };\n    enableTextSelection = function () {\n        DomEvent.off(window, 'selectstart', DomEvent.preventDefault);\n    };\n} else {\n    var userSelectProperty = testProp(\n        ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\n\n    disableTextSelection = function () {\n        if (userSelectProperty) {\n            var style = document.documentElement.style;\n            _userSelect = style[userSelectProperty];\n            style[userSelectProperty] = 'none';\n        }\n    };\n    enableTextSelection = function () {\n        if (userSelectProperty) {\n            document.documentElement.style[userSelectProperty] = _userSelect;\n            _userSelect = undefined;\n        }\n    };\n}\n\n// @function disableImageDrag()\n// As [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection), but\n// for `dragstart` DOM events, usually generated when the user drags an image.\nexport function disableImageDrag() {\n    DomEvent.on(window, 'dragstart', DomEvent.preventDefault);\n}\n\n// @function enableImageDrag()\n// Cancels the effects of a previous [`L.DomUtil.disableImageDrag`](#domutil-disabletextselection).\nexport function enableImageDrag() {\n    DomEvent.off(window, 'dragstart', DomEvent.preventDefault);\n}\n\nvar _outlineElement, _outlineStyle;\n// @function preventOutline(el: HTMLElement)\n// Makes the [outline](https://developer.mozilla.org/docs/Web/CSS/outline)\n// of the element `el` invisible. Used internally by Leaflet to prevent\n// focusable elements from displaying an outline when the user performs a\n// drag interaction on them.\nexport function preventOutline(element) {\n    while (element.tabIndex === -1) {\n        element = element.parentNode;\n    }\n    if (!element || !element.style) { return; }\n    restoreOutline();\n    _outlineElement = element;\n    _outlineStyle = element.style.outline;\n    element.style.outline = 'none';\n    DomEvent.on(window, 'keydown', restoreOutline);\n}\n\n// @function restoreOutline()\n// Cancels the effects of a previous [`L.DomUtil.preventOutline`]().\nexport function restoreOutline() {\n    if (!_outlineElement) { return; }\n    _outlineElement.style.outline = _outlineStyle;\n    _outlineElement = undefined;\n    _outlineStyle = undefined;\n    DomEvent.off(window, 'keydown', restoreOutline);\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","var document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\nvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\nvar fn = (function () {\n  var val;\n\n  var fnMap = [\n    [\n      'requestFullscreen',\n      'exitFullscreen',\n      'fullscreenElement',\n      'fullscreenEnabled',\n      'fullscreenchange',\n      'fullscreenerror'\n    ],\n    // New WebKit\n    [\n      'webkitRequestFullscreen',\n      'webkitExitFullscreen',\n      'webkitFullscreenElement',\n      'webkitFullscreenEnabled',\n      'webkitfullscreenchange',\n      'webkitfullscreenerror'\n\n    ],\n    // Old WebKit (Safari 5.1)\n    [\n      'webkitRequestFullScreen',\n      'webkitCancelFullScreen',\n      'webkitCurrentFullScreenElement',\n      'webkitCancelFullScreen',\n      'webkitfullscreenchange',\n      'webkitfullscreenerror'\n\n    ],\n    [\n      'mozRequestFullScreen',\n      'mozCancelFullScreen',\n      'mozFullScreenElement',\n      'mozFullScreenEnabled',\n      'mozfullscreenchange',\n      'mozfullscreenerror'\n    ],\n    [\n      'msRequestFullscreen',\n      'msExitFullscreen',\n      'msFullscreenElement',\n      'msFullscreenEnabled',\n      'MSFullscreenChange',\n      'MSFullscreenError'\n    ]\n  ];\n\n  var i = 0;\n  var l = fnMap.length;\n  var ret = {};\n\n  for (; i < l; i++) {\n    val = fnMap[i];\n    if (val && val[1] in document) {\n      for (i = 0; i < val.length; i++) {\n        ret[fnMap[0][i]] = val[i];\n      }\n      return ret;\n    }\n  }\n\n  return false;\n})();\n\nvar eventNameMap = {\n  change: fn.fullscreenchange,\n  error: fn.fullscreenerror\n};\n\nvar screenfull = {\n  request: function (elem) {\n    var request = fn.requestFullscreen;\n\n    elem = elem || document.documentElement;\n\n    // Work around Safari 5.1 bug: reports support for\n    // keyboard in fullscreen even though it doesn't.\n    // Browser sniffing, since the alternative with\n    // setTimeout is even worse.\n    if (/5\\.1[.\\d]* Safari/.test(navigator.userAgent)) {\n      elem[request]();\n    } else {\n      elem[request](keyboardAllowed ? Element.ALLOW_KEYBOARD_INPUT : {});\n    }\n  },\n  exit: function () {\n    document[fn.exitFullscreen]();\n  },\n  toggle: function (elem) {\n    if (this.isFullscreen) {\n      this.exit();\n    } else {\n      this.request(elem);\n    }\n  },\n  onchange: function (callback) {\n    this.on('change', callback);\n  },\n  onerror: function (callback) {\n    this.on('error', callback);\n  },\n  on: function (event, callback) {\n    var eventName = eventNameMap[event];\n    if (eventName) {\n      document.addEventListener(eventName, callback, false);\n    }\n  },\n  off: function (event, callback) {\n    var eventName = eventNameMap[event];\n    if (eventName) {\n      document.removeEventListener(eventName, callback, false);\n    }\n  },\n  raw: fn\n};\n\nObject.defineProperties(screenfull, {\n  isFullscreen: {\n    get: function () {\n      return Boolean(document[fn.fullscreenElement]);\n    }\n  },\n  element: {\n    enumerable: true,\n    get: function () {\n      return document[fn.fullscreenElement];\n    }\n  },\n  enabled: {\n    enumerable: true,\n    get: function () {\n      // Coerce to boolean in case of old WebKit\n      return Boolean(document[fn.fullscreenEnabled]);\n    }\n  }\n});\n\nexport {screenfull};","import * as Util from '../core/Util';\nimport {Evented} from '../core/Events';\n// import {Class} from '../core/Class';\nimport * as Browser from '../core/Browser';\nimport * as DomEvent from '../dom/DomEvent';\nimport * as DomUtil from '../dom/DomUtil';\n\nimport debounce from 'lodash/debounce';\nimport assign from 'lodash/assign';\n\nimport {screenfull} from '../screenfull';\n\n/*\n * @class Reader\n * @aka cozy.Map\n * @inherits Evented\n *\n * The central class of the API â€” it is used to create a book on a page and manipulate it.\n *\n * @example\n *\n * ```js\n * // initialize the map on the \"map\" div with a given center and zoom\n * var map = L.map('map', {\n *  center: [51.505, -0.09],\n *  zoom: 13\n * });\n * ```\n *\n */\n\nvar _padding = 1.0;\nexport var Reader = Evented.extend({\n  options: {\n    regions: [\n      'header',\n      'toolbar.top',\n      'toolbar.left',\n      'main',\n      'toolbar.right',\n      'toolbar.bottom',\n      'footer'\n    ],\n    metadata: {},\n    flow: 'auto',\n    engine: 'epubjs',\n    trackResize: true,\n    mobileMediaQuery: '(min-device-width : 300px) and (max-device-width : 600px)',\n    forceScrolledDocHeight: 1200,\n    rootfilePath: '',\n    text_size: 100,\n    scale: 100.0,\n    flowOptions: {},\n    theme: 'default',\n    themes: [],\n    injectStylesheet: null\n  },\n\n  initialize: function(id, options) {\n    var self = this\n\n    self._original_document_title = document.title;\n\n    if ( false && localStorage.getItem('cozy.options') ) {\n      options = assign(options, JSON.parse(localStorage.getItem('cozy.options')));\n      if ( options[this.flow] && options[this.flow].text_size ) {\n        options.text_size = options[this.flow].text_size;\n      }\n      if ( options[this.flow] && options[this.flow].scale ) {      \n        options.scale = options[this.flow].scale;\n      }\n    }\n\n    this._cozyOptions = {};\n    if ( localStorage.getItem('cozy.options') ) {\n      this._cozyOptions = JSON.parse(localStorage.getItem('cozy.options'));\n      if ( this._cozyOptions.theme ) {\n        this.options.theme = this._cozyOptions.theme;\n      }\n      // if ( this._cozyOptions.flow ) {\n      //   this.options.flow = this._cozyOptions.flow;\n      // }\n    }\n\n    options = Util.setOptions(this, options);\n\n    this._checkFeatureCompatibility();\n\n    this.metadata = this.options.metadata; // initial seed\n\n    this._initContainer(id);\n    this._initLayout();\n\n    if ( this.options.themes && this.options.themes.length > 0 ) {\n        this.options.themes.forEach(function(theme) {\n            if ( theme.href ) { return; }\n            var klass = theme.klass;\n            var rules = {};\n            for(var rule in theme.rules) {\n                var new_rule = '.' + klass;\n                if ( rule == 'body' ) { new_rule = 'body' + new_rule; }\n                else { new_rule += ' ' + rule ; }\n                rules[new_rule] = theme.rules[rule];\n            }\n            theme.rules = rules;\n        });\n    }\n\n    this._updateTheme();\n\n    // hack for https://github.com/Leaflet/Leaflet/issues/1980\n    // this._onResize = Util.bind(this._onResize, this);\n\n    this._initEvents();\n\n    this.callInitHooks();\n\n    this._mode = this.options.mode;\n  },\n\n  start: function(target, cb) {\n    var self = this;\n\n    if ( typeof(target) == 'function' && cb === undefined ) {\n      cb = target;\n      target = undefined;\n    }\n\n    self._start(target, cb);\n\n    // Util.loader.js(this.options.engine_href).then(function() {\n    //   self._start(target, cb);\n    //   self._loaded = true;\n    // })\n  },\n\n  _start: function(target, cb) {\n    var self = this;\n    target = target || 0;\n\n    // self.open(function() {\n    //   self.draw(target, cb);\n    // });\n\n    self.open(target, cb);\n  },\n\n  reopen: function(options, target) {\n    /* NOP */\n  },\n\n  saveOptions: function(options) {\n    var saved_options = {};\n    assign(saved_options, options);\n    var key = this.metadata.layout || 'reflowable';\n    var flow = saved_options.flow;\n    if ( saved_options.flow == 'auto' ) {\n      // do not save\n      delete saved_options.flow;\n      flow = this.metadata.flow || 'paginated';\n    }\n    // key += '/' + flow;\n\n    // var key = `${this.flow}/${this.metadata.layout}`;\n    // var key = this.metadata.layout;\n    if ( saved_options.text_size || saved_options.scale ) {\n      saved_options[key] = {};\n      if ( saved_options.text_size ) {\n        saved_options[key].text_size = saved_options.text_size;\n        delete saved_options.text_size;\n      }\n      if ( saved_options.scale ) {\n        saved_options[key].scale = saved_options.scale;\n        delete saved_options.scale;\n      }\n      if ( saved_options.flow ) {\n        saved_options[key].flow = saved_options.flow;\n        delete saved_options.flow;\n      }\n    }\n\n    // saved_options[this.flow] = {}\n    // if ( saved_options.text_size ) {\n    // }\n    localStorage.setItem('cozy.options', JSON.stringify(saved_options));\n    this._cozyOptions = saved_options;\n  },\n\n  _updateTheme: function() {\n    DomUtil.removeClass(this._container, 'cozy-theme-' + ( this._container.dataset.theme || 'default' ));\n    DomUtil.addClass(this._container, 'cozy-theme-' + this.options.theme);\n    this._container.dataset.theme = this.options.theme;\n  },\n\n  draw: function(target) {\n    // NOOP\n  },\n\n  next: function() {\n    // NOOP\n  },\n\n  prev: function() {\n    // NOOP\n  },\n\n  display: function(index) {\n    // NOOP\n  },\n\n  gotoPage: function(target) {\n    // NOOP\n  },\n\n  goBack: function() {\n    history.back();\n  },\n\n  goForward: function() {\n    history.forward();\n  },\n\n  requestFullscreen: function() {\n    if ( screenfull.enabled ) {\n      // this._preResize();\n      screenfull.toggle(this._container);\n    }\n  },\n\n  _preResize: function() {\n\n  },\n\n  _initContainer: function (id) {\n    var container = this._container = DomUtil.get(id);\n\n    if (!container) {\n      throw new Error('Reader container not found.');\n    } else if (container._cozy_id) {\n      throw new Error('Reader container is already initialized.');\n    }\n\n    DomEvent.on(container, 'scroll', this._onScroll, this);\n    this._containerId = Util.stamp(container);\n  },\n\n  _initLayout: function () {\n    var container = this._container;\n\n    this._fadeAnimated = this.options.fadeAnimation && Browser.any3d;\n\n    DomUtil.addClass(container, 'cozy-reader cozy-container' +\n      (Browser.touch ? ' cozy-touch' : '') +\n      (Browser.retina ? ' cozy-retina' : '') +\n      (Browser.ielt9 ? ' cozy-oldie' : '') +\n      (Browser.safari ? ' cozy-safari' : '') +\n      (this._fadeAnimated ? ' cozy-fade-anim' : '') +\n      ' cozy-engine-' + this.options.engine +\n      ' cozy-theme-' + this.options.theme);\n\n    var position = DomUtil.getStyle(container, 'position');\n\n    this._initPanes();\n\n    if ( ! Browser.columnCount ) {\n      this.options.flow = 'scrolled-doc';\n    }\n  },\n\n  _initPanes: function () {\n    var self = this;\n\n    var panes = this._panes = {};\n\n    var l = 'cozy-';\n    var container = this._container;\n\n    var prefix = 'cozy-module-';\n\n    DomUtil.addClass(container, 'cozy-container');\n    panes['live-status'] = DomUtil.create('div', prefix + 'live-status u-screenreader', container);\n    panes['live-status'].setAttribute('aria-live', 'polite');\n    panes['top'] = DomUtil.create('div', prefix + 'top', container);\n    panes['main'] = DomUtil.create('div', prefix + 'main', container);\n    panes['bottom'] = DomUtil.create('div', prefix + 'bottom', container);\n    panes['left'] = DomUtil.create('div', prefix + 'left', panes['main']);\n    panes['right'] = DomUtil.create('div', prefix + 'right', panes['main']);\n    panes['book-cover'] = DomUtil.create('div', prefix + 'book-cover', panes['main']);\n    panes['book'] = DomUtil.create('div', prefix + 'book', panes['book-cover']);\n    panes['loader'] = DomUtil.create('div', prefix + 'book-loading', panes['book']);\n    panes['epub'] = DomUtil.create('div', prefix + 'book-epub', panes['book']);\n    this._initBookLoader();\n  },\n\n  _checkIfLoaded: function () {\n    if (!this._loaded) {\n      throw new Error('Set map center and zoom first.');\n    }\n  },\n\n  // DOM event handling\n\n  // @section Interaction events\n  _initEvents: function (remove) {\n    this._targets = {};\n    this._targets[Util.stamp(this._container)] = this;\n\n    this.tracking = function(reader) {\n      var _action = [];\n      var _last_location_start;\n      var _last_scrollTop;\n      var _reader = reader;\n      return {\n        action: function(v) {\n          if ( v ) {\n            _action = [v];\n            this.event(v);\n            // _reader.fire('trackAction', { action: v })\n          } else {\n            return _action.pop();\n          }\n        },\n\n        peek: function() {\n          return _action[0];\n        },\n\n        event: function(action, data) {\n          if ( data == null ) { data = {}; }\n          data.action = action;\n          _reader.fire(\"trackAction\", data);\n        },\n\n        pageview: function(location) {\n          var do_report = true;\n          if ( _reader.settings.flow == 'scrolled-doc' ) {\n            var scrollTop = 0;\n            if ( _reader._rendition.manager && _reader._rendition.manager.container ) {\n              scrollTop = _reader._rendition.manager.container.scrollTop;\n              // console.log(\"AHOY CHECKING SCROLLTOP\", _last_scrollTop, scrollTop, Math.abs(_last_scrollTop - scrollTop) < _reader._rendition.manager.layout.height);\n            }\n            if ( _last_scrollTop && Math.abs(_last_scrollTop - scrollTop) < _reader._rendition.manager.layout.height ) {\n              do_report = false;\n            } else {\n              _last_scrollTop = scrollTop;\n            }\n          }\n          if ( location.start != _last_location_start && do_report ) {\n            _last_location_start = location.start;\n            var tracking = { cfi: location.start, href: location.href, action: this.action()};\n            _reader.fire('trackPageview', tracking)\n            return tracking;\n          }\n          return false;\n        },\n\n        reset: function() {\n          if ( _reader.settings.flow == 'scrolled-doc' ) {\n            _last_scrollTop = null;\n          }\n        }\n      }\n    }(this);\n\n    var onOff = remove ? DomEvent.off : DomEvent.on;\n\n    // @event click: MouseEvent\n    // Fired when the user clicks (or taps) the map.\n    // @event dblclick: MouseEvent\n    // Fired when the user double-clicks (or double-taps) the map.\n    // @event mousedown: MouseEvent\n    // Fired when the user pushes the mouse button on the map.\n    // @event mouseup: MouseEvent\n    // Fired when the user releases the mouse button on the map.\n    // @event mouseover: MouseEvent\n    // Fired when the mouse enters the map.\n    // @event mouseout: MouseEvent\n    // Fired when the mouse leaves the map.\n    // @event mousemove: MouseEvent\n    // Fired while the mouse moves over the map.\n    // @event contextmenu: MouseEvent\n    // Fired when the user pushes the right mouse button on the map, prevents\n    // default browser context menu from showing if there are listeners on\n    // this event. Also fired on mobile when the user holds a single touch\n    // for a second (also called long press).\n    // @event keypress: KeyboardEvent\n    // Fired when the user presses a key from the keyboard while the map is focused.\n    // onOff(this._container, 'click dblclick mousedown mouseup ' +\n    //   'mouseover mouseout mousemove contextmenu keypress', this._handleDOMEvent, this);\n\n    // if (this.options.trackResize) {\n    //   var self = this;\n    //   var fn = debounce(function(){ self.invalidateSize({}); }, 150);\n    //   onOff(window, 'resize', fn, this);\n    // }\n\n    if (Browser.any3d && this.options.transform3DLimit) {\n      (remove ? this.off : this.on).call(this, 'moveend', this._onMoveEnd);\n    }\n\n    var self = this;\n    if (screenfull.enabled) {\n      screenfull.on('change', function() {\n        // setTimeout(function() {\n        //   self.invalidateSize({});\n        // }, 100);\n        self.fire('fullscreenchange', { isFullscreen: screenfull.isFullscreen });\n        console.log('AHOY: Am I fullscreen?', screenfull.isFullscreen ? 'YES' : 'NO');\n      });\n    }\n\n    self.on(\"updateLocation\", function(location) {\n      // possibly invoke a pageview event\n      var tracking;\n      if ( tracking = self.tracking.pageview(location) ) {\n        if ( location.percentage ) {\n          var p = Math.ceil(location.percentage * 100);\n          document.title = `${p}% - ${self._original_document_title}`;\n        }\n        var tmp_href = window.location.href.split(\"#\");\n        tmp_href[1] = location.start.substr(8, location.start.length - 8 - 1);\n        var context = [{ cfi: location.start }, '', tmp_href.join('#')];\n\n        if ( tracking.action && tracking.action.match(/\\/go\\/link/) ) {\n          // console.log(\"AHOY ACTION\", tracking.action, context[0].cfi);\n          history.pushState.apply(history, context);\n        } else {\n          history.replaceState.apply(history, context);\n        }\n      }\n    })\n\n    window.addEventListener('popstate', function(event) {\n      console.log(\"AHOY POP STATE\", event)\n      if ( event.isTrusted && event.state != null ) {\n        if ( event.state.cfi == self.__last_state_cfi ) {\n          console.log(\"AHOY POP STATE IGNORE\", self.__last_state_cfi);\n          event.preventDefault();\n          return;\n        }\n        self.__last_state_cfi = event.state.cfi;\n        if ( event.state == null || event.state.cfi == null ) {\n          $log.innerHTML += `<li>NULL</li>`;\n          event.preventDefault();\n          return;\n        }\n        self.gotoPage(event.state.cfi);\n      }\n    })\n\n    document.addEventListener('keydown', function(event) {\n      var keyName = event.key;\n      var target = event.target;\n\n      // check if the activeElement is \".special-panel\"\n      var check = document.activeElement;\n      while ( check.localName != 'body' ) {\n        if ( check.classList.contains('special-panel') ) {\n          return;\n        }\n        check = check.parentElement;\n      }\n\n      var IGNORE_TARGETS = [ 'input', 'textarea' ];\n      if ( IGNORE_TARGETS.indexOf(target.localName) >= 0 ) {\n        return;\n      }\n\n      self.fire('keyDown', { keyName: keyName, shiftKey: event.shiftKey });\n    });\n\n    self.on('keyDown', function(data) {\n      switch(data.keyName) {\n        case 'ArrowRight':\n        case 'PageDown':\n          self.next();\n          break;\n        case 'ArrowLeft':\n        case 'PageUp':\n          self.prev();\n          break;\n        case 'Home':\n          self._scroll('HOME');\n          break;\n        case 'End':\n          self._scroll('END')\n          break;\n      }\n    });\n  },\n\n  // _onResize: function() {\n  //   if ( ! this._resizeRequest ) {\n  //     this._resizeRequest = Util.requestAnimFrame(function() {\n  //       this.invalidateSize({})\n  //     }, this);\n  //   }\n  // },\n\n  _onScroll: function () {\n    this._container.scrollTop  = 0;\n    this._container.scrollLeft = 0;\n  },\n\n  _handleDOMEvent: function (e) {\n    if (!this._loaded || DomEvent.skipped(e)) { return; }\n\n    var type = e.type === 'keypress' && e.keyCode === 13 ? 'click' : e.type;\n\n    if (type === 'mousedown') {\n      // prevents outline when clicking on keyboard-focusable element\n      DomUtil.preventOutline(e.target || e.srcElement);\n    }\n\n    this._fireDOMEvent(e, type);\n  },\n\n  _fireDOMEvent: function (e, type, targets) {\n\n    if (e.type === 'click') {\n      // Fire a synthetic 'preclick' event which propagates up (mainly for closing popups).\n      // @event preclick: MouseEvent\n      // Fired before mouse click on the map (sometimes useful when you\n      // want something to happen on click before any existing click\n      // handlers start running).\n      var synth = Util.extend({}, e);\n      synth.type = 'preclick';\n      this._fireDOMEvent(synth, synth.type, targets);\n    }\n\n    if (e._stopped) { return; }\n\n    // Find the layer the event is propagating from and its parents.\n    targets = (targets || []).concat(this._findEventTargets(e, type));\n\n    if (!targets.length) { return; }\n\n    var target = targets[0];\n    if (type === 'contextmenu' && target.listens(type, true)) {\n      DomEvent.preventDefault(e);\n    }\n\n    var data = {\n      originalEvent: e\n    };\n\n    if (e.type !== 'keypress') {\n      var isMarker = (target.options && 'icon' in target.options);\n      data.containerPoint = isMarker ?\n          this.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);\n      data.layerPoint = this.containerPointToLayerPoint(data.containerPoint);\n      data.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);\n    }\n\n    for (var i = 0; i < targets.length; i++) {\n      targets[i].fire(type, data, true);\n      if (data.originalEvent._stopped ||\n        (targets[i].options.nonBubblingEvents && Util.indexOf(targets[i].options.nonBubblingEvents, type) !== -1)) { return; }\n    }\n  },\n\n  getFixedBookPanelSize: function() {\n    // have to make the book\n    var style = window.getComputedStyle(this._panes['book']);\n    var h = this._panes['book'].clientHeight - parseFloat(style.paddingTop) - parseFloat(style.paddingBottom);\n    var w = this._panes['book'].clientWidth - parseFloat(style.paddingRight) - parseFloat(style.paddingLeft);\n    return { height: Math.floor(h * 1.00), width: Math.floor(w * 1.00) };\n  },\n\n  invalidateSize: function(options) {\n    // TODO: IS THIS EVER USED?\n    var self = this;\n\n    if ( ! self._drawn ) { return; }\n\n    Util.cancelAnimFrame(this._resizeRequest);\n\n    if (! this._loaded) { return this; }\n\n    this.fire('resized');\n  },\n\n  _resizeBookPane: function() {\n\n  },\n\n  _setupHooks: function() {\n\n  },\n\n  _checkFeatureCompatibility: function() {\n    if ( ! DomUtil.isPropertySupported('columnCount') || this._checkMobileDevice() ) {\n      // force\n      this.options.flow = 'scrolled-doc';\n    }\n    if ( this._checkMobileDevice() ) {\n      this.options.text_size = 120;\n    }\n  },\n\n  _checkMobileDevice: function() {\n    if ( this._isMobile === undefined ) {\n      this._isMobile = false;\n      if ( this.options.mobileMediaQuery ) {\n        this._isMobile = window.matchMedia(this.options.mobileMediaQuery).matches;\n      }\n    }\n    return this._isMobile;\n  },\n\n  _enableBookLoader: function(delay=0) {\n    var self = this;\n    self._clearBookLoaderTimeout();\n    if ( delay < 0 ) {\n      delay = 0;\n      self._force_progress = true;\n    }\n    self._loader_timeout = setTimeout(function() {\n      self._panes['loader'].style.display = 'block';\n    }, delay);\n  },\n\n  _disableBookLoader: function(force=false) {\n    var self = this;\n    self._clearBookLoaderTimeout();\n    if ( ! self._force_progress || force ) {\n      self._panes['loader'].style.display = 'none';\n      self._force_progress = false;\n      self._panes['loader-status'].innerHTML = '';\n    }\n  },\n\n  _clearBookLoaderTimeout: function() {\n    var self = this;\n    if ( self._loader_timeout ) {\n      clearTimeout(self._loader_timeout);\n      self._loader_timeout = null;\n    }\n  },\n\n  _initBookLoader: function() {\n    // is this not awesome?\n    var template = this.options.loader_template || this.loaderTemplate();\n\n    var body = new DOMParser().parseFromString(template, \"text/html\").body;\n    while ( body.children.length ) {\n      this._panes['loader'].appendChild(body.children[0]);\n    }\n    this._panes['loader-status'] = DomUtil.create('div', 'cozy-module-book-loading-status', this._panes['loader']);\n  },\n\n  loaderTemplate: function() {\n    return `<div class=\"cozy-loader-spinner\">\n    <div class=\"spinner-backdrop spinner-backdrop--1\"></div>\n    <div class=\"spinner-backdrop spinner-backdrop--2\"></div>\n    <div class=\"spinner-backdrop spinner-backdrop--3\"></div>\n    <div class=\"spinner-backdrop spinner-backdrop--4\"></div>\n    <div class=\"spinner-quarter spinner-quarter--1\"></div>\n    <div class=\"spinner-quarter spinner-quarter--2\"></div>\n    <div class=\"spinner-quarter spinner-quarter--3\"></div>\n    <div class=\"spinner-quarter spinner-quarter--4\"></div>\n  </div>`;\n  },\n\n  updateLiveStatus: function(message) {\n    if ( ! this._panes['live-status'] ) { return ; }\n    if ( message != this._last_message ) {\n      if ( this._last_timer ) { clearTimeout(this._last_timer); this._last_timer = null; }\n      var clearDelay = 500;\n      setTimeout(() => {\n        this._panes['live-status'].innerText = message;\n        this._last_message = message;\n        console.log(\"-- status:\", message);\n      }, 50);\n      this._last_timer = setTimeout(() => {\n        this._panes['live-status'].innerText = '';\n      }, clearDelay);\n    }\n  },\n\n  EOT: true\n});\n\nObject.defineProperty(Reader.prototype, 'metadata', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return this._metadata;\n  },\n\n  set: function(data) {\n    this._metadata = Util.extend({}, data, this.options.metadata);\n  }\n});\n\nObject.defineProperty(Reader.prototype, 'flow', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return ( this.options.flow == 'auto' ? 'paginated' : this.options.flow );\n  }\n});\n\nObject.defineProperty(Reader.prototype, 'flowOptions', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n\n    var flow = this.flow;\n    if ( ! this.options.flowOptions[flow] ) {\n      this.options.flowOptions[flow] = {};\n    }\n    if ( ! this.options.flowOptions[flow].text_size ) {\n      this.options.flowOptions[flow].text_size = this.options.text_size;\n    }\n    if ( ! this.options.flowOptions[flow].scale ) {\n      this.options.flowOptions[flow].scale = this.options.scale;\n    }\n\n    return this.options.flowOptions[flow]\n  }\n});\n\nexport function createReader(id, options) {\n  return new Reader(id, options);\n}\n","import {Class} from '../core/Class';\nimport {Reader} from '../reader/Reader';\nimport * as Util from '../core/Util';\nimport * as DomUtil from '../dom/DomUtil';\n\n/*\n * @class Control\n * @aka L.Control\n * @inherits Class\n *\n * L.Control is a base class for implementing reader controls. Handles regioning.\n * All other controls extend from this class.\n */\n\nexport var Control = Class.extend({\n    // @section\n    // @aka Control options\n    options: {\n        // @option region: String = 'topright'\n        // The region of the control (one of the reader corners). Possible values are `'topleft'`,\n        // `'topright'`, `'bottomleft'` or `'bottomright'`\n    },\n\n    initialize: function (options) {\n        Util.setOptions(this, options);\n        if ( options.container ) {\n            this._container = options.container;\n            this._locked = true;\n        }\n        this._id = (new Date()).getTime() + '-' + parseInt(Math.random((new Date()).getTime()) * 1000, 10);\n    },\n\n    /* @section\n     * Classes extending L.Control will inherit the following methods:\n     *\n     * @method getRegion: string\n     * Returns the region of the control.\n     */\n    getRegion: function () {\n        return this.options.region;\n    },\n\n    // @method setRegion(region: string): this\n    // Sets the region of the control.\n    setRegion: function (region) {\n        var reader = this._reader;\n\n        if (reader) {\n            reader.removeControl(this);\n        }\n\n        this.options.region = region;\n\n        if (reader) {\n            reader.addControl(this);\n        }\n\n        return this;\n    },\n\n    // @method getContainer: HTMLElement\n    // Returns the HTMLElement that contains the control.\n    getContainer: function () {\n        return this._container;\n    },\n\n    // @method addTo(reader: Map): this\n    // Adds the control to the given reader.\n    addTo: function (reader) {\n        this.remove();\n        this._reader = reader;\n\n        var container = this._container = this.onAdd(reader);\n\n        DomUtil.addClass(container, 'cozy-control');\n\n        if ( ! this._locked ) {\n            var region = this.getRegion();\n            var area = reader.getControlRegion(region);\n            area.appendChild(container);\n        }\n\n        return this;\n    },\n\n    // @method remove: this\n    // Removes the control from the reader it is currently active on.\n    remove: function () {\n        if (!this._reader) {\n            return this;\n        }\n\n        if (! this._container) {\n            return this;\n        }\n\n        if ( ! this._locked ) {\n            DomUtil.remove(this._container);\n        }\n\n        if (this.onRemove) {\n            this.onRemove(this._reader);\n        }\n\n        this._reader = null;\n\n        return this;\n    },\n\n    _refocusOnMap: function (e) {\n        // if reader exists and event is not a keyboard event\n        if (this._reader && e && e.screenX > 0 && e.screenY > 0) {\n            this._reader.getContainer().focus();\n        }\n    },\n\n    _className: function(widget) {\n        var className = [ 'cozy-control' ];\n        if ( this.options.direction ) {\n            className.push('cozy-control-' + this.options.direction);\n        }\n        if ( widget ) {\n            className.push('cozy-control-' + widget);\n        }\n        return className.join(' ');\n    }\n});\n\nexport var control = function (options) {\n    return new Control(options);\n};\n\n/* @section Extension methods\n * @uninheritable\n *\n * Every control should extend from `L.Control` and (re-)implement the following methods.\n *\n * @method onAdd(reader: Map): HTMLElement\n * Should return the container DOM element for the control and add listeners on relevant reader events. Called on [`control.addTo(reader)`](#control-addTo).\n *\n * @method onRemove(reader: Map)\n * Optional method. Should contain all clean up code that removes the listeners previously added in [`onAdd`](#control-onadd). Called on [`control.remove()`](#control-remove).\n */\n\n/* @namespace Map\n * @section Methods for Layers and Controls\n */\nReader.include({\n    // @method addControl(control: Control): this\n    // Adds the given control to the reader\n    addControl: function (control) {\n        control.addTo(this);\n        return this;\n    },\n\n    // @method removeControl(control: Control): this\n    // Removes the given control from the reader\n    removeControl: function (control) {\n        control.remove();\n        return this;\n    },\n\n    getControlContainer: function() {\n        var l = 'cozy-';\n        if ( ! this._controlContainer ) {\n            this._controlContainer =\n                DomUtil.create('div', l + 'control-container', this._container);\n        }\n        return this._controlContainer;\n    },\n\n    getControlRegion: function (target) {\n\n        if ( ! this._panes[target] ) {\n            // target is dot-delimited string\n            // first dot is the panel\n            var parts = target.split('.');\n            var tmp = [];\n            var parent = this._container;\n            var x = 0;\n            while ( parts.length ) {\n                var slug = parts.shift();\n                tmp.push(slug);\n                var panel = tmp.join(\".\");\n                var className = 'cozy-panel-' + slug;\n                if ( ! this._panes[panel] ) {\n                    this._panes[panel] = DomUtil.create('div', className, parent);\n                }\n                parent = this._panes[panel];\n                x += 1;\n                if ( x > 100 ) { break; }\n            }\n        }\n        return this._panes[target];\n    },\n\n    getControlRegion_1: function (target) {\n\n        var tmp = target.split('.');\n        var region = tmp.shift();\n        var slot = tmp.pop() || '-slot';\n\n        var container = this._panes[region];\n        if ( ! this._panes[target] ) {\n            var className = 'cozy-' + region + '--item cozy-slot-' + slot\n            if ( ! this._panes[region + '.' + slot] ) {\n                var div = DomUtil.create('div', className);\n                if ( slot == 'left' || slot == 'bottom' ) {\n                    var childElement = this._panes[region].firstChild;\n                    this._panes[region].insertBefore(div, childElement);\n                } else {\n                    this._panes[region].appendChild(div);\n                }\n                this._panes[region + '.' + slot] = div;\n            }\n            className = this._classify(tmp);\n            this._panes[target] = DomUtil.create('div', className, this._panes[region + '.' + slot]);\n        }\n\n        return this._panes[target];\n    },\n\n    _classify: function(tmp) {\n        var l = 'cozy-';\n        var className = [];\n        for(var i in tmp) {\n            className.push(l + tmp[i]);\n        }\n        className = className.join(' ');\n        return className;\n    },\n\n    _clearControlRegion: function () {\n        for (var i in this._controlRegions) {\n            DomUtil.remove(this._controlRegions[i]);\n        }\n        DomUtil.remove(this._controlContainer);\n        delete this._controlRegions;\n        delete this._controlContainer;\n    }\n});\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nvar PageControl = Control.extend({\n  onAdd: function(reader) {\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n      container = DomUtil.create('div', className),\n\n      this._control  = this._createButton(this._fill(options.html || options.label), this._fill(options.label),\n              className, container);\n    }\n    this._bindEvents();\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    return link;\n  },\n\n  _bindEvents: function() {\n    var self = this;\n    DomEvent.disableClickPropagation(this._control);\n    DomEvent.on(this._control, 'click', DomEvent.stop);\n    DomEvent.on(this._control, 'click', this._action, this);\n\n    this._reader.on('reopen', function(data) {\n      // update the button text / titles\n      var html = self.options.html || self.options.label;\n      self._control.innerHTML = self._fill(html);\n      self._control.setAttribute('title', self._fill(self.options.label));\n      self._control.setAttribute('aria-label', self._fill(self.options.label));\n    });\n\n  },\n\n  _unit: function() {\n    return ( this._reader.options.flow == 'scrolled-doc' ) ? 'Section' : 'Page';\n  },\n\n  _fill: function(s) {\n    var unit = this._unit();\n    return s.replace(/\\$\\{unit\\}/g, unit);\n  },\n\n  _label: function() {\n    return this.options.label + \" \" + ( this._reader.options.flow == 'scrolled-doc' ) ? 'Section' : 'Page';\n  },\n\n  EOT: true\n});\n\nexport var PagePrevious = PageControl.extend({\n  options: {\n    region: 'edge.left',\n    direction: 'previous',\n    label: 'Previous ${unit}',\n    html: '<i class=\"icon-chevron-left oi\" data-glyph=\"chevron-left\" title=\"Previous ${unit}\" aria-hidden=\"true\"></i>'\n  },\n\n  _action: function(e) {\n    this._reader.prev();\n  }\n});\n\nexport var PageNext = PageControl.extend({\n  options: {\n    region: 'edge.right',\n    direction: 'next',\n    label: 'Next ${unit}',\n    html: '<i class=\"icon-chevron-right oi\" data-glyph=\"chevron-right\" title=\"Next ${unit}\" aria-hidden=\"true\"></i>'\n  },\n\n  _action: function(e) {\n    this._reader.next();\n  }\n});\n\nexport var PageFirst = PageControl.extend({\n  options: {\n    direction: 'first',\n    label: 'First ${unit}'\n  },\n  _action: function(e) {\n      this._reader.first();\n  }\n});\n\nexport var PageLast = PageControl.extend({\n  options: {\n    direction: 'last',\n    label: 'Last ${unit}'\n  },\n  _action: function(e) {\n      this._reader.last();\n  }\n});\n\nexport var pageNext = function(options) {\n  return new PageNext(options);\n}\n\nexport var pagePrevious = function(options) {\n  return new PagePrevious(options);\n}\n\nexport var pageFirst = function(options) {\n  return new PageFirst(options);\n}\n\nexport var pageLast = function(options) {\n  return new PageLast(options);\n}\n","import {Class} from '../core/Class';\nimport {Reader} from '../reader/Reader';\nimport * as Util from '../core/Util';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nimport assign from 'lodash/assign';\n\nvar activeModal;\nvar dismissModalListener = false;\n\n// from https://github.com/ghosh/micromodal/blob/master/src/index.js\nconst FOCUSABLE_ELEMENTS = [\n    'a[href]',\n    'area[href]',\n    'input:not([disabled]):not([type=\"hidden\"])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    'button:not([disabled])',\n    'iframe',\n    'object',\n    'embed',\n    '[contenteditable]',\n    '[tabindex]:not([tabindex^=\"-\"])'\n  ];\n\nconst ACTIONABLE_ELEMENTS = [\n    'a[href]',\n    'area[href]',\n    'input[type=\"submit\"]:not([disabled])',\n    'button:not([disabled])'\n  ];\n\nexport var Modal = Class.extend({\n  options: {\n    // @option region: String = 'topright'\n    // The region of the control (one of the reader edges). Possible values are `'left' ad 'right'`\n    region: 'left',\n    fraction: 0,\n    width: null,\n    className: {},\n    actions: null,\n    callbacks: { onShow: function() {}, onClose: function() {} },\n    handlers: {}\n  },\n\n  initialize: function (options) {\n    options = Util.setOptions(this, options);\n    this._id = (new Date()).getTime() + '-' + parseInt(Math.random((new Date()).getTime()) * 1000, 10);\n    this._initializedEvents = false;\n    this.callbacks = assign({}, this.options.callbacks);\n    this.actions = this.options.actions ? assign({}, this.options.actions) : null;\n    this.handlers = assign({}, this.options.handlers);\n    if ( typeof(this.options.className) == 'string' ) {\n      this.options.className = { container: this.options.className };\n    }\n  },\n\n  addTo: function(reader) {\n    var self = this;\n    this._reader = reader;\n    var template = this.options.template;\n\n    var panelHTML = `<div class=\"cozy-modal modal-slide ${this.options.region || 'left'}\" id=\"modal-${this._id}\" aria-labelledby=\"modal-${this._id}-title\" role=\"dialog\" aria-describedby=\"modal-${this._id}-content\" aria-hidden=\"true\">\n      <div class=\"modal__overlay\" tabindex=\"-1\" data-modal-close>\n        <div class=\"modal__container ${this.options.className.container ? this.options.className.container : ''}\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-${this._id}-title\" aria-describedby=\"modal-${this._id}-content\" id=\"modal-${this._id}-container\">\n          <div role=\"document\">\n            <header class=\"modal__header\">\n              <h3 class=\"modal__title\" id=\"modal-${this._id}-title\">${this.options.title}</h3>\n              <button class=\"modal__close\" aria-label=\"Close modal\" aria-controls=\"modal-${this._id}-container\" data-modal-close></button>\n            </header>\n            <main class=\"modal__content ${this.options.className.main ? this.options.className.main : ''}\" id=\"modal-${this._id}-content\">\n              ${template}\n            </main>`;\n\n    if ( this.options.actions ) {\n      panelHTML += '<footer class=\"modal__footer\">'\n      for(var i in this.options.actions) {\n        var action = this.options.actions[i];\n        var button_cls = action.className || 'button--default';\n        panelHTML += `<button id=\"action-${this._id}-${i}\" class=\"button button--lg ${button_cls}\">${action.label}</button>`;\n      }\n      panelHTML += '</footer>';\n    }\n\n    panelHTML += '</div></div></div></div>';\n\n    var body = new DOMParser().parseFromString(panelHTML, \"text/html\").body;\n\n    this.modal = reader._container.appendChild(body.children[0]);\n    this._container = this.modal; // compatibility\n\n    this.container = this.modal.querySelector('.modal__container');\n    this._bindEvents();\n    return this;\n  },\n\n  _bindEvents: function() {\n    var self = this;\n    this.onClick = this.onClick.bind(this);\n    this.onKeydown = this.onKeydown.bind(this);\n    this.onModalTransition = this.onModalTransition.bind(this);\n\n    this.modal.addEventListener('transitionend', function() {\n    }.bind(this));\n\n    // bind any actions\n    if ( this.actions ) {\n      for(var i in this.actions) {\n        let action = this.actions[i];\n        let button_id = '#action-' + this._id + '-' + i;\n        let button = this.modal.querySelector(button_id);\n        if ( button ) {\n          DomEvent.on(button, 'click', function(event) {\n            event.preventDefault();\n            action.callback(event);\n            if ( action.close ) {\n              self.closeModal();\n            }\n          })\n        }\n      }\n    }\n  },\n\n  deactivate: function() {\n    this.closeModal();\n  },\n\n  closeModal: function() {\n    var self = this;\n    this.modal.setAttribute('aria-hidden', 'true');\n    this.removeEventListeners();\n    if ( this.activeElement ) {\n      this.activeElement.focus();\n    }\n    this.callbacks.onClose(this.modal);\n  },\n\n  showModal: function() {\n    this.activeElement = document.activeElement\n    this._resize();\n    this.modal.setAttribute('aria-hidden', 'false')\n    this.setFocusToFirstNode()\n    this.addEventListeners()\n    this.callbacks.onShow(this.modal)\n  },\n\n  activate: function() {\n    return this.showModal();\n    var self = this;\n    activeModal = this;\n    DomUtil.addClass(self._reader._container, 'st-modal-activating');\n    this._resize();\n    DomUtil.addClass(this._reader._container, 'st-modal-open');\n    setTimeout(function() {\n      DomUtil.addClass(self._container, 'active');\n      DomUtil.removeClass(self._reader._container, 'st-modal-activating');\n      self._container.setAttribute('aria-hidden', 'false');\n      self.setFocusToFirstNode();\n    }, 25);\n  },\n\n  addEventListeners: function () {\n    // --- do we need touch listeners?\n    // this.modal.addEventListener('touchstart', this.onClick)\n    // this.modal.addEventListener('touchend', this.onClick)\n    this.modal.addEventListener('click', this.onClick)\n    document.addEventListener('keydown', this.onKeydown)\n    'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend'.split(' ').forEach(function(event) {\n      this.modal.addEventListener(event, this.onModalTransition);\n    }.bind(this))\n  },\n\n  removeEventListeners: function () {\n    this.modal.removeEventListener('touchstart', this.onClick)\n    this.modal.removeEventListener('click', this.onClick)\n    'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend'.split(' ').forEach(function(event) {\n      this.modal.removeEventListener(event, this.onModalTransition);\n    }.bind(this))\n    document.removeEventListener('keydown', this.onKeydown)\n  },\n\n  _resize: function() {\n    var container = this._reader._container;\n    this.container.style.height = container.offsetHeight + 'px';\n    // console.log(\"AHOY MODAL\", this.container.style.height);\n    if ( ! this.options.className.container  ) {\n      this.container.style.width = this.options.width || parseInt(container.offsetWidth * this.options.fraction) + 'px';\n    }\n\n    var header = this.container.querySelector('header');\n    var footer = this.container.querySelector('footer');\n    var main = this.container.querySelector('main');\n    var height = this.container.clientHeight - header.clientHeight;\n    if ( footer ) {\n      height -= footer.clientHeight;\n    }\n    main.style.height = height + 'px';\n  },\n\n  getFocusableNodes: function() {\n    const nodes = this.modal.querySelectorAll(FOCUSABLE_ELEMENTS);\n    return Object.keys(nodes).map((key) => nodes[key]);\n  },\n\n  setFocusToFirstNode: function() {\n    var focusableNodes = this.getFocusableNodes();\n    if ( focusableNodes.length ) {\n      focusableNodes[0].focus();\n    } else {\n      activeModal._container.focus();\n    }\n  },\n\n  getActionableNodes: function() {\n    const nodes = this.modal.querySelectorAll(ACTIONABLE_ELEMENTS);\n    return Object.keys(nodes).map((key) => nodes[key]);\n  },\n\n  onKeydown: function(event) {\n    if ( event.keyCode == 27 ) { this.closeModal(); }\n    if ( event.keyCode == 9 ) {\n      this.maintainFocus(event);\n    }\n  },\n\n  onClick: function(event) {\n\n    var closeAfterAction = false;\n    var target = event.target;\n\n    // As far as I can tell, the code below isn't catching direct clicks on\n    // items with class='data-modal-close' as they're not ACTIONABLE_ELEMENTS.\n    // Adding them to ACTIONABLE_ELEMENTS causes undesirable behavior where\n    // their child items also close the modal thanks to the loop below.\n    // Children of .modal__overlay include the modal header, border area and\n    // padding. We don't want clicks on these closing the modal.\n    // Just close the modal now for direct clicks on a '.data-modal-close'.\n    if (target.hasAttribute('data-modal-close')) {\n      this.fire('closed');\n      this.closeModal();\n      return;\n    }\n\n    // if the target isn't an actionable type, walk the DOM until\n    // one is found\n    var actionableNodes = this.getActionableNodes();\n    while ( actionableNodes.indexOf(target) < 0 && target != this.modal ) {\n      target = target.parentElement;\n    }\n\n    // no target found, punt\n    if ( actionableNodes.indexOf(target) < 0 ) {\n      return;\n    }\n\n    if (this.handlers.click) {\n      var did_match = false;\n      for(var selector in this.handlers.click) {\n        if ( target.matches(selector) ) {\n          closeAfterAction = this.handlers.click[selector](this, target);\n          break;\n        }\n      }\n    }\n\n    if (closeAfterAction || target.hasAttribute('data-modal-close')) this.closeModal();\n\n    event.preventDefault();\n  },\n\n  onModalTransition: function(event) {\n    if ( this.modal.getAttribute('aria-hidden') == 'true' ) {\n      this._reader.fire('modal-closed');\n    } else {\n      this._reader.fire('modal-opened');\n    }\n  },\n\n  on: function(event, selector, handler) {\n    if (! this.handlers[event] ) {\n      this.handlers[event] = {};\n    }\n    if (typeof(selector) == 'function') {\n      handler = selector;\n      selector = '*';\n    }\n    this.handlers[event][selector] = handler;\n  },\n\n  fire: function(event) {\n    if ( this.handlers[event] && this.handlers[event]['*'] ) {\n      this.handlers[event]['*'](this);\n    }\n  },\n\n  maintainFocus: function(event) {\n    var focusableNodes = this.getFocusableNodes();\n    var focusedItemIndex = focusableNodes.indexOf(document.activeElement);\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableNodes[focusableNodes.length - 1].focus()\n      event.preventDefault()\n    }\n\n    if (!event.shiftKey && focusedItemIndex === focusableNodes.length - 1) {\n      focusableNodes[0].focus()\n      event.preventDefault()\n    }\n  },\n\n  update: function(options) {\n    if ( options.title ) {\n      this.options.title = options.title;\n      var titleEl = this.container.querySelector('.modal__title');\n      titleEl.innerText = options.title;\n    }\n\n    if (options.fraction) {\n      this.options.fraction = options.fraction;\n      this.container.style.width = parseInt(this.container.offsetWidth * this.options.fraction) + 'px';\n    }\n  },\n\n  EOT: true\n});\n\nReader.include({\n  modal: function (options) {\n    var modal = new Modal(options);\n    return modal.addTo(this);\n    // return this;\n  },\n\n  popup: function(options) {\n    options = assign({title: 'Info', fraction: 1.0}, options);\n\n    if ( ! this._popupModal ) {\n      this._popupModal = this.modal({\n        title: options.title,\n        region: 'full',\n        template: '<div style=\"height: 100%; width: 100%\"></div>',\n        fraction: options.fraction || 1.0,\n        actions: [ \n            { label: 'OK', callback: function(event) { }, close: true },\n        ]\n      })\n    } else {\n      this._popupModal.update({ title: options.title, fraction: options.fraction });\n    }\n\n    var iframe;\n    var modalDiv = this._popupModal.container.querySelector('main > div');\n    var iframe = modalDiv.querySelector('iframe');\n    if ( iframe ) {\n      modalDiv.removeChild(iframe);\n    }\n    iframe = document.createElement('iframe');\n    iframe.style.width = '100%';\n    iframe.style.height = '100%';\n    iframe = modalDiv.appendChild(iframe);\n\n    if ( options.onLoad ) {\n      iframe.addEventListener('load', function() {\n        options.onLoad(iframe.contentDocument, this._popupModal);\n      }.bind(this));\n    }\n\n    if ( options.srcdoc ) {\n      if (\"srcdoc\" in iframe) {\n        iframe.srcdoc = options.srcdoc;\n      } else {\n        iframe.contentDocument.open();\n        iframe.contentDocument.write(options.srcdoc);\n        iframe.contentDocument.close();\n      }\n    } else if ( options.href ) {\n      iframe.setAttribute('src', options.href);\n    }\n\n    this._popupModal.activate();\n\n  },\n\n  EOT: true\n});\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport {Modal} from './Modal';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Contents = Control.extend({\n\n  defaultTemplate: `<button class=\"button--sm\" data-toggle=\"open\" aria-label=\"Table of Contents\"><i class=\"icon-menu oi\" data-glyph=\"menu\" title=\"Table of Contents\" aria-hidden=\"true\"></i></button>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    this._control.setAttribute('id', 'action-' + this._id);\n    container.style.position = 'relative';\n\n    this._bindEvents();\n\n    return container;\n  },\n\n  _bindEvents() {\n    var self = this;\n    \n    this._reader.on('updateContents', function(data) {\n\n      DomEvent.on(this._control, 'click', function(event) {\n        event.preventDefault();\n        self._goto_interval = false;\n        self._reader.tracking.action('contents/open');\n        self._modal.activate();\n      }, this);\n\n      this._modal = this._reader.modal({\n        template: '<ul></ul>',\n        title: 'Contents',\n        region: 'left',\n        className: 'cozy-modal-contents',\n        callbacks: {\n          onShow: function() {},\n          onClose: function (modal) {\n          if (self._goto_interval) {\n            self._reader.rendition.manager.container.setAttribute(\"tabindex\", 0);\n            self._reader.rendition.manager.container.focus();\n          }\n        }\n      }});\n\n      this._modal.on('click', 'a[href]', function(modal, target) {\n        target = target.getAttribute('data-href');\n        this._goto_interval = true;\n        this._reader.tracking.action('contents/go/link');\n        this._reader.gotoPage(target);\n        return true;\n      }.bind(this));\n\n      this._modal.on('closed', function() {\n        self._reader.tracking.action('contents/close');\n      });\n\n      this._setupSkipLink();\n\n      var parent = self._modal._container.querySelector('ul');\n      // var s = data.toc.filter(function(value) { return value.parent == null }).map(function(value) { return [ value, 0, parent ] });\n      // while ( s.length ) {\n      //   var tuple = s.shift();\n      //   var chapter = tuple[0];\n      //   var tabindex = tuple[1];\n      //   var parent = tuple[2];\n\n      //   var option = self._createOption(chapter, tabindex, parent);\n      //   data.toc.filter(function(value) { return value.parent == chapter.id }).reverse().forEach(function(chapter_) {\n      //     s.unshift([chapter_, tabindex + 1, option]);\n      //   });\n      // }\n      var _process = function(items, tabindex, parent) {\n        items.forEach(function(item) {\n          var option = self._createOption(item, tabindex, parent);\n          if ( item.subitems && item.subitems.length ) {\n            _process(item.subitems, tabindex + 1, option);\n          }\n        })\n      };\n      _process(data.toc, 0, parent);\n    }.bind(this))\n  },\n\n  _createOption(chapter, tabindex, parent) {\n\n    function pad(value, length) {\n        return (value.toString().length < length) ? pad(\"-\"+value, length):value;\n    }\n    var option = DomUtil.create('li');\n    if ( chapter.href ) {\n      var anchor = DomUtil.create('a', null, option);\n      if ( chapter.html ) {\n        anchor.innerHTML = chapter.html;\n      } else {\n        anchor.textContent = chapter.label;\n      }\n      // var tab = pad('', tabindex); tab = tab.length ? tab + ' ' : '';\n      // option.textContent = tab + chapter.label;\n      anchor.setAttribute('href', chapter.href);\n      anchor.setAttribute('data-href', chapter.href);\n    } else {\n      var span = DomUtil.create('span', null, option);\n      span.textContent = chapter.label;\n    }\n\n    if ( parent.tagName === 'LI' ) {\n      // need to nest\n      var tmp = parent.querySelector('ul');\n      if ( ! tmp ) {\n        tmp = DomUtil.create('ul', null, parent);\n      }\n      parent = tmp;\n    }\n\n    parent.appendChild(option);\n    return option;\n  },\n\n  _setupSkipLink: function() {\n    if ( ! this.options.skipLink ) { return; }\n      \n    var target = document.querySelector(this.options.skipLink);\n    if ( ! target ) { return; }\n\n    var link = document.createElement('a');\n    link.textContent = 'Skip to contents';\n    link.setAttribute('href', '#action-' + this._id);\n\n    var ul = target.querySelector('ul');\n    if ( ul ) {\n      // add to list\n      target = document.createElement('li');\n      ul.appendChild(target);\n    }\n    target.appendChild(link);\n    link.addEventListener('click', function(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      this._control.click();\n    }.bind(this))\n\n  },\n\n  EOT: true\n});\n\nexport var contents = function(options) {\n  return new Contents(options);\n};\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\n// Title + Chapter\n\nexport var Title = Control.extend({\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className(),\n        container = DomUtil.create('div', className),\n        options = this.options;\n\n    // var template = '<h1><span class=\"cozy-title\">Contents: </span><select size=\"1\" name=\"contents\"></select></label>';\n    // var control = new DOMParser().parseFromString(template, \"text/html\").body.firstChild;\n\n    var h1 = DomUtil.create('h1', 'cozy-h1', container);\n    DomUtil.setOpacity(h1, 0);\n    this._title = DomUtil.create('span', 'cozy-title', h1);\n    this._divider = DomUtil.create('span', 'cozy-divider', h1);\n    this._divider.textContent = \" Â· \";\n    this._section = DomUtil.create('span', 'cozy-section', h1);\n\n    // --- TODO: disable until we can work out how to \n    // --- more reliably match the current section to the contents\n    // this._reader.on('updateSection', function(data) {\n    //   if ( data && data.label ) {\n    //     self._section.textContent = data.label;\n    //     DomUtil.setOpacity(self._section, 1.0);\n    //     DomUtil.setOpacity(self._divider, 1.0);\n    //   } else {\n    //     DomUtil.setOpacity(self._section, 0);\n    //     DomUtil.setOpacity(self._divider, 0);\n    //   }\n    // })\n\n    this._reader.on('updateTitle', function(data) {\n      if ( data ) {\n        self._title.textContent = data.title || data.bookTitle;\n        DomUtil.setOpacity(self._section, 0);\n        DomUtil.setOpacity(self._divider, 0);\n        DomUtil.setOpacity(h1, 1);\n      }\n    })\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n    // DomEvent.on(link, 'click', this._refocusOnMap, this);\n\n    return link;\n  },\n\n  EOT: true\n});\n\nexport var title = function(options) {\n  return new Title(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\n// Title + Chapter\n\nexport var PublicationMetadata = Control.extend({\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className(),\n        container = DomUtil.create('div', className),\n        options = this.options;\n\n    // var template = '<h1><span class=\"cozy-title\">Contents: </span><select size=\"1\" name=\"contents\"></select></label>';\n    // var control = new DOMParser().parseFromString(template, \"text/html\").body.firstChild;\n\n    this._publisher = DomUtil.create('div', 'cozy-publisher', container);\n    this._rights = DomUtil.create('div', 'cozy-rights', container);\n\n    this._reader.on('updateTitle', function(data) {\n      if ( data ) {\n        self._publisher.textContent = data.publisher;\n        self._rights.textContent = data.rights;\n      }\n    })\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n    // DomEvent.on(link, 'click', this._refocusOnMap, this);\n\n    return link;\n  },\n\n  EOT: true\n});\n\nexport var publicationMetadata = function(options) {\n  return new PublicationMetadata(options);\n}\n","import {Class} from '../core/Class';\nimport {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\nimport * as Util from '../core/Util';\n\nimport assign from 'lodash/assign';\nimport keys from 'lodash/keys';\n\nexport var Preferences = Control.extend({\n  options: {\n    label: 'Preferences',\n    hasThemes: false\n  },\n\n  defaultTemplate: `<button class=\"button--sm cozy-preferences oi\" data-toggle=\"open\" data-glyph=\"cog\" aria-label=\"Preferences and Settings\"></button>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className();\n    var container = DomUtil.create('div', className);\n    var template = this.options.template || this.defaultTemplate;\n    var body = new DOMParser().parseFromString(template, \"text/html\").body;\n    while ( body.children.length ) {\n      container.appendChild(body.children[0]);\n    }\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self.activate();\n    }, this);\n\n    // self.initializeForm();\n    this._modal = this._reader.modal({\n      // template: '<form></form>',\n      title: 'Preferences',\n      className: 'cozy-modal-preferences',\n      actions: [\n        {\n          label: 'Save Changes',\n          callback: function(event) {\n            self.updatePreferences(event);\n          }\n        }\n      ],\n      region: 'right'\n    });\n\n    return container;\n  },\n\n  activate: function() {\n    var self = this;\n    self.initializeForm();\n    self._modal.activate();\n  },\n\n  _createPanel: function() {\n    var self = this;\n    if ( this._modal._container.querySelector('form') ) { return; }\n\n    var template = '';\n\n    var possible_fieldsets = [];\n    if ( this._reader.metadata.layout == 'pre-paginated' ) {\n      // different panel\n      possible_fieldsets.push('Scale');\n    } else {\n      possible_fieldsets.push('TextSize');\n    }\n    possible_fieldsets.push('Display');\n\n    if ( this._reader.rootfiles && this._reader.rootfiles.length > 1 ) {\n      // this.options.hasPackagePaths = true;\n      possible_fieldsets.push('Rendition');\n    }\n\n    if ( this._reader.options.themes && this._reader.options.themes.length > 0 ) {\n      this.options.hasThemes = true;\n      possible_fieldsets.push('Theme');\n    }\n\n    this._fieldsets = [];\n    possible_fieldsets.forEach(function(cls) {\n      var fieldset = new Preferences.fieldset[cls](this);\n      template += fieldset.template();\n      this._fieldsets.push(fieldset);\n    }.bind(this))\n\n    if ( this.options.fields ) {\n      this.options.hasFields = true;\n      for(var i in this.options.fields) {\n        var field = this.options.fields[i];\n        var id = \"preferences-custom-\" + i;\n        template += `<fieldset class=\"custom-field\">\n          <legend>${field.label}</legend>\n        `;\n        for(var j in field.inputs) {\n          var input = field.inputs[j];\n          var checked = input.value == field.value ? ' checked=\"checked\"' : '';\n          template += `<label><input id=\"preferences-custom-${i}-${j}\" type=\"radio\" name=\"x${field.name}\" value=\"${input.value}\" ${checked}/>${input.label}</label>`;\n        }\n        if ( field.hint ) {\n          template += `<p class=\"hint\" style=\"font-size: 90%\">${field.hint}</p>`;\n        }\n      }\n    }\n\n    template = '<form>' + template + '</form>';\n\n    // this._modal = this._reader.modal({\n    //   template: template,\n    //   title: 'Preferences',\n    //   className: 'cozy-modal-preferences',\n    //   actions: [\n    //     {\n    //       label: 'Save Changes',\n    //       callback: function(event) {\n    //         self.updatePreferences(event);\n    //       }\n    //     }\n    //   ],\n    //   region: 'right'\n    // });\n\n    this._modal._container.querySelector('main').innerHTML = template;\n    this._form = this._modal._container.querySelector('form');\n  },\n\n  initializeForm: function() {\n    this._createPanel();\n    this._fieldsets.forEach(function(fieldset) {\n      fieldset.initializeForm(this._form);\n    }.bind(this));\n  },\n\n  updatePreferences: function(event) {\n    event.preventDefault();\n\n    var doUpdate = false;\n    var new_options = {};\n    var saveable_options = {};\n    this._fieldsets.forEach(function(fieldset) {\n      // doUpdate = doUpdate || fieldset.updateForm(this._form, new_options);\n      // assign(new_options, fieldset.updateForm(this._form));\n      fieldset.updateForm(this._form, new_options, saveable_options);\n    }.bind(this));\n\n    if ( this.options.hasFields ) {\n      for(var i in this.options.fields) {\n        var field = this.options.fields[i];\n        var id = \"preferences-custom-\" + i;\n        var input = this._form.querySelector(`input[name=\"x${field.name}\"]:checked`);\n        if ( input.value != field.value ) {\n          field.value = input.value;\n          field.callback(field.value);\n        }\n      }\n    }\n\n    this._modal.deactivate();\n\n    setTimeout(function() {\n      this._reader.saveOptions(saveable_options);\n      this._reader.reopen(new_options);\n    }.bind(this), 100);\n  },\n\n  EOT: true\n});\n\nPreferences.fieldset = {};\n\nvar Fieldset = Class.extend({\n\n  options: {},\n\n  initialize: function (control, options) {\n      Util.setOptions(this, options);\n      this._control = control;\n      this._current = {};\n      this._id = (new Date()).getTime() + '-' + parseInt(Math.random((new Date()).getTime()) * 1000, 10);\n  },\n\n  template: function() {\n\n  },\n\n  EOT: true\n\n\n});\n\nPreferences.fieldset.TextSize = Fieldset.extend({\n\n  initializeForm: function(form) {\n    if ( ! this._input ) {\n      this._input = form.querySelector(`#x${this._id}-input`);\n      this._output = form.querySelector(`#x${this._id}-output`);\n      this._preview = form.querySelector(`#x${this._id}-preview`);\n      this._actionReset = form.querySelector(`#x${this._id}-reset`);\n\n      this._input.addEventListener('input', this._updatePreview.bind(this));\n      this._input.addEventListener('change', this._updatePreview.bind(this));\n\n      this._actionReset.addEventListener('click', function(event) {\n        event.preventDefault();\n        this._input.value = 100;\n        this._updatePreview();\n      }.bind(this));\n    }\n\n    var text_size = this._control._reader.options.text_size || 100;\n    if ( text_size == 'auto' ) { text_size = 100; }\n    this._current.text_size = text_size;\n    this._input.value = text_size;\n    this._updatePreview();\n  },\n\n  updateForm: function(form, options, saveable) {\n    // return { text_size: this._input.value };\n    options.text_size = saveable.text_size = this._input.value;\n    // options.text_size = this._input.value;\n    // return ( this._input.value != this._current.text_size );\n  },\n\n  template: function() {\n    return `<fieldset class=\"cozy-fieldset-text_size\">\n        <legend>Text Size</legend>\n        <div class=\"preview--text_size\" id=\"x${this._id}-preview\">\n          â€˜Yes, thatâ€™s it,â€™ said the Hatter with a sigh: â€˜itâ€™s always tea-time, and weâ€™ve no time to wash the things between whiles.â€™\n        </div>\n        <p style=\"white-space: no-wrap\">\n          <span>T-</span>\n          <input name=\"text_size\" type=\"range\" id=\"x${this._id}-input\" value=\"100\" min=\"50\" max=\"400\" step=\"10\" aria-valuemin=\"50\" aria-valuemax=\"400\" style=\"width: 75%; display: inline-block\" />\n          <span>T+</span>\n        </p>\n        <p>\n          <span>Text Size: </span>\n          <span id=\"x${this._id}-output\">100</span>\n          <button id=\"x${this._id}-reset\" class=\"reset button--inline\" style=\"margin-left: 8px\">Reset</button> \n        </p>\n      </fieldset>`;\n  },\n\n  _updatePreview: function() {\n    this._preview.style.fontSize = `${( parseInt(this._input.value, 10) / 100 )}em`;\n    this._output.innerHTML = `${this._input.value}%`;\n    this._input.setAttribute('aria-valuenow',`${this._input.value}`);\n    this._input.setAttribute('aria-valuetext',`${this._input.value} percent`);\n  },\n\n  EOT: true\n\n});\n\nPreferences.fieldset.Display = Fieldset.extend({\n\n  initializeForm: function(form) {\n    var flow = this._control._reader.options.flow || this._control._reader.metadata.flow || 'auto';\n    // if ( flow == 'auto' ) { flow = 'paginated'; }\n\n    var input = form.querySelector(`#x${this._id}-input-${flow}`);\n    input.checked = true;\n    this._current.flow = flow;\n\n  },\n\n  updateForm: function(form, options, saveable) {\n    var input = form.querySelector(`input[name=\"x${this._id}-flow\"]:checked`);\n    options.flow = input.value;\n    if ( options.flow != 'auto' ) {\n      saveable.flow = options.flow;\n    }\n    // if ( input.value == 'auto' ) {\n    //   // we do NOT want to save flow as a preference\n    //   return {};\n    // }\n    // return { flow: input.value };\n  },\n\n  template: function() {\n    var scrolled_help = '';\n    if ( this._control._reader.metadata.layout != 'pre-paginated' ) {\n      scrolled_help = \"<br /><small>This is an experimental feature that may cause display and loading issues for the book when enabled.</small>\";\n    }\n    return `<fieldset>\n            <legend>Display</legend>\n            <label><input name=\"x${this._id}-flow\" type=\"radio\" id=\"x${this._id}-input-auto\" value=\"auto\" /> Auto<br /><small>Let the reader determine display mode based on your browser dimensions and the type of content you're reading</small></label>\n            <label><input name=\"x${this._id}-flow\" type=\"radio\" id=\"x${this._id}-input-paginated\" value=\"paginated\" /> Page-by-Page</label>\n            <label><input name=\"x${this._id}-flow\" type=\"radio\" id=\"x${this._id}-input-scrolled-doc\" value=\"scrolled-doc\" /> Scroll${scrolled_help}</label>\n          </fieldset>`;\n  },\n\n  EOT: true\n\n});\n\nPreferences.fieldset.Theme = Fieldset.extend({\n\n  initializeForm: function(form) {\n    var theme = this._control._reader.options.theme || 'default';\n\n    var input = form.querySelector(`#x${this._id}-input-theme-${theme}`);\n    input.checked = true;\n    this._current.theme = theme;\n  },\n\n  updateForm: function(form, options, saveable) {\n    var input = form.querySelector(`input[name=\"x${this._id}-theme\"]:checked`);\n    options.theme = saveable.theme = input.value;\n    // return { theme: input.value };\n  },\n\n  template: function() {\n    var template = `<fieldset>\n            <legend>Theme</legend>\n            <label><input name=\"x${this._id}-theme\" type=\"radio\" id=\"x${this._id}-input-theme-default\" value=\"default\" />Default</label>`;\n\n    this._control._reader.options.themes.forEach(function(theme) {\n      template += `<label><input name=\"x${this._id}-theme\" type=\"radio\" id=\"x${this._id}-input-theme-${theme.klass}\" value=\"${theme.klass}\" />${theme.name}</label>`\n    }.bind(this));\n\n    template += '</fieldset>';\n\n    return template;\n\n  },\n\n  EOT: true\n\n});\n\nPreferences.fieldset.Rendition = Fieldset.extend({\n\n  initializeForm: function(form) {\n    var rootfiles = this._control._reader.rootfiles;\n    var rootfilePath = this._control._reader.options.rootfilePath;\n    var expr = rootfilePath ? `[value=\"${rootfilePath}\"]` : \":first-child\";\n    var input = form.querySelector(`input[name=\"x${this._id}-rootfilePath\"]${expr}`);\n    input.checked = true;\n    this._current.rootfilePath = rootfilePath || rootfiles[0].rootfilePath;\n  },\n\n  updateForm: function(form, options, saveable) {\n    var input = form.querySelector(`input[name=\"x${this._id}-rootfilePath\"]:checked`);\n    if ( input.value != this._current.rootfilePath ) {\n      options.rootfilePath = input.value;\n      this._current.rootfilePath = input.value;\n    }\n  },\n\n  template: function() {\n    var template = `<fieldset>\n            <legend>Rendition</legend>\n    `;\n\n    this._control._reader.rootfiles.forEach(function(rootfile, i) {\n      template += `<label><input name=\"x${this._id}-rootfilePath\" type=\"radio\" id=\"x${this._id}-input-rootfilePath-${i}\" value=\"${rootfile.rootfilePath}\" />${rootfile.label || rootfile.accessMode || rootfile.rootfilePath}</label>`;\n    }.bind(this))\n\n    template += '</fieldset>';\n\n    return template;\n\n  },\n\n  EOT: true\n\n});\n\nPreferences.fieldset.Scale = Fieldset.extend({\n\n  initializeForm: function(form) {\n    if ( ! this._input ) {\n      this._input = form.querySelector(`#x${this._id}-input`);\n      this._output = form.querySelector(`#x${this._id}-output`);\n      this._preview = form.querySelector(`#x${this._id}-preview > div`);\n      this._actionReset = form.querySelector(`#x${this._id}-reset`);\n\n      this._input.addEventListener('input', this._updatePreview.bind(this));\n      this._input.addEventListener('change', this._updatePreview.bind(this));\n\n      this._actionReset.addEventListener('click', function(event) {\n        event.preventDefault();\n        this._input.value = 100;\n        this._updatePreview();\n      }.bind(this));\n    }\n\n    var scale = this._control._reader.options.scale || 100;\n    if ( ! scale ) { scale = 100; }\n    this._current.scale = scale;\n    this._input.value = scale;\n    this._updatePreview();\n  },\n\n  updateForm: function(form, options, saveable) {\n    // return { text_size: this._input.value };\n    options.scale = saveable.scale = this._input.value;\n    // options.text_size = this._input.value;\n    // return ( this._input.value != this._current.text_size );\n  },\n\n  template: function() {\n    return `<fieldset class=\"cozy-fieldset-text_size\">\n        <legend>Zoom In/Out</legend>\n        <div class=\"preview--scale\" id=\"x${this._id}-preview\" style=\"overflow: hidden; height: 5rem\">\n          <div>\n            â€˜Yes, thatâ€™s it,â€™ said the Hatter with a sigh: â€˜itâ€™s always tea-time, and weâ€™ve no time to wash the things between whiles.â€™\n          </div>\n        </div>\n        <p style=\"white-space: no-wrap\">\n          <span style=\"font-size: 150%\">âŠ–<span class=\"u-screenreader\"> Zoom Out</span></span>\n          <input name=\"scale\" type=\"range\" id=\"x${this._id}-input\" value=\"100\" min=\"50\" max=\"400\" step=\"10\" style=\"width: 75%; display: inline-block\" />\n          <span style=\"font-size: 150%\">âŠ•<span class=\"u-screenreader\">Zoom In </span></span>\n        </p>\n        <p>\n          <span>Scale: </span>\n          <span id=\"x${this._id}-output\">100</span>\n          <button id=\"x${this._id}-reset\" class=\"reset button--inline\" style=\"margin-left: 8px\">Reset</button> \n        </p>\n      </fieldset>`;\n  },\n\n  _updatePreview: function() {\n    this._preview.style.transform = `scale(${( parseInt(this._input.value, 10) / 100 )}) translate(0,0)`;\n    this._output.innerHTML = `${this._input.value}%`;\n  },\n\n  EOT: true\n\n});\n\nexport var preferences = function(options) {\n  return new Preferences(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Widget = Control.extend({\n\n\n  options: {\n      // @option region: String = 'topright'\n      // The region of the control (one of the reader corners). Possible values are `'topleft'`,\n      // `'topright'`, `'bottomleft'` or `'bottomright'`\n  },\n\n  onAdd: function(reader) {\n    var container = this._container;\n    if ( container ) {\n      // NOOP\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n\n    }\n\n    this._onAddExtra(container);\n    this._updateTemplate(container);\n    this._updateClass(container);\n    this._bindEvents(container);\n\n    return container;\n  },\n\n  _updateTemplate: function(container) {\n    var data = this.data();\n    for(var slot in data) {\n      if ( data.hasOwnProperty(slot) ) {\n        var value = data[slot];\n        if ( typeof(value) == \"function\" ) { value = value(); }\n        var node = container.querySelector(`[data-slot=${slot}]`);\n        if ( node ) {\n          if ( node.hasAttribute('value') ) {\n            node.setAttribute('value', value);\n          } else {\n            node.innerHTML = value;\n          }\n        }\n      }\n    }\n  },\n\n  _updateClass: function(container) {\n    if ( this.options.className ) {\n      DomUtil.addClass(container, this.options.className);\n    }\n  },\n\n  _onAddExtra: function() { },\n\n  _bindEvents: function(container) {\n    var control = container.querySelector(\"[data-toggle=button]\");\n    if ( ! control ) { return ; }\n    DomEvent.disableClickPropagation(control);\n    DomEvent.on(control, 'click', DomEvent.stop);\n    DomEvent.on(control, 'click', this._action, this);\n  },\n\n  _action: function() {\n  },\n\n  data: function() {\n    return this.options.data || {};\n  },\n\n  EOT: true\n});\n\nWidget.Button = Widget.extend({\n  defaultTemplate: `<button data-toggle=\"button\" data-slot=\"label\"></button>`,\n\n  _action: function() {\n    this.options.onClick(this, this._reader);\n  },\n\n  EOT: true\n});\n\nWidget.Panel = Widget.extend({\n  defaultTemplate: `<div><span data-slot=\"text\"></span></div>`,\n\n\n  EOT: true\n});\n\nWidget.Toggle = Widget.extend({\n  defaultTemplate: `<button data-toggle=\"button\" data-slot=\"label\"></button>`,\n\n  _onAddExtra: function(container) {\n    this.state(this.options.states[0].stateName, container);\n\n    return container;\n  },\n\n  state: function(stateName, container) {\n    container = container || this._container;\n    this._resetState(container);\n    this._state = this.options.states.filter(function(s) { return s.stateName == stateName })[0];\n    this._updateClass(container);\n    this._updateTemplate(container);\n  },\n\n  _resetState: function(container) {\n    if ( ! this._state ) { return; }\n    if ( this._state.className ) {\n      DomUtil.removeClass(container, this._state.className);\n    }\n  },\n\n  _updateClass: function(container) {\n    if ( this._state.className ) {\n      DomUtil.addClass(container, this._state.className);\n    }\n  },\n\n  _action: function() {\n    this._state.onClick(this, this._reader);\n  },\n\n  data: function() {\n    return this._state.data || {};\n  },\n\n  EOT: true\n});\n\n// export var widget = function(options) {\n//   return new Widget(options);\n// }\n\nexport var widget = {\n  button: function(options) { return new Widget.Button(options); },\n  panel: function(options) { return new Widget.Panel(options); },\n  toggle: function(options) { return new Widget.Toggle(options); }\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Citation = Control.extend({\n  options: {\n    label: 'Citation',\n    html: '<span class=\"citation\" aria-label=\"Get Citation\"></span>'\n  },\n\n  defaultTemplate: '<button class=\"button--sm cozy-citation citation\" data-toggle=\"open\" aria-label=\"Get Citation\"></button>',\n\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._reader.on('updateContents', function(data) {\n      self._createPanel();\n    });\n\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self._modal.activate();\n    }, this)\n\n    return container;\n  },\n\n  _action: function() {\n    var self = this;\n    self._modal.activate();\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('button', className, container);\n    link.innerHTML = html;\n    link.title = title;\n\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n\n    return link;\n  },\n\n  _createPanel: function() {\n    var self = this;\n\n    var template = `<form>\n      <fieldset>\n        <legend>Select Citation Format</legend>\n      </fieldset>\n    </form>\n    <blockquote id=\"formatted\" style=\"padding: 8px; border-left: 4px solid black; background-color: #fff\"></blockquote>\n    <div class=\"alert alert-info\" id=\"message\" style=\"display: none\"></div>`;\n\n    this._modal = this._reader.modal({\n      template: template,\n      title: 'Copy Citation to Clipboard',\n      className: 'cozy-modal-citation',\n      actions: [\n        {\n          label: 'Copy Citation',\n          callback: function(event) {\n            document.designMode = \"on\";\n            var formatted = self._modal._container.querySelector(\"#formatted\");\n\n            var range = document.createRange();\n            range.selectNode(formatted);\n            var sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n\n            // formatted.select();\n\n            try {\n              var flag = document.execCommand('copy');\n            } catch(err) {\n              console.log(\"AHOY COPY FAILED\", err);\n            }\n\n            self._message.innerHTML = 'Success! Citation copied to your clipboard.';\n            self._message.style.display = 'block';\n            sel.removeAllRanges();\n            range.detach();\n            document.designMode = \"off\";\n          }\n        }\n      ],\n      region: 'left',\n      fraction: 1.0\n    });\n\n    this._form = this._modal._container.querySelector('form');\n    var fieldset = this._form.querySelector('fieldset');\n\n    var citations = this.options.citations || this._reader.metadata.citations;\n\n    citations.forEach(function(citation, index) {\n      var label = DomUtil.create('label', null, fieldset);\n      var input = DomUtil.create('input', null, label);\n      input.setAttribute('name', 'format');\n      input.setAttribute('value', citation.format);\n      input.setAttribute('type', 'radio');\n      if ( index == 0 ) {\n        input.setAttribute('checked', 'checked');\n      }\n      var text = document.createTextNode(\" \" + citation.format);\n      label.appendChild(text);\n      input.setAttribute('data-text', citation.text);\n    });\n\n    this._formatted = this._modal._container.querySelector(\"#formatted\");\n    this._message = this._modal._container.querySelector(\"#message\");\n    DomEvent.on(this._form, 'change', function(event) {\n      var target = event.target;\n      if ( target.tagName == 'INPUT' ) {\n        this._initializeForm();\n      }\n    }, this);\n\n    this._initializeForm();\n  },\n\n  _initializeForm: function() {\n    var formatted = this._formatCitation();\n    this._formatted.innerHTML = formatted;\n    this._message.style.display = 'none';\n    this._message.innerHTML = '';\n  },\n\n  _formatCitation: function(format) {\n    if ( format == null ) {\n      var selected = this._form.querySelector(\"input:checked\");\n      format = selected.value;\n    }\n    var selected = this._form.querySelector(\"input[value=\" + format + \"]\");\n    return selected.getAttribute('data-text');\n    // return selected.dataset.text;\n  },\n\n  EOT: true\n});\n\nexport var citation = function(options) {\n  return new Citation(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Search = Control.extend({\n  options: {\n    label: 'Search',\n    html: '<span>Search</span>'\n  },\n\n  defaultTemplate: `<form class=\"search\">\n    <label class=\"u-screenreader\" for=\"cozy-search-string\">Search in this text</label>\n    <input id=\"cozy-search-string\" name=\"search\" type=\"text\" placeholder=\"Search in this text...\"/>\n    <button class=\"button--sm\" data-toggle=\"open\" aria-label=\"Search\"><i class=\"icon-magnifying-glass oi\" data-glyph=\"magnifying-glass\" title=\"Search\" aria-hidden=\"true\"></i></button>\n  </form>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    container.style.position = 'relative';\n\n    this._data = null;\n    this._canceled = false;\n    this._processing = false;\n    this._addLocation = false;\n\n    this._reader.on('ready', function() {\n\n      this._modal = this._reader.modal({\n        template: '<article></article>',\n        title: 'Search Results',\n        className: { container: 'cozy-modal-search' },\n        region: 'left',\n      });\n\n      this._modal.callbacks.onClose = function() {\n        if ( self._processing ) {\n          self._canceled = true;\n        }\n      };\n\n      this._article = this._modal._container.querySelector('article');\n\n      this._modal.on('click', 'a[href]', function(modal, target) {\n        target = target.getAttribute('href');\n        this._reader.tracking.action('search/go/link');\n        this._reader.gotoPage(target);\n        return true;\n      }.bind(this));\n\n      this._modal.on('closed', function() {\n        this._reader.tracking.action('contents/close');\n      }.bind(this))\n\n    }.bind(this));\n\n    // only add locations when they've been processed\n    this._reader.on('updateLocations', function() {\n      this._addLocation = true;\n    }.bind(this));\n\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n\n      var searchString = this._container.querySelector(\"#cozy-search-string\").value;\n      searchString = searchString.replace(/^\\s*/, '').replace(/\\s*$/, '');\n\n      if ( ! searchString ) {\n        // just punt\n        return;\n      }\n\n      if ( searchString == this.searchString ) {\n        // cached results\n        self.openModalResults();\n      } else {\n        this.searchString = searchString;\n        self.openModalWaiting();\n        self.submitQuery();\n      }\n    }, this);\n\n    window.addEventListener('keydown', function(evt) {\n      let cmd = (evt.ctrlKey ? 1 : 0) |\n                (evt.altKey ? 2 : 0) |\n                (evt.shiftKey ? 4 : 0) |\n                (evt.metaKey ? 8 : 0);\n\n      if (cmd === 1 || cmd === 8 || cmd === 5 || cmd === 12) {\n        if ( evt.keyCode == '70' ) {\n          // command/control-F\n          evt.preventDefault();\n          this._container.querySelector(\"#cozy-search-string\").focus();\n        }\n      }\n    }.bind(this));\n\n    return container;\n  },\n\n  openModalWaiting: function() {\n    this._processing = true;\n    this._emptyArticle();\n    var value = this.searchString;\n    this._article.innerHTML = '<p>Submitting query for <em>' + value + '</em>...</p>' + this._reader.loaderTemplate();\n    this._modal.activate();\n  },\n\n  openModalResults: function() {\n    if ( this._canceled ) {\n      this._canceled = false;\n      return;\n    }\n    this._buildResults();\n    this._modal.activate();\n    this._reader.tracking.action(\"search/open\");\n  },\n\n  submitQuery: function() {\n    var self = this;\n\n    var url = this.options.searchUrl + encodeURIComponent(this.searchString);\n\n    var request = new XMLHttpRequest();\n    request.open('GET', url, true);\n\n    request.onload = function() {\n      if (this.status >= 200 && this.status < 400) {\n        // Success!\n        var data = JSON.parse(this.response);\n        console.log(\"SEARCH DATA\", data);\n\n        self._data = data;\n\n      } else {\n        // We reached our target server, but it returned an error\n\n        self._data = null;\n        console.log(this.response);\n      }\n\n      self._reader.tracking.action(\"search/submitQuery\");\n      self.openModalResults();\n\n    };\n\n    request.onerror = function() {\n      // There was a connection error of some sort\n      self._data = null;\n      self.openModalResults();\n    };\n\n    request.send();\n\n  },\n\n  _emptyArticle: function() {\n    while (this._article && this._article.hasChildNodes()) {\n      this._article.removeChild(this._article.lastChild);\n    }\n  },\n\n  _buildResults: function() {\n    var self = this;\n    var content;\n\n    this._processing = false;\n\n    self._emptyArticle();\n\n    var reader = this._reader;\n    reader.annotations.reset();\n\n    if ( this._data ) {\n      var highlight = true\n      if (this._data.highlight_off == \"yes\") {\n        highlight = false;\n      }\n      if ( this._data.search_results.length ) {\n        content = DomUtil.create('ol');\n\n        this._data.search_results.forEach(function(result) {\n          var option = DomUtil.create('li');\n          var anchor = DomUtil.create('a', null, option);\n          var cfiRange = \"epubcfi(\" + result.cfi + \")\";\n\n          if (result.snippet) {\n            // results for epubs\n            if ( self._addLocation ) {\n              var loc = reader.locations.locationFromCfi(cfiRange);\n              var locText = \"Location \" + loc + \" â€¢ \";\n              if (cfiRange.match(/^epubcfi\\(page/)) {\n                // results for pdfs\n                // see heliotrope: app/views/e_pubs/show_pdf.html.erb, _gatherResults()\n                loc = cfiRange.split(\"=\")[1]\n                locText = \"Page \" + loc.slice(0, -1) + \" â€¢ \";\n              }\n              var locElement = DomUtil.create('i');\n              locElement.textContent = locText;\n              anchor.appendChild(locElement);\n            }\n            anchor.appendChild(document.createTextNode(result.snippet));\n\n            anchor.setAttribute(\"href\", cfiRange);\n            content.appendChild(option);\n          }\n          if (highlight) {\n            reader.annotations.highlight(cfiRange, {}, null, 'epubjs-search-hl');\n          }\n        });\n      } else {\n        content = DomUtil.create(\"p\")\n        content.textContent = 'No results found for \"' + self.searchString + '\"';\n      }\n    } else {\n      content = DomUtil.create(\"p\")\n      content.textContent = 'There was a problem processing this query.';\n    }\n\n    self._article.appendChild(content);\n  },\n\n  EOT: true\n});\n\nexport var search = function(options) {\n  return new Search(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\n// Title + Chapter\n\nexport var BibliographicInformation = Control.extend({\n  options: {\n    label: 'Info',\n    direction: 'left',\n    html: '<span class=\"oi\" data-glyph=\"info\">Info</span>'\n  },\n\n  defaultTemplate: `<button class=\"button--sm cozy-bib-info oi\" data-glyph=\"info\" data-toggle=\"open\" aria-label=\"Bibliographic Information\"> Info</button>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._reader.on('updateContents', function(data) {\n      self._createPanel();\n    });\n\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self._modal.activate();\n    }, this)\n\n    return container;\n  },\n\n  _createPanel: function() {\n    var self = this;\n\n    var template = `<dl>\n    </dl>`;\n\n    this._modal = this._reader.modal({\n      template: template,\n      title: 'Info',\n      region: 'left',\n      fraction: 1.0\n    });\n\n    var dl = this._modal._container.querySelector('dl');\n\n    var metadata_fields = [\n      [ 'title', 'Title' ],\n      [ 'creator', 'Author' ],\n      [ 'pubdate', 'Publication Date' ],\n      [ 'modified_date', 'Modified Date' ],\n      [ 'publisher', 'Publisher' ],\n      [ 'rights', 'Rights' ],\n      [ 'doi', 'DOI' ],\n      [ 'description', 'Description' ],\n    ];\n\n    var metadata_fields_seen = {};\n\n    var metadata = this._reader.metadata;\n\n    for(var idx in metadata_fields) {\n      var key = metadata_fields[idx][0];\n      var label = metadata_fields[idx][1];\n      if ( metadata[key] ) {\n        var value = metadata[key];\n        if ( key == 'pubdate' || key == 'modified_date' ) {\n          value = this._formatDate(value);\n          if ( ! value ) { continue; }\n          // value = d.toISOString().slice(0,10); // for YYYY-MM-DD\n        }\n        metadata_fields_seen[key] = true;\n        var dt = DomUtil.create('dt', 'cozy-bib-info-label', dl);\n        dt.innerHTML = label;\n        var dd = DomUtil.create('dd', 'cozy-bib-info-value cozy-bib-info-value-' + key, dl);\n        dd.innerHTML = value;\n      }\n    }\n\n  },\n\n  _formatDate: function(value) {\n    var match = value.match(/\\d{4}/);\n    if ( match ) {\n      return match[0];\n    }\n    return null;\n  },\n\n  EOT: true\n});\n\nexport var bibliographicInformation = function(options) {\n  return new BibliographicInformation(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Download = Control.extend({\n  options: {\n    label: 'Download Book',\n    html: '<span>Download Book</span>'\n  },\n\n  defaultTemplate: `<button class=\"button--sm cozy-download oi\" data-toggle=\"open\" data-glyph=\"data-transfer-download\"> Download Book</button>`,\n\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._reader.on('updateContents', function(data) {\n      self._createPanel();\n    });\n\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self._modal.activate();\n    }, this)\n\n    return container;\n  },\n\n  _createPanel: function() {\n    var self = this;\n\n    var template = `<form>\n      <fieldset>\n        <legend>Choose File Format</legend>\n      </fieldset>\n    </form>`;\n\n    this._modal = this._reader.modal({\n      template: template,\n      title: 'Download Book',\n      className: 'cozy-modal-download',\n      actions: [\n        {\n          label: 'Download',\n          callback: function(event) {\n            var selected = self._form.querySelector(\"input:checked\");\n            var href = selected.getAttribute('data-href');\n            self._configureDownloadForm(href);\n            self._form.submit();\n          }\n        }\n      ],\n      region: 'left',\n      fraction: 1.0\n    });\n\n    this._form = this._modal._container.querySelector('form');    \n    var fieldset = this._form.querySelector('fieldset');\n    this._reader.options.download_links.forEach(function(link, index) {\n      var label = DomUtil.create('label', null, fieldset);\n      var input = DomUtil.create('input', null, label);\n      input.setAttribute('name', 'format');\n      input.setAttribute('value', link.format);\n      input.setAttribute('data-href', link.href);\n      input.setAttribute('type', 'radio');\n      if ( index == 0 ) {\n        input.setAttribute('checked', 'checked');\n      }\n      var text = link.format;\n      if ( link.size ) {\n        text += \" (\" + link.size + \")\";\n      }\n      var text = document.createTextNode(\" \" + text);\n      label.appendChild(text);\n    });\n\n  },\n\n  _configureDownloadForm: function(href) {\n    var self = this;\n    self._form.setAttribute('method', 'GET');\n    self._form.setAttribute('action', href);\n    self._form.setAttribute('target', '_blank');\n  },\n\n\n  EOT: true\n});\n\nexport var download = function(options) {\n  return new Download(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Navigator = Control.extend({\n  onAdd: function(reader) {\n    var container = this._container;\n    if ( container ) {\n    } else {\n\n      var className = this._className('navigator'),\n          options = this.options;\n      \n      container = DomUtil.create('div', className);\n    }\n    this._setup(container);\n\n    this._reader.on('updateLocations', function(locations) {      \n      // if ( ! this._reader.currentLocation() || ! this._reader.currentLocation().start ) {\n      //   console.log(\"AHOY updateLocations NO START\", this._reader.currentLocation().then);\n      //   setTimeout(function() {\n      //     this._initializeNavigator(locations);\n      //   }.bind(this), 100);\n      //   return;\n      // }\n      this._initializeNavigator(locations);\n    }.bind(this));\n\n    return container;\n  },\n\n  _setup: function(container) {\n    this._control = container.querySelector(\"input[type=range]\");\n    if ( ! this._control ) {\n      this._createControl(container);\n    }\n    this._background = container.querySelector(\".cozy-navigator-range__background\");\n    this._status = container.querySelector(\".cozy-navigator-range__status\");\n    this._spanCurrentPercentage = container.querySelector(\".currentPercentage\");\n    this._spanCurrentLocation = container.querySelector(\".currentLocation\");\n    this._spanTotalLocations = container.querySelector(\".totalLocations\");\n\n    this._bindEvents();\n  },\n\n  _createControl: function (container) {\n    var template = `<div class=\"cozy-navigator-range\">\n        <label class=\"u-screenreader\" for=\"cozy-navigator-range-input\">Location: </label>\n        <input class=\"cozy-navigator-range__input\" id=\"cozy-navigator-range-input\" type=\"range\" name=\"locations-range-value\" min=\"0\" max=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\" aria-valuenow=\"0\" aria-valuetext=\"0% â€¢Â Location 0 of ?\" value=\"0\" data-background-position=\"0\" />\n        <div class=\"cozy-navigator-range__background\"></div>\n      </div>\n      <div class=\"cozy-navigator-range__status\"><span class=\"currentPercentage\">0%</span> â€¢ Location <span class=\"currentLocation\">0</span> of <span class=\"totalLocations\">?</span></div>\n    `;\n\n    var body = new DOMParser().parseFromString(template, \"text/html\").body;\n    while ( body.children.length ) {\n      container.appendChild(body.children[0]);\n    }\n\n    this._control = container.querySelector(\"input[type=range]\");\n  },\n\n  _bindEvents: function() {\n    var self = this;\n\n    this._control.addEventListener(\"input\", function() {\n      self._update();\n    }, false);\n    this._control.addEventListener(\"change\", function() { self._action(); }, false);\n    this._control.addEventListener(\"mousedown\", function(){\n        self._mouseDown = true;\n    }, false);\n    this._control.addEventListener(\"mouseup\", function(){\n        self._mouseDown = false;\n    }, false);\n    this._control.addEventListener(\"keydown\", function(){\n      self._mouseDown = true;\n    }, false);\n    this._control.addEventListener(\"keyup\", function(){\n      self._mouseDown = false;\n    }, false);\n\n    this._reader.on('relocated', function(location) {\n      if ( ! self._initiated ) { return; }\n      if ( ! self._mouseDown ) {\n        location = self._reader.currentLocation();\n        self._control.value = Math.ceil(self._reader.locations.percentageFromCfi(self._reader.currentLocation().start.cfi) * 100);\n        self._update();\n      }\n    })\n\n  },\n\n  _action: function() {\n    var value = this._control.value;\n    var locations = this._reader.locations;\n    var cfi = locations.cfiFromPercentage(value / 100);\n    this._reader.tracking.action(\"navigator/go\");\n    this._reader.gotoPage(cfi);\n  },\n\n  _update: function() {\n    var self = this;\n\n    var current = this._reader.currentLocation();\n    if ( ! current || ! current.start ) {\n      setTimeout(function() {\n        this._update();\n      }.bind(this), 100);\n      return;\n    }\n\n    var rangeBg = this._background;\n    var range = self._control;\n\n    var value = parseInt(range.value, 10);\n    var percentage = value;\n\n    // if ( current.start.location != this._last_reported_location ) {\n    //   this._last_reported_location = current.start.location;\n    //   var message = `Location ${current.start.location}; ${percentage}%`;\n    //   this._reader.updateLiveStatus(message);\n    // }\n\n    rangeBg.setAttribute('style', 'background-position: ' + (-percentage) + '% 0%, left top;');\n    self._control.setAttribute('data-background-position', Math.ceil(percentage));\n\n    this._spanCurrentPercentage.innerHTML = percentage + '%';\n    if ( current && current.start ) {\n      var current_location = this._reader.locations.locationFromCfi(current.start.cfi);\n      this._spanCurrentLocation.innerHTML = ( current_location );\n\n      range.setAttribute('aria-valuenow', value);\n      range.setAttribute('aria-valuetext', `${value}% â€¢Â Location ${current_location} of ${this._total}`);\n\n      if ( current_location != this._last_reported_location ) {\n        this._last_reported_location = current_location;\n        var message = `Location ${current_location}; ${percentage}%`;\n        this._reader.updateLiveStatus(message);\n      }\n    }\n    self._last_delta = self._last_value > value; self._last_value = value;\n  },\n\n  _initializeNavigator: function(locations) {\n    console.log(\"AHOY updateLocations PROCESSING LOCATION\");\n    this._initiated = true;\n    this._total = this._reader.locations.total;\n    if ( this._reader.currentLocation() && this._reader.currentLocation().start ) {\n      this._control.value = Math.ceil(this._reader.locations.percentageFromCfi(this._reader.currentLocation().start.cfi) * 100);\n      this._last_value = this._control.value;\n    } else {\n      this._last_value = this._control.value;\n    }\n\n    this._spanTotalLocations.innerHTML = this._total;\n\n    this._update();\n    setTimeout(function() {\n      DomUtil.addClass(this._container, 'initialized');\n    }.bind(this), 0);\n  },\n\n  EOT: true\n});\n\nexport var navigator = function(options) {\n  return new Navigator(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Fullscreen = Control.extend({\n  options: {\n    label: 'View Fullscreen',\n    html: '<span>View Fullscreen</span>'\n  },\n\n  defaultTemplate: `<button class=\"button--sm cozy-fullscreen oi\" data-toggle=\"open\" data-glyph=\"fullscreen-enter\" aria-label=\"Enter Fullscreen\"></button>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self.activate();\n    }, this)\n\n    // // fullscreenchange is not standard across all browsers\n    // document.addEventListener('fullscreenchange', (event) => {\n    //   // document.fullscreenElement will point to the element that\n    //   // is in fullscreen mode if there is one. If there isn't one,\n    //   // the value of the property is null.    \n    //   this._fullscreenchangeHandler();\n    // });\n\n    this._reader.on('fullscreenchange', (data) => {\n      this._fullscreenchangeHandler(data.isFullscreen);\n    })\n\n    return container;\n  },\n\n  activate: function() {\n    if ( ! document.fullscreenElement ) {\n      this._reader.requestFullscreen();\n    } else {\n      if ( document.exitFullscreen ) {\n        document.exitFullscreen();\n      }\n    }\n  },\n\n  _fullscreenchangeHandler: function(isFullscreen) {\n    if (isFullscreen) {\n      this._control.dataset.glyph = 'fullscreen-exit';\n      this._control.setAttribute('aria-label', 'Exit Fullscreen');\n    } else {\n      this._control.dataset.glyph = 'fullscreen-enter';\n      this._control.setAttribute('aria-label', 'Enter Fullscreen');\n    }    \n  },\n\n  EOT: true\n});\n\nexport var fullscreen = function(options) {\n  return new Fullscreen(options);\n}\n","import {Control, control} from './Control';\nimport {PageNext, PagePrevious, pageNext, pagePrevious, PageFirst, pageFirst, PageLast, pageLast} from './Control.Paging';\nimport {Contents, contents} from './Control.Contents';\nimport {Title, title} from './Control.Title';\nimport {PublicationMetadata, publicationMetadata} from './Control.PublicationMetadata';\nimport {Preferences, preferences} from './Control.Preferences';\nimport {Widget, widget} from './Control.Widget';\nimport {Citation, citation} from './Control.Citation';\nimport {Search, search} from './Control.Search';\nimport {BibliographicInformation, bibliographicInformation} from './Control.BibliographicInformation';\nimport {Download, download} from './Control.Download';\nimport {Navigator, navigator} from './Control.Navigator';\nimport {Fullscreen, fullscreen} from './Control.Fullscreen';\n\n// import {Zoom, zoom} from './Control.Zoom';\n// import {Attribution, attribution} from './Control.Attribution';\n\nControl.PageNext = PageNext;\nControl.PagePrevious = PagePrevious;\nControl.PageFirst = PageFirst;\nControl.PageLast = PageLast;\ncontrol.pagePrevious = pagePrevious;\ncontrol.pageNext = pageNext;\ncontrol.pageFirst = pageFirst;\ncontrol.pageLast = pageLast;\n\nControl.Contents = Contents;\ncontrol.contents = contents;\n\nControl.Title = Title;\ncontrol.title = title;\n\nControl.PublicationMetadata = PublicationMetadata;\ncontrol.publicationMetadata = publicationMetadata;\n\nControl.Preferences = Preferences;\ncontrol.preferences = preferences;\n\nControl.Widget = Widget;\ncontrol.widget = widget;\n\nControl.Citation = Citation;\ncontrol.citation = citation;\n\nControl.Search = Search;\ncontrol.search = search;\n\nControl.BibliographicInformation = BibliographicInformation;\ncontrol.bibliographicInformation = bibliographicInformation;\n\nControl.Download = Download;\ncontrol.download = download;\n\nControl.Navigator = Navigator;\ncontrol.navigator = navigator;\n\nControl.Fullscreen = Fullscreen;\ncontrol.fullscreen = fullscreen;\n\nexport {Control, control};\n","import {Evented} from './Events';\n\nvar Bus = Evented.extend({\n});\n\nvar instance;\nexport var bus = function() {\n  return instance || ( instance = new Bus() );\n}\n","import * as Browser from './Browser';\nexport {Browser};\n\nexport {Class} from './Class';\n\nimport {Evented} from './Events';\nexport {Evented};\nexport var Mixin = {Events: Evented.prototype};\n\nimport * as Util from './Util';\nexport {Util};\nexport {extend, bind, stamp, setOptions, inVp} from './Util';\nexport {bus} from './Bus';\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn (obj.foo + obj.bar + obj.trzy) === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n return false;\n}\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) {\n return (val !== _undefined) && (val !== null);\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n\treturn keys(isValue(object) ? Object(object) : object);\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.keys\n\t: require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, â€¦srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.assign\n\t: require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, â€¦options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","// Deprecated\n\n\"use strict\";\n\nmodule.exports = function (obj) {\n return typeof obj === \"function\";\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn (str.contains(\"dwa\") === true) && (str.contains(\"foo\") === false);\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? String.prototype.contains\n\t: require(\"./shim\");\n","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","/**\n * Core Utilities and Helpers\n * @module Core\n*/\n\n/**\n * Vendor prefixed requestAnimationFrame\n * @returns {function} requestAnimationFrame\n * @memberof Core\n */\nexport const requestAnimationFrame = (typeof window != \"undefined\") ? (window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame) : false;\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\nconst _URL = typeof URL != \"undefined\" ? URL : (typeof window != \"undefined\" ? (window.URL || window.webkitURL || window.mozURL) : undefined);\n\n/**\n * Generates a UUID\n * based on: http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n * @returns {string} uuid\n * @memberof Core\n */\nexport function uuid() {\n\tvar d = new Date().getTime();\n\tvar uuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n\t\tvar r = (d + Math.random()*16)%16 | 0;\n\t\td = Math.floor(d/16);\n\t\treturn (c==\"x\" ? r : (r&0x7|0x8)).toString(16);\n\t});\n\treturn uuid;\n}\n\n/**\n * Gets the height of a document\n * @returns {number} height\n * @memberof Core\n */\nexport function documentHeight() {\n\treturn Math.max(\n\t\t\tdocument.documentElement.clientHeight,\n\t\t\tdocument.body.scrollHeight,\n\t\t\tdocument.documentElement.scrollHeight,\n\t\t\tdocument.body.offsetHeight,\n\t\t\tdocument.documentElement.offsetHeight\n\t);\n}\n\n/**\n * Checks if a node is an element\n * @param {object} obj\n * @returns {boolean}\n * @memberof Core\n */\nexport function isElement(obj) {\n\treturn !!(obj && obj.nodeType == 1);\n}\n\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\nexport function isNumber(n) {\n\treturn !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\nexport function isFloat(n) {\n\tlet f = parseFloat(n);\n\n\tif (isNumber(n) === false) {\n\t\treturn false;\n\t}\n\n\tif (typeof n === \"string\" && n.indexOf(\".\") > -1) {\n\t\treturn true;\n\t}\n\n\treturn Math.floor(f) !== f;\n}\n\n/**\n * Get a prefixed css property\n * @param {string} unprefixed\n * @returns {string}\n * @memberof Core\n */\nexport function prefixed(unprefixed) {\n\tvar vendors = [\"Webkit\", \"webkit\", \"Moz\", \"O\", \"ms\" ];\n\tvar prefixes = [\"-webkit-\", \"-webkit-\", \"-moz-\", \"-o-\", \"-ms-\"];\n\tvar upper = unprefixed[0].toUpperCase() + unprefixed.slice(1);\n\tvar length = vendors.length;\n\n\tif (typeof(document) === \"undefined\" || typeof(document.body.style[unprefixed]) != \"undefined\") {\n\t\treturn unprefixed;\n\t}\n\n\tfor ( var i=0; i < length; i++ ) {\n\t\tif (typeof(document.body.style[vendors[i] + upper]) != \"undefined\") {\n\t\t\treturn prefixes[i] + unprefixed;\n\t\t}\n\t}\n\n\treturn unprefixed;\n}\n\n/**\n * Apply defaults to an object\n * @param {object} obj\n * @returns {object}\n * @memberof Core\n */\nexport function defaults(obj) {\n\tfor (var i = 1, length = arguments.length; i < length; i++) {\n\t\tvar source = arguments[i];\n\t\tfor (var prop in source) {\n\t\t\tif (obj[prop] === void 0) obj[prop] = source[prop];\n\t\t}\n\t}\n\treturn obj;\n}\n\n/**\n * Extend properties of an object\n * @param {object} target\n * @returns {object}\n * @memberof Core\n */\nexport function extend(target) {\n\tvar sources = [].slice.call(arguments, 1);\n\tsources.forEach(function (source) {\n\t\tif(!source) return;\n\t\tObject.getOwnPropertyNames(source).forEach(function(propName) {\n\t\t\tObject.defineProperty(target, propName, Object.getOwnPropertyDescriptor(source, propName));\n\t\t});\n\t});\n\treturn target;\n}\n\n/**\n * Fast quicksort insert for sorted array -- based on:\n *  http://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @returns {number} location (in array)\n * @memberof Core\n */\nexport function insert(item, array, compareFunction) {\n\tvar location = locationOf(item, array, compareFunction);\n\tarray.splice(location, 0, item);\n\n\treturn location;\n}\n\n/**\n * Finds where something would fit into a sorted array\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} location (in array)\n * @memberof Core\n */\nexport function locationOf(item, array, compareFunction, _start, _end) {\n\tvar start = _start || 0;\n\tvar end = _end || array.length;\n\tvar pivot = parseInt(start + (end - start) / 2);\n\tvar compared;\n\tif(!compareFunction){\n\t\tcompareFunction = function(a, b) {\n\t\t\tif(a > b) return 1;\n\t\t\tif(a < b) return -1;\n\t\t\tif(a == b) return 0;\n\t\t};\n\t}\n\tif(end-start <= 0) {\n\t\treturn pivot;\n\t}\n\n\tcompared = compareFunction(array[pivot], item);\n\tif(end-start === 1) {\n\t\treturn compared >= 0 ? pivot : pivot + 1;\n\t}\n\tif(compared === 0) {\n\t\treturn pivot;\n\t}\n\tif(compared === -1) {\n\t\treturn locationOf(item, array, compareFunction, pivot, end);\n\t} else{\n\t\treturn locationOf(item, array, compareFunction, start, pivot);\n\t}\n}\n\n/**\n * Finds index of something in a sorted array\n * Returns -1 if not found\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} index (in array) or -1\n * @memberof Core\n */\nexport function indexOfSorted(item, array, compareFunction, _start, _end) {\n\tvar start = _start || 0;\n\tvar end = _end || array.length;\n\tvar pivot = parseInt(start + (end - start) / 2);\n\tvar compared;\n\tif(!compareFunction){\n\t\tcompareFunction = function(a, b) {\n\t\t\tif(a > b) return 1;\n\t\t\tif(a < b) return -1;\n\t\t\tif(a == b) return 0;\n\t\t};\n\t}\n\tif(end-start <= 0) {\n\t\treturn -1; // Not found\n\t}\n\n\tcompared = compareFunction(array[pivot], item);\n\tif(end-start === 1) {\n\t\treturn compared === 0 ? pivot : -1;\n\t}\n\tif(compared === 0) {\n\t\treturn pivot; // Found\n\t}\n\tif(compared === -1) {\n\t\treturn indexOfSorted(item, array, compareFunction, pivot, end);\n\t} else{\n\t\treturn indexOfSorted(item, array, compareFunction, start, pivot);\n\t}\n}\n/**\n * Find the bounds of an element\n * taking padding and margin into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\nexport function bounds(el) {\n\n\tvar style = window.getComputedStyle(el);\n\tvar widthProps = [\"width\", \"paddingRight\", \"paddingLeft\", \"marginRight\", \"marginLeft\", \"borderRightWidth\", \"borderLeftWidth\"];\n\tvar heightProps = [\"height\", \"paddingTop\", \"paddingBottom\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\"];\n\n\tvar width = 0;\n\tvar height = 0;\n\n\twidthProps.forEach(function(prop){\n\t\twidth += parseFloat(style[prop]) || 0;\n\t});\n\n\theightProps.forEach(function(prop){\n\t\theight += parseFloat(style[prop]) || 0;\n\t});\n\n\treturn {\n\t\theight: height,\n\t\twidth: width\n\t};\n\n}\n\n/**\n * Find the bounds of an element\n * taking padding, margin and borders into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\nexport function borders(el) {\n\n\tvar style = window.getComputedStyle(el);\n\tvar widthProps = [\"paddingRight\", \"paddingLeft\", \"marginRight\", \"marginLeft\", \"borderRightWidth\", \"borderLeftWidth\"];\n\tvar heightProps = [\"paddingTop\", \"paddingBottom\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\"];\n\n\tvar width = 0;\n\tvar height = 0;\n\n\twidthProps.forEach(function(prop){\n\t\twidth += parseFloat(style[prop]) || 0;\n\t});\n\n\theightProps.forEach(function(prop){\n\t\theight += parseFloat(style[prop]) || 0;\n\t});\n\n\treturn {\n\t\theight: height,\n\t\twidth: width\n\t};\n\n}\n\n/**\n * Find the bounds of any node\n * allows for getting bounds of text nodes by wrapping them in a range\n * @param {node} node\n * @returns {BoundingClientRect}\n * @memberof Core\n */\nexport function nodeBounds(node) {\n\tlet elPos;\n\tlet doc = node.ownerDocument;\n\tif(node.nodeType == Node.TEXT_NODE){\n\t\tlet elRange = doc.createRange();\n\t\telRange.selectNodeContents(node);\n\t\telPos = elRange.getBoundingClientRect();\n\t} else {\n\t\telPos = node.getBoundingClientRect();\n\t}\n\treturn elPos;\n}\n\n/**\n * Find the equivelent of getBoundingClientRect of a browser window\n * @returns {{ width: Number, height: Number, top: Number, left: Number, right: Number, bottom: Number }}\n * @memberof Core\n */\nexport function windowBounds() {\n\n\tvar width = window.innerWidth;\n\tvar height = window.innerHeight;\n\n\treturn {\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: width,\n\t\tbottom: height,\n\t\twidth: width,\n\t\theight: height\n\t};\n\n}\n\n/**\n * Gets the index of a node in its parent\n * @param {Node} node\n * @param {string} typeId\n * @return {number} index\n * @memberof Core\n */\nexport function indexOfNode(node, typeId) {\n\tvar parent = node.parentNode;\n\tvar children = parent.childNodes;\n\tvar sib;\n\tvar index = -1;\n\tfor (var i = 0; i < children.length; i++) {\n\t\tsib = children[i];\n\t\tif (sib.nodeType === typeId) {\n\t\t\tindex++;\n\t\t}\n\t\tif (sib == node) break;\n\t}\n\n\treturn index;\n}\n\n/**\n * Gets the index of a text node in its parent\n * @param {node} textNode\n * @returns {number} index\n * @memberof Core\n */\nexport function indexOfTextNode(textNode) {\n\treturn indexOfNode(textNode, TEXT_NODE);\n}\n\n/**\n * Gets the index of an element node in its parent\n * @param {element} elementNode\n * @returns {number} index\n * @memberof Core\n */\nexport function indexOfElementNode(elementNode) {\n\treturn indexOfNode(elementNode, ELEMENT_NODE);\n}\n\n/**\n * Check if extension is xml\n * @param {string} ext\n * @returns {boolean}\n * @memberof Core\n */\nexport function isXml(ext) {\n\treturn [\"xml\", \"opf\", \"ncx\"].indexOf(ext) > -1;\n}\n\n/**\n * Create a new blob\n * @param {any} content\n * @param {string} mime\n * @returns {Blob}\n * @memberof Core\n */\nexport function createBlob(content, mime){\n\treturn new Blob([content], {type : mime });\n}\n\n/**\n * Create a new blob url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\nexport function createBlobUrl(content, mime){\n\tvar tempUrl;\n\tvar blob = createBlob(content, mime);\n\n\ttempUrl = _URL.createObjectURL(blob);\n\n\treturn tempUrl;\n}\n\n/**\n * Remove a blob url\n * @param {string} url\n * @memberof Core\n */\nexport function revokeBlobUrl(url){\n\treturn _URL.revokeObjectURL(url);\n}\n\n/**\n * Create a new base64 encoded url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\nexport function createBase64Url(content, mime){\n\tvar data;\n\tvar datauri;\n\n\tif (typeof(content) !== \"string\") {\n\t\t// Only handles strings\n\t\treturn;\n\t}\n\n\tdata = btoa(encodeURIComponent(content));\n\n\tdatauri = \"data:\" + mime + \";base64,\" + data;\n\n\treturn datauri;\n}\n\n/**\n * Get type of an object\n * @param {object} obj\n * @returns {string} type\n * @memberof Core\n */\nexport function type(obj){\n\treturn Object.prototype.toString.call(obj).slice(8, -1);\n}\n\n/**\n * Parse xml (or html) markup\n * @param {string} markup\n * @param {string} mime\n * @param {boolean} forceXMLDom force using xmlDom to parse instead of native parser\n * @returns {document} document\n * @memberof Core\n */\nexport function parse(markup, mime, forceXMLDom) {\n\tvar doc;\n\tvar Parser;\n\n\tif (typeof DOMParser === \"undefined\" || forceXMLDom) {\n\t\tParser = require(\"xmldom\").DOMParser;\n\t} else {\n\t\tParser = DOMParser;\n\t}\n\n\t// Remove byte order mark before parsing\n\t// https://www.w3.org/International/questions/qa-byte-order-mark\n\tif(markup.charCodeAt(0) === 0xFEFF) {\n\t\tmarkup = markup.slice(1);\n\t}\n\n\tdoc = new Parser().parseFromString(markup, mime);\n\n\treturn doc;\n}\n\n/**\n * querySelector polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element} element\n * @memberof Core\n */\nexport function qs(el, sel) {\n\tvar elements;\n\tif (!el) {\n\t\tthrow new Error(\"No Element Provided\");\n\t}\n\n\tif (typeof el.querySelector != \"undefined\") {\n\t\treturn el.querySelector(sel);\n\t} else {\n\t\telements = el.getElementsByTagName(sel);\n\t\tif (elements.length) {\n\t\t\treturn elements[0];\n\t\t}\n\t}\n}\n\n/**\n * querySelectorAll polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function qsa(el, sel) {\n\n\tif (typeof el.querySelector != \"undefined\") {\n\t\treturn el.querySelectorAll(sel);\n\t} else {\n\t\treturn el.getElementsByTagName(sel);\n\t}\n}\n\n/**\n * querySelector by property\n * @param {element} el\n * @param {string} sel selector string\n * @param {object[]} props\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function qsp(el, sel, props) {\n\tvar q, filtered;\n\tif (typeof el.querySelector != \"undefined\") {\n\t\tsel += \"[\";\n\t\tfor (var prop in props) {\n\t\t\tsel += prop + \"~='\" + props[prop] + \"'\";\n\t\t}\n\t\tsel += \"]\";\n\t\treturn el.querySelector(sel);\n\t} else {\n\t\tq = el.getElementsByTagName(sel);\n\t\tfiltered = Array.prototype.slice.call(q, 0).filter(function(el) {\n\t\t\tfor (var prop in props) {\n\t\t\t\tif(el.getAttribute(prop) === props[prop]){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tif (filtered) {\n\t\t\treturn filtered[0];\n\t\t}\n\t}\n}\n\n/**\n * Sprint through all text nodes in a document\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n */\nexport function sprint(root, func) {\n\tvar doc = root.ownerDocument || root;\n\tif (typeof(doc.createTreeWalker) !== \"undefined\") {\n\t\ttreeWalker(root, func, NodeFilter.SHOW_TEXT);\n\t} else {\n\t\twalk(root, function(node) {\n\t\t\tif (node && node.nodeType === 3) { // Node.TEXT_NODE\n\t\t\t\tfunc(node);\n\t\t\t}\n\t\t}, true);\n\t}\n}\n\n/**\n * Create a treeWalker\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n * @param  {function | object} filter funtion or object to filter with\n */\nexport function treeWalker(root, func, filter) {\n\tvar treeWalker = document.createTreeWalker(root, filter, null, false);\n\tlet node;\n\twhile ((node = treeWalker.nextNode())) {\n\t\tfunc(node);\n\t}\n}\n\n/**\n * @memberof Core\n * @param {node} node\n * @param {callback} return false for continue,true for break inside callback\n */\nexport function walk(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tnode = node.firstChild;\n\tif(node){\n\t\tdo{\n\t\t\tlet walked = walk(node,callback);\n\t\t\tif(walked){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tnode = node.nextSibling;\n\t\t} while(node);\n\t}\n}\n\n/**\n * Convert a blob to a base64 encoded string\n * @param {Blog} blob\n * @returns {string}\n * @memberof Core\n */\nexport function blob2base64(blob) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar reader = new FileReader();\n\t\treader.readAsDataURL(blob);\n\t\treader.onloadend = function() {\n\t\t\tresolve(reader.result);\n\t\t};\n\t});\n}\n\n\n/**\n * Creates a new pending promise and provides methods to resolve or reject it.\n * From: https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred#backwards_forwards_compatible\n * @memberof Core\n */\nexport function defer() {\n\t/* A method to resolve the associated Promise with the value passed.\n\t * If the promise is already settled it does nothing.\n\t *\n\t * @param {anything} value : This value is used to resolve the promise\n\t * If the value is a Promise then the associated promise assumes the state\n\t * of Promise passed as value.\n\t */\n\tthis.resolve = null;\n\n\t/* A method to reject the assocaited Promise with the value passed.\n\t * If the promise is already settled it does nothing.\n\t *\n\t * @param {anything} reason: The reason for the rejection of the Promise.\n\t * Generally its an Error object. If however a Promise is passed, then the Promise\n\t * itself will be the reason for rejection no matter the state of the Promise.\n\t */\n\tthis.reject = null;\n\n\tthis.id = uuid();\n\n\t/* A newly created Pomise object.\n\t * Initially in pending state.\n\t */\n\tthis.promise = new Promise((resolve, reject) => {\n\t\tthis.resolve = resolve;\n\t\tthis.reject = reject;\n\t});\n\tObject.freeze(this);\n}\n\n/**\n * querySelector with filter by epub type\n * @param {element} html\n * @param {string} element element type to find\n * @param {string} type epub type to find\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function querySelectorByType(html, element, type){\n\tvar query;\n\tif (typeof html.querySelector != \"undefined\") {\n\t\tquery = html.querySelector(`${element}[*|type=\"${type}\"]`);\n\t}\n\t// Handle IE not supporting namespaced epub:type in querySelector\n\tif(!query || query.length === 0) {\n\t\tquery = qsa(html, element);\n\t\tfor (var i = 0; i < query.length; i++) {\n\t\t\tif(query[i].getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") === type ||\n\t\t\t\t query[i].getAttribute(\"epub:type\") === type) {\n\t\t\t\treturn query[i];\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn query;\n\t}\n}\n\n/**\n * Find direct decendents of an element\n * @param {element} el\n * @returns {element[]} children\n * @memberof Core\n */\nexport function findChildren(el) {\n\tvar result = [];\n\tvar childNodes = el.childNodes;\n\tfor (var i = 0; i < childNodes.length; i++) {\n\t\tlet node = childNodes[i];\n\t\tif (node.nodeType === 1) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n\n/**\n * Find all parents (ancestors) of an element\n * @param {element} node\n * @returns {element[]} parents\n * @memberof Core\n */\nexport function parents(node) {\n\tvar nodes = [node];\n\tfor (; node; node = node.parentNode) {\n\t\tnodes.unshift(node);\n\t}\n\treturn nodes\n}\n\n/**\n * Find all direct decendents of a specific type\n * @param {element} el\n * @param {string} nodeName\n * @param {boolean} [single]\n * @returns {element[]} children\n * @memberof Core\n */\nexport function filterChildren(el, nodeName, single) {\n\tvar result = [];\n\tvar childNodes = el.childNodes;\n\tfor (var i = 0; i < childNodes.length; i++) {\n\t\tlet node = childNodes[i];\n\t\tif (node.nodeType === 1 && node.nodeName.toLowerCase() === nodeName) {\n\t\t\tif (single) {\n\t\t\t\treturn node;\n\t\t\t} else {\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t}\n\t}\n\tif (!single) {\n\t\treturn result;\n\t}\n}\n\n/**\n * Filter all parents (ancestors) with tag name\n * @param {element} node\n * @param {string} tagname\n * @returns {element[]} parents\n * @memberof Core\n */\nexport function getParentByTagName(node, tagname) {\n\tlet parent;\n\tif (node === null || tagname === '') return;\n\tparent = node.parentNode;\n\twhile (parent.nodeType === 1) {\n\t\tif (parent.tagName.toLowerCase() === tagname) {\n\t\t\treturn parent;\n\t\t}\n\t\tparent = parent.parentNode;\n\t}\n}\n\n/**\n * Lightweight Polyfill for DOM Range\n * @class\n * @memberof Core\n */\nexport class RangeObject {\n\tconstructor() {\n\t\tthis.collapsed = false;\n\t\tthis.commonAncestorContainer = undefined;\n\t\tthis.endContainer = undefined;\n\t\tthis.endOffset = undefined;\n\t\tthis.startContainer = undefined;\n\t\tthis.startOffset = undefined;\n\t}\n\n\tsetStart(startNode, startOffset) {\n\t\tthis.startContainer = startNode;\n\t\tthis.startOffset = startOffset;\n\n\t\tif (!this.endContainer) {\n\t\t\tthis.collapse(true);\n\t\t} else {\n\t\t\tthis.commonAncestorContainer = this._commonAncestorContainer();\n\t\t}\n\n\t\tthis._checkCollapsed();\n\t}\n\n\tsetEnd(endNode, endOffset) {\n\t\tthis.endContainer = endNode;\n\t\tthis.endOffset = endOffset;\n\n\t\tif (!this.startContainer) {\n\t\t\tthis.collapse(false);\n\t\t} else {\n\t\t\tthis.collapsed = false;\n\t\t\tthis.commonAncestorContainer = this._commonAncestorContainer();\n\t\t}\n\n\t\tthis._checkCollapsed();\n\t}\n\n\tcollapse(toStart) {\n\t\tthis.collapsed = true;\n\t\tif (toStart) {\n\t\t\tthis.endContainer = this.startContainer;\n\t\t\tthis.endOffset = this.startOffset;\n\t\t\tthis.commonAncestorContainer = this.startContainer.parentNode;\n\t\t} else {\n\t\t\tthis.startContainer = this.endContainer;\n\t\t\tthis.startOffset = this.endOffset;\n\t\t\tthis.commonAncestorContainer = this.endOffset.parentNode;\n\t\t}\n\t}\n\n\tselectNode(referenceNode) {\n\t\tlet parent = referenceNode.parentNode;\n\t\tlet index = Array.prototype.indexOf.call(parent.childNodes, referenceNode);\n\t\tthis.setStart(parent, index);\n\t\tthis.setEnd(parent, index + 1);\n\t}\n\n\tselectNodeContents(referenceNode) {\n\t\tlet end = referenceNode.childNodes[referenceNode.childNodes - 1];\n\t\tlet endIndex = (referenceNode.nodeType === 3) ?\n\t\t\t\treferenceNode.textContent.length : parent.childNodes.length;\n\t\tthis.setStart(referenceNode, 0);\n\t\tthis.setEnd(referenceNode, endIndex);\n\t}\n\n\t_commonAncestorContainer(startContainer, endContainer) {\n\t\tvar startParents = parents(startContainer || this.startContainer);\n\t\tvar endParents = parents(endContainer || this.endContainer);\n\n\t\tif (startParents[0] != endParents[0]) return undefined;\n\n\t\tfor (var i = 0; i < startParents.length; i++) {\n\t\t\tif (startParents[i] != endParents[i]) {\n\t\t\t\treturn startParents[i - 1];\n\t\t\t}\n\t\t}\n\t}\n\n\t_checkCollapsed() {\n\t\tif (this.startContainer === this.endContainer &&\n\t\t\t\tthis.startOffset === this.endOffset) {\n\t\t\tthis.collapsed = true;\n\t\t} else {\n\t\t\tthis.collapsed = false;\n\t\t}\n\t}\n\n\ttoString() {\n\t\t// TODO: implement walking between start and end to find text\n\t}\n}\n","'use strict';\n\nif (!process) {\n  var process = {\n    \"cwd\" : function () { return '/' }\n  };\n}\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + path);\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47/*/*/)\n      break;\n    else\n      code = 47/*/*/;\n    if (code === 47/*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 ||\n            res.charCodeAt(res.length - 1) !== 46/*.*/ ||\n            res.charCodeAt(res.length - 2) !== 46/*.*/) {\n          if (res.length > 2) {\n            var start = res.length - 1;\n            var j = start;\n            for (; j >= 0; --j) {\n              if (res.charCodeAt(j) === 47/*/*/)\n                break;\n            }\n            if (j !== start) {\n              if (j === -1)\n                res = '';\n              else\n                res = res.slice(0, j);\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46/*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base ||\n    ((pathObject.name || '') + (pathObject.ext || ''));\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47/*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0)\n      return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47/*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47/*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute)\n      path = '.';\n    if (path.length > 0 && trailingSeparator)\n      path += '/';\n\n    if (isAbsolute)\n      return '/' + path;\n    return path;\n  },\n\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47/*/*/;\n  },\n\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to)\n      return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to)\n      return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47/*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = (fromEnd - fromStart);\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47/*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = (toEnd - toStart);\n\n    // Compare paths to find the longest common path from root\n    var length = (fromLen < toLen ? fromLen : toLen);\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47/*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47/*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47/*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47/*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47/*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0)\n      return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = (code === 47/*/*/);\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1)\n      return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1)\n      return '//';\n    return path.slice(0, end);\n  },\n\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string')\n      throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path)\n        return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1)\n        return '';\n      return path.slice(start, end);\n    }\n  },\n\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError(\n        'Parameter \"pathObject\" must be an object, not ' + typeof(pathObject)\n      );\n    }\n    return _format('/', pathObject);\n  },\n\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0)\n      return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = (code === 47/*/*/);\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path.slice(1, end);\n        else\n          ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0)\n      ret.dir = path.slice(0, startPart - 1);\n    else if (isAbsolute)\n      ret.dir = '/';\n\n    return ret;\n  },\n\n\n  sep: '/',\n  delimiter: ':',\n  posix: null\n};\n\n\nmodule.exports = posix;\n","import path from \"path-webpack\";\n\n/**\n * Creates a Path object for parsing and manipulation of a path strings\n *\n * Uses a polyfill for Nodejs path: https://nodejs.org/api/path.html\n * @param\t{string} pathString\ta url string (relative or absolute)\n * @class\n */\nclass Path {\n\tconstructor(pathString) {\n\t\tvar protocol;\n\t\tvar parsed;\n\n\t\tprotocol = pathString.indexOf(\"://\");\n\t\tif (protocol > -1) {\n\t\t\tpathString = new URL(pathString).pathname;\n\t\t}\n\n\t\tparsed = this.parse(pathString);\n\n\t\tthis.path = pathString;\n\n\t\tif (this.isDirectory(pathString)) {\n\t\t\tthis.directory = pathString;\n\t\t} else {\n\t\t\tthis.directory = parsed.dir + \"/\";\n\t\t}\n\n\t\tthis.filename = parsed.base;\n\t\tthis.extension = parsed.ext.slice(1);\n\n\t}\n\n\t/**\n\t * Parse the path: https://nodejs.org/api/path.html#path_path_parse_path\n\t * @param\t{string} what\n\t * @returns {object}\n\t */\n\tparse (what) {\n\t\treturn path.parse(what);\n\t}\n\n\t/**\n\t * @param\t{string} what\n\t * @returns {boolean}\n\t */\n\tisAbsolute (what) {\n\t\treturn path.isAbsolute(what || this.path);\n\t}\n\n\t/**\n\t * Check if path ends with a directory\n\t * @param\t{string} what\n\t * @returns {boolean}\n\t */\n\tisDirectory (what) {\n\t\treturn (what.charAt(what.length-1) === \"/\");\n\t}\n\n\t/**\n\t * Resolve a path against the directory of the Path\n\t *\n\t * https://nodejs.org/api/path.html#path_path_resolve_paths\n\t * @param\t{string} what\n\t * @returns {string} resolved\n\t */\n\tresolve (what) {\n\t\treturn path.resolve(this.directory, what);\n\t}\n\n\t/**\n\t * Resolve a path relative to the directory of the Path\n\t *\n\t * https://nodejs.org/api/path.html#path_path_relative_from_to\n\t * @param\t{string} what\n\t * @returns {string} relative\n\t */\n\trelative (what) {\n\t\tvar isAbsolute = what && (what.indexOf(\"://\") > -1);\n\n\t\tif (isAbsolute) {\n\t\t\treturn what;\n\t\t}\n\n\t\treturn path.relative(this.directory, what);\n\t}\n\n\tsplitPath(filename) {\n\t\treturn this.splitPathRe.exec(filename).slice(1);\n\t}\n\n\t/**\n\t * Return the path string\n\t * @returns {string} path\n\t */\n\ttoString () {\n\t\treturn this.path;\n\t}\n}\n\nexport default Path;\n","import Path from \"./path\";\nimport path from \"path-webpack\";\n\n/**\n * creates a Url object for parsing and manipulation of a url string\n * @param\t{string} urlString\ta url string (relative or absolute)\n * @param\t{string} [baseString] optional base for the url,\n * default to window.location.href\n */\nclass Url {\n\tconstructor(urlString, baseString) {\n\t\tvar absolute = (urlString.indexOf(\"://\") > -1);\n\t\tvar pathname = urlString;\n\t\tvar basePath;\n\n\t\tthis.Url = undefined;\n\t\tthis.href = urlString;\n\t\tthis.protocol = \"\";\n\t\tthis.origin = \"\";\n\t\tthis.hash = \"\";\n\t\tthis.hash = \"\";\n\t\tthis.search = \"\";\n\t\tthis.base = baseString;\n\n\t\tif (!absolute &&\n\t\t\t\tbaseString !== false &&\n\t\t\t\ttypeof(baseString) !== \"string\" &&\n\t\t\t\twindow && window.location) {\n\t\t\tthis.base = window.location.href;\n\t\t}\n\n\t\t// URL Polyfill doesn't throw an error if base is empty\n\t\tif (absolute || this.base) {\n\t\t\ttry {\n\t\t\t\tif (this.base) { // Safari doesn't like an undefined base\n\t\t\t\t\tthis.Url = new URL(urlString, this.base);\n\t\t\t\t} else {\n\t\t\t\t\tthis.Url = new URL(urlString);\n\t\t\t\t}\n\t\t\t\tthis.href = this.Url.href;\n\n\t\t\t\tthis.protocol = this.Url.protocol;\n\t\t\t\tthis.origin = this.Url.origin;\n\t\t\t\tthis.hash = this.Url.hash;\n\t\t\t\tthis.search = this.Url.search;\n\n\t\t\t\tpathname = this.Url.pathname;\n\t\t\t} catch (e) {\n\t\t\t\t// Skip URL parsing\n\t\t\t\tthis.Url = undefined;\n\t\t\t\t// resolve the pathname from the base\n\t\t\t\tif (this.base) {\n\t\t\t\t\tbasePath = new Path(this.base);\n\t\t\t\t\tpathname = basePath.resolve(pathname);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.Path = new Path(pathname);\n\n\t\tthis.directory = this.Path.directory;\n\t\tthis.filename = this.Path.filename;\n\t\tthis.extension = this.Path.extension;\n\n\t}\n\n\t/**\n\t * @returns {Path}\n\t */\n\tpath () {\n\t\treturn this.Path;\n\t}\n\n\t/**\n\t * Resolves a relative path to a absolute url\n\t * @param {string} what\n\t * @returns {string} url\n\t */\n\tresolve (what) {\n\t\tvar isAbsolute = (what.indexOf(\"://\") > -1);\n\t\tvar fullpath;\n\n\t\tif (isAbsolute) {\n\t\t\treturn what;\n\t\t}\n\n\t\tfullpath = path.resolve(this.directory, what);\n\t\treturn this.origin + fullpath;\n\t}\n\n\t/**\n\t * Resolve a path relative to the url\n\t * @param {string} what\n\t * @returns {string} path\n\t */\n\trelative (what) {\n\t\treturn path.relative(what, this.directory);\n\t}\n\n\t/**\n\t * @returns {string}\n\t */\n\ttoString () {\n\t\treturn this.href;\n\t}\n}\n\nexport default Url;\n","import {extend, type, findChildren, RangeObject, isNumber} from \"./utils/core\";\n\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\n\n/**\n\t* Parsing and creation of EpubCFIs: http://www.idpf.org/epub/linking/cfi/epub-cfi.html\n\n\t* Implements:\n\t* - Character Offset: epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)\n\t* - Simple Ranges : epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)\n\n\t* Does Not Implement:\n\t* - Temporal Offset (~)\n\t* - Spatial Offset (@)\n\t* - Temporal-Spatial Offset (~ + @)\n\t* - Text Location Assertion ([)\n\t* @class\n\t@param {string | Range | Node } [cfiFrom]\n\t@param {string | object} [base]\n\t@param {string} [ignoreClass] class to ignore when parsing DOM\n*/\nclass EpubCFI {\n\tconstructor(cfiFrom, base, ignoreClass){\n\t\tvar type;\n\n\t\tthis.str = \"\";\n\n\t\tthis.base = {};\n\t\tthis.spinePos = 0; // For compatibility\n\n\t\tthis.range = false; // true || false;\n\n\t\tthis.path = {};\n\t\tthis.start = null;\n\t\tthis.end = null;\n\n\t\t// Allow instantiation without the \"new\" keyword\n\t\tif (!(this instanceof EpubCFI)) {\n\t\t\treturn new EpubCFI(cfiFrom, base, ignoreClass);\n\t\t}\n\n\t\tif(typeof base === \"string\") {\n\t\t\tthis.base = this.parseComponent(base);\n\t\t} else if(typeof base === \"object\" && base.steps) {\n\t\t\tthis.base = base;\n\t\t}\n\n\t\ttype = this.checkType(cfiFrom);\n\n\n\t\tif(type === \"string\") {\n\t\t\tthis.str = cfiFrom;\n\t\t\treturn extend(this, this.parse(cfiFrom));\n\t\t} else if (type === \"range\") {\n\t\t\treturn extend(this, this.fromRange(cfiFrom, this.base, ignoreClass));\n\t\t} else if (type === \"node\") {\n\t\t\treturn extend(this, this.fromNode(cfiFrom, this.base, ignoreClass));\n\t\t} else if (type === \"EpubCFI\" && cfiFrom.path) {\n\t\t\treturn cfiFrom;\n\t\t} else if (!cfiFrom) {\n\t\t\treturn this;\n\t\t} else {\n\t\t\tthrow new TypeError(\"not a valid argument for EpubCFI\");\n\t\t}\n\n\t}\n\n\t/**\n\t * Check the type of constructor input\n\t * @private\n\t */\n\tcheckType(cfi) {\n\n\t\tif (this.isCfiString(cfi)) {\n\t\t\treturn \"string\";\n\t\t// Is a range object\n\t\t} else if (cfi && typeof cfi === \"object\" && (type(cfi) === \"Range\" || typeof(cfi.startContainer) != \"undefined\")){\n\t\t\treturn \"range\";\n\t\t} else if (cfi && typeof cfi === \"object\" && typeof(cfi.nodeType) != \"undefined\" ){ // || typeof cfi === \"function\"\n\t\t\treturn \"node\";\n\t\t} else if (cfi && typeof cfi === \"object\" && cfi instanceof EpubCFI){\n\t\t\treturn \"EpubCFI\";\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Parse a cfi string to a CFI object representation\n\t * @param {string} cfiStr\n\t * @returns {object} cfi\n\t */\n\tparse(cfiStr) {\n\t\tvar cfi = {\n\t\t\tspinePos: -1,\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\t\tvar baseComponent, pathComponent, range;\n\n\t\tif(typeof cfiStr !== \"string\") {\n\t\t\treturn {spinePos: -1};\n\t\t}\n\n\t\tif(cfiStr.indexOf(\"epubcfi(\") === 0 && cfiStr[cfiStr.length-1] === \")\") {\n\t\t\t// Remove intial epubcfi( and ending )\n\t\t\tcfiStr = cfiStr.slice(8, cfiStr.length-1);\n\t\t}\n\n\t\tbaseComponent = this.getChapterComponent(cfiStr);\n\n\t\t// Make sure this is a valid cfi or return\n\t\tif(!baseComponent) {\n\t\t\treturn {spinePos: -1};\n\t\t}\n\n\t\tcfi.base = this.parseComponent(baseComponent);\n\n\t\tpathComponent = this.getPathComponent(cfiStr);\n\t\tcfi.path = this.parseComponent(pathComponent);\n\n\t\trange = this.getRange(cfiStr);\n\n\t\tif(range) {\n\t\t\tcfi.range = true;\n\t\t\tcfi.start = this.parseComponent(range[0]);\n\t\t\tcfi.end = this.parseComponent(range[1]);\n\t\t}\n\n\t\t// Get spine node position\n\t\t// cfi.spineSegment = cfi.base.steps[1];\n\n\t\t// Chapter segment is always the second step\n\t\tcfi.spinePos = cfi.base.steps[1].index;\n\n\t\treturn cfi;\n\t}\n\n\tparseComponent(componentStr){\n\t\tvar component = {\n\t\t\tsteps: [],\n\t\t\tterminal: {\n\t\t\t\toffset: null,\n\t\t\t\tassertion: null\n\t\t\t}\n\t\t};\n\t\tvar parts = componentStr.split(\":\");\n\t\tvar steps = parts[0].split(\"/\");\n\t\tvar terminal;\n\n\t\tif(parts.length > 1) {\n\t\t\tterminal = parts[1];\n\t\t\tcomponent.terminal = this.parseTerminal(terminal);\n\t\t}\n\n\t\tif (steps[0] === \"\") {\n\t\t\tsteps.shift(); // Ignore the first slash\n\t\t}\n\n\t\tcomponent.steps = steps.map(function(step){\n\t\t\treturn this.parseStep(step);\n\t\t}.bind(this));\n\n\t\treturn component;\n\t}\n\n\tparseStep(stepStr){\n\t\tvar type, num, index, has_brackets, id;\n\n\t\thas_brackets = stepStr.match(/\\[(.*)\\]/);\n\t\tif(has_brackets && has_brackets[1]){\n\t\t\tid = has_brackets[1];\n\t\t}\n\n\t\t//-- Check if step is a text node or element\n\t\tnum = parseInt(stepStr);\n\n\t\tif(isNaN(num)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(num % 2 === 0) { // Even = is an element\n\t\t\ttype = \"element\";\n\t\t\tindex = num / 2 - 1;\n\t\t} else {\n\t\t\ttype = \"text\";\n\t\t\tindex = (num - 1 ) / 2;\n\t\t}\n\n\t\treturn {\n\t\t\t\"type\" : type,\n\t\t\t\"index\" : index,\n\t\t\t\"id\" : id || null\n\t\t};\n\t}\n\n\tparseTerminal(termialStr){\n\t\tvar characterOffset, textLocationAssertion;\n\t\tvar assertion = termialStr.match(/\\[(.*)\\]/);\n\n\t\tif(assertion && assertion[1]){\n\t\t\tcharacterOffset = parseInt(termialStr.split(\"[\")[0]);\n\t\t\ttextLocationAssertion = assertion[1];\n\t\t} else {\n\t\t\tcharacterOffset = parseInt(termialStr);\n\t\t}\n\n\t\tif (!isNumber(characterOffset)) {\n\t\t\tcharacterOffset = null;\n\t\t}\n\n\t\treturn {\n\t\t\t\"offset\": characterOffset,\n\t\t\t\"assertion\": textLocationAssertion\n\t\t};\n\n\t}\n\n\tgetChapterComponent(cfiStr) {\n\n\t\tvar indirection = cfiStr.split(\"!\");\n\n\t\treturn indirection[0];\n\t}\n\n\tgetPathComponent(cfiStr) {\n\n\t\tvar indirection = cfiStr.split(\"!\");\n\n\t\tif(indirection[1]) {\n\t\t\tlet ranges = indirection[1].split(\",\");\n\t\t\treturn ranges[0];\n\t\t}\n\n\t}\n\n\tgetRange(cfiStr) {\n\n\t\tvar ranges = cfiStr.split(\",\");\n\n\t\tif(ranges.length === 3){\n\t\t\treturn [\n\t\t\t\tranges[1],\n\t\t\t\tranges[2]\n\t\t\t];\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetCharecterOffsetComponent(cfiStr) {\n\t\tvar splitStr = cfiStr.split(\":\");\n\t\treturn splitStr[1] || \"\";\n\t}\n\n\tjoinSteps(steps) {\n\t\tif(!steps) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn steps.map(function(part){\n\t\t\tvar segment = \"\";\n\n\t\t\tif(part.type === \"element\") {\n\t\t\t\tsegment += (part.index + 1) * 2;\n\t\t\t}\n\n\t\t\tif(part.type === \"text\") {\n\t\t\t\tsegment += 1 + (2 * part.index); // TODO: double check that this is odd\n\t\t\t}\n\n\t\t\tif(part.id) {\n\t\t\t\tsegment += \"[\" + part.id + \"]\";\n\t\t\t}\n\n\t\t\treturn segment;\n\n\t\t}).join(\"/\");\n\n\t}\n\n\tsegmentString(segment) {\n\t\tvar segmentString = \"/\";\n\n\t\tsegmentString += this.joinSteps(segment.steps);\n\n\t\tif(segment.terminal && segment.terminal.offset != null){\n\t\t\tsegmentString += \":\" + segment.terminal.offset;\n\t\t}\n\n\t\tif(segment.terminal && segment.terminal.assertion != null){\n\t\t\tsegmentString += \"[\" + segment.terminal.assertion + \"]\";\n\t\t}\n\n\t\treturn segmentString;\n\t}\n\n\t/**\n\t * Convert CFI to a epubcfi(...) string\n\t * @returns {string} epubcfi\n\t */\n\ttoString(cfi) {\n\t\tif ( ! cfi ) { cfi = this; }\n\t\tvar cfiString = \"epubcfi(\";\n\n\t\tcfiString += this.segmentString(cfi.base);\n\n\t\tcfiString += \"!\";\n\t\tcfiString += this.segmentString(cfi.path);\n\n\t\t// Add Range, if present\n\t\tif(cfi.range && cfi.start) {\n\t\t\tcfiString += \",\";\n\t\t\tcfiString += this.segmentString(cfi.start);\n\t\t}\n\n\t\tif(cfi.range && cfi.end) {\n\t\t\tcfiString += \",\";\n\t\t\tcfiString += this.segmentString(cfi.end);\n\t\t}\n\n\t\tcfiString += \")\";\n\n\t\treturn cfiString;\n\t}\n\n\n\t/**\n\t * Compare which of two CFIs is earlier in the text\n\t * @returns {number} First is earlier = -1, Second is earlier = 1, They are equal = 0\n\t */\n\tcompare(cfiOne, cfiTwo) {\n\t\tvar stepsA, stepsB;\n\t\tvar terminalA, terminalB;\n\n\t\tvar rangeAStartSteps, rangeAEndSteps;\n\t\tvar rangeBEndSteps, rangeBEndSteps;\n\t\tvar rangeAStartTerminal, rangeAEndTerminal;\n\t\tvar rangeBStartTerminal, rangeBEndTerminal;\n\n\t\tif(typeof cfiOne === \"string\") {\n\t\t\tcfiOne = new EpubCFI(cfiOne);\n\t\t}\n\t\tif(typeof cfiTwo === \"string\") {\n\t\t\tcfiTwo = new EpubCFI(cfiTwo);\n\t\t}\n\t\t// Compare Spine Positions\n\t\tif(cfiOne.spinePos > cfiTwo.spinePos) {\n\t\t\treturn 1;\n\t\t}\n\t\tif(cfiOne.spinePos < cfiTwo.spinePos) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (cfiOne.range) {\n\t\t\tstepsA = cfiOne.path.steps.concat(cfiOne.start.steps);\n\t\t\tterminalA = cfiOne.start.terminal;\n\t\t} else {\n\t\t\tstepsA = cfiOne.path.steps;\n\t\t\tterminalA = cfiOne.path.terminal;\n\t\t}\n\n\t\tif (cfiTwo.range) {\n\t\t\tstepsB = cfiTwo.path.steps.concat(cfiTwo.start.steps);\n\t\t\tterminalB = cfiTwo.start.terminal;\n\t\t} else {\n\t\t\tstepsB = cfiTwo.path.steps;\n\t\t\tterminalB = cfiTwo.path.terminal;\n\t\t}\n\n\t\t// Compare Each Step in the First item\n\t\tfor (var i = 0; i < stepsA.length; i++) {\n\t\t\tif(!stepsA[i]) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif(!stepsB[i]) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif(stepsA[i].index > stepsB[i].index) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif(stepsA[i].index < stepsB[i].index) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\t// Otherwise continue checking\n\t\t}\n\n\t\t// All steps in First equal to Second and First is Less Specific\n\t\tif(stepsA.length < stepsB.length) {\n\t\t\treturn 1;\n\t\t}\n\n\t\t// Compare the charecter offset of the text node\n\t\tif(terminalA.offset > terminalB.offset) {\n\t\t\treturn 1;\n\t\t}\n\t\tif(terminalA.offset < terminalB.offset) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// CFI's are equal\n\t\treturn 0;\n\t}\n\n\tstep(node) {\n\t\tvar nodeType = (node.nodeType === TEXT_NODE) ? \"text\" : \"element\";\n\n\t\treturn {\n\t\t\t\"id\" : node.id,\n\t\t\t\"tagName\" : node.tagName,\n\t\t\t\"type\" : nodeType,\n\t\t\t\"index\" : this.position(node)\n\t\t};\n\t}\n\n\tfilteredStep(node, ignoreClass) {\n\t\tvar filteredNode = this.filter(node, ignoreClass);\n\t\tvar nodeType;\n\n\t\t// Node filtered, so ignore\n\t\tif (!filteredNode) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Otherwise add the filter node in\n\t\tnodeType = (filteredNode.nodeType === TEXT_NODE) ? \"text\" : \"element\";\n\n\t\treturn {\n\t\t\t\"id\" : filteredNode.id,\n\t\t\t\"tagName\" : filteredNode.tagName,\n\t\t\t\"type\" : nodeType,\n\t\t\t\"index\" : this.filteredPosition(filteredNode, ignoreClass)\n\t\t};\n\t}\n\n\tpathTo(node, offset, ignoreClass) {\n\t\tvar segment = {\n\t\t\tsteps: [],\n\t\t\tterminal: {\n\t\t\t\toffset: null,\n\t\t\t\tassertion: null\n\t\t\t}\n\t\t};\n\t\tvar currentNode = node;\n\t\tvar step;\n\n\t\twhile(currentNode && currentNode.parentNode &&\n\t\t\t\t\tcurrentNode.parentNode.nodeType != DOCUMENT_NODE) {\n\n\t\t\tif (ignoreClass) {\n\t\t\t\tstep = this.filteredStep(currentNode, ignoreClass);\n\t\t\t} else {\n\t\t\t\tstep = this.step(currentNode);\n\t\t\t}\n\n\t\t\tif (step) {\n\t\t\t\tsegment.steps.unshift(step);\n\t\t\t}\n\n\t\t\tcurrentNode = currentNode.parentNode;\n\n\t\t}\n\n\t\tif (offset != null && offset >= 0) {\n\n\t\t\tsegment.terminal.offset = offset;\n\n\t\t\t// Make sure we are getting to a textNode if there is an offset\n\t\t\tif(segment.steps[segment.steps.length-1].type != \"text\") {\n\t\t\t\tsegment.steps.push({\n\t\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\t\"index\" : 0\n\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn segment;\n\t}\n\n\tequalStep(stepA, stepB) {\n\t\tif (!stepA || !stepB) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(stepA.index === stepB.index &&\n\t\t\t stepA.id === stepB.id &&\n\t\t\t stepA.type === stepB.type) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Create a CFI object from a Range\n\t * @param {Range} range\n\t * @param {string | object} base\n\t * @param {string} [ignoreClass]\n\t * @returns {object} cfi\n\t */\n\tfromRange(range, base, ignoreClass) {\n\t\tvar cfi = {\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\n\t\tvar start = range.startContainer;\n\t\tvar end = range.endContainer;\n\n\t\tvar startOffset = range.startOffset;\n\t\tvar endOffset = range.endOffset;\n\n\t\tvar needsIgnoring = false;\n\n\t\tif (ignoreClass) {\n\t\t\t// Tell pathTo if / what to ignore\n\t\t\tneedsIgnoring = (start.ownerDocument.querySelector(\".\" + ignoreClass) != null);\n\t\t}\n\n\n\t\tif (typeof base === \"string\") {\n\t\t\tcfi.base = this.parseComponent(base);\n\t\t\tcfi.spinePos = cfi.base.steps[1].index;\n\t\t} else if (typeof base === \"object\") {\n\t\t\tcfi.base = base;\n\t\t}\n\n\t\tif (range.collapsed) {\n\t\t\tif (needsIgnoring) {\n\t\t\t\tstartOffset = this.patchOffset(start, startOffset, ignoreClass);\n\t\t\t}\n\t\t\tcfi.path = this.pathTo(start, startOffset, ignoreClass);\n\t\t} else {\n\t\t\tcfi.range = true;\n\n\t\t\tif (needsIgnoring) {\n\t\t\t\tstartOffset = this.patchOffset(start, startOffset, ignoreClass);\n\t\t\t}\n\n\t\t\tcfi.start = this.pathTo(start, startOffset, ignoreClass);\n\t\t\tif (needsIgnoring) {\n\t\t\t\tendOffset = this.patchOffset(end, endOffset, ignoreClass);\n\t\t\t}\n\n\t\t\tcfi.end = this.pathTo(end, endOffset, ignoreClass);\n\n\t\t\t// Create a new empty path\n\t\t\tcfi.path = {\n\t\t\t\tsteps: [],\n\t\t\t\tterminal: null\n\t\t\t};\n\n\t\t\t// Push steps that are shared between start and end to the common path\n\t\t\tvar len = cfi.start.steps.length;\n\t\t\tvar i;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (this.equalStep(cfi.start.steps[i], cfi.end.steps[i])) {\n\t\t\t\t\tif(i === len-1) {\n\t\t\t\t\t\t// Last step is equal, check terminals\n\t\t\t\t\t\tif(cfi.start.terminal === cfi.end.terminal) {\n\t\t\t\t\t\t\t// CFI's are equal\n\t\t\t\t\t\t\tcfi.path.steps.push(cfi.start.steps[i]);\n\t\t\t\t\t\t\t// Not a range\n\t\t\t\t\t\t\tcfi.range = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcfi.path.steps.push(cfi.start.steps[i]);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcfi.start.steps = cfi.start.steps.slice(cfi.path.steps.length);\n\t\t\tcfi.end.steps = cfi.end.steps.slice(cfi.path.steps.length);\n\n\t\t\t// TODO: Add Sanity check to make sure that the end if greater than the start\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Create a CFI object from a Node\n\t * @param {Node} anchor\n\t * @param {string | object} base\n\t * @param {string} [ignoreClass]\n\t * @returns {object} cfi\n\t */\n\tfromNode(anchor, base, ignoreClass) {\n\t\tvar cfi = {\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\n\t\tif (typeof base === \"string\") {\n\t\t\tcfi.base = this.parseComponent(base);\n\t\t\tcfi.spinePos = cfi.base.steps[1].index;\n\t\t} else if (typeof base === \"object\") {\n\t\t\tcfi.base = base;\n\t\t}\n\n\t\tcfi.path = this.pathTo(anchor, null, ignoreClass);\n\n\t\treturn cfi;\n\t}\n\n\tfilter(anchor, ignoreClass) {\n\t\tvar needsIgnoring;\n\t\tvar sibling; // to join with\n\t\tvar parent, previousSibling, nextSibling;\n\t\tvar isText = false;\n\n\t\tif (anchor.nodeType === TEXT_NODE) {\n\t\t\tisText = true;\n\t\t\tparent = anchor.parentNode;\n\t\t\tneedsIgnoring = anchor.parentNode.classList.contains(ignoreClass);\n\t\t} else {\n\t\t\tisText = false;\n\t\t\tneedsIgnoring = anchor.classList.contains(ignoreClass);\n\t\t}\n\n\t\tif (needsIgnoring && isText) {\n\t\t\tpreviousSibling = parent.previousSibling;\n\t\t\tnextSibling = parent.nextSibling;\n\n\t\t\t// If the sibling is a text node, join the nodes\n\t\t\tif (previousSibling && previousSibling.nodeType === TEXT_NODE) {\n\t\t\t\tsibling = previousSibling;\n\t\t\t} else if (nextSibling && nextSibling.nodeType === TEXT_NODE) {\n\t\t\t\tsibling = nextSibling;\n\t\t\t}\n\n\t\t\tif (sibling) {\n\t\t\t\treturn sibling;\n\t\t\t} else {\n\t\t\t\t// Parent will be ignored on next step\n\t\t\t\treturn anchor;\n\t\t\t}\n\n\t\t} else if (needsIgnoring && !isText) {\n\t\t\t// Otherwise just skip the element node\n\t\t\treturn false;\n\t\t} else {\n\t\t\t// No need to filter\n\t\t\treturn anchor;\n\t\t}\n\n\t}\n\n\tpatchOffset(anchor, offset, ignoreClass) {\n\t\tif (anchor.nodeType != TEXT_NODE) {\n\t\t\tthrow new Error(\"Anchor must be a text node\");\n\t\t}\n\n\t\tvar curr = anchor;\n\t\tvar totalOffset = offset;\n\n\t\t// If the parent is a ignored node, get offset from it's start\n\t\tif (anchor.parentNode.classList.contains(ignoreClass)) {\n\t\t\tcurr = anchor.parentNode;\n\t\t}\n\n\t\twhile (curr.previousSibling) {\n\t\t\tif(curr.previousSibling.nodeType === ELEMENT_NODE) {\n\t\t\t\t// Originally a text node, so join\n\t\t\t\tif(curr.previousSibling.classList.contains(ignoreClass)){\n\t\t\t\t\ttotalOffset += curr.previousSibling.textContent.length;\n\t\t\t\t} else {\n\t\t\t\t\tbreak; // Normal node, dont join\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If the previous sibling is a text node, join the nodes\n\t\t\t\ttotalOffset += curr.previousSibling.textContent.length;\n\t\t\t}\n\n\t\t\tcurr = curr.previousSibling;\n\t\t}\n\n\t\treturn totalOffset;\n\n\t}\n\n\tnormalizedMap(children, nodeType, ignoreClass) {\n\t\tvar output = {};\n\t\tvar prevIndex = -1;\n\t\tvar i, len = children.length;\n\t\tvar currNodeType;\n\t\tvar prevNodeType;\n\n\t\tfor (i = 0; i < len; i++) {\n\n\t\t\tcurrNodeType = children[i].nodeType;\n\n\t\t\t// Check if needs ignoring\n\t\t\tif (currNodeType === ELEMENT_NODE &&\n\t\t\t\t\tchildren[i].classList.contains(ignoreClass)) {\n\t\t\t\tcurrNodeType = TEXT_NODE;\n\t\t\t}\n\n\t\t\tif (i > 0 &&\n\t\t\t\t\tcurrNodeType === TEXT_NODE &&\n\t\t\t\t\tprevNodeType === TEXT_NODE) {\n\t\t\t\t// join text nodes\n\t\t\t\toutput[i] = prevIndex;\n\t\t\t} else if (nodeType === currNodeType){\n\t\t\t\tprevIndex = prevIndex + 1;\n\t\t\t\toutput[i] = prevIndex;\n\t\t\t}\n\n\t\t\tprevNodeType = currNodeType;\n\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tposition(anchor) {\n\t\tvar children, index;\n\t\tif (anchor.nodeType === ELEMENT_NODE) {\n\t\t\tchildren = anchor.parentNode.children;\n\t\t\tif (!children) {\n\t\t\t\tchildren = findChildren(anchor.parentNode);\n\t\t\t}\n\t\t\tindex = Array.prototype.indexOf.call(children, anchor);\n\t\t} else {\n\t\t\tchildren = this.textNodes(anchor.parentNode);\n\t\t\tindex = children.indexOf(anchor);\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfilteredPosition(anchor, ignoreClass) {\n\t\tvar children, index, map;\n\n\t\tif (anchor.nodeType === ELEMENT_NODE) {\n\t\t\tchildren = anchor.parentNode.children;\n\t\t\tmap = this.normalizedMap(children, ELEMENT_NODE, ignoreClass);\n\t\t} else {\n\t\t\tchildren = anchor.parentNode.childNodes;\n\t\t\t// Inside an ignored node\n\t\t\tif(anchor.parentNode.classList.contains(ignoreClass)) {\n\t\t\t\tanchor = anchor.parentNode;\n\t\t\t\tchildren = anchor.parentNode.childNodes;\n\t\t\t}\n\t\t\tmap = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n\t\t}\n\n\n\t\tindex = Array.prototype.indexOf.call(children, anchor);\n\n\t\treturn map[index];\n\t}\n\n\tstepsToXpath(steps) {\n\t\tvar xpath = [\".\", \"*\"];\n\n\t\tsteps.forEach(function(step){\n\t\t\tvar position = step.index + 1;\n\n\t\t\tif(step.id){\n\t\t\t\txpath.push(\"*[position()=\" + position + \" and @id='\" + step.id + \"']\");\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\txpath.push(\"text()[\" + position + \"]\");\n\t\t\t} else {\n\t\t\t\txpath.push(\"*[\" + position + \"]\");\n\t\t\t}\n\t\t});\n\n\t\treturn xpath.join(\"/\");\n\t}\n\n\n\t/*\n\n\tTo get the last step if needed:\n\n\t// Get the terminal step\n\tlastStep = steps[steps.length-1];\n\t// Get the query string\n\tquery = this.stepsToQuery(steps);\n\t// Find the containing element\n\tstartContainerParent = doc.querySelector(query);\n\t// Find the text node within that element\n\tif(startContainerParent && lastStep.type == \"text\") {\n\t\tcontainer = startContainerParent.childNodes[lastStep.index];\n\t}\n\t*/\n\tstepsToQuerySelector(steps) {\n\t\tvar query = [\"html\"];\n\n\t\tsteps.forEach(function(step){\n\t\t\tvar position = step.index + 1;\n\n\t\t\tif(step.id){\n\t\t\t\tquery.push(\"#\" + step.id);\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\t// unsupported in querySelector\n\t\t\t\t// query.push(\"text()[\" + position + \"]\");\n\t\t\t} else {\n\t\t\t\tquery.push(\"*:nth-child(\" + position + \")\");\n\t\t\t}\n\t\t});\n\n\t\treturn query.join(\">\");\n\n\t}\n\n\ttextNodes(container, ignoreClass) {\n\t\treturn Array.prototype.slice.call(container.childNodes).\n\t\t\tfilter(function (node) {\n\t\t\t\tif (node.nodeType === TEXT_NODE) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (ignoreClass && node.classList.contains(ignoreClass)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t}\n\n\twalkToNode(steps, _doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar container = doc.documentElement;\n\t\tvar children;\n\t\tvar step;\n\t\tvar len = steps.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tstep = steps[i];\n\n\t\t\tif(step.type === \"element\") {\n\t\t\t\t//better to get a container using id as some times step.index may not be correct\n\t\t\t\t//For ex.https://github.com/futurepress/epub.js/issues/561\n\t\t\t\tif(step.id) {\n\t\t\t\t\tcontainer = doc.getElementById(step.id);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchildren = container.children || findChildren(container);\n\t\t\t\t\tcontainer = children[step.index];\n\t\t\t\t}\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\tcontainer = this.textNodes(container, ignoreClass)[step.index];\n\t\t\t}\n\t\t\tif(!container) {\n\t\t\t\t//Break the for loop as due to incorrect index we can get error if\n\t\t\t\t//container is undefined so that other functionailties works fine\n\t\t\t\t//like navigation\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\t}\n\n\tfindNode(steps, _doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar container;\n\t\tvar xpath;\n\n\t\tif(!ignoreClass && typeof doc.evaluate != \"undefined\") {\n\t\t\txpath = this.stepsToXpath(steps);\n\t\t\tcontainer = doc.evaluate(xpath, doc, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n\t\t} else if(ignoreClass) {\n\t\t\tcontainer = this.walkToNode(steps, doc, ignoreClass);\n\t\t} else {\n\t\t\tcontainer = this.walkToNode(steps, doc);\n\t\t}\n\n\t\treturn container;\n\t}\n\n\tfixMiss(steps, offset, _doc, ignoreClass) {\n\t\tvar container = this.findNode(steps.slice(0,-1), _doc, ignoreClass);\n\t\tvar children = container.childNodes;\n\t\tvar map = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n\t\tvar child;\n\t\tvar len;\n\t\tvar lastStepIndex = steps[steps.length-1].index;\n\n\t\tfor (let childIndex in map) {\n\t\t\tif (!map.hasOwnProperty(childIndex)) return;\n\n\t\t\tif(map[childIndex] === lastStepIndex) {\n\t\t\t\tchild = children[childIndex];\n\t\t\t\tlen = child.textContent.length;\n\t\t\t\tif(offset > len) {\n\t\t\t\t\toffset = offset - len;\n\t\t\t\t} else {\n\t\t\t\t\tif (child.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tcontainer = child.childNodes[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer = child;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tcontainer: container,\n\t\t\toffset: offset\n\t\t};\n\n\t}\n\n\t/**\n\t * Creates a DOM range representing a CFI\n\t * @param {document} _doc document referenced in the base\n\t * @param {string} [ignoreClass]\n\t * @return {Range}\n\t */\n\ttoRange(_doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar range;\n\t\tvar start, end, startContainer, endContainer;\n\t\tvar cfi = this;\n\t\tvar startSteps, endSteps;\n\t\tvar needsIgnoring = ignoreClass ? (doc.querySelector(\".\" + ignoreClass) != null) : false;\n\t\tvar missed;\n\n\t\tif (typeof(doc.createRange) !== \"undefined\") {\n\t\t\trange = doc.createRange();\n\t\t} else {\n\t\t\trange = new RangeObject();\n\t\t}\n\n\t\tif (cfi.range) {\n\t\t\tstart = cfi.start;\n\t\t\tstartSteps = cfi.path.steps.concat(start.steps);\n\t\t\tstartContainer = this.findNode(startSteps, doc, needsIgnoring ? ignoreClass : null);\n\t\t\tend = cfi.end;\n\t\t\tendSteps = cfi.path.steps.concat(end.steps);\n\t\t\tendContainer = this.findNode(endSteps, doc, needsIgnoring ? ignoreClass : null);\n\t\t} else {\n\t\t\tstart = cfi.path;\n\t\t\tstartSteps = cfi.path.steps;\n\t\t\tstartContainer = this.findNode(cfi.path.steps, doc, needsIgnoring ? ignoreClass : null);\n\t\t}\n\n\t\tif(startContainer) {\n\t\t\ttry {\n\n\t\t\t\tif(start.terminal.offset != null) {\n\t\t\t\t\trange.setStart(startContainer, start.terminal.offset);\n\t\t\t\t} else {\n\t\t\t\t\trange.setStart(startContainer, 0);\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tmissed = this.fixMiss(startSteps, start.terminal.offset, doc, needsIgnoring ? ignoreClass : null);\n\t\t\t\trange.setStart(missed.container, missed.offset);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(\"No startContainer found for\", this.toString());\n\t\t\t// No start found\n\t\t\treturn null;\n\t\t}\n\n\t\tif (endContainer) {\n\t\t\ttry {\n\n\t\t\t\tif(end.terminal.offset != null) {\n\t\t\t\t\trange.setEnd(endContainer, end.terminal.offset);\n\t\t\t\t} else {\n\t\t\t\t\trange.setEnd(endContainer, 0);\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tmissed = this.fixMiss(endSteps, cfi.end.terminal.offset, doc, needsIgnoring ? ignoreClass : null);\n\t\t\t\trange.setEnd(missed.container, missed.offset);\n\t\t\t}\n\t\t}\n\n\n\t\t// doc.defaultView.getSelection().addRange(range);\n\t\treturn range;\n\t}\n\n\t/**\n\t * Check if a string is wrapped with \"epubcfi()\"\n\t * @param {string} str\n\t * @returns {boolean}\n\t */\n\tisCfiString(str) {\n\t\tif(typeof str === \"string\" &&\n\t\t\tstr.indexOf(\"epubcfi(\") === 0 &&\n\t\t\tstr[str.length-1] === \")\") {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgenerateChapterComponent(_spineNodeIndex, _pos, id) {\n\t\tvar pos = parseInt(_pos),\n\t\t\t\tspineNodeIndex = (_spineNodeIndex + 1) * 2,\n\t\t\t\tcfi = \"/\"+spineNodeIndex+\"/\";\n\n\t\tcfi += (pos + 1) * 2;\n\n\t\tif(id) {\n\t\t\tcfi += \"[\" + id + \"]\";\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Collapse a CFI Range to a single CFI Position\n\t * @param {boolean} [toStart=false]\n\t */\n\tcollapse(toStart) {\n\t\tif (!this.range) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.range = false;\n\n\t\tif (toStart) {\n\t\t\tthis.path.steps = this.path.steps.concat(this.start.steps);\n\t\t\tthis.path.terminal = this.start.terminal;\n\t\t} else {\n\t\t\tthis.path.steps = this.path.steps.concat(this.end.steps);\n\t\t\tthis.path.terminal = this.end.terminal;\n\t\t}\n\n\t}\n}\n\nexport default EpubCFI;\n","/**\n * Hooks allow for injecting functions that must all complete in order before finishing\n * They will execute in parallel but all must finish before continuing\n * Functions may return a promise if they are asycn.\n * @param {any} context scope of this\n * @example this.content = new EPUBJS.Hook(this);\n */\nclass Hook {\n\tconstructor(context){\n\t\tthis.context = context || this;\n\t\tthis.hooks = [];\n\t}\n\n\t/**\n\t * Adds a function to be run before a hook completes\n\t * @example this.content.register(function(){...});\n\t */\n\tregister(){\n\t\tfor(var i = 0; i < arguments.length; ++i) {\n\t\t\tif (typeof arguments[i]  === \"function\") {\n\t\t\t\tthis.hooks.push(arguments[i]);\n\t\t\t} else {\n\t\t\t\t// unpack array\n\t\t\t\tfor(var j = 0; j < arguments[i].length; ++j) {\n\t\t\t\t\tthis.hooks.push(arguments[i][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes a function\n\t * @example this.content.deregister(function(){...});\n\t */\n\tderegister(func){\n\t\tlet hook;\n\t\tfor (let i = 0; i < this.hooks.length; i++) {\n\t\t\thook = this.hooks[i];\n\t\t\tif (hook === func) {\n\t\t\t\tthis.hooks.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Triggers a hook to run all functions\n\t * @example this.content.trigger(args).then(function(){...});\n\t */\n\ttrigger(){\n\t\tvar args = arguments;\n\t\tvar context = this.context;\n\t\tvar promises = [];\n\n\t\tthis.hooks.forEach(function(task) {\n\t\t\tvar executing = task.apply(context, args);\n\n\t\t\tif(executing && typeof executing[\"then\"] === \"function\") {\n\t\t\t\t// Task is a function that returns a promise\n\t\t\t\tpromises.push(executing);\n\t\t\t}\n\t\t\t// Otherwise Task resolves immediately, continue\n\t\t});\n\n\n\t\treturn Promise.all(promises);\n\t}\n\n\t// Adds a function to be run before a hook completes\n\tlist(){\n\t\treturn this.hooks;\n\t}\n\n\tclear(){\n\t\treturn this.hooks = [];\n\t}\n}\nexport default Hook;\n","import { qs, qsa } from \"./core\";\nimport Url from \"./url\";\nimport Path from \"./path\";\n\nexport function replaceBase(doc, section){\n\tvar base;\n\tvar head;\n\tvar url = section.url;\n\tvar absolute = (url.indexOf(\"://\") > -1);\n\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tbase = qs(head, \"base\");\n\n\tif(!base) {\n\t\tbase = doc.createElement(\"base\");\n\t\thead.insertBefore(base, head.firstChild);\n\t}\n\n\t// Fix for Safari crashing if the url doesn't have an origin\n\tif (!absolute && window && window.location) {\n\t\turl = window.location.origin + url;\n\t}\n\n\tbase.setAttribute(\"href\", url);\n}\n\nexport function replaceCanonical(doc, section){\n\tvar head;\n\tvar link;\n\tvar url = section.canonical;\n\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tlink = qs(head, \"link[rel='canonical']\");\n\n\tif (link) {\n\t\tlink.setAttribute(\"href\", url);\n\t} else {\n\t\tlink = doc.createElement(\"link\");\n\t\tlink.setAttribute(\"rel\", \"canonical\");\n\t\tlink.setAttribute(\"href\", url);\n\t\thead.appendChild(link);\n\t}\n}\n\nexport function replaceMeta(doc, section){\n\tvar head;\n\tvar meta;\n\tvar id = section.idref;\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tmeta = qs(head, \"link[property='dc.identifier']\");\n\n\tif (meta) {\n\t\tmeta.setAttribute(\"content\", id);\n\t} else {\n\t\tmeta = doc.createElement(\"meta\");\n\t\tmeta.setAttribute(\"name\", \"dc.identifier\");\n\t\tmeta.setAttribute(\"content\", id);\n\t\thead.appendChild(meta);\n\t}\n}\n\n// TODO: move me to Contents\nexport function replaceLinks(contents, fn) {\n\n\tvar links = contents.querySelectorAll(\"a[href]\");\n\n\tif (!links.length) {\n\t\treturn;\n\t}\n\n\tvar base = qs(contents.ownerDocument, \"base\");\n\tvar location = base ? base.getAttribute(\"href\") : undefined;\n\tvar replaceLink = function(link){\n\t\tvar href = link.getAttribute(\"href\");\n\n\t\tif(href.indexOf(\"mailto:\") === 0){\n\t\t\treturn;\n\t\t}\n\n\t\tvar absolute = (href.indexOf(\"://\") > -1);\n\n\t\tif(absolute){\n\n\t\t\tlink.setAttribute(\"target\", \"_blank\");\n\n\t\t}else{\n\t\t\tvar linkUrl;\n\t\t\ttry {\n\t\t\t\tlinkUrl = new Url(href, location);\t\n\t\t\t} catch(error) {\n\t\t\t\t// NOOP\n\t\t\t}\n\n\t\t\tlink.onclick = function(){\n\n\t\t\t\tif(linkUrl && linkUrl.hash) {\n\t\t\t\t\tfn(linkUrl.Path.path + linkUrl.hash);\n\t\t\t\t} else if(linkUrl){\n\t\t\t\t\tfn(linkUrl.Path.path);\n\t\t\t\t} else {\n\t\t\t\t\tfn(href);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\t}.bind(this);\n\n\tfor (var i = 0; i < links.length; i++) {\n\t\treplaceLink(links[i]);\n\t}\n\n\n}\n\nexport function substitute(content, urls, replacements) {\n\turls.forEach(function(url, i){\n\t\tif (url && replacements[i]) {\n\t\t\tcontent = content.replace(new RegExp(url, \"g\"), replacements[i]);\n\t\t}\n\t});\n\treturn content;\n}\n","import { defer } from \"./utils/core\";\nimport EpubCFI from \"./epubcfi\";\nimport Hook from \"./utils/hook\";\nimport { sprint } from \"./utils/core\";\nimport { replaceBase } from \"./utils/replacements\";\n\n/**\n * Represents a Section of the Book\n *\n * In most books this is equivelent to a Chapter\n * @param {object} item  The spine item representing the section\n * @param {object} hooks hooks for serialize and content\n */\nclass Section {\n\tconstructor(item, hooks){\n\t\tthis.idref = item.idref;\n\t\tthis.linear = item.linear === \"yes\";\n\t\tthis.properties = item.properties;\n\t\tthis.index = item.index;\n\t\tthis.href = item.href;\n\t\tthis.url = item.url;\n\t\tthis.canonical = item.canonical;\n\t\tthis.next = item.next;\n\t\tthis.prev = item.prev;\n\n\t\tthis.cfiBase = item.cfiBase;\n\n\t\tif (hooks) {\n\t\t\tthis.hooks = hooks;\n\t\t} else {\n\t\t\tthis.hooks = {};\n\t\t\tthis.hooks.serialize = new Hook(this);\n\t\t\tthis.hooks.content = new Hook(this);\n\t\t}\n\n\t\tthis.document = undefined;\n\t\tthis.contents = undefined;\n\t\tthis.output = undefined;\n\t}\n\n\t/**\n\t * Load the section from its url\n\t * @param  {method} [_request] a request method to use for loading\n\t * @return {document} a promise with the xml document\n\t */\n\tload(_request){\n\t\tvar request = _request || this.request || require(\"./utils/request\");\n\t\tvar loading = new defer();\n\t\tvar loaded = loading.promise;\n\n\t\tif(this.contents) {\n\t\t\tloading.resolve(this.contents);\n\t\t} else {\n\t\t\trequest(this.url)\n\t\t\t\t.then(function(xml){\n\t\t\t\t\t// var directory = new Url(this.url).directory;\n\n\t\t\t\t\tthis.document = xml;\n\t\t\t\t\tthis.contents = xml.documentElement;\n\n\t\t\t\t\treturn this.hooks.content.trigger(this.document, this);\n\t\t\t\t}.bind(this))\n\t\t\t\t.then(function(){\n\t\t\t\t\tloading.resolve(this.contents);\n\t\t\t\t}.bind(this))\n\t\t\t\t.catch(function(error){\n\t\t\t\t\tloading.reject(error);\n\t\t\t\t});\n\t\t}\n\n\t\treturn loaded;\n\t}\n\n\t/**\n\t * Adds a base tag for resolving urls in the section\n\t * @private\n\t */\n\tbase(){\n\t\treturn replaceBase(this.document, this);\n\t}\n\n\t/**\n\t * Render the contents of a section\n\t * @param  {method} [_request] a request method to use for loading\n\t * @return {string} output a serialized XML Document\n\t */\n\trender(_request){\n\t\tvar rendering = new defer();\n\t\tvar rendered = rendering.promise;\n\t\tthis.output; // TODO: better way to return this from hooks?\n\n\t\tthis.load(_request).\n\t\t\tthen(function(contents){\n\t\t\t\tvar userAgent = (typeof navigator !== 'undefined' && navigator.userAgent) || '';\n\t\t\t\tvar isIE = userAgent.indexOf('Trident') >= 0;\n\t\t\t\tvar Serializer;\n\t\t\t\tif (false && ( typeof XMLSerializer === \"undefined\" || isIE)) {\n\t\t\t\t\tSerializer = require(\"xmldom/dom-parser\").XMLSerializer;\n\t\t\t\t} else {\n\t\t\t\t\tSerializer = XMLSerializer;\n\t\t\t\t}\n\t\t\t\tvar serializer = new Serializer();\n\t\t\t\tthis.output = serializer.serializeToString(contents);\n\t\t\t\treturn this.output;\n\t\t\t}.bind(this)).\n\t\t\tthen(function(){\n\t\t\t\treturn this.hooks.serialize.trigger(this.output, this);\n\t\t\t}.bind(this)).\n\t\t\tthen(function(){\n\t\t\t\trendering.resolve(this.output);\n\t\t\t}.bind(this))\n\t\t\t.catch(function(error){\n\t\t\t\trendering.reject(error);\n\t\t\t});\n\n\t\treturn rendered;\n\t}\n\n\t/**\n\t * Find a string in a section\n\t * @param  {string} _query The query string to find\n\t * @return {object[]} A list of matches, with form {cfi, excerpt}\n\t */\n\tfind(_query){\n\t\tvar section = this;\n\t\tvar matches = [];\n\t\tvar query = _query.toLowerCase();\n\t\tvar find = function(node){\n\t\t\tvar text = node.textContent.toLowerCase();\n\t\t\tvar range = section.document.createRange();\n\t\t\tvar cfi;\n\t\t\tvar pos;\n\t\t\tvar last = -1;\n\t\t\tvar excerpt;\n\t\t\tvar limit = 150;\n\n\t\t\twhile (pos != -1) {\n\t\t\t\t// Search for the query\n\t\t\t\tpos = text.indexOf(query, last + 1);\n\n\t\t\t\tif (pos != -1) {\n\t\t\t\t\t// We found it! Generate a CFI\n\t\t\t\t\trange = section.document.createRange();\n\t\t\t\t\trange.setStart(node, pos);\n\t\t\t\t\trange.setEnd(node, pos + query.length);\n\n\t\t\t\t\tcfi = section.cfiFromRange(range);\n\n\t\t\t\t\t// Generate the excerpt\n\t\t\t\t\tif (node.textContent.length < limit) {\n\t\t\t\t\t\texcerpt = node.textContent;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\texcerpt = node.textContent.substring(pos - limit/2, pos + limit/2);\n\t\t\t\t\t\texcerpt = \"...\" + excerpt + \"...\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add the CFI to the matches list\n\t\t\t\t\tmatches.push({\n\t\t\t\t\t\tcfi: cfi,\n\t\t\t\t\t\texcerpt: excerpt\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tlast = pos;\n\t\t\t}\n\t\t};\n\n\t\tsprint(section.document, function(node) {\n\t\t\tfind(node);\n\t\t});\n\n\t\treturn matches;\n\t};\n\n\t/**\n\t* Reconciles the current chapters layout properies with\n\t* the global layout properities.\n\t* @param {object} globalLayout  The global layout settings object, chapter properties string\n\t* @return {object} layoutProperties Object with layout properties\n\t*/\n\treconcileLayoutSettings(globalLayout){\n\t\t//-- Get the global defaults\n\t\tvar settings = {\n\t\t\tlayout : globalLayout.layout,\n\t\t\tspread : globalLayout.spread,\n\t\t\torientation : globalLayout.orientation\n\t\t};\n\n\t\t//-- Get the chapter's display type\n\t\tthis.properties.forEach(function(prop){\n\t\t\tvar rendition = prop.replace(\"rendition:\", \"\");\n\t\t\tvar split = rendition.indexOf(\"-\");\n\t\t\tvar property, value;\n\n\t\t\tif(split != -1){\n\t\t\t\tproperty = rendition.slice(0, split);\n\t\t\t\tvalue = rendition.slice(split+1);\n\n\t\t\t\tsettings[property] = value;\n\t\t\t}\n\t\t});\n\t\treturn settings;\n\t}\n\n\t/**\n\t * Get a CFI from a Range in the Section\n\t * @param  {range} _range\n\t * @return {string} cfi an EpubCFI string\n\t */\n\tcfiFromRange(_range) {\n\t\treturn new EpubCFI(_range, this.cfiBase).toString();\n\t}\n\n\t/**\n\t * Get a CFI from an Element in the Section\n\t * @param  {element} el\n\t * @return {string} cfi an EpubCFI string\n\t */\n\tcfiFromElement(el) {\n\t\treturn new EpubCFI(el, this.cfiBase).toString();\n\t}\n\n\t/**\n\t * Unload the section document\n\t */\n\tunload() {\n\t\tthis.document = undefined;\n\t\tthis.contents = undefined;\n\t\tthis.output = undefined;\n\t}\n\n\tdestroy() {\n\t\tthis.unload();\n\t\tthis.hooks.serialize.clear();\n\t\tthis.hooks.content.clear();\n\n\t\tthis.hooks = undefined;\n\t\tthis.idref = undefined;\n\t\tthis.linear = undefined;\n\t\tthis.properties = undefined;\n\t\tthis.index = undefined;\n\t\tthis.href = undefined;\n\t\tthis.url = undefined;\n\t\tthis.next = undefined;\n\t\tthis.prev = undefined;\n\n\t\tthis.cfiBase = undefined;\n\t}\n}\n\nexport default Section;\n","import EpubCFI from \"./epubcfi\";\nimport Hook from \"./utils/hook\";\nimport Section from \"./section\";\nimport {replaceBase, replaceCanonical, replaceMeta} from \"./utils/replacements\";\n\n/**\n * A collection of Spine Items\n */\nclass Spine {\n\tconstructor() {\n\t\tthis.spineItems = [];\n\t\tthis.spineByHref = {};\n\t\tthis.spineByAbsoluteHref = {};\n\t\tthis.spineById = {};\n\n\t\tthis.hooks = {};\n\t\tthis.hooks.serialize = new Hook();\n\t\tthis.hooks.content = new Hook();\n\n\t\t// Register replacements\n\t\tthis.hooks.content.register(replaceBase);\n\t\tthis.hooks.content.register(replaceCanonical);\n\t\tthis.hooks.content.register(replaceMeta);\n\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.loaded = false;\n\n\t\tthis.items = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.baseUrl = undefined;\n\t\tthis.length = undefined;\n\t}\n\n\t/**\n\t * Unpack items from a opf into spine items\n\t * @param  {Packaging} _package\n\t * @param  {method} resolver URL resolver\n\t * @param  {method} canonical Resolve canonical url\n\t */\n\tunpack(_package, resolver, canonical) {\n\n\t\tthis.items = _package.spine;\n\t\tthis.manifest = _package.manifest;\n\t\tthis.spineNodeIndex = _package.spineNodeIndex;\n\t\tthis.baseUrl = _package.baseUrl || _package.basePath || \"\";\n\t\tthis.length = this.items.length;\n\n\t\tthis.items.forEach( (item, index) => {\n\t\t\tvar manifestItem = this.manifest[item.idref];\n\t\t\tvar spineItem;\n\n\t\t\titem.index = index;\n\t\t\titem.cfiBase = this.epubcfi.generateChapterComponent(this.spineNodeIndex, item.index, item.idref);\n\n\t\t\tif (item.href) {\n\t\t\t\titem.url = resolver(item.href, true);\n\t\t\t\titem.canonical = canonical(item.href);\n\t\t\t}\n\n\t\t\tif(manifestItem) {\n\t\t\t\titem.href = manifestItem.href;\n\t\t\t\titem.url = resolver(item.href, true);\n\t\t\t\titem.canonical = canonical(item.href);\n\n\t\t\t\tif(manifestItem.properties.length){\n\t\t\t\t\titem.properties.push.apply(item.properties, manifestItem.properties);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item.linear === \"yes\") {\n\t\t\t\titem.prev = function() {\n\t\t\t\t\tlet prevIndex = item.index;\n\t\t\t\t\twhile (prevIndex > 0) {\n\t\t\t\t\t\tlet prev = this.get(prevIndex-1);\n\t\t\t\t\t\tif (prev && prev.linear) {\n\t\t\t\t\t\t\treturn prev;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprevIndex -= 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}.bind(this);\n\t\t\t\titem.next = function() {\n\t\t\t\t\tlet nextIndex = item.index;\n\t\t\t\t\twhile (nextIndex < this.spineItems.length-1) {\n\t\t\t\t\t\tlet next = this.get(nextIndex+1);\n\t\t\t\t\t\tif (next && next.linear) {\n\t\t\t\t\t\t\treturn next;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextIndex += 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}.bind(this);\n\t\t\t} else {\n\t\t\t\titem.prev = function() {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\titem.next = function() {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tspineItem = new Section(item, this.hooks);\n\n\t\t\tthis.append(spineItem);\n\n\n\t\t});\n\n\t\tthis.loaded = true;\n\t}\n\n\t/**\n\t * Get an item from the spine\n\t * @param  {string|number} [target]\n\t * @return {Section} section\n\t * @example spine.get();\n\t * @example spine.get(1);\n\t * @example spine.get(\"chap1.html\");\n\t * @example spine.get(\"#id1234\");\n\t */\n\tget(target) {\n\t\tvar index = 0;\n\n\t\tif (typeof target === \"undefined\") {\n\t\t\twhile (index < this.spineItems.length) {\n\t\t\t\tlet next = this.spineItems[index];\n\t\t\t\tif (next && next.linear) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tindex += 1;\n\t\t\t}\n\t\t} else if(this.epubcfi.isCfiString(target)) {\n\t\t\tlet cfi = new EpubCFI(target);\n\t\t\tindex = cfi.spinePos;\n\t\t} else if(typeof target === \"number\" || isNaN(target) === false){\n\t\t\tindex = target;\n\t\t} else if(typeof target === \"string\" && target.indexOf(\"#\") === 0) {\n\t\t\tindex = this.spineById[target.substring(1)];\n\t\t} else if(typeof target === \"string\") {\n\t\t\t// Remove fragments\n\t\t\ttarget = target.split(\"#\")[0];\n\t\t\tindex = this.spineByAbsoluteHref[target] || this.spineByAbsoluteHref[encodeURI(target)] || this.spineByHref[target] || this.spineByHref[encodeURI(target)];\n\t\t\tif ( ! index ) {\n\t\t\t\t// check for relative paths\n\t\t\t\tfor(var i = 0; i < this.spineItems.length; i++)\t{\n\t\t\t\t\tif ( this.spineItems[i].href.indexOf('/' + target) > -1 ) {\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.spineItems[index] || null;\n\t}\n\n\t/**\n\t * Append a Section to the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tappend(section) {\n\t\tvar index = this.spineItems.length;\n\t\tsection.index = index;\n\n\t\tthis.spineItems.push(section);\n\n\t\t// Encode and Decode href lookups\n\t\t// see pr for details: https://github.com/futurepress/epub.js/pull/358\n\t\tthis.spineByHref[decodeURI(section.href)] = index;\n\t\tthis.spineByHref[encodeURI(section.href)] = index;\n\t\tthis.spineByHref[section.href.substring(section.href.lastIndexOf('/')+1)] = index;\n\t\tthis.spineByHref[section.href] = index;\n\n\t\tthis.spineById[section.idref] = index;\n\n\t\tthis.spineByAbsoluteHref[section.url] = index;\n\n\t\treturn index;\n\t}\n\n\t/**\n\t * Prepend a Section to the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tprepend(section) {\n\t\t// var index = this.spineItems.unshift(section);\n\t\tthis.spineByHref[section.href] = 0;\n\t\tthis.spineById[section.idref] = 0;\n\n\t\t// Re-index\n\t\tthis.spineItems.forEach(function(item, index){\n\t\t\titem.index = index;\n\t\t});\n\n\t\treturn 0;\n\t}\n\n\t// insert(section, index) {\n\t//\n\t// };\n\n\t/**\n\t * Remove a Section from the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tremove(section) {\n\t\tvar index = this.spineItems.indexOf(section);\n\n\t\tif(index > -1) {\n\t\t\tdelete this.spineByHref[section.href];\n\t\t\tdelete this.spineById[section.idref];\n\n\t\t\treturn this.spineItems.splice(index, 1);\n\t\t}\n\t}\n\n\t/**\n\t * Loop over the Sections in the Spine\n\t * @return {method} forEach\n\t */\n\teach() {\n\t\treturn this.spineItems.forEach.apply(this.spineItems, arguments);\n\t}\n\n\t/**\n\t * Find the first Section in the Spine\n\t * @return {Section} first section\n\t */\n\tfirst() {\n\t\tlet index = 0;\n\n\t\tdo {\n\t\t\tlet next = this.get(index);\n\n\t\t\tif (next && next.linear) {\n\t\t\t\treturn next;\n\t\t\t}\n\t\t\tindex += 1;\n\t\t} while (index < this.spineItems.length) ;\n\t}\n\n\t/**\n\t * Find the last Section in the Spine\n\t * @return {Section} last section\n\t */\n\tlast() {\n\t\tlet index = this.spineItems.length-1;\n\n\t\tdo {\n\t\t\tlet prev = this.get(index);\n\t\t\tif (prev && prev.linear) {\n\t\t\t\treturn prev;\n\t\t\t}\n\t\t\tindex -= 1;\n\t\t} while (index >= 0);\n\t}\n\n\tdestroy() {\n\t\tthis.each((section) => section.destroy());\n\n\t\tthis.spineItems = undefined\n\t\tthis.spineByHref = undefined\n\t\tthis.spineById = undefined\n\n\t\tthis.hooks.serialize.clear();\n\t\tthis.hooks.content.clear();\n\t\tthis.hooks = undefined;\n\n\t\tthis.epubcfi = undefined;\n\n\t\tthis.loaded = false;\n\n\t\tthis.items = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.baseUrl = undefined;\n\t\tthis.length = undefined;\n\t}\n}\n\nexport default Spine;\n","import {defer, requestAnimationFrame} from \"./core\";\n\n/**\n * Queue for handling tasks one at a time\n * @class\n * @param {scope} context what this will resolve to in the tasks\n */\nclass Queue {\n\tconstructor(context){\n\t\tthis._q = [];\n\t\tthis.context = context;\n\t\tthis.tick = requestAnimationFrame;\n\t\tthis.running = false;\n\t\tthis.paused = false;\n\t}\n\n\t/**\n\t * Add an item to the queue\n\t * @return {Promise}\n\t */\n\tenqueue() {\n\t\tvar deferred, promise;\n\t\tvar queued;\n\t\tvar task = [].shift.call(arguments);\n\t\tvar args = arguments;\n\n\t\t// Handle single args without context\n\t\t// if(args && !Array.isArray(args)) {\n\t\t//   args = [args];\n\t\t// }\n\t\tif(!task) {\n\t\t\tthrow new Error(\"No Task Provided\");\n\t\t}\n\n\t\tif(typeof task === \"function\"){\n\n\t\t\tdeferred = new defer();\n\t\t\tpromise = deferred.promise;\n\n\t\t\tqueued = {\n\t\t\t\t\"task\" : task,\n\t\t\t\t\"args\"     : args,\n\t\t\t\t//\"context\"  : context,\n\t\t\t\t\"deferred\" : deferred,\n\t\t\t\t\"promise\" : promise\n\t\t\t};\n\n\t\t} else {\n\t\t\t// Task is a promise\n\t\t\tqueued = {\n\t\t\t\t\"promise\" : task\n\t\t\t};\n\n\t\t}\n\n\t\tthis._q.push(queued);\n\n\t\t// Wait to start queue flush\n\t\tif (this.paused == false && !this.running) {\n\t\t\t// setTimeout(this.flush.bind(this), 0);\n\t\t\t// this.tick.call(window, this.run.bind(this));\n\t\t\tthis.run();\n\t\t}\n\n\t\treturn queued.promise;\n\t}\n\n\t/**\n\t * Run one item\n\t * @return {Promise}\n\t */\n\tdequeue(){\n\t\tvar inwait, task, result;\n\n\t\tif(this._q.length && !this.paused) {\n\t\t\tinwait = this._q.shift();\n\t\t\ttask = inwait.task;\n\t\t\tif(task){\n\t\t\t\t// console.log(task)\n\n\t\t\t\tresult = task.apply(this.context, inwait.args);\n\n\t\t\t\tif(result && typeof result[\"then\"] === \"function\") {\n\t\t\t\t\t// Task is a function that returns a promise\n\t\t\t\t\treturn result.then(function(){\n\t\t\t\t\t\tinwait.deferred.resolve.apply(this.context, arguments);\n\t\t\t\t\t}.bind(this), function() {\n\t\t\t\t\t\tinwait.deferred.reject.apply(this.context, arguments);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t} else {\n\t\t\t\t\t// Task resolves immediately\n\t\t\t\t\tinwait.deferred.resolve.apply(this.context, result);\n\t\t\t\t\treturn inwait.promise;\n\t\t\t\t}\n\n\n\n\t\t\t} else if(inwait.promise) {\n\t\t\t\t// Task is a promise\n\t\t\t\treturn inwait.promise;\n\t\t\t}\n\n\t\t} else {\n\t\t\tinwait = new defer();\n\t\t\tinwait.deferred.resolve();\n\t\t\treturn inwait.promise;\n\t\t}\n\n\t}\n\n\t// Run All Immediately\n\tdump(){\n\t\twhile(this._q.length) {\n\t\t\tthis.dequeue();\n\t\t}\n\t}\n\n\t/**\n\t * Run all tasks sequentially, at convince\n\t * @return {Promise}\n\t */\n\trun(){\n\n\t\tif(!this.running){\n\t\t\tthis.running = true;\n\t\t\tthis.defered = new defer();\n\t\t}\n\n\t\tthis.tick.call(window, () => {\n\n\t\t\tif(this._q.length) {\n\n\t\t\t\tthis.dequeue()\n\t\t\t\t\t.then(function(){\n\t\t\t\t\t\tthis.run();\n\t\t\t\t\t}.bind(this));\n\n\t\t\t} else {\n\t\t\t\tthis.defered.resolve();\n\t\t\t\tthis.running = undefined;\n\t\t\t}\n\n\t\t});\n\n\t\t// Unpause\n\t\tif(this.paused == true) {\n\t\t\tthis.paused = false;\n\t\t}\n\n\t\treturn this.defered.promise;\n\t}\n\n\t/**\n\t * Flush all, as quickly as possible\n\t * @return {Promise}\n\t */\n\tflush(){\n\n\t\tif(this.running){\n\t\t\treturn this.running;\n\t\t}\n\n\t\tif(this._q.length) {\n\t\t\tthis.running = this.dequeue()\n\t\t\t\t.then(function(){\n\t\t\t\t\tthis.running = undefined;\n\t\t\t\t\treturn this.flush();\n\t\t\t\t}.bind(this));\n\n\t\t\treturn this.running;\n\t\t}\n\n\t}\n\n\t/**\n\t * Clear all items in wait\n\t */\n\tclear(){\n\t\tthis._q = [];\n\t}\n\n\t/**\n\t * Get the number of tasks in the queue\n\t * @return {number} tasks\n\t */\n\tlength(){\n\t\treturn this._q.length;\n\t}\n\n\t/**\n\t * Pause a running queue\n\t */\n\tpause(){\n\t\tthis.paused = true;\n\t}\n\n\t/**\n\t * End the queue\n\t */\n\tstop(){\n\t\tthis._q = [];\n\t\tthis.running = false;\n\t\tthis.paused = true;\n\t}\n}\n\n\n/**\n * Create a new task from a callback\n * @class\n * @private\n * @param {function} task\n * @param {array} args\n * @param {scope} context\n * @return {function} task\n */\nclass Task {\n\tconstructor(task, args, context){\n\n\t\treturn function(){\n\t\t\tvar toApply = arguments || [];\n\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tvar callback = function(value, err){\n\t\t\t\t\tif (!value && err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(value);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// Add the callback to the arguments list\n\t\t\t\ttoApply.push(callback);\n\n\t\t\t\t// Apply all arguments to the functions\n\t\t\t\ttask.apply(context || this, toApply);\n\n\t\t\t});\n\n\t\t};\n\n\t}\n}\n\n\nexport default Queue;\nexport { Task };\n","export const EPUBJS_VERSION = \"0.3\";\n\n// Dom events to listen for\nexport const DOM_EVENTS = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"click\", \"touchend\", \"touchstart\", \"touchmove\"];\n\nexport const EVENTS = {\n  BOOK : {\n    OPEN_FAILED : \"openFailed\"\n  },\n  CONTENTS : {\n    EXPAND : \"expand\",\n    RESIZE : \"resize\",\n    SELECTED : \"selected\",\n    SELECTED_RANGE : \"selectedRange\",\n    LINK_CLICKED : \"linkClicked\"\n  },\n  LOCATIONS : {\n    CHANGED : \"changed\"\n  },\n  MANAGERS : {\n    RESIZE : \"resize\",\n    RESIZED : \"resized\",\n    ORIENTATION_CHANGE : \"orientationchange\",\n    ADDED : \"added\",\n    SCROLL : \"scroll\",\n    SCROLLED : \"scrolled\",\n    REMOVED : \"removed\",\n  },\n  VIEWS : {\n    AXIS : \"axis\",\n    LOAD_ERROR : \"loaderror\",\n    RENDERED : \"rendered\",\n    RESIZED : \"resized\",\n    DISPLAYED : \"displayed\",\n    SHOWN : \"shown\",\n    HIDDEN : \"hidden\",\n    MARK_CLICKED : \"markClicked\"\n  },\n  RENDITION : {\n    STARTED : \"started\",\n    ATTACHED : \"attached\",\n    DISPLAYED : \"displayed\",\n    DISPLAY_ERROR : \"displayerror\",\n    RENDERED : \"rendered\",\n    REMOVED : \"removed\",\n    RESIZED : \"resized\",\n    ORIENTATION_CHANGE : \"orientationchange\",\n    LOCATION_CHANGED : \"locationChanged\",\n    RELOCATED : \"relocated\",\n    MARK_CLICKED : \"markClicked\",\n    SELECTED : \"selected\",\n    LAYOUT: \"layout\"\n  },\n  LAYOUT : {\n    UPDATED : \"updated\"\n  }\n}\n","import {qs, sprint, locationOf, defer} from \"./utils/core\";\nimport Queue from \"./utils/queue\";\nimport EpubCFI from \"./epubcfi\";\nimport { EVENTS } from \"./utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Find Locations for a Book\n * @param {Spine} spine\n * @param {request} request\n * @param {number} [pause=100]\n */\nclass Locations {\n\tconstructor(spine, request, pause) {\n\t\tthis.spine = spine;\n\t\tthis.request = request;\n\t\tthis.pause = pause || 100;\n\n\t\tthis.q = new Queue(this);\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis._locations = [];\n\t\tthis.total = 0;\n\n\t\tthis.break = 150;\n\n\t\tthis._current = 0;\n\n\t\tthis.currentLocation = '';\n\t\tthis._currentCfi ='';\n\t\tthis.processingTimeout = undefined;\n\t}\n\n\tgenerateFromPageList(pageList) {\n\n\t\tthis.break = 1600;\n\t\tthis.q.pause();\n\n\t\tvar i = 0;\n\n\t\tthis._pageList = pageList;\n\n\t\tthis.spine.each(function(section) {\n\t\t\tif (section.linear) {\n\t\t\t\tthis.q.enqueue(this.process.bind(this), section);\n\t\t\t}\n\t\t}.bind(this));\n\n\t\treturn this.q.run().then(function() {\n\t\t\tthis.total = this._locations.length - 1;\n\n\t\t\tif (this._currentCfi) {\n\t\t\t\tthis.currentLocation = this._currentCfi;\n\t\t\t}\n\n\t\t\treturn this._locations;\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Load all of sections in the book to generate locations\n\t * @param  {int} chars how many chars to split on\n\t * @return {object} locations\n\t */\n\tgenerate(chars) {\n\n\t\tif (chars) {\n\t\t\tthis.break = chars;\n\t\t}\n\n\t\tthis.q.pause();\n\n\t\tthis.spine.each(function(section) {\n\t\t\tif (section.linear) {\n\t\t\t\tthis.q.enqueue(this.process.bind(this), section);\n\t\t\t}\n\t\t}.bind(this));\n\n\t\treturn this.q.run().then(function() {\n\t\t\tthis.total = this._locations.length - 1;\n\n\t\t\tif (this._currentCfi) {\n\t\t\t\tthis.currentLocation = this._currentCfi;\n\t\t\t}\n\n\t\t\treturn this._locations;\n\t\t\t// console.log(this.percentage(this.book.rendition.location.start), this.percentage(this.book.rendition.location.end));\n\t\t}.bind(this));\n\n\t}\n\n\tcreateRange () {\n\t\treturn {\n\t\t\tstartContainer: undefined,\n\t\t\tstartOffset: undefined,\n\t\t\tendContainer: undefined,\n\t\t\tendOffset: undefined\n\t\t};\n\t}\n\n\tprocess(section) {\n\n\t\treturn section.load(this.request)\n\t\t\t.then(function(contents) {\n\t\t\t\tvar completed = new defer();\n\t\t\t\tvar locations = this.parse(contents, section.cfiBase);\n\t\t\t\tthis._locations = this._locations.concat(locations);\n\n\t\t\t\tif ( this._pageList ) {\n\n\t\t\t\t\tvar pages = this._pageList.pagesByAbsolutePath[section.canonical] || []; // || \n\n\t\t\t\t\tpages.forEach((page) => {\n\t\t\t\t\t\tvar item = this._pageList.pageList[page - 1];\n\n\t\t\t\t\t\tvar parts = item.href.split('#');\n\t\t\t\t\t\tvar target = parts[1] ? '#' + parts[1] : 'body';\n\t\t\t\t\t\tvar node = contents.ownerDocument.querySelector(target);\n\t\t\t\t\t\tvar cfi = section.cfiFromElement(node);\n\t\t\t\t\t\tthis._pageList.locations[page - 1] = cfi;\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tsection.unload();\n\n\t\t\t\tthis.processingTimeout = setTimeout(() => completed.resolve(locations), this.pause);\n\t\t\t\treturn completed.promise;\n\t\t\t}.bind(this));\n\n\t}\n\n\tparse(contents, cfiBase, chars) {\n\t\tvar locations = [];\n\t\tvar range;\n\t\tvar doc = contents.ownerDocument;\n\t\tvar body = qs(doc, \"body\");\n\t\tvar counter = 0;\n\t\tvar prev;\n\t\tvar _break = chars || this.break;\n\t\tvar parser = function(node) {\n\t\t\tvar len = node.length;\n\t\t\tvar dist;\n\t\t\tvar pos = 0;\n\n\t\t\tif (node.textContent.trim().length === 0) {\n\t\t\t\treturn false; // continue\n\t\t\t}\n\n\t\t\t// Start range\n\t\t\tif (counter == 0) {\n\t\t\t\trange = this.createRange();\n\t\t\t\trange.startContainer = node;\n\t\t\t\trange.startOffset = 0;\n\t\t\t}\n\n\t\t\tdist = _break - counter;\n\n\t\t\t// Node is smaller than a break,\n\t\t\t// skip over it\n\t\t\tif(dist > len){\n\t\t\t\tcounter += len;\n\t\t\t\tpos = len;\n\t\t\t}\n\n\n\t\t\twhile (pos < len) {\n\t\t\t\tdist = _break - counter;\n\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Start new range\n\t\t\t\t\tpos += 1;\n\t\t\t\t\trange = this.createRange();\n\t\t\t\t\trange.startContainer = node;\n\t\t\t\t\trange.startOffset = pos;\n\t\t\t\t}\n\n\t\t\t\t// pos += dist;\n\n\t\t\t\t// Gone over\n\t\t\t\tif(pos + dist >= len){\n\t\t\t\t\t// Continue counter for next node\n\t\t\t\t\tcounter += len - pos;\n\t\t\t\t\t// break\n\t\t\t\t\tpos = len;\n\t\t\t\t// At End\n\t\t\t\t} else {\n\t\t\t\t\t// Advance pos\n\t\t\t\t\tpos += dist;\n\n\t\t\t\t\t// End the previous range\n\t\t\t\t\trange.endContainer = node;\n\t\t\t\t\trange.endOffset = pos;\n\t\t\t\t\t// cfi = section.cfiFromRange(range);\n\t\t\t\t\tlet cfi = new EpubCFI(range, cfiBase).toString();\n\t\t\t\t\tlocations.push(cfi);\n\t\t\t\t\tcounter = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprev = node;\n\t\t};\n\n\t\tsprint(body, parser.bind(this));\n\n\t\t// Close remaining\n\t\tif (range && range.startContainer && prev) {\n\t\t\trange.endContainer = prev;\n\t\t\trange.endOffset = prev.length;\n\t\t\tlet cfi = new EpubCFI(range, cfiBase).toString();\n\t\t\tlocations.push(cfi);\n\t\t\tcounter = 0;\n\t\t}\n\n\t\treturn locations;\n\t}\n\n\t/**\n\t * Get a location from an EpubCFI\n\t * @param {EpubCFI} cfi\n\t * @return {number}\n\t */\n\tlocationFromCfi(cfi){\n\t\tlet loc;\n\t\tif (EpubCFI.prototype.isCfiString(cfi)) {\n\t\t\tcfi = new EpubCFI(cfi);\n\t\t}\n\t\t// Check if the location has not been set yet\n\t\tif(this._locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tloc = locationOf(cfi, this._locations, this.epubcfi.compare);\n\n\t\tif (loc > this.total) {\n\t\t\treturn this.total;\n\t\t}\n\n\t\treturn loc;\n\t}\n\n\t/**\n\t * Get a percentage position in locations from an EpubCFI\n\t * @param {EpubCFI} cfi\n\t * @return {number}\n\t */\n\tpercentageFromCfi(cfi) {\n\t\tif(this._locations.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\t// Find closest cfi\n\t\tvar loc = this.locationFromCfi(cfi);\n\t\t// Get percentage in total\n\t\treturn this.percentageFromLocation(loc);\n\t}\n\n\t/**\n\t * Get a percentage position from a location index\n\t * @param {number} location\n\t * @return {number}\n\t */\n\tpercentageFromLocation(loc) {\n\t\tif (!loc || !this.total) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn (loc / this.total);\n\t}\n\n\t/**\n\t * Get an EpubCFI from location index\n\t * @param {number} loc\n\t * @return {EpubCFI} cfi\n\t */\n\tcfiFromLocation(loc){\n\t\tvar cfi = -1;\n\t\t// check that pg is an int\n\t\tif(typeof loc != \"number\"){\n\t\t\tloc = parseInt(loc);\n\t\t}\n\n\t\tif(loc >= 0 && loc < this._locations.length) {\n\t\t\tcfi = this._locations[loc];\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Get an EpubCFI from location percentage\n\t * @param {number} percentage\n\t * @return {EpubCFI} cfi\n\t */\n\tcfiFromPercentage(percentage){\n\t\tlet loc;\n\t\tif (percentage > 1) {\n\t\t\tconsole.warn(\"Normalize cfiFromPercentage value to between 0 - 1\");\n\t\t}\n\n\t\t// Make sure 1 goes to very end\n\t\tif (percentage >= 1) {\n\t\t\tlet cfi = new EpubCFI(this._locations[this.total]);\n\t\t\tcfi.collapse();\n\t\t\treturn cfi.toString();\n\t\t}\n\n\t\tloc = Math.ceil(this.total * percentage);\n\t\treturn this.cfiFromLocation(loc);\n\t}\n\n\t/**\n\t * Load locations from JSON\n\t * @param {json} locations\n\t */\n\tload(locations){\n\t\tif (typeof locations === \"string\") {\n\t\t\tthis._locations = JSON.parse(locations);\n\t\t} else {\n\t\t\tthis._locations = locations;\n\t\t}\n\t\tthis.total = this._locations.length - 1;\n\t\treturn this._locations;\n\t}\n\n\t/**\n\t * Save locations to JSON\n\t * @return {json}\n\t */\n\tsave(){\n\t\treturn JSON.stringify(this._locations);\n\t}\n\n\tgetCurrent(){\n\t\treturn this._current;\n\t}\n\n\tsetCurrent(curr){\n\t\tvar loc;\n\n\t\tif(typeof curr == \"string\"){\n\t\t\tthis._currentCfi = curr;\n\t\t} else if (typeof curr == \"number\") {\n\t\t\tthis._current = curr;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._locations.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(typeof curr == \"string\"){\n\t\t\tloc = this.locationFromCfi(curr);\n\t\t\tthis._current = loc;\n\t\t} else {\n\t\t\tloc = curr;\n\t\t}\n\n\t\tthis.emit(EVENTS.LOCATIONS.CHANGED, {\n\t\t\tpercentage: this.percentageFromLocation(loc)\n\t\t});\n\t}\n\n\t/**\n\t * Get the current location\n\t */\n\tget currentLocation() {\n\t\treturn this._current;\n\t}\n\n\t/**\n\t * Set the current location\n\t */\n\tset currentLocation(curr) {\n\t\tthis.setCurrent(curr);\n\t}\n\n\t/**\n\t * Locations length\n\t */\n\tlength () {\n\t\treturn this._locations.length;\n\t}\n\n\tdestroy () {\n\t\tthis.spine = undefined;\n\t\tthis.request = undefined;\n\t\tthis.pause = undefined;\n\n\t\tthis.q.stop();\n\t\tthis.q = undefined;\n\t\tthis.epubcfi = undefined;\n\n\t\tthis._locations = undefined\n\t\tthis.total = undefined;\n\n\t\tthis.break = undefined;\n\t\tthis._current = undefined;\n\n\t\tthis.currentLocation = undefined;\n\t\tthis._currentCfi = undefined;\n\t\tclearTimeout(this.processingTimeout);\n\t}\n}\n\nEventEmitter(Locations.prototype);\n\nexport default Locations;\n","import path from \"path-webpack\";\nimport {qs} from \"./utils/core\";\n\n/**\n * Handles Parsing and Accessing an Epub Container\n * @class\n * @param {document} [containerDocument] xml document\n */\nclass Container {\n\tconstructor(containerDocument) {\n\t\tthis.packagePath = '';\n\t\tthis.directory = '';\n\t\tthis.encoding = '';\n\n\t\tif (containerDocument) {\n\t\t\tthis.parse(containerDocument);\n\t\t}\n\t}\n\n\t/**\n\t * Parse the Container XML\n\t * @param  {document} containerDocument\n\t */\n\tparse(containerDocument){\n\t\t//-- <rootfile full-path=\"OPS/package.opf\" media-type=\"application/oebps-package+xml\"/>\n\t\tvar rootfile;\n\n\t\tif(!containerDocument) {\n\t\t\tthrow new Error(\"Container File Not Found\");\n\t\t}\n\n\t\trootfile = qs(containerDocument, \"rootfile\");\n\n\t\tif(!rootfile) {\n\t\t\tthrow new Error(\"No RootFile Found\");\n\t\t}\n\n\t\tthis.packagePath = rootfile.getAttribute(\"full-path\");\n\t\tthis.directory = path.dirname(this.packagePath);\n\t\tthis.encoding = containerDocument.xmlEncoding;\n\t}\n\n\tdestroy() {\n\t\tthis.packagePath = undefined;\n\t\tthis.directory = undefined;\n\t\tthis.encoding = undefined;\n\t}\n}\n\nexport default Container;\n","import {qs, qsa, qsp, indexOfElementNode} from \"./utils/core\";\n\n/**\n * Open Packaging Format Parser\n * @class\n * @param {document} packageDocument OPF XML\n */\nclass Packaging {\n\tconstructor(packageDocument) {\n\t\tthis.manifest = {};\n\t\tthis.navPath = '';\n\t\tthis.ncxPath = '';\n\t\tthis.coverPath = '';\n\t\tthis.spineNodeIndex = 0;\n\t\tthis.spine = [];\n\t\tthis.metadata = {};\n\n\t\tif (packageDocument) {\n\t\t\tthis.parse(packageDocument);\n\t\t}\n\t}\n\n\t/**\n\t * Parse OPF XML\n\t * @param  {document} packageDocument OPF XML\n\t * @return {object} parsed package parts\n\t */\n\tparse(packageDocument){\n\t\tvar metadataNode, manifestNode, spineNode;\n\n\t\tif(!packageDocument) {\n\t\t\tthrow new Error(\"Package File Not Found\");\n\t\t}\n\n\t\tmetadataNode = qs(packageDocument, \"metadata\");\n\t\tif(!metadataNode) {\n\t\t\tthrow new Error(\"No Metadata Found\");\n\t\t}\n\n\t\tmanifestNode = qs(packageDocument, \"manifest\");\n\t\tif(!manifestNode) {\n\t\t\tthrow new Error(\"No Manifest Found\");\n\t\t}\n\n\t\tspineNode = qs(packageDocument, \"spine\");\n\t\tif(!spineNode) {\n\t\t\tthrow new Error(\"No Spine Found\");\n\t\t}\n\n\t\tthis.manifest = this.parseManifest(manifestNode);\n\t\tthis.navPath = this.findNavPath(manifestNode);\n\t\tthis.ncxPath = this.findNcxPath(manifestNode, spineNode);\n\t\tthis.coverPath = this.findCoverPath(packageDocument);\n\n\t\tthis.spineNodeIndex = indexOfElementNode(spineNode);\n\n\t\tthis.spine = this.parseSpine(spineNode, this.manifest);\n\n\t\tthis.uniqueIdentifier = this.findUniqueIdentifier(packageDocument);\n\t\tthis.metadata = this.parseMetadata(metadataNode);\n\n\t\tthis.metadata.direction = spineNode.getAttribute(\"page-progression-direction\");\n\n\n\t\treturn {\n\t\t\t\"metadata\" : this.metadata,\n\t\t\t\"spine\"    : this.spine,\n\t\t\t\"manifest\" : this.manifest,\n\t\t\t\"navPath\"  : this.navPath,\n\t\t\t\"ncxPath\"  : this.ncxPath,\n\t\t\t\"coverPath\": this.coverPath,\n\t\t\t\"spineNodeIndex\" : this.spineNodeIndex\n\t\t};\n\t}\n\n\t/**\n\t * Parse Metadata\n\t * @private\n\t * @param  {node} xml\n\t * @return {object} metadata\n\t */\n\tparseMetadata(xml){\n\t\tvar metadata = {};\n\n\t\tmetadata.title = this.getElementText(xml, \"title\");\n\t\tmetadata.creator = this.getElementText(xml, \"creator\");\n\t\tmetadata.description = this.getElementText(xml, \"description\");\n\n\t\tmetadata.pubdate = this.getElementText(xml, \"date\");\n\n\t\tmetadata.publisher = this.getElementText(xml, \"publisher\");\n\n\t\tmetadata.identifier = this.getElementText(xml, \"identifier\");\n\t\tmetadata.language = this.getElementText(xml, \"language\");\n\t\tmetadata.rights = this.getElementText(xml, \"rights\");\n\n\t\tmetadata.modified_date = this.getPropertyText(xml, \"dcterms:modified\");\n\n\t\tmetadata.layout = this.getPropertyText(xml, \"rendition:layout\");\n\t\tmetadata.orientation = this.getPropertyText(xml, \"rendition:orientation\");\n\t\tmetadata.flow = this.getPropertyText(xml, \"rendition:flow\");\n\t\tmetadata.viewport = this.getPropertyText(xml, \"rendition:viewport\");\n\t\tmetadata.media_active_class = this.getPropertyText(xml, \"media:active-class\");\n\t\t// metadata.page_prog_dir = packageXml.querySelector(\"spine\").getAttribute(\"page-progression-direction\");\n\n\t\treturn metadata;\n\t}\n\n\t/**\n\t * Parse Manifest\n\t * @private\n\t * @param  {node} manifestXml\n\t * @return {object} manifest\n\t */\n\tparseManifest(manifestXml){\n\t\tvar manifest = {};\n\n\t\t//-- Turn items into an array\n\t\t// var selected = manifestXml.querySelectorAll(\"item\");\n\t\tvar selected = qsa(manifestXml, \"item\");\n\t\tvar items = Array.prototype.slice.call(selected);\n\n\t\t//-- Create an object with the id as key\n\t\titems.forEach(function(item){\n\t\t\tvar id = item.getAttribute(\"id\"),\n\t\t\t\t\thref = item.getAttribute(\"href\") || \"\",\n\t\t\t\t\ttype = item.getAttribute(\"media-type\") || \"\",\n\t\t\t\t\toverlay = item.getAttribute(\"media-overlay\") || \"\",\n\t\t\t\t\tproperties = item.getAttribute(\"properties\") || \"\";\n\n\t\t\tmanifest[id] = {\n\t\t\t\t\"href\" : href,\n\t\t\t\t// \"url\" : href,\n\t\t\t\t\"type\" : type,\n\t\t\t\t\"overlay\" : overlay,\n\t\t\t\t\"properties\" : properties.length ? properties.split(\" \") : []\n\t\t\t};\n\n\t\t});\n\n\t\treturn manifest;\n\n\t}\n\n\t/**\n\t * Parse Spine\n\t * @private\n\t * @param  {node} spineXml\n\t * @param  {Packaging.manifest} manifest\n\t * @return {object} spine\n\t */\n\tparseSpine(spineXml, manifest){\n\t\tvar spine = [];\n\n\t\tvar selected = qsa(spineXml, \"itemref\");\n\t\tvar items = Array.prototype.slice.call(selected);\n\n\t\t// var epubcfi = new EpubCFI();\n\n\t\t//-- Add to array to mantain ordering and cross reference with manifest\n\t\titems.forEach(function(item, index){\n\t\t\tvar idref = item.getAttribute(\"idref\");\n\t\t\t// var cfiBase = epubcfi.generateChapterComponent(spineNodeIndex, index, Id);\n\t\t\tvar props = item.getAttribute(\"properties\") || \"\";\n\t\t\tvar propArray = props.length ? props.split(\" \") : [];\n\t\t\t// var manifestProps = manifest[Id].properties;\n\t\t\t// var manifestPropArray = manifestProps.length ? manifestProps.split(\" \") : [];\n\n\t\t\tvar itemref = {\n\t\t\t\t\"idref\" : idref,\n\t\t\t\t\"linear\" : item.getAttribute(\"linear\") || \"yes\",\n\t\t\t\t\"properties\" : propArray,\n\t\t\t\t// \"href\" : manifest[Id].href,\n\t\t\t\t// \"url\" :  manifest[Id].url,\n\t\t\t\t\"index\" : index\n\t\t\t\t// \"cfiBase\" : cfiBase\n\t\t\t};\n\t\t\tspine.push(itemref);\n\t\t});\n\n\t\treturn spine;\n\t}\n\n\t/**\n\t * Find Unique Identifier\n\t * @private\n\t * @param  {node} packageXml\n\t * @return {string} Unique Identifier text\n\t */\n\tfindUniqueIdentifier(packageXml){\n\t\tvar uniqueIdentifierId = packageXml.documentElement.getAttribute(\"unique-identifier\");\n\t\tif (! uniqueIdentifierId) {\n\t\t\treturn \"\";\n\t\t}\n\t\tvar identifier = packageXml.getElementById(uniqueIdentifierId);\n\t\tif (! identifier) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (identifier.localName === \"identifier\" && identifier.namespaceURI === \"http://purl.org/dc/elements/1.1/\") {\n\t\t\treturn identifier.childNodes[0].nodeValue.trim();\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Find TOC NAV\n\t * @private\n\t * @param {element} manifestNode\n\t * @return {string}\n\t */\n\tfindNavPath(manifestNode){\n\t\t// Find item with property \"nav\"\n\t\t// Should catch nav irregardless of order\n\t\t// var node = manifestNode.querySelector(\"item[properties$='nav'], item[properties^='nav '], item[properties*=' nav ']\");\n\t\tvar node = qsp(manifestNode, \"item\", {\"properties\":\"nav\"});\n\t\treturn node ? node.getAttribute(\"href\") : false;\n\t}\n\n\t/**\n\t * Find TOC NCX\n\t * media-type=\"application/x-dtbncx+xml\" href=\"toc.ncx\"\n\t * @private\n\t * @param {element} manifestNode\n\t * @param {element} spineNode\n\t * @return {string}\n\t */\n\tfindNcxPath(manifestNode, spineNode){\n\t\t// var node = manifestNode.querySelector(\"item[media-type='application/x-dtbncx+xml']\");\n\t\tvar node = qsp(manifestNode, \"item\", {\"media-type\":\"application/x-dtbncx+xml\"});\n\t\tvar tocId;\n\n\t\t// If we can't find the toc by media-type then try to look for id of the item in the spine attributes as\n\t\t// according to http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.4.1.2,\n\t\t// \"The item that describes the NCX must be referenced by the spine toc attribute.\"\n\t\tif (!node) {\n\t\t\ttocId = spineNode.getAttribute(\"toc\");\n\t\t\tif(tocId) {\n\t\t\t\t// node = manifestNode.querySelector(\"item[id='\" + tocId + \"']\");\n\t\t\t\tnode = manifestNode.querySelector(`#${tocId}`);\n\t\t\t}\n\t\t}\n\n\t\treturn node ? node.getAttribute(\"href\") : false;\n\t}\n\n\t/**\n\t * Find the Cover Path\n\t * <item properties=\"cover-image\" id=\"ci\" href=\"cover.svg\" media-type=\"image/svg+xml\" />\n\t * Fallback for Epub 2.0\n\t * @private\n\t * @param  {node} packageXml\n\t * @return {string} href\n\t */\n\tfindCoverPath(packageXml){\n\t\tvar pkg = qs(packageXml, \"package\");\n\t\tvar epubVersion = pkg.getAttribute(\"version\");\n\n\t\tif (epubVersion === \"2.0\") {\n\t\t\tvar metaCover = qsp(packageXml, \"meta\", {\"name\":\"cover\"});\n\t\t\tif (metaCover) {\n\t\t\t\tvar coverId = metaCover.getAttribute(\"content\");\n\t\t\t\t// var cover = packageXml.querySelector(\"item[id='\" + coverId + \"']\");\n\t\t\t\tvar cover = packageXml.getElementById(coverId);\n\t\t\t\treturn cover ? cover.getAttribute(\"href\") : \"\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// var node = packageXml.querySelector(\"item[properties='cover-image']\");\n\t\t\tvar node = qsp(packageXml, \"item\", {\"properties\":\"cover-image\"});\n\t\t\treturn node ? node.getAttribute(\"href\") : \"\";\n\t\t}\n\t}\n\n\t/**\n\t * Get text of a namespaced element\n\t * @private\n\t * @param  {node} xml\n\t * @param  {string} tag\n\t * @return {string} text\n\t */\n\tgetElementText(xml, tag){\n\t\tvar found = xml.getElementsByTagNameNS(\"http://purl.org/dc/elements/1.1/\", tag);\n\t\tvar el;\n\n\t\tif(!found || found.length === 0) return \"\";\n\n\t\tel = found[0];\n\n\t\tif(el.childNodes.length){\n\t\t\treturn el.childNodes[0].nodeValue;\n\t\t}\n\n\t\treturn \"\";\n\n\t}\n\n\t/**\n\t * Get text by property\n\t * @private\n\t * @param  {node} xml\n\t * @param  {string} property\n\t * @return {string} text\n\t */\n\tgetPropertyText(xml, property){\n\t\tvar el = qsp(xml, \"meta\", {\"property\":property});\n\n\t\tif(el && el.childNodes.length){\n\t\t\treturn el.childNodes[0].nodeValue;\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Load JSON Manifest\n\t * @param  {document} packageDocument OPF XML\n\t * @return {object} parsed package parts\n\t */\n\tload(json) {\n\t\tthis.metadata = json.metadata;\n\n\t\tlet spine = json.readingOrder || json.spine;\n\t\tthis.spine = spine.map((item, index) =>{\n\t\t\titem.index = index;\n\t\t\treturn item;\n\t\t});\n\n\t\tjson.resources.forEach((item, index) => {\n\t\t\tthis.manifest[index] = item;\n\n\t\t\tif (item.rel && item.rel[0] === \"cover\") {\n\t\t\t\tthis.coverPath = item.href;\n\t\t\t}\n\t\t});\n\n\t\tthis.spineNodeIndex = 0;\n\n\t\tthis.toc = json.toc.map((item, index) =>{\n\t\t\titem.label = item.title;\n\t\t\treturn item;\n\t\t});\n\n\t\treturn {\n\t\t\t\"metadata\" : this.metadata,\n\t\t\t\"spine\"    : this.spine,\n\t\t\t\"manifest\" : this.manifest,\n\t\t\t\"navPath\"  : this.navPath,\n\t\t\t\"ncxPath\"  : this.ncxPath,\n\t\t\t\"coverPath\": this.coverPath,\n\t\t\t\"spineNodeIndex\" : this.spineNodeIndex,\n\t\t\t\"toc\" : this.toc\n\t\t};\n\t}\n\n\tdestroy() {\n\t\tthis.manifest = undefined;\n\t\tthis.navPath = undefined;\n\t\tthis.ncxPath = undefined;\n\t\tthis.coverPath = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.spine = undefined;\n\t\tthis.metadata = undefined;\n\t}\n}\n\nexport default Packaging;\n","import {qs, qsa, querySelectorByType, filterChildren, getParentByTagName} from \"./utils/core\";\n\n/**\n * Navigation Parser\n * @param {document} xml navigation html / xhtml / ncx\n */\nclass Navigation {\n\tconstructor(xml, path, canonical) {\n\t\tthis.toc = [];\n\t\tthis.tocByHref = {};\n\t\tthis.tocById = {};\n\n\t\tthis.landmarks = [];\n\t\tthis.landmarksByType = {};\n\n\t\tthis.canonical = canonical;\n\n\t\tthis.path = path;\n\n\t\tthis.length = 0;\n\t\tif (xml) {\n\t\t\tthis.parse(xml);\n\t\t}\n\t}\n\n\t/**\n\t * Parse out the navigation items\n\t * @param {document} xml navigation html / xhtml / ncx\n\t */\n\tparse(xml) {\n\t\tlet isXml = xml.nodeType;\n\t\tlet html;\n\t\tlet ncx;\n\n\t\tif (isXml) {\n\t\t\thtml = qs(xml, \"html\");\n\t\t\tncx = qs(xml, \"ncx\");\n\t\t}\n\n\t\tif (!isXml) {\n\t\t\tthis.toc = this.load(xml);\n\t\t} else if(html) {\n\t\t\tthis.toc = this.parseNav(xml);\n\t\t\tthis.landmarks = this.parseLandmarks(xml);\n\t\t} else if(ncx){\n\t\t\tthis.toc = this.parseNcx(xml);\n\t\t}\n\n\t\tthis.length = 0;\n\n\t\tthis.unpack(this.toc);\n\t}\n\n\t/**\n\t * Unpack navigation items\n\t * @private\n\t * @param  {array} toc\n\t */\n\tunpack(toc) {\n\t\tvar item;\n\n\t\tfor (var i = 0; i < toc.length; i++) {\n\t\t\titem = toc[i];\n\n\t\t\tif (item.href) {\n\t\t\t\tthis.tocByHref[item.href] = i;\n\t\t\t}\n\n\t\t\tif (item.id) {\n\t\t\t\tthis.tocById[item.id] = i;\n\t\t\t}\n\n\t\t\tthis.length++;\n\n\t\t\tif (item.subitems.length) {\n\t\t\t\tthis.unpack(item.subitems);\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Get an item from the navigation\n\t * @param  {string} target\n\t * @return {object} navItem\n\t */\n\tget(target) {\n\t\tvar index;\n\n\t\tif(!target) {\n\t\t\treturn this.toc;\n\t\t}\n\n\t\tif(target.indexOf(\"#\") === 0) {\n\t\t\tindex = this.tocById[target.substring(1)];\n\t\t} else if(target in this.tocByHref){\n\t\t\tindex = this.tocByHref[target];\n\t\t}\n\n\t\treturn this.toc[index];\n\t}\n\n\t/**\n\t * Get a landmark by type\n\t * List of types: https://idpf.github.io/epub-vocabs/structure/\n\t * @param  {string} type\n\t * @return {object} landmarkItem\n\t */\n\tlandmark(type) {\n\t\tvar index;\n\n\t\tif(!type) {\n\t\t\treturn this.landmarks;\n\t\t}\n\n\t\tindex = this.landmarksByType[type];\n\n\t\treturn this.landmarks[index];\n\t}\n\n\t/**\n\t * Parse toc from a Epub > 3.0 Nav\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} navigation list\n\t */\n\tparseNav(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"toc\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar toc = {};\n\t\tvar list = [];\n\t\tvar item, parent;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.navItem(navItems[i]);\n\t\t\tif (item) {\n\t\t\t\ttoc[item.id] = item;\n\t\t\t\tif(!item.parent) {\n\t\t\t\t\tlist.push(item);\n\t\t\t\t} else {\n\t\t\t\t\tparent = toc[item.parent];\n\t\t\t\t\tparent.subitems.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a navItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} navItem\n\t */\n\tnavItem(item){\n\t\tlet id = item.getAttribute(\"id\") || undefined;\n\t\tlet content = filterChildren(item, \"a\", true);\n\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet src = content.getAttribute(\"href\") || \"\";\n\t\t\n\t\tif (!id) {\n\t\t\tid = src;\n\t\t}\n\t\tlet text = content.textContent || \"\";\n\t\tlet html = content.innerHTML;\n\t\tlet subitems = [];\n\t\tlet parentItem = getParentByTagName(item, \"li\");\n\t\tlet parent;\n\n\t\tif (parentItem) {\n\t\t\tparent = parentItem.getAttribute(\"id\");\n\t\t\tif (!parent) {\n\t\t\t\tconst parentContent = filterChildren(parentItem, \"a\", true);\n\t\t\t\tparent = parentContent && parentContent.getAttribute(\"href\");\n      \t\t\t}\n\t\t}\n\n\t\twhile (!parent && parentItem) {\n\t\t\tparentItem = getParentByTagName(parentItem, \"li\");\n\t\t\tif (parentItem) {\n\t\t\t\tparent = parentItem.getAttribute(\"id\");\n\t\t\t\tif (!parent) {\n\t\t\t\t\tconst parentContent = filterChildren(parentItem, \"a\", true);\n          \t\t\t\tparent = parentContent && parentContent.getAttribute(\"href\");\n        \t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar path = this.path.resolve(src);\n\n\t\treturn {\n\t\t\t\"id\": id,\n\t\t\t\"href\": src,\n\t\t\t\"canonical\": this.canonical(path),\n\t\t\t\"label\": text,\n\t\t\t\"html\": html,\n\t\t\t\"subitems\" : subitems,\n\t\t\t\"parent\" : parent\n\t\t};\n\t}\n\n\t/**\n\t * Parse landmarks from a Epub > 3.0 Nav\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} landmarks list\n\t */\n\tparseLandmarks(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"landmarks\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar list = [];\n\t\tvar item;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.landmarkItem(navItems[i]);\n\t\t\tif (item) {\n\t\t\t\tlist.push(item);\n\t\t\t\tthis.landmarksByType[item.type] = i;\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a landmarkItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} landmarkItem\n\t */\n\tlandmarkItem(item){\n\t\tlet content = filterChildren(item, \"a\", true);\n\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet type = content.getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") || undefined;\n\t\tlet href = content.getAttribute(\"href\") || \"\";\n\t\tlet text = content.textContent || \"\";\n\n\t\treturn {\n\t\t\t\"href\": href,\n\t\t\t\"label\": text,\n\t\t\t\"type\" : type\n\t\t};\n\t}\n\n\t/**\n\t * Parse from a Epub > 3.0 NC\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} navigation list\n\t */\n\tparseNcx(tocXml){\n\t\tvar navPoints = qsa(tocXml, \"navPoint\");\n\t\tvar length = navPoints.length;\n\t\tvar i;\n\t\tvar toc = {};\n\t\tvar list = [];\n\t\tvar item, parent;\n\n\t\tif(!navPoints || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.ncxItem(navPoints[i]);\n\t\t\ttoc[item.id] = item;\n\t\t\tif(!item.parent) {\n\t\t\t\tlist.push(item);\n\t\t\t} else {\n\t\t\t\tparent = toc[item.parent];\n\t\t\t\tparent.subitems.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a ncxItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} ncxItem\n\t */\n\tncxItem(item){\n\t\tvar id = item.getAttribute(\"id\") || false,\n\t\t\t\tcontent = qs(item, \"content\"),\n\t\t\t\tsrc = content.getAttribute(\"src\"),\n\t\t\t\tnavLabel = qs(item, \"navLabel\"),\n\t\t\t\ttext = navLabel.textContent ? navLabel.textContent : \"\",\n\t\t\t\tsubitems = [],\n\t\t\t\tparentNode = item.parentNode,\n\t\t\t\tparent;\n\n\t\tif(parentNode && (parentNode.nodeName === \"navPoint\" || parentNode.nodeName.split(':').slice(-1)[0] === \"navPoint\")) {\n\t\t\tparent = parentNode.getAttribute(\"id\");\n\t\t}\n\n\n\t\treturn {\n\t\t\t\"id\": id,\n\t\t\t\"href\": src,\n\t\t\t\"label\": text,\n\t\t\t\"subitems\" : subitems,\n\t\t\t\"parent\" : parent\n\t\t};\n\t}\n\n\t/**\n\t * Load Spine Items\n\t * @param  {object} json the items to be loaded\n\t * @return {Array} navItems\n\t */\n\tload(json) {\n\t\treturn json.map(item => {\n\t\t\titem.label = item.title;\n\t\t\titem.subitems = item.children ? this.load(item.children) : [];\n\t\t\treturn item;\n\t\t});\n\t}\n\n\t/**\n\t * forEach pass through\n\t * @param  {Function} fn function to run on each item\n\t * @return {method} forEach loop\n\t */\n\tforEach(fn) {\n\t\treturn this.toc.forEach(fn);\n\t}\n}\n\nexport default Navigation;\n","/*\n From Zip.js, by Gildas Lormeau\nedited down\n */\n\nvar table = {\n\t\"application\" : {\n\t\t\"ecmascript\" : [ \"es\", \"ecma\" ],\n\t\t\"javascript\" : \"js\",\n\t\t\"ogg\" : \"ogx\",\n\t\t\"pdf\" : \"pdf\",\n\t\t\"postscript\" : [ \"ps\", \"ai\", \"eps\", \"epsi\", \"epsf\", \"eps2\", \"eps3\" ],\n\t\t\"rdf+xml\" : \"rdf\",\n\t\t\"smil\" : [ \"smi\", \"smil\" ],\n\t\t\"xhtml+xml\" : [ \"xhtml\", \"xht\" ],\n\t\t\"xml\" : [ \"xml\", \"xsl\", \"xsd\", \"opf\", \"ncx\" ],\n\t\t\"zip\" : \"zip\",\n\t\t\"x-httpd-eruby\" : \"rhtml\",\n\t\t\"x-latex\" : \"latex\",\n\t\t\"x-maker\" : [ \"frm\", \"maker\", \"frame\", \"fm\", \"fb\", \"book\", \"fbdoc\" ],\n\t\t\"x-object\" : \"o\",\n\t\t\"x-shockwave-flash\" : [ \"swf\", \"swfl\" ],\n\t\t\"x-silverlight\" : \"scr\",\n\t\t\"epub+zip\" : \"epub\",\n\t\t\"font-tdpfr\" : \"pfr\",\n\t\t\"inkml+xml\" : [ \"ink\", \"inkml\" ],\n\t\t\"json\" : \"json\",\n\t\t\"jsonml+json\" : \"jsonml\",\n\t\t\"mathml+xml\" : \"mathml\",\n\t\t\"metalink+xml\" : \"metalink\",\n\t\t\"mp4\" : \"mp4s\",\n\t\t// \"oebps-package+xml\" : \"opf\",\n\t\t\"omdoc+xml\" : \"omdoc\",\n\t\t\"oxps\" : \"oxps\",\n\t\t\"vnd.amazon.ebook\" : \"azw\",\n\t\t\"widget\" : \"wgt\",\n\t\t// \"x-dtbncx+xml\" : \"ncx\",\n\t\t\"x-dtbook+xml\" : \"dtb\",\n\t\t\"x-dtbresource+xml\" : \"res\",\n\t\t\"x-font-bdf\" : \"bdf\",\n\t\t\"x-font-ghostscript\" : \"gsf\",\n\t\t\"x-font-linux-psf\" : \"psf\",\n\t\t\"x-font-otf\" : \"otf\",\n\t\t\"x-font-pcf\" : \"pcf\",\n\t\t\"x-font-snf\" : \"snf\",\n\t\t\"x-font-ttf\" : [ \"ttf\", \"ttc\" ],\n\t\t\"x-font-type1\" : [ \"pfa\", \"pfb\", \"pfm\", \"afm\" ],\n\t\t\"x-font-woff\" : \"woff\",\n\t\t\"x-mobipocket-ebook\" : [ \"prc\", \"mobi\" ],\n\t\t\"x-mspublisher\" : \"pub\",\n\t\t\"x-nzb\" : \"nzb\",\n\t\t\"x-tgif\" : \"obj\",\n\t\t\"xaml+xml\" : \"xaml\",\n\t\t\"xml-dtd\" : \"dtd\",\n\t\t\"xproc+xml\" : \"xpl\",\n\t\t\"xslt+xml\" : \"xslt\",\n\t\t\"internet-property-stream\" : \"acx\",\n\t\t\"x-compress\" : \"z\",\n\t\t\"x-compressed\" : \"tgz\",\n\t\t\"x-gzip\" : \"gz\",\n\t},\n\t\"audio\" : {\n\t\t\"flac\" : \"flac\",\n\t\t\"midi\" : [ \"mid\", \"midi\", \"kar\", \"rmi\" ],\n\t\t\"mpeg\" : [ \"mpga\", \"mpega\", \"mp2\", \"mp3\", \"m4a\", \"mp2a\", \"m2a\", \"m3a\" ],\n\t\t\"mpegurl\" : \"m3u\",\n\t\t\"ogg\" : [ \"oga\", \"ogg\", \"spx\" ],\n\t\t\"x-aiff\" : [ \"aif\", \"aiff\", \"aifc\" ],\n\t\t\"x-ms-wma\" : \"wma\",\n\t\t\"x-wav\" : \"wav\",\n\t\t\"adpcm\" : \"adp\",\n\t\t\"mp4\" : \"mp4a\",\n\t\t\"webm\" : \"weba\",\n\t\t\"x-aac\" : \"aac\",\n\t\t\"x-caf\" : \"caf\",\n\t\t\"x-matroska\" : \"mka\",\n\t\t\"x-pn-realaudio-plugin\" : \"rmp\",\n\t\t\"xm\" : \"xm\",\n\t\t\"mid\" : [ \"mid\", \"rmi\" ]\n\t},\n\t\"image\" : {\n\t\t\"gif\" : \"gif\",\n\t\t\"ief\" : \"ief\",\n\t\t\"jpeg\" : [ \"jpeg\", \"jpg\", \"jpe\" ],\n\t\t\"pcx\" : \"pcx\",\n\t\t\"png\" : \"png\",\n\t\t\"svg+xml\" : [ \"svg\", \"svgz\" ],\n\t\t\"tiff\" : [ \"tiff\", \"tif\" ],\n\t\t\"x-icon\" : \"ico\",\n\t\t\"bmp\" : \"bmp\",\n\t\t\"webp\" : \"webp\",\n\t\t\"x-pict\" : [ \"pic\", \"pct\" ],\n\t\t\"x-tga\" : \"tga\",\n\t\t\"cis-cod\" : \"cod\"\n\t},\n\t\"text\" : {\n\t\t\"cache-manifest\" : [ \"manifest\", \"appcache\" ],\n\t\t\"css\" : \"css\",\n\t\t\"csv\" : \"csv\",\n\t\t\"html\" : [ \"html\", \"htm\", \"shtml\", \"stm\" ],\n\t\t\"mathml\" : \"mml\",\n\t\t\"plain\" : [ \"txt\", \"text\", \"brf\", \"conf\", \"def\", \"list\", \"log\", \"in\", \"bas\" ],\n\t\t\"richtext\" : \"rtx\",\n\t\t\"tab-separated-values\" : \"tsv\",\n\t\t\"x-bibtex\" : \"bib\"\n\t},\n\t\"video\" : {\n\t\t\"mpeg\" : [ \"mpeg\", \"mpg\", \"mpe\", \"m1v\", \"m2v\", \"mp2\", \"mpa\", \"mpv2\" ],\n\t\t\"mp4\" : [ \"mp4\", \"mp4v\", \"mpg4\" ],\n\t\t\"quicktime\" : [ \"qt\", \"mov\" ],\n\t\t\"ogg\" : \"ogv\",\n\t\t\"vnd.mpegurl\" : [ \"mxu\", \"m4u\" ],\n\t\t\"x-flv\" : \"flv\",\n\t\t\"x-la-asf\" : [ \"lsf\", \"lsx\" ],\n\t\t\"x-mng\" : \"mng\",\n\t\t\"x-ms-asf\" : [ \"asf\", \"asx\", \"asr\" ],\n\t\t\"x-ms-wm\" : \"wm\",\n\t\t\"x-ms-wmv\" : \"wmv\",\n\t\t\"x-ms-wmx\" : \"wmx\",\n\t\t\"x-ms-wvx\" : \"wvx\",\n\t\t\"x-msvideo\" : \"avi\",\n\t\t\"x-sgi-movie\" : \"movie\",\n\t\t\"x-matroska\" : [ \"mpv\", \"mkv\", \"mk3d\", \"mks\" ],\n\t\t\"3gpp2\" : \"3g2\",\n\t\t\"h261\" : \"h261\",\n\t\t\"h263\" : \"h263\",\n\t\t\"h264\" : \"h264\",\n\t\t\"jpeg\" : \"jpgv\",\n\t\t\"jpm\" : [ \"jpm\", \"jpgm\" ],\n\t\t\"mj2\" : [ \"mj2\", \"mjp2\" ],\n\t\t\"vnd.ms-playready.media.pyv\" : \"pyv\",\n\t\t\"vnd.uvvu.mp4\" : [ \"uvu\", \"uvvu\" ],\n\t\t\"vnd.vivo\" : \"viv\",\n\t\t\"webm\" : \"webm\",\n\t\t\"x-f4v\" : \"f4v\",\n\t\t\"x-m4v\" : \"m4v\",\n\t\t\"x-ms-vob\" : \"vob\",\n\t\t\"x-smv\" : \"smv\"\n\t}\n};\n\nvar mimeTypes = (function() {\n\tvar type, subtype, val, index, mimeTypes = {};\n\tfor (type in table) {\n\t\tif (table.hasOwnProperty(type)) {\n\t\t\tfor (subtype in table[type]) {\n\t\t\t\tif (table[type].hasOwnProperty(subtype)) {\n\t\t\t\t\tval = table[type][subtype];\n\t\t\t\t\tif (typeof val == \"string\") {\n\t\t\t\t\t\tmimeTypes[val] = type + \"/\" + subtype;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (index = 0; index < val.length; index++) {\n\t\t\t\t\t\t\tmimeTypes[val[index]] = type + \"/\" + subtype;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn mimeTypes;\n})();\n\nvar defaultValue = \"text/plain\";//\"application/octet-stream\";\n\nfunction lookup(filename) {\n\treturn filename && mimeTypes[filename.split(\".\").pop().toLowerCase()] || defaultValue;\n};\n\nmodule.exports = {\n\t'lookup': lookup\n}\n","import {substitute} from \"./utils/replacements\";\nimport {createBase64Url, createBlobUrl, blob2base64} from \"./utils/core\";\nimport Url from \"./utils/url\";\nimport mime from \"../libs/mime/mime\";\nimport Path from \"./utils/path\";\nimport path from \"path-webpack\";\n\n/**\n * Handle Package Resources\n * @class\n * @param {Manifest} manifest\n * @param {object} [options]\n * @param {string} [options.replacements=\"base64\"]\n * @param {Archive} [options.archive]\n * @param {method} [options.resolver]\n */\nclass Resources {\n\tconstructor(manifest, options) {\n\t\tthis.settings = {\n\t\t\treplacements: (options && options.replacements) || \"base64\",\n\t\t\tarchive: (options && options.archive),\n\t\t\tresolver: (options && options.resolver),\n\t\t\trequest: (options && options.request)\n\t\t};\n\n\t\tthis.process(manifest);\n\t}\n\n\t/**\n\t * Process resources\n\t * @param {Manifest} manifest\n\t */\n\tprocess(manifest){\n\t\tthis.manifest = manifest;\n\t\tthis.resources = Object.keys(manifest).\n\t\t\tmap(function (key){\n\t\t\t\treturn manifest[key];\n\t\t\t});\n\n\t\tthis.replacementUrls = [];\n\n\t\tthis.html = [];\n\t\tthis.assets = [];\n\t\tthis.css = [];\n\n\t\tthis.urls = [];\n\t\tthis.cssUrls = [];\n\n\t\tthis.split();\n\t\tthis.splitUrls();\n\t}\n\n\t/**\n\t * Split resources by type\n\t * @private\n\t */\n\tsplit(){\n\n\t\t// HTML\n\t\tthis.html = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type === \"application/xhtml+xml\" ||\n\t\t\t\t\t\titem.type === \"text/html\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Exclude HTML\n\t\tthis.assets = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type !== \"application/xhtml+xml\" &&\n\t\t\t\t\t\titem.type !== \"text/html\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Only CSS\n\t\tthis.css = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type === \"text/css\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Convert split resources into Urls\n\t * @private\n\t */\n\tsplitUrls(){\n\n\t\t// All Assets Urls\n\t\tthis.urls = this.assets.\n\t\t\tmap(function(item) {\n\t\t\t\treturn item.href;\n\t\t\t}.bind(this));\n\n\t\t// Css Urls\n\t\tthis.cssUrls = this.css.map(function(item) {\n\t\t\treturn item.href;\n\t\t});\n\n\t}\n\n\t/**\n\t * Create a url to a resource\n\t * @param {string} url\n\t * @return {Promise<string>} Promise resolves with url string\n\t */\n\tcreateUrl (url) {\n\t\tvar parsedUrl = new Url(url);\n\t\tvar mimeType = mime.lookup(parsedUrl.filename);\n\n\t\tif (this.settings.archive) {\n\t\t\treturn this.settings.archive.createUrl(url, {\"base64\": (this.settings.replacements === \"base64\")});\n\t\t} else {\n\t\t\tif (this.settings.replacements === \"base64\") {\n\t\t\t\treturn this.settings.request(url, 'blob')\n\t\t\t\t\t.then((blob) => {\n\t\t\t\t\t\treturn blob2base64(blob);\n\t\t\t\t\t})\n\t\t\t\t\t.then((blob) => {\n\t\t\t\t\t\treturn createBase64Url(blob, mimeType);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn this.settings.request(url, 'blob').then((blob) => {\n\t\t\t\t\treturn createBlobUrl(blob, mimeType);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Create blob urls for all the assets\n\t * @return {Promise}         returns replacement urls\n\t */\n\treplacements(){\n\t\tif (this.settings.replacements === \"none\") {\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tresolve(this.urls);\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tvar replacements = this.urls.\n\t\t\tmap( (url) => {\n\t\t\t\tvar absolute = this.settings.resolver(url);\n\n\t\t\t\treturn this.createUrl(absolute).\n\t\t\t\t\tcatch((err) => {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t});\n\n\t\treturn Promise.all(replacements)\n\t\t\t.then( (replacementUrls) => {\n\t\t\t\tthis.replacementUrls = replacementUrls.filter((url) => {\n\t\t\t\t\treturn (typeof(url) === \"string\");\n\t\t\t\t});\n\t\t\t\treturn replacementUrls;\n\t\t\t});\n\t}\n\n\t/**\n\t * Replace URLs in CSS resources\n\t * @private\n\t * @param  {Archive} [archive]\n\t * @param  {method} [resolver]\n\t * @return {Promise}\n\t */\n\treplaceCss(archive, resolver){\n\t\tvar replaced = [];\n\t\tarchive = archive || this.settings.archive;\n\t\tresolver = resolver || this.settings.resolver;\n\t\tthis.cssUrls.forEach(function(href) {\n\t\t\tvar replacement = this.createCssFile(href, archive, resolver)\n\t\t\t\t.then(function (replacementUrl) {\n\t\t\t\t\t// switch the url in the replacementUrls\n\t\t\t\t\tvar indexInUrls = this.urls.indexOf(href);\n\t\t\t\t\tif (indexInUrls > -1) {\n\t\t\t\t\t\tthis.replacementUrls[indexInUrls] = replacementUrl;\n\t\t\t\t\t}\n\t\t\t\t}.bind(this))\n\n\n\t\t\treplaced.push(replacement);\n\t\t}.bind(this));\n\t\treturn Promise.all(replaced);\n\t}\n\n\t/**\n\t * Create a new CSS file with the replaced URLs\n\t * @private\n\t * @param  {string} href the original css file\n\t * @return {Promise}  returns a BlobUrl to the new CSS file or a data url\n\t */\n\tcreateCssFile(href){\n\t\tvar newUrl;\n\n\t\tif (path.isAbsolute(href)) {\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\tvar absolute = this.settings.resolver(href);\n\n\t\t// Get the text of the css file from the archive\n\t\tvar textResponse;\n\n\t\tif (this.settings.archive) {\n\t\t\ttextResponse = this.settings.archive.getText(absolute);\n\t\t} else {\n\t\t\ttextResponse = this.settings.request(absolute, \"text\");\n\t\t}\n\n\t\t// Get asset links relative to css file\n\t\tvar relUrls = this.urls.map( (assetHref) => {\n\t\t\tvar resolved = this.settings.resolver(assetHref);\n\t\t\tvar relative = new Path(absolute).relative(resolved);\n\n\t\t\treturn relative;\n\t\t});\n\n\t\tif (!textResponse) {\n\t\t\t// file not found, don't replace\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\treturn textResponse.then( (text) => {\n\t\t\t// Replacements in the css text\n\t\t\ttext = substitute(text, relUrls, this.replacementUrls);\n\n\t\t\t// Get the new url\n\t\t\tif (this.settings.replacements === \"base64\") {\n\t\t\t\tnewUrl = createBase64Url(text, \"text/css\");\n\t\t\t} else {\n\t\t\t\tnewUrl = createBlobUrl(text, \"text/css\");\n\t\t\t}\n\n\t\t\treturn newUrl;\n\t\t}, (err) => {\n\t\t\t// handle response errors\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\n\t}\n\n\t/**\n\t * Resolve all resources URLs relative to an absolute URL\n\t * @param  {string} absolute to be resolved to\n\t * @param  {resolver} [resolver]\n\t * @return {string[]} array with relative Urls\n\t */\n\trelativeTo(absolute, resolver){\n\t\tresolver = resolver || this.settings.resolver;\n\n\t\t// Get Urls relative to current sections\n\t\treturn this.urls.\n\t\t\tmap(function(href) {\n\t\t\t\tvar resolved = resolver(href);\n\t\t\t\tvar relative = new Path(absolute).relative(resolved);\n\t\t\t\treturn relative;\n\t\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Get a URL for a resource\n\t * @param  {string} path\n\t * @return {string} url\n\t */\n\tget(path) {\n\t\tvar indexInUrls = this.urls.indexOf(path);\n\t\tif (indexInUrls === -1) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.replacementUrls.length) {\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\tresolve(this.replacementUrls[indexInUrls]);\n\t\t\t}.bind(this));\n\t\t} else {\n\t\t\treturn this.createUrl(path);\n\t\t}\n\t}\n\n\t/**\n\t * Substitute urls in content, with replacements,\n\t * relative to a url if provided\n\t * @param  {string} content\n\t * @param  {string} [url]   url to resolve to\n\t * @return {string}         content with urls substituted\n\t */\n\tsubstitute(content, url) {\n\t\tvar relUrls;\n\t\tif (url) {\n\t\t\trelUrls = this.relativeTo(url);\n\t\t} else {\n\t\t\trelUrls = this.urls;\n\t\t}\n\t\treturn substitute(content, relUrls, this.replacementUrls);\n\t}\n\n\tdestroy() {\n\t\tthis.settings = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.resources = undefined;\n\t\tthis.replacementUrls = undefined;\n\t\tthis.html = undefined;\n\t\tthis.assets = undefined;\n\t\tthis.css = undefined;\n\n\t\tthis.urls = undefined;\n\t\tthis.cssUrls = undefined;\n\t}\n}\n\nexport default Resources;\n","import EpubCFI from \"./epubcfi\";\nimport {\n\tqs,\n\tqsa,\n\tquerySelectorByType,\n\tindexOfSorted,\n\tlocationOf\n} from \"./utils/core\";\n\n/**\n * Page List Parser\n * @param {document} [xml]\n */\nclass PageList {\n\tconstructor(xml, path, canonical) {\n\t\tthis.pages = [];\n\t\tthis.locations = [];\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.firstPage = 0;\n\t\tthis.lastPage = 0;\n\t\tthis.totalPages = 0;\n\n\t\tthis.pagesByAbsolutePath = {};\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\n\t\tthis.path = path;\n\t\tthis.canonical = canonical;\n\n\t\tif (xml) {\n\t\t\tthis.pageList = this.parse(xml);\n\t\t}\n\n\t\tif(this.pageList && this.pageList.length) {\n\t\t\tthis.process(this.pageList);\n\t\t}\n\t}\n\n\t/**\n\t * Parse PageList Xml\n\t * @param  {document} xml\n\t */\n\tparse(xml) {\n\t\tvar html = qs(xml, \"html\");\n\t\tvar ncx = qs(xml, \"ncx\");\n\n\t\tif(html) {\n\t\t\treturn this.parseNav(xml);\n\t\t} else if(ncx){ // Not supported\n\t\t\t// return this.parseNcx(xml);\n\t\t\treturn;\n\t\t}\n\n\t}\n\n\t/**\n\t * Parse a Nav PageList\n\t * @private\n\t * @param  {node} navHtml\n\t * @return {PageList.item[]} list\n\t */\n\tparseNav(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"page-list\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar list = [];\n\t\tvar item;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.item(navItems[i], i);\n\t\t\tlist.push(item);\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Page List Item\n\t * @private\n\t * @param  {node} item\n\t * @return {object} pageListItem\n\t */\n\titem(item, i){\n\t\tvar content = qs(item, \"a\"),\n\t\t\t\thref = content.getAttribute(\"href\") || \"\",\n\t\t\t\ttext = content.textContent || \"\",\n\t\t\t\tpageLabel = text,\n\t\t\t\tpage = i + 1, \n\t\t\t\tisCfi = href.indexOf(\"epubcfi\"),\n\t\t\t\tsplit,\n\t\t\t\tpackageUrl,\n\t\t\t\tcfi;\n\n\t\tif(isCfi != -1) {\n\t\t\tsplit = href.split(\"#\");\n\t\t\tpackageUrl = split[0];\n\t\t\tcfi = split.length > 1 ? split[1] : false;\n\t\t\treturn {\n\t\t\t\t\"cfi\" : cfi,\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"packageUrl\" : packageUrl,\n\t\t\t\t\"page\" : page,\n\t\t\t\t\"pageLabel\": pageLabel\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"page\" : page,\n\t\t\t\t\"pageLabel\": pageLabel\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Process pageList items\n\t * @private\n\t * @param  {array} pageList\n\t */\n\tprocess(pageList){\n\t\tpageList.forEach(function(item){\n\t\t\tthis.pages.push(item.page);\n\t\t\tif (item.cfi) {\n\t\t\t\tthis.locations.push(item.cfi);\n\t\t\t}\n\t\t\tif ( item.href ) {\n\t\t\t\tvar href = (item.href.split('#'))[0];\n\t\t\t\tvar path = this.path.resolve(href);\n\t\t\t\tvar absolute = this.canonical(path);\n\t\t\t\tif ( this.pagesByAbsolutePath[absolute] == null ) {\n\t\t\t\t\tthis.pagesByAbsolutePath[absolute] = [];\n\t\t\t\t}\n\t\t\t\tthis.pagesByAbsolutePath[absolute].push(item.page);\n\t\t\t}\n\t\t}, this);\n\t\tthis.firstPage = parseInt(this.pages[0]);\n\t\tthis.lastPage = parseInt(this.pages[this.pages.length-1]);\n\t\tthis.totalPages = this.lastPage - this.firstPage;\n\t}\n\n\t/**\n\t * Get a PageList result from a EpubCFI\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} page\n\t */\n\tpageFromCfi(cfi){\n\t\tvar pg = -1;\n\n\t\t// Check if the pageList has not been set yet\n\t\tif(this.locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// TODO: check if CFI is valid?\n\n\t\t// check if the cfi is in the location list\n\t\t// var index = this.locations.indexOf(cfi);\n\t\tvar index = indexOfSorted(cfi, this.locations, this.epubcfi.compare);\n\t\tif(index != -1) {\n\t\t\tpg = this.pages[index];\n\t\t} else {\n\t\t\t// Otherwise add it to the list of locations\n\t\t\t// Insert it in the correct position in the locations page\n\t\t\t//index = EPUBJS.core.insert(cfi, this.locations, this.epubcfi.compare);\n\t\t\tindex = locationOf(cfi, this.locations, this.epubcfi.compare);\n\t\t\t// Get the page at the location just before the new one, or return the first\n\t\t\tpg = index-1 >= 0 ? this.pages[index-1] : this.pages[0];\n\t\t\tif(pg !== undefined) {\n\t\t\t\t// Add the new page in so that the locations and page array match up\n\t\t\t\t//this.pages.splice(index, 0, pg);\n\t\t\t} else {\n\t\t\t\tpg = -1;\n\t\t\t}\n\n\t\t}\n\t\treturn pg;\n\t}\n\n\tpagesFromLocation(location) {\n\t\tvar pgs = [];\n\n\t\t// Check if the pageList has not been set yet\n\t\tif(this.locations.length === 0) {\n\t\t\treturn [];\n\t\t}\n\n\t\tvar pg = this.pageFromCfi(location.start.cfi);\n\t\tif ( pg == -1 ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tpgs.push(pg);\n\t\tpg = this.pageFromCfi(location.end.cfi);\n\t\tif ( pg != pgs[0] ) {\n\t\t\tpgs.push(pg);\n\t\t}\n\n\t\treturn pgs;\n\t}\n\n\tpageLabel(page) {\n\t\tvar item = this.pageList[page];\n\t\tif ( item ) {\n\t\t\treturn item.pageLabel || `#${page}`;\n\t\t}\n\t\treturn -1;\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Page List Item\n\t * @param  {string | number} pg\n\t * @return {string} cfi\n\t */\n\tcfiFromPage(pg){\n\t\tvar cfi = -1;\n\t\t// check that pg is an int\n\t\tif(typeof pg != \"number\"){\n\t\t\tpg = parseInt(pg);\n\t\t}\n\n\t\t// check if the cfi is in the page list\n\t\t// Pages could be unsorted.\n\t\tvar index = this.pages.indexOf(pg);\n\t\tif(index != -1) {\n\t\t\tcfi = this.locations[index];\n\t\t}\n\t\t// TODO: handle pages not in the list\n\t\treturn cfi;\n\t}\n\n\tcfiFromPageLabel(pageLabel) {\n\t\tvar item = this.pageList.find(item => item.pageLabel == pageLabel);\n\t\tif ( item ) {\n\t\t\treturn this.cfiFromPage(item.page);\n\t\t}\n\t\treturn -1;\n\t}\n\n\t/**\n\t * Get a Page from Book percentage\n\t * @param  {number} percent\n\t * @return {number} page\n\t */\n\tpageFromPercentage(percent){\n\t\tvar pg = Math.round(this.totalPages * percent);\n\t\treturn pg;\n\t}\n\n\titemFromPercentage(percent) {\n\t\tvar pg = this.pageFromPercentage(percent);\n\t\treturn this.pageList[pg - 1];\n\t}\n\n\titemFromCfi(cfi) {\n\t\tvar pg = this.pageFromCfi(cfi);\n\t\treturn this.pageList[pg - 1];\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a page\n\t * @param  {number} pg the page\n\t * @return {number} percentage\n\t */\n\tpercentageFromPage(pg){\n\t\tvar percentage = (pg - this.firstPage) / this.totalPages;\n\t\treturn Math.round(percentage * 1000) / 1000;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a cfi\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} percentage\n\t */\n\tpercentageFromCfi(cfi){\n\t\tvar pg = this.pageFromCfi(cfi);\n\t\tvar percentage = this.percentageFromPage(pg);\n\t\treturn percentage;\n\t}\n\n\t/**\n\t * Destroy\n\t */\n\tdestroy() {\n\t\tthis.pages = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.epubcfi = undefined;\n\n\t\tthis.pageList = undefined;\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\t}\n}\n\nexport default PageList;\n","import { extend } from \"./utils/core\";\nimport { EVENTS } from \"./utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Figures out the CSS values to apply for a layout\n * @class\n * @param {object} settings\n * @param {string} [settings.layout='reflowable']\n * @param {string} [settings.spread]\n * @param {number} [settings.minSpreadWidth=800]\n * @param {boolean} [settings.evenSpreads=false]\n */\nclass Layout {\n\tconstructor(settings) {\n\t\tthis.settings = settings;\n\t\tthis.name = settings.layout || \"reflowable\";\n\t\tthis._spread = (settings.spread === \"none\") ? false : true;\n\t\tthis._minSpreadWidth = settings.minSpreadWidth || 800;\n\t\tthis._evenSpreads = settings.evenSpreads || false;\n\n\t\tif (settings.flow === \"scrolled\" ||\n\t\t\t\tsettings.flow === \"scrolled-continuous\" ||\n\t\t\t\tsettings.flow === \"scrolled-doc\") {\n\t\t\tthis._flow = \"scrolled\";\n\t\t} else {\n\t\t\tthis._flow = \"paginated\";\n\t\t}\n\n\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.spreadWidth = 0;\n\t\tthis.delta = 0;\n\n\t\tthis.columnWidth = 0;\n\t\tthis.gap = 0;\n\t\tthis.divisor = 1;\n\n\t\tthis.props = {\n\t\t\tname: this.name,\n\t\t\tspread: this._spread,\n\t\t\tflow: this._flow,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tspreadWidth: 0,\n\t\t\tdelta: 0,\n\t\t\tcolumnWidth: 0,\n\t\t\tgap: 0,\n\t\t\tdivisor: 1\n\t\t};\n\n\t}\n\n\t/**\n\t * Switch the flow between paginated and scrolled\n\t * @param  {string} flow paginated | scrolled\n\t * @return {string} simplified flow\n\t */\n\tflow(flow) {\n\t\tif (typeof(flow) != \"undefined\") {\n\t\t\tif (flow === \"scrolled\" ||\n\t\t\t\t\tflow === \"scrolled-continuous\" ||\n\t\t\t\t\tflow === \"scrolled-doc\") {\n\t\t\t\tthis._flow = \"scrolled\";\n\t\t\t} else {\n\t\t\t\tthis._flow = \"paginated\";\n\t\t\t}\n\t\t\t// this.props.flow = this._flow;\n\t\t\tthis.update({flow: this._flow});\n\t\t}\n\t\treturn this._flow;\n\t}\n\n\t/**\n\t * Switch between using spreads or not, and set the\n\t * width at which they switch to single.\n\t * @param  {string} spread \"none\" | \"always\" | \"auto\"\n\t * @param  {number} min integer in pixels\n\t * @return {boolean} spread true | false\n\t */\n\tspread(spread, min) {\n\n\t\tif (spread) {\n\t\t\tthis._spread = (spread === \"none\") ? false : true;\n\t\t\t// this.props.spread = this._spread;\n\t\t\tthis.update({spread: this._spread});\n\t\t}\n\n\t\tif (min >= 0) {\n\t\t\tthis._minSpreadWidth = min;\n\t\t}\n\n\t\treturn this._spread;\n\t}\n\n\t/**\n\t * Calculate the dimensions of the pagination\n\t * @param  {number} _width  width of the rendering\n\t * @param  {number} _height height of the rendering\n\t * @param  {number} _gap    width of the gap between columns\n\t */\n\tcalculate(_width, _height, _gap){\n\n\t\tvar divisor = 1;\n\t\tvar gap = _gap || 0;\n\n\t\t//-- Check the width and create even width columns\n\t\t// var fullWidth = Math.floor(_width);\n\t\tvar width = _width;\n\t\tvar height = _height;\n\n\t\tvar section = Math.floor(width / 12);\n\n\t\tvar columnWidth;\n\t\tvar spreadWidth;\n\t\tvar pageWidth;\n\t\tvar delta;\n\n\t\tif (this._spread && width >= this._minSpreadWidth) {\n\t\t\tdivisor = 2;\n\t\t} else {\n\t\t\tdivisor = 1;\n\t\t}\n\n\t\tif (this.name === \"reflowable\" && this._flow === \"paginated\" && !(_gap >= 0)) {\n\t\t\tgap = ((section % 2 === 0) ? section : section - 1);\n\t\t}\n\n\t\tif (this.name === \"pre-paginated\" ) {\n\t\t\tgap = 0;\n\t\t}\n\n\t\t//-- Double Page\n\t\tif(divisor > 1) {\n\t\t\t// width = width - gap;\n\t\t\t// columnWidth = (width - gap) / divisor;\n\t\t\t// gap = gap / divisor;\n\t\t\tcolumnWidth = (width / divisor) - gap;\n\t\t\tpageWidth = columnWidth + gap;\n\t\t} else {\n\t\t\tcolumnWidth = width;\n\t\t\tpageWidth = width;\n\t\t}\n\n\t\tif (this.name === \"pre-paginated\" && divisor > 1) {\n\t\t\twidth = columnWidth;\n\t\t}\n\n\t\tspreadWidth = (columnWidth * divisor) + gap;\n\n\t\tdelta = Math.ceil(width);\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.spreadWidth = spreadWidth;\n\t\tthis.pageWidth = pageWidth;\n\t\tthis.delta = delta;\n\n\t\tthis.columnWidth = columnWidth;\n\t\tthis.gap = gap;\n\t\tthis.divisor = divisor;\n\n\t\t// this.props.width = width;\n\t\t// this.props.height = _height;\n\t\t// this.props.spreadWidth = spreadWidth;\n\t\t// this.props.pageWidth = pageWidth;\n\t\t// this.props.delta = delta;\n\t\t//\n\t\t// this.props.columnWidth = colWidth;\n\t\t// this.props.gap = gap;\n\t\t// this.props.divisor = divisor;\n\n\t\tthis.update({\n\t\t\twidth,\n\t\t\theight,\n\t\t\tspreadWidth,\n\t\t\tpageWidth,\n\t\t\tdelta,\n\t\t\tcolumnWidth,\n\t\t\tgap,\n\t\t\tdivisor\n\t\t});\n\n\t}\n\n\t/**\n\t * Apply Css to a Document\n\t * @param  {Contents} contents\n\t * @return {Promise}\n\t */\n\tformat(contents){\n\t\tvar formating;\n\n\t\tvar viewport = contents.viewport();\n\t\t// console.log(\"AHOY contents.format VIEWPORT\", this.name, viewport.height);\n\t\tif (this.name === \"pre-paginated\" && viewport.height != 'auto' && viewport.height != undefined ) {\n\t\t\t// console.log(\"AHOY CONTENTS format\", this.columnWidth, this.height);\n\t\t\tformating = contents.fit(this.columnWidth, this.height);\n\t\t} else if (this._flow === \"paginated\") {\n\t\t\tformating = contents.columns(this.width, this.height, this.columnWidth, this.gap);\n\t\t} else { // scrolled\n\t\t\tformating = contents.size(this.width, null);\n\t\t\tif ( this.name === 'pre-paginated' ) {\n\t\t\t\tcontents.content.style.overflow = 'auto';\n\t\t\t\tcontents.addStylesheetRules({\n\t\t\t\t\t\"body\": {\n\t\t\t\t\t\t\"margin\": 0,\n\t\t\t\t\t\t\"padding\": \"1em !important\",\n\t\t\t\t\t\t\"box-sizing\": \"border-box\"\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\treturn formating; // might be a promise in some View Managers\n\t}\n\n\t/**\n\t * Count number of pages\n\t * @param  {number} totalLength\n\t * @param  {number} pageLength\n\t * @return {{spreads: Number, pages: Number}}\n\t */\n\tcount(totalLength, pageLength) {\n\n\t\tlet spreads, pages;\n\n\t\tif (this.name === \"pre-paginated\") {\n\t\t\tspreads = 1;\n\t\t\tpages = 1;\n\t\t} else if (this._flow === \"paginated\") {\n\t\t\tpageLength = pageLength || this.delta;\n\t\t\tspreads = Math.ceil( totalLength / pageLength);\n\t\t\tpages = spreads * this.divisor;\n\t\t} else { // scrolled\n\t\t\tpageLength = pageLength || this.height;\n\t\t\tspreads = Math.ceil( totalLength / pageLength);\n\t\t\tpages = spreads;\n\t\t}\n\n\t\treturn {\n\t\t\tspreads,\n\t\t\tpages\n\t\t};\n\n\t}\n\n\t/**\n\t * Update props that have changed\n\t * @private\n\t * @param  {object} props\n\t */\n\tupdate(props) {\n\t\t// Remove props that haven't changed\n\t\tObject.keys(props).forEach((propName) => {\n\t\t\tif (this.props[propName] === props[propName]) {\n\t\t\t\tdelete props[propName];\n\t\t\t}\n\t\t});\n\n\t\tif(Object.keys(props).length > 0) {\n\t\t\tlet newProps = extend(this.props, props);\n\t\t\tthis.emit(EVENTS.LAYOUT.UPDATED, newProps, props);\n\t\t}\n\t}\n}\n\nEventEmitter(Layout.prototype);\n\nexport default Layout;\n","import Url from \"./utils/url\";\n\n/**\n * Themes to apply to displayed content\n * @class\n * @param {Rendition} rendition\n */\nclass Themes {\n\tconstructor(rendition) {\n\t\tthis.rendition = rendition;\n\t\tthis._themes = {\n\t\t\t\"default\" : {\n\t\t\t\t\"rules\" : {},\n\t\t\t\t\"url\" : \"\",\n\t\t\t\t\"serialized\" : \"\"\n\t\t\t}\n\t\t};\n\t\tthis._overrides = {};\n\t\tthis._current = \"default\";\n\t\tthis._injected = [];\n\t\tthis.rendition.hooks.content.register(this.inject.bind(this));\n\t\tthis.rendition.hooks.content.register(this.overrides.bind(this));\n\n\t}\n\n\t/**\n\t * Add themes to be used by a rendition\n\t * @param {object | Array<object> | string}\n\t * @example themes.register(\"light\", \"http://example.com/light.css\")\n\t * @example themes.register(\"light\", { \"body\": { \"color\": \"purple\"}})\n\t * @example themes.register({ \"light\" : {...}, \"dark\" : {...}})\n\t */\n\tregister () {\n\t\tif (arguments.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (arguments.length === 1 && typeof(arguments[0]) === \"object\") {\n\t\t\treturn this.registerThemes(arguments[0]);\n\t\t}\n\t\tif (arguments.length === 1 && typeof(arguments[0]) === \"string\") {\n\t\t\treturn this.default(arguments[0]);\n\t\t}\n\t\tif (arguments.length === 2 && typeof(arguments[1]) === \"string\") {\n\t\t\treturn this.registerUrl(arguments[0], arguments[1]);\n\t\t}\n\t\tif (arguments.length === 2 && typeof(arguments[1]) === \"object\") {\n\t\t\treturn this.registerRules(arguments[0], arguments[1]);\n\t\t}\n\t}\n\n\t/**\n\t * Add a default theme to be used by a rendition\n\t * @param {object | string} theme\n\t * @example themes.register(\"http://example.com/default.css\")\n\t * @example themes.register({ \"body\": { \"color\": \"purple\"}})\n\t */\n\tdefault (theme) {\n\t\tif (!theme) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof(theme) === \"string\") {\n\t\t\treturn this.registerUrl(\"default\", theme);\n\t\t}\n\t\tif (typeof(theme) === \"object\") {\n\t\t\treturn this.registerRules(\"default\", theme);\n\t\t}\n\t}\n\n\t/**\n\t * Register themes object\n\t * @param {object} themes\n\t */\n\tregisterThemes (themes) {\n\t\tfor (var theme in themes) {\n\t\t\tif (themes.hasOwnProperty(theme)) {\n\t\t\t\tif (typeof(themes[theme]) === \"string\") {\n\t\t\t\t\tthis.registerUrl(theme, themes[theme]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.registerRules(theme, themes[theme]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Register a url\n\t * @param {string} name\n\t * @param {string} input\n\t */\n\tregisterUrl (name, input) {\n\t\tvar url = new Url(input);\n\t\tthis._themes[name] = { \"url\": url.toString() };\n\t\tif (this._injected[name]) {\n\t\t\tthis.update(name);\n\t\t}\n\t}\n\n\t/**\n\t * Register rule\n\t * @param {string} name\n\t * @param {object} rules\n\t */\n\tregisterRules (name, rules) {\n\t\tthis._themes[name] = { \"rules\": rules };\n\t\t// TODO: serialize css rules\n\t\tif (this._injected[name]) {\n\t\t\tthis.update(name);\n\t\t}\n\t}\n\n\t/**\n\t * Select a theme\n\t * @param {string} name\n\t */\n\tselect (name) {\n\t\tvar prev = this._current;\n\t\tvar contents;\n\n\t\tthis._current = name;\n\t\tthis.update(name);\n\n\t\tcontents = this.rendition.getContents();\n\t\tcontents.forEach( (content) => {\n\t\t\tcontent.removeClass(prev);\n\t\t\tcontent.addClass(name);\n\t\t});\n\t}\n\n\t/**\n\t * Update a theme\n\t * @param {string} name\n\t */\n\tupdate (name) {\n\t\tvar contents = this.rendition.getContents();\n\t\tcontents.forEach( (content) => {\n\t\t\tthis.add(name, content);\n\t\t});\n\t}\n\n\t/**\n\t * Inject all themes into contents\n\t * @param {Contents} contents\n\t */\n\tinject (contents) {\n\t\tvar links = [];\n\t\tvar themes = this._themes;\n\t\tvar theme;\n\n\t\tfor (var name in themes) {\n\t\t\tif (themes.hasOwnProperty(name) && (name === this._current || name === \"default\")) {\n\t\t\t\ttheme = themes[name];\n\t\t\t\tif((theme.rules && Object.keys(theme.rules).length > 0) || (theme.url && links.indexOf(theme.url) === -1)) {\n\t\t\t\t\tthis.add(name, contents);\n\t\t\t\t}\n\t\t\t\tthis._injected.push(name);\n\t\t\t}\n\t\t}\n\n\t\tif(this._current != \"default\") {\n\t\t\tcontents.addClass(this._current);\n\t\t}\n\t}\n\n\t/**\n\t * Add Theme to contents\n\t * @param {string} name\n\t * @param {Contents} contents\n\t */\n\tadd (name, contents) {\n\t\tvar theme = this._themes[name];\n\n\t\tif (!theme || !contents) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (theme.url) {\n\t\t\tcontents.addStylesheet(theme.url);\n\t\t} else if (theme.serialized) {\n\t\t\t// TODO: handle serialized\n\t\t} else if (theme.rules) {\n\t\t\tcontents.addStylesheetRules(theme.rules);\n\t\t\ttheme.injected = true;\n\t\t}\n\t}\n\n\t/**\n\t * Add override\n\t * @param {string} name\n\t * @param {string} value\n\t * @param {boolean} priority\n\t */\n\toverride (name, value, priority) {\n\t\tvar contents = this.rendition.getContents();\n\n\t\tthis._overrides[name] = {\n\t\t\tvalue: value,\n\t\t\tpriority: priority === true\n\t\t};\n\n\t\tcontents.forEach( (content) => {\n\t\t\tcontent.css(name, this._overrides[name].value, this._overrides[name].priority);\n\t\t});\n\t}\n\n\t/**\n\t * Add all overrides\n\t * @param {Content} content\n\t */\n\toverrides (contents) {\n\t\tvar overrides = this._overrides;\n\n\t\tfor (var rule in overrides) {\n\t\t\tif (overrides.hasOwnProperty(rule)) {\n\t\t\t\tcontents.css(rule, overrides[rule].value, overrides[rule].priority);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the font size of a rendition\n\t * @param {number} size\n\t */\n\tfontSize (size) {\n\t\tthis.override(\"font-size\", size);\n\t}\n\n\t/**\n\t * Adjust the font-family of a rendition\n\t * @param {string} f\n\t */\n\tfont (f) {\n\t\tthis.override(\"font-family\", f, true);\n\t}\n\n\tdestroy() {\n\t\tthis.rendition = undefined;\n\t\tthis._themes = undefined;\n\t\tthis._overrides = undefined;\n\t\tthis._current = undefined;\n\t\tthis._injected = undefined;\n\t}\n\n}\n\nexport default Themes;\n","import EpubCFI from \"./epubcfi\";\nimport { nodeBounds } from \"./utils/core\";\n\n/**\n * Map text locations to CFI ranges\n * @class\n * @param {Layout} layout Layout to apply\n * @param {string} [direction=\"ltr\"] Text direction\n * @param {string} [axis=\"horizontal\"] vertical or horizontal axis\n * @param {boolean} [dev] toggle developer highlighting\n */\nclass Mapping {\n\tconstructor(layout, direction, axis, dev) {\n\t\tthis.layout = layout;\n\t\tthis.horizontal = (axis === \"horizontal\") ? true : false;\n\t\tthis.direction = direction || \"ltr\";\n\t\tthis._dev = dev;\n\t}\n\n\t/**\n\t * Find CFI pairs for entire section at once\n\t */\n\tsection(view) {\n\t\tvar ranges = this.findRanges(view);\n\t\tvar map = this.rangeListToCfiList(view.section.cfiBase, ranges);\n\n\t\treturn map;\n\t}\n\n\t/**\n\t * Find CFI pairs for a page\n\t * @param {Contents} contents Contents from view\n\t * @param {string} cfiBase string of the base for a cfi\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t */\n\tpage(contents, cfiBase, start, end) {\n\t\tvar root = contents && contents.document ? contents.document.body : false;\n\t\tvar result;\n\n\t\tif (!root) {\n\t\t\treturn;\n\t\t}\n\n\t\tresult = this.rangePairToCfiPair(cfiBase, {\n\t\t\tstart: this.findStart(root, start, end),\n\t\t\tend: this.findEnd(root, start, end)\n\t\t});\n\n\t\tif (this._dev === true) {\n\t\t\tlet doc = contents.document;\n\t\t\tlet startRange = new EpubCFI(result.start).toRange(doc);\n\t\t\tlet endRange = new EpubCFI(result.end).toRange(doc);\n\n\t\t\tlet selection = doc.defaultView.getSelection();\n\t\t\tlet r = doc.createRange();\n\t\t\tselection.removeAllRanges();\n\t\t\tr.setStart(startRange.startContainer, startRange.startOffset);\n\t\t\tr.setEnd(endRange.endContainer, endRange.endOffset);\n\t\t\tselection.addRange(r);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Walk a node, preforming a function on each node it finds\n\t * @private\n\t * @param {Node} root Node to walkToNode\n\t * @param {function} func walk function\n\t * @return {*} returns the result of the walk function\n\t */\n\twalk(root, func) {\n\t\t// IE11 has strange issue, if root is text node IE throws exception on\n\t\t// calling treeWalker.nextNode(), saying\n\t\t// Unexpected call to method or property access instead of returing null value\n\t\tif(root && root.nodeType === Node.TEXT_NODE) {\n\t\t\treturn;\n\t\t}\n\t\t// safeFilter is required so that it can work in IE as filter is a function for IE\n\t\t// and for other browser filter is an object.\n\t\tvar filter = {\n\t\t\tacceptNode: function(node) {\n\t\t\t\tif (node.data.trim().length > 0) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t} else {\n\t\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tvar safeFilter = filter.acceptNode;\n\t\tsafeFilter.acceptNode = filter.acceptNode;\n\n\t\tvar treeWalker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, safeFilter, false);\n\t\tvar node;\n\t\tvar result;\n\t\twhile ((node = treeWalker.nextNode())) {\n\t\t\tresult = func(node);\n\t\t\tif(result) break;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfindRanges(view){\n\t\tvar columns = [];\n\t\tvar scrollWidth = view.contents.scrollWidth();\n\t\tvar spreads = Math.ceil( scrollWidth / this.layout.spreadWidth);\n\t\tvar count = spreads * this.layout.divisor;\n\t\tvar columnWidth = this.layout.columnWidth;\n\t\tvar gap = this.layout.gap;\n\t\tvar start, end;\n\n\t\tfor (var i = 0; i < count.pages; i++) {\n\t\t\tstart = (columnWidth + gap) * i;\n\t\t\tend = (columnWidth * (i+1)) + (gap * i);\n\t\t\tcolumns.push({\n\t\t\t\tstart: this.findStart(view.document.body, start, end),\n\t\t\t\tend: this.findEnd(view.document.body, start, end)\n\t\t\t});\n\t\t}\n\n\t\treturn columns;\n\t}\n\n\t/**\n\t * Find Start Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindStart(root, start, end){\n\t\tvar stack = [root];\n\t\tvar $el;\n\t\tvar found;\n\t\tvar $prev = root;\n\n\t\twhile (stack.length) {\n\n\t\t\t$el = stack.shift();\n\n\t\t\tfound = this.walk($el, (node) => {\n\t\t\t\tvar left, right, top, bottom;\n\t\t\t\tvar elPos;\n\t\t\t\tvar elRange;\n\n\n\t\t\t\telPos = nodeBounds(node);\n\n\t\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\t\tleft = this.horizontal ? elPos.left : elPos.top;\n\t\t\t\t\tright = this.horizontal ? elPos.right : elPos.bottom;\n\n\t\t\t\t\tif( left >= start && left <= end ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (right > start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\t\tleft = elPos.left;\n\t\t\t\t\tright = elPos.right;\n\n\t\t\t\t\tif( right <= end && right >= start ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (left < end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttop = elPos.top;\n\t\t\t\t\tbottom = elPos.bottom;\n\n\t\t\t\t\tif( top >= start && top <= end ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (bottom > start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t});\n\n\t\t\tif(found) {\n\t\t\t\treturn this.findTextStartRange(found, start, end);\n\t\t\t}\n\n\t\t}\n\n\t\t// Return last element\n\t\treturn this.findTextStartRange($prev, start, end);\n\t}\n\n\t/**\n\t * Find End Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindEnd(root, start, end){\n\t\tvar stack = [root];\n\t\tvar $el;\n\t\tvar $prev = root;\n\t\tvar found;\n\n\t\twhile (stack.length) {\n\n\t\t\t$el = stack.shift();\n\n\t\t\tfound = this.walk($el, (node) => {\n\n\t\t\t\tvar left, right, top, bottom;\n\t\t\t\tvar elPos;\n\t\t\t\tvar elRange;\n\n\t\t\t\telPos = nodeBounds(node);\n\n\t\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\t\tleft = Math.round(elPos.left);\n\t\t\t\t\tright = Math.round(elPos.right);\n\n\t\t\t\t\tif(left > end && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(right > end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\t\tleft = Math.round(this.horizontal ? elPos.left : elPos.top);\n\t\t\t\t\tright = Math.round(this.horizontal ? elPos.right : elPos.bottom);\n\n\t\t\t\t\tif(right < start && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(left < start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttop = Math.round(elPos.top);\n\t\t\t\t\tbottom = Math.round(elPos.bottom);\n\n\t\t\t\t\tif(top > end && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(bottom > end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t});\n\n\n\t\t\tif(found){\n\t\t\t\treturn this.findTextEndRange(found, start, end);\n\t\t\t}\n\n\t\t}\n\n\t\t// end of chapter\n\t\treturn this.findTextEndRange($prev, start, end);\n\t}\n\n\t/**\n\t * Find Text Start Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindTextStartRange(node, start, end){\n\t\tvar ranges = this.splitTextNodeIntoRanges(node);\n\t\tvar range;\n\t\tvar pos;\n\t\tvar left, top, right;\n\n\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\trange = ranges[i];\n\n\t\t\tpos = range.getBoundingClientRect();\n\n\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\tleft = pos.left;\n\t\t\t\tif( left >= start ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\tright = pos.right;\n\t\t\t\tif( right <= end ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttop = pos.top;\n\t\t\t\tif( top >= start ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// prev = range;\n\n\t\t}\n\n\t\treturn ranges[0];\n\t}\n\n\t/**\n\t * Find Text End Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindTextEndRange(node, start, end){\n\t\tvar ranges = this.splitTextNodeIntoRanges(node);\n\t\tvar prev;\n\t\tvar range;\n\t\tvar pos;\n\t\tvar left, right, top, bottom;\n\n\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\trange = ranges[i];\n\n\t\t\tpos = range.getBoundingClientRect();\n\n\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\tleft = pos.left;\n\t\t\t\tright = pos.right;\n\n\t\t\t\tif(left > end && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(right > end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\tleft = pos.left\n\t\t\t\tright = pos.right;\n\n\t\t\t\tif(right < start && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(left < start) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttop = pos.top;\n\t\t\t\tbottom = pos.bottom;\n\n\t\t\t\tif(top > end && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(bottom > end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tprev = range;\n\n\t\t}\n\n\t\t// Ends before limit\n\t\treturn ranges[ranges.length-1];\n\n\t}\n\n\t/**\n\t * Split up a text node into ranges for each word\n\t * @private\n\t * @param {Node} root root node\n\t * @param {string} [_splitter] what to split on\n\t * @return {Range[]}\n\t */\n\tsplitTextNodeIntoRanges(node, _splitter){\n\t\tvar ranges = [];\n\t\tvar textContent = node.textContent || \"\";\n\t\tvar text = textContent.trim();\n\t\tvar range;\n\t\tvar doc = node.ownerDocument;\n\t\tvar splitter = _splitter || \" \";\n\n\t\tvar pos = text.indexOf(splitter);\n\n\t\tif(pos === -1 || node.nodeType != Node.TEXT_NODE) {\n\t\t\trange = doc.createRange();\n\t\t\trange.selectNodeContents(node);\n\t\t\treturn [range];\n\t\t}\n\n\t\trange = doc.createRange();\n\t\trange.setStart(node, 0);\n\t\trange.setEnd(node, pos);\n\t\tranges.push(range);\n\t\trange = false;\n\n\t\twhile ( pos != -1 ) {\n\n\t\t\tpos = text.indexOf(splitter, pos + 1);\n\t\t\tif(pos > 0) {\n\n\t\t\t\tif(range) {\n\t\t\t\t\trange.setEnd(node, pos);\n\t\t\t\t\tranges.push(range);\n\t\t\t\t}\n\n\t\t\t\trange = doc.createRange();\n\t\t\t\trange.setStart(node, pos+1);\n\t\t\t}\n\t\t}\n\n\t\tif(range) {\n\t\t\trange.setEnd(node, text.length);\n\t\t\tranges.push(range);\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\n\t/**\n\t * Turn a pair of ranges into a pair of CFIs\n\t * @private\n\t * @param {string} cfiBase base string for an EpubCFI\n\t * @param {object} rangePair { start: Range, end: Range }\n\t * @return {object} { start: \"epubcfi(...)\", end: \"epubcfi(...)\" }\n\t */\n\trangePairToCfiPair(cfiBase, rangePair){\n\n\t\tvar startRange = rangePair.start;\n\t\tvar endRange = rangePair.end;\n\n\t\tstartRange.collapse(true);\n\t\tendRange.collapse(false);\n\n\t\tlet startCfi = new EpubCFI(startRange, cfiBase).toString();\n\t\tlet endCfi = new EpubCFI(endRange, cfiBase).toString();\n\n\t\treturn {\n\t\t\tstart: startCfi,\n\t\t\tend: endCfi\n\t\t};\n\n\t}\n\n\trangeListToCfiList(cfiBase, columns){\n\t\tvar map = [];\n\t\tvar cifPair;\n\n\t\tfor (var i = 0; i < columns.length; i++) {\n\t\t\tcifPair = this.rangePairToCfiPair(cfiBase, columns[i]);\n\n\t\t\tmap.push(cifPair);\n\n\t\t}\n\n\t\treturn map;\n\t}\n\n\t/**\n\t * Set the axis for mapping\n\t * @param {string} axis horizontal | vertical\n\t * @return {boolean} is it horizontal?\n\t */\n\taxis(axis) {\n\t\tif (axis) {\n\t\t\tthis.horizontal = (axis === \"horizontal\") ? true : false;\n\t\t}\n\t\treturn this.horizontal;\n\t}\n}\n\nexport default Mapping;\n","import EventEmitter from \"event-emitter\";\nimport {isNumber, prefixed, borders, defaults} from \"./utils/core\";\nimport EpubCFI from \"./epubcfi\";\nimport Mapping from \"./mapping\";\nimport {replaceLinks} from \"./utils/replacements\";\nimport { EPUBJS_VERSION, EVENTS, DOM_EVENTS } from \"./utils/constants\";\n\nconst hasNavigator = typeof (navigator) !== \"undefined\";\n\nconst isChrome = hasNavigator && /Chrome/.test(navigator.userAgent);\nconst isWebkit = hasNavigator && !isChrome && /AppleWebKit/.test(navigator.userAgent);\n\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\n\n/**\n\t* Handles DOM manipulation, queries and events for View contents\n\t* @class\n\t* @param {document} doc Document\n\t* @param {element} content Parent Element (typically Body)\n\t* @param {string} cfiBase Section component of CFIs\n\t* @param {number} sectionIndex Index in Spine of Conntent's Section\n\t*/\nclass Contents {\n\tconstructor(doc, content, cfiBase, sectionIndex) {\n\t\t// Blank Cfi for Parsing\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.document = doc;\n\t\tthis.documentElement =  this.document.documentElement;\n\t\tthis.content = content || this.document.body;\n\t\tthis.window = this.document.defaultView;\n\n\t\tthis._size = {\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\n\t\tthis.sectionIndex = sectionIndex || 0;\n\t\tthis.cfiBase = cfiBase || \"\";\n\n\t\tthis.epubReadingSystem(\"epub.js\", EPUBJS_VERSION);\n\n\t\tthis.setViewport();\n\t\tthis.listeners();\n\t}\n\n\t/**\n\t\t* Get DOM events that are listened for and passed along\n\t\t*/\n\tstatic get listenedEvents() {\n\t\treturn DOM_EVENTS;\n\t}\n\n\t/**\n\t\t* Get or Set width\n\t\t* @param {number} [w]\n\t\t* @returns {number} width\n\t\t*/\n\twidth(w) {\n\t\t// var frame = this.documentElement;\n\t\tvar frame = this.content;\n\n\t\tif (w && isNumber(w)) {\n\t\t\tw = w + \"px\";\n\t\t}\n\n\t\tif (w) {\n\t\t\tframe.style.width = w;\n\t\t\t// this.content.style.width = w;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(frame)[\"width\"];\n\n\n\t}\n\n\t/**\n\t\t* Get or Set height\n\t\t* @param {number} [h]\n\t\t* @returns {number} height\n\t\t*/\n\theight(h) {\n\t\t// var frame = this.documentElement;\n\t\tvar frame = this.content;\n\n\t\tif (h && isNumber(h)) {\n\t\t\th = h + \"px\";\n\t\t}\n\n\t\tif (h) {\n\t\t\tframe.style.height = h;\n\t\t\t// this.content.style.height = h;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(frame)[\"height\"];\n\n\t}\n\n\t/**\n\t\t* Get or Set width of the contents\n\t\t* @param {number} [w]\n\t\t* @returns {number} width\n\t\t*/\n\tcontentWidth(w) {\n\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (w && isNumber(w)) {\n\t\t\tw = w + \"px\";\n\t\t}\n\n\t\tif (w) {\n\t\t\tcontent.style.width = w;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[\"width\"];\n\n\n\t}\n\n\t/**\n\t\t* Get or Set height of the contents\n\t\t* @param {number} [h]\n\t\t* @returns {number} height\n\t\t*/\n\tcontentHeight(h) {\n\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (h && isNumber(h)) {\n\t\t\th = h + \"px\";\n\t\t}\n\n\t\tif (h) {\n\t\t\tcontent.style.height = h;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[\"height\"];\n\n\t}\n\n\t/**\n\t\t* Get the width of the text using Range\n\t\t* @returns {number} width\n\t\t*/\n\ttextWidth() {\n\t\tvar viewport = this.$viewport;\n\t\tif ( false && viewport && viewport.width && viewport.width != 'auto' ) {\n\t\t\treturn Math.round(parseFloat(viewport.width, 10));\n\t\t}\n\n\t\tlet rect;\n\t\tlet width;\n\t\tlet range = this.document.createRange();\n\t\tlet content = this.content || this.document.body;\n\t\tlet border = borders(content);\n\n\t\t// Select the contents of frame\n\t\trange.selectNodeContents(content);\n\n\t\t// get the width of the text content\n\t\trect = range.getBoundingClientRect();\n\t\twidth = rect.width;\n\n\t\tif (border && border.width) {\n\t\t\twidth += border.width;\n\t\t}\n\n\t\treturn Math.round(width);\n\t}\n\n\t/**\n\t\t* Get the height of the text using Range\n\t\t* @returns {number} height\n\t\t*/\n\ttextHeight() {\n\t\tvar viewport = this.$viewport;\n\t\tif ( false && viewport && viewport.height && viewport.height != 'auto' ) {\n\t\t\treturn Math.round(parseFloat(viewport.height, 10));\n\t\t}\n\n\t\tlet rect;\n\t\tlet height;\n\t\tlet range = this.document.createRange();\n\t\tlet content = this.content || this.document.body;\n\t\tlet border = borders(content);\n\n\t\trange.selectNodeContents(content);\n\n\t\trect = range.getBoundingClientRect();\n\t\theight = rect.height;\n\n\t\tif (height && border.height) {\n\t\t\theight += border.height;\n\t\t}\n\n\t\tif (height && rect.top) {\n\t\t\theight += rect.top;\n\t\t}\n\n\t\treturn Math.round(height);\n\t}\n\n\t/**\n\t\t* Get documentElement scrollWidth\n\t\t* @returns {number} width\n\t\t*/\n\tscrollWidth() {\n\t\tvar width = this.documentElement.scrollWidth;\n\n\t\treturn width;\n\t}\n\n\t/**\n\t\t* Get documentElement scrollHeight\n\t\t* @returns {number} height\n\t\t*/\n\tscrollHeight() {\n\t\tvar height = this.documentElement.scrollHeight;\n\n\t\treturn height;\n\t}\n\n\t/**\n\t\t* Set overflow css style of the contents\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflow(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflow = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflow\"];\n\t}\n\n\t/**\n\t\t* Set overflowX css style of the documentElement\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflowX(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflowX = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflowX\"];\n\t}\n\n\t/**\n\t\t* Set overflowY css style of the documentElement\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflowY(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflowY = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflowY\"];\n\t}\n\n\t/**\n\t\t* Set Css styles on the contents element (typically Body)\n\t\t* @param {string} property\n\t\t* @param {string} value\n\t\t* @param {boolean} [priority] set as \"important\"\n\t\t*/\n\tcss(property, value, priority) {\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (value) {\n\t\t\tcontent.style.setProperty(property, value, priority ? \"important\" : \"\");\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[property];\n\t}\n\n\t/**\n\t\t* Get or Set the viewport element\n\t\t* @param {object} [options]\n\t\t* @param {string} [options.width]\n\t\t* @param {string} [options.height]\n\t\t* @param {string} [options.scale]\n\t\t* @param {string} [options.minimum]\n\t\t* @param {string} [options.maximum]\n\t\t* @param {string} [options.scalable]\n\t\t*/\n\tviewport(options) {\n\t\tvar _width, _height, _scale, _minimum, _maximum, _scalable;\n\t\t// var width, height, scale, minimum, maximum, scalable;\n\t\tvar $viewport = this.document.querySelector(\"meta[name='viewport']\");\n\t\tvar parsed = {\n\t\t\t\"width\": undefined,\n\t\t\t\"height\": undefined,\n\t\t\t\"scale\": undefined,\n\t\t\t\"minimum\": undefined,\n\t\t\t\"maximum\": undefined,\n\t\t\t\"scalable\": undefined\n\t\t};\n\t\tvar newContent = [];\n\t\tvar settings = {};\n\n\t\t/*\n\t\t* check for the viewport size\n\t\t* <meta name=\"viewport\" content=\"width=1024,height=697\" />\n\t\t*/\n\t\tif($viewport && $viewport.hasAttribute(\"content\")) {\n\t\t\tlet content = $viewport.getAttribute(\"content\");\n\t\t\tlet _width = content.match(/width\\s*=\\s*([^,]*)/);\n\t\t\tlet _height = content.match(/height\\s*=\\s*([^,]*)/);\n\t\t\tlet _scale = content.match(/initial-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _minimum = content.match(/minimum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _maximum = content.match(/maximum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _scalable = content.match(/user-scalable\\s*=\\s*([^,]*)/);\n\n\t\t\tif(_width && _width.length && typeof _width[1] !== \"undefined\"){\n\t\t\t\tparsed.width = _width[1];\n\t\t\t}\n\t\t\tif(_height && _height.length && typeof _height[1] !== \"undefined\"){\n\t\t\t\tparsed.height = _height[1];\n\t\t\t}\n\t\t\tif(_scale && _scale.length && typeof _scale[1] !== \"undefined\"){\n\t\t\t\tparsed.scale = _scale[1];\n\t\t\t}\n\t\t\tif(_minimum && _minimum.length && typeof _minimum[1] !== \"undefined\"){\n\t\t\t\tparsed.minimum = _minimum[1];\n\t\t\t}\n\t\t\tif(_maximum && _maximum.length && typeof _maximum[1] !== \"undefined\"){\n\t\t\t\tparsed.maximum = _maximum[1];\n\t\t\t}\n\t\t\tif(_scalable && _scalable.length && typeof _scalable[1] !== \"undefined\"){\n\t\t\t\tparsed.scalable = _scalable[1];\n\t\t\t}\n\t\t}\n\n\t\tsettings = defaults(options || {}, parsed);\n\n\t\tif (options) {\n\t\t\tif (settings.width) {\n\t\t\t\tnewContent.push(\"width=\" + settings.width);\n\t\t\t}\n\n\t\t\tif (settings.height) {\n\t\t\t\tnewContent.push(\"height=\" + settings.height);\n\t\t\t}\n\n\t\t\tif (settings.scale) {\n\t\t\t\tnewContent.push(\"initial-scale=\" + settings.scale);\n\t\t\t}\n\n\t\t\tif (settings.scalable === \"no\") {\n\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.scale);\n\t\t\t\tnewContent.push(\"maximum-scale=\" + settings.scale);\n\t\t\t\tnewContent.push(\"user-scalable=\" + settings.scalable);\n\t\t\t} else {\n\n\t\t\t\tif (settings.scalable) {\n\t\t\t\t\tnewContent.push(\"user-scalable=\" + settings.scalable);\n\t\t\t\t}\n\n\t\t\t\tif (settings.minimum) {\n\t\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.minimum);\n\t\t\t\t}\n\n\t\t\t\tif (settings.maximum) {\n\t\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.maximum);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!$viewport) {\n\t\t\t\t$viewport = this.document.createElement(\"meta\");\n\t\t\t\t$viewport.setAttribute(\"name\", \"viewport\");\n\t\t\t\tthis.document.querySelector(\"head\").appendChild($viewport);\n\t\t\t}\n\n\t\t\t$viewport.setAttribute(\"content\", newContent.join(\", \"));\n\n\t\t\tthis.window.scrollTo(0, 0);\n\t\t}\n\n\n\t\treturn settings;\n\t}\n\n\tsetViewport() {\n\t\tthis.$viewport = { height: 'auto', width: 'auto' };\n\t\tvar $viewport = this.document.querySelector(\"meta[name='viewport']\");\n\t\tvar parsed = {\n\t\t\t\"width\": undefined,\n\t\t\t\"height\": undefined,\n\t\t\t\"scale\": undefined,\n\t\t\t\"minimum\": undefined,\n\t\t\t\"maximum\": undefined,\n\t\t\t\"scalable\": undefined\n\t\t};\n\t\tvar newContent = [];\n\t\tvar settings = {};\n\n\t\t/*\n\t\t* check for the viewport size\n\t\t* <meta name=\"viewport\" content=\"width=1024,height=697\" />\n\t\t*/\n\t\tif($viewport && $viewport.hasAttribute(\"content\")) {\n\t\t\tlet content = $viewport.getAttribute(\"content\");\n\t\t\tlet _width = content.match(/width\\s*=\\s*([^,]*)/);\n\t\t\tlet _height = content.match(/height\\s*=\\s*([^,]*)/);\n\t\t\tlet _scale = content.match(/initial-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _minimum = content.match(/minimum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _maximum = content.match(/maximum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _scalable = content.match(/user-scalable\\s*=\\s*([^,]*)/);\n\n\t\t\tif(_width && _width.length && typeof _width[1] !== \"undefined\"){\n\t\t\t\tparsed.width = _width[1];\n\t\t\t}\n\t\t\tif(_height && _height.length && typeof _height[1] !== \"undefined\"){\n\t\t\t\tparsed.height = _height[1];\n\t\t\t}\n\t\t\tif(_scale && _scale.length && typeof _scale[1] !== \"undefined\"){\n\t\t\t\tparsed.scale = _scale[1];\n\t\t\t}\n\t\t\tif(_minimum && _minimum.length && typeof _minimum[1] !== \"undefined\"){\n\t\t\t\tparsed.minimum = _minimum[1];\n\t\t\t}\n\t\t\tif(_maximum && _maximum.length && typeof _maximum[1] !== \"undefined\"){\n\t\t\t\tparsed.maximum = _maximum[1];\n\t\t\t}\n\t\t\tif(_scalable && _scalable.length && typeof _scalable[1] !== \"undefined\"){\n\t\t\t\tparsed.scalable = _scalable[1];\n\t\t\t}\n\t\t}\n\t\tthis.$viewport.height = parseFloat(parsed.height) || 'auto';\n\t\tthis.$viewport.width = parseFloat(parsed.width) || 'auto';\n\t}\n\n\t/**\n\t * Event emitter for when the contents has expanded\n\t * @private\n\t */\n\texpand() {\n\t\tthis.emit(EVENTS.CONTENTS.EXPAND);\n\t}\n\n\t/**\n\t * Add DOM listeners\n\t * @private\n\t */\n\tlisteners() {\n\n\t\tthis.imageLoadListeners();\n\n\t\tthis.mediaQueryListeners();\n\n\t\t// this.fontLoadListeners();\n\n\t\tthis.addEventListeners();\n\n\t\tthis.addSelectionListeners();\n\n\t\t// this.transitionListeners();\n\n\t\tthis.resizeListeners();\n\n\t\t// this.resizeObservers();\n\n\t\tthis.linksHandler();\n\t}\n\n\t/**\n\t * Remove DOM listeners\n\t * @private\n\t */\n\tremoveListeners() {\n\n\t\tthis.removeEventListeners();\n\n\t\tthis.removeSelectionListeners();\n\n\t\tclearTimeout(this.expanding);\n\t}\n\n\t/**\n\t * Check if size of contents has changed and\n\t * emit 'resize' event if it has.\n\t * @private\n\t */\n\tresizeCheck() {\n\t\tlet width = this.textWidth();\n\t\tlet height = this.textHeight();\n\n\t\tif (width != this._size.width || height != this._size.height) {\n\n\t\t\tthis._size = {\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\n\t\t\tthis.onResize && this.onResize(this._size);\n\t\t\tthis.emit(EVENTS.CONTENTS.RESIZE, this._size);\n\t\t}\n\t}\n\n\t/**\n\t * Poll for resize detection\n\t * @private\n\t */\n\tresizeListeners() {\n\t\tvar width, height;\n\t\t// Test size again\n\t\tclearTimeout(this.expanding);\n\n\t\trequestAnimationFrame(this.resizeCheck.bind(this));\n\n\t\tthis.expanding = setTimeout(this.resizeListeners.bind(this), 350);\n\t}\n\n\t/**\n\t * Use css transitions to detect resize\n\t * @private\n\t */\n\ttransitionListeners() {\n\t\tlet body = this.content;\n\n\t\tbody.style['transitionProperty'] = \"font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height\";\n\t\tbody.style['transitionDuration'] = \"0.001ms\";\n\t\tbody.style['transitionTimingFunction'] = \"linear\";\n\t\tbody.style['transitionDelay'] = \"0\";\n\n\t\tthis._resizeCheck = this.resizeCheck.bind(this);\n\t\tthis.document.addEventListener('transitionend', this._resizeCheck);\n\t}\n\n\t/**\n\t * Listen for media query changes and emit 'expand' event\n\t * Adapted from: https://github.com/tylergaw/media-query-events/blob/master/js/mq-events.js\n\t * @private\n\t */\n\tmediaQueryListeners() {\n\t\tvar sheets = this.document.styleSheets;\n\t\tvar mediaChangeHandler = function(m){\n\t\t\tif(m.matches && !this._expanding) {\n\t\t\t\tsetTimeout(this.expand.bind(this), 1);\n\t\t\t}\n\t\t}.bind(this);\n\n\t\tfor (var i = 0; i < sheets.length; i += 1) {\n\t\t\tvar rules;\n\t\t\t// Firefox errors if we access cssRules cross-domain\n\t\t\ttry {\n\t\t\t\trules = sheets[i].cssRules;\n\t\t\t} catch (e) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!rules) return; // Stylesheets changed\n\t\t\tfor (var j = 0; j < rules.length; j += 1) {\n\t\t\t\t//if (rules[j].constructor === CSSMediaRule) {\n\t\t\t\tif(rules[j].media){\n\t\t\t\t\tvar mql = this.window.matchMedia(rules[j].media.mediaText);\n\t\t\t\t\tmql.addListener(mediaChangeHandler);\n\t\t\t\t\t//mql.onchange = mediaChangeHandler;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Use MutationObserver to listen for changes in the DOM and check for resize\n\t * @private\n\t */\n\tresizeObservers() {\n\t\t// create an observer instance\n\t\tthis.observer = new MutationObserver((mutations) => {\n\t\t\tthis.resizeCheck();\n\t\t});\n\n\t\t// configuration of the observer:\n\t\tlet config = { attributes: true, childList: true, characterData: true, subtree: true };\n\n\t\t// pass in the target node, as well as the observer options\n\t\tthis.observer.observe(this.document, config);\n\t}\n\n\t/**\n\t * Test if images are loaded or add listener for when they load\n\t * @private\n\t */\n\timageLoadListeners() {\n\t\tvar images = this.document.querySelectorAll(\"img\");\n\t\tvar img;\n\t\tfor (var i = 0; i < images.length; i++) {\n\t\t\timg = images[i];\n\n\t\t\tif (typeof img.naturalWidth !== \"undefined\" &&\n\t\t\t\t\timg.naturalWidth === 0) {\n\t\t\t\timg.onload = this.expand.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Listen for font load and check for resize when loaded\n\t * @private\n\t */\n\tfontLoadListeners() {\n\t\tif (!this.document || !this.document.fonts) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.document.fonts.ready.then(function () {\n\t\t\tthis.resizeCheck();\n\t\t}.bind(this));\n\n\t}\n\n\t/**\n\t * Get the documentElement\n\t * @returns {element} documentElement\n\t */\n\troot() {\n\t\tif(!this.document) return null;\n\t\treturn this.document.documentElement;\n\t}\n\n\t/**\n\t * Get the location offset of a EpubCFI or an #id\n\t * @param {string | EpubCFI} target\n\t * @param {string} [ignoreClass] for the cfi\n\t * @returns { {left: Number, top: Number }\n\t */\n\tlocationOf(target, ignoreClass) {\n\t\tvar position;\n\t\tvar targetPos = {\"left\": 0, \"top\": 0};\n\n\t\tif(!this.document) return targetPos;\n\n\t\tif(this.epubcfi.isCfiString(target)) {\n\t\t\tlet range = new EpubCFI(target).toRange(this.document, ignoreClass);\n\n\t\t\tif(range) {\n\t\t\t\tif (range.startContainer.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\tposition = range.startContainer.getBoundingClientRect();\n\t\t\t\t\ttargetPos.left = position.left;\n\t\t\t\t\ttargetPos.top = position.top;\n\t\t\t\t} else {\n\t\t\t\t\t// Webkit does not handle collapsed range bounds correctly\n\t\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=138949\n\n\t\t\t\t\t// Construct a new non-collapsed range\n\t\t\t\t\tif (isWebkit) {\n\t\t\t\t\t\tlet container = range.startContainer;\n\t\t\t\t\t\tlet newRange = new Range();\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (container.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\t\t\tposition = container.getBoundingClientRect();\n\t\t\t\t\t\t\t} else if (range.startOffset + 2 < container.length) {\n\t\t\t\t\t\t\t\tnewRange.setStart(container, range.startOffset);\n\t\t\t\t\t\t\t\tnewRange.setEnd(container, range.startOffset + 2);\n\t\t\t\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t\t\t\t} else if (range.startOffset - 2 > 0) {\n\t\t\t\t\t\t\t\tnewRange.setStart(container, range.startOffset - 2);\n\t\t\t\t\t\t\t\tnewRange.setEnd(container, range.startOffset);\n\t\t\t\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t\t\t\t} else { // empty, return the parent element\n\t\t\t\t\t\t\t\tposition = container.parentNode.getBoundingClientRect();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(e, e.stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition = range.getBoundingClientRect();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if(typeof target === \"string\" &&\n\t\t\ttarget.indexOf(\"#\") > -1) {\n\n\t\t\tlet id = target.substring(target.indexOf(\"#\")+1);\n\t\t\tlet el = this.document.getElementById(id);\n\n\t\t\tif(el) {\n\t\t\t\tposition = el.getBoundingClientRect();\n\t\t\t\tif ( position.top < 0 ) {\n\t\t\t\t\tvar offsetEl = el.offsetTop ? el : el.offsetParent;\n\t\t\t\t\tposition = { top: offsetEl.offsetTop, left: offsetEl.offsetLeft };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (position) {\n\t\t\ttargetPos.left = position.left;\n\t\t\ttargetPos.top = position.top;\n\t\t}\n\n\t\treturn targetPos;\n\t}\n\n\t/**\n\t * Append a stylesheet link to the document head\n\t * @param {string} src url\n\t */\n\taddStylesheet(src) {\n\t\treturn new Promise(function(resolve, reject){\n\t\t\tvar $stylesheet;\n\t\t\tvar ready = false;\n\n\t\t\tif(!this.document) {\n\t\t\t\tresolve(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if link already exists\n\t\t\t$stylesheet = this.document.querySelector(\"link[href='\"+src+\"']\");\n\t\t\tif ($stylesheet) {\n\t\t\t\tresolve(true);\n\t\t\t\treturn; // already present\n\t\t\t}\n\n\t\t\t$stylesheet = this.document.createElement(\"link\");\n\t\t\t$stylesheet.type = \"text/css\";\n\t\t\t$stylesheet.rel = \"stylesheet\";\n\t\t\t$stylesheet.href = src;\n\t\t\t$stylesheet.onload = $stylesheet.onreadystatechange = function() {\n\t\t\t\tif ( !ready && (!this.readyState || this.readyState == \"complete\") ) {\n\t\t\t\t\tready = true;\n\t\t\t\t\t// Let apply\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t}, 1);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.document.head.appendChild($stylesheet);\n\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Append stylesheet rules to a generate stylesheet\n\t * Array: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet/insertRule\n\t * Object: https://github.com/desirable-objects/json-to-css\n\t * @param {array | object} rules\n\t */\n\taddStylesheetRules(rules) {\n\t\tvar styleEl;\n\t\tvar styleSheet;\n\t\tvar key = \"epubjs-inserted-css\";\n\n\t\tif(!this.document || !rules || rules.length === 0) return;\n\n\t\t// Check if link already exists\n\t\tstyleEl = this.document.getElementById(key);\n\t\tif (!styleEl) {\n\t\t\tstyleEl = this.document.createElement(\"style\");\n\t\t\tstyleEl.id = key;\n\t\t}\n\n\t\t// Append style element to head\n\t\tthis.document.head.appendChild(styleEl);\n\n\t\t// Grab style sheet\n\t\tstyleSheet = styleEl.sheet;\n\n\t\tif (Object.prototype.toString.call(rules) === \"[object Array]\") {\n\t\t\tfor (var i = 0, rl = rules.length; i < rl; i++) {\n\t\t\t\tvar j = 1, rule = rules[i], selector = rules[i][0], propStr = \"\";\n\t\t\t\t// If the second argument of a rule is an array of arrays, correct our variables.\n\t\t\t\tif (Object.prototype.toString.call(rule[1][0]) === \"[object Array]\") {\n\t\t\t\t\trule = rule[1];\n\t\t\t\t\tj = 0;\n\t\t\t\t}\n\n\t\t\t\tfor (var pl = rule.length; j < pl; j++) {\n\t\t\t\t\tvar prop = rule[j];\n\t\t\t\t\tpropStr += prop[0] + \":\" + prop[1] + (prop[2] ? \" !important\" : \"\") + \";\\n\";\n\t\t\t\t}\n\n\t\t\t\t// Insert CSS Rule\n\t\t\t\tstyleSheet.insertRule(selector + \"{\" + propStr + \"}\", styleSheet.cssRules.length);\n\t\t\t}\n\t\t} else {\n\t\t\tconst selectors = Object.keys(rules);\n\t\t\tselectors.forEach((selector) => {\n\t\t\t\tconst definition = rules[selector];\n\t\t\t\tif (Array.isArray(definition)) {\n\t\t\t\t\tdefinition.forEach((item) => {\n\t\t\t\t\t\tconst _rules = Object.keys(item);\n\t\t\t\t\t\tconst result = _rules.map((rule) => {\n\t\t\t\t\t\t\treturn `${rule}:${item[rule]}`;\n\t\t\t\t\t\t}).join(';');\n\t\t\t\t\t\tstyleSheet.insertRule(`${selector}{${result}}`, styleSheet.cssRules.length);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst _rules = Object.keys(definition);\n\t\t\t\t\tconst result = _rules.map((rule) => {\n\t\t\t\t\t\treturn `${rule}:${definition[rule]}`;\n\t\t\t\t\t}).join(';');\n\t\t\t\t\tstyleSheet.insertRule(`${selector}{${result}}`, styleSheet.cssRules.length);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Append a script tag to the document head\n\t * @param {string} src url\n\t * @returns {Promise} loaded\n\t */\n\taddScript(src) {\n\n\t\treturn new Promise(function(resolve, reject){\n\t\t\tvar $script;\n\t\t\tvar ready = false;\n\n\t\t\tif(!this.document) {\n\t\t\t\tresolve(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$script = this.document.createElement(\"script\");\n\t\t\t$script.type = \"text/javascript\";\n\t\t\t$script.async = true;\n\t\t\t$script.src = src;\n\t\t\t$script.onload = $script.onreadystatechange = function() {\n\t\t\t\tif ( !ready && (!this.readyState || this.readyState == \"complete\") ) {\n\t\t\t\t\tready = true;\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t}, 1);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.document.head.appendChild($script);\n\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Add a class to the contents container\n\t * @param {string} className\n\t */\n\taddClass(className) {\n\t\tvar content;\n\n\t\tif(!this.document) return;\n\n\t\tcontent = this.content || this.document.body;\n\n\t\tif (content) {\n\t\t\tcontent.classList.add(className);\n\t\t}\n\n\t}\n\n\t/**\n\t * Remove a class from the contents container\n\t * @param {string} removeClass\n\t */\n\tremoveClass(className) {\n\t\tvar content;\n\n\t\tif(!this.document) return;\n\n\t\tcontent = this.content || this.document.body;\n\n\t\tif (content) {\n\t\t\tcontent.classList.remove(className);\n\t\t}\n\n\t}\n\n\t/**\n\t * Add DOM event listeners\n\t * @private\n\t */\n\taddEventListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._triggerEvent = this.triggerEvent.bind(this);\n\n\t\tDOM_EVENTS.forEach(function(eventName){\n\t\t\tthis.document.addEventListener(eventName, this._triggerEvent, { passive: true });\n\t\t}, this);\n\n\t}\n\n\t/**\n\t * Remove DOM event listeners\n\t * @private\n\t */\n\tremoveEventListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tDOM_EVENTS.forEach(function(eventName){\n\t\t\tthis.document.removeEventListener(eventName, this._triggerEvent, { passive: true });\n\t\t}, this);\n\t\tthis._triggerEvent = undefined;\n\t}\n\n\t/**\n\t * Emit passed browser events\n\t * @private\n\t */\n\ttriggerEvent(e){\n\t\tthis.emit(e.type, e);\n\t}\n\n\t/**\n\t * Add listener for text selection\n\t * @private\n\t */\n\taddSelectionListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tthis._onSelectionChange = this.onSelectionChange.bind(this);\n\t\tthis.document.addEventListener(\"selectionchange\", this._onSelectionChange, { passive: true });\n\t}\n\n\t/**\n\t * Remove listener for text selection\n\t * @private\n\t */\n\tremoveSelectionListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tthis.document.removeEventListener(\"selectionchange\", this._onSelectionChange, { passive: true });\n\t\tthis._onSelectionChange = undefined;\n\t}\n\n\t/**\n\t * Handle getting text on selection\n\t * @private\n\t */\n\tonSelectionChange(e){\n\t\tif (this.selectionEndTimeout) {\n\t\t\tclearTimeout(this.selectionEndTimeout);\n\t\t}\n\t\tthis.selectionEndTimeout = setTimeout(function() {\n\t\t\tvar selection = this.window.getSelection();\n\t\t\tthis.triggerSelectedEvent(selection);\n\t\t}.bind(this), 250);\n\t}\n\n\t/**\n\t * Emit event on text selection\n\t * @private\n\t */\n\ttriggerSelectedEvent(selection){\n\t\tvar range, cfirange;\n\n\t\tif (selection && selection.rangeCount > 0) {\n\t\t\trange = selection.getRangeAt(0);\n\t\t\tif(!range.collapsed) {\n\t\t\t\t// cfirange = this.section.cfiFromRange(range);\n\t\t\t\tcfirange = new EpubCFI(range, this.cfiBase).toString();\n\t\t\t\tthis.emit(EVENTS.CONTENTS.SELECTED, cfirange);\n\t\t\t\tthis.emit(EVENTS.CONTENTS.SELECTED_RANGE, range);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get a Dom Range from EpubCFI\n\t * @param {EpubCFI} _cfi\n\t * @param {string} [ignoreClass]\n\t * @returns {Range} range\n\t */\n\trange(_cfi, ignoreClass){\n\t\tvar cfi = new EpubCFI(_cfi);\n\t\treturn cfi.toRange(this.document, ignoreClass);\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Dom Range\n\t * @param {Range} range\n\t * @param {string} [ignoreClass]\n\t * @returns {EpubCFI} cfi\n\t */\n\tcfiFromRange(range, ignoreClass){\n\t\treturn new EpubCFI(range, this.cfiBase, ignoreClass).toString();\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Dom node\n\t * @param {node} node\n\t * @param {string} [ignoreClass]\n\t * @returns {EpubCFI} cfi\n\t */\n\tcfiFromNode(node, ignoreClass){\n\t\treturn new EpubCFI(node, this.cfiBase, ignoreClass).toString();\n\t}\n\n\t// TODO: find where this is used - remove?\n\tmap(layout){\n\t\tvar map = new Mapping(layout);\n\t\treturn map.section();\n\t}\n\n\t/**\n\t * Size the contents to a given width and height\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n\tsize(width, height){\n\t\tvar viewport = { scale: 1.0, scalable: \"no\" };\n\n\t\tthis.layoutStyle(\"scrolling\");\n\n\t\tif (width >= 0) {\n\t\t\tthis.width(width);\n\t\t\tviewport.width = width;\n\t\t\tthis.css(\"padding\", \"0 \"+(width/12)+\"px\");\n\t\t}\n\n\t\tif (height >= 0) {\n\t\t\tthis.height(height);\n\t\t\tviewport.height = height;\n\t\t}\n\n\t\tthis.css(\"margin\", \"0\");\n\t\tthis.css(\"box-sizing\", \"border-box\");\n\n\n\t\tthis.viewport(viewport);\n\t}\n\n\t/**\n\t * Apply columns to the contents for pagination\n\t * @param {number} width\n\t * @param {number} height\n\t * @param {number} columnWidth\n\t * @param {number} gap\n\t */\n\tcolumns(width, height, columnWidth, gap){\n\t\tlet COLUMN_AXIS = prefixed(\"column-axis\");\n\t\tlet COLUMN_GAP = prefixed(\"column-gap\");\n\t\tlet COLUMN_WIDTH = prefixed(\"column-width\");\n\t\tlet COLUMN_FILL = prefixed(\"column-fill\");\n\n\t\tlet writingMode = this.writingMode();\n\t\tlet axis = (writingMode.indexOf(\"vertical\") === 0) ? \"vertical\" : \"horizontal\";\n\n\t\tthis.layoutStyle(\"paginated\");\n\n\t\t// Fix body width issues if rtl is only set on body element\n\t\tif (this.content.dir === \"rtl\") {\n\t\t\tthis.direction(\"rtl\");\n\t\t}\n\n\t\tthis.width(width);\n\t\tthis.height(height);\n\n\t\t// Deal with Mobile trying to scale to viewport\n\t\tthis.viewport({ width: width, height: height, scale: 1.0, scalable: \"no\" });\n\n\t\t// TODO: inline-block needs more testing\n\t\t// Fixes Safari column cut offs, but causes RTL issues\n\t\t// this.css(\"display\", \"inline-block\");\n\n\t\tthis.css(\"overflow-y\", \"hidden\");\n\t\tthis.css(\"margin\", \"0\", true);\n\n\t\tif (axis === \"vertical\") {\n\t\t\tthis.css(\"padding-top\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-bottom\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-left\", \"20px\");\n\t\t\tthis.css(\"padding-right\", \"20px\");\n\t\t} else {\n\t\t\tthis.css(\"padding-top\", \"20px\");\n\t\t\tthis.css(\"padding-bottom\", \"20px\");\n\t\t\tthis.css(\"padding-left\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-right\", (gap / 2) + \"px\", true);\n\t\t}\n\n\t\tthis.css(\"box-sizing\", \"border-box\");\n\t\tthis.css(\"max-width\", \"inherit\");\n\n\t\tthis.css(COLUMN_AXIS, \"horizontal\");\n\t\tthis.css(COLUMN_FILL, \"auto\");\n\n\t\tthis.css(COLUMN_GAP, gap+\"px\");\n\t\tthis.css(COLUMN_WIDTH, columnWidth+\"px\");\n\t}\n\n\t/**\n\t * Scale contents from center\n\t * @param {number} scale\n\t * @param {number} offsetX\n\t * @param {number} offsetY\n\t */\n\tscaler(scale, offsetX, offsetY){\n\t\tvar scaleStr = \"scale(\" + scale + \")\";\n\t\tvar translateStr = \"\";\n\t\t// this.css(\"position\", \"absolute\"));\n\t\tthis.css(\"transform-origin\", \"top left\");\n\n\t\tif (offsetX >= 0 || offsetY >= 0) {\n\t\t\ttranslateStr = \" translate(\" + (offsetX || 0 )+ \"px, \" + (offsetY || 0 )+ \"px)\";\n\t\t// } else if ( offsetX || offsetY ) {\n\t\t// \ttranslateStr = \" translate(\" + offsetX + \",\" + offsetY + \")\";\n\t\t}\n\n\t\tthis.css(\"transform\", scaleStr + translateStr);\n\t}\n\n\t/**\n\t * Fit contents into a fixed width and height\n\t * @param {number} width\n\t * @param {number} height\n\t */\n\tfit(width, height){\n\t\tvar viewport = this.viewport();\n\t\tvar viewportWidth;\n\t\tvar viewportHeight;\n\n\t\t// var viewportWidth = parseInt(viewport.width);\n\t\t// var viewportHeight = parseInt(viewport.height);\n\n\t\tif ( viewport.width == 'auto' && viewport.height == 'auto' ) {\n\t\t\tviewportWidth = width;\n\t\t\tviewportHeight = height; // this.textHeight(); // height;\n\t\t\tconsole.log(\"AHOY contents.fit\", height, this.textHeight());\n\t\t} else {\n\t\t\tviewportWidth = parseInt(viewport.width);\n\t\t\tviewportHeight = parseInt(viewport.height);\n\t\t}\n\n\t\tvar widthScale = width / viewportWidth;\n\t\tvar heightScale = height / viewportHeight;\n\t\tvar scale;\n\t\tif ( this.axis == 'xxxvertical' ) {\n\t\t\tscale = widthScale > heightScale ? widthScale : heightScale;\n\t\t} else {\n\t\t\tscale = widthScale < heightScale ? widthScale : heightScale;\n\t\t}\n\t\t// console.log(\"AHOY contents.fit\", width, height, \":\", viewportWidth, viewportHeight, \":\", scale);\n\n\t\t// the translate does not work as intended, elements can end up unaligned\n\t\t// var offsetY = (height - (viewportHeight * scale)) / 2;\n\t\t// var offsetX = 0;\n\t\t// if (this.sectionIndex % 2 === 1) {\n\t\t// \toffsetX = width - (viewportWidth * scale);\n\t\t// }\n\n\t\tthis.layoutStyle(\"paginated\");\n\n\t\t// scale needs width and height to be set\n\t\tthis.width(viewportWidth);\n\t\tthis.height(viewportHeight);\n\t\tthis.overflow(\"hidden\");\n\n\t\tif ( viewport.width == 'auto' || viewport.height == 'auto' ) {\n\t\t\tthis.content.style.overflow = 'auto';\n\t\t\tthis.addStylesheetRules({\n\t\t\t\t\"body\": {\n\t\t\t\t\t\"margin\": 0,\n\t\t\t\t\t\"padding\": \"1em\",\n\t\t\t\t\t\"box-sizing\": \"border-box\"\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\t// Scale to the correct size\n\t\tthis.scaler(scale, 0, 0);\n\t\t// this.scaler(scale, offsetX > 0 ? offsetX : 0, offsetY);\n\n\t\t// background images are not scaled by transform\n\t\tthis.css(\"background-size\", viewportWidth * scale + \"px \" + viewportHeight * scale + \"px\");\n\n\t\tthis.css(\"background-color\", \"transparent\");\n\t}\n\n\t/**\n\t * Set the direction of the text\n\t * @param {string} [dir=\"ltr\"] \"rtl\" | \"ltr\"\n\t */\n\tdirection(dir) {\n\t\tif (this.documentElement) {\n\t\t\tthis.documentElement.style[\"direction\"] = dir;\n\t\t}\n\t}\n\n\tmapPage(cfiBase, layout, start, end, dev) {\n\t\tvar mapping = new Mapping(layout, dev);\n\n\t\treturn mapping.page(this, cfiBase, start, end);\n\t}\n\n\t/**\n\t * Emit event when link in content is clicked\n\t * @private\n\t */\n\tlinksHandler() {\n\t\treplaceLinks(this.content, (href) => {\n\t\t\tthis.emit(EVENTS.CONTENTS.LINK_CLICKED, href);\n\t\t});\n\t}\n\n\t/**\n\t * Set the writingMode of the text\n\t * @param {string} [mode=\"horizontal-tb\"] \"horizontal-tb\" | \"vertical-rl\" | \"vertical-lr\"\n\t */\n\twritingMode(mode) {\n\t\tlet WRITING_MODE = prefixed(\"writing-mode\");\n\n\t\tif (mode && this.documentElement) {\n\t\t\tthis.documentElement.style[WRITING_MODE] = mode;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[WRITING_MODE] || '';\n\t}\n\n\t/**\n\t * Set the layoutStyle of the content\n\t * @param {string} [style=\"paginated\"] \"scrolling\" | \"paginated\"\n\t * @private\n\t */\n\tlayoutStyle(style) {\n\n\t\tif (style) {\n\t\t\tthis._layoutStyle = style;\n\t\t\tnavigator.epubReadingSystem.layoutStyle = this._layoutStyle;\n\t\t}\n\n\t\treturn this._layoutStyle || \"paginated\";\n\t}\n\n\t/**\n\t * Add the epubReadingSystem object to the navigator\n\t * @param {string} name\n\t * @param {string} version\n\t * @private\n\t */\n\tepubReadingSystem(name, version) {\n\t\tnavigator.epubReadingSystem = {\n\t\t\tname: name,\n\t\t\tversion: version,\n\t\t\tlayoutStyle: this.layoutStyle(),\n\t\t\thasFeature: function (feature) {\n\t\t\t\tswitch (feature) {\n\t\t\t\t\tcase \"dom-manipulation\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"layout-changes\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"touch-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"mouse-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"keyboard-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"spine-scripting\":\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn navigator.epubReadingSystem;\n\t}\n\n\tdestroy() {\n\t\t// Stop observing\n\t\tif(this.observer) {\n\t\t\tthis.observer.disconnect();\n\t\t}\n\n\t\tthis.document.removeEventListener('transitionend', this._resizeCheck);\n\n\t\tthis.removeListeners();\n\n\t}\n}\n\nEventEmitter(Contents.prototype);\n\nexport default Contents;\n","import EventEmitter from \"event-emitter\";\nimport EpubCFI from \"./epubcfi\";\n\n/**\n\t* Handles managing adding & removing Annotations\n\t* @param {Rendition} rendition\n\t* @class\n\t*/\nclass Annotations {\n\n\tconstructor (rendition) {\n\t\tthis.rendition = rendition;\n\t\tthis.highlights = [];\n\t\tthis.underlines = [];\n\t\tthis.marks = [];\n\t\tthis._annotations = {};\n\t\tthis._annotationsBySectionIndex = {};\n\n\t\tthis.rendition.hooks.render.register(this.inject.bind(this));\n\t\tthis.rendition.hooks.unloaded.register(this.clear.bind(this));\n\t}\n\n\t/**\n\t * Add an annotation to store\n\t * @param {string} type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} [cb] Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t * @returns {Annotation} annotation\n\t */\n\tadd (type, cfiRange, data, cb, className, styles) {\n\t\tlet hash = encodeURI(cfiRange);\n\t\tlet cfi = new EpubCFI(cfiRange);\n\t\tlet sectionIndex = cfi.spinePos;\n\t\tlet annotation = new Annotation({\n\t\t\ttype,\n\t\t\tcfiRange,\n\t\t\tdata,\n\t\t\tsectionIndex,\n\t\t\tcb,\n\t\t\tclassName,\n\t\t\tstyles\n\t\t});\n\n\t\tthis._annotations[hash] = annotation;\n\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tthis._annotationsBySectionIndex[sectionIndex].push(hash);\n\t\t} else {\n\t\t\tthis._annotationsBySectionIndex[sectionIndex] = [hash];\n\t\t}\n\n\t\tlet views = this.rendition.views();\n\n\t\tviews.forEach( (view) => {\n\t\t\tif (annotation.sectionIndex === view.index) {\n\t\t\t\tannotation.attach(view);\n\t\t\t}\n\t\t});\n\n\t\treturn annotation;\n\t}\n\n\t/**\n\t * Remove an annotation from store\n\t * @param {EpubCFI} cfiRange EpubCFI range the annotation is attached to\n\t * @param {string} type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n\t */\n\tremove (cfiRange, type) {\n\t\tlet hash = encodeURI(cfiRange);\n\n\t\tif (hash in this._annotations) {\n\t\t\tlet annotation = this._annotations[hash];\n\n\t\t\tif (type && annotation.type !== type) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet views = this.rendition.views();\n\t\t\tviews.forEach( (view) => {\n\t\t\t\tthis._removeFromAnnotationBySectionIndex(annotation.sectionIndex, hash);\n\t\t\t\tif (annotation.sectionIndex === view.index) {\n\t\t\t\t\tannotation.detach(view);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdelete this._annotations[hash];\n\t\t}\n\t}\n\n\t/**\n\t * Remove an annotations by Section Index\n\t * @private\n\t */\n\t_removeFromAnnotationBySectionIndex (sectionIndex, hash) {\n\t\tthis._annotationsBySectionIndex[sectionIndex] = this._annotationsAt(sectionIndex).filter(h => h !== hash);\n\t}\n\n\t/**\n\t * Get annotations by Section Index\n\t * @private\n\t */\n\t_annotationsAt (index) {\n\t\treturn this._annotationsBySectionIndex[index];\n\t}\n\n\n\t/**\n\t * Add a highlight to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t */\n\thighlight (cfiRange, data, cb, className, styles) {\n\t\tthis.add(\"highlight\", cfiRange, data, cb, className, styles);\n\t}\n\n\t/**\n\t * Add a underline to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t */\n\tunderline (cfiRange, data, cb, className, styles) {\n\t\tthis.add(\"underline\", cfiRange, data, cb, className, styles);\n\t}\n\n\t/**\n\t * Add a mark to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t */\n\tmark (cfiRange, data, cb) {\n\t\tthis.add(\"mark\", cfiRange, data, cb);\n\t}\n\n\t/**\n\t * iterate over annotations in the store\n\t */\n\teach () {\n\t\treturn this._annotations.forEach.apply(this._annotations, arguments);\n\t}\n\n\t/**\n\t * Hook for injecting annotation into a view\n\t * @param {View} view\n\t * @private\n\t */\n\tinject (view) {\n\t\tlet sectionIndex = view.index;\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tlet annotations = this._annotationsBySectionIndex[sectionIndex];\n\t\t\tannotations.forEach((hash) => {\n\t\t\t\tlet annotation = this._annotations[hash];\n\t\t\t\tannotation.attach(view);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Hook for removing annotation from a view\n\t * @param {View} view\n\t * @private\n\t */\n\tclear (view) {\n\t\tlet sectionIndex = view.index;\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tlet annotations = this._annotationsBySectionIndex[sectionIndex];\n\t\t\tannotations.forEach((hash) => {\n\t\t\t\tlet annotation = this._annotations[hash];\n\t\t\t\tannotation.detach(view);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * [Not Implemented] Show annotations\n\t * @TODO: needs implementation in View\n\t */\n\tshow () {\n\n\t}\n\n\t/**\n\t * [Not Implemented] Hide annotations\n\t * @TODO: needs implementation in View\n\t */\n\thide () {\n\n\t}\n\n}\n\n/**\n * Annotation object\n * @class\n * @param {object} options\n * @param {string} options.type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n * @param {EpubCFI} options.cfiRange EpubCFI range to attach annotation to\n * @param {object} options.data Data to assign to annotation\n * @param {int} options.sectionIndex Index in the Spine of the Section annotation belongs to\n * @param {function} [options.cb] Callback after annotation is added\n * @param {string} className CSS class to assign to annotation\n * @param {object} styles CSS styles to assign to annotation\n * @returns {Annotation} annotation\n */\nclass Annotation {\n\n\tconstructor ({\n\t\ttype,\n\t\tcfiRange,\n\t\tdata,\n\t\tsectionIndex,\n\t\tcb,\n\t\tclassName,\n\t\tstyles\n\t}) {\n\t\tthis.type = type;\n\t\tthis.cfiRange = cfiRange;\n\t\tthis.data = data;\n\t\tthis.sectionIndex = sectionIndex;\n\t\tthis.mark = undefined;\n\t\tthis.cb = cb;\n\t\tthis.className = className;\n\t\tthis.styles = styles;\n\t}\n\n\t/**\n\t * Update stored data\n\t * @param {object} data\n\t */\n\tupdate (data) {\n\t\tthis.data = data;\n\t}\n\n\t/**\n\t * Add to a view\n\t * @param {View} view\n\t */\n\tattach (view) {\n\t\tlet {cfiRange, data, type, mark, cb, className, styles} = this;\n\t\tlet result;\n\n\t\tif (type === \"highlight\") {\n\t\t\tresult = view.highlight(cfiRange, data, cb, className, styles);\n\t\t} else if (type === \"underline\") {\n\t\t\tresult = view.underline(cfiRange, data, cb, className, styles);\n\t\t} else if (type === \"mark\") {\n\t\t\tresult = view.mark(cfiRange, data, cb);\n\t\t}\n\n\t\tthis.mark = result;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Remove from a view\n\t * @param {View} view\n\t */\n\tdetach (view) {\n\t\tlet {cfiRange, type} = this;\n\t\tlet result;\n\n\t\tif (view) {\n\t\t\tif (type === \"highlight\") {\n\t\t\t\tresult = view.unhighlight(cfiRange);\n\t\t\t} else if (type === \"underline\") {\n\t\t\t\tresult = view.ununderline(cfiRange);\n\t\t\t} else if (type === \"mark\") {\n\t\t\t\tresult = view.unmark(cfiRange);\n\t\t\t}\n\t\t}\n\n\t\tthis.mark = undefined;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * [Not Implemented] Get text of an annotation\n\t * @TODO: needs implementation in contents\n\t */\n\ttext () {\n\n\t}\n\n}\n\nEventEmitter(Annotation.prototype);\n\n\nexport default Annotations\n","export function createElement(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nexport default {\n    createElement: createElement\n};\n","// import 'babelify/polyfill'; // needed for Object.assign\n\nexport default {\n    proxyMouse: proxyMouse\n};\n\n\n/**\n * Start proxying all mouse events that occur on the target node to each node in\n * a set of tracked nodes.\n *\n * The items in tracked do not strictly have to be DOM Nodes, but they do have\n * to have dispatchEvent, getBoundingClientRect, and getClientRects methods.\n *\n * @param target {Node} The node on which to listen for mouse events.\n * @param tracked {Node[]} A (possibly mutable) array of nodes to which to proxy\n *                         events.\n */\nexport function proxyMouse(target, tracked) {\n    function dispatch(e) {\n        // We walk through the set of tracked elements in reverse order so that\n        // events are sent to those most recently added first.\n        //\n        // This is the least surprising behaviour as it simulates the way the\n        // browser would work if items added later were drawn \"on top of\"\n        // earlier ones.\n        for (var i = tracked.length - 1; i >= 0; i--) {\n            var t = tracked[i];\n            var x = e.clientX\n            var y = e.clientY;\n\n            if (e.touches && e.touches.length) {\n              x = e.touches[0].clientX;\n              y = e.touches[0].clientY;\n            }\n\n            if (!contains(t, target, x, y)) {\n                continue;\n            }\n\n            // The event targets this mark, so dispatch a cloned event:\n            t.dispatchEvent(clone(e));\n            // We only dispatch the cloned event to the first matching mark.\n            break;\n        }\n    }\n\n    if (target.nodeName === \"iframe\" || target.nodeName === \"IFRAME\") {\n\n      try {\n        // Try to get the contents if same domain\n        this.target = target.contentDocument;\n      } catch(err){\n        this.target = target;\n      }\n\n    } else {\n      this.target = target;\n    }\n\n    for (var ev of ['mouseup', 'mousedown', 'click', 'touchstart']) {\n        this.target.addEventListener(ev, (e) => dispatch(e), false);\n    }\n\n}\n\n\n/**\n * Clone a mouse event object.\n *\n * @param e {MouseEvent} A mouse event object to clone.\n * @returns {MouseEvent}\n */\nexport function clone(e) {\n    var opts = Object.assign({}, e, {bubbles: false});\n    try {\n        return new MouseEvent(e.type, opts);\n    } catch(err) { // compat: webkit\n        var copy = document.createEvent('MouseEvents');\n        copy.initMouseEvent(e.type, false, opts.cancelable, opts.view,\n                            opts.detail, opts.screenX, opts.screenY,\n                            opts.clientX, opts.clientY, opts.ctrlKey,\n                            opts.altKey, opts.shiftKey, opts.metaKey,\n                            opts.button, opts.relatedTarget);\n        return copy;\n    }\n}\n\n\n/**\n * Check if the item contains the point denoted by the passed coordinates\n * @param item {Object} An object with getBoundingClientRect and getClientRects\n *                      methods.\n * @param x {Number}\n * @param y {Number}\n * @returns {Boolean}\n */\nfunction contains(item, target, x, y) {\n    // offset\n    var offset = target.getBoundingClientRect();\n\n    function rectContains(r, x, y) {\n        var top = r.top - offset.top;\n        var left = r.left - offset.left;\n        var bottom = top + r.height;\n        var right = left + r.width;\n        return (top <= y && left <= x && bottom > y && right > x);\n    }\n\n    // Check overall bounding box first\n    var rect = item.getBoundingClientRect();\n    if (!rectContains(rect, x, y)) {\n        return false;\n    }\n\n    // Then continue to check each child rect\n    var rects = item.getClientRects();\n    for (var i = 0, len = rects.length; i < len; i++) {\n        if (rectContains(rects[i], x, y)) {\n            return true;\n        }\n    }\n    return false;\n}\n","import svg from './svg';\nimport events from './events';\n\nexport class Pane {\n    constructor(target, container = document.body) {\n        this.target = target;\n        this.element = svg.createElement('svg');\n        this.marks = [];\n\n        // Match the coordinates of the target element\n        this.element.style.position = 'absolute';\n        // Disable pointer events\n        this.element.setAttribute('pointer-events', 'none');\n\n        // Set up mouse event proxying between the target element and the marks\n        events.proxyMouse(this.target, this.marks);\n\n        this.container = container;\n        this.container.appendChild(this.element);\n\n        this.render();\n    }\n\n    addMark(mark) {\n        var g = svg.createElement('g');\n        this.element.appendChild(g);\n        mark.bind(g, this.container);\n\n        this.marks.push(mark);\n\n        mark.render();\n        return mark;\n    }\n\n    removeMark(mark) {\n        var idx = this.marks.indexOf(mark);\n        if (idx === -1) {\n            return;\n        }\n        var el = mark.unbind();\n        this.element.removeChild(el);\n        this.marks.splice(idx, 1);\n    }\n\n    render() {\n        setCoords(this.element, coords(this.target, this.container));\n        for (var m of this.marks) {\n            m.render();\n        }\n    }\n}\n\n\nexport class Mark {\n    constructor() {\n        this.element = null;\n    }\n\n    bind(element, container) {\n        this.element = element;\n        this.container = container;\n    }\n\n    unbind() {\n        var el = this.element;\n        this.element = null;\n        return el;\n    }\n\n    render() {}\n\n    dispatchEvent(e) {\n        if (!this.element) return;\n        this.element.dispatchEvent(e);\n    }\n\n    getBoundingClientRect() {\n        return this.element.getBoundingClientRect();\n    }\n\n    getClientRects() {\n        var rects = [];\n        var el = this.element.firstChild;\n        while (el) {\n            rects.push(el.getBoundingClientRect());\n            el = el.nextSibling;\n        }\n        return rects;\n    }\n\n    filteredRanges() {\n      var rects = Array.from(this.range.getClientRects());\n\n      // De-duplicate the boxes\n      return rects.filter((box) => {\n        for (var i = 0; i < rects.length; i++) {\n          if (rects[i] === box) {\n            return true;\n          }\n          let contained = contains(rects[i], box);\n          if (contained) {\n            return false;\n          }\n        }\n        return true;\n      })\n    }\n\n}\n\nexport class Highlight extends Mark {\n    constructor(range, className, data, attributes) {\n        super();\n        this.range = range;\n        this.className = className;\n        this.data = data || {};\n        this.attributes = attributes || {};\n    }\n\n    bind(element, container) {\n        super.bind(element, container);\n\n        for (var attr in this.data) {\n          if (this.data.hasOwnProperty(attr)) {\n            this.element.dataset[attr] = this.data[attr];\n          }\n        }\n\n        for (var attr in this.attributes) {\n          if (this.attributes.hasOwnProperty(attr)) {\n            this.element.setAttribute(attr, this.attributes[attr]);\n          }\n        }\n\n        if (this.className) {\n          this.element.classList.add(this.className);\n        }\n    }\n\n    render() {\n        // Empty element\n        while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n        }\n\n        var docFrag = this.element.ownerDocument.createDocumentFragment();\n        var filtered = this.filteredRanges();\n        var offset = this.element.getBoundingClientRect();\n        var container = this.container.getBoundingClientRect();\n        container = { top: container.top, left: container.left };\n        // take into account padding\n        var styles = window.getComputedStyle(this.container);\n        container.left += parseInt(styles.paddingLeft);\n        container.top += parseInt(styles.paddingTop);\n\n        for (var i = 0, len = filtered.length; i < len; i++) {\n            var r = filtered[i];\n            var el = svg.createElement('rect');\n            el.setAttribute('x', r.left - offset.left + container.left);\n            el.setAttribute('y', r.top - offset.top + container.top);\n            el.setAttribute('height', r.height);\n            el.setAttribute('width', r.width);\n            docFrag.appendChild(el);\n        }\n\n        this.element.appendChild(docFrag);\n\n    }\n}\n\nexport class Underline extends Highlight {\n    constructor(range, className, data, attributes) {\n        super(range, className, data,  attributes);\n    }\n\n    render() {\n        // Empty element\n        while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n        }\n\n        var docFrag = this.element.ownerDocument.createDocumentFragment();\n        var filtered = this.filteredRanges();\n        var offset = this.element.getBoundingClientRect();\n        var container = this.container.getBoundingClientRect();\n\n        for (var i = 0, len = filtered.length; i < len; i++) {\n            var r = filtered[i];\n\n            var rect = svg.createElement('rect');\n            rect.setAttribute('x', r.left - offset.left + container.left);\n            rect.setAttribute('y', r.top - offset.top + container.top);\n            rect.setAttribute('height', r.height);\n            rect.setAttribute('width', r.width);\n            rect.setAttribute('fill', 'none');\n\n\n            var line = svg.createElement('line');\n            line.setAttribute('x1', r.left - offset.left + container.left);\n            line.setAttribute('x2', r.left - offset.left + container.left + r.width);\n            line.setAttribute('y1', r.top - offset.top + container.top + r.height - 1);\n            line.setAttribute('y2', r.top - offset.top + container.top + r.height - 1);\n\n            line.setAttribute('stroke-width', 1);\n            line.setAttribute('stroke', 'black'); //TODO: match text color?\n            line.setAttribute('stroke-linecap', 'square');\n\n            docFrag.appendChild(rect);\n\n            docFrag.appendChild(line);\n        }\n\n        this.element.appendChild(docFrag);\n\n    }\n}\n\n\nfunction coords(el, container) {\n    var offset = container.getBoundingClientRect();\n    var rect = el.getBoundingClientRect();\n\n    return {\n        top: rect.top - offset.top,\n        left: rect.left - offset.left,\n        height: el.scrollHeight,\n        width: el.scrollWidth\n    };\n}\n\n\nfunction setCoords(el, coords) {\n    el.style.setProperty('top', `${coords.top}px`, 'important');\n    el.style.setProperty('left', `${coords.left}px`, 'important');\n    el.style.setProperty('height', `${coords.height}px`, 'important');\n    el.style.setProperty('width', `${coords.width}px`, 'important');\n}\n\nfunction contains(rect1, rect2) {\n  return (\n    (rect2.right <= rect1.right) &&\n    (rect2.left >= rect1.left) &&\n    (rect2.top >= rect1.top) &&\n    (rect2.bottom <= rect1.bottom)\n  );\n}\n","import EventEmitter from \"event-emitter\";\nimport {extend, borders, uuid, isNumber, bounds, defer, createBlobUrl, revokeBlobUrl} from \"../../utils/core\";\nimport EpubCFI from \"../../epubcfi\";\nimport Contents from \"../../contents\";\nimport { EVENTS } from \"../../utils/constants\";\nimport { Pane, Highlight, Underline } from \"marks-pane\";\n\nclass IframeView {\n\tconstructor(section, options) {\n\t\tthis.settings = extend({\n\t\t\tignoreClass : \"\",\n\t\t\taxis: options.layout && options.layout.props.flow === \"scrolled\" ? \"vertical\" : \"horizontal\",\n\t\t\tdirection: undefined,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tlayout: undefined,\n\t\t\tglobalLayoutProperties: {},\n\t\t\tmethod: undefined\n\t\t}, options || {});\n\n\t\tthis.id = \"epubjs-view-\" + uuid();\n\t\tthis.section = section;\n\t\tthis.index = section.index;\n\n\t\tthis.element = this.container(this.settings.axis);\n\n\t\tthis.added = false;\n\t\tthis.displayed = false;\n\t\tthis.rendered = false;\n\n\t\t// this.width  = this.settings.width;\n\t\t// this.height = this.settings.height;\n\n\t\tthis.fixedWidth  = 0;\n\t\tthis.fixedHeight = 0;\n\n\t\t// Blank Cfi for Parsing\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.layout = this.settings.layout;\n\t\t// console.log(\"AHOY iframe NEW\", this.layout.height);\n\t\t// Dom events to listen for\n\t\t// this.listenedEvents = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"click\", \"touchend\", \"touchstart\"];\n\n\t\tthis.pane = undefined;\n\t\tthis.highlights = {};\n\t\tthis.underlines = {};\n\t\tthis.marks = {};\n\n\t}\n\n\tcontainer(axis) {\n\t\tvar element = document.createElement(\"div\");\n\n\t\telement.classList.add(\"epub-view\");\n\n\t\t// this.element.style.minHeight = \"100px\";\n\t\telement.style.height = \"0px\";\n\t\telement.style.width = \"0px\";\n\t\telement.style.overflow = \"hidden\";\n\t\telement.style.position = \"relative\";\n\t\telement.style.display = \"block\";\n\n\t\tif(axis && axis == \"horizontal\"){\n\t\t\telement.style.flex = \"none\";\n\t\t} else {\n\t\t\telement.style.flex = \"initial\";\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tcreate() {\n\n\t\tif(this.iframe) {\n\t\t\treturn this.iframe;\n\t\t}\n\n\t\tif(!this.element) {\n\t\t\tthis.element = this.createContainer();\n\t\t}\n\n\t\tthis.iframe = document.createElement(\"iframe\");\n\t\tthis.iframe.id = this.id;\n\t\tthis.iframe.scrolling = \"no\"; // Might need to be removed: breaks ios width calculations\n\t\tthis.iframe.style.overflow = \"hidden\";\n\t\tthis.iframe.seamless = \"seamless\";\n\t\t// Back up if seamless isn't supported\n\t\tthis.iframe.style.border = \"none\";\n\n\t\tthis.iframe.setAttribute(\"enable-annotation\", \"true\");\n\n\t\tthis.resizing = true;\n\n\t\t// this.iframe.style.display = \"none\";\n\t\tthis.element.style.visibility = \"hidden\";\n\t\tthis.iframe.style.visibility = \"hidden\";\n\n\t\tthis.iframe.style.width = \"0\";\n\t\tthis.iframe.style.height = \"0\";\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\n\t\tthis.element.setAttribute(\"ref\", this.index);\n\n\t\tthis.added = true;\n\n\t\tthis.elementBounds = bounds(this.element);\n\n\t\t// if(width || height){\n\t\t//   this.resize(width, height);\n\t\t// } else if(this.width && this.height){\n\t\t//   this.resize(this.width, this.height);\n\t\t// } else {\n\t\t//   this.iframeBounds = bounds(this.iframe);\n\t\t// }\n\n\n\t\tif((\"srcdoc\" in this.iframe)) {\n\t\t\tthis.supportsSrcdoc = true;\n\t\t} else {\n\t\t\tthis.supportsSrcdoc = false;\n\t\t}\n\n\t\tif (!this.settings.method) {\n\t\t\tthis.settings.method = this.supportsSrcdoc ? \"srcdoc\" : \"write\";\n\t\t}\n\n\t\treturn this.iframe;\n\t}\n\n\trender(request, show) {\n\n\t\t// view.onLayout = this.layout.format.bind(this.layout);\n\t\tthis.create();\n\n\t\t// Fit to size of the container, apply padding\n\t\tthis.size();\n\n\t\tif(!this.sectionRender) {\n\t\t\tthis.sectionRender = this.section.render(request);\n\t\t}\n\n\t\t// Render Chain\n\t\treturn this.sectionRender\n\t\t\t.then(function(contents){\n\t\t\t\treturn this.load(contents);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\n\t\t\t\t// apply the layout function to the contents\n\t\t\t\t// console.log(\"AHOY IFRAME render\", this.layout.height);\n\t\t\t\tthis.layout.format(this.contents);\n\n\t\t\t\t// find and report the writingMode axis\n\t\t\t\tlet writingMode = this.contents.writingMode();\n\t\t\t\tlet axis = (writingMode.indexOf(\"vertical\") === 0) ? \"vertical\" : \"horizontal\";\n\n\t\t\t\tthis.setAxis(axis);\n\t\t\t\tthis.emit(EVENTS.VIEWS.AXIS, axis);\n\n\n\t\t\t\t// Listen for events that require an expansion of the iframe\n\t\t\t\tthis.addListeners();\n\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t// Expand the iframe to the full size of the content\n\t\t\t\t\tthis.expand();\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\n\t\t\t}.bind(this), function(e){\n\t\t\t\tthis.emit(EVENTS.VIEWS.LOAD_ERROR, e);\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\treject(e);\n\t\t\t\t});\n\t\t\t}.bind(this))\n\t\t\t.then(function() {\n\t\t\t\tthis.emit(EVENTS.VIEWS.RENDERED, this.section);\n\t\t\t}.bind(this));\n\n\t}\n\n\treset () {\n\t\tif (this.iframe) {\n\t\t\tthis.iframe.style.width = \"0\";\n\t\t\tthis.iframe.style.height = \"0\";\n\t\t\tthis._width = 0;\n\t\t\tthis._height = 0;\n\t\t\tthis._textWidth = undefined;\n\t\t\tthis._contentWidth = undefined;\n\t\t\tthis._textHeight = undefined;\n\t\t\tthis._contentHeight = undefined;\n\t\t}\n\t\tthis._needsReframe = true;\n\t}\n\n\t// Determine locks base on settings\n\tsize(_width, _height) {\n\t\tvar width = _width || this.settings.width;\n\t\tvar height = _height || this.settings.height;\n\n\t\tif(this.layout.name === \"pre-paginated\") {\n\t\t\tthis.lock(\"both\", width, height);\n\t\t\t// console.log(\"AHOY IRAME size lock\", width, height);\n\t\t} else if(this.settings.axis === \"horizontal\") {\n\t\t\tthis.lock(\"height\", width, height);\n\t\t} else {\n\t\t\tthis.lock(\"width\", width, height);\n\t\t}\n\n\t\tthis.settings.width = width;\n\t\tthis.settings.height = height;\n\t}\n\n\t// Lock an axis to element dimensions, taking borders into account\n\tlock(what, width, height) {\n\t\tvar elBorders = borders(this.element);\n\t\tvar iframeBorders;\n\n\t\tif(this.iframe) {\n\t\t\tiframeBorders = borders(this.iframe);\n\t\t} else {\n\t\t\tiframeBorders = {width: 0, height: 0};\n\t\t}\n\n\t\tif(what == \"width\" && isNumber(width)){\n\t\t\tthis.lockedWidth = width - elBorders.width - iframeBorders.width;\n\t\t\t// this.resize(this.lockedWidth, width); //  width keeps ratio correct\n\t\t}\n\n\t\tif(what == \"height\" && isNumber(height)){\n\t\t\tthis.lockedHeight = height - elBorders.height - iframeBorders.height;\n\t\t\t// this.resize(width, this.lockedHeight);\n\t\t}\n\n\t\tif(what === \"both\" &&\n\t\t\t isNumber(width) &&\n\t\t\t isNumber(height)){\n\n\t\t\tthis.lockedWidth = width - elBorders.width - iframeBorders.width;\n\t\t\tthis.lockedHeight = height - elBorders.height - iframeBorders.height;\n\t\t\t// this.resize(this.lockedWidth, this.lockedHeight);\n\t\t}\n\n\t\tif(this.displayed && this.iframe) {\n\n\t\t\t// this.contents.layout();\n\t\t\tthis.expand();\n\t\t}\n\n\n\n\t}\n\n\t// Resize a single axis based on content dimensions\n\texpand(force) {\n\t\tvar width = this.lockedWidth;\n\t\tvar height = this.lockedHeight;\n\t\tvar columns;\n\n\t\tvar textWidth, textHeight;\n\n\t\tif(!this.iframe || this._expanding) return;\n\n\t\tthis._expanding = true;\n\n\t\tif(this.layout.name === 'pre-paginated' && this.settings.axis === 'vertical') {\n\t\t\theight = this.contents.textHeight();\n\t\t\twidth = this.contents.textWidth();\n            // width = this.layout.columnWidth;\n\n\t\t} else if(this.layout.name === \"pre-paginated\") {\n\t\t\twidth = this.layout.columnWidth;\n\t\t\theight = this.layout.height;\n\t\t}\n\t\t// Expand Horizontally\n\t\telse if(this.settings.axis === \"horizontal\") {\n\t\t\t// Get the width of the text\n\t\t\twidth = this.contents.textWidth();\n\n\t\t\tif (width % this.layout.pageWidth > 0) {\n\t\t\t\twidth = Math.ceil(width / this.layout.pageWidth) * this.layout.pageWidth;\n\t\t\t}\n\n\t\t\tif (this.settings.forceEvenPages) {\n\t\t\t\tcolumns = (width / this.layout.pageWidth);\n\t\t\t\tif ( this.layout.divisor > 1 &&\n\t\t\t\t\t\t this.layout.name === \"reflowable\" &&\n\t\t\t\t\t\t(columns % 2 > 0)) {\n\t\t\t\t\t// add a blank page\n\t\t\t\t\twidth += this.layout.pageWidth;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} // Expand Vertically\n\t\telse if(this.settings.axis === \"vertical\") {\n\t\t\theight = this.contents.textHeight();\n\t\t\t// width = this.contents.textWidth();\n\t\t\t// console.log(\"AHOY AHOY expand\", this.index, width, height, \"/\", this._width, this._height);\n\t\t}\n\n\t\t// Only Resize if dimensions have changed or\n\t\t// if Frame is still hidden, so needs reframing\n\t\tif(this._needsReframe || width != this._width || height != this._height){\n\t\t\tthis.reframe(width, height);\n\t\t}\n\n\t\tthis._expanding = false;\n\t}\n\n\treframe(width, height) {\n\t\tvar size;\n\n\t\tif(isNumber(width)){\n\t\t\tthis.element.style.width = width + \"px\";\n\t\t\tthis.iframe.style.width = width + \"px\";\n\t\t\tthis._width = width;\n\t\t}\n\n\t\tif(isNumber(height)){\n\t\t\tthis.element.style.height = height + \"px\";\n\t\t\tthis.iframe.style.height = height + \"px\";\n\t\t\tthis._height = height;\n\t\t}\n\n\t\tlet widthDelta = this.prevBounds ? width - this.prevBounds.width : width;\n\t\tlet heightDelta = this.prevBounds ? height - this.prevBounds.height : height;\n\n\t\tsize = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthDelta: widthDelta,\n\t\t\theightDelta: heightDelta,\n\t\t};\n\n\t\tthis.pane && this.pane.render();\n\n\t\trequestAnimationFrame(() => {\n\t\t\tlet mark;\n\t\t\tfor (let m in this.marks) {\n\t\t\t\tif (this.marks.hasOwnProperty(m)) {\n\t\t\t\t\tmark = this.marks[m];\n\t\t\t\t\tthis.placeMark(mark.element, mark.range);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.onResize(this, size);\n\n\t\tthis.emit(EVENTS.VIEWS.RESIZED, size);\n\n\t\tthis.prevBounds = size;\n\n\t\tthis.elementBounds = bounds(this.element);\n\n\t}\n\n\n\tload(contents) {\n\t\tvar loading = new defer();\n\t\tvar loaded = loading.promise;\n\n\t\tif(!this.iframe) {\n\t\t\tloading.reject(new Error(\"No Iframe Available\"));\n\t\t\treturn loaded;\n\t\t}\n\n\t\tthis.iframe.onload = function(event) {\n\n\t\t\tthis.onLoad(event, loading);\n\n\t\t}.bind(this);\n\n\t\tif (this.settings.method === \"blobUrl\") {\n\t\t\tthis.blobUrl = createBlobUrl(contents, \"application/xhtml+xml\");\n\t\t\tthis.iframe.src = this.blobUrl;\n\t\t\tthis.element.appendChild(this.iframe);\n\t\t} else if(this.settings.method === \"srcdoc\"){\n\t\t\tthis.iframe.srcdoc = contents;\n\t\t\tthis.element.appendChild(this.iframe);\n\t\t} else {\n\n\t\t\tthis.element.appendChild(this.iframe);\n\n\t\t\tthis.document = this.iframe.contentDocument;\n\n\t\t\tif(!this.document) {\n\t\t\t\tloading.reject(new Error(\"No Document Available\"));\n\t\t\t\treturn loaded;\n\t\t\t}\n\n\t\t\tthis.iframe.contentDocument.open();\n\t\t\tthis.iframe.contentDocument.write(contents);\n\t\t\tthis.iframe.contentDocument.close();\n\n\t\t}\n\n\t\treturn loaded;\n\t}\n\n\tonLoad(event, promise) {\n\n\t\tthis.window = this.iframe.contentWindow;\n\t\tthis.document = this.iframe.contentDocument;\n\n\t\tthis.contents = new Contents(this.document, this.document.body, this.section.cfiBase, this.section.index);\n\n\t\tthis.rendering = false;\n\n\t\tvar link = this.document.querySelector(\"link[rel='canonical']\");\n\t\tif (link) {\n\t\t\tlink.setAttribute(\"href\", this.section.canonical);\n\t\t} else {\n\t\t\tlink = this.document.createElement(\"link\");\n\t\t\tlink.setAttribute(\"rel\", \"canonical\");\n\t\t\tlink.setAttribute(\"href\", this.section.canonical);\n\t\t\tthis.document.querySelector(\"head\").appendChild(link);\n\t\t}\n\n\t\tthis.contents.on(EVENTS.CONTENTS.EXPAND, () => {\n\t\t\tif(this.displayed && this.iframe) {\n\t\t\t\tthis.expand();\n\t\t\t\tif (this.contents) {\n\t\t\t\t\tthis.layout.format(this.contents);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.contents.on(EVENTS.CONTENTS.RESIZE, (e) => {\n\t\t\tif(this.displayed && this.iframe) {\n\t\t\t\tthis.expand();\n\t\t\t\tif (this.contents) {\n\t\t\t\t\tthis.layout.format(this.contents);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tpromise.resolve(this.contents);\n\t}\n\n\tsetLayout(layout) {\n\t\tthis.layout = layout;\n\n\t\tif (this.contents) {\n\t\t\tthis.layout.format(this.contents);\n\t\t\tthis.expand();\n\t\t}\n\t}\n\n\tsetAxis(axis) {\n\n\t\t// Force vertical for scrolled\n\t\tif (this.layout.props.flow === \"scrolled\") {\n\t\t\taxis = \"vertical\";\n\t\t}\n\n\t\tthis.settings.axis = axis;\n\n\t\tif(axis == \"horizontal\"){\n\t\t\tthis.element.style.flex = \"none\";\n\t\t} else {\n\t\t\tthis.element.style.flex = \"initial\";\n\t\t}\n\n\t\tthis.size();\n\n\t}\n\n\taddListeners() {\n\t\t//TODO: Add content listeners for expanding\n\t}\n\n\tremoveListeners(layoutFunc) {\n\t\t//TODO: remove content listeners for expanding\n\t}\n\n\tdisplay(request) {\n\t\tvar displayed = new defer();\n\n\t\tif (!this.displayed) {\n\n\t\t\tthis.render(request)\n\t\t\t\t.then(function () {\n\n\t\t\t\t\tthis.emit(EVENTS.VIEWS.DISPLAYED, this);\n\t\t\t\t\tthis.onDisplayed(this);\n\n\t\t\t\t\tthis.displayed = true;\n\t\t\t\t\tdisplayed.resolve(this);\n\n\t\t\t\t}.bind(this), function (err) {\n\t\t\t\t\tdisplayed.reject(err, this);\n\t\t\t\t});\n\n\t\t} else {\n\t\t\tdisplayed.resolve(this);\n\t\t}\n\n\n\t\treturn displayed.promise;\n\t}\n\n\tshow() {\n\n\t\tthis.element.style.visibility = \"visible\";\n\n\t\tif(this.iframe){\n\t\t\tthis.iframe.style.visibility = \"visible\";\n\n\t\t\t// Remind Safari to redraw the iframe\n\t\t\tthis.iframe.style.transform = \"translateZ(0)\";\n\t\t\tthis.iframe.offsetWidth;\n\t\t\tthis.iframe.style.transform = null;\n\t\t}\n\n\t\t// console.log(\"AHOY VIEWS iframe show\", this.index);\n\t\tthis.emit(EVENTS.VIEWS.SHOWN, this);\n\t}\n\n\thide() {\n\t\t// this.iframe.style.display = \"none\";\n\t\tthis.element.style.visibility = \"hidden\";\n\t\tthis.iframe.style.visibility = \"hidden\";\n\n\t\tthis.stopExpanding = true;\n\t\t// console.log(\"AHOY VIEWS iframe hide\", this.index);\n\t\tthis.emit(EVENTS.VIEWS.HIDDEN, this);\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\ttop: this.element.offsetTop,\n\t\t\tleft: this.element.offsetLeft\n\t\t}\n\t}\n\n\twidth() {\n\t\treturn this._width;\n\t}\n\n\theight() {\n\t\treturn this._height;\n\t}\n\n\tposition() {\n\t\treturn this.element.getBoundingClientRect();\n\t}\n\n\tlocationOf(target) {\n\t\tvar parentPos = this.iframe.getBoundingClientRect();\n\t\tvar targetPos = this.contents.locationOf(target, this.settings.ignoreClass);\n\n\t\treturn {\n\t\t\t\"left\": targetPos.left,\n\t\t\t\"top\": targetPos.top\n\t\t};\n\t}\n\n\tonDisplayed(view) {\n\t\t// Stub, override with a custom functions\n\t}\n\n\tonResize(view, e) {\n\t\t// Stub, override with a custom functions\n\t}\n\n\tbounds(force) {\n\t\tif(force || !this.elementBounds) {\n\t\t\tthis.elementBounds = bounds(this.element);\n\t\t}\n\n\t\treturn this.elementBounds;\n\t}\n\n\thighlight(cfiRange, data={}, cb, className = \"epubjs-hl\", styles = {}) {\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\t\tconst attributes = Object.assign({\"fill\": \"yellow\", \"fill-opacity\": \"0.3\", \"mix-blend-mode\": \"multiply\"}, styles);\n\t\tlet range = this.contents.range(cfiRange);\n\n\t\tlet emitter = () => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tdata[\"epubcfi\"] = cfiRange;\n\n\t\tif (!this.pane) {\n\t\t\tthis.pane = new Pane(this.iframe, this.element);\n\t\t}\n\n\t\tlet m = new Highlight(range, className, data, attributes);\n\t\tlet h = this.pane.addMark(m);\n\n\t\tthis.highlights[cfiRange] = { \"mark\": h, \"element\": h.element, \"listeners\": [emitter, cb] };\n\n\t\th.element.setAttribute(\"ref\", className);\n\t\th.element.addEventListener(\"click\", emitter);\n\t\th.element.addEventListener(\"touchstart\", emitter);\n\n\t\tif (cb) {\n\t\t\th.element.addEventListener(\"click\", cb);\n\t\t\th.element.addEventListener(\"touchstart\", cb);\n\t\t}\n\t\treturn h;\n\t}\n\n\tunderline(cfiRange, data={}, cb, className = \"epubjs-ul\", styles = {}) {\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\t\tconst attributes = Object.assign({\"stroke\": \"black\", \"stroke-opacity\": \"0.3\", \"mix-blend-mode\": \"multiply\"}, styles);\n\t\tlet range = this.contents.range(cfiRange);\n\t\tlet emitter = () => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tdata[\"epubcfi\"] = cfiRange;\n\n\t\tif (!this.pane) {\n\t\t\tthis.pane = new Pane(this.iframe, this.element);\n\t\t}\n\n\t\tlet m = new Underline(range, className, data, attributes);\n\t\tlet h = this.pane.addMark(m);\n\n\t\tthis.underlines[cfiRange] = { \"mark\": h, \"element\": h.element, \"listeners\": [emitter, cb] };\n\n\t\th.element.setAttribute(\"ref\", className);\n\t\th.element.addEventListener(\"click\", emitter);\n\t\th.element.addEventListener(\"touchstart\", emitter);\n\n\t\tif (cb) {\n\t\t\th.element.addEventListener(\"click\", cb);\n\t\t\th.element.addEventListener(\"touchstart\", cb);\n\t\t}\n\t\treturn h;\n\t}\n\n\tmark(cfiRange, data={}, cb) {\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (cfiRange in this.marks) {\n\t\t\tlet item = this.marks[cfiRange];\n\t\t\treturn item;\n\t\t}\n\n\t\tlet range = this.contents.range(cfiRange);\n\t\tif (!range) {\n\t\t\treturn;\n\t\t}\n\t\tlet container = range.commonAncestorContainer;\n\t\tlet parent = (container.nodeType === 1) ? container : container.parentNode;\n\n\t\tlet emitter = (e) => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tif (range.collapsed && container.nodeType === 1) {\n\t\t\trange = new Range();\n\t\t\trange.selectNodeContents(container);\n\t\t} else if (range.collapsed) { // Webkit doesn't like collapsed ranges\n\t\t\trange = new Range();\n\t\t\trange.selectNodeContents(parent);\n\t\t}\n\n\t\tlet mark = this.document.createElement(\"a\");\n\t\tmark.setAttribute(\"ref\", \"epubjs-mk\");\n\t\tmark.style.position = \"absolute\";\n\n\t\tmark.dataset[\"epubcfi\"] = cfiRange;\n\n\t\tif (data) {\n\t\t\tObject.keys(data).forEach((key) => {\n\t\t\t\tmark.dataset[key] = data[key];\n\t\t\t});\n\t\t}\n\n\t\tif (cb) {\n\t\t\tmark.addEventListener(\"click\", cb);\n\t\t\tmark.addEventListener(\"touchstart\", cb);\n\t\t}\n\n\t\tmark.addEventListener(\"click\", emitter);\n\t\tmark.addEventListener(\"touchstart\", emitter);\n\n\t\tthis.placeMark(mark, range);\n\n\t\tthis.element.appendChild(mark);\n\n\t\tthis.marks[cfiRange] = { \"element\": mark, \"range\": range, \"listeners\": [emitter, cb] };\n\n\t\treturn parent;\n\t}\n\n\tplaceMark(element, range) {\n\t\tlet top, right, left;\n\n\t\tif(this.layout.name === \"pre-paginated\" ||\n\t\t\tthis.settings.axis !== \"horizontal\") {\n\t\t\tlet pos = range.getBoundingClientRect();\n\t\t\ttop = pos.top;\n\t\t\tright = pos.right;\n\t\t} else {\n\t\t\t// Element might break columns, so find the left most element\n\t\t\tlet rects = range.getClientRects();\n\n\t\t\tlet rect;\n\t\t\tfor (var i = 0; i != rects.length; i++) {\n\t\t\t\trect = rects[i];\n\t\t\t\tif (!left || rect.left < left) {\n\t\t\t\t\tleft = rect.left;\n\t\t\t\t\t// right = rect.right;\n\t\t\t\t\tright = Math.ceil(left / this.layout.props.pageWidth) * this.layout.props.pageWidth - (this.layout.gap / 2);\n\t\t\t\t\ttop = rect.top;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telement.style.top = `${top}px`;\n\t\telement.style.left = `${right}px`;\n\t}\n\n\tunhighlight(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.highlights) {\n\t\t\titem = this.highlights[cfiRange];\n\n\t\t\tthis.pane.removeMark(item.mark);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) {\n\t\t\t\t\titem.element.removeEventListener(\"click\", l);\n\t\t\t\t\titem.element.removeEventListener(\"touchstart\", l);\n\t\t\t\t};\n\t\t\t});\n\t\t\tdelete this.highlights[cfiRange];\n\t\t}\n\t}\n\n\tununderline(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.underlines) {\n\t\t\titem = this.underlines[cfiRange];\n\t\t\tthis.pane.removeMark(item.mark);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) {\n\t\t\t\t\titem.element.removeEventListener(\"click\", l);\n\t\t\t\t\titem.element.removeEventListener(\"touchstart\", l);\n\t\t\t\t};\n\t\t\t});\n\t\t\tdelete this.underlines[cfiRange];\n\t\t}\n\t}\n\n\tunmark(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.marks) {\n\t\t\titem = this.marks[cfiRange];\n\t\t\tthis.element.removeChild(item.element);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) {\n\t\t\t\t\titem.element.removeEventListener(\"click\", l);\n\t\t\t\t\titem.element.removeEventListener(\"touchstart\", l);\n\t\t\t\t};\n\t\t\t});\n\t\t\tdelete this.marks[cfiRange];\n\t\t}\n\t}\n\n\tdestroy() {\n\n\t\tfor (let cfiRange in this.highlights) {\n\t\t\tthis.unhighlight(cfiRange);\n\t\t}\n\n\t\tfor (let cfiRange in this.underlines) {\n\t\t\tthis.ununderline(cfiRange);\n\t\t}\n\n\t\tfor (let cfiRange in this.marks) {\n\t\t\tthis.unmark(cfiRange);\n\t\t}\n\n\t\tif (this.blobUrl) {\n\t\t\trevokeBlobUrl(this.blobUrl);\n\t\t}\n\n\t\tif(this.displayed){\n\t\t\tthis.displayed = false;\n\n\t\t\tthis.removeListeners();\n\n\t\t\tthis.stopExpanding = true;\n\t\t\tthis.element.removeChild(this.iframe);\n\n\t\t\tthis.iframe = undefined;\n\t\t\tthis.contents = undefined;\n\n\t\t\tthis._textWidth = null;\n\t\t\tthis._textHeight = null;\n\t\t\tthis._width = null;\n\t\t\tthis._height = null;\n\t\t}\n\n\t\t// this.element.style.height = \"0px\";\n\t\t// this.element.style.width = \"0px\";\n\t}\n}\n\nEventEmitter(IframeView.prototype);\n\nexport default IframeView;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","import {uuid, isNumber, isElement, windowBounds} from \"../../utils/core\";\nimport throttle from 'lodash/throttle'\n\nclass Stage {\n\tconstructor(_options) {\n\t\tthis.settings = _options || {};\n\t\tthis.id = \"epubjs-container-\" + uuid();\n\n\t\tthis.container = this.create(this.settings);\n\n\t\tif(this.settings.hidden) {\n\t\t\tthis.wrapper = this.wrap(this.container);\n\t\t}\n\n\t}\n\n\t/*\n\t* Creates an element to render to.\n\t* Resizes to passed width and height or to the elements size\n\t*/\n\tcreate(options){\n\t\tlet height  = options.height;// !== false ? options.height : \"100%\";\n\t\tlet width   = options.width;// !== false ? options.width : \"100%\";\n\t\tlet overflow  = options.overflow || false;\n\t\tlet axis = options.axis || \"vertical\";\n\t\tlet direction = options.direction;\n\t\tlet scale = options.scale || 1.0;\n\n\t\tif(options.height && isNumber(options.height)) {\n\t\t\theight = options.height + \"px\";\n\t\t}\n\n\t\tif(options.width && isNumber(options.width)) {\n\t\t\twidth = options.width + \"px\";\n\t\t}\n\n\t\t// Create new container element\n\t\tlet container = document.createElement(\"div\");\n\n\t\tcontainer.id = this.id;\n\t\tcontainer.classList.add(\"epub-container\");\n\n\t\t// Style Element\n\t\t// container.style.fontSize = \"0\";\n\t\tcontainer.style.wordSpacing = \"0\";\n\t\tcontainer.style.lineHeight = \"0\";\n\t\tcontainer.style.verticalAlign = \"top\";\n\t\tcontainer.style.position = \"relative\";\n\n\t\tif(axis === \"horizontal\") {\n\t\t\t// container.style.whiteSpace = \"nowrap\";\n\t\t\tcontainer.style.display = \"flex\";\n\t\t\tcontainer.style.flexDirection = \"row\";\n\t\t\tcontainer.style.flexWrap = \"nowrap\";\n\t\t}\n\n\t\tif(width){\n\t\t\tcontainer.style.width = width;\n\t\t}\n\n\t\tif(height){\n\t\t\tcontainer.style.height = height;\n\t\t}\n\n\t\tif (overflow) {\n\t\t\tcontainer.style.overflow = overflow;\n\t\t}\n\n\t\tif (direction) {\n\t\t\tcontainer.dir = direction;\n\t\t\tcontainer.style[\"direction\"] = direction;\n\t\t}\n\n\t\tif (direction && this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = direction;\n\t\t}\n\n\t\tif (scale && scale != 1.0) {\n\t\t\tcontainer.style[\"transform-origin\"] = \"top left\";\n\t\t\tcontainer.style[\"transform\"] = \"scale(\" + scale + \")\";\n\t\t\tcontainer.style.overflow = \"auto\"; // \"visible\" breaks something?\n\t\t} else {\n\t\t\tcontainer.style[\"transform-origin\"] = null;\n\t\t\tcontainer.style[\"transform\"] = null;\n\t\t}\n\n\t\treturn container;\n\t}\n\n\twrap(container) {\n\t\tvar wrapper = document.createElement(\"div\");\n\n\t\twrapper.style.visibility = \"hidden\";\n\t\twrapper.style.overflow = \"hidden\";\n\t\twrapper.style.width = \"0\";\n\t\twrapper.style.height = \"0\";\n\n\t\twrapper.appendChild(container);\n\t\treturn wrapper;\n\t}\n\n\n\tgetElement(_element){\n\t\tvar element;\n\n\t\tif(isElement(_element)) {\n\t\t\telement = _element;\n\t\t} else if (typeof _element === \"string\") {\n\t\t\telement = document.getElementById(_element);\n\t\t}\n\n\t\tif(!element){\n\t\t\tthrow new Error(\"Not an Element\");\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tattachTo(what){\n\n\t\tvar element = this.getElement(what);\n\t\tvar base;\n\n\t\tif(!element){\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.settings.hidden) {\n\t\t\tbase = this.wrapper;\n\t\t} else {\n\t\t\tbase = this.container;\n\t\t}\n\n\t\telement.appendChild(base);\n\n\t\tthis.element = element;\n\n\t\treturn element;\n\n\t}\n\n\tgetContainer() {\n\t\treturn this.container;\n\t}\n\n\tonResize(func){\n\t\t// Only listen to window for resize event if width and height are not fixed.\n\t\t// This applies if it is set to a percent or auto.\n\t\tif(!isNumber(this.settings.width) ||\n\t\t\t !isNumber(this.settings.height) ) {\n\t\t\tthis.resizeFunc = throttle(func, 50);\n\t\t\twindow.addEventListener(\"resize\", this.resizeFunc, false);\n\t\t}\n\n\t}\n\n\tonOrientationChange(func){\n\t\tthis.orientationChangeFunc = func;\n\t\twindow.addEventListener(\"orientationchange\", this.orientationChangeFunc, false);\n\t}\n\n\tsize(width, height){\n\t\tvar bounds;\n\t\tlet _width = width || this.settings.width;\n\t\tlet _height = height || this.settings.height;\n\n\t\t// If width or height are set to false, inherit them from containing element\n\t\tif(width === null) {\n\t\t\tbounds = this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.width) {\n\t\t\t\twidth = Math.floor(bounds.width);\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (isNumber(width)) {\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.width = width;\n\t\t\t}\n\t\t}\n\n\t\tif(height === null) {\n\t\t\tbounds = bounds || this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.height) {\n\t\t\t\theight = bounds.height;\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t}\n\n\t\t} else {\n\t\t\tif (isNumber(height)) {\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.height = height;\n\t\t\t}\n\t\t}\n\n\t\tvar _round = function(value) {\n\t\t\treturn Math.round(value);\n\n\t\t\t// -- this calculates the closest even number to value\n\t\t\tvar retval = 2 * Math.round(value / 2);\n\t\t\tif ( retval > value ) {\n\t\t\t\tretval -= 2;\n\t\t\t}\n\t\t\treturn retval;\n\t\t}\n\n\t\tif(!isNumber(width)) {\n\t\t\tbounds = this.container.getBoundingClientRect();\n\t\t\twidth = _round(bounds.width); // Math.floor(bounds.width);\n\t\t\t//height = bounds.height;\n\t\t}\n\n\t\tif(!isNumber(height)) {\n\t\t\tbounds = bounds || this.container.getBoundingClientRect();\n\t\t\t//width = bounds.width;\n\t\t\theight = _round(bounds.height); // bounds.height;\n\t\t}\n\n\n\t\tthis.containerStyles = window.getComputedStyle(this.container);\n\n\t\tthis.containerPadding = {\n\t\t\tleft: parseFloat(this.containerStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(this.containerStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(this.containerStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(this.containerStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\t// Bounds not set, get them from window\n\t\tlet _windowBounds = windowBounds();\n\t\tlet bodyStyles = window.getComputedStyle(document.body);\n\t\tlet bodyPadding = {\n\t\t\tleft: parseFloat(bodyStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(bodyStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(bodyStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(bodyStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\tif (!_width) {\n\t\t\twidth = _windowBounds.width -\n\t\t\t\t\t\t\t\tbodyPadding.left -\n\t\t\t\t\t\t\t\tbodyPadding.right;\n\t\t}\n\n\t\tif ((this.settings.fullsize && !_height) || !_height) {\n\t\t\theight = _windowBounds.height -\n\t\t\t\t\t\t\t\tbodyPadding.top -\n\t\t\t\t\t\t\t\tbodyPadding.bottom;\n\t\t}\n\n\t\tif ( this.settings.scale ) {\n\t\t\twidth /= this.settings.scale;\n\t\t\theight /= this.settings.scale;\n\t\t}\n\n\t\treturn {\n\t\t\twidth: width -\n\t\t\t\t\t\t\tthis.containerPadding.left -\n\t\t\t\t\t\t\tthis.containerPadding.right,\n\t\t\theight: height -\n\t\t\t\t\t\t\tthis.containerPadding.top -\n\t\t\t\t\t\t\tthis.containerPadding.bottom\n\t\t};\n\n\t}\n\n\tbounds(){\n\t\tlet box;\n\t\tif (this.container.style.overflow !== \"visible\") {\n\t\t\tbox = this.container && this.container.getBoundingClientRect();\n\t\t}\n\n\t\tif(!box || !box.width || !box.height) {\n\t\t\treturn windowBounds();\n\t\t} else {\n\t\t\treturn box;\n\t\t}\n\n\t}\n\n\tgetSheet(){\n\t\tvar style = document.createElement(\"style\");\n\n\t\t// WebKit hack --> https://davidwalsh.name/add-rules-stylesheets\n\t\tstyle.appendChild(document.createTextNode(\"\"));\n\n\t\tdocument.head.appendChild(style);\n\n\t\treturn style.sheet;\n\t}\n\n\taddStyleRules(selector, rulesArray){\n\t\tvar scope = \"#\" + this.id + \" \";\n\t\tvar rules = \"\";\n\n\t\tif(!this.sheet){\n\t\t\tthis.sheet = this.getSheet();\n\t\t}\n\n\t\trulesArray.forEach(function(set) {\n\t\t\tfor (var prop in set) {\n\t\t\t\tif(set.hasOwnProperty(prop)) {\n\t\t\t\t\trules += prop + \":\" + set[prop] + \";\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.sheet.insertRule(scope + selector + \" {\" + rules + \"}\", 0);\n\t}\n\n\taxis(axis) {\n\t\tif(axis === \"horizontal\") {\n\t\t\tthis.container.style.display = \"flex\";\n\t\t\tthis.container.style.flexDirection = \"row\";\n\t\t\tthis.container.style.flexWrap = \"nowrap\";\n\t\t} else {\n\t\t\tthis.container.style.display = \"block\";\n\t\t}\n\t}\n\n\t// orientation(orientation) {\n\t// \tif (orientation === \"landscape\") {\n\t//\n\t// \t} else {\n\t//\n\t// \t}\n\t//\n\t// \tthis.orientation = orientation;\n\t// }\n\n\tdirection(dir) {\n\t\tif (this.container) {\n\t\t\tthis.container.dir = dir;\n\t\t\tthis.container.style[\"direction\"] = dir;\n\t\t}\n\n\t\tif (this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = dir;\n\t\t}\n\t}\n\n\toverflow(overflow) {\n\t\tif (this.container) {\n\t\t\tthis.container.style[\"overflow\"] = overflow;\n\t\t}\n\t}\n\n\tscale(s) {\n\t\tif (this.container) {\n\t\t\tif ( s != 1.0 ) {\n\t\t\t\tthis._originalOverflow = this.container.style.overflow;\n\t\t\t\tthis.container.style[\"transform-origin\"] = \"top left\";\n\t\t\t\tthis.container.style[\"transform\"] = \"scale(\" + s + \")\";\n\t\t\t\tthis.container.style.overflow = \"auto\"; // \"visible\"\n\t\t\t} else {\n\t\t\t\tthis.container.style.overflow = this._originalOverflow;\n\t\t\t\tthis.container.style[\"transform-origin\"] = null;\n\t\t\t\tthis.container.style[\"transform\"] = null;\n\t\t\t}\n\t\t\tthis.settings.scale = s;\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tvar base;\n\n\t\tif (this.element) {\n\n\t\t\tif(this.settings.hidden) {\n\t\t\t\tbase = this.wrapper;\n\t\t\t} else {\n\t\t\t\tbase = this.container;\n\t\t\t}\n\n\t\t\tif(this.element.contains(this.container)) {\n\t\t\t\tthis.element.removeChild(this.container);\n\t\t\t}\n\n\t\t\twindow.removeEventListener(\"resize\", this.resizeFunc);\n\t\t\twindow.removeEventListener(\"orientationChange\", this.orientationChangeFunc);\n\n\t\t}\n\t}\n}\n\nexport default Stage;\n","class Views {\n\tconstructor(container) {\n\t\tthis.container = container;\n\t\tthis._views = [];\n\t\tthis.length = 0;\n\t\tthis.hidden = false;\n\t}\n\n\tall() {\n\t\treturn this._views;\n\t}\n\n\tfirst() {\n\t\treturn this._views[0];\n\t}\n\n\tlast() {\n\t\treturn this._views[this._views.length-1];\n\t}\n\n\tindexOf(view) {\n\t\treturn this._views.indexOf(view);\n\t}\n\n\tslice() {\n\t\treturn this._views.slice.apply(this._views, arguments);\n\t}\n\n\tget(i) {\n\t\treturn this._views[i];\n\t}\n\n\tappend(view){\n\t\tthis._views.push(view);\n\t\tif(this.container){\n\t\t\tthis.container.appendChild(view.element);\n\t\t}\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tprepend(view){\n\t\tthis._views.unshift(view);\n\t\tif(this.container){\n\t\t\tthis.container.insertBefore(view.element, this.container.firstChild);\n\t\t}\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tinsert(view, index) {\n\t\tthis._views.splice(index, 0, view);\n\n\t\tif(this.container){\n\t\t\tif(index < this.container.children.length){\n\t\t\t\tthis.container.insertBefore(view.element, this.container.children[index]);\n\t\t\t} else {\n\t\t\t\tthis.container.appendChild(view.element);\n\t\t\t}\n\t\t}\n\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tremove(view) {\n\t\tvar index = this._views.indexOf(view);\n\n\t\tif(index > -1) {\n\t\t\tthis._views.splice(index, 1);\n\t\t}\n\n\n\t\tthis.destroy(view);\n\n\t\tthis.length--;\n\t}\n\n\tdestroy(view) {\n\t\tif(view.displayed){\n\t\t\tview.destroy();\n\t\t}\n\n\t\tif(this.container){\n\t\t\t this.container.removeChild(view.element);\n\t\t}\n\t\tview = null;\n\t}\n\n\t// Iterators\n\n\tforEach() {\n\t\treturn this._views.forEach.apply(this._views, arguments);\n\t}\n\n\tclear(){\n\t\t// Remove all views\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tif(!this.length) return;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tthis.destroy(view);\n\t\t}\n\n\t\tthis._views = [];\n\t\tthis.length = 0;\n\t}\n\n\tfind(section){\n\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed && view.section.index == section.index) {\n\t\t\t\treturn view;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tdisplayed(){\n\t\tvar displayed = [];\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tdisplayed.push(view);\n\t\t\t}\n\t\t}\n\t\treturn displayed;\n\t}\n\n\tshow(){\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tview.show();\n\t\t\t}\n\t\t}\n\t\tthis.hidden = false;\n\t}\n\n\thide(){\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tview.hide();\n\t\t\t}\n\t\t}\n\t\tthis.hidden = true;\n\t}\n}\n\nexport default Views;\n","import EventEmitter from \"event-emitter\";\nimport {extend, defer, windowBounds, isNumber} from \"../../utils/core\";\nimport Mapping from \"../../mapping\";\nimport Queue from \"../../utils/queue\";\nimport Stage from \"../helpers/stage\";\nimport Views from \"../helpers/views\";\nimport { EVENTS } from \"../../utils/constants\";\n\nclass DefaultViewManager {\n\tconstructor(options) {\n\n\t\tthis.name = \"default\";\n\t\tthis.optsSettings = options.settings;\n\t\tthis.View = options.view;\n\t\tthis.request = options.request;\n\t\tthis.renditionQueue = options.queue;\n\t\tthis.q = new Queue(this);\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\tinfinite: true,\n\t\t\thidden: false,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\taxis: undefined,\n\t\t\tflow: \"scrolled\",\n\t\t\tignoreClass: \"\",\n\t\t\tfullsize: undefined\n\t\t});\n\n\t\textend(this.settings, options.settings || {});\n\n\t\tthis.viewSettings = {\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\taxis: this.settings.axis,\n\t\t\tflow: this.settings.flow,\n\t\t\tlayout: this.layout,\n\t\t\tmethod: this.settings.method, // srcdoc, blobUrl, write\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tforceEvenPages: true\n\t\t};\n\n\t\tthis.rendered = false;\n\n\t}\n\n\trender(element, size){\n\t\tlet tag = element.tagName;\n\n\t\tif (typeof this.settings.fullsize === \"undefined\" &&\n\t\t\t\ttag && (tag.toLowerCase() == \"body\" ||\n\t\t\t\ttag.toLowerCase() == \"html\")) {\n\t\t\t\tthis.settings.fullsize = true;\n\t\t}\n\n\t\tif (this.settings.fullsize) {\n\t\t\tthis.settings.overflow = \"visible\";\n\t\t\tthis.overflow = this.settings.overflow;\n\t\t}\n\n\t\tthis.settings.size = size;\n\n\t\t// Save the stage\n\t\tthis.stage = new Stage({\n\t\t\twidth: size.width,\n\t\t\theight: size.height,\n\t\t\toverflow: this.overflow,\n\t\t\thidden: this.settings.hidden,\n\t\t\taxis: this.settings.axis,\n\t\t\tfullsize: this.settings.fullsize,\n\t\t\tdirection: this.settings.direction,\n\t\t\tscale: this.settings.scale\n\t\t});\n\n\t\tthis.stage.attachTo(element);\n\n\t\t// Get this stage container div\n\t\tthis.container = this.stage.getContainer();\n\n\t\t// Views array methods\n\t\tthis.views = new Views(this.container);\n\n\t\t// Calculate Stage Size\n\t\tthis._bounds = this.bounds();\n\t\tthis._stageSize = this.stage.size();\n\n\t\t// Set the dimensions for views\n\t\tthis.viewSettings.width = this._stageSize.width;\n\t\tthis.viewSettings.height = this._stageSize.height;\n\n\t\t// Function to handle a resize event.\n\t\t// Will only attach if width and height are both fixed.\n\t\tthis.stage.onResize(this.onResized.bind(this));\n\n\t\tthis.stage.onOrientationChange(this.onOrientationChange.bind(this));\n\n\t\t// Add Event Listeners\n\t\tthis.addEventListeners();\n\n\t\t// Add Layout method\n\t\t// this.applyLayoutMethod();\n\t\tif (this.layout) {\n\t\t\tthis.updateLayout();\n\t\t}\n\n\t\tthis.rendered = true;\n\n\t}\n\n\taddEventListeners(){\n\t\tvar scroller;\n\n\t\twindow.addEventListener(\"unload\", function(e){\n\t\t\tthis.destroy();\n\t\t}.bind(this));\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tscroller.addEventListener(\"scroll\", this._onScroll);\n\t}\n\n\tremoveEventListeners(){\n\t\tvar scroller;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.removeEventListener(\"scroll\", this._onScroll);\n\t\tthis._onScroll = undefined;\n\t}\n\n\tdestroy(){\n\t\tclearTimeout(this.orientationTimeout);\n\t\tclearTimeout(this.resizeTimeout);\n\t\tclearTimeout(this.afterScrolled);\n\n\t\tthis.clear();\n\n\t\tthis.removeEventListeners();\n\n\t\tthis.stage.destroy();\n\n\t\tthis.rendered = false;\n\n\t\t/*\n\n\t\t\tclearTimeout(this.trimTimeout);\n\t\t\tif(this.settings.hidden) {\n\t\t\t\tthis.element.removeChild(this.wrapper);\n\t\t\t} else {\n\t\t\t\tthis.element.removeChild(this.container);\n\t\t\t}\n\t\t*/\n\t}\n\n\tonOrientationChange(e) {\n\t\tlet {orientation} = window;\n\n\t\tif(this.optsSettings.resizeOnOrientationChange) {\n\t\t\tthis.resize();\n\t\t}\n\n\t\t// Per ampproject:\n\t\t// In IOS 10.3, the measured size of an element is incorrect if the\n\t\t// element size depends on window size directly and the measurement\n\t\t// happens in window.resize event. Adding a timeout for correct\n\t\t// measurement. See https://github.com/ampproject/amphtml/issues/8479\n\t\tclearTimeout(this.orientationTimeout);\n\t\tthis.orientationTimeout = setTimeout(function(){\n\t\t\tthis.orientationTimeout = undefined;\n\n\t\t\tif(this.optsSettings.resizeOnOrientationChange) {\n\t\t\t\tthis.resize();\n\t\t\t}\n\n\t\t\tthis.emit(EVENTS.MANAGERS.ORIENTATION_CHANGE, orientation);\n\t\t}.bind(this), 500);\n\n\t}\n\n\tonResized(e) {\n\t\tthis.resize();\n\t}\n\n\tresize(width, height){\n\t\tlet stageSize = this.stage.size(width, height);\n\n\t\t// For Safari, wait for orientation to catch up\n\t\t// if the window is a square\n\t\tthis.winBounds = windowBounds();\n\t\tif (this.orientationTimeout &&\n\t\t\t\tthis.winBounds.width === this.winBounds.height) {\n\t\t\t// reset the stage size for next resize\n\t\t\tthis._stageSize = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._stageSize &&\n\t\t\t\tthis._stageSize.width === stageSize.width &&\n\t\t\t\tthis._stageSize.height === stageSize.height ) {\n\t\t\t// Size is the same, no need to resize\n\t\t\treturn;\n\t\t}\n\n\t\tthis._stageSize = stageSize;\n\n\t\tthis._bounds = this.bounds();\n\n\t\t// Clear current views\n\t\tthis.clear();\n\n\t\t// Update for new views\n\t\tthis.viewSettings.width = this._stageSize.width;\n\t\tthis.viewSettings.height = this._stageSize.height;\n\n\t\tthis.updateLayout();\n\n\t\tthis.emit(EVENTS.MANAGERS.RESIZED, {\n\t\t\twidth: this._stageSize.width,\n\t\t\theight: this._stageSize.height\n\t\t});\n\t}\n\n\tcreateView(section) {\n\t\treturn new this.View(section, this.viewSettings);\n\t}\n\n\tdisplay(section, target){\n\n\t\tvar displaying = new defer();\n\t\tvar displayed = displaying.promise;\n\n\t\t// Check if moving to target is needed\n\t\tif (target === section.href || isNumber(target)) {\n\t\t\ttarget = undefined;\n\t\t}\n\n\t\t// Check to make sure the section we want isn't already shown\n\t\tvar visible = this.views.find(section);\n\n\t\t// View is already shown, just move to correct location in view\n\t\tif(visible && section) {\n\t\t\tlet offset = visible.offset();\n\n\t\t\tif (this.settings.direction === \"ltr\") {\n\t\t\t\tthis.scrollTo(offset.left, offset.top, true);\n\t\t\t} else {\n\t\t\t\tlet width = visible.width();\n\t\t\t\tthis.scrollTo(offset.left + width, offset.top, true);\n\t\t\t}\n\n\t\t\tif(target) {\n\t\t\t\tlet offset = visible.locationOf(target);\n\t\t\t\tthis.moveTo(offset);\n\t\t\t}\n\n\t\t\tdisplaying.resolve();\n\t\t\treturn displayed;\n\t\t}\n\n\t\t// Hide all current views\n\t\tthis.clear();\n\n\t\tthis.add(section)\n\t\t\t.then(function(view){\n\n\t\t\t\t// Move to correct place within the section, if needed\n\t\t\t\tif(target) {\n\t\t\t\t\tlet offset = view.locationOf(target);\n\t\t\t\t\tthis.moveTo(offset);\n\t\t\t\t}\n\n\t\t\t}.bind(this), (err) => {\n\t\t\t\tdisplaying.reject(err);\n\t\t\t})\n\t\t\t.then(function(){\n\t\t\t\tvar next;\n\t\t\t\tif (this.layout.name === \"pre-paginated\" &&\n\t\t\t\t\t\tthis.layout.divisor > 1 && section.index > 0) {\n\t\t\t\t\t// First page (cover) should stand alone for pre-paginated books\n\t\t\t\t\tnext = section.next();\n\t\t\t\t\tif (next) {\n\t\t\t\t\t\treturn this.add(next);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\n\t\t\t\tthis.views.show();\n\n\t\t\t\tdisplaying.resolve();\n\n\t\t\t}.bind(this));\n\t\t// .then(function(){\n\t\t// \treturn this.hooks.display.trigger(view);\n\t\t// }.bind(this))\n\t\t// .then(function(){\n\t\t// \tthis.views.show();\n\t\t// }.bind(this));\n\t\treturn displayed;\n\t}\n\n\tafterDisplayed(view){\n\t\tthis.emit(EVENTS.MANAGERS.ADDED, view);\n\t}\n\n\tafterResized(view){\n\t\tthis.emit(EVENTS.MANAGERS.RESIZE, view.section);\n\t}\n\n\tmoveTo(offset){\n\t\tvar distX = 0,\n\t\t\t  distY = 0;\n\n\t\tif(!this.isPaginated) {\n\t\t\tdistY = offset.top;\n\t\t} else {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\n\t\t\tif (distX + this.layout.delta > this.container.scrollWidth) {\n\t\t\t\tdistX = this.container.scrollWidth - this.layout.delta;\n\t\t\t}\n\t\t}\n\t\tthis.scrollTo(distX, distY, true);\n\t}\n\n\tadd(section){\n\t\tvar view = this.createView(section);\n\n\t\tthis.views.append(view);\n\n\t\t// view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\n\t}\n\n\tappend(section){\n\t\tvar view = this.createView(section);\n\t\tthis.views.append(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\t}\n\n\tprepend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tthis.counter(bounds);\n\t\t});\n\n\t\tthis.views.prepend(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\t}\n\n\tcounter(bounds){\n\t\tif(this.settings.axis === \"vertical\") {\n\t\t\tthis.scrollBy(0, bounds.heightDelta, true);\n\t\t} else {\n\t\t\tthis.scrollBy(bounds.widthDelta, 0, true);\n\t\t}\n\n\t}\n\n\t// resizeView(view) {\n\t//\n\t// \tif(this.settings.globalLayoutProperties.layout === \"pre-paginated\") {\n\t// \t\tview.lock(\"both\", this.bounds.width, this.bounds.height);\n\t// \t} else {\n\t// \t\tview.lock(\"width\", this.bounds.width, this.bounds.height);\n\t// \t}\n\t//\n\t// };\n\n\tnext(){\n\t\tvar next;\n\t\tvar left;\n\n\t\tlet dir = this.settings.direction;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\" && (!dir || dir === \"ltr\")) {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft + this.container.offsetWidth + this.layout.delta;\n\n\t\t\tif(left <= this.container.scrollWidth) {\n\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\t\t} else if (this.isPaginated && this.settings.axis === \"horizontal\" && dir === \"rtl\") {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft;\n\n\t\t\tif(left > 0) {\n\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"vertical\") {\n\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\n\t\t\tlet top  = this.container.scrollTop + this.container.offsetHeight;\n\n\t\t\tif(top < this.container.scrollHeight) {\n\t\t\t\tthis.scrollBy(0, this.layout.height, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\n\t\t} else {\n\t\t\tnext = this.views.last().section.next();\n\t\t}\n\n\t\tif(next) {\n\t\t\tthis.clear();\n\n\t\t\treturn this.append(next)\n\t\t\t\t.then(function(){\n\t\t\t\t\tvar right;\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.divisor > 1) {\n\t\t\t\t\t\tright = next.next();\n\t\t\t\t\t\tif (right) {\n\t\t\t\t\t\t\treturn this.append(right);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind(this), (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t})\n\t\t\t\t.then(function(){\n\t\t\t\t\tthis.views.show();\n\t\t\t\t}.bind(this));\n\t\t}\n\n\n\t}\n\n\tprev(){\n\t\tvar prev;\n\t\tvar left;\n\t\tlet dir = this.settings.direction;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\" && (!dir || dir === \"ltr\")) {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft;\n\n\t\t\tif(left > 0) {\n\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"horizontal\" && dir === \"rtl\") {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft + this.container.offsetWidth + this.layout.delta;\n\n\t\t\tif(left <= this.container.scrollWidth) {\n\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"vertical\") {\n\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\n\t\t\tlet top = this.container.scrollTop;\n\n\t\t\tif(top > 0) {\n\t\t\t\tthis.scrollBy(0, -(this.layout.height), true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tprev = this.views.first().section.prev();\n\n\t\t}\n\n\t\tif(prev) {\n\t\t\tthis.clear();\n\n\t\t\treturn this.prepend(prev)\n\t\t\t\t.then(function(){\n\t\t\t\t\tvar left;\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.divisor > 1) {\n\t\t\t\t\t\tleft = prev.prev();\n\t\t\t\t\t\tif (left) {\n\t\t\t\t\t\t\treturn this.prepend(left);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind(this), (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t})\n\t\t\t\t.then(function(){\n\t\t\t\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\t\t\t\t\t\tif (this.settings.direction === \"rtl\") {\n\t\t\t\t\t\t\tthis.scrollTo(0, 0, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.scrollTo(this.container.scrollWidth - this.layout.delta, 0, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.views.show();\n\t\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcurrent(){\n\t\tvar visible = this.visible();\n\t\tif(visible.length){\n\t\t\t// Current is the last visible view\n\t\t\treturn visible[visible.length-1];\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear () {\n\n\t\t// this.q.clear();\n\n\t\tif (this.views) {\n\t\t\tthis.views.hide();\n\t\t\tthis.scrollTo(0,0, true);\n\t\t\tthis.views.clear();\n\t\t}\n\t}\n\n\tcurrentLocation(){\n\n\t\tif (this.settings.axis === \"vertical\") {\n\t\t\tthis.location = this.scrolledLocation();\n\t\t} else {\n\t\t\tthis.location = this.paginatedLocation();\n\t\t}\n\t\treturn this.location;\n\t}\n\n\tscrolledLocation() {\n\t\tlet visible = this.visible();\n\t\tlet container = this.container.getBoundingClientRect();\n\t\tlet pageHeight = (container.height < window.innerHeight) ? container.height : window.innerHeight;\n\n\t\tlet offset = 0;\n\t\tlet used = 0;\n\n\t\tif(this.settings.fullsize) {\n\t\t\toffset = window.scrollY;\n\t\t}\n\n\t\tlet sections = visible.map((view) => {\n\t\t\tlet {index, href} = view.section;\n\t\t\tlet position = view.position();\n\t\t\tlet height = view.height();\n\n\t\t\tlet startPos = offset + container.top - position.top + used;\n\t\t\tlet endPos = startPos + pageHeight - used;\n\t\t\tif (endPos > height) {\n\t\t\t\tendPos = height;\n\t\t\t\tused = (endPos - startPos);\n\t\t\t}\n\n\t\t\tlet totalPages = this.layout.count(height, pageHeight).pages;\n\n\t\t\tlet currPage = Math.ceil(startPos / pageHeight);\n\t\t\tlet pages = [];\n\t\t\tlet endPage = Math.ceil(endPos / pageHeight);\n\n\t\t\tpages = [];\n\t\t\tfor (var i = currPage; i <= endPage; i++) {\n\t\t\t\tlet pg = i + 1;\n\t\t\t\tpages.push(pg);\n\t\t\t}\n\n\t\t\tlet mapping = this.mapping.page(view.contents, view.section.cfiBase, startPos, endPos);\n\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\thref,\n\t\t\t\tpages,\n\t\t\t\ttotalPages,\n\t\t\t\tmapping\n\t\t\t};\n\t\t});\n\n\t\treturn sections;\n\t}\n\n\tpaginatedLocation(){\n\t\tlet visible = this.visible();\n\t\tlet container = this.container.getBoundingClientRect();\n\n\t\tlet left = 0;\n\t\tlet used = 0;\n\n\t\tif(this.settings.fullsize) {\n\t\t\tleft = window.scrollX;\n\t\t}\n\n\t\tlet sections = visible.map((view) => {\n\t\t\tlet {index, href} = view.section;\n\t\t\tlet offset = view.offset().left;\n\t\t\tlet position = view.position().left;\n\t\t\tlet width = view.width();\n\n\t\t\t// Find mapping\n\t\t\tlet start = left + container.left - position + used;\n\t\t\tlet end = start + this.layout.width - used;\n\n\t\t\tlet mapping = this.mapping.page(view.contents, view.section.cfiBase, start, end);\n\n\t\t\t// Find displayed pages\n\t\t\t//console.log(\"pre\", end, offset + width);\n\t\t\t// if (end > offset + width) {\n\t\t\t// \tend = offset + width;\n\t\t\t// \tused = this.layout.pageWidth;\n\t\t\t// }\n\t\t\t// console.log(\"post\", end);\n\n\t\t\tlet totalPages = this.layout.count(width).pages;\n\t\t\tlet startPage = Math.floor(start / this.layout.pageWidth);\n\t\t\tlet pages = [];\n\t\t\tlet endPage = Math.floor(end / this.layout.pageWidth);\n\n\t\t\t// start page should not be negative\n\t\t\tif (startPage < 0) {\n\t\t\t\tstartPage = 0;\n\t\t\t\tendPage = endPage + 1;\n\t\t\t}\n\n\t\t\t// Reverse page counts for rtl\n\t\t\tif (this.settings.direction === \"rtl\") {\n\t\t\t\tlet tempStartPage = startPage;\n\t\t\t\tstartPage = totalPages - endPage;\n\t\t\t\tendPage = totalPages - tempStartPage;\n\t\t\t}\n\n\n\t\t\tfor (var i = startPage + 1; i <= endPage; i++) {\n\t\t\t\tlet pg = i;\n\t\t\t\tpages.push(pg);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\thref,\n\t\t\t\tpages,\n\t\t\t\ttotalPages,\n\t\t\t\tmapping\n\t\t\t};\n\t\t});\n\n\t\treturn sections;\n\t}\n\n\tisVisible(view, offsetPrev, offsetNext, _container){\n\t\tvar position = view.position();\n\t\tvar container = _container || this.bounds();\n\n\t\tif(this.settings.axis === \"horizontal\" &&\n\t\t\tposition.right > container.left - offsetPrev &&\n\t\t\tposition.left < container.right + offsetNext) {\n\n\t\t\treturn true;\n\n\t\t} else if(this.settings.axis === \"vertical\" &&\n\t\t\tposition.bottom > container.top - offsetPrev &&\n\t\t\tposition.top < container.bottom + offsetNext) {\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tvisible(){\n\t\tvar container = this.bounds();\n\t\tvar views = this.views.displayed();\n\t\tvar viewsLength = views.length;\n\t\tvar visible = [];\n\t\tvar isVisible;\n\t\tvar view;\n\n\t\tfor (var i = 0; i < viewsLength; i++) {\n\t\t\tview = views[i];\n\t\t\tisVisible = this.isVisible(view, 0, 0, container);\n\n\t\t\tif(isVisible === true) {\n\t\t\t\tvisible.push(view);\n\t\t\t}\n\n\t\t}\n\t\treturn visible;\n\t}\n\n\tscrollBy(x, y, silent){\n\t\tlet dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n\t\tif(silent) {\n\t\t\tthis.ignore = true;\n\t\t}\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tif(x) this.container.scrollLeft += x * dir;\n\t\t\tif(y) this.container.scrollTop += y;\n\t\t} else {\n\t\t\twindow.scrollBy(x * dir, y * dir);\n\t\t}\n\t\tthis.scrolled = true;\n\t}\n\n\tscrollTo(x, y, silent){\n\t\tif(silent) {\n\t\t\tthis.ignore = true;\n\t\t}\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tthis.container.scrollLeft = x;\n\t\t\tthis.container.scrollTop = y;\n\t\t} else {\n\t\t\twindow.scrollTo(x,y);\n\t\t}\n\t\tthis.scrolled = true;\n\t}\n\n\tonScroll(){\n\t\tlet scrollTop;\n\t\tlet scrollLeft;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscrollTop = this.container.scrollTop;\n\t\t\tscrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscrollTop = window.scrollY;\n\t\t\tscrollLeft = window.scrollX;\n\t\t}\n\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.scrollLeft = scrollLeft;\n\n\t\tif(!this.ignore) {\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\t\ttop: scrollTop,\n\t\t\t\tleft: scrollLeft\n\t\t\t});\n\n\t\t\tclearTimeout(this.afterScrolled);\n\t\t\tthis.afterScrolled = setTimeout(function () {\n\t\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\t\ttop: this.scrollTop,\n\t\t\t\t\tleft: this.scrollLeft\n\t\t\t\t});\n\t\t\t}.bind(this), 20);\n\n\n\n\t\t} else {\n\t\t\tthis.ignore = false;\n\t\t}\n\n\t}\n\n\tbounds() {\n\t\tvar bounds;\n\n\t\tbounds = this.stage.bounds();\n\n\t\treturn bounds;\n\t}\n\n\tapplyLayout(layout) {\n\n\t\tthis.layout = layout;\n\t\tthis.updateLayout();\n\t\t // this.manager.layout(this.layout.format);\n\t}\n\n\tupdateLayout() {\n\n\t\tif (!this.stage) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._stageSize = this.stage.size();\n\n\t\tif(!this.isPaginated) {\n\t\t\tthis.layout.calculate(this._stageSize.width, this._stageSize.height);\n\t\t} else {\n\t\t\tthis.layout.calculate(\n\t\t\t\tthis._stageSize.width,\n\t\t\t\tthis._stageSize.height,\n\t\t\t\tthis.settings.gap\n\t\t\t);\n\n\t\t\t// Set the look ahead offset for what is visible\n\t\t\tthis.settings.offset = this.layout.delta;\n\n\t\t\t// this.stage.addStyleRules(\"iframe\", [{\"margin-right\" : this.layout.gap + \"px\"}]);\n\n\t\t}\n\n\t\t// Set the dimensions for views\n\t\tthis.viewSettings.width = this.layout.width;\n\t\tthis.viewSettings.height = this.layout.height;\n\n\t\tthis.setLayout(this.layout);\n\t}\n\n\tsetLayout(layout){\n\n\t\tthis.viewSettings.layout = layout;\n\n\t\tthis.mapping = new Mapping(layout.props, this.settings.direction, this.settings.axis);\n\n\t\tif(this.views) {\n\n\t\t\tthis.views.forEach(function(view){\n\t\t\t\tif (view) {\n\t\t\t\t\tview.setLayout(layout);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\n\t}\n\n\tupdateAxis(axis, forceUpdate){\n\n\t\tif (!this.isPaginated) {\n\t\t\taxis = \"vertical\";\n\t\t}\n\n\t\tif (!forceUpdate && axis === this.settings.axis) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.settings.axis = axis;\n\n\t\tthis.stage && this.stage.axis(axis);\n\n\t\tthis.viewSettings.axis = axis;\n\n\t\tif (this.mapping) {\n\t\t\tthis.mapping = new Mapping(this.layout.props, this.settings.direction, this.settings.axis);\n\t\t}\n\n\t\tif (this.layout) {\n\t\t\tif (axis === \"vertical\") {\n\t\t\t\tthis.layout.spread(\"none\");\n\t\t\t} else {\n\t\t\t\tthis.layout.spread(this.layout.settings.spread);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateFlow(flow){\n\t\tlet isPaginated = (flow === \"paginated\" || flow === \"auto\");\n\n\t\tthis.isPaginated = isPaginated;\n\n\t\tif (flow === \"scrolled-doc\" ||\n\t\t\t\tflow === \"scrolled-continuous\" ||\n\t\t\t\tflow === \"scrolled\") {\n\t\t\tthis.updateAxis(\"vertical\");\n\t\t} else {\n\t\t\tthis.updateAxis(\"horizontal\");\n\t\t}\n\n\t\tthis.viewSettings.flow = flow;\n\n\t\tif (!this.settings.overflow) {\n\t\t\tthis.overflow = isPaginated ? \"hidden\" : \"auto\";\n\t\t} else {\n\t\t\tthis.overflow = this.settings.overflow;\n\t\t}\n\n\t\tthis.stage && this.stage.overflow(this.overflow);\n\n\t\tthis.updateLayout();\n\n\t}\n\n\tgetContents(){\n\t\tvar contents = [];\n\t\tif (!this.views) {\n\t\t\treturn contents;\n\t\t}\n\t\tthis.views.forEach(function(view){\n\t\t\tconst viewContents = view && view.contents;\n\t\t\tif (viewContents) {\n\t\t\t\tcontents.push(viewContents);\n\t\t\t}\n\t\t});\n\t\treturn contents;\n\t}\n\n\tdirection(dir=\"ltr\") {\n\t\tthis.settings.direction = dir;\n\n\t\tthis.stage && this.stage.direction(dir);\n\n\t\tthis.viewSettings.direction = dir;\n\n\t\tthis.updateLayout();\n\t}\n\n\tisRendered() {\n\t\treturn this.rendered;\n\t}\n\n\tscale(s) {\n\t\tif ( s == null ) { s = 1.0; }\n\t\tthis.settings.scale = s;\n\n\t\tif (this.stage) {\n\t\t\tthis.stage.scale(s);\n\t\t}\n\t}\n}\n\n//-- Enable binding events to Manager\nEventEmitter(DefaultViewManager.prototype);\n\nexport default DefaultViewManager;\n","import {extend, defer, requestAnimationFrame, prefixed} from \"../../utils/core\";\nimport { EVENTS, DOM_EVENTS } from \"../../utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n// easing equations from https://github.com/danro/easing-js/blob/master/easing.js\nconst PI_D2 = (Math.PI / 2);\nconst EASING_EQUATIONS = {\n\t\teaseOutSine: function (pos) {\n\t\t\t\treturn Math.sin(pos * PI_D2);\n\t\t},\n\t\teaseInOutSine: function (pos) {\n\t\t\t\treturn (-0.5 * (Math.cos(Math.PI * pos) - 1));\n\t\t},\n\t\teaseInOutQuint: function (pos) {\n\t\t\t\tif ((pos /= 0.5) < 1) {\n\t\t\t\t\t\treturn 0.5 * Math.pow(pos, 5);\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (Math.pow((pos - 2), 5) + 2);\n\t\t},\n\t\teaseInCubic: function(pos) {\n\t\t\treturn Math.pow(pos, 3);\n  \t}\n};\n\nclass Snap {\n\tconstructor(manager, options) {\n\n\t\tthis.settings = extend({\n\t\t\tduration: 80,\n\t\t\tminVelocity: 0.2,\n\t\t\tminDistance: 10,\n\t\t\teasing: EASING_EQUATIONS['easeInCubic']\n\t\t}, options || {});\n\n\t\tthis.supportsTouch = this.supportsTouch();\n\n\t\tif (this.supportsTouch) {\n\t\t\tthis.setup(manager);\n\t\t}\n\t}\n\n\tsetup(manager) {\n\t\tthis.manager = manager;\n\n\t\tthis.layout = this.manager.layout;\n\n\t\tthis.fullsize = this.manager.settings.fullsize;\n\t\tif (this.fullsize) {\n\t\t\tthis.element = this.manager.stage.element;\n\t\t\tthis.scroller = window;\n\t\t\tthis.disableScroll();\n\t\t} else {\n\t\t\tthis.element = this.manager.stage.container;\n\t\t\tthis.scroller = this.element;\n\t\t\tthis.element.style[\"WebkitOverflowScrolling\"] = \"touch\";\n\t\t}\n\n\t\t// this.overflow = this.manager.overflow;\n\n\t\t// set lookahead offset to page width\n\t\tthis.manager.settings.offset = this.layout.width;\n\t\tthis.manager.settings.afterScrolledTimeout = this.settings.duration * 2;\n\n\t\tthis.isVertical = this.manager.settings.axis === \"vertical\";\n\n\t\t// disable snapping if not paginated or axis in not horizontal\n\t\tif (!this.manager.isPaginated || this.isVertical) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\t\tthis.resizeCanceler = false;\n\t\tthis.snapping = false;\n\n\n\t\tthis.scrollLeft;\n\t\tthis.scrollTop;\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\n\t\tthis.addListeners();\n\t}\n\n\tsupportsTouch() {\n\t\tif (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdisableScroll() {\n\t\tthis.element.style.overflow = \"hidden\";\n\t}\n\n\tenableScroll() {\n\t\tthis.element.style.overflow = \"\";\n\t}\n\n\taddListeners() {\n\t\tthis._onResize = this.onResize.bind(this);\n\t\twindow.addEventListener('resize', this._onResize);\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tthis.scroller.addEventListener('scroll', this._onScroll);\n\n\t\tthis._onTouchStart = this.onTouchStart.bind(this);\n\t\tthis.scroller.addEventListener('touchstart', this._onTouchStart, { passive: true });\n\t\tthis.on('touchstart', this._onTouchStart);\n\n\t\tthis._onTouchMove = this.onTouchMove.bind(this);\n\t\tthis.scroller.addEventListener('touchmove', this._onTouchMove, { passive: true });\n\t\tthis.on('touchmove', this._onTouchMove);\n\n\t\tthis._onTouchEnd = this.onTouchEnd.bind(this);\n\t\tthis.scroller.addEventListener('touchend', this._onTouchEnd, { passive: true });\n\t\tthis.on('touchend', this._onTouchEnd);\n\n\t\tthis._afterDisplayed = this.afterDisplayed.bind(this);\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n\t}\n\n\tremoveListeners() {\n\t\twindow.removeEventListener('resize', this._onResize);\n\t\tthis._onResize = undefined;\n\n\t\tthis.scroller.removeEventListener('scroll', this._onScroll);\n\t\tthis._onScroll = undefined;\n\n\t\tthis.scroller.removeEventListener('touchstart', this._onTouchStart, { passive: true });\n\t\tthis.off('touchstart', this._onTouchStart);\n\t\tthis._onTouchStart = undefined;\n\n\t\tthis.scroller.removeEventListener('touchmove', this._onTouchMove, { passive: true });\n\t\tthis.off('touchmove', this._onTouchMove);\n\t\tthis._onTouchMove = undefined;\n\n\t\tthis.scroller.removeEventListener('touchend', this._onTouchEnd, { passive: true });\n\t\tthis.off('touchend', this._onTouchEnd);\n\t\tthis._onTouchEnd = undefined;\n\n\t\tthis.manager.off(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n\t\tthis._afterDisplayed = undefined;\n\t}\n\n\tafterDisplayed(view) {\n\t\tlet contents = view.contents;\n\t\t[\"touchstart\", \"touchmove\", \"touchend\"].forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\t}\n\n\ttriggerViewEvent(e, contents){\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\tonScroll(e) {\n\t\tthis.scrollLeft = this.fullsize ? window.scrollX : this.scroller.scrollLeft;\n\t\tthis.scrollTop = this.fullsize ? window.scrollY : this.scroller.scrollTop;\n\t}\n\n\tonResize(e) {\n\t\tthis.resizeCanceler = true;\n\t}\n\n\tonTouchStart(e) {\n\t\tlet { screenX, screenY } = e.touches[0];\n\n\t\tif (this.fullsize) {\n\t\t\tthis.enableScroll();\n\t\t}\n\n\t\tthis.touchCanceler = true;\n\n\t\tif (!this.startTouchX) {\n\t\t\tthis.startTouchX = screenX;\n\t\t\tthis.startTouchY = screenY;\n\t\t\tthis.startTime = this.now();\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = this.now();\n\t}\n\n\tonTouchMove(e) {\n\t\tlet { screenX, screenY } = e.touches[0];\n\t\tlet deltaY = Math.abs(screenY - this.endTouchY);\n\n\t\tthis.touchCanceler = true;\n\n\n\t\tif (!this.fullsize && deltaY < 10) {\n\t\t\tthis.element.scrollLeft -= screenX - this.endTouchX;\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = this.now();\n\t}\n\n\tonTouchEnd(e) {\n\t\tif (this.fullsize) {\n\t\t\tthis.disableScroll();\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\n\t\tlet swipped = this.wasSwiped();\n\n\t\tif (swipped !== 0) {\n\t\t\tthis.snap(swipped);\n\t\t} else {\n\t\t\tthis.snap();\n\t\t}\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\t}\n\n\twasSwiped() {\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet distance = (this.endTouchX - this.startTouchX);\n\t\tlet absolute = Math.abs(distance);\n\t\tlet time = this.endTime - this.startTime;\n\t\tlet velocity = (distance / time);\n\t\tlet minVelocity = this.settings.minVelocity;\n\n\t\tif (absolute <= this.settings.minDistance || absolute >= snapWidth) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (velocity > minVelocity) {\n\t\t\t// previous\n\t\t\treturn -1;\n\t\t} else if (velocity < -minVelocity) {\n\t\t\t// next\n\t\t\treturn 1;\n\t\t}\n\t}\n\n\tneedsSnap() {\n\t\tlet left = this.scrollLeft;\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\treturn (left % snapWidth) !== 0;\n\t}\n\n\tsnap(howMany=0) {\n\t\tlet left = this.scrollLeft;\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet snapTo = Math.round(left / snapWidth) * snapWidth;\n\n\t\tif (howMany) {\n\t\t\tsnapTo += (howMany * snapWidth);\n\t\t}\n\n\t\treturn this.smoothScrollTo(snapTo);\n\t}\n\n\tsmoothScrollTo(destination) {\n\t\tconst deferred = new defer();\n\t\tconst start = this.scrollLeft;\n\t\tconst startTime = this.now();\n\n\t\tconst duration = this.settings.duration;\n\t\tconst easing = this.settings.easing;\n\n\t\tthis.snapping = true;\n\n\t\t// add animation loop\n\t\tfunction tick() {\n\t\t\tconst now = this.now();\n\t\t\tconst time = Math.min(1, ((now - startTime) / duration));\n\t\t\tconst timeFunction = easing(time);\n\n\n\t\t\tif (this.touchCanceler || this.resizeCanceler) {\n\t\t\t\tthis.resizeCanceler = false;\n\t\t\t\tthis.snapping = false;\n\t\t\t\tdeferred.resolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (time < 1) {\n\t\t\t\t\twindow.requestAnimationFrame(tick.bind(this));\n\t\t\t\t\tthis.scrollTo(start + ((destination - start) * time), 0);\n\t\t\t} else {\n\t\t\t\t\tthis.scrollTo(destination, 0);\n\t\t\t\t\tthis.snapping = false;\n\t\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t}\n\n\t\ttick.call(this);\n\n\t\treturn deferred.promise;\n\t}\n\n\tscrollTo(left=0, top=0) {\n\t\tif (this.fullsize) {\n\t\t\twindow.scroll(left, top);\n\t\t} else {\n\t\t\tthis.scroller.scrollLeft = left;\n\t\t\tthis.scroller.scrollTop = top;\n\t\t}\n\t}\n\n\tnow() {\n\t\treturn ('now' in window.performance) ? performance.now() : new Date().getTime();\n\t}\n\n\tdestroy() {\n\t\tif (!this.scroller) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.fullsize) {\n\t\t\tthis.enableScroll();\n\t\t}\n\n\t\tthis.removeListeners();\n\n\t\tthis.scroller = undefined;\n\t}\n}\n\nEventEmitter(Snap.prototype);\n\nexport default Snap;\n","import {extend, defer, requestAnimationFrame} from \"../../utils/core\";\nimport DefaultViewManager from \"../default\";\nimport Snap from \"../helpers/snap\";\nimport { EVENTS } from \"../../utils/constants\";\nimport debounce from \"lodash/debounce\";\n\nclass ContinuousViewManager extends DefaultViewManager {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.name = \"continuous\";\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\tinfinite: true,\n\t\t\toverflow: undefined,\n\t\t\taxis: undefined,\n\t\t\tflow: \"scrolled\",\n\t\t\toffset: 500,\n\t\t\toffsetDelta: 250,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tsnap: false,\n\t\t\tafterScrolledTimeout: 10\n\t\t});\n\n\t\textend(this.settings, options.settings || {});\n\n\t\t// Gap can be 0, but defaults doesn't handle that\n\t\tif (options.settings.gap != \"undefined\" && options.settings.gap === 0) {\n\t\t\tthis.settings.gap = options.settings.gap;\n\t\t}\n\n\t\tthis.viewSettings = {\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\taxis: this.settings.axis,\n\t\t\tflow: this.settings.flow,\n\t\t\tlayout: this.layout,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tforceEvenPages: false\n\t\t};\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\n\tdisplay(section, target){\n\t\treturn DefaultViewManager.prototype.display.call(this, section, target)\n\t\t\t.then(function () {\n\t\t\t\treturn this.fill();\n\t\t\t}.bind(this));\n\t}\n\n\tfill(_full){\n\t\tvar full = _full || new defer();\n\n\t\tthis.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t}).then((result) => {\n\t\t\tif (result) {\n\t\t\t\tthis.fill(full);\n\t\t\t} else {\n\t\t\t\tfull.resolve();\n\t\t\t}\n\t\t});\n\n\t\treturn full.promise;\n\t}\n\n\tmoveTo(offset){\n\t\t// var bounds = this.stage.bounds();\n\t\t// var dist = Math.floor(offset.top / bounds.height) * bounds.height;\n\t\tvar distX = 0,\n\t\t\t\tdistY = 0;\n\n\t\tvar offsetX = 0,\n\t\t\t\toffsetY = 0;\n\n\t\tif(!this.isPaginated) {\n\t\t\tdistY = offset.top;\n\t\t\toffsetY = offset.top+this.settings.offsetDelta;\n\t\t} else {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\t\t\toffsetX = distX+this.settings.offsetDelta;\n\t\t}\n\n\t\tif (distX > 0 || distY > 0) {\n\t\t\tthis.scrollBy(distX, distY, true);\n\t\t}\n\t}\n\n\tafterResized(view){\n\t\tthis.emit(EVENTS.MANAGERS.RESIZE, view.section);\n\t}\n\n\t// Remove Previous Listeners if present\n\tremoveShownListeners(view){\n\n\t\t// view.off(\"shown\", this.afterDisplayed);\n\t\t// view.off(\"shown\", this.afterDisplayedAbove);\n\t\tview.onDisplayed = function(){};\n\n\t}\n\n\tadd(section){\n\t\tvar view = this.createView(section);\n\n\t\tthis.views.append(view);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\t// view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\treturn view.display(this.request);\n\t}\n\n\tappend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tthis.views.append(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tprepend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tthis.counter(bounds);\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tthis.views.prepend(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tcounter(bounds){\n\t\tif(this.settings.axis === \"vertical\") {\n\t\t\tthis.scrollBy(0, bounds.heightDelta, true);\n\t\t} else {\n\t\t\tthis.scrollBy(bounds.widthDelta, 0, true);\n\t\t}\n\n\t}\n\n\tupdate(_offset){\n\t\tvar container = this.bounds();\n\t\tvar views = this.views.all();\n\t\tvar viewsLength = views.length;\n\t\tvar visible = [];\n\t\tvar offset = typeof _offset != \"undefined\" ? _offset : (this.settings.offset || 0);\n\t\tvar isVisible;\n\t\tvar view;\n\n\t\tvar updating = new defer();\n\t\tvar promises = [];\n\t\tfor (var i = 0; i < viewsLength; i++) {\n\t\t\tview = views[i];\n\n\t\t\tisVisible = this.isVisible(view, offset, offset, container);\n\n\t\t\tif(isVisible === true) {\n\t\t\t\t// console.log(\"visible \" + view.index);\n\n\t\t\t\tif (!view.displayed) {\n\t\t\t\t\tlet displayed = view.display(this.request)\n\t\t\t\t\t\t.then(function (view) {\n\t\t\t\t\t\t\tview.show();\n\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t\tview.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\tpromises.push(displayed);\n\t\t\t\t} else {\n\t\t\t\t\tview.show();\n\t\t\t\t}\n\t\t\t\tvisible.push(view);\n\t\t\t} else {\n\t\t\t\tthis.q.enqueue(view.destroy.bind(view));\n\t\t\t\t// console.log(\"hidden \" + view.index);\n\n\t\t\t\tclearTimeout(this.trimTimeout);\n\t\t\t\tthis.trimTimeout = setTimeout(function(){\n\t\t\t\t\tthis.q.enqueue(this.trim.bind(this));\n\t\t\t\t}.bind(this), 250);\n\t\t\t}\n\n\t\t}\n\n\t\tif(promises.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tupdating.reject(err);\n\t\t\t\t});\n\t\t} else {\n\t\t\tupdating.resolve();\n\t\t\treturn updating.promise;\n\t\t}\n\n\t}\n\n\tcheck(_offsetLeft, _offsetTop){\n\t\tvar checking = new defer();\n\t\tvar newViews = [];\n\n\t\tvar horizontal = (this.settings.axis === \"horizontal\");\n\t\tvar delta = this.settings.offset || 0;\n\n\t\tif (_offsetLeft && horizontal) {\n\t\t\tdelta = _offsetLeft;\n\t\t}\n\n\t\tif (_offsetTop && !horizontal) {\n\t\t\tdelta = _offsetTop;\n\t\t}\n\n\t\tvar bounds = this._bounds; // bounds saved this until resize\n\n\t\tlet rtl = this.settings.direction === \"rtl\";\n\t\tlet dir = horizontal && rtl ? -1 : 1; //RTL reverses scrollTop\n\n\t\tvar offset = horizontal ? this.scrollLeft : this.scrollTop * dir;\n\t\tvar visibleLength = horizontal ? Math.floor(bounds.width) : bounds.height;\n\t\tvar contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n\n\t\tlet prepend = () => {\n\t\t\tlet first = this.views.first();\n\t\t\tlet prev = first && first.section.prev();\n\n\t\t\tif(prev) {\n\t\t\t\tnewViews.push(this.prepend(prev));\n\t\t\t}\n\t\t};\n\n\t\tlet append = () => {\n\t\t\tlet last = this.views.last();\n\t\t\tlet next = last && last.section.next();\n\n\t\t\tif(next) {\n\t\t\t\tnewViews.push(this.append(next));\n\t\t\t}\n\n\t\t};\n\n\t\tif (offset + visibleLength + delta >= contentLength) {\n\t\t\tif (horizontal && rtl) {\n\t\t\t\tprepend();\n\t\t\t} else {\n\t\t\t\tappend();\n\t\t\t}\n\t\t}\n\n\t\tif (offset - delta < 0 ) {\n\t\t\tif (horizontal && rtl) {\n\t\t\t\tappend();\n\t\t\t} else {\n\t\t\t\tprepend();\n\t\t\t}\n\t\t}\n\n\t\tlet promises = newViews.map((view) => {\n\t\t\treturn view.displayed;\n\t\t});\n\n\t\tif(newViews.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.props.spread) {\n\t\t\t\t\t\treturn this.check();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\t// Check to see if anything new is on screen after rendering\n\t\t\t\t\treturn this.update(delta);\n\t\t\t\t}, (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.q.enqueue(function(){\n\t\t\t\tthis.update();\n\t\t\t}.bind(this));\n\t\t\tchecking.resolve(false);\n\t\t\treturn checking.promise;\n\t\t}\n\n\n\t}\n\n\ttrim(){\n\t\tvar task = new defer();\n\t\tvar displayed = this.views.displayed();\n\t\tvar first = displayed[0];\n\t\tvar last = displayed[displayed.length-1];\n\t\tvar firstIndex = this.views.indexOf(first);\n\t\tvar lastIndex = this.views.indexOf(last);\n\t\tvar above = this.views.slice(0, firstIndex);\n\t\tvar below = this.views.slice(lastIndex+1);\n\n\t\t// Erase all but last above\n\t\tfor (var i = 0; i < above.length-1; i++) {\n\t\t\tthis.erase(above[i], above);\n\t\t}\n\n\t\t// Erase all except first below\n\t\tfor (var j = 1; j < below.length; j++) {\n\t\t\tthis.erase(below[j]);\n\t\t}\n\n\t\ttask.resolve();\n\t\treturn task.promise;\n\t}\n\n\terase(view, above){ //Trim\n\n\t\tvar prevTop;\n\t\tvar prevLeft;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tprevTop = this.container.scrollTop;\n\t\t\tprevLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tprevTop = window.scrollY;\n\t\t\tprevLeft = window.scrollX;\n\t\t}\n\n\t\tvar bounds = view.bounds();\n\n\t\tthis.views.remove(view);\n\n\t\tif(above) {\n\t\t\tif(this.settings.axis === \"vertical\") {\n\t\t\t\tthis.scrollTo(0, prevTop - bounds.height, true);\n\t\t\t} else {\n\t\t\t\tthis.scrollTo(prevLeft - Math.floor(bounds.width), 0, true);\n\t\t\t}\n\t\t}\n\n\t}\n\n\taddEventListeners(stage){\n\n\t\twindow.addEventListener(\"unload\", function(e){\n\t\t\tthis.ignore = true;\n\t\t\t// this.scrollTo(0,0);\n\t\t\tthis.destroy();\n\t\t}.bind(this));\n\n\t\tthis.addScrollListeners();\n\n\t\tif (this.isPaginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap && (typeof this.settings.snap === \"object\") && this.settings.snap);\n\t\t}\n\t}\n\n\taddScrollListeners() {\n\t\tvar scroller;\n\n\t\tthis.tick = requestAnimationFrame;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tthis.prevScrollTop = this.container.scrollTop;\n\t\t\tthis.prevScrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tthis.prevScrollTop = window.scrollY;\n\t\t\tthis.prevScrollLeft = window.scrollX;\n\t\t}\n\n\t\tthis.scrollDeltaVert = 0;\n\t\tthis.scrollDeltaHorz = 0;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t\tthis.scrollTop = window.scrollY;\n\t\t\tthis.scrollLeft = window.scrollX;\n\t\t}\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tscroller.addEventListener(\"scroll\", this._onScroll);\n\t\tthis._scrolled = debounce(this.scrolled.bind(this), 30);\n\t\t// this.tick.call(window, this.onScroll.bind(this));\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tremoveEventListeners(){\n\t\tvar scroller;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.removeEventListener(\"scroll\", this._onScroll);\n\t\tthis._onScroll = undefined;\n\t}\n\n\tonScroll(){\n\t\tlet scrollTop;\n\t\tlet scrollLeft;\n\t\tlet dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscrollTop = this.container.scrollTop;\n\t\t\tscrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscrollTop = window.scrollY * dir;\n\t\t\tscrollLeft = window.scrollX * dir;\n\t\t}\n\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.scrollLeft = scrollLeft;\n\n\t\tif(!this.ignore) {\n\n\t\t\tthis._scrolled();\n\n\t\t} else {\n\t\t\tthis.ignore = false;\n\t\t}\n\n\t\tthis.scrollDeltaVert += Math.abs(scrollTop-this.prevScrollTop);\n\t\tthis.scrollDeltaHorz += Math.abs(scrollLeft-this.prevScrollLeft);\n\n\t\tthis.prevScrollTop = scrollTop;\n\t\tthis.prevScrollLeft = scrollLeft;\n\n\t\tclearTimeout(this.scrollTimeout);\n\t\tthis.scrollTimeout = setTimeout(function(){\n\t\t\tthis.scrollDeltaVert = 0;\n\t\t\tthis.scrollDeltaHorz = 0;\n\t\t}.bind(this), 150);\n\n\t\tclearTimeout(this.afterScrolled);\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tscrolled() {\n\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\n\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\ttop: this.scrollTop,\n\t\t\tleft: this.scrollLeft\n\t\t});\n\n\t\tclearTimeout(this.afterScrolled);\n\t\tthis.afterScrolled = setTimeout(function () {\n\n\t\t\t// Don't report scroll if we are about the snap\n\t\t\tif (this.snapper && this.snapper.supportsTouch && this.snapper.needsSnap()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\ttop: this.scrollTop,\n\t\t\t\tleft: this.scrollLeft\n\t\t\t});\n\n\t\t}.bind(this), this.settings.afterScrolledTimeout);\n\t}\n\n\tnext(){\n\n\t\tlet dir = this.settings.direction;\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\t}\n\n\tprev(){\n\n\t\tlet dir = this.settings.direction;\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(-delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, -this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\t}\n\n\t// updateAxis(axis, forceUpdate){\n\t//\n\t// \tsuper.updateAxis(axis, forceUpdate);\n\t//\n\t// \tif (axis === \"vertical\") {\n\t// \t\tthis.settings.infinite = true;\n\t// \t} else {\n\t// \t\tthis.settings.infinite = false;\n\t// \t}\n\t// }\n\n\tupdateFlow(flow){\n\t\tif (this.rendered && this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t\tthis.snapper = undefined;\n\t\t}\n\n\t\tsuper.updateFlow(flow);\n\n\t\tif (this.rendered && this.isPaginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap && (typeof this.settings.snap === \"object\") && this.settings.snap);\n\t\t}\n\t}\n\n\tdestroy(){\n\t\tsuper.destroy();\n\n\t\tif (this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t}\n\t}\n\n}\n\nexport default ContinuousViewManager;\n","import EventEmitter from \"event-emitter\";\nimport { extend, defer, isFloat } from \"./utils/core\";\nimport Hook from \"./utils/hook\";\nimport EpubCFI from \"./epubcfi\";\nimport Queue from \"./utils/queue\";\nimport Layout from \"./layout\";\n// import Mapping from \"./mapping\";\nimport Themes from \"./themes\";\nimport Contents from \"./contents\";\nimport Annotations from \"./annotations\";\nimport { EVENTS, DOM_EVENTS } from \"./utils/constants\";\n\n// Default Views\nimport IframeView from \"./managers/views/iframe\";\n\n// Default View Managers\nimport DefaultViewManager from \"./managers/default/index\";\nimport ContinuousViewManager from \"./managers/continuous/index\";\n\n/**\n * Displays an Epub as a series of Views for each Section.\n * Requires Manager and View class to handle specifics of rendering\n * the section content.\n * @class\n * @param {Book} book\n * @param {object} [options]\n * @param {number} [options.width]\n * @param {number} [options.height]\n * @param {string} [options.ignoreClass] class for the cfi parser to ignore\n * @param {string | function | object} [options.manager='default']\n * @param {string | function} [options.view='iframe']\n * @param {string} [options.layout] layout to force\n * @param {string} [options.spread] force spread value\n * @param {number} [options.minSpreadWidth] overridden by spread: none (never) / both (always)\n * @param {string} [options.stylesheet] url of stylesheet to be injected\n * @param {boolean} [options.resizeOnOrientationChange] false to disable orientation events\n * @param {string} [options.script] url of script to be injected\n * @param {boolean | object} [options.snap=false] use snap scrolling\n */\nclass Rendition {\n\tconstructor(book, options) {\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\twidth: null,\n\t\t\theight: null,\n\t\t\tignoreClass: \"\",\n\t\t\tmanager: \"default\",\n\t\t\tview: \"iframe\",\n\t\t\tflow: null,\n\t\t\tlayout: null,\n\t\t\tspread: null,\n\t\t\tminSpreadWidth: 800,\n\t\t\tstylesheet: null,\n\t\t\tresizeOnOrientationChange: true,\n\t\t\tscript: null,\n\t\t\tsnap: false\n\t\t});\n\n\t\textend(this.settings, options);\n\n\t\tif (typeof(this.settings.manager) === \"object\") {\n\t\t\tthis.manager = this.settings.manager;\n\t\t}\n\n\t\tthis.book = book;\n\n\t\t/**\n\t\t * Adds Hook methods to the Rendition prototype\n\t\t * @member {object} hooks\n\t\t * @property {Hook} hooks.content\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.hooks = {};\n\t\tthis.hooks.display = new Hook(this);\n\t\tthis.hooks.serialize = new Hook(this);\n\t\tthis.hooks.content = new Hook(this);\n\t\tthis.hooks.unloaded = new Hook(this);\n\t\tthis.hooks.layout = new Hook(this);\n\t\tthis.hooks.render = new Hook(this);\n\t\tthis.hooks.show = new Hook(this);\n\n\t\tthis.hooks.content.register(this.handleLinks.bind(this));\n\t\tthis.hooks.content.register(this.passEvents.bind(this));\n\t\tthis.hooks.content.register(this.adjustImages.bind(this));\n\n\t\tthis.injected = {};\n\t\tthis.injected['identifier'] = this.injectIdentifier.bind(this);\n\t\tthis.book.spine.hooks.content.register(this.injected['identifier']);\n\n\t\tif (this.settings.stylesheet) {\n\t\t\tthis.injected['stylesheet'] = this.injectStylesheet.bind(this);\n\t\t\tthis.book.spine.hooks.content.register(this.injected['stylesheet']);\n\t\t}\n\n\t\tif (this.settings.script) {\n\t\t\tthis.injected['script'] = this.injectScript.bind(this);\n\t\t\tthis.book.spine.hooks.content.register(this.injected['script']);\n\t\t}\n\n\t\t/**\n\t\t * @member {Themes} themes\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.themes = new Themes(this);\n\n\t\t/**\n\t\t * @member {Annotations} annotations\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.annotations = new Annotations(this);\n\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.q = new Queue(this);\n\n\t\t/**\n\t\t * A Rendered Location Range\n\t\t * @typedef location\n\t\t * @type {Object}\n\t\t * @property {object} start\n\t\t * @property {string} start.index\n\t\t * @property {string} start.href\n\t\t * @property {object} start.displayed\n\t\t * @property {EpubCFI} start.cfi\n\t\t * @property {number} start.location\n\t\t * @property {number} start.percentage\n\t\t * @property {number} start.displayed.page\n\t\t * @property {number} start.displayed.total\n\t\t * @property {object} end\n\t\t * @property {string} end.index\n\t\t * @property {string} end.href\n\t\t * @property {object} end.displayed\n\t\t * @property {EpubCFI} end.cfi\n\t\t * @property {number} end.location\n\t\t * @property {number} end.percentage\n\t\t * @property {number} end.displayed.page\n\t\t * @property {number} end.displayed.total\n\t\t * @property {boolean} atStart\n\t\t * @property {boolean} atEnd\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.location = undefined;\n\n\t\t// Hold queue until book is opened\n\t\tthis.q.enqueue(this.book.opened);\n\n\t\tthis.starting = new defer();\n\t\t/**\n\t\t * @member {promise} started returns after the rendition has started\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.started = this.starting.promise;\n\t\t// Block the queue until rendering is started\n\t\tthis.q.enqueue(this.start);\n\t}\n\n\t/**\n\t * Set the manager function\n\t * @param {function} manager\n\t */\n\tsetManager(manager) {\n\t\tthis.manager = manager;\n\t}\n\n\t/**\n\t * Require the manager from passed string, or as a class function\n\t * @param  {string|object} manager [description]\n\t * @return {method}\n\t */\n\trequireManager(manager) {\n\t\tvar viewManager;\n\n\t\t// If manager is a string, try to load from imported managers\n\t\tif (typeof manager === \"string\" && manager === \"default\") {\n\t\t\tviewManager = DefaultViewManager;\n\t\t} else if (typeof manager === \"string\" && manager === \"continuous\") {\n\t\t\tviewManager = ContinuousViewManager;\n\t\t} else {\n\t\t\t// otherwise, assume we were passed a class function\n\t\t\tviewManager = manager;\n\t\t}\n\n\t\treturn viewManager;\n\t}\n\n\t/**\n\t * Require the view from passed string, or as a class function\n\t * @param  {string|object} view\n\t * @return {view}\n\t */\n\trequireView(view) {\n\t\tvar View;\n\n\t\t// If view is a string, try to load from imported views,\n\t\tif (typeof view == \"string\" && view === \"iframe\") {\n\t\t\tView = IframeView;\n\t\t} else {\n\t\t\t// otherwise, assume we were passed a class function\n\t\t\tView = view;\n\t\t}\n\n\t\treturn View;\n\t}\n\n\t/**\n\t * Start the rendering\n\t * @return {Promise} rendering has started\n\t */\n\tstart(){\n\n\t\tif(!this.manager) {\n\t\t\tthis.ViewManager = this.requireManager(this.settings.manager);\n\t\t\tthis.View = this.requireView(this.settings.view);\n\n\t\t\tthis.manager = new this.ViewManager({\n\t\t\t\tview: this.View,\n\t\t\t\tqueue: this.q,\n\t\t\t\trequest: this.book.load.bind(this.book),\n\t\t\t\tsettings: this.settings\n\t\t\t});\n\t\t}\n\n\t\tthis.direction(this.book.package.metadata.direction);\n\n\t\t// Parse metadata to get layout props\n\t\tthis.settings.globalLayoutProperties = this.determineLayoutProperties(this.book.package.metadata);\n\n\t\tthis.flow(this.settings.globalLayoutProperties.flow);\n\n\t\tthis.layout(this.settings.globalLayoutProperties);\n\n\t\t// Listen for displayed views\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this.afterDisplayed.bind(this));\n\t\tthis.manager.on(EVENTS.MANAGERS.REMOVED, this.afterRemoved.bind(this));\n\n\t\t// Listen for resizing\n\t\tthis.manager.on(EVENTS.MANAGERS.RESIZED, this.onResized.bind(this));\n\n\t\t// Listen for rotation\n\t\tthis.manager.on(EVENTS.MANAGERS.ORIENTATION_CHANGE, this.onOrientationChange.bind(this));\n\n\t\t// Listen for scroll changes\n\t\tthis.manager.on(EVENTS.MANAGERS.SCROLLED, this.reportLocation.bind(this));\n\n\t\t/**\n\t\t * Emit that rendering has started\n\t\t * @event started\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.STARTED);\n\n\t\t// Start processing queue\n\t\tthis.starting.resolve();\n\t}\n\n\t/**\n\t * Call to attach the container to an element in the dom\n\t * Container must be attached before rendering can begin\n\t * @param  {element} element to attach to\n\t * @return {Promise}\n\t */\n\tattachTo(element){\n\n\t\treturn this.q.enqueue(function () {\n\n\t\t\t// Start rendering\n\t\t\tthis.manager.render(element, {\n\t\t\t\t\"width\"  : this.settings.width,\n\t\t\t\t\"height\" : this.settings.height\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Emit that rendering has attached to an element\n\t\t\t * @event attached\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.ATTACHED);\n\n\t\t}.bind(this));\n\n\t}\n\n\t/**\n\t * Display a point in the book\n\t * The request will be added to the rendering Queue,\n\t * so it will wait until book is opened, rendering started\n\t * and all other rendering tasks have finished to be called.\n\t * @param  {string} target Url or EpubCFI\n\t * @return {Promise}\n\t */\n\tdisplay(target){\n\t\tif (this.displaying) {\n\t\t\tthis.displaying.resolve();\n\t\t}\n\t\treturn this.q.enqueue(this._display, target);\n\t}\n\n\t/**\n\t * Tells the manager what to display immediately\n\t * @private\n\t * @param  {string} target Url or EpubCFI\n\t * @return {Promise}\n\t */\n\t_display(target){\n\t\tif (!this.book) {\n\t\t\treturn;\n\t\t}\n\t\tvar isCfiString = this.epubcfi.isCfiString(target);\n\t\tvar displaying = new defer();\n\t\tvar displayed = displaying.promise;\n\t\tvar section;\n\t\tvar moveTo;\n\n\t\tthis.displaying = displaying;\n\n\t\t// Check if this is a book percentage\n\t\tif (this.book.locations.length() && isFloat(target)) {\n\t\t\ttarget = this.book.locations.cfiFromPercentage(parseFloat(target));\n\t\t}\n\n\t\tsection = this.book.spine.get(target);\n\n\t\tif(!section){\n\t\t\tdisplaying.reject(new Error(\"No Section Found\"));\n\t\t\treturn displayed;\n\t\t}\n\n\t\tthis.manager.display(section, target)\n\t\t\t.then(() => {\n\t\t\t\tdisplaying.resolve(section);\n\t\t\t\tthis.displaying = undefined;\n\n\t\t\t\t/**\n\t\t\t\t * Emit that a section has been displayed\n\t\t\t\t * @event displayed\n\t\t\t\t * @param {Section} section\n\t\t\t\t * @memberof Rendition\n\t\t\t\t */\n\t\t\t\tthis.emit(EVENTS.RENDITION.DISPLAYED, section);\n\t\t\t\tthis.reportLocation();\n\t\t\t}, (err) => {\n\t\t\t\t/**\n\t\t\t\t * Emit that has been an error displaying\n\t\t\t\t * @event displayError\n\t\t\t\t * @param {Section} section\n\t\t\t\t * @memberof Rendition\n\t\t\t\t */\n\t\t\t\tthis.emit(EVENTS.RENDITION.DISPLAY_ERROR, err);\n\t\t\t});\n\n\t\treturn displayed;\n\t}\n\n\t/*\n\trender(view, show) {\n\n\t\t// view.onLayout = this.layout.format.bind(this.layout);\n\t\tview.create();\n\n\t\t// Fit to size of the container, apply padding\n\t\tthis.manager.resizeView(view);\n\n\t\t// Render Chain\n\t\treturn view.section.render(this.book.request)\n\t\t\t.then(function(contents){\n\t\t\t\treturn view.load(contents);\n\t\t\t}.bind(this))\n\t\t\t.then(function(doc){\n\t\t\t\treturn this.hooks.content.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\tthis.layout.format(view.contents);\n\t\t\t\treturn this.hooks.layout.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\treturn view.display();\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\treturn this.hooks.render.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\tif(show !== false) {\n\t\t\t\t\tthis.q.enqueue(function(view){\n\t\t\t\t\t\tview.show();\n\t\t\t\t\t}, view);\n\t\t\t\t}\n\t\t\t\t// this.map = new Map(view, this.layout);\n\t\t\t\tthis.hooks.show.trigger(view, this);\n\t\t\t\tthis.trigger(\"rendered\", view.section);\n\n\t\t\t}.bind(this))\n\t\t\t.catch(function(e){\n\t\t\t\tthis.trigger(\"loaderror\", e);\n\t\t\t}.bind(this));\n\n\t}\n\t*/\n\n\t/**\n\t * Report what section has been displayed\n\t * @private\n\t * @param  {*} view\n\t */\n\tafterDisplayed(view){\n\n\t\tview.on(EVENTS.VIEWS.MARK_CLICKED, (cfiRange, data) => this.triggerMarkEvent(cfiRange, data, view));\n\n\t\tthis.hooks.render.trigger(view, this)\n\t\t\t.then(() => {\n\t\t\t\tif (view.contents) {\n\t\t\t\t\tthis.hooks.content.trigger(view.contents, this).then(() => {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Emit that a section has been rendered\n\t\t\t\t\t\t * @event rendered\n\t\t\t\t\t\t * @param {Section} section\n\t\t\t\t\t\t * @param {View} view\n\t\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t\t */\n\t\t\t\t\t\tview.emit(EVENTS.RENDITION.RENDITION, view.section, view);\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.RENDERED, view.section, view);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.RENDERED, view.section, view);\n\t\t\t\t}\n\t\t\t});\n\n\t}\n\n\t/**\n\t * Report what has been removed\n\t * @private\n\t * @param  {*} view\n\t */\n\tafterRemoved(view){\n\t\tthis.hooks.unloaded.trigger(view, this).then(() => {\n\t\t\t/**\n\t\t\t * Emit that a section has been removed\n\t\t\t * @event removed\n\t\t\t * @param {Section} section\n\t\t\t * @param {View} view\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.REMOVED, view.section, view);\n\t\t});\n\t}\n\n\t/**\n\t * Report resize events and display the last seen location\n\t * @private\n\t */\n\tonResized(size){\n\n\t\t/**\n\t\t * Emit that the rendition has been resized\n\t\t * @event resized\n\t\t * @param {number} width\n\t\t * @param {height} height\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.RESIZED, {\n\t\t\twidth: size.width,\n\t\t\theight: size.height\n\t\t});\n\n\t\tif (this.location && this.location.start) {\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\n\t}\n\n\t/**\n\t * Report orientation events and display the last seen location\n\t * @private\n\t */\n\tonOrientationChange(orientation){\n\t\t/**\n\t\t * Emit that the rendition has been rotated\n\t\t * @event orientationchange\n\t\t * @param {string} orientation\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.ORIENTATION_CHANGE, orientation);\n\t}\n\n\t/**\n\t * Move the Rendition to a specific offset\n\t * Usually you would be better off calling display()\n\t * @param {object} offset\n\t */\n\tmoveTo(offset){\n\t\tthis.manager.moveTo(offset);\n\t}\n\n\t/**\n\t * Trigger a resize of the views\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n\tresize(width, height){\n\t\tif (width) {\n\t\t\tthis.settings.width = width;\n\t\t}\n\t\tif (height) {\n\t\t\tthis.settings.height = height;\n\t\t}\n\t\tthis.manager.resize(width, height);\n\t}\n\n\t/**\n\t * Clear all rendered views\n\t */\n\tclear(){\n\t\tthis.manager.clear();\n\t}\n\n\t/**\n\t * Go to the next \"page\" in the rendition\n\t * @return {Promise}\n\t */\n\tnext(){\n\t\treturn this.q.enqueue(this.manager.next.bind(this.manager))\n\t\t\t.then(this.reportLocation.bind(this));\n\t}\n\n\t/**\n\t * Go to the previous \"page\" in the rendition\n\t * @return {Promise}\n\t */\n\tprev(){\n\t\treturn this.q.enqueue(this.manager.prev.bind(this.manager))\n\t\t\t.then(this.reportLocation.bind(this));\n\t}\n\n\t//-- http://www.idpf.org/epub/301/spec/epub-publications.html#meta-properties-rendering\n\t/**\n\t * Determine the Layout properties from metadata and settings\n\t * @private\n\t * @param  {object} metadata\n\t * @return {object} properties\n\t */\n\tdetermineLayoutProperties(metadata){\n\t\tvar properties;\n\t\tvar layout = this.settings.layout || metadata.layout || \"reflowable\";\n\t\tvar spread = this.settings.spread || metadata.spread || \"auto\";\n\t\tvar orientation = this.settings.orientation || metadata.orientation || \"auto\";\n\t\tvar flow = this.settings.flow || metadata.flow || \"auto\";\n\t\tvar viewport = metadata.viewport || \"\";\n\t\tvar minSpreadWidth = this.settings.minSpreadWidth || metadata.minSpreadWidth || 800;\n\t\tvar direction = this.settings.direction || metadata.direction || \"ltr\";\n\n\t\tif ((this.settings.width === 0 || this.settings.width > 0) &&\n\t\t\t\t(this.settings.height === 0 || this.settings.height > 0)) {\n\t\t\t// viewport = \"width=\"+this.settings.width+\", height=\"+this.settings.height+\"\";\n\t\t}\n\n\t\tproperties = {\n\t\t\tlayout : layout,\n\t\t\tspread : spread,\n\t\t\torientation : orientation,\n\t\t\tflow : flow,\n\t\t\tviewport : viewport,\n\t\t\tminSpreadWidth : minSpreadWidth,\n\t\t\tdirection: direction\n\t\t};\n\n\t\treturn properties;\n\t}\n\n\t/**\n\t * Adjust the flow of the rendition to paginated or scrolled\n\t * (scrolled-continuous vs scrolled-doc are handled by different view managers)\n\t * @param  {string} flow\n\t */\n\tflow(flow){\n\t\tvar _flow = flow;\n\t\tif (flow === \"scrolled\" ||\n\t\t\t\tflow === \"scrolled-doc\" ||\n\t\t\t\tflow === \"scrolled-continuous\") {\n\t\t\t_flow = \"scrolled\";\n\t\t}\n\n\t\tif (flow === \"auto\" || flow === \"paginated\") {\n\t\t\t_flow = \"paginated\";\n\t\t}\n\n\t\tthis.settings.flow = flow;\n\n\t\tif (this._layout) {\n\t\t\tthis._layout.flow(_flow);\n\t\t}\n\n\t\tif (this.manager && this._layout) {\n\t\t\tthis.manager.applyLayout(this._layout);\n\t\t}\n\n\t\tif (this.manager) {\n\t\t\tthis.manager.updateFlow(_flow);\n\t\t}\n\n\t\tif (this.manager && this.manager.isRendered() && this.location) {\n\t\t\tthis.manager.clear();\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the layout of the rendition to reflowable or pre-paginated\n\t * @param  {object} settings\n\t */\n\tlayout(settings){\n\t\tif (settings) {\n\t\t\tthis._layout = new Layout(settings);\n\t\t\tthis._layout.spread(settings.spread, this.settings.minSpreadWidth);\n\n\t\t\t// this.mapping = new Mapping(this._layout.props);\n\n\t\t\tthis._layout.on(EVENTS.LAYOUT.UPDATED, (props, changed) => {\n\t\t\t\tthis.emit(EVENTS.RENDITION.LAYOUT, props, changed);\n\t\t\t})\n\t\t}\n\n\t\tif (this.manager && this._layout) {\n\t\t\tthis.manager.applyLayout(this._layout);\n\t\t}\n\n\t\treturn this._layout;\n\t}\n\n\t/**\n\t * Adjust if the rendition uses spreads\n\t * @param  {string} spread none | auto (TODO: implement landscape, portrait, both)\n\t * @param  {int} [min] min width to use spreads at\n\t */\n\tspread(spread, min){\n\n\t\tthis.settings.spread = spread;\n\n\t\tif (min) {\n\t\t\tthis.settings.minSpreadWidth = min;\n\t\t}\n\n\t\tif (this._layout) {\n\t\t\tthis._layout.spread(spread, min);\n\t\t}\n\n\t\tif (this.manager && this.manager.isRendered()) {\n\t\t\tthis.manager.updateLayout();\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the direction of the rendition\n\t * @param  {string} dir\n\t */\n\tdirection(dir){\n\n\t\tthis.settings.direction = dir || \"ltr\";\n\n\t\tif (this.manager) {\n\t\t\tthis.manager.direction(this.settings.direction);\n\t\t}\n\n\t\tif (this.manager && this.manager.isRendered() && this.location) {\n\t\t\tthis.manager.clear();\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\t}\n\n\t/**\n\t * Report the current location\n\t * @fires relocated\n\t * @fires locationChanged\n\t */\n\treportLocation(){\n\t\treturn this.q.enqueue(function reportedLocation(){\n\t\t\trequestAnimationFrame(function reportedLocationAfterRAF() {\n\t\t\t\tvar location = this.manager.currentLocation();\n\t\t\t\tif (location && location.then && typeof location.then === \"function\") {\n\t\t\t\t\tlocation.then(function(result) {\n\t\t\t\t\t\tlet located = this.located(result);\n\n\t\t\t\t\t\tif (!located || !located.start || !located.end) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.location = located;\n\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.LOCATION_CHANGED, {\n\t\t\t\t\t\t\tindex: this.location.start.index,\n\t\t\t\t\t\t\thref: this.location.start.href,\n\t\t\t\t\t\t\tstart: this.location.start.cfi,\n\t\t\t\t\t\t\tend: this.location.end.cfi,\n\t\t\t\t\t\t\tpercentage: this.location.start.percentage\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.RELOCATED, this.location);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t} else if (location) {\n\t\t\t\t\tlet located = this.located(location);\n\n\t\t\t\t\tif (!located || !located.start || !located.end) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.location = located;\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @event locationChanged\n\t\t\t\t\t * @deprecated\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {number} index\n\t\t\t\t\t * @property {string} href\n\t\t\t\t\t * @property {EpubCFI} start\n\t\t\t\t\t * @property {EpubCFI} end\n\t\t\t\t\t * @property {number} percentage\n\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t */\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.LOCATION_CHANGED, {\n\t\t\t\t\t\tindex: this.location.start.index,\n\t\t\t\t\t\thref: this.location.start.href,\n\t\t\t\t\t\tstart: this.location.start.cfi,\n\t\t\t\t\t\tend: this.location.end.cfi,\n\t\t\t\t\t\tpercentage: this.location.start.percentage\n\t\t\t\t\t});\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @event relocated\n\t\t\t\t\t * @type {displayedLocation}\n\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t */\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.RELOCATED, this.location);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Get the Current Location object\n\t * @return {displayedLocation | promise} location (may be a promise)\n\t */\n\tcurrentLocation(){\n\t\tvar location = this.manager.currentLocation();\n\t\tif (location && location.then && typeof location.then === \"function\") {\n\t\t\tlocation.then(function(result) {\n\t\t\t\tlet located = this.located(result);\n\t\t\t\treturn located;\n\t\t\t}.bind(this));\n\t\t} else if (location) {\n\t\t\tlet located = this.located(location);\n\t\t\treturn located;\n\t\t}\n\t}\n\n\t/**\n\t * Creates a Rendition#locationRange from location\n\t * passed by the Manager\n\t * @returns {displayedLocation}\n\t * @private\n\t */\n\tlocated(location){\n\t\tif (!location.length) {\n\t\t\treturn {};\n\t\t}\n\t\tlet start = location[0];\n\t\tlet end = location[location.length-1];\n\n\t\tlet located = {\n\t\t\tstart: {\n\t\t\t\tindex: start.index,\n\t\t\t\thref: start.href,\n\t\t\t\tcfi: start.mapping.start,\n\t\t\t\tdisplayed: {\n\t\t\t\t\tpage: start.pages[0] || 1,\n\t\t\t\t\ttotal: start.totalPages\n\t\t\t\t}\n\t\t\t},\n\t\t\tend: {\n\t\t\t\tindex: end.index,\n\t\t\t\thref: end.href,\n\t\t\t\tcfi: end.mapping.end,\n\t\t\t\tdisplayed: {\n\t\t\t\t\tpage: end.pages[end.pages.length-1] || 1,\n\t\t\t\t\ttotal: end.totalPages\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet locationStart = this.book.locations.locationFromCfi(start.mapping.start);\n\t\tlet locationEnd = this.book.locations.locationFromCfi(end.mapping.end);\n\n\t\tif (locationStart != null) {\n\t\t\tlocated.start.location = locationStart;\n\t\t\tlocated.start.percentage = this.book.locations.percentageFromLocation(locationStart);\n\t\t}\n\t\tif (locationEnd != null) {\n\t\t\tlocated.end.location = locationEnd;\n\t\t\tlocated.end.percentage = this.book.locations.percentageFromLocation(locationEnd);\n\t\t}\n\n\t\tlet pageStart = this.book.pageList.pageFromCfi(start.mapping.start);\n\t\tlet pageEnd = this.book.pageList.pageFromCfi(end.mapping.end);\n\n\t\tif (pageStart != -1) {\n\t\t\tlocated.start.page = pageStart;\n\t\t}\n\t\tif (pageEnd != -1) {\n\t\t\tlocated.end.page = pageEnd;\n\t\t}\n\n\t\tif (end.index === this.book.spine.last().index &&\n\t\t\t\tlocated.end.displayed.page >= located.end.displayed.total) {\n\t\t\tlocated.atEnd = true;\n\t\t}\n\n\t\tif (start.index === this.book.spine.first().index &&\n\t\t\t\tlocated.start.displayed.page === 1) {\n\t\t\tlocated.atStart = true;\n\t\t}\n\n\t\treturn located;\n\t}\n\n\t/**\n\t * Remove and Clean Up the Rendition\n\t */\n\tdestroy(){\n\t\t// Clear the queue\n\t\t// this.q.clear();\n\t\t// this.q = undefined;\n\n\t\tthis.manager && this.manager.destroy();\n\t\tthis.book.spine.hooks.content.deregister(this.injected['identifier']);\n\t\tthis.book.spine.hooks.content.deregister(this.injected['script']);\n\t\tthis.book.spine.hooks.content.deregister(this.injected['stylesheet']);\n\n\t\tthis.book = undefined;\n\n\t\t// this.views = null;\n\n\t\t// this.hooks.display.clear();\n\t\t// this.hooks.serialize.clear();\n\t\t// this.hooks.content.clear();\n\t\t// this.hooks.layout.clear();\n\t\t// this.hooks.render.clear();\n\t\t// this.hooks.show.clear();\n\t\t// this.hooks = {};\n\n\t\t// this.themes.destroy();\n\t\t// this.themes = undefined;\n\n\t\t// this.epubcfi = undefined;\n\n\t\t// this.starting = undefined;\n\t\t// this.started = undefined;\n\n\n\t}\n\n\t/**\n\t * Pass the events from a view's Contents\n\t * @private\n\t * @param  {Contents} view contents\n\t */\n\tpassEvents(contents){\n\t\tDOM_EVENTS.forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\n\t\tcontents.on(EVENTS.CONTENTS.SELECTED, (e) => this.triggerSelectedEvent(e, contents));\n\t}\n\n\t/**\n\t * Emit events passed by a view\n\t * @private\n\t * @param  {event} e\n\t */\n\ttriggerViewEvent(e, contents){\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\t/**\n\t * Emit a selection event's CFI Range passed from a a view\n\t * @private\n\t * @param  {EpubCFI} cfirange\n\t */\n\ttriggerSelectedEvent(cfirange, contents){\n\t\t/**\n\t\t * Emit that a text selection has occured\n\t\t * @event selected\n\t\t * @param {EpubCFI} cfirange\n\t\t * @param {Contents} contents\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.SELECTED, cfirange, contents);\n\t}\n\n\t/**\n\t * Emit a markClicked event with the cfiRange and data from a mark\n\t * @private\n\t * @param  {EpubCFI} cfirange\n\t */\n\ttriggerMarkEvent(cfiRange, data, contents){\n\t\t/**\n\t\t * Emit that a mark was clicked\n\t\t * @event markClicked\n\t\t * @param {EpubCFI} cfirange\n\t\t * @param {object} data\n\t\t * @param {Contents} contents\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.MARK_CLICKED, cfiRange, data, contents);\n\t}\n\n\t/**\n\t * Get a Range from a Visible CFI\n\t * @param  {string} cfi EpubCfi String\n\t * @param  {string} ignoreClass\n\t * @return {range}\n\t */\n\tgetRange(cfi, ignoreClass){\n\t\tvar _cfi = new EpubCFI(cfi);\n\t\tvar found = this.manager.visible().filter(function (view) {\n\t\t\tif(_cfi.spinePos === view.index) return true;\n\t\t});\n\n\t\t// Should only every return 1 item\n\t\tif (found.length) {\n\t\t\treturn found[0].contents.range(_cfi, ignoreClass);\n\t\t}\n\t}\n\n\t/**\n\t * Hook to adjust images to fit in columns\n\t * @param  {Contents} contents\n\t * @private\n\t */\n\tadjustImages(contents) {\n\n\t\tif (this._layout.name === \"pre-paginated\") {\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\tlet computed = contents.window.getComputedStyle(contents.content, null);\n\t\tlet height = (contents.content.offsetHeight - (parseFloat(computed.paddingTop) + parseFloat(computed.paddingBottom))) * .95;\n\t\tlet verticalPadding = parseFloat(computed.verticalPadding);\n\n\t\tcontents.addStylesheetRules({\n\t\t\t\"img\" : {\n\t\t\t\t\"max-width\": (this._layout.columnWidth ? (this._layout.columnWidth - verticalPadding) + \"px\" : \"100%\") + \"!important\",\n\t\t\t\t\"max-height\": height + \"px\" + \"!important\",\n\t\t\t\t\"object-fit\": \"contain\",\n\t\t\t\t\"page-break-inside\": \"avoid\",\n\t\t\t\t\"break-inside\": \"avoid\",\n\t\t\t\t\"box-sizing\": \"border-box\"\n\t\t\t},\n\t\t\t\"svg\" : {\n\t\t\t\t\"max-width\": (this._layout.columnWidth ? (this._layout.columnWidth - verticalPadding) + \"px\" : \"100%\") + \"!important\",\n\t\t\t\t\"max-height\": height + \"px\" + \"!important\",\n\t\t\t\t\"page-break-inside\": \"avoid\",\n\t\t\t\t\"break-inside\": \"avoid\"\n\t\t\t}\n\t\t});\n\n\t\treturn new Promise(function(resolve, reject){\n\t\t\t// Wait to apply\n\t\t\tsetTimeout(function() {\n\t\t\t\tresolve();\n\t\t\t}, 1);\n\t\t});\n\t}\n\n\t/**\n\t * Get the Contents object of each rendered view\n\t * @returns {Contents[]}\n\t */\n\tgetContents () {\n\t\treturn this.manager ? this.manager.getContents() : [];\n\t}\n\n\t/**\n\t * Get the views member from the manager\n\t * @returns {Views}\n\t */\n\tviews () {\n\t\tlet views = this.manager ? this.manager.views : undefined;\n\t\treturn views || [];\n\t}\n\n\t/**\n\t * Hook to handle link clicks in rendered content\n\t * @param  {Contents} contents\n\t * @private\n\t */\n\thandleLinks(contents) {\n\t\tif (contents) {\n\t\t\tcontents.on(EVENTS.CONTENTS.LINK_CLICKED, (href) => {\n\t\t\t\tlet relative = this.book.path.relative(href);\n\t\t\t\tthis.display(relative);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Hook to handle injecting stylesheet before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectStylesheet(doc, section) {\n\t\tlet style = doc.createElement(\"link\");\n\t\tstyle.setAttribute(\"type\", \"text/css\");\n\t\tstyle.setAttribute(\"rel\", \"stylesheet\");\n\t\tstyle.setAttribute(\"href\", this.settings.stylesheet);\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(style);\n\t}\n\n\t/**\n\t * Hook to handle injecting scripts before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectScript(doc, section) {\n\t\tlet script = doc.createElement(\"script\");\n\t\tscript.setAttribute(\"type\", \"text/javascript\");\n\t\tscript.setAttribute(\"src\", this.settings.script);\n\t\tscript.textContent = \" \"; // Needed to prevent self closing tag\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(script);\n\t}\n\n\t/**\n\t * Hook to handle the document identifier before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectIdentifier(doc, section) {\n\t\tlet ident = this.book.packaging.metadata.identifier;\n\t\tlet meta = doc.createElement(\"meta\");\n\t\tmeta.setAttribute(\"name\", \"dc.relation.ispartof\");\n\t\tif (ident) {\n\t\t\tmeta.setAttribute(\"content\", ident);\n\t\t}\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(meta);\n\t}\n\n\tscale(s) {\n\t\treturn this.manager && this.manager.scale(s);\n\t}\n}\n\n//-- Enable binding events to Renderer\nEventEmitter(Rendition.prototype);\n\nexport default Rendition;\n","import {defer, isXml, parse} from \"./core\";\nimport Path from \"./path\";\n\nfunction request(url, type, withCredentials, headers) {\n\tvar supportsURL = (typeof window != \"undefined\") ? window.URL : false; // TODO: fallback for url if window isn't defined\n\tvar BLOB_RESPONSE = supportsURL ? \"blob\" : \"arraybuffer\";\n\n\tvar deferred = new defer();\n\n\tvar xhr = new XMLHttpRequest();\n\n\t//-- Check from PDF.js:\n\t//   https://github.com/mozilla/pdf.js/blob/master/web/compatibility.js\n\tvar xhrPrototype = XMLHttpRequest.prototype;\n\n\tvar header;\n\n\tif (!(\"overrideMimeType\" in xhrPrototype)) {\n\t\t// IE10 might have response, but not overrideMimeType\n\t\tObject.defineProperty(xhrPrototype, \"overrideMimeType\", {\n\t\t\tvalue: function xmlHttpRequestOverrideMimeType() {}\n\t\t});\n\t}\n\n\tif(withCredentials) {\n\t\txhr.withCredentials = true;\n\t}\n\n\txhr.onreadystatechange = handler;\n\txhr.onerror = err;\n\n\txhr.open(\"GET\", url, true);\n\n\tfor(header in headers) {\n\t\txhr.setRequestHeader(header, headers[header]);\n\t}\n\n\tif(type == \"json\") {\n\t\txhr.setRequestHeader(\"Accept\", \"application/json\");\n\t}\n\n\t// If type isn\"t set, determine it from the file extension\n\tif(!type) {\n\t\ttype = new Path(url).extension;\n\t}\n\n\tif(type == \"blob\"){\n\t\txhr.responseType = BLOB_RESPONSE;\n\t}\n\n\n\tif(isXml(type)) {\n\t\t// xhr.responseType = \"document\";\n\t\txhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n\t}\n\n\tif(type == \"xhtml\") {\n\t\t// xhr.responseType = \"document\";\n\t}\n\n\tif(type == \"html\" || type == \"htm\") {\n\t\t// xhr.responseType = \"document\";\n\t}\n\n\tif(type == \"binary\") {\n\t\txhr.responseType = \"arraybuffer\";\n\t}\n\n\txhr.send();\n\n\tfunction err(e) {\n\t\tdeferred.reject(e);\n\t}\n\n\tfunction handler() {\n\t\tif (this.readyState === XMLHttpRequest.DONE) {\n\t\t\tvar responseXML = false;\n\n\t\t\tif(this.responseType === \"\" || this.responseType === \"document\") {\n\t\t\t\tresponseXML = this.responseXML;\n\t\t\t}\n\n\t\t\tif (this.status === 200 || this.status === 0 || responseXML) { //-- Firefox is reporting 0 for blob urls\n\t\t\t\tvar r;\n\n\t\t\t\tif (!this.response && !responseXML) {\n\t\t\t\t\tdeferred.reject({\n\t\t\t\t\t\tstatus: this.status,\n\t\t\t\t\t\tmessage : \"Empty Response\",\n\t\t\t\t\t\tstack : new Error().stack\n\t\t\t\t\t});\n\t\t\t\t\treturn deferred.promise;\n\t\t\t\t}\n\n\t\t\t\tif (this.status === 403) {\n\t\t\t\t\tdeferred.reject({\n\t\t\t\t\t\tstatus: this.status,\n\t\t\t\t\t\tresponse: this.response,\n\t\t\t\t\t\tmessage : \"Forbidden\",\n\t\t\t\t\t\tstack : new Error().stack\n\t\t\t\t\t});\n\t\t\t\t\treturn deferred.promise;\n\t\t\t\t}\n\t\t\t\tif(responseXML){\n\t\t\t\t\tr = this.responseXML;\n\t\t\t\t} else\n\t\t\t\tif(isXml(type)){\n\t\t\t\t\t// xhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n\t\t\t\t\t// If this.responseXML wasn't set, try to parse using a DOMParser from text\n\t\t\t\t\tr = parse(this.response, \"text/xml\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"xhtml\"){\n\t\t\t\t\tr = parse(this.response, \"application/xhtml+xml\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"html\" || type == \"htm\"){\n\t\t\t\t\tr = parse(this.response, \"text/html\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"json\"){\n\t\t\t\t\tr = JSON.parse(this.response);\n\t\t\t\t}else\n\t\t\t\tif(type == \"blob\"){\n\n\t\t\t\t\tif(supportsURL) {\n\t\t\t\t\t\tr = this.response;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//-- Safari doesn't support responseType blob, so create a blob from arraybuffer\n\t\t\t\t\t\tr = new Blob([this.response]);\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tr = this.response;\n\t\t\t\t}\n\n\t\t\t\tdeferred.resolve(r);\n\t\t\t} else {\n\n\t\t\t\tdeferred.reject({\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t\tmessage : this.response,\n\t\t\t\t\tstack : new Error().stack\n\t\t\t\t});\n\n\t\t\t}\n\t\t}\n\t}\n\n\treturn deferred.promise;\n}\n\nexport default request;\n","import {defer, isXml, parse} from \"./utils/core\";\nimport request from \"./utils/request\";\nimport mime from \"../libs/mime/mime\";\nimport Path from \"./utils/path\";\n\n/**\n * Handles Unzipping a requesting files from an Epub Archive\n * @class\n */\nclass Archive {\n\n\tconstructor() {\n\t\tthis.zip = undefined;\n\t\tthis.urlCache = {};\n\n\t\tthis.checkRequirements();\n\n\t}\n\n\t/**\n\t * Checks to see if JSZip exists in global namspace,\n\t * Requires JSZip if it isn't there\n\t * @private\n\t */\n\tcheckRequirements(){\n\t\ttry {\n\t\t\tif (typeof JSZip === \"undefined\") {\n\t\t\t\tlet JSZip = require(\"jszip\");\n\t\t\t\tthis.zip = new JSZip();\n\t\t\t} else {\n\t\t\t\tthis.zip = new JSZip();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"JSZip lib not loaded\");\n\t\t}\n\t}\n\n\t/**\n\t * Open an archive\n\t * @param  {binary} input\n\t * @param  {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n\t * @return {Promise} zipfile\n\t */\n\topen(input, isBase64){\n\t\treturn this.zip.loadAsync(input, {\"base64\": isBase64});\n\t}\n\n\t/**\n\t * Load and Open an archive\n\t * @param  {string} zipUrl\n\t * @param  {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n\t * @return {Promise} zipfile\n\t */\n\topenUrl(zipUrl, isBase64){\n\t\treturn request(zipUrl, \"binary\")\n\t\t\t.then(function(data){\n\t\t\t\treturn this.zip.loadAsync(data, {\"base64\": isBase64});\n\t\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Request a url from the archive\n\t * @param  {string} url  a url to request from the archive\n\t * @param  {string} [type] specify the type of the returned result\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\trequest(url, type){\n\t\tvar deferred = new defer();\n\t\tvar response;\n\t\tvar path = new Path(url);\n\n\t\t// If type isn't set, determine it from the file extension\n\t\tif(!type) {\n\t\t\ttype = path.extension;\n\t\t}\n\n\t\tif(type == \"blob\"){\n\t\t\tresponse = this.getBlob(url);\n\t\t} else {\n\t\t\tresponse = this.getText(url);\n\t\t}\n\n\t\tif (response) {\n\t\t\tresponse.then(function (r) {\n\t\t\t\tlet result = this.handleResponse(r, type);\n\t\t\t\tdeferred.resolve(result);\n\t\t\t}.bind(this));\n\t\t} else {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in the epub: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Handle the response from request\n\t * @private\n\t * @param  {any} response\n\t * @param  {string} [type]\n\t * @return {any} the parsed result\n\t */\n\thandleResponse(response, type){\n\t\tvar r;\n\n\t\tif(type == \"json\") {\n\t\t\tr = JSON.parse(response);\n\t\t}\n\t\telse\n\t\tif(isXml(type)) {\n\t\t\tr = parse(response, \"text/xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"xhtml\") {\n\t\t\tr = parse(response, \"application/xhtml+xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"html\" || type == \"htm\") {\n\t\t\tr = parse(response, \"text/html\");\n\t\t } else {\n\t\t\t r = response;\n\t\t }\n\n\t\treturn r;\n\t}\n\n\t/**\n\t * Get a Blob from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {Blob}\n\t */\n\tgetBlob(url, mimeType){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\tmimeType = mimeType || mime.lookup(entry.name);\n\t\t\treturn entry.async(\"uint8array\").then(function(uint8array) {\n\t\t\t\treturn new Blob([uint8array], {type : mimeType});\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get Text from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [encoding]\n\t * @return {string}\n\t */\n\tgetText(url, encoding){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\treturn entry.async(\"string\").then(function(text) {\n\t\t\t\treturn text;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get a base64 encoded result from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string} base64 encoded\n\t */\n\tgetBase64(url, mimeType){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\tmimeType = mimeType || mime.lookup(entry.name);\n\t\t\treturn entry.async(\"base64\").then(function(data) {\n\t\t\t\treturn \"data:\" + mimeType + \";base64,\" + data;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Create a Url from an unarchived item\n\t * @param  {string} url\n\t * @param  {object} [options.base64] use base64 encoding or blob url\n\t * @return {Promise} url promise with Url string\n\t */\n\tcreateUrl(url, options){\n\t\tvar deferred = new defer();\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar tempUrl;\n\t\tvar response;\n\t\tvar useBase64 = options && options.base64;\n\n\t\tif(url in this.urlCache) {\n\t\t\tdeferred.resolve(this.urlCache[url]);\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tif (useBase64) {\n\t\t\tresponse = this.getBase64(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(tempUrl) {\n\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tresponse = this.getBlob(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(blob) {\n\n\t\t\t\t\ttempUrl = _URL.createObjectURL(blob);\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\t\t}\n\n\n\t\tif (!response) {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in the epub: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Revoke Temp Url for a achive item\n\t * @param  {string} url url of the item in the archive\n\t */\n\trevokeUrl(url){\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar fromCache = this.urlCache[url];\n\t\tif(fromCache) _URL.revokeObjectURL(fromCache);\n\t}\n\n\tdestroy() {\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tfor (let fromCache in this.urlCache) {\n\t\t\t_URL.revokeObjectURL(fromCache);\n\t\t}\n\t\tthis.zip = undefined;\n\t\tthis.urlCache = {};\n\t}\n}\n\nexport default Archive;\n","import {defer, isXml, parse} from \"./utils/core\";\nimport httpRequest from \"./utils/request\";\nimport mime from \"../libs/mime/mime\";\nimport Path from \"./utils/path\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Handles saving and requesting files from local storage\n * @class\n * @param {string} name This should be the name of the application for modals\n * @param {function} [requester]\n * @param {function} [resolver]\n */\nclass Store {\n\n\tconstructor(name, requester, resolver) {\n\t\tthis.urlCache = {};\n\n\t\tthis.storage = undefined;\n\n\t\tthis.name = name;\n\t\tthis.requester = requester || httpRequest;\n\t\tthis.resolver = resolver;\n\n\t\tthis.online = true;\n\n\t\tthis.checkRequirements();\n\n\t\tthis.addListeners();\n\t}\n\n\t/**\n\t * Checks to see if localForage exists in global namspace,\n\t * Requires localForage if it isn't there\n\t * @private\n\t */\n\tcheckRequirements(){\n\t\ttry {\n\t\t\tlet store;\n\t\t\tif (typeof localforage === \"undefined\") {\n\t\t\t\tstore = require(\"localforage\");\n\t\t\t} else {\n\t\t\t\tstore = localforage;\n\t\t\t}\n\t\t\tthis.storage = store.createInstance({\n\t\t\t\t\tname: this.name\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"localForage lib not loaded\");\n\t\t}\n\t}\n\n\t/**\n\t * Add online and offline event listeners\n\t * @private\n\t */\n\taddListeners() {\n\t\tthis._status = this.status.bind(this);\n\t\twindow.addEventListener('online',  this._status);\n\t  window.addEventListener('offline', this._status);\n\t}\n\n\t/**\n\t * Remove online and offline event listeners\n\t * @private\n\t */\n\tremoveListeners() {\n\t\twindow.removeEventListener('online',  this._status);\n\t  window.removeEventListener('offline', this._status);\n\t\tthis._status = undefined;\n\t}\n\n\t/**\n\t * Update the online / offline status\n\t * @private\n\t */\n\tstatus(event) {\n\t\tlet online = navigator.onLine;\n\t\tthis.online = online;\n\t\tif (online) {\n\t\t\tthis.emit(\"online\", this);\n\t\t} else {\n\t\t\tthis.emit(\"offline\", this);\n\t\t}\n\t}\n\n\t/**\n\t * Add all of a book resources to the store\n\t * @param  {Resources} resources  book resources\n\t * @param  {boolean} [force] force resaving resources\n\t * @return {Promise<object>} store objects\n\t */\n\tadd(resources, force) {\n\t\tlet mapped = resources.resources.map((item) => {\n\t\t\tlet { href } = item;\n\t\t\tlet url = this.resolver(href);\n\t\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\t\treturn this.storage.getItem(encodedUrl).then((item) => {\n\t\t\t\tif (!item || force) {\n\t\t\t\t\treturn this.requester(url, \"binary\")\n\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\treturn this.storage.setItem(encodedUrl, data);\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\t\treturn Promise.all(mapped);\n\t}\n\n\t/**\n\t * Put binary data from a url to storage\n\t * @param  {string} url  a url to request from storage\n\t * @param  {boolean} [withCredentials]\n\t * @param  {object} [headers]\n\t * @return {Promise<Blob>}\n\t */\n\tput(url, withCredentials, headers) {\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then((result) => {\n\t\t\tif (!result) {\n\t\t\t\treturn this.requester(url, \"binary\", withCredentials, headers).then((data) => {\n\t\t\t\t\treturn this.storage.setItem(encodedUrl, data);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t/**\n\t * Request a url\n\t * @param  {string} url  a url to request from storage\n\t * @param  {string} [type] specify the type of the returned result\n\t * @param  {boolean} [withCredentials]\n\t * @param  {object} [headers]\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\trequest(url, type, withCredentials, headers){\n\t\tif (this.online) {\n\t\t\t// From network\n\t\t\treturn this.requester(url, type, withCredentials, headers).then((data) => {\n\t\t\t\t// save to store if not present\n\t\t\t\tthis.put(url);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t} else {\n\t\t\t// From store\n\t\t\treturn this.retrieve(url, type);\n\t\t}\n\n\t}\n\n\t/**\n\t * Request a url from storage\n\t * @param  {string} url  a url to request from storage\n\t * @param  {string} [type] specify the type of the returned result\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\tretrieve(url, type) {\n\t\tvar deferred = new defer();\n\t\tvar response;\n\t\tvar path = new Path(url);\n\n\t\t// If type isn't set, determine it from the file extension\n\t\tif(!type) {\n\t\t\ttype = path.extension;\n\t\t}\n\n\t\tif(type == \"blob\"){\n\t\t\tresponse = this.getBlob(url);\n\t\t} else {\n\t\t\tresponse = this.getText(url);\n\t\t}\n\n\n\t\treturn response.then((r) => {\n\t\t\tvar deferred = new defer();\n\t\t\tvar result;\n\t\t\tif (r) {\n\t\t\t\tresult = this.handleResponse(r, type);\n\t\t\t\tdeferred.resolve(result);\n\t\t\t} else {\n\t\t\t\tdeferred.reject({\n\t\t\t\t\tmessage : \"File not found in storage: \" + url,\n\t\t\t\t\tstack : new Error().stack\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Handle the response from request\n\t * @private\n\t * @param  {any} response\n\t * @param  {string} [type]\n\t * @return {any} the parsed result\n\t */\n\thandleResponse(response, type){\n\t\tvar r;\n\n\t\tif(type == \"json\") {\n\t\t\tr = JSON.parse(response);\n\t\t}\n\t\telse\n\t\tif(isXml(type)) {\n\t\t\tr = parse(response, \"text/xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"xhtml\") {\n\t\t\tr = parse(response, \"application/xhtml+xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"html\" || type == \"htm\") {\n\t\t\tr = parse(response, \"text/html\");\n\t\t } else {\n\t\t\t r = response;\n\t\t }\n\n\t\treturn r;\n\t}\n\n\t/**\n\t * Get a Blob from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {Blob}\n\t */\n\tgetBlob(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then(function(uint8array) {\n\t\t\tif(!uint8array) return;\n\n\t\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\t\treturn new Blob([uint8array], {type : mimeType});\n\t\t});\n\n\t}\n\n\t/**\n\t * Get Text from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string}\n\t */\n\tgetText(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then(function(uint8array) {\n\t\t\tvar deferred = new defer();\n\t\t\tvar reader = new FileReader();\n\t\t\tvar blob;\n\n\t\t\tif(!uint8array) return;\n\n\t\t\tblob = new Blob([uint8array], {type : mimeType});\n\n\t\t\treader.addEventListener(\"loadend\", () => {\n\t\t\t\tdeferred.resolve(reader.result);\n\t\t\t});\n\n\t\t\treader.readAsText(blob, mimeType);\n\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Get a base64 encoded result from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string} base64 encoded\n\t */\n\tgetBase64(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then((uint8array) => {\n\t\t\tvar deferred = new defer();\n\t\t\tvar reader = new FileReader();\n\t\t\tvar blob;\n\n\t\t\tif(!uint8array) return;\n\n\t\t\tblob = new Blob([uint8array], {type : mimeType});\n\n\t\t\treader.addEventListener(\"loadend\", () => {\n\t\t\t\tdeferred.resolve(reader.result);\n\t\t\t});\n\t\t\treader.readAsDataURL(blob, mimeType);\n\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Create a Url from a stored item\n\t * @param  {string} url\n\t * @param  {object} [options.base64] use base64 encoding or blob url\n\t * @return {Promise} url promise with Url string\n\t */\n\tcreateUrl(url, options){\n\t\tvar deferred = new defer();\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar tempUrl;\n\t\tvar response;\n\t\tvar useBase64 = options && options.base64;\n\n\t\tif(url in this.urlCache) {\n\t\t\tdeferred.resolve(this.urlCache[url]);\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tif (useBase64) {\n\t\t\tresponse = this.getBase64(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(tempUrl) {\n\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tresponse = this.getBlob(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(blob) {\n\n\t\t\t\t\ttempUrl = _URL.createObjectURL(blob);\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\t\t}\n\n\n\t\tif (!response) {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in storage: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Revoke Temp Url for a achive item\n\t * @param  {string} url url of the item in the store\n\t */\n\trevokeUrl(url){\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar fromCache = this.urlCache[url];\n\t\tif(fromCache) _URL.revokeObjectURL(fromCache);\n\t}\n\n\tdestroy() {\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tfor (let fromCache in this.urlCache) {\n\t\t\t_URL.revokeObjectURL(fromCache);\n\t\t}\n\t\tthis.urlCache = {};\n\t\tthis.removeListeners();\n\t}\n}\n\nEventEmitter(Store.prototype);\n\nexport default Store;\n","import EventEmitter from \"event-emitter\";\nimport {extend, defer} from \"./utils/core\";\nimport Url from \"./utils/url\";\nimport Path from \"./utils/path\";\nimport Spine from \"./spine\";\nimport Locations from \"./locations\";\nimport Container from \"./container\";\nimport Packaging from \"./packaging\";\nimport Navigation from \"./navigation\";\nimport Resources from \"./resources\";\nimport PageList from \"./pagelist\";\nimport Rendition from \"./rendition\";\nimport Archive from \"./archive\";\nimport request from \"./utils/request\";\nimport EpubCFI from \"./epubcfi\";\nimport Store from \"./store\";\nimport { EPUBJS_VERSION, EVENTS } from \"./utils/constants\";\n\nconst CONTAINER_PATH = \"META-INF/container.xml\";\n\nconst INPUT_TYPE = {\n\tBINARY: \"binary\",\n\tBASE64: \"base64\",\n\tEPUB: \"epub\",\n\tOPF: \"opf\",\n\tMANIFEST: \"json\",\n\tDIRECTORY: \"directory\"\n};\n\n/**\n * An Epub representation with methods for the loading, parsing and manipulation\n * of its contents.\n * @class\n * @param {string} [url]\n * @param {object} [options]\n * @param {method} [options.requestMethod] a request function to use instead of the default\n * @param {boolean} [options.requestCredentials=undefined] send the xhr request withCredentials\n * @param {object} [options.requestHeaders=undefined] send the xhr request headers\n * @param {string} [options.encoding=binary] optional to pass 'binary' or base64' for archived Epubs\n * @param {string} [options.replacements=none] use base64, blobUrl, or none for replacing assets in archived Epubs\n * @param {method} [options.canonical] optional function to determine canonical urls for a path\n * @param {string} [options.openAs] optional string to determine the input type\n * @param {string} [options.store=false] cache the contents in local storage, value should be the name of the reader\n * @returns {Book}\n * @example new Book(\"/path/to/book.epub\", {})\n * @example new Book({ replacements: \"blobUrl\" })\n */\nclass Book {\n\tconstructor(url, options) {\n\t\t// Allow passing just options to the Book\n\t\tif (typeof(options) === \"undefined\" &&\n\t\t\t  typeof(url) !== \"string\" &&\n\t\t    url instanceof Blob === false) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\trequestMethod: undefined,\n\t\t\trequestCredentials: undefined,\n\t\t\trequestHeaders: undefined,\n\t\t\tencoding: undefined,\n\t\t\treplacements: undefined,\n\t\t\tcanonical: undefined,\n\t\t\topenAs: undefined,\n\t\t\tstore: undefined\n\t\t});\n\n\t\textend(this.settings, options);\n\n\n\t\t// Promises\n\t\tthis.opening = new defer();\n\t\t/**\n\t\t * @member {promise} opened returns after the book is loaded\n\t\t * @memberof Book\n\t\t */\n\t\tthis.opened = this.opening.promise;\n\t\tthis.isOpen = false;\n\n\t\tthis.loading = {\n\t\t\tmanifest: new defer(),\n\t\t\tspine: new defer(),\n\t\t\tmetadata: new defer(),\n\t\t\tcover: new defer(),\n\t\t\tnavigation: new defer(),\n\t\t\tpageList: new defer(),\n\t\t\tresources: new defer()\n\t\t};\n\n\t\tthis.loaded = {\n\t\t\tmanifest: this.loading.manifest.promise,\n\t\t\tspine: this.loading.spine.promise,\n\t\t\tmetadata: this.loading.metadata.promise,\n\t\t\tcover: this.loading.cover.promise,\n\t\t\tnavigation: this.loading.navigation.promise,\n\t\t\tpageList: this.loading.pageList.promise,\n\t\t\tresources: this.loading.resources.promise\n\t\t};\n\n\t\t/**\n\t\t * @member {promise} ready returns after the book is loaded and parsed\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.ready = Promise.all([\n\t\t\tthis.loaded.manifest,\n\t\t\tthis.loaded.spine,\n\t\t\tthis.loaded.metadata,\n\t\t\tthis.loaded.cover,\n\t\t\tthis.loaded.navigation,\n\t\t\tthis.loaded.resources\n\t\t]);\n\n\n\t\t// Queue for methods used before opening\n\t\tthis.isRendered = false;\n\t\t// this._q = queue(this);\n\n\t\t/**\n\t\t * @member {method} request\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.request = this.settings.requestMethod || request;\n\n\t\t/**\n\t\t * @member {Spine} spine\n\t\t * @memberof Book\n\t\t */\n\t\tthis.spine = new Spine();\n\n\t\t/**\n\t\t * @member {Locations} locations\n\t\t * @memberof Book\n\t\t */\n\t\tthis.locations = new Locations(this.spine, this.load.bind(this));\n\n\t\t/**\n\t\t * @member {Navigation} navigation\n\t\t * @memberof Book\n\t\t */\n\t\tthis.navigation = undefined;\n\n\t\t/**\n\t\t * @member {PageList} pagelist\n\t\t * @memberof Book\n\t\t */\n\t\tthis.pageList = undefined;\n\n\t\t/**\n\t\t * @member {Url} url\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.url = undefined;\n\n\t\t/**\n\t\t * @member {Path} path\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.path = undefined;\n\n\t\t/**\n\t\t * @member {boolean} archived\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.archived = false;\n\n\t\t/**\n\t\t * @member {Archive} archive\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.archive = undefined;\n\n\t\t/**\n\t\t * @member {Store} storage\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.storage = undefined;\n\n\t\t/**\n\t\t * @member {Resources} resources\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.resources = undefined;\n\n\t\t/**\n\t\t * @member {Rendition} rendition\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.rendition = undefined;\n\n\t\t/**\n\t\t * @member {Container} container\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.container = undefined;\n\n\t\t/**\n\t\t * @member {Packaging} packaging\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.packaging = undefined;\n\n\t\t// this.toc = undefined;\n\t\tif (this.settings.store) {\n\t\t\tthis.store(this.settings.store);\n\t\t}\n\n\t\tif(url) {\n\t\t\tthis.open(url, this.settings.openAs).catch((error) => {\n\t\t\t\tvar err = new Error(\"Cannot load book at \"+ url );\n\t\t\t\tthis.emit(EVENTS.BOOK.OPEN_FAILED, err);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Open a epub or url\n\t * @param {string | ArrayBuffer} input Url, Path or ArrayBuffer\n\t * @param {string} [what=\"binary\", \"base64\", \"epub\", \"opf\", \"json\", \"directory\"] force opening as a certain type\n\t * @returns {Promise} of when the book has been loaded\n\t * @example book.open(\"/path/to/book.epub\")\n\t */\n\topen(input, what) {\n\t\tvar opening;\n\t\tvar type = what || this.determineType(input);\n\n\t\tif (type === INPUT_TYPE.BINARY) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.openEpub(input);\n\t\t} else if (type === INPUT_TYPE.BASE64) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.openEpub(input, type);\n\t\t} else if (type === INPUT_TYPE.EPUB) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.request(input, \"binary\", this.settings.requestCredentials)\n\t\t\t\t.then(this.openEpub.bind(this));\n\t\t} else if(type == INPUT_TYPE.OPF) {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openPackaging(this.url.Path.toString());\n\t\t} else if(type == INPUT_TYPE.MANIFEST) {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openManifest(this.url.Path.toString());\n\t\t} else {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openContainer(CONTAINER_PATH)\n\t\t\t\t.then(this.openPackaging.bind(this));\n\t\t}\n\n\t\treturn opening;\n\t}\n\n\t/**\n\t * Open an archived epub\n\t * @private\n\t * @param  {binary} data\n\t * @param  {string} [encoding]\n\t * @return {Promise}\n\t */\n\topenEpub(data, encoding) {\n\t\treturn this.unarchive(data, encoding || this.settings.encoding)\n\t\t\t.then(() => {\n\t\t\t\treturn this.openContainer(CONTAINER_PATH);\n\t\t\t})\n\t\t\t.then((packagePath) => {\n\t\t\t\treturn this.openPackaging(packagePath);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the epub container\n\t * @private\n\t * @param  {string} url\n\t * @return {string} packagePath\n\t */\n\topenContainer(url) {\n\t\treturn this.load(url)\n\t\t\t.then((xml) => {\n\t\t\t\tthis.container = new Container(xml);\n\t\t\t\treturn this.resolve(this.settings.packagePath || this.container.packagePath);\n\t\t\t\t// return this.resolve(this.container.packagePath);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the Open Packaging Format Xml\n\t * @private\n\t * @param  {string} url\n\t * @return {Promise}\n\t */\n\topenPackaging(url) {\n\t\tthis.path = new Path(url);\n\t\treturn this.load(url)\n\t\t\t.then((xml) => {\n\t\t\t\tthis.packaging = new Packaging(xml);\n\t\t\t\treturn this.unpack(this.packaging);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the manifest JSON\n\t * @private\n\t * @param  {string} url\n\t * @return {Promise}\n\t */\n\topenManifest(url) {\n\t\tthis.path = new Path(url);\n\t\treturn this.load(url)\n\t\t\t.then((json) => {\n\t\t\t\tthis.packaging = new Packaging();\n\t\t\t\tthis.packaging.load(json);\n\t\t\t\treturn this.unpack(this.packaging);\n\t\t\t});\n\t}\n\n\t/**\n\t * Load a resource from the Book\n\t * @param  {string} path path to the resource to load\n\t * @return {Promise}     returns a promise with the requested resource\n\t */\n\tload(path) {\n\t\tvar resolved = this.resolve(path);\n\t\tif(this.archived) {\n\t\t\treturn this.archive.request(resolved);\n\t\t} else {\n\t\t\treturn this.request(resolved, null, this.settings.requestCredentials, this.settings.requestHeaders);\n\t\t}\n\t}\n\n\t/**\n\t * Resolve a path to it's absolute position in the Book\n\t * @param  {string} path\n\t * @param  {boolean} [absolute] force resolving the full URL\n\t * @return {string}          the resolved path string\n\t */\n\tresolve(path, absolute) {\n\t\tif (!path) {\n\t\t\treturn;\n\t\t}\n\t\tvar resolved = path;\n\t\tvar isAbsolute = (path.indexOf(\"://\") > -1);\n\n\t\tif (isAbsolute) {\n\t\t\treturn path;\n\t\t}\n\n\t\tif (this.path) {\n\t\t\tresolved = this.path.resolve(path);\n\t\t}\n\n\t\tif(absolute != false && this.url) {\n\t\t\tresolved = this.url.resolve(resolved);\n\t\t}\n\n\t\treturn resolved;\n\t}\n\n\t/**\n\t * Get a canonical link to a path\n\t * @param  {string} path\n\t * @return {string} the canonical path string\n\t */\n\tcanonical(path) {\n\t\tvar url = path;\n\n\t\tif (!path) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (this.settings.canonical) {\n\t\t\turl = this.settings.canonical(path);\n\t\t} else {\n\t\t\turl = this.resolve(path, true);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t/**\n\t * Determine the type of they input passed to open\n\t * @private\n\t * @param  {string} input\n\t * @return {string}  binary | directory | epub | opf\n\t */\n\tdetermineType(input) {\n\t\tvar url;\n\t\tvar path;\n\t\tvar extension;\n\n\t\tif (this.settings.encoding === \"base64\") {\n\t\t\treturn INPUT_TYPE.BASE64;\n\t\t}\n\n\t\tif(typeof(input) != \"string\") {\n\t\t\treturn INPUT_TYPE.BINARY;\n\t\t}\n\n\t\turl = new Url(input);\n\t\tpath = url.path();\n\t\textension = path.extension;\n\n\t\tif (!extension) {\n\t\t\treturn INPUT_TYPE.DIRECTORY;\n\t\t}\n\n\t\tif(extension === \"epub\"){\n\t\t\treturn INPUT_TYPE.EPUB;\n\t\t}\n\n\t\tif(extension === \"opf\"){\n\t\t\treturn INPUT_TYPE.OPF;\n\t\t}\n\n\t\tif(extension === \"json\"){\n\t\t\treturn INPUT_TYPE.MANIFEST;\n\t\t}\n\t}\n\n\n\t/**\n\t * unpack the contents of the Books packaging\n\t * @private\n\t * @param {Packaging} packaging object\n\t */\n\tunpack(packaging) {\n\t\tthis.package = packaging; //TODO: deprecated this\n\n\t\tthis.spine.unpack(this.packaging, this.resolve.bind(this), this.canonical.bind(this));\n\n\t\tthis.resources = new Resources(this.packaging.manifest, {\n\t\t\tarchive: this.archive,\n\t\t\tresolver: this.resolve.bind(this),\n\t\t\trequest: this.request.bind(this),\n\t\t\treplacements: this.settings.replacements || (this.archived ? \"blobUrl\" : \"base64\")\n\t\t});\n\n\t\tthis.loadNavigation(this.packaging).then(() => {\n\t\t\t// this.toc = this.navigation.toc;\n\t\t\tthis.loading.navigation.resolve(this.navigation);\n\t\t});\n\n\t\tif (this.packaging.coverPath) {\n\t\t\tthis.cover = this.resolve(this.packaging.coverPath);\n\t\t}\n\t\t// Resolve promises\n\t\tthis.loading.manifest.resolve(this.packaging.manifest);\n\t\tthis.loading.metadata.resolve(this.packaging.metadata);\n\t\tthis.loading.spine.resolve(this.spine);\n\t\tthis.loading.cover.resolve(this.cover);\n\t\tthis.loading.resources.resolve(this.resources);\n\t\tthis.loading.pageList.resolve(this.pageList);\n\n\t\tthis.isOpen = true;\n\n\t\tif(this.archived || this.settings.replacements && this.settings.replacements != \"none\") {\n\t\t\tthis.replacements().then(() => {\n\t\t\t\tthis.opening.resolve(this);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t\t} else {\n\t\t\t// Resolve book opened promise\n\t\t\tthis.opening.resolve(this);\n\t\t}\n\n\t}\n\n\t/**\n\t * Load Navigation and PageList from package\n\t * @private\n\t * @param {Packaging} packaging\n\t */\n\tloadNavigation(packaging) {\n\t\tlet navPath = packaging.navPath || packaging.ncxPath;\n\t\tlet toc = packaging.toc;\n\n\t\t// From json manifest\n\t\tif (toc) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.navigation = new Navigation(toc);\n\n\t\t\t\tif (packaging.pageList) {\n\t\t\t\t\tthis.pageList = new PageList(packaging.pageList); // TODO: handle page lists from Manifest\n\t\t\t\t}\n\n\t\t\t\tresolve(this.navigation);\n\t\t\t});\n\t\t}\n\n\t\tif (!navPath) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.navigation = new Navigation();\n\t\t\t\tthis.pageList = new PageList();\n\n\t\t\t\tresolve(this.navigation);\n\t\t\t});\n\t\t}\n\n\t\tnavPath = new Path(this.resolve(navPath));\n\t\treturn this.load(navPath.path, \"xml\")\n\t\t\t.then((xml) => {\n\t\t\t\tthis.navigation = new Navigation(xml, navPath, this.canonical.bind(this));\n\t\t\t\tthis.pageList = new PageList(xml, navPath, this.canonical.bind(this));\n\t\t\t\treturn this.navigation;\n\t\t\t});\n\t}\n\n\t/**\n\t * Gets a Section of the Book from the Spine\n\t * Alias for `book.spine.get`\n\t * @param {string} target\n\t * @return {Section}\n\t */\n\tsection(target) {\n\t\treturn this.spine.get(target);\n\t}\n\n\t/**\n\t * Sugar to render a book to an element\n\t * @param  {element | string} element element or string to add a rendition to\n\t * @param  {object} [options]\n\t * @return {Rendition}\n\t */\n\trenderTo(element, options) {\n\t\tthis.rendition = new Rendition(this, options);\n\t\tthis.rendition.attachTo(element);\n\n\t\treturn this.rendition;\n\t}\n\n\t/**\n\t * Set if request should use withCredentials\n\t * @param {boolean} credentials\n\t */\n\tsetRequestCredentials(credentials) {\n\t\tthis.settings.requestCredentials = credentials;\n\t}\n\n\t/**\n\t * Set headers request should use\n\t * @param {object} headers\n\t */\n\tsetRequestHeaders(headers) {\n\t\tthis.settings.requestHeaders = headers;\n\t}\n\n\t/**\n\t * Unarchive a zipped epub\n\t * @private\n\t * @param  {binary} input epub data\n\t * @param  {string} [encoding]\n\t * @return {Archive}\n\t */\n\tunarchive(input, encoding) {\n\t\tthis.archive = new Archive();\n\t\treturn this.archive.open(input, encoding);\n\t}\n\n\t/**\n\t * Store the epubs contents\n\t * @private\n\t * @param  {binary} input epub data\n\t * @param  {string} [encoding]\n\t * @return {Store}\n\t */\n\tstore(name) {\n\t\t// Use \"blobUrl\" or \"base64\" for replacements\n\t\tlet replacementsSetting = this.settings.replacements && this.settings.replacements !== \"none\";\n\t\t// Save original url\n\t\tlet originalUrl = this.url;\n\t\t// Save original request method\n\t\tlet requester = this.settings.requestMethod || request.bind(this);\n\t\t// Create new Store\n\t\tthis.storage = new Store(name, requester, this.resolve.bind(this));\n\t\t// Replace request method to go through store\n\t\tthis.request = this.storage.request.bind(this.storage);\n\n\t\tthis.opened.then(() => {\n\t\t\tif (this.archived) {\n\t\t\t\tthis.storage.requester = this.archive.request.bind(this.archive);\n\t\t\t}\n\t\t\t// Substitute hook\n\t\t\tlet substituteResources = (output, section) => {\n\t\t\t\tsection.output = this.resources.substitute(output, section.url);\n\t\t\t};\n\n\t\t\t// Set to use replacements\n\t\t\tthis.resources.settings.replacements = replacementsSetting || \"blobUrl\";\n\t\t\t// Create replacement urls\n\t\t\tthis.resources.replacements().\n\t\t\t\tthen(() => {\n\t\t\t\t\treturn this.resources.replaceCss();\n\t\t\t\t});\n\n\t\t\tthis.storage.on(\"offline\", () => {\n\t\t\t\t// Remove url to use relative resolving for hrefs\n\t\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\t\t// Add hook to replace resources in contents\n\t\t\t\tthis.spine.hooks.serialize.register(substituteResources);\n\t\t\t});\n\n\t\t\tthis.storage.on(\"online\", () => {\n\t\t\t\t// Restore original url\n\t\t\t\tthis.url = originalUrl;\n\t\t\t\t// Remove hook\n\t\t\t\tthis.spine.hooks.serialize.deregister(substituteResources);\n\t\t\t});\n\n\t\t});\n\n\t\treturn this.storage;\n\t}\n\n\t/**\n\t * Get the cover url\n\t * @return {string} coverUrl\n\t */\n\tcoverUrl() {\n\t\tvar retrieved = this.loaded.cover.\n\t\t\tthen((url) => {\n\t\t\t\tif(this.archived) {\n\t\t\t\t\t// return this.archive.createUrl(this.cover);\n\t\t\t\t\treturn this.resources.get(this.cover);\n\t\t\t\t}else{\n\t\t\t\t\treturn this.cover;\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn retrieved;\n\t}\n\n\t/**\n\t * Load replacement urls\n\t * @private\n\t * @return {Promise} completed loading urls\n\t */\n\treplacements() {\n\t\tthis.spine.hooks.serialize.register((output, section) => {\n\t\t\tsection.output = this.resources.substitute(output, section.url);\n\t\t});\n\n\t\treturn this.resources.replacements().\n\t\t\tthen(() => {\n\t\t\t\treturn this.resources.replaceCss();\n\t\t\t});\n\t}\n\n\t/**\n\t * Find a DOM Range for a given CFI Range\n\t * @param  {EpubCFI} cfiRange a epub cfi range\n\t * @return {Range}\n\t */\n\tgetRange(cfiRange) {\n\t\tvar cfi = new EpubCFI(cfiRange);\n\t\tvar item = this.spine.get(cfi.spinePos);\n\t\tvar _request = this.load.bind(this);\n\t\tif (!item) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\treject(\"CFI could not be found\");\n\t\t\t});\n\t\t}\n\t\treturn item.load(_request).then(function (contents) {\n\t\t\tvar range = cfi.toRange(item.document);\n\t\t\treturn range;\n\t\t});\n\t}\n\n\t/**\n\t * Generates the Book Key using the identifer in the manifest or other string provided\n\t * @param  {string} [identifier] to use instead of metadata identifier\n\t * @return {string} key\n\t */\n\tkey(identifier) {\n\t\tvar ident = identifier || this.packaging.metadata.identifier || this.url.filename;\n\t\treturn `epubjs:${EPUBJS_VERSION}:${ident}`;\n\t}\n\n\t/**\n\t * Destroy the Book and all associated objects\n\t */\n\tdestroy() {\n\t\tthis.opened = undefined;\n\t\tthis.loading = undefined;\n\t\tthis.loaded = undefined;\n\t\tthis.ready = undefined;\n\n\t\tthis.isOpen = false;\n\t\tthis.isRendered = false;\n\n\t\tthis.spine && this.spine.destroy();\n\t\tthis.locations && this.locations.destroy();\n\t\tthis.pageList && this.pageList.destroy();\n\t\tthis.archive && this.archive.destroy();\n\t\tthis.resources && this.resources.destroy();\n\t\tthis.container && this.container.destroy();\n\t\tthis.packaging && this.packaging.destroy();\n\t\tthis.rendition && this.rendition.destroy();\n\n\t\tthis.spine = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.pageList = undefined;\n\t\tthis.archive = undefined;\n\t\tthis.resources = undefined;\n\t\tthis.container = undefined;\n\t\tthis.packaging = undefined;\n\t\tthis.rendition = undefined;\n\n\t\tthis.navigation = undefined;\n\t\tthis.url = undefined;\n\t\tthis.path = undefined;\n\t\tthis.archived = false;\n\t}\n\n}\n\n//-- Enable binding events to book\nEventEmitter(Book.prototype);\n\nexport default Book;\n","/* From https://github.com/webcomponents/URL/blob/master/url.js\n * Added UMD, file link handling */\n\n/* Any copyright is dedicated to the Public Domain.\n * http://creativecommons.org/publicdomain/zero/1.0/ */\n'use strict';\n(function (root, factory) {\n    // Fix for this being undefined in modules\n    if (!root) {\n      root = window || global;\n    }\n    if (typeof module === 'object' && module.exports) {\n        // Node\n        module.exports = factory(root);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else {\n        // Browser globals (root is window)\n        root.URL = factory(root);\n  }\n}(this, function (scope) {\n  // feature detect for URL constructor\n  var hasWorkingUrl = false;\n  if (!scope.forceJURL) {\n    try {\n      var u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      hasWorkingUrl = u.href === 'http://a/c%20d';\n    } catch(e) {}\n  }\n\n  if (hasWorkingUrl)\n    return scope.URL;\n\n  var relative = Object.create(null);\n  relative['ftp'] = 21;\n  relative['file'] = 0;\n  relative['gopher'] = 70;\n  relative['http'] = 80;\n  relative['https'] = 443;\n  relative['ws'] = 80;\n  relative['wss'] = 443;\n\n  var relativePathDotMapping = Object.create(null);\n  relativePathDotMapping['%2e'] = '.';\n  relativePathDotMapping['.%2e'] = '..';\n  relativePathDotMapping['%2e.'] = '..';\n  relativePathDotMapping['%2e%2e'] = '..';\n\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n\n  function IDNAToASCII(h) {\n    if ('' == h) {\n      invalid.call(this)\n    }\n    // XXX\n    return h.toLowerCase()\n  }\n\n  function percentEscape(c) {\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ? `\n       [0x22, 0x23, 0x3C, 0x3E, 0x3F, 0x60].indexOf(unicode) == -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  function percentEscapeQuery(c) {\n    // XXX This actually needs to encode c using encoding and then\n    // convert the bytes one-by-one.\n\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ` (do not escape '?')\n       [0x22, 0x23, 0x3C, 0x3E, 0x60].indexOf(unicode) == -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  var EOF = undefined,\n      ALPHA = /[a-zA-Z]/,\n      ALPHANUMERIC = /[a-zA-Z0-9\\+\\-\\.]/;\n\n  function parse(input, stateOverride, base) {\n    function err(message) {\n      errors.push(message)\n    }\n\n    var state = stateOverride || 'scheme start',\n        cursor = 0,\n        buffer = '',\n        seenAt = false,\n        seenBracket = false,\n        errors = [];\n\n    loop: while ((input[cursor - 1] != EOF || cursor == 0) && !this._isInvalid) {\n      var c = input[cursor];\n      switch (state) {\n        case 'scheme start':\n          if (c && ALPHA.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n            state = 'scheme';\n          } else if (!stateOverride) {\n            buffer = '';\n            state = 'no scheme';\n            continue;\n          } else {\n            err('Invalid scheme.');\n            break loop;\n          }\n          break;\n\n        case 'scheme':\n          if (c && ALPHANUMERIC.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n          } else if (':' == c) {\n            this._scheme = buffer;\n            buffer = '';\n            if (stateOverride) {\n              break loop;\n            }\n            if (isRelativeScheme(this._scheme)) {\n              this._isRelative = true;\n            }\n            if ('file' == this._scheme) {\n              state = 'relative';\n            } else if (this._isRelative && base && base._scheme == this._scheme) {\n              state = 'relative or authority';\n            } else if (this._isRelative) {\n              state = 'authority first slash';\n            } else {\n              state = 'scheme data';\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            cursor = 0;\n            state = 'no scheme';\n            continue;\n          } else if (EOF == c) {\n            break loop;\n          } else {\n            err('Code point not allowed in scheme: ' + c)\n            break loop;\n          }\n          break;\n\n        case 'scheme data':\n          if ('?' == c) {\n            this._query = '?';\n            state = 'query';\n          } else if ('#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else {\n            // XXX error handling\n            if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n              this._schemeData += percentEscape(c);\n            }\n          }\n          break;\n\n        case 'no scheme':\n          if (!base || !(isRelativeScheme(base._scheme))) {\n            err('Missing scheme.');\n            invalid.call(this);\n          } else {\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative or authority':\n          if ('/' == c && '/' == input[cursor+1]) {\n            state = 'authority ignore slashes';\n          } else {\n            err('Expected /, got: ' + c);\n            state = 'relative';\n            continue\n          }\n          break;\n\n        case 'relative':\n          this._isRelative = true;\n          if ('file' != this._scheme)\n            this._scheme = base._scheme;\n          if (EOF == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._username = base._username;\n            this._password = base._password;\n            break loop;\n          } else if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c)\n              err('\\\\ is an invalid code point.');\n            state = 'relative slash';\n          } else if ('?' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = '?';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'query';\n          } else if ('#' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._fragment = '#';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'fragment';\n          } else {\n            var nextC = input[cursor+1]\n            var nextNextC = input[cursor+2]\n            if (\n              'file' != this._scheme || !ALPHA.test(c) ||\n              (nextC != ':' && nextC != '|') ||\n              (EOF != nextNextC && '/' != nextNextC && '\\\\' != nextNextC && '?' != nextNextC && '#' != nextNextC)) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n              this._path = base._path.slice();\n              this._path.pop();\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'relative slash':\n          if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c) {\n              err('\\\\ is an invalid code point.');\n            }\n            if ('file' == this._scheme) {\n              state = 'file host';\n            } else {\n              state = 'authority ignore slashes';\n            }\n          } else {\n            if ('file' != this._scheme) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'authority first slash':\n          if ('/' == c) {\n            state = 'authority second slash';\n          } else {\n            err(\"Expected '/', got: \" + c);\n            state = 'authority ignore slashes';\n            continue;\n          }\n          break;\n\n        case 'authority second slash':\n          state = 'authority ignore slashes';\n          if ('/' != c) {\n            err(\"Expected '/', got: \" + c);\n            continue;\n          }\n          break;\n\n        case 'authority ignore slashes':\n          if ('/' != c && '\\\\' != c) {\n            state = 'authority';\n            continue;\n          } else {\n            err('Expected authority, got: ' + c);\n          }\n          break;\n\n        case 'authority':\n          if ('@' == c) {\n            if (seenAt) {\n              err('@ already seen.');\n              buffer += '%40';\n            }\n            seenAt = true;\n            for (var i = 0; i < buffer.length; i++) {\n              var cp = buffer[i];\n              if ('\\t' == cp || '\\n' == cp || '\\r' == cp) {\n                err('Invalid whitespace in authority.');\n                continue;\n              }\n              // XXX check URL code points\n              if (':' == cp && null === this._password) {\n                this._password = '';\n                continue;\n              }\n              var tempC = percentEscape(cp);\n              (null !== this._password) ? this._password += tempC : this._username += tempC;\n            }\n            buffer = '';\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            cursor -= buffer.length;\n            buffer = '';\n            state = 'host';\n            continue;\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'file host':\n          if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            if (buffer.length == 2 && ALPHA.test(buffer[0]) && (buffer[1] == ':' || buffer[1] == '|')) {\n              state = 'relative path';\n            } else if (buffer.length == 0) {\n              state = 'relative path start';\n            } else {\n              this._host = IDNAToASCII.call(this, buffer);\n              buffer = '';\n              state = 'relative path start';\n            }\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid whitespace in file host.');\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'host':\n        case 'hostname':\n          if (':' == c && !seenBracket) {\n            // XXX host parsing\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'port';\n            if ('hostname' == stateOverride) {\n              break loop;\n            }\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'relative path start';\n            if (stateOverride) {\n              break loop;\n            }\n            continue;\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            if ('[' == c) {\n              seenBracket = true;\n            } else if (']' == c) {\n              seenBracket = false;\n            }\n            buffer += c;\n          } else {\n            err('Invalid code point in host/hostname: ' + c);\n          }\n          break;\n\n        case 'port':\n          if (/[0-9]/.test(c)) {\n            buffer += c;\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c || stateOverride) {\n            if ('' != buffer) {\n              var temp = parseInt(buffer, 10);\n              if (temp != relative[this._scheme]) {\n                this._port = temp + '';\n              }\n              buffer = '';\n            }\n            if (stateOverride) {\n              break loop;\n            }\n            state = 'relative path start';\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid code point in port: ' + c);\n          } else {\n            invalid.call(this);\n          }\n          break;\n\n        case 'relative path start':\n          if ('\\\\' == c)\n            err(\"'\\\\' not allowed in path.\");\n          state = 'relative path';\n          if ('/' != c && '\\\\' != c) {\n            continue;\n          }\n          break;\n\n        case 'relative path':\n          if (EOF == c || '/' == c || '\\\\' == c || (!stateOverride && ('?' == c || '#' == c))) {\n            if ('\\\\' == c) {\n              err('\\\\ not allowed in relative path.');\n            }\n            var tmp;\n            if (tmp = relativePathDotMapping[buffer.toLowerCase()]) {\n              buffer = tmp;\n            }\n            if ('..' == buffer) {\n              this._path.pop();\n              if ('/' != c && '\\\\' != c) {\n                this._path.push('');\n              }\n            } else if ('.' == buffer && '/' != c && '\\\\' != c) {\n              this._path.push('');\n            } else if ('.' != buffer) {\n              if ('file' == this._scheme && this._path.length == 0 && buffer.length == 2 && ALPHA.test(buffer[0]) && buffer[1] == '|') {\n                buffer = buffer[0] + ':';\n              }\n              this._path.push(buffer);\n            }\n            buffer = '';\n            if ('?' == c) {\n              this._query = '?';\n              state = 'query';\n            } else if ('#' == c) {\n              this._fragment = '#';\n              state = 'fragment';\n            }\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            buffer += percentEscape(c);\n          }\n          break;\n\n        case 'query':\n          if (!stateOverride && '#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._query += percentEscapeQuery(c);\n          }\n          break;\n\n        case 'fragment':\n          if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._fragment += c;\n          }\n          break;\n      }\n\n      cursor++;\n    }\n  }\n\n  function clear() {\n    this._scheme = '';\n    this._schemeData = '';\n    this._username = '';\n    this._password = null;\n    this._host = '';\n    this._port = '';\n    this._path = [];\n    this._query = '';\n    this._fragment = '';\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n\n  // Does not process domain names or IP addresses.\n  // Does not handle encoding for the query parameter.\n  function jURL(url, base /* , encoding */) {\n    if (base !== undefined && !(base instanceof jURL))\n      base = new jURL(String(base));\n\n    this._url = url;\n    clear.call(this);\n\n    var input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n    // encoding = encoding || 'utf-8'\n\n    parse.call(this, input, null, base);\n  }\n\n  jURL.prototype = {\n    toString: function() {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid)\n        return this._url;\n\n      var authority = '';\n      if ('' != this._username || null != this._password) {\n        authority = this._username +\n            (null != this._password ? ':' + this._password : '') + '@';\n      }\n\n      return this.protocol +\n          (this._isRelative ? '//' + authority + this.host : '') +\n          this.pathname + this._query + this._fragment;\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n\n    get protocol() {\n      return this._scheme + ':';\n    },\n    set protocol(protocol) {\n      if (this._isInvalid)\n        return;\n      parse.call(this, protocol + ':', 'scheme start');\n    },\n\n    get host() {\n      return this._isInvalid ? '' : this._port ?\n          this._host + ':' + this._port : this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, host, 'host');\n    },\n\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, hostname, 'hostname');\n    },\n\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, port, 'port');\n    },\n\n    get pathname() {\n      return this._isInvalid ? '' : this._isRelative ?\n          '/' + this._path.join('/') : this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      this._path = [];\n      parse.call(this, pathname, 'relative path start');\n    },\n\n    get search() {\n      return this._isInvalid || !this._query || '?' == this._query ?\n          '' : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      this._query = '?';\n      if ('?' == search[0])\n        search = search.slice(1);\n      parse.call(this, search, 'query');\n    },\n\n    get hash() {\n      return this._isInvalid || !this._fragment || '#' == this._fragment ?\n          '' : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid)\n        return;\n      this._fragment = '#';\n      if ('#' == hash[0])\n        hash = hash.slice(1);\n      parse.call(this, hash, 'fragment');\n    },\n\n    get origin() {\n      var host;\n      if (this._isInvalid || !this._scheme) {\n        return '';\n      }\n      // javascript: Gecko returns String(\"\"), WebKit/Blink String(\"null\")\n      // Gecko throws error for \"data://\"\n      // data: Gecko returns \"\", Blink returns \"data://\", WebKit returns \"null\"\n      // Gecko returns String(\"\") for file: mailto:\n      // WebKit/Blink returns String(\"SCHEME://\") for file: mailto:\n      switch (this._scheme) {\n        case 'file':\n          return 'file://' // EPUBJS Added\n        case 'data':\n        case 'javascript':\n        case 'mailto':\n          return 'null';\n      }\n      host = this.host;\n      if (!host) {\n        return '';\n      }\n      return this._scheme + '://' + host;\n    }\n  };\n\n  // Copy over the static methods\n  var OriginalURL = scope.URL;\n  if (OriginalURL) {\n    jURL.createObjectURL = function(blob) {\n      // IE extension allows a second optional options argument.\n      // http://msdn.microsoft.com/en-us/library/ie/hh772302(v=vs.85).aspx\n      return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n    };\n    jURL.revokeObjectURL = function(url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n\n  return jURL;\n}));\n","import Book from \"./book\";\nimport Rendition from \"./rendition\";\nimport CFI from \"./epubcfi\";\nimport Contents from \"./contents\";\nimport * as utils from \"./utils/core\";\nimport { EPUBJS_VERSION } from \"./utils/constants\";\nimport '../libs/url/url-polyfill'\n\nimport IframeView from \"./managers/views/iframe\";\nimport DefaultViewManager from \"./managers/default\";\nimport ContinuousViewManager from \"./managers/continuous\";\n\n/**\n * Creates a new Book\n * @param {string|ArrayBuffer} url URL, Path or ArrayBuffer\n * @param {object} options to pass to the book\n * @returns {Book} a new Book object\n * @example ePub(\"/path/to/book.epub\", {})\n */\nfunction ePub(url, options) {\n\treturn new Book(url, options);\n}\n\nePub.VERSION = EPUBJS_VERSION;\n\nif (typeof(global) !== \"undefined\") {\n\tglobal.EPUBJS_VERSION = EPUBJS_VERSION;\n}\n\nePub.Book = Book;\nePub.Rendition = Rendition;\nePub.Contents = Contents;\nePub.CFI = CFI;\nePub.utils = utils;\n\nexport default ePub;\n","'use strict';\n\nif (!process) {\n  var process = {\n    \"cwd\" : function () { return '/' }\n  };\n}\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + path);\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47/*/*/)\n      break;\n    else\n      code = 47/*/*/;\n    if (code === 47/*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 ||\n            res.charCodeAt(res.length - 1) !== 46/*.*/ ||\n            res.charCodeAt(res.length - 2) !== 46/*.*/) {\n          if (res.length > 2) {\n            var start = res.length - 1;\n            var j = start;\n            for (; j >= 0; --j) {\n              if (res.charCodeAt(j) === 47/*/*/)\n                break;\n            }\n            if (j !== start) {\n              if (j === -1)\n                res = '';\n              else\n                res = res.slice(0, j);\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46/*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base ||\n    ((pathObject.name || '') + (pathObject.ext || ''));\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47/*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0)\n      return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47/*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47/*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute)\n      path = '.';\n    if (path.length > 0 && trailingSeparator)\n      path += '/';\n\n    if (isAbsolute)\n      return '/' + path;\n    return path;\n  },\n\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47/*/*/;\n  },\n\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to)\n      return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to)\n      return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47/*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = (fromEnd - fromStart);\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47/*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = (toEnd - toStart);\n\n    // Compare paths to find the longest common path from root\n    var length = (fromLen < toLen ? fromLen : toLen);\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47/*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47/*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47/*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47/*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47/*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0)\n      return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = (code === 47/*/*/);\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1)\n      return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1)\n      return '//';\n    return path.slice(0, end);\n  },\n\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string')\n      throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path)\n        return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1)\n        return '';\n      return path.slice(start, end);\n    }\n  },\n\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError(\n        'Parameter \"pathObject\" must be an object, not ' + typeof(pathObject)\n      );\n    }\n    return _format('/', pathObject);\n  },\n\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0)\n      return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = (code === 47/*/*/);\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path.slice(1, end);\n        else\n          ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0)\n      ret.dir = path.slice(0, startPart - 1);\n    else if (isAbsolute)\n      ret.dir = '/';\n\n    return ret;\n  },\n\n\n  sep: '/',\n  delimiter: ':',\n  posix: null\n};\n\n\nmodule.exports = posix;\n","class PrefabViews {\n\tconstructor(container) {\n\t\tthis.container = container;\n\t\tthis._views = [];\n\t\tthis.length = 0;\n\t\tthis.hidden = false;\n\t}\n\n\tall() {\n\t\treturn this._views;\n\t}\n\n\tfirst() {\n\t\treturn this._views[0];\n\t}\n\n\tlast() {\n\t\treturn this._views[this._views.length-1];\n\t}\n\n\tindexOf(view) {\n\t\treturn this._views.indexOf(view);\n\t}\n\n\tslice() {\n\t\treturn this._views.slice.apply(this._views, arguments);\n\t}\n\n\tget(i) {\n\t\treturn this._views[i];\n\t}\n\n\tappend(view){\n\t\tvar check = false;\n\t\tthis.forEach(function(v) {\n\t\t\tif ( v.section.href == view.section.href ) { check = true; }\n\t\t})\n\t\tif ( check ) { return view; }\n\t\t// if ( check ) { console.log(\"AHOY views.append WUT\", view.section.href)}\n\t\tthis._views.push(view);\n\t\tthis._views.sort(function(a,b) {return (a.section.href > b.section.href) ? 1 : ((b.section.href > a.section.href) ? -1 : 0);});\n\t\tif(this.container && view.element.dataset.reused != 'true'){\n\t\t\tthis.container.appendChild(view.element);\n\t\t}\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tdump() {\n\t\treturn this._views.map(function(v) { return v.section.href });\n\t}\n\n\tprepend(view){\n\t\tthis._views.unshift(view);\n\t\tif(this.container && view.element.dataset.reused != 'true'){\n\t\t\tthis.container.insertBefore(view.element, this.container.firstChild);\n\t\t}\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tinsert(view, index) {\n\t\tthis._views.splice(index, 0, view);\n\n\t\tif(this.container && view.element.dataset.reused != 'true'){\n\t\t\tif(index < this.container.children.length){\n\t\t\t\tthis.container.insertBefore(view.element, this.container.children[index]);\n\t\t\t} else {\n\t\t\t\tthis.container.appendChild(view.element);\n\t\t\t}\n\t\t}\n\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tremove(view) {\n\t\tvar index = this._views.indexOf(view);\n\n\t\tif(index > -1) {\n\t\t\tthis._views.splice(index, 1);\n\t\t}\n\n\n\t\tthis.destroy(view);\n\n\t\tthis.length--;\n\t}\n\n\tdestroy(view) {\n\t\tif(view.displayed){\n\t\t\tview.destroy();\n\t\t}\n\n\t\t// if(this.container && view.element.dataset.reused != 'true'){\n\t\t// \t this.container.removeChild(view.element);\n\t\t// }\n\t\tview = null;\n\t}\n\n\t// Iterators\n\n\tforEach() {\n\t\treturn this._views.forEach.apply(this._views, arguments);\n\t}\n\n\tclear(){\n\t\t// Remove all views\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tif(!this.length) return;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tthis.destroy(view);\n\t\t}\n\n\t\tthis._views = [];\n\t\tthis.length = 0;\n\t}\n\n\tfind(section){\n\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed && view.section.index == section.index) {\n\t\t\t\treturn view;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tdisplayed(){\n\t\tvar displayed = [];\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tdisplayed.push(view);\n\t\t\t}\n\t\t}\n\t\treturn displayed;\n\t}\n\n\tshow(){\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tview.show();\n\t\t\t}\n\t\t}\n\t\tthis.hidden = false;\n\t}\n\n\thide(){\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tview.hide();\n\t\t\t}\n\t\t}\n\t\tthis.hidden = true;\n\t}\n}\n\nexport default PrefabViews;\n","import {extend, defer, requestAnimationFrame} from \"epubjs/src/utils/core\";\nimport DefaultViewManager from \"epubjs/src/managers/default\";\nimport ContinuousViewManager from \"epubjs/src/managers/continuous/index\" ;\nimport PrefabViews from \"../helpers/prefab\";\n\nimport { EVENTS } from \"epubjs/src/utils/constants\";\nimport debounce from \"lodash/debounce\";\n\nclass PrePaginatedContinuousViewManager extends ContinuousViewManager {\n    constructor(options) {\n    super(options);\n\n    this.name = \"prepaginated\";\n\n    this._manifest = null;\n    this._spine = [];\n    this.settings.scale = this.settings.scale || 1.0;\n  }\n\n  render(element, size){\n    var scale = this.settings.scale;\n    this.settings.scale = null; // we don't want the stage to scale\n    ContinuousViewManager.prototype.render.call(this, element, size);\n    // Views array methods\n    // use prefab views\n    this.settings.scale = scale;\n    this.views = new PrefabViews(this.container);\n  }\n\n  onResized(e) {\n    if (this.resizeTimeout) {\n      clearTimeout(this.resizeTimeout);\n    }\n    console.log(\"AHOY PREPAGINATED onResized queued\");\n    this.resizeTimeout = setTimeout(function() {\n      this.resize();\n      console.log(\"AHOY PREPAGINATED onResized actual\");\n      this.resizeTimeout = null;\n    }.bind(this), 500);\n    // this.resize();\n  }\n\n  resize(width, height) {\n    var self = this;\n\n    ContinuousViewManager.prototype.resize.call(this, width, height);\n    this._redrawViews();\n  }\n\n  _redrawViews() {\n    var self = this;\n    for(var i = 0; i < self._spine.length; i++) {\n      var href = self._spine[i];\n      // // console.log(\"AHOY DRAWING\", href);\n      var section_ = self._manifest[href];\n      // // var r = self.container.offsetWidth / section_.viewport.width;\n      // // var h = Math.floor(dim.height * r);\n      // var w = self.layout.columnWidth + ( self.layout.columnWidth * 0.10 );\n      // var r = w / section_.viewport.width;\n      // var h = Math.floor(section_.viewport.height * r);\n\n      var h, w;\n      [ w, h ] = self.sizeToViewport(section_);\n\n      var div = self.container.querySelector(`div.epub-view[ref=\"${section_.index}\"]`);\n      div.style.width = `${w}px`;\n      div.style.height = `${h}px`;\n      div.setAttribute('original-height', h);\n      div.setAttribute('layout-height', h);\n\n      var view = this.views.find(section_);\n      if ( view ) {\n          view.size(w, h);\n      }\n    }\n  }\n\n  // RRE - debugging\n  createView(section) {\n\n    var view = this.views.find(section);\n    if ( view ) {\n      return view;\n    }\n\n    var w, h;\n    [ w, h ] = this.sizeToViewport(section);\n    var viewSettings = Object.assign({}, this.viewSettings);\n    viewSettings.layout = Object.assign( Object.create( Object.getPrototypeOf(this.viewSettings.layout)), this.viewSettings.layout);\n    viewSettings.layout.height = h;\n    viewSettings.layout.columnWidth = w;\n    var view = new this.View(section, viewSettings);\n    return view;\n  }\n\n  display(section, target){\n    var self = this;\n    var promises = [];\n\n    this.q.clear();\n    var display = new defer();\n    var promises = [];\n    this.faking = {};\n\n    if ( ! this._manifest ) {\n      this.emit(\"building\");\n      self._manifest = {};\n      var _buildManifest = function(section_) {\n        self._manifest[section_.href] = false;\n        if ( self.settings.viewports && self.settings.viewports[section_.href] ) {\n          section_.viewport = self.settings.viewports[section_.href];\n          self._manifest[section_.href] = section_;\n        } else {\n          self.q.enqueue(() => {\n            section_.load(self.request).then(function(contents) {\n              var meta = contents.querySelector('meta[name=\"viewport\"]');\n              var value = meta.getAttribute('content');\n              var tmp = value.split(\",\");\n              var key = section_.href;\n              var idx = self._spine.indexOf(key);\n              self.emit(\"building\", { index: idx + 1, total: self._spine.length });\n              section_.viewport = {};\n              self._manifest[key] = section_;\n              // self._manifest[key] = { viewport : {} };\n              // self._manifest[key].index = section_.index;\n              // self._manifest[key].href = section_.href;\n              var viewport_width = tmp[0].replace('width=','');\n              var viewport_height = tmp[1].replace('height=','');\n              if ( ! viewport_height.match(/^\\d+$/) ) {\n                viewport_width = viewport_height = 'auto';\n              } else {\n                viewport_width = parseInt(viewport_width, 10);\n                viewport_height = parseInt(viewport_height, 10);\n              }\n              self._manifest[key].viewport.width = viewport_width;\n              self._manifest[key].viewport.height = viewport_height;\n              self.faking[key] = self._manifest[key].viewport;\n            })\n          });\n        }\n      }\n\n      // can we build a manifest here?\n      var prev_ = section.prev();\n      while ( prev_ ) {\n        self._spine.unshift(prev_.href);\n        _buildManifest(prev_);\n        prev_ = prev_.prev();\n      }\n\n      self._spine.push(section.href);\n      _buildManifest(section);\n\n      var next_ = section.next();\n      while ( next_ ) {\n        self._spine.push(next_.href);\n        _buildManifest(next_);\n        next_ = next_.next();\n      }\n\n      console.log(\"AHOY PRE-PAGINATED\", promises.length);\n    }\n\n    var _display = function() {\n\n      var check = document.querySelector('.epub-view');\n      if ( ! check ) {\n        self._max_height = self._max_viewport_height = 0;\n        self._max_width = self._max_viewport_width = 0;\n        console.log(\"AHOY DRAWING\", self._spine.length);\n        for(var i = 0; i < self._spine.length; i++) {\n          var href = self._spine[i];\n          var section_ = self._manifest[href];\n          var w, h;\n          [w, h] = self.sizeToViewport(section_);\n\n          self.container.innerHTML += `<div class=\"epub-view\" ref=\"${section_.index}\" data-href=\"${section_.href}\" style=\"width: ${w}px; height: ${h}px; text-align: center; margin-left: auto; margin-right: auto\"></div>`;\n          var div = self.container.querySelector(`div.epub-view[ref=\"${section_.index}\"]`);\n          // div.setAttribute('use-')\n          div.setAttribute('original-height', h);\n          div.setAttribute('layout-height', h);\n\n          if ( window.debugManager ) {\n            div.style.backgroundImage = `url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 32' width='300' height='32'%3e%3cstyle%3e.small %7b fill: rgba(0,0,0,0.3);%7d%3c/style%3e%3ctext x='0' y='25' class='small'%3e${section_.href}%3c/text%3e%3c/svg%3e\")`;\n            var colorR = Math.floor(Math.random() * 100).toString();\n            var colorG = Math.floor(Math.random() * 100).toString();\n            var colorB = Math.floor(Math.random() * 100).toString();\n            div.style.backgroundColor = `#${colorR}${colorG}${colorB}`;\n          }\n        }\n      }\n\n      // find the <div> with this section\n      // console.log(\"AHOY continuous.display START\", section.href);\n      var div = self.container.querySelector(`div.epub-view[ref=\"${section.index}\"]`);\n      div.scrollIntoView();\n\n      // this.q.clear();\n      // return check ? this.update() : this.check();\n      // var retval = check ? this.update() : this.check();\n      var retval = this.check();\n            console.log(\"AHOY DISPLAY\", check ? \"UPDATE\" : \"CHECK\", retval);\n      retval.then(function() {\n        this.q.clear();\n                console.log(\"AHOY MANAGER BUILT\");\n        this.emit(\"built\");\n        return display.resolve();\n      }.bind(this));\n\n      // return DefaultViewManager.prototype.display.call(this, section, target)\n      //  .then(function () {\n      //    return this.fill();\n      //  }.bind(this));\n\n            return retval;\n    }.bind(this);\n\n    // // promises.push(_display);\n    // while(promises.length) {\n    //  this.q.enqueue(promises.shift);\n    // }\n\n    // console.log(\"AHOY PREPAGINATED\", this.q._q.length);\n    // this.q.enqueue().then((result) => {\n    //  display.resolve();\n    // })\n\n    var q = function() {\n      return this.q.enqueue((result) => {\n        var waiting = 0;\n        for(var i = 0; i < self._spine.length; i++) {\n          var href = self._spine[i];\n          var has_section = self._manifest[href];\n          if ( has_section == false ) { waiting += 1; }\n        }\n        // console.log(\"AHOY PRE-PAGINATED WAITING\", waiting);\n        if ( waiting == 0 ) {\n          return _display();\n        } else {\n          q();\n        }\n      })\n    }.bind(this);\n\n    return q();\n\n    return display.promise;\n\n  }\n\n  _checkStillLoading() {\n    this.q.enqueue((result) => {\n      var waiting = 0;\n      for(var i = 0; i < self._spine.length; i++) {\n        var href = self._spine[i];\n        var has_section = self._manifest[href];\n        if ( has_section == false ) { waiting += 1; }\n      }\n      console.log(\"AHOY PRE-PAGINATED WAITING\", waiting);\n      if ( waiting == 0 ) {\n        return _display();\n      } else {\n        q();\n      }\n    })\n  }\n\n  fill(_full) {\n    var full = _full || new defer();\n\n    this.q.enqueue(() => {\n      return this._checkStillLoading();\n    }).then((result) => {\n      if (result) {\n        this.fill(full);\n      } else {\n        full.resolve();\n      }\n    });\n\n    return full.promise;\n  }\n\n  fillXX(_full){\n    var full = _full || new defer();\n\n    this.q.enqueue(() => {\n      return this.check();\n    }).then((result) => {\n      if (result) {\n        this.fill(full);\n      } else {\n        full.resolve();\n      }\n    });\n\n    return full.promise;\n  }\n\n  moveTo(offset){\n    // var bounds = this.stage.bounds();\n    // var dist = Math.floor(offset.top / bounds.height) * bounds.height;\n    var distX = 0,\n        distY = 0;\n\n    var offsetX = 0,\n        offsetY = 0;\n\n    if(!this.isPaginated) {\n      distY = offset.top;\n      offsetY = offset.top+this.settings.offset;\n    } else {\n      distX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n      offsetX = distX+this.settings.offset;\n    }\n\n    if (distX > 0 || distY > 0) {\n      this.scrollBy(distX, distY, true);\n    }\n  }\n\n  afterResized(view){\n    this.emit(EVENTS.MANAGERS.RESIZE, view.section);\n  }\n\n  // Remove Previous Listeners if present\n  removeShownListeners(view){\n\n    // view.off(\"shown\", this.afterDisplayed);\n    // view.off(\"shown\", this.afterDisplayedAbove);\n    view.onDisplayed = function(){};\n\n  }\n\n  add(section){\n    var view = this.createView(section);\n\n    this.views.append(view);\n\n    view.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n      view.expanded = true;\n    });\n\n    view.on(EVENTS.VIEWS.AXIS, (axis) => {\n      this.updateAxis(axis);\n    });\n\n    // view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n    view.onDisplayed = this.afterDisplayed.bind(this);\n    view.onResize = this.afterResized.bind(this);\n\n    return view.display(this.request);\n  }\n\n  append(section){\n\n    var view = this.createView(section);\n\n    view.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n      view.expanded = true;\n      // do not do this\n      // this.counter(bounds); // RRE\n    });\n\n    /*\n    view.on(EVENTS.VIEWS.AXIS, (axis) => {\n      this.updateAxis(axis);\n    });\n    */\n\n    this.views.append(view);\n\n    view.onDisplayed = this.afterDisplayed.bind(this);\n\n    return view;\n  }\n\n  prepend(section){\n    var view = this.createView(section);\n\n    view.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n      this.counter(bounds);\n      view.expanded = true;\n    });\n\n    /*\n    view.on(EVENTS.VIEWS.AXIS, (axis) => {\n      this.updateAxis(axis);\n    });\n    */\n\n    this.views.prepend(view);\n\n    view.onDisplayed = this.afterDisplayed.bind(this);\n\n    return view;\n  }\n\n  counter(bounds){\n    // return;\n    if(this.settings.axis === \"vertical\") {\n      // if ( ! this._timer ) {\n      //  this._timer = setTimeout(function() {\n      //    this._timer = null;\n      //    console.log(\"AHOY USING counter.scrollBy : top was =\", this.__top, \"/ top is =\", this.container.scrollTop, \"/ delta =\", bounds.heightDelta);\n      //    this.scrollBy(0, bounds.heightDelta, true);\n      //    this.x1(`COUNTER ${bounds.heightDelta}`);\n      //  }.bind(this), 500);\n      // } else {\n      //  console.log(\"AHOY SKIPPING counter.scrollBy : top was =\", this.__top, \"/ top is =\", this.container.scrollTop, \"/ delta =\", bounds.heightDelta);\n      // }\n      // console.log(\"AHOY counter.scrollBy : top was =\", this.__top, \"/ top is =\", this.container.scrollTop, \"/ delta =\", bounds.heightDelta);\n      this.scrollBy(0, bounds.heightDelta, true);\n    } else {\n      this.scrollBy(bounds.widthDelta, 0, true);\n    }\n\n  }\n\n  updateXXX(_offset) {\n    var offset = horizontal ? this.scrollLeft : this.scrollTop * dir;\n    var visibleLength = horizontal ? bounds.width : bounds.height;\n    var contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n\n    var divs = document.querySelectorAll('.epub-view');\n    var visible = [];\n    for(var i = 0; i < divs.length; i++) {\n      var div = divs[i];\n      var rect = div.getBoundingClientRect();\n      var marker = '';\n      // if ( rect.top > offset + bounds.height && ( rect.top + rect.height ) <= offset ) {\n      // if ( adjusted_top < ( div.offsetTop + rect.height ) && adjusted_end > div.offsetTop ) {\n      if ( offset < ( div.offsetTop + rect.height ) && ( offset + bounds.height ) > div.offsetTop ) {\n        marker = '**';\n        var section = this._manifest[div.dataset.href];\n        visible.push(section);\n        // if ( ! div.querySelector('iframe') ) {\n        //  newViews.push(this.append(section))\n        // }\n        // var idx = this._spine.indexOf(section.href);\n        // if ( idx > 0 ) {\n        //  visible.push(this._manifest[this._spine[idx - 1]]);\n        // }\n        // if ( idx < this._spine.length - 1 ) {\n        //  visible.push(this._manifest[this._spine[idx + 1]]);\n        // }\n      }\n      // console.log(\"AHOY\", div.dataset.href, rect.top, rect.height, \"/\", div.offsetTop, div.offsetHeight, \"/\", offset, bounds.height, marker);\n    }\n\n  }\n\n  update(_offset){\n    var container = this.bounds();\n    var views = this.views.all();\n    var viewsLength = views.length;\n    var visible = [];\n    var offset = typeof _offset != \"undefined\" ? _offset : (this.settings.offset || 0);\n    var isVisible;\n    var view;\n\n    var updating = new defer();\n    var promises = [];\n    var queued = {};\n    for (var i = 0; i < viewsLength; i++) {\n      view = views[i];\n\n      isVisible = this.isVisible(view, offset, offset, container);\n      if ( isVisible === true ) {\n        queued[i] = true;\n      }\n    }\n\n    for(var i = 0; i < viewsLength; i++) {\n      view = views[i];\n      var isVisible = queued[i];\n      if(isVisible === true) {\n        // console.log(\"visible \" + view.index);\n\n        if (!view.displayed) {\n          // console.log(\"AHOY continuous.update !displayed\", view.section.href);\n          let displayed = view.display(this.request)\n            .then(function (view) {\n              view.show();\n            }, (err) => {\n              // console.log(\"AHOY continuous.update ERROR\", err);\n              view.hide();\n            });\n          promises.push(displayed);\n        } else {\n          // console.log(\"AHOY continuous.update show\", view.section.href);\n          view.show();\n        }\n        visible.push(view);\n      } else {\n        this.q.enqueue(view.destroy.bind(view));\n        // console.log(\"hidden \" + view.index);\n\n        clearTimeout(this.trimTimeout);\n        this.trimTimeout = setTimeout(function(){\n          this.q.enqueue(this.trim.bind(this));\n        }.bind(this), 250);\n      }\n\n    }\n\n    if(promises.length){\n      return Promise.all(promises)\n        .catch((err) => {\n          updating.reject(err);\n        });\n    } else {\n      updating.resolve();\n      return updating.promise;\n    }\n\n  }\n\n  check(_offsetLeft, _offsetTop){\n    var checking = new defer();\n    var newViews = [];\n\n    var horizontal = (this.settings.axis === \"horizontal\");\n    var delta = this.settings.offset || 0;\n\n    if (_offsetLeft && horizontal) {\n      delta = _offsetLeft;\n    }\n\n    if (_offsetTop && !horizontal) {\n      delta = _offsetTop;\n    }\n\n    var bounds = this._bounds; // bounds saved this until resize\n\n    let rtl = this.settings.direction === \"rtl\";\n    let dir = horizontal && rtl ? -1 : 1; //RTL reverses scrollTop\n\n    var offset = horizontal ? this.scrollLeft : this.scrollTop * dir;\n    var visibleLength = horizontal ? bounds.width : bounds.height;\n    var contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n\n    var prePaginated = this.layout.props.name == 'pre-paginated';\n\n    // console.log(\"continuous.check prePaginated =\", prePaginated, \"offset=\",\n    //  offset, \"visibleLength =\", visibleLength, \"delta=\", delta, ` (${offset + visibleLength + delta})`, \" >= contentLength =\", contentLength,\n    //  \" == \", offset + visibleLength + delta >= contentLength,\n    //  \" || \", offset - delta, \"<\", 0, \" == \", offset - delta < 0 );\n\n    let prepend = () => {\n      let first = this.views.first();\n      let prev = first && first.section.prev();\n\n      if(prev) {\n        newViews.push(this.prepend(prev));\n      }\n    };\n\n    let append = () => {\n      let last = this.views.last();\n      let next = last && last.section.next();\n\n      if(next) {\n        newViews.push(this.append(next));\n      }\n\n    };\n\n    var adjusted_top = offset - ( bounds.height * 8 );\n    var adjusted_end = offset + ( bounds.height * 8 );\n    // console.log(\"AHOY check\", offset, \"-\", offset + bounds.height, \"/\", adjusted_top, \"-\", adjusted_end);\n\n    // need to figure out which divs are viewable\n    var divs = document.querySelectorAll('.epub-view');\n    var visible = [];\n    for(var i = 0; i < divs.length; i++) {\n      var div = divs[i];\n      var rect = div.getBoundingClientRect();\n      var marker = '';\n      // if ( rect.top > offset + bounds.height && ( rect.top + rect.height ) <= offset ) {\n      // if ( adjusted_top < ( div.offsetTop + rect.height ) && adjusted_end > div.offsetTop ) {\n      if ( offset < ( div.offsetTop + rect.height ) && ( offset + bounds.height ) > div.offsetTop ) {\n        marker = '**';\n        var section = this._manifest[div.dataset.href];\n        visible.push(section);\n        // if ( ! div.querySelector('iframe') ) {\n        //  newViews.push(this.append(section))\n        // }\n        // var idx = this._spine.indexOf(section.href);\n        // if ( idx > 0 ) {\n        //  visible.push(this._manifest[this._spine[idx - 1]]);\n        // }\n        // if ( idx < this._spine.length - 1 ) {\n        //  visible.push(this._manifest[this._spine[idx + 1]]);\n        // }\n      }\n      // console.log(\"AHOY\", div.dataset.href, rect.top, rect.height, \"/\", div.offsetTop, div.offsetHeight, \"/\", offset, bounds.height, marker);\n    }\n\n    this.__check_visible = visible;\n\n    var section = visible[0];\n    if ( section && section.index > 0 ) {\n      visible.unshift(this._manifest[this._spine[section.index - 1]]);\n    }\n    if ( section ) {\n      var tmp = this._spine[section.index + 1];\n      if ( tmp ) {\n        visible.push(this._manifest[tmp]);\n      }\n    }\n    // if ( section && section.prev() ) {\n    //  visible.unshift(section.prev());\n    // }\n    // section = visible[visible.length - 1];\n    // if (section && section.next() ) {\n    //  visible.push(section.next());\n    // }\n\n    for(var i = 0; i < visible.length; i++) {\n      var section = visible[i];\n      // var div = document.querySelector(`.epub-view[ref=\"${section.index}\"]`);\n      // if ( div.querySelector('iframe') ) {\n      //  continue;\n      // }\n      newViews.push(this.append(section));\n    }\n\n    // let promises = newViews.map((view) => {\n    //  return view.displayed;\n    // });\n\n    var promises = [];\n    for(var i = 0; i < newViews.length; i++) {\n      if ( newViews[i] ) {\n        promises.push(newViews[i]);\n      }\n    }\n\n    if(newViews.length){\n      return Promise.all(promises)\n        .then(() => {\n          // return this.check();\n          // if (this.layout.name === \"pre-paginated\" && this.layout.props.spread && this.layout.flow() != 'scrolled') {\n          //   // console.log(\"AHOY check again\");\n          //   return this.check();\n          // }\n        })\n        .then(() => {\n          // Check to see if anything new is on screen after rendering\n          // console.log(\"AHOY update again\");\n          return this.update(delta);\n        }, (err) => {\n          return err;\n        });\n    } else {\n      this.q.enqueue(function(){\n        this.update();\n      }.bind(this));\n      checking.resolve(false);\n      return checking.promise;\n    }\n\n\n  }\n\n  trim(){\n    var task = new defer();\n    var displayed = this.views.displayed();\n    var first = displayed[0];\n    var last = displayed[displayed.length-1];\n    var firstIndex = this.views.indexOf(first);\n    var lastIndex = this.views.indexOf(last);\n    var above = this.views.slice(0, firstIndex);\n    var below = this.views.slice(lastIndex+1);\n\n    // Erase all but last above\n    for (var i = 0; i < above.length-3; i++) {\n      if ( above[i] ) {\n        // console.log(\"AHOY trim > above\", first.section.href, \":\", above[i].section.href);\n        this.erase(above[i], above);\n      }\n    }\n\n    // Erase all except first below\n    for (var j = 3; j < below.length; j++) {\n      if ( below[j] ) {\n        // console.log(\"AHOY trim > below\", last.section.href, \":\", below[j].section.href);\n        this.erase(below[j]);\n      }\n    }\n\n    task.resolve();\n    return task.promise;\n  }\n\n  erase(view, above){ //Trim\n\n    var prevTop;\n    var prevLeft;\n\n    if(this.settings.height) {\n      prevTop = this.container.scrollTop;\n      prevLeft = this.container.scrollLeft;\n    } else {\n      prevTop = window.scrollY;\n      prevLeft = window.scrollX;\n    }\n\n    var bounds = view.bounds();\n\n    // console.log(\"AHOY erase\", view.section.href, above);\n    this.views.remove(view);\n\n    if(above) {\n      if(this.settings.axis === \"vertical\") {\n        // this.scrollTo(0, prevTop - bounds.height, true);\n      } else {\n        this.scrollTo(prevLeft - bounds.width, 0, true);\n      }\n    }\n\n  }\n\n  addEventListeners(stage){\n\n    window.addEventListener(\"unload\", function(e){\n      this.ignore = true;\n      // this.scrollTo(0,0);\n      this.destroy();\n    }.bind(this));\n\n    this.addScrollListeners();\n  }\n\n  addScrollListeners() {\n    var scroller;\n\n    this.tick = requestAnimationFrame;\n\n    if(this.settings.height) {\n      this.prevScrollTop = this.container.scrollTop;\n      this.prevScrollLeft = this.container.scrollLeft;\n    } else {\n      this.prevScrollTop = window.scrollY;\n      this.prevScrollLeft = window.scrollX;\n    }\n\n    this.scrollDeltaVert = 0;\n    this.scrollDeltaHorz = 0;\n\n    if(this.settings.height) {\n      scroller = this.container;\n      this.scrollTop = this.container.scrollTop;\n      this.scrollLeft = this.container.scrollLeft;\n    } else {\n      scroller = window;\n      this.scrollTop = window.scrollY;\n      this.scrollLeft = window.scrollX;\n    }\n\n    scroller.addEventListener(\"scroll\", this.onScroll.bind(this));\n    this._scrolled = debounce(this.scrolled.bind(this), 30);\n    // this.tick.call(window, this.onScroll.bind(this));\n\n    this.didScroll = false;\n\n  }\n\n  removeEventListeners(){\n    var scroller;\n\n    if(this.settings.height) {\n      scroller = this.container;\n    } else {\n      scroller = window;\n    }\n\n    scroller.removeEventListener(\"scroll\", this.onScroll.bind(this));\n  }\n\n  onScroll(){\n    let scrollTop;\n    let scrollLeft;\n    let dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n    if(this.settings.height) {\n      scrollTop = this.container.scrollTop;\n      scrollLeft = this.container.scrollLeft;\n    } else {\n      scrollTop = window.scrollY * dir;\n      scrollLeft = window.scrollX * dir;\n    }\n\n    this.scrollTop = scrollTop;\n    this.scrollLeft = scrollLeft;\n\n    if(!this.ignore) {\n\n      this._scrolled();\n\n    } else {\n      this.ignore = false;\n    }\n\n    this.scrollDeltaVert += Math.abs(scrollTop-this.prevScrollTop);\n    this.scrollDeltaHorz += Math.abs(scrollLeft-this.prevScrollLeft);\n\n    this.prevScrollTop = scrollTop;\n    this.prevScrollLeft = scrollLeft;\n\n    clearTimeout(this.scrollTimeout);\n    this.scrollTimeout = setTimeout(function(){\n      this.scrollDeltaVert = 0;\n      this.scrollDeltaHorz = 0;\n    }.bind(this), 150);\n\n\n    this.didScroll = false;\n\n  }\n\n  scrolled() {\n    this.q.enqueue(function() {\n      this.check();\n      this.recenter();\n      setTimeout(function() {\n        this.emit(EVENTS.MANAGERS.SCROLLED, {\n          top: this.scrollTop,\n          left: this.scrollLeft\n        });\n      }.bind(this), 500);\n    }.bind(this));\n\n    this.emit(EVENTS.MANAGERS.SCROLL, {\n      top: this.scrollTop,\n      left: this.scrollLeft\n    });\n\n    clearTimeout(this.afterScrolled);\n    this.afterScrolled = setTimeout(function () {\n      this.emit(EVENTS.MANAGERS.SCROLLED, {\n        top: this.scrollTop,\n        left: this.scrollLeft\n      });\n    }.bind(this));\n  }\n\n  next(){\n\n    let dir = this.settings.direction;\n    let delta = this.layout.props.name === \"pre-paginated\" &&\n                this.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n    delta = this.container.offsetHeight / this.settings.scale;\n\n    if(!this.views.length) return;\n\n    if(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n      this.scrollBy(delta, 0, true);\n\n    } else {\n\n      // this.scrollBy(0, this.layout.height, true);\n      this.scrollBy(0, delta, true);\n\n    }\n\n    this.q.enqueue(function() {\n      this.check();\n    }.bind(this));\n  }\n\n  prev(){\n\n    let dir = this.settings.direction;\n    let delta = this.layout.props.name === \"pre-paginated\" &&\n                this.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n    if(!this.views.length) return;\n\n    if(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n      this.scrollBy(-delta, 0, true);\n\n    } else {\n\n      this.scrollBy(0, -this.layout.height, true);\n\n    }\n\n    this.q.enqueue(function() {\n      this.check();\n    }.bind(this));\n  }\n\n  updateAxis(axis, forceUpdate){\n\n    if (!this.isPaginated) {\n      axis = \"vertical\";\n    }\n\n    if (!forceUpdate && axis === this.settings.axis) {\n      return;\n    }\n\n    this.settings.axis = axis;\n\n    this.stage && this.stage.axis(axis);\n\n    this.viewSettings.axis = axis;\n\n    if (this.mapping) {\n      this.mapping.axis(axis);\n    }\n\n    if (this.layout) {\n      if (axis === \"vertical\") {\n        this.layout.spread(\"none\");\n      } else {\n        this.layout.spread(this.layout.settings.spread);\n      }\n    }\n\n    if (axis === \"vertical\") {\n      this.settings.infinite = true;\n    } else {\n      this.settings.infinite = false;\n    }\n  }\n\n  recenter() {\n    var wrapper = this.container.parentElement;\n    var w3 = ( wrapper.scrollWidth / 2 ) - ( wrapper.offsetWidth / 2 );\n    wrapper.scrollLeft = w3;\n  }\n\n  sizeToViewport(section) {\n    var h = this.layout.height;\n    // reduce to 80% to avoid hacking epubjs/layout.js\n    var w = this.layout.columnWidth * 0.8 * this.settings.scale;\n    if ( section.viewport.height != 'auto' ) {\n      if ( this.layout.columnWidth > section.viewport.width ) {\n        w = section.viewport.width * this.settings.scale;\n      }\n      var r = w / section.viewport.width;\n      h = Math.floor(section.viewport.height * r);\n    }\n    return [w, h];\n  }\n\n  sizeToViewport_X(section) {\n    var h = this.layout.height;\n    var w = this.layout.columnWidth * 0.80;\n\n    if ( section.viewport.height != 'auto' ) {\n\n      var r = w / section.viewport.width;\n      h = section.viewport.height * r;\n      var f = 1 / 0.60;\n      var m = Math.min(( f * this.layout.height ) / h, 1.0);\n      console.log(\"AHOY SHRINKING\", `( ${f} * ${this.layout.height} ) / ${h} = ${m} :: ${h * m}`);\n      h *= m;\n\n      h *= this.settings.scale;\n      if ( h > section.viewport.height ) {\n        h = section.viewport.height;\n      }\n\n      r = h / section.viewport.height;\n      w = section.viewport.width * r;\n\n      h = Math.floor(h);\n      w = Math.floor(w);\n    }\n    return [w, h];\n  }\n\n  scale(scale) {\n    var self = this;\n    this.settings.scale = scale;\n    var current = this.currentLocation();\n    var index = -1;\n    if ( current[0] ) {\n      index = current[0].index; \n    }\n\n    this.views.hide();\n    this.views.clear();\n    this._redrawViews();\n    this.views.show();\n    setTimeout(function() {\n      console.log(\"AHOY JUMPING TO\", index);\n      if ( index > -1 ) {\n        var div = self.container.querySelector(`div.epub-view[ref=\"${index}\"]`);\n        div.scrollIntoView(true);\n      }\n      this.check().then(function() {\n        this.onScroll();\n      }.bind(this))\n    }.bind(this), 0);\n  }\n\n  resetScale() {\n    // NOOP\n  }\n\n}\n\nPrePaginatedContinuousViewManager.toString = function() { return 'prepaginated'; }\n\nexport default PrePaginatedContinuousViewManager;\n\n","import IframeView from \"epubjs/src/managers/views/iframe\";\nimport {extend, borders, uuid, isNumber, bounds, defer, createBlobUrl, revokeBlobUrl} from \"epubjs/src/utils/core\";\n\nclass ReusableIframeView extends IframeView {\n    constructor(section, options) {\n        super(section, options);\n        // this._layout.height = null;\n    }\n\n    container(axis) {\n        var check = document.querySelector(`div[ref='${this.index}']`);\n        if ( check ) {\n            check.dataset.reused = 'true';\n            return check;\n        }\n\n        var element = document.createElement(\"div\");\n\n        element.classList.add(\"epub-view\");\n\n        // this.element.style.minHeight = \"100px\";\n        element.style.height = \"0px\";\n        element.style.width = \"0px\";\n        element.style.overflow = \"hidden\";\n        element.style.position = \"relative\";\n        element.style.display = \"block\";\n\n        if(axis && axis == \"horizontal\"){\n            element.style.flex = \"none\";\n        } else {\n            element.style.flex = \"initial\";\n        }\n\n        return element;\n    }\n\n    create() {\n\n        if(this.iframe) {\n            return this.iframe;\n        }\n\n        if(!this.element) {\n            this.element = this.createContainer();\n        }\n\n        if ( this.element.hasAttribute('layout-height') ) {\n            var height = parseInt(this.element.getAttribute('layout-height'), 10);\n            this._layout_height = height;\n        }\n\n        this.iframe = this.element.querySelector(\"iframe\");\n        if ( this.iframe ) {\n            return this.iframe;\n        }\n\n        this.iframe = document.createElement(\"iframe\");\n        this.iframe.id = this.id;\n        this.iframe.scrolling = \"no\"; // Might need to be removed: breaks ios width calculations\n        this.iframe.style.overflow = \"hidden\";\n        this.iframe.seamless = \"seamless\";\n        // Back up if seamless isn't supported\n        this.iframe.style.border = \"none\";\n\n        this.iframe.setAttribute(\"enable-annotation\", \"true\");\n\n        this.resizing = true;\n\n        // this.iframe.style.display = \"none\";\n        this.element.style.visibility = \"hidden\";\n        this.iframe.style.visibility = \"hidden\";\n\n        this.iframe.style.width = \"0\";\n        this.iframe.style.height = \"0\";\n        this._width = 0;\n        this._height = 0;\n\n        this.element.setAttribute(\"ref\", this.index);\n        this.element.setAttribute(\"data-href\", this.section.href);\n\n        // this.element.appendChild(this.iframe);\n        this.added = true;\n\n        this.elementBounds = bounds(this.element);\n\n        // if(width || height){\n        //   this.resize(width, height);\n        // } else if(this.width && this.height){\n        //   this.resize(this.width, this.height);\n        // } else {\n        //   this.iframeBounds = bounds(this.iframe);\n        // }\n\n\n        if((\"srcdoc\" in this.iframe)) {\n            this.supportsSrcdoc = true;\n        } else {\n            this.supportsSrcdoc = false;\n        }\n\n        if (!this.settings.method) {\n            this.settings.method = this.supportsSrcdoc ? \"srcdoc\" : \"write\";\n        }\n\n        return this.iframe;\n    }\n\n}\n\nexport default ReusableIframeView;\n","'use strict';\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== 'function') return false;\n\tobj = { foo: 'raz' };\n\tassign(obj, { bar: 'dwa' }, { trzy: 'trzy' });\n\treturn (obj.foo + obj.bar + obj.trzy) === 'razdwatrzy';\n};\n","'use strict';\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys('primitive');\n\t\treturn true;\n\t} catch (e) { return false; }\n};\n","'use strict';\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n\treturn keys(object == null ? object : Object(object));\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.keys\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function (value) {\n\tif (value == null) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","'use strict';\n\nvar keys  = require('../keys')\n  , value = require('../valid-value')\n\n  , max = Math.max;\n\nmodule.exports = function (dest, src/*, â€¦srcn*/) {\n\tvar error, i, l = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry { dest[key] = src[key]; } catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < l; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.assign\n\t: require('./shim');\n","'use strict';\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\nmodule.exports = function (options/*, â€¦options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (options == null) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","// Deprecated\n\n'use strict';\n\nmodule.exports = function (obj) { return typeof obj === 'function'; };\n","'use strict';\n\nvar str = 'razdwatrzy';\n\nmodule.exports = function () {\n\tif (typeof str.contains !== 'function') return false;\n\treturn ((str.contains('dwa') === true) && (str.contains('foo') === false));\n};\n","'use strict';\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? String.prototype.contains\n\t: require('./shim');\n","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","'use strict';\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","import EventEmitter from \"event-emitter\";\n\n// import {\n//   ElementObserver,\n//   PositionObserver,\n//   ObserverCollection // Advanced: Used for grouping custom viewport handling\n// } from \"viewprt\";\n\nimport {inVp} from '../../../core/Util';\nwindow.inVp = inVp;\n\nclass Views {\n    constructor(container, preloading=false) {\n        this.container = container;\n        this._views = [];\n        this.length = 0;\n        this.hidden = false;\n        this.preloading = preloading;\n        this.observer = new IntersectionObserver(this.handleObserver.bind(this), {\n            root: this.containr,\n            rootMargin: '0px',\n            threshold: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]\n        });\n    }\n\n    all() {\n        return this._views;\n    }\n\n    first() {\n        // return this._views[0];\n        return this.displayed()[0];\n    }\n\n    last() {\n        var d = this.displayed();\n        return d[d.length - 1];\n        // return this._views[this._views.length-1];\n    }\n\n    prev(view) {\n        var index = this.indexOf(view);\n        return this.get(index - 1);\n    }\n\n    next(view) {\n        var index = this.indexOf(view);\n        return this.get(index + 1);\n    }\n\n    indexOf(view) {\n        return this._views.indexOf(view);\n    }\n\n    slice() {\n        return this._views.slice.apply(this._views, arguments);\n    }\n\n    get(i) {\n        return i < 0 ? null : this._views[i];\n    }\n\n    append(view){\n        this._views.push(view);\n        if(this.container){\n            this.container.appendChild(view.element);\n            var threshold = {};\n            var h = this.container.offsetHeight;\n            threshold.top = - ( h * 0.25 );\n            threshold.bottom = - ( h * 0.25 );\n            // view.observer = ElementObserver(view.element, {\n            //     container: this.container,\n            //     onEnter: this.onEnter.bind(this, view), // callback when the element enters the viewport\n            //     onExit: this.onExit.bind(this, view), // callback when the element exits the viewport\n            //     offset: 0, // offset from the edges of the viewport in pixels\n            //     once: false, // if true, observer is detroyed after first callback is triggered\n            //     observerCollection: null // new ObserverCollection() // Advanced: Used for grouping custom viewport handling\n            // })\n            // const { fully, partially, edges } = inVp(view.element, threshold, this.container);\n            // if ( edges.percentage > 0 ) {\n            //     this.onEnter(view);\n            // }\n\n            this.observer.observe(view.element);\n        }\n        this.length++;\n        return view;\n    }\n\n    handleObserver(entries, observer) {\n        entries.forEach(entry => {\n            var div = entry.target;\n            var index = div.getAttribute('ref');\n            var view = this.get(index);\n            if ( entry.isIntersecting && entry.intersectionRatio > 0.0  ) {\n                if ( ! view.displayed ) {\n                    console.log(\"AHOY OBSERVING\", entries.length, index, 'onEnter');\n                    this.onEnter(view);\n                }\n            } else if ( view && view.displayed ) {\n                console.log(\"AHOY OBSERVING\", entries.length, index, 'onExit');\n                this.onExit(view);\n            }\n        })\n    }\n\n    prepend(view){\n        this._views.unshift(view);\n        if(this.container){\n            this.container.insertBefore(view.element, this.container.firstChild);\n        }\n        this.length++;\n        return view;\n    }\n\n    // insert(view, index) {\n    //     this._views.splice(index, 0, view);\n\n    //     if(this.container){\n    //         if(index < this.container.children.length){\n    //             this.container.insertBefore(view.element, this.container.children[index]);\n    //         } else {\n    //             this.container.appendChild(view.element);\n    //         }\n    //     }\n\n    //     this.length++;\n    //     return view;\n    // }\n\n    // remove(view) {\n    //     var index = this._views.indexOf(view);\n\n    //     if(index > -1) {\n    //         this._views.splice(index, 1);\n    //     }\n\n\n    //     this.destroy(view);\n\n    //     this.length--;\n    // }\n\n    destroy(view) {\n        // if(view.displayed){\n        //     view.destroy();\n        // }\n        this.observer.unobserve(view.element);\n        view.destroy();\n\n        if(this.container){\n             this.container.removeChild(view.element);\n        }\n        view = null;\n    }\n\n    // Iterators\n\n    forEach() {\n        // return this._views.forEach.apply(this._views, arguments);\n        return this.displayed().forEach.apply(this._views, arguments);\n    }\n\n    clear(){\n        // Remove all views\n        var view;\n        var len = this.length;\n\n        if(!this.length) return;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            this.destroy(view);\n        }\n\n        this._views = [];\n        this.length = 0;\n        this.observer.disconnect();\n    }\n\n    updateLayout(options) {\n        var width = options.width;\n        var height = options.height;\n        this._views.forEach(function(view) {\n            view.size(width, height);\n            if ( view.contents ) {\n                view.contents.size(width, height);\n            }\n        })\n    }\n\n    find(section){\n\n        var view;\n        var len = this.length;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            // view.displayed\n            if(view.section.index == section.index) {\n                return view;\n            }\n        }\n\n    }\n\n    displayed(){\n        var displayed = [];\n        var view;\n        var len = this.length;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            const { fully, partially, edges } = inVp(view.element, this.container);\n            if ( ( fully || partially ) && edges.percentage > 0 && view.displayed ) {\n                displayed.push(view);\n            }\n            // if(view.displayed){\n            //     displayed.push(view);\n            // }\n        }\n        return displayed;\n    }\n\n    show(){\n        var view;\n        var len = this.length;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            if(view.displayed){\n                view.show();\n            }\n        }\n        this.hidden = false;\n    }\n\n    hide(){\n        var view;\n        var len = this.length;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            if(view.displayed){\n                // console.log(\"AHOY VIEWS hide\", view.index);\n                view.hide();\n            }\n        }\n        this.hidden = true;\n    }\n\n    onEnter(view, el, viewportState) {\n        // console.log(\"AHOY VIEWS onEnter\", view.index, view.preloaded, view.displayed);\n        var preload = ! view.displayed || view.preloaded;\n        if ( ! view.displayed ) {\n            // console.log(\"AHOY SHOULD BE SHOWING\", view);\n            this.emit(\"view.display\", { view: view, viewportState: viewportState });\n        }\n        if ( this.preloading && preload ) {\n            // can we grab the next one?\n            this.preload(this.next(view), view.index);\n            this.preload(this.prev(view), view.index);\n        }\n        if ( ! view.displayed && view.preloaded ) {\n            // console.log(\"AHOY VIEWS onEnter TOGGLE\", view.index, view.preloaded, view.displayed);\n            view.preloaded = false;\n        }\n    }\n\n    preload(view, index) {\n        if ( view ) {\n            view.preloaded = true;\n            // console.log(\"AHOY VIEWS preload\", index, \">\", view.index);\n            this.emit(\"view.preload\", { view: view });\n        }\n    }\n\n    onExit(view, el, viewportState) {\n        // console.log(\"AHOY VIEWS onExit\", view.index, view.preloaded);\n        if ( view.preloaded ) { return ; }\n        view.unload();\n    }\n}\n\nEventEmitter(Views.prototype);\nexport default Views;\n","import EventEmitter from \"event-emitter\";\nimport {extend, defer, windowBounds, isNumber, requestAnimationFrame} from \"epubjs/src/utils/core\";\nimport Mapping from \"epubjs/src/mapping\";\nimport Queue from \"epubjs/src/utils/queue\";\nimport Stage from \"epubjs/src/managers/helpers/stage\";\nimport Views from \"../helpers/scrolling_views\";\nimport { EVENTS } from \"epubjs/src/utils/constants\";\nimport {inVp} from '../../../core/Util';\n\n// import inVp from \"in-vp\";\n\nclass ScrollingContinuousViewManager {\n  constructor(options) {\n\n    this.name = \"scrolling\";\n    this.optsSettings = options.settings;\n    this.View = options.view;\n    this.request = options.request;\n    this.renditionQueue = options.queue;\n    this.q = new Queue(this);\n\n    this.settings = extend(this.settings || {}, {\n      infinite: true,\n      hidden: false,\n      width: undefined,\n      height: undefined,\n      axis: undefined,\n      flow: \"scrolled\",\n      ignoreClass: \"\",\n      fullsize: undefined,\n      minHeight: 1024\n    });\n\n    extend(this.settings, options.settings || {});\n\n    this.viewSettings = {\n      ignoreClass: this.settings.ignoreClass,\n      axis: this.settings.axis,\n      flow: this.settings.flow,\n      layout: this.layout,\n      method: this.settings.method, // srcdoc, blobUrl, write\n      width: 0,\n      height: 0,\n      forceEvenPages: true\n    };\n\n    this.rendered = false;\n    this.settings.scale = this.settings.scale || 1.0;\n    this.settings.xscale = this.settings.scale;\n\n    this.fraction = 0.8;\n    // this.settings.maxWidth = 1024;\n  }\n\n  render(element, size){\n    let tag = element.tagName;\n\n    if (typeof this.settings.fullsize === \"undefined\" &&\n        tag && (tag.toLowerCase() == \"body\" ||\n        tag.toLowerCase() == \"html\")) {\n        this.settings.fullsize = true;\n    }\n\n    if (this.settings.fullsize) {\n      this.settings.overflow = \"visible\";\n      this.overflow = this.settings.overflow;\n    }\n\n    this.settings.size = size;\n\n    // Save the stage\n    this.stage = new Stage({\n      width: size.width,\n      height: size.height,\n      overflow: this.overflow,\n      hidden: this.settings.hidden,\n      axis: this.settings.axis,\n      fullsize: this.settings.fullsize,\n      direction: this.settings.direction,\n      scale: 1.0 // this.settings.scale --- scrolling scales different\n    });\n\n    this.stage.attachTo(element);\n\n    // Get this stage container div\n    this.container = this.stage.getContainer();\n\n    // Views array methods\n    this.views = new Views(this.container, this.layout.name == 'pre-paginated');\n\n    // Calculate Stage Size\n    this._bounds = this.bounds();\n    this._stageSize = this.stage.size();\n\n    var ar = this._stageSize.width / this._stageSize.height;\n    console.log(\"AHOY STAGE\", this._stageSize.width, this._stageSize.height, \">\", ar);\n\n    // Set the dimensions for views\n    this.viewSettings.width = this._stageSize.width;\n    this.viewSettings.height = this._stageSize.height;\n\n    // Function to handle a resize event.\n    // Will only attach if width and height are both fixed.\n    this.stage.onResize(this.onResized.bind(this));\n\n    this.stage.onOrientationChange(this.onOrientationChange.bind(this));\n\n    // Add Event Listeners\n    this.addEventListeners();\n\n    // Add Layout method\n    // this.applyLayoutMethod();\n    if (this.layout) {\n      this.updateLayout();\n    }\n\n    this.rendered = true;\n    this._spine = [];\n\n    this.views.on(\"view.preload\", function({view}) {\n      view.display(this.request).then(function() {\n        view.show();\n      })\n    }.bind(this));\n\n    this.views.on(\"view.display\", function({ view, viewportState }) {\n      // console.log(\"AHOY VIEWS scrolling.view.display\", view.index);\n      view.display(this.request).then(function() {\n        view.show();\n        this.gotoTarget(view);\n        if ( true || this._forceLocationEvent ) {\n          this.emit(EVENTS.MANAGERS.SCROLLED, {\n            top: this.scrollTop,\n            left: this.scrollLeft\n          });\n          this._forceLocationEvent = false;\n        }\n      }.bind(this))\n    }.bind(this));\n  }\n\n  display(section, target) {\n    var displaying = new defer();\n    var displayed = displaying.promise;\n\n    if ( ! this.views.length ) {\n      this.initializeViews(section);\n    }\n\n    // Check if moving to target is needed\n    if (target === section.href || isNumber(target)) {\n      target = undefined;\n    }\n\n    var current = this.current();\n\n    this.ignore = false;\n    var visible = this.views.find(section);\n\n    // console.log(\"AHOY scrolling display\", section, visible, current, current == visible);\n\n    if(target) {\n      this._target = [ visible, target ];\n    }\n\n    visible.element.scrollIntoView();\n\n    if ( visible == current ) {\n      this.gotoTarget(visible);\n    }\n\n    displaying.resolve();\n    return displayed;\n  }\n\n  gotoTarget(view) {\n    if ( this._target && this._target[0] == view ) {\n      let offset = view.locationOf(this._target[1]);\n\n      // -- this does not work; top varies.\n      // offset.top += view.element.getBoundingClientRect().top;\n\n      setTimeout(function() {\n        offset.top += this.container.scrollTop;\n        this.moveTo(offset);\n        this._target = null;\n      }.bind(this), 10);\n\n      // var prev; var style;\n      // for(var i = 0; i < view.index; i++) {\n      //   prev = this.views.get(i);\n      //   style = window.getComputedStyle(prev.element);\n      //   offset.top += ( parseInt(style.height) / this.settings.scale ) + parseInt(style.marginBottom) + parseInt(style.marginTop);\n      //   // offset.top += prev.height() || prev.element.offsetHeight;\n      // }\n      // this.moveTo(offset);\n      // this._target = null;\n    }\n  }\n\n  afterDisplayed(view){\n    // if ( this._target && this._target[0] == view ) {\n    //   let offset = view.locationOf(this._target[1]);\n    //   this.moveTo(offset);\n    //   this._target = null;\n    // }\n    this.emit(EVENTS.MANAGERS.ADDED, view);\n  }\n\n  afterResized(view){\n\n    var bounds = this.container.getBoundingClientRect();\n    var rect = view.element.getBoundingClientRect();\n\n    this.ignore = true;\n\n    // view.element.dataset.resizable = \"true\"\n    view.reframeElement();\n\n    var delta;\n    if ( rect.bottom <= bounds.bottom && rect.top < 0 ) {\n      delta = view.element.getBoundingClientRect().height - rect.height;\n      // delta /= this.settings.scale;\n      // console.log(\"AHOY afterResized\", view.index, this.container.scrollTop, view.element.getBoundingClientRect().height, rect.height, delta / this.settings.scale);\n      this.container.scrollTop += Math.ceil(delta);\n    }\n\n    // console.log(\"AHOY AFTER RESIZED\", view, delta);\n    this.emit(EVENTS.MANAGERS.RESIZE, view.section);\n  }\n\n  moveTo(offset) {\n    var distX = 0, distY = 0;\n    distY = offset.top;\n    // this.scrollTo(distX, this.container.scrollTop + distY, true);\n    this.scrollTo(distX, distY, false);\n  }\n\n  initializeViews(section) {\n    var self = this;\n\n    this.ignore = true;\n\n    // if ( self._spine.length == 0 ) {\n    //   console.time(\"AHOY initializeViews CRAWL\");\n    //   // can we build a manifest here?\n    //   var prev_ = section.prev();\n    //   while ( prev_ ) {\n    //     // self._spine.unshift(prev_.href);\n    //     self._spine.unshift(prev_);\n    //     prev_ = prev_.prev();\n    //   }\n\n    //   self._spine.push(section);\n\n    //   var next_ = section.next();\n    //   while ( next_ ) {\n    //     // self._spine.push(next_.href);\n    //     self._spine.push(next_);\n    //     next_ = next_.next();\n    //   }\n\n    //   console.timeEnd(\"AHOY initializeViews CRAWL\");\n    // }\n\n    // this._spine.forEach(function (section) {\n\n   this.settings.spine.each(function (section) {\n\n      // if ( this.layout.name == 'pre-paginated' ) {\n      //   // do something\n      //   // viewSettings.layout.height = h;\n      //   // viewSettings.layout.columnWidth = w;\n\n      //   var r = this.layout.height / this.layout.columnWidth;\n\n      //   viewSettings.layout.columnWidth = this.layout.columnWidth * 0.8;\n      //   viewSettings.layout.height = this.layout.height * ( this.layout.columnWidth)\n\n      // }\n      var viewSettings = Object.assign({}, this.viewSettings);\n      viewSettings.layout = Object.assign( Object.create( Object.getPrototypeOf(this.viewSettings.layout)), this.viewSettings.layout);\n      if ( this.layout.name == 'pre-paginated' ) {\n        viewSettings.layout.columnWidth = this.calcuateWidth(viewSettings.layout.columnWidth); // *= ( this.fraction * this.settings.xscale );\n        viewSettings.layout.width = this.calcuateWidth(viewSettings.layout.width); // *= ( this.fraction * this.settings.xscale );\n        viewSettings.minHeight *= this.settings.xscale;\n        viewSettings.maxHeight = viewSettings.height * this.settings.xscale;\n        viewSettings.height = viewSettings.height * this.settings.xscale;\n        viewSettings.layout.height = viewSettings.height;\n        // console.log(\"AHOY new view\", section.index, viewSettings.height);\n      }\n\n      var view = new this.View(section, viewSettings);\n      view.onDisplayed = this.afterDisplayed.bind(this);\n      view.onResize = this.afterResized.bind(this);\n      view.on(EVENTS.VIEWS.AXIS, (axis) => {\n        this.updateAxis(axis);\n      });\n      this.views.append(view);\n    }.bind(this));\n\n    this.ignore = false;\n  }\n\n  direction(dir=\"ltr\") {\n    this.settings.direction = dir;\n\n    this.stage && this.stage.direction(dir);\n\n    this.viewSettings.direction = dir;\n\n    this.updateLayout();\n  }\n\n  onOrientationChange(e) {\n\n  }\n\n  onResized(e) {\n    // if ( this.resizeTimeout ) {\n    //   clearTimeout(this.resizeTimeout);\n    // } else {\n    //   // this._current = this.current() && this.current().section;\n    //   // this._current = { view: this.current(), location: this.currentLocation() };\n    // }\n    // this.resizeTimeout = setTimeout(this.resize.bind(this), 100);\n    this.resize();\n  }\n\n  resize(width, height){\n    let stageSize = this.stage.size(width, height);\n    if ( this.resizeTimeout ) {\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = null;\n    }\n\n    this.ignore = true;\n\n    // For Safari, wait for orientation to catch up\n    // if the window is a square\n    this.winBounds = windowBounds();\n    if (this.orientationTimeout &&\n        this.winBounds.width === this.winBounds.height) {\n      // reset the stage size for next resize\n      this._stageSize = undefined;\n      return;\n    }\n\n    if (this._stageSize &&\n        this._stageSize.width === stageSize.width &&\n        this._stageSize.height === stageSize.height ) {\n      // Size is the same, no need to resize\n      return;\n    }\n\n    this._stageSize = stageSize;\n\n    this._bounds = this.bounds();\n\n    // if ( ! this._resizeTarget ) {\n    //   var current = this.current();\n    //   if ( current ) {\n    //     this._resizeTarget = current.section;\n    //   }\n    // }\n\n    this.clear();\n\n    // Update for new views\n    this.viewSettings.width = this._stageSize.width;\n    this.viewSettings.height = this._stageSize.height;\n\n    this.updateLayout();\n\n    // var section; var target;\n    // if ( this._current ) {\n    //   section = this._current.view.section;\n    //   target = this._current.location[0].mapping.start;\n    //   this._current = null;\n    // } else {\n    //   section = this._spine[0];\n    // }\n    // this.initializeViews(section);\n    // this.display(section, target);\n\n    // this.views.updateLayout(this.viewSettings);\n\n    this.emit(EVENTS.MANAGERS.RESIZED, {\n      width: this._stageSize.width,\n      height: this._stageSize.height\n    });\n  }\n\n  updateAxis(axis, forceUpdate) {\n    if (!this.isPaginated) {\n      axis = \"vertical\";\n    }\n\n    if (!forceUpdate && axis === this.settings.axis) {\n      return;\n    }\n\n    this.settings.axis = axis;\n\n    this.stage && this.stage.axis(axis);\n\n    this.viewSettings.axis = axis;\n\n    if (this.mapping) {\n      this.mapping = new Mapping(this.layout.props, this.settings.direction, this.settings.axis);\n    }\n\n    if (this.layout) {\n      this.layout.spread(\"none\");\n    }\n\n  }\n\n  updateFlow(flow) {\n    this.isPaginated = false;\n    this.updateAxis(\"vertical\");\n\n    this.viewSettings.flow = flow;\n\n    if (!this.settings.overflow) {\n      this.overflow = this.isPaginated ? \"hidden\" : \"auto\";\n    } else {\n      this.overflow = this.settings.overflow;\n    }\n\n    this.stage && this.stage.overflow(this.overflow);\n\n    this.updateLayout();\n  }\n\n  getContents() {\n    var contents = [];\n    if (!this.views) {\n      return contents;\n    }\n    this.views.forEach(function(view){\n      const viewContents = view && view.contents;\n      if (viewContents) {\n        contents.push(viewContents);\n      }\n    });\n    return contents;\n  }\n\n  current(){\n    var visible = this.visible();\n    var view;\n    if(visible.length){\n      // Current is the last visible view\n      var current = null;\n      for(var i = 0; i < visible.length; i++) {\n        view = visible[i];\n        const { fully, partially, edges } = inVp(view.element, this.container);\n        if ( ! current ) { current = view; current.percentage = edges.percentage; }\n        else if ( edges.percentage > current.percentage ) {\n          current = view;\n          current.percentage = edges.percentage;\n        }\n      }\n      if ( current ) { return current; }\n      return visible[visible.length-1];\n    }\n    return null;\n  }\n\n  visible() {\n    var visible = [];\n    var views = this.views.displayed();\n    var viewsLength = views.length;\n    var visible = [];\n    var isVisible;\n    var view;\n\n    return this.views.displayed();\n\n    for(var i = 0; i < viewsLength; i++) {\n      view = views[i];\n      if ( view.displayed ) {\n        visible.push(view);\n      }\n    }\n\n    return visible;\n  }\n\n  scrollBy(x, y, silent){\n    let dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n    if(silent) {\n      this.ignore = true;\n    }\n\n    if(!this.settings.fullsize) {\n      if(x) this.container.scrollLeft += x * dir;\n      if(y) this.container.scrollTop += y;\n    } else {\n      window.scrollBy(x * dir, y * dir);\n    }\n    this.scrolled = true;\n  }\n\n  scrollTo(x, y, silent) {\n    if(silent) {\n      this.ignore = true;\n    }\n\n    if(!this.settings.fullsize) {\n      this.container.scrollLeft = x;\n      this.container.scrollTop = y;\n    } else {\n      window.scrollTo(x,y);\n    }\n    this.scrolled = true;\n  }\n\n  onScroll() {\n    let scrollTop;\n    let scrollLeft;\n\n    if(!this.settings.fullsize) {\n      scrollTop = this.container.scrollTop;\n      scrollLeft = this.container.scrollLeft;\n    } else {\n      scrollTop = window.scrollY;\n      scrollLeft = window.scrollX;\n    }\n\n    this.scrollTop = scrollTop;\n    this.scrollLeft = scrollLeft;\n\n    if(!this.ignore) {\n      this.emit(EVENTS.MANAGERS.SCROLL, {\n        top: scrollTop,\n        left: scrollLeft\n      });\n\n      clearTimeout(this.afterScrolled);\n      this.afterScrolled = setTimeout(function () {\n        this.emit(EVENTS.MANAGERS.SCROLLED, {\n          top: this.scrollTop,\n          left: this.scrollLeft\n        });\n      }.bind(this), 20);\n\n    } else {\n      this.ignore = false;\n    }\n  }\n\n  bounds() {\n    var bounds;\n\n    bounds = this.stage.bounds();\n\n    return bounds;\n  }\n\n  applyLayout(layout) {\n    this.layout = layout;\n    this.updateLayout();\n  }\n\n  updateLayout() {\n    if (!this.stage) {\n      return;\n    }\n\n    this._stageSize = this.stage.size();\n    this.layout.calculate(this._stageSize.width, this._stageSize.height);\n    // this.layout.width = this.container.offsetWidth * 0.80;\n\n    // Set the dimensions for views\n    this.viewSettings.width = this.layout.width; //  * this.settings.scale;\n    this.viewSettings.height = this.calculateHeight(this.layout.height);\n    this.viewSettings.minHeight = this.viewSettings.height; // * this.settings.scale;\n\n    this.setLayout(this.layout);\n  }\n\n  setLayout(layout){\n\n    this.viewSettings.layout = layout;\n\n    this.mapping = new Mapping(layout.props, this.settings.direction, this.settings.axis);\n\n    if(this.views) {\n\n     this.views._views.forEach(function(view) {\n        var viewSettings = Object.assign({}, this.viewSettings);\n        viewSettings.layout = Object.assign( Object.create( Object.getPrototypeOf(this.viewSettings.layout)), this.viewSettings.layout);\n        if ( this.layout.name == 'pre-paginated' ) {\n          viewSettings.layout.columnWidth = this.calcuateWidth(viewSettings.layout.columnWidth); // *= ( this.fraction * this.settings.xscale );\n          viewSettings.layout.width = this.calcuateWidth(viewSettings.layout.width); // *= ( this.fraction * this.settings.xscale );\n          viewSettings.minHeight *= this.settings.xscale;\n          viewSettings.maxHeight = viewSettings.height * this.settings.xscale;\n          viewSettings.height = viewSettings.height * this.settings.xscale;\n          viewSettings.layout.height = viewSettings.height;\n        }\n\n        view.size(viewSettings.layout.width, viewSettings.layout.height);\n        view.reframe(viewSettings.layout.width, viewSettings.layout.height);\n        view.setLayout(viewSettings.layout);\n      })\n\n      // this.views.forEach(function(view){\n      //   if (view) {\n      //     view.reframe(layout.width, layout.height);\n      //     view.setLayout(layout);\n      //   }\n      // });\n\n    }\n\n  }\n\n  addEventListeners() {\n    var scroller;\n\n    window.addEventListener(\"unload\", function(e){\n      this.destroy();\n    }.bind(this));\n\n    if(!this.settings.fullsize) {\n      scroller = this.container;\n    } else {\n      scroller = window;\n    }\n\n    this._onScroll = this.onScroll.bind(this);\n    scroller.addEventListener(\"scroll\", this._onScroll);\n\n  }\n\n  removeEventListeners(){\n    var scroller;\n\n    if(!this.settings.fullsize) {\n      scroller = this.container;\n    } else {\n      scroller = window;\n    }\n\n    scroller.removeEventListener(\"scroll\", this._onScroll);\n    this._onScroll = undefined;\n  }\n\n  destroy(){\n    clearTimeout(this.orientationTimeout);\n    clearTimeout(this.resizeTimeout);\n    clearTimeout(this.afterScrolled);\n\n    this.clear();\n\n    this.removeEventListeners();\n\n    this.stage.destroy();\n\n    this.rendered = false;\n\n    /*\n\n      clearTimeout(this.trimTimeout);\n      if(this.settings.hidden) {\n        this.element.removeChild(this.wrapper);\n      } else {\n        this.element.removeChild(this.container);\n      }\n    */\n  }\n\n  next() {\n    var next;\n    var left;\n\n    var displaying = new defer();\n    var displayed = displaying.promise;\n\n    let dir = this.settings.direction;\n\n    if(!this.views.length) return;\n\n    this.scrollTop = this.container.scrollTop;\n\n    let top  = this.container.scrollTop + this.container.offsetHeight;\n\n    this.scrollBy(0, this.layout.height, false);\n\n    this.q.enqueue(function() {\n      displaying.resolve();\n      return displayed;\n    })\n  }\n\n  prev() {\n    var next;\n    var left;\n\n    var displaying = new defer();\n    var displayed = displaying.promise;\n\n    let dir = this.settings.direction;\n\n    if(!this.views.length) return;\n\n    this.scrollTop = this.container.scrollTop;\n\n    let top  = this.container.scrollTop - this.container.offsetHeight;\n    this.scrollBy(0, -this.layout.height, false);\n\n    this.q.enqueue(function() {\n      displaying.resolve();\n      return displayed;\n    })\n  }\n\n  clear () {\n\n    // // this.q.clear();\n\n    if (this.views) {\n      this.views.hide();\n      this.scrollTo(0,0, true);\n      this.views.clear();\n    }\n  }\n\n  currentLocation() {\n    let visible = this.visible();\n    let container = this.container.getBoundingClientRect();\n    let pageHeight = (container.height < window.innerHeight) ? container.height : window.innerHeight;\n\n    let offset = 0;\n    let used = 0;\n\n    if(this.settings.fullsize) {\n      offset = window.scrollY;\n    }\n\n    let sections = visible.map((view) => {\n      let {index, href} = view.section;\n      let position = view.position();\n      let height = view.height();\n\n      let startPos = offset + container.top - position.top + used;\n      let endPos = startPos + pageHeight - used;\n      if (endPos > height) {\n        endPos = height;\n        used = (endPos - startPos);\n      }\n\n      let totalPages = this.layout.count(height, pageHeight).pages;\n\n      let currPage = Math.ceil(startPos / pageHeight);\n      let pages = [];\n      let endPage = Math.ceil(endPos / pageHeight);\n\n      pages = [];\n      for (var i = currPage; i <= endPage; i++) {\n        let pg = i + 1;\n        pages.push(pg);\n      }\n\n      totalPages = pages.length;\n\n      let mapping = this.mapping.page(view.contents, view.section.cfiBase, startPos, endPos);\n\n      return {\n        index,\n        href,\n        pages,\n        totalPages,\n        mapping\n      };\n    });\n\n    if ( sections.length == 0 ) {\n      self._forceLocationEvent = true;\n    }\n\n    return sections;\n  }\n\n  isRendered() {\n    return this.rendered;\n  }\n\n  scale(s) {\n    if ( s == null ) { s = 1.0; }\n    this.settings.scale = this.settings.xscale = s;\n\n    // if (this.stage) {\n    //   this.stage.scale(s);\n    // }\n\n    this.clear();\n    this.updateLayout();\n    this.emit(EVENTS.MANAGERS.RESIZED, {\n      width: this._stageSize.width,\n      height: this._stageSize.height\n    });\n  }\n\n  calcuateWidth(width) {\n    var retval = width * this.fraction * this.settings.xscale;\n    // if ( retval > this.settings.maxWidth * this.settings.xscale ) {\n    //   retval = this.settings.maxWidth * this.settings.xscale;\n    // }\n    return retval;\n  }\n\n  calculateHeight(height) {\n    var minHeight = this.layout.name == 'xxpre-paginated' ? 0 : this.settings.minHeight;\n    return height > minHeight ? this.layout.height : this.settings.minHeight;\n  }\n\n}\n\nScrollingContinuousViewManager.toString = function() { return 'continuous'; }\n\n//-- Enable binding events to Manager\nEventEmitter(ScrollingContinuousViewManager.prototype);\n\nexport default ScrollingContinuousViewManager;\n\n","function Viewport(t,e){var i=this;this.container=t,this.observers=[],this.lastX=0,this.lastY=0;var o=!1,n=function(){o||(o=!0,requestAnimationFrame(function(){for(var t=i.observers,e=i.getState(),n=t.length;n--;)t[n].check(e);i.lastX=e.positionX,i.lastY=e.positionY,o=!1}))},r=e.handleScrollResize,s=this.handler=r?r(n):n;addEventListener(\"scroll\",s,!0),addEventListener(\"resize\",s,!0),addEventListener(\"DOMContentLoaded\",function(){(i.mutationObserver=new MutationObserver(n)).observe(document,{attributes:!0,childList:!0,subtree:!0})})}function Observer(t){return this.offset=~~t.offset||0,this.container=t.container||document.body,this.once=Boolean(t.once),this.observerCollection=t.observerCollection||defaultObserverCollection,this.activate()}function ObserverCollection(t){for(var e=arguments.length,i=Array(e);e--;)i[e]=arguments[e];if(void 0===t&&(t={}),!(this instanceof ObserverCollection))return new(Function.prototype.bind.apply(ObserverCollection,[null].concat(i)));this.viewports=new Map,this.handleScrollResize=t.handleScrollResize}Viewport.prototype={getState:function(){var t,e,i,o,n=this.container,r=this.lastX,s=this.lastY;return n===document.body?(t=window.innerWidth,e=window.innerHeight,i=window.pageXOffset,o=window.pageYOffset):(t=n.offsetWidth,e=n.offsetHeight,i=n.scrollLeft,o=n.scrollTop),{width:t,height:e,positionX:i,positionY:o,directionX:r<i?\"right\":r>i?\"left\":\"none\",directionY:s<o?\"down\":s>o?\"up\":\"none\"}},destroy:function(){var t=this.handler,e=this.mutationObserver;removeEventListener(\"scroll\",t),removeEventListener(\"resize\",t),e&&e.disconnect()}},Observer.prototype={activate:function(){var t=this.container,e=this.observerCollection,i=e.viewports,o=i.get(t);o||(o=new Viewport(t,e),i.set(t,o));var n=o.observers;return n.indexOf(this)<0&&n.push(this),o},destroy:function(){var t=this.container,e=this.observerCollection.viewports,i=e.get(t);if(i){var o=i.observers,n=o.indexOf(this);n>-1&&o.splice(n,1),o.length||(i.destroy(),e.delete(t))}}};var defaultObserverCollection=new ObserverCollection;function PositionObserver(t){for(var e=arguments.length,i=Array(e);e--;)i[e]=arguments[e];if(void 0===t&&(t={}),!(this instanceof PositionObserver))return new(Function.prototype.bind.apply(PositionObserver,[null].concat(i)));this.onTop=t.onTop,this.onBottom=t.onBottom,this.onLeft=t.onLeft,this.onRight=t.onRight,this.onMaximized=t.onMaximized,this._wasTop=!0,this._wasBottom=!1,this._wasLeft=!0,this._wasRight=!1;var o=Observer.call(this,t);this.check(o.getState())}function ElementObserver(t,e){for(var i=arguments.length,o=Array(i);i--;)o[i]=arguments[i];if(void 0===e&&(e={}),!(this instanceof ElementObserver))return new(Function.prototype.bind.apply(ElementObserver,[null].concat(o)));this.element=t,this.onEnter=e.onEnter,this.onExit=e.onExit,this._didEnter=!1;var n=Observer.call(this,e);isElementInDOM(t)&&this.check(n.getState())}function isElementInViewport(t,e,i,o){var n,r,s,h,l=t.getBoundingClientRect();if(!l.width||!l.height)return!1;var a=window.innerWidth,c=window.innerHeight,v=a;if(o===document.body)n=c,r=0,s=v,h=0;else{if(!(l.top<c&&l.bottom>0&&l.left<v&&l.right>0))return!1;var d=o.getBoundingClientRect();n=d.bottom,r=d.top,s=d.right,h=d.left}return l.top<n+e&&l.bottom>r-e&&l.left<s+e&&l.right>h-e}function isElementInDOM(t){return t&&t.parentNode}PositionObserver.prototype=Object.create(Observer.prototype),PositionObserver.prototype.constructor=PositionObserver,PositionObserver.prototype.check=function(t){var e=this,i=e.onTop,o=e.onBottom,n=e.onLeft,r=e.onRight,s=e.onMaximized,h=e._wasTop,l=e._wasBottom,a=e._wasLeft,c=e._wasRight,v=e.container,d=e.offset,p=e.once,f=v.scrollHeight,b=v.scrollWidth,u=t.width,w=t.height,O=t.positionX,m=t.positionY,g=m-d<=0,y=f>w&&w+m+d>=f,E=O-d<=0,_=b>u&&u+O+d>=b,C=!1;o&&!l&&y?o.call(this,v,t):i&&!h&&g?i.call(this,v,t):r&&!c&&_?r.call(this,v,t):n&&!a&&E?n.call(this,v,t):s&&f===w?s.call(this,v,t):C=!0,p&&!C&&this.destroy(),this._wasTop=g,this._wasBottom=y,this._wasLeft=E,this._wasRight=_},ElementObserver.prototype=Object.create(Observer.prototype),ElementObserver.prototype.constructor=ElementObserver,ElementObserver.prototype.check=function(t){var e=this.container,i=this.onEnter,o=this.onExit,n=this.element,r=this.offset,s=this.once,h=this._didEnter;if(!isElementInDOM(n))return this.destroy();var l=isElementInViewport(n,r,t,e);!h&&l?(this._didEnter=!0,i&&(i.call(this,n,t),s&&this.destroy())):h&&!l&&(this._didEnter=!1,o&&(o.call(this,n,t),s&&this.destroy()))};export{PositionObserver,ElementObserver,ObserverCollection};\n//# sourceMappingURL=viewprt.esm.js.map\n","import IframeView from \"epubjs/src/managers/views/iframe\";\nimport Contents from \"epubjs/src/contents\";\n\nimport { EVENTS } from \"epubjs/src/utils/constants\";\n\nimport {extend, borders, uuid, isNumber, bounds, defer, createBlobUrl, revokeBlobUrl} from \"epubjs/src/utils/core\";\n\nimport {\n  ElementObserver,\n  PositionObserver,\n  ObserverCollection // Advanced: Used for grouping custom viewport handling\n} from \"viewprt\";\n\nclass StickyIframeView extends IframeView {\n    constructor(section, options) {\n        super(section, options);\n\n        this.element.style.height = `${this.layout.height}px`;\n        this.element.style.width = `${this.layout.width}px`;\n        this.element.style.visibility = \"hidden\";\n\n        // console.log(\"AHOY sticky NEW\", this.layout.height);\n    }\n\n    container(axis) {\n        var check = document.querySelector(`div[ref='${this.index}']`);\n        if ( check ) {\n            check.dataset.reused = 'true';\n            return check;\n        }\n\n        var element = document.createElement(\"div\");\n\n        element.classList.add(\"epub-view\");\n\n        // this.element.style.minHeight = \"100px\";\n        element.style.height = \"0px\";\n        element.style.width = \"0px\";\n        element.style.overflow = \"hidden\";\n        element.style.position = \"relative\";\n        element.style.display = \"block\";\n\n        element.setAttribute('ref', this.index);\n\n        if(axis && axis == \"horizontal\"){\n            element.style.flex = \"none\";\n        } else {\n            element.style.flex = \"initial\";\n        }\n\n        return element;\n    }\n\n    create() {\n\n        if(this.iframe) {\n            return this.iframe;\n        }\n\n        if(!this.element) {\n            this.element = this.createContainer();\n        }\n\n        if ( this.element.hasAttribute('layout-height') ) {\n            var height = parseInt(this.element.getAttribute('layout-height'), 10);\n            this._layout_height = height;\n        }\n\n        this.iframe = this.element.querySelector(\"iframe\");\n        if ( this.iframe ) {\n            return this.iframe;\n        }\n\n        this.iframe = document.createElement(\"iframe\");\n        this.iframe.id = this.id;\n        this.iframe.scrolling = \"no\"; // Might need to be removed: breaks ios width calculations\n        this.iframe.style.overflow = \"hidden\";\n        this.iframe.seamless = \"seamless\";\n        // Back up if seamless isn't supported\n        this.iframe.style.border = \"none\";\n\n        this.iframe.setAttribute(\"enable-annotation\", \"true\");\n\n        this.resizing = true;\n\n        // this.iframe.style.display = \"none\";\n        this.element.style.visibility = \"hidden\";\n        this.iframe.style.visibility = \"hidden\";\n        this.element.classList.add('epub-view---loading');\n\n        this.iframe.style.width = \"0\";\n        this.iframe.style.height = \"0\";\n        this._width = 0;\n        this._height = 0;\n\n        this.element.setAttribute(\"ref\", this.index);\n        this.element.setAttribute(\"data-href\", this.section.href);\n\n        // this.element.appendChild(this.iframe);\n        this.added = true;\n\n        this.elementBounds = bounds(this.element);\n\n        // if(width || height){\n        //   this.resize(width, height);\n        // } else if(this.width && this.height){\n        //   this.resize(this.width, this.height);\n        // } else {\n        //   this.iframeBounds = bounds(this.iframe);\n        // }\n\n\n        if((\"srcdoc\" in this.iframe)) {\n            this.supportsSrcdoc = true;\n        } else {\n            this.supportsSrcdoc = false;\n        }\n\n        if (!this.settings.method) {\n            this.settings.method = this.supportsSrcdoc ? \"srcdoc\" : \"write\";\n        }\n\n        return this.iframe;\n    }\n\n    reframe(width, height) {\n        var size;\n\n        var minHeight = this.settings.minHeight || 0;\n        var maxHeight = this.settings.maxHeight || -1;\n\n        // console.log(\"AHOY AHOY reframe\", this.index, width, height);\n\n        if(isNumber(width)){\n            this.element.style.width = width + \"px\";\n            if ( this.iframe ) {\n                this.iframe.style.width = width + \"px\";\n            }\n            this._width = width;\n        }\n\n        if(isNumber(height)){\n            var checkMinHeight = false; // not doing this\n            if ( isNumber(width) && width > height ) { checkMinHeight = false; }\n            height = checkMinHeight && ( height <= minHeight ) ? minHeight : height;\n\n            var styles = window.getComputedStyle(this.element);\n            // setting the element height is delayed\n            if ( this.iframe ) {\n                this.iframe.style.height = height + \"px\";\n            }\n            // console.log(\"AHOY VIEW DISPLAY REFRAME\", this.index, this.element.style.height, this.iframe && this.iframe.style.height);\n            this._height = height;\n        }\n\n        let widthDelta = this.prevBounds ? width - this.prevBounds.width : width;\n        let heightDelta = this.prevBounds ? height - this.prevBounds.height : height;\n\n        size = {\n            width: width,\n            height: height,\n            widthDelta: widthDelta,\n            heightDelta: heightDelta,\n        };\n\n        this.pane && this.pane.render();\n\n        requestAnimationFrame(() => {\n            let mark;\n            for (let m in this.marks) {\n                if (this.marks.hasOwnProperty(m)) {\n                    mark = this.marks[m];\n                    this.placeMark(mark.element, mark.range);\n                }\n            }\n        });\n\n        this.onResize(this, size);\n\n        this.emit(EVENTS.VIEWS.RESIZED, size);\n\n        this.prevBounds = size;\n\n        this.elementBounds = bounds(this.element);\n\n    }\n\n    reframeElement() {\n        if ( ! this.iframe ) { return; }\n        // var height = this.iframe.contentDocument.body.offsetHeight;\n        var height = this.iframe.offsetHeight;\n        var styles = window.getComputedStyle(this.element);\n        var new_height = ( height + parseInt(styles.paddingTop) + parseInt(styles.paddingBottom) )\n        this.element.style.height = `${new_height}px`;\n        // console.log(\"AHOY AFTER RESIZED ELEMENT\", this.index, height, new_height, styles.paddingTop, styles.paddingBottom);\n    }\n\n    display(request) {\n        var displayed = new defer();\n\n        if (!this.displayed) {\n\n            this.render(request)\n                .then(function () {\n\n                    this.emit(EVENTS.VIEWS.DISPLAYED, this);\n                    this.onDisplayed(this);\n\n                    this.displayed = true;\n                    displayed.resolve(this);\n\n                }.bind(this), function (err) {\n                    displayed.reject(err, this);\n                });\n\n        } else {\n            displayed.resolve(this);\n        }\n\n\n        return displayed.promise;\n    }\n\n    show() {\n        super.show();\n        this.element.classList.remove('epub-view---loading');\n    }\n\n    hide() {\n        super.hide();\n    }\n\n    onLoad(event, promise) {\n\n      this.window = this.iframe.contentWindow;\n      this.document = this.iframe.contentDocument;\n\n      this.contents = new Contents(this.document, this.document.body, this.section.cfiBase, this.section.index);\n      this.contents.axis = this.settings.axis;\n\n      this.rendering = false;\n\n      var link = this.document.querySelector(\"link[rel='canonical']\");\n      if (link) {\n        link.setAttribute(\"href\", this.section.canonical);\n      } else {\n        link = this.document.createElement(\"link\");\n        link.setAttribute(\"rel\", \"canonical\");\n        link.setAttribute(\"href\", this.section.canonical);\n        this.document.querySelector(\"head\").appendChild(link);\n      }\n\n      this.contents.on(EVENTS.CONTENTS.EXPAND, () => {\n        if(this.displayed && this.iframe) {\n          this.expand();\n          if (this.contents) {\n            // console.log(\"AHOY EXPAND\", this.index, this.layout.columnWidth, this.layout.height);\n            this.layout.format(this.contents);\n          }\n        }\n      });\n\n      this.contents.on(EVENTS.CONTENTS.RESIZE, (e) => {\n        if(this.displayed && this.iframe) {\n          this.expand();\n          if (this.contents) {\n            // console.log(\"AHOY RESIZE\", this.index, this.layout.columnWidth, this.layout.height);\n            this.layout.format(this.contents);\n          }\n        }\n      });\n\n      promise.resolve(this.contents);\n    }\n\n    unload() {\n\n        for (let cfiRange in this.highlights) {\n            this.unhighlight(cfiRange);\n        }\n\n        for (let cfiRange in this.underlines) {\n            this.ununderline(cfiRange);\n        }\n\n        for (let cfiRange in this.marks) {\n            this.unmark(cfiRange);\n        }\n\n        if (this.pane) {\n            this.element.removeChild(this.pane.element);\n            this.pane = undefined;\n        }\n\n        if (this.blobUrl) {\n            revokeBlobUrl(this.blobUrl);\n        }\n\n        if(this.displayed){\n            this.displayed = false;\n\n            this.removeListeners();\n\n            this.stopExpanding = true;\n            this.element.removeChild(this.iframe);\n            this.element.style.visibility = \"hidden\";\n\n            this.iframe = undefined;\n            this.contents = undefined;\n\n            // this._textWidth = null;\n            // this._textHeight = null;\n            // this._width = null;\n            // this._height = null;\n        }\n\n        // this.element.style.height = \"0px\";\n        // this.element.style.width = \"0px\";\n    }\n\n    // setLayout(layout) {\n        \n    // }\n\n}\n\nexport default StickyIframeView;\n\n","import Url from \"epubjs/src/utils/url\";\n\nexport function popupTables(reader, contents) {\n  var tables = contents.document.querySelectorAll('table');\n  var h = reader._rendition.manager.layout.height;\n  var clipped_tables = [];\n  for(var i = 0; i < tables.length; i++) {\n    var table = tables[i];\n    if ( table.offsetHeight >= ( h * 0.75 ) ) {\n      clipped_tables.push(table);\n    }\n  }\n\n  if ( ! clipped_tables.length ) { return ; }\n\n  contents._originalHTML = contents.document.documentElement.outerHTML;\n\n  contents.addStylesheetRules({\n    'table.clipped': {\n      'break-inside': 'avoid',\n      'width': `${reader._rendition.manager.layout.columnWidth * 0.95}px !important`,\n      'table-layout': 'fixed'\n    },\n    'table.clipped tbody': {\n      'height': `${h * 0.25}px !important`,\n      overflow: 'scroll !important',\n      display: 'block !important',\n      position: 'relative !important',\n      width: '100%'\n    },\n    'table.clipped tr': {\n      display: 'block !important'\n    },\n    'table.clipped::after': {\n      content: \"\",\n      display: 'block',\n      break: 'all'\n    },\n    'div.clipped': {\n      position: 'absolute',\n      display: 'flex',\n      'align-items': 'center',\n      'justify-content': 'center',\n      top: '0px',\n      bottom: '0px',\n      right: '0px',\n      left: '0px',\n      'background-color': 'rgba(255, 255, 255, 0.75)'\n    },\n    'div.clipped button': {\n      cursor: 'pointer',\n      'background-color': '#000000',\n      color: '#ffffff',\n      margin: '2px 0',\n      border: '1px solid transparent',\n      'border-radius': '4px',\n      padding: '1rem 1rem',\n      'text-transform': 'uppercase'\n    },\n    'div.clipped button:active': {\n      transform: 'translateY(1px)',\n      filter: 'saturate(150%)'\n    },\n    'div.clipped button:hover, div.clipped button:focus': {\n      color: '#000000',\n      'border-color': 'currentColor',\n      'background-color': 'white'\n    }\n  });\n\n  reader._originalHTML = reader._originalHTML || {};\n\n  clipped_tables.forEach((table) => {\n    // find a dang background color\n    var element = table;\n    var styles\n    var bgcolor;\n    while ( bgcolor === undefined && element instanceof HTMLElement ) {\n      styles = window.getComputedStyle(element);\n      if ( styles.backgroundColor != 'rgba(0, 0, 0, 0)' && styles.backgroundColor != 'transparent' ) {\n        bgcolor = styles.backgroundColor;\n        break;\n      }\n      element = element.parentNode;\n    }\n\n    if ( ! bgcolor ) {\n      // no background color defined in the EPUB, so what is cozy-sun-bear using?\n      element = reader._panes['epub'];\n      while ( bgcolor === undefined && element instanceof HTMLElement ) {\n        styles = window.getComputedStyle(element);\n        if ( styles.backgroundColor != 'rgba(0, 0, 0, 0)' && styles.backgroundColor != 'transparent' ) {\n          bgcolor = styles.backgroundColor;\n          break;\n        }\n        element = element.parentNode;\n      }\n    }\n\n    if ( ! bgcolor ) { bgcolor = '#fff'; }\n\n    var tableHTML = table.outerHTML;\n\n    table.classList.add('clipped');\n\n    var div = document.createElement('div');\n    div.classList.add('clipped');\n    table.querySelector('tbody').appendChild(div);\n\n    var button = document.createElement('button');\n    button.innerText = 'Open table';\n\n    var tableId = table.getAttribute('data-id');\n    if ( ! tableId ) { \n      var ts = ( new Date() ).getTime();\n      tableId = \"table\" + ts + Math.random(ts);\n      table.setAttribute('data-id', tableId);\n    }\n\n    reader._originalHTML[tableId] = tableHTML;\n    // button.dataset.tableHTML = tableHTML;\n    button.addEventListener('click', function(event) {\n      event.preventDefault();\n\n      var regex = /<body[^>]+>/;\n      var index0 = contents._originalHTML.search(regex);\n      var tableHTML = reader._originalHTML[tableId];\n      var newHTML = contents._originalHTML.substr(0, index0) + `<body style=\"padding: 1.5rem; background: ${bgcolor}\"><section>${tableHTML}</section></body></html>`;\n\n      reader.popup({\n        title: 'View Table',\n        srcdoc: newHTML,\n        onLoad: function(contentDocument, modal) {\n          // adpated from epub.js#replaceLinks --- need to catch _any_ link\n          // to close the modal\n          var base = contentDocument.querySelector(\"base\");\n          var location = base ? base.getAttribute(\"href\") : undefined;\n\n          var links = contentDocument.querySelectorAll('a[href]');\n          for(var i = 0; i < links.length; i++) {\n            var link = links[i];\n            var href = link.getAttribute('href');\n            link.addEventListener('click', function(event) {\n              modal.closeModal();\n              var absolute = (href.indexOf('://') > -1);\n              if ( absolute ) {\n                link.setAttribute('target', '_blank');\n              } else {\n                var linkUrl = new Url(href, location);\n                if (linkUrl) {\n                  event.preventDefault();\n                  reader.gotoPage(linkUrl.Path.path + ( linkUrl.hash ? linkUrl.hash : '' ));\n                }\n              }\n            })\n          } \n        }\n      })\n\n    })\n\n    div.appendChild(button);\n\n  });\n}\n\nexport function extractElement() {\n\n}","\nvar INTERACTIVE = {};\nINTERACTIVE['A'] = true;\nINTERACTIVE['SELECT'] = true;\nINTERACTIVE['BUTTON'] = true;\nINTERACTIVE['INPUT'] = true;\n\nvar installedResizeHandler = false;\n\nfunction isInteractive(node) {\n  if ( INTERACTIVE[node.nodeName] ) {\n    // possibly...\n    if ( node.nodeName == 'A' ) { return node.hasAttribute('href'); }\n    return true;\n  }\n  return false;\n}\n\nfunction hideEverythingInContents(contents) {\n  var elements = contents.document.querySelectorAll('body *');\n  for(var i = 0; i < elements.length; i++) {\n    if ( elements[i].nodeType == Node.ELEMENT_NODE ) {\n      var element = elements[i];\n      element.setAttribute('aria-hidden', true);\n      element.setAttribute('tabindex', '-1');\n    }\n  }\n}\n\nfunction hideEverythingVisible(contents) {\n  var elements = contents.document.querySelectorAll('[aria-hidden=\"false\"]');\n  for(var i = 0; i < elements.length; i++) {\n    if ( elements[i].nodeType == Node.ELEMENT_NODE ) {\n      elements[i].setAttribute('aria-hidden', true);\n      if ( INTERACTIVE[elements[i].nodeName] ) {\n        elements[i].setAttribute('tabindex', '-1');\n      }\n    }\n  }\n}\n\nfunction findMatchingContents(contents, cfi) {\n  for(var content of contents) {\n    if ( cfi.indexOf(content.cfiBase) > -1 ) {\n      return content;\n    }\n  }\n  return null; // ???\n}\n\nfunction showEverythingVisible(container, range) {\n  var selfOrElement = function(node) {\n    return ( node.nodeType == Node.TEXT_NODE ) ? node.parentNode : node;\n  }\n\n  var showNode = function(node) {\n    node.setAttribute('aria-hidden', false);\n    if ( INTERACTIVE[node.nodeName] ) {\n      var bounds = node.getBoundingClientRect();\n      var x = bounds.x;\n      var x2 = x + container.scrollLeft;\n      // console.log(\"AHOY NODE BOUNDS\", node, x, x2, \n      //   \"A\",\n      //   x > container.scrollLeft + container.offsetWidth,\n      //   x < container.scrollLeft,\n      //   \"B\",\n      //   x2 > container.scrollLeft + container.offsetWidth,\n      //   x2 < container.scrollLeft\n      //   )\n      if ( x > container.scrollLeft + container.offsetWidth || \n           x < container.scrollLeft ) {\n      } else {\n        node.setAttribute('tabindex', 0);\n        node.addEventListener('focus', (event) => {\n          // console.log(\"AHOY FOCUS\", node, container.scrollLeft, container.dataset.scrollLeft);\n          var scrollLeft = parseInt(container.dataset.scrollLeft, 10);\n          setTimeout(() => {\n            container.scrollLeft = scrollLeft;\n          }, 0);\n        })\n      }\n    }\n    // node.setAttribute('tabindex', 0);\n    for(var child of node.children){\n      showNode(child);\n    }\n  }\n\n  var showNodeAndSelf = function(node) {\n    if ( node.getAttribute('aria-hidden') == 'true' ) {\n      showNode(node);\n      var parent = node.parentNode;\n      while ( parent != node.ownerDocument.body ) {\n        // console.log(\"AHOY ACTIVATING UP\", parent);\n        parent.setAttribute('aria-hidden', false);\n        //node.setAttribute('tabindex', 0);\n        parent = parent.parentNode;\n      }\n    }\n  }\n\n  var ancestor = selfOrElement(range.commonAncestorContainer);\n  var startContainer = selfOrElement(range.startContainer);\n  var endContainer = selfOrElement(range.endContainer);\n\n  var _iterator = document.createNodeIterator(\n    ancestor,\n    NodeFilter.SHOW_ALL,\n    {\n      acceptNode: function(node) {\n        return NodeFilter.FILTER_ACCEPT;\n      }\n    }\n  )\n\n  var _nodes = [];\n  while ( _iterator.nextNode() ) {\n    // console.log(\"AHOY ITERATOR\", _nodes.length, _iterator.referenceNode, startContainer, _iterator.referenceNode !== startContainer);\n    if (_nodes.length === 0 && _iterator.referenceNode !== startContainer) continue;\n    _nodes.push(_iterator.referenceNode);\n    if (_iterator.referenceNode === endContainer) break;\n  }\n\n  // console.log(\"AHOY NODES\", _nodes, _nodes[0] == startContainer);\n  if ( _nodes.length == 1 && _nodes[0] == startContainer ) {\n    _nodes.pop();\n    for(var child of startContainer.children) {\n      _nodes.push(child);\n    }\n  }\n\n  _nodes.forEach((node) => {\n    if ( node.nodeType == Node.ELEMENT_NODE ) {\n      showNodeAndSelf(node);\n    } else {\n      showNodeAndSelf(node.parentNode);\n    }\n  })\n}\n\nexport function updateFocus(reader, location) {\n  if ( reader.settings.flow == 'scrolled-doc' ) { return ; }\n  if ( reader.options.disableFocusHandling ) { return ; }\n  setTimeout(() => {\n    if ( location.start.cfi == reader._last_location_start_cfi && \n         location.end.cfi == reader._last_location_end_cfi ) {\n      return;\n    }\n    reader._last_location_start_cfi = location.start.cfi;\n    reader._last_location_end_cfi = location.end.cfi;\n    __updateFocus(reader, location);\n  }, 0);\n\n  reader._last_location_start = location.start.href;\n}\n\nvar elemsWithBoundingRects = [];\nvar getBoundingClientRect = function(element) {\n  if ( ! element._boundingClientRect ) {\n\n    // If not, get it then store it for future use.\n    element._boundingClientRect = element.getBoundingClientRect();\n    elemsWithBoundingRects.push( element );\n  }\n  return element._boundingClientRect;\n}\n\nvar clearClientRects = function() {\n  var i;\n  for ( i = 0; i < elemsWithBoundingRects.length; i++ ) {\n    if ( elemsWithBoundingRects[ i ] ) {\n      elemsWithBoundingRects[ i ]._boundingClientRect = null;\n    }\n  }\n  elemsWithBoundingRects = [];\n}\n\nexport function __updateFocus(reader, location) {\n  // don't use location\n\n  var selfOrElement = function(node) {\n    return ( node.nodeType == Node.TEXT_NODE ) ? node.parentNode : node;\n  }\n\n  var container = reader._rendition.manager.container;\n  var contents = findMatchingContents(reader._rendition.manager.getContents(), location.start.cfi);\n  hideEverythingVisible(contents);\n\n  var containerX = container.scrollLeft;\n  var containerX2 = container.scrollLeft + container.offsetWidth;\n\n  var _showThisNode = function(node) {\n    var bounds = getBoundingClientRect(node); // node.getBoundingClientRect();\n    var x = bounds.left;\n    var x2 = bounds.left + bounds.width;\n\n    var isVisible = false;\n    if ( x <= containerX && x2 >= containerX2 ) { isVisible = true; }\n    else if ( x >= containerX && x < containerX2 ) { isVisible = true; }\n    else if ( x2 > containerX && x2 <= containerX2 ) { isVisible = true; }\n    // else if ( x <= containerX && x2 <= containerX2 ) { isVisible = true; }\n    // else if ( x >= containerX && x2 <= containerX2 ) { isVisible = true; }\n    // else if ( x >= containerX && x2 > containerX2 ) { isVisible = true; }\n\n    if ( isVisible ) {\n      // console.log(\"AHOY\", isVisible, node, bounds, containerX, containerX2);\n      node.setAttribute('aria-hidden', 'false');\n      if ( isInteractive(node) ) {\n        node.setAttribute('tabindex', '0');\n      }\n      var hasSeenVisibleChild = false;\n      for(var child of node.children) {\n        var retval = _showThisNode(child);\n        if ( retval ) { hasSeenVisibleChild = true; }\n        if ( ! retval && hasSeenVisibleChild ) {\n          break;\n        }\n      }\n    }\n\n    return isVisible;\n  }\n\n  var startRange = new ePub.CFI(location.start.cfi).toRange(contents.document);\n  var startNode = selfOrElement(startRange.startContainer);\n\n  var _nodes = [];\n  var checkNode = startNode;\n  while ( checkNode != contents.document.body ) {\n    var bounds = getBoundingClientRect(checkNode); // checkNode.getBoundingClientRect();\n    var x = bounds.left;\n    var x2 = bounds.left + bounds.width;\n\n    var isVisible = false;\n    // if ( x <= containerX && x2 >= containerX2 ) { isVisible = true; }\n    if ( x >= containerX && x < containerX2 ) { isVisible = true; }\n    else if ( x2 > containerX && x2 <= containerX2 ) { isVisible = true; }\n\n    if ( isVisible ) {\n      startNode = checkNode;\n      checkNode = checkNode.parentNode;\n    } else {\n      break;\n    }\n\n  }\n\n  var parentNode = startNode; // .parentNode;\n  while ( parentNode != contents.document.body ) {\n    parentNode.setAttribute('aria-hidden', false);\n    parentNode = parentNode.parentNode;\n  }\n\n  _showThisNode(startNode);\n\n  var children = startNode.parentNode.children;\n  var doProcess = false;\n  for (var nextNode of children) {\n    if ( nextNode == startNode ) { doProcess = true; }\n    else if ( doProcess ) {\n      var isVisible = _showThisNode(nextNode);\n      if ( ! isVisible ) { break; }\n    }\n  }\n}\n\nexport function setupFocusRules(reader) {\n\n  if ( ! installedResizeHandler ) {\n    installedResizeHandler = true;\n    reader.on('resize', () => {\n      clearClientRects();\n    })\n  }\n\n  var contents = reader._rendition.getContents();\n  contents.forEach( (content) => {\n  \n    if ( reader.options.debugFocusHandling ) {\n      content.addStylesheetRules({\n        '[aria-hidden=\"true\"]': {\n          'opacity': '0.25 !important'\n        },\n        ':focus': {\n          'outline': '2px solid goldenrod',\n          'padding': '4px',\n          'background': 'lightgoldenrodyellow'\n        }\n      })\n    }\n\n    hideEverythingInContents(content);\n\n    // --- attempts to heal safari/edge\n    content.document.addEventListener('keydown', function(event) {\n      if ( event.keyCode == 9 ) {\n\n        var activeElement = content.document.activeElement;\n        if ( activeElement ) {\n          reader._manager.container.dataset.scrollLeft = reader._manager.container.scrollLeft;\n        } else {\n          reader._manager.container.dataset.scrollLeft = 0;\n        }\n      }\n    })\n  });\n\n  reader.on('keyDown', function(data) {\n    if ( data.keyName == 'Tab' ) {\n      reader._manager.container.dataset.scrollLeft = reader._manager.container.scrollLeft;\n    }\n\n    if ( data.keyName == 'Tab' && data.inner ) {\n      var container = reader._rendition.manager.container;\n      // container.dataset.scrollLeft = 0;\n\n      var mod;\n      var delta;\n      var x; var xyz;\n      setTimeout(function() {\n        var scrollLeft = container.scrollLeft;\n        mod = scrollLeft % parseInt(reader._rendition.manager.layout.delta, 10);\n        if ( mod > 0 && ( mod / reader._rendition.manager.layout.delta ) < 0.99 ) {\n          // var x = Math.floor(event.target.scrollLeft / parseInt(self._rendition.manager.layout.delta, 10)) + 1;\n          // var delta = ( x * self._rendition.manager.layout.delta) - event.target.scrollLeft;\n          x = Math.floor(container.scrollLeft / parseInt(reader._rendition.manager.layout.delta, 10));\n          if ( data.shiftKey ) { x -= 0 ; }\n          else { x += 1; }\n          var y = container.scrollLeft;\n          delta = ( x * self._rendition.manager.layout.delta ) - y;\n          xyz = ( x * reader._rendition.manager.layout.delta );\n          // if ( data.shiftKey ) { delta *= -1 ; }\n          if ( true || ! data.shiftKey ) {\n            reader._rendition.manager.scrollBy(delta);\n          }\n        }\n      }, 0);\n    }\n  })\n}","import * as Util from '../core/Util';\nimport {Reader} from './Reader';\nimport ePub from 'epubjs';\nwindow.ePub = ePub;\nimport * as DomUtil from '../dom/DomUtil';\nimport * as Browser from '../core/Browser';\n\nimport path from \"path-webpack\";\n\nimport PrePaginatedContinuousViewManager from '../epubjs/managers/continuous/prepaginated';\nimport ReusableIframeView from '../epubjs/managers/views/iframe';\n\nimport ScrollingContinuousViewManager from '../epubjs/managers/continuous/scrolling';\nimport StickyIframeView from '../epubjs/managers/views/sticky';\n\nimport { popupTables } from \"../utils/manglers\";\nimport * as focus from \"../utils/focus\";\n\nimport debounce from 'lodash/debounce';\n\nimport Hook from \"epubjs/src/utils/hook\";\n\nReader.EpubJS = Reader.extend({\n\n  initialize: function(id, options) {\n    Reader.prototype.initialize.apply(this, arguments);\n    this._epubjs_ready = false;\n    window.xpath = path;\n  },\n\n  open: function(target, callback) {\n    var self = this;\n    if ( typeof(target) == 'function' ) {\n      callback = target;\n      target = undefined;\n    }\n    if ( callback == null ) {\n      callback = function() { };\n    }\n\n    self.rootfiles = [];\n\n    this.options.rootfilePath = this.options.rootfilePath || sessionStorage.getItem('rootfilePath');\n\n    var book_href = this.options.href;\n    var book_options = { packagePath: this.options.rootfilePath };\n    if ( this.options.useArchive ) {\n      book_href = book_href.replace(/\\/(\\w+)\\/$/, '/$1/$1.sm.epub');\n      book_options.openAs = 'epub';\n    }\n    this._book = ePub(book_href, book_options);\n    sessionStorage.removeItem('rootfilePath');\n\n    this._book.loaded.navigation.then(function(toc) {\n      self._contents = toc;\n      self.metadata = self._book.packaging.metadata;\n\n      self.fire('updateContents', toc);\n      self.fire('updateTitle', self._book.packaging.metadata);\n    })\n    this._book.ready.then(function() {\n      self.parseRootfiles();\n\n      self.draw(target, callback);\n\n      if ( self.metadata.layout == 'pre-paginated' ) {\n        // fake it with the spine\n        var locations = [];\n        self._book.spine.each(function(item) {\n          locations.push(`epubcfi(${item.cfiBase}!/4/2)`);\n          self.locations._locations.push(`epubcfi(${item.cfiBase}!/4/2)`);\n        });\n        self.locations.total = locations.length;\n        var t;\n        var f = function() {\n          if ( self._rendition && self._rendition.manager && self._rendition.manager.stage ) {\n            var location = self._rendition.currentLocation();\n            if ( location && location.start) {\n              self.fire('updateLocations', locations);\n              clearTimeout(t);\n              return;\n            }\n          }\n          t = setTimeout(f, 100);\n        }\n\n        t = setTimeout(f, 100);\n      } else {\n        self._book.locations.generate(1600).then(function(locations) {\n          self.fire('updateLocations', locations);\n        })\n      }\n    })\n    // .then(callback);\n  },\n\n  parseRootfiles: function() {\n    var self = this;\n    self._book.load(self._book.url.resolve(\"META-INF/container.xml\")).then(function(containerDoc) {\n        var rootfiles = containerDoc.querySelectorAll(\"rootfile\");\n        if ( rootfiles.length > 1 ) {\n          for(var i = 0; i < rootfiles.length; i++) {\n            var rootfile = rootfiles[i];\n            var rootfilePath = rootfile.getAttribute('full-path');\n            var label = rootfile.getAttribute('rendition:label');\n            var layout = rootfile.getAttribute('rendition:layout');\n            self.rootfiles.push({\n              rootfilePath: rootfilePath,\n              label: label,\n              layout: layout\n            })\n          }\n        }\n    })\n  },\n\n  draw: function(target, callback) {\n    var self = this;\n\n    if ( self._rendition && ! self._rendition.draft ) {\n      // self._unbindEvents();\n      var container = self._rendition.manager.container;\n      Object.keys(self._rendition.hooks).forEach(function(key) {\n        self._rendition.hooks[key].clear();\n      })\n      self._rendition.destroy();\n      self._rendition = null;\n    }\n\n\n    var key = self.metadata.layout || 'reflowable';\n    var flow = this.options.flow;\n    if ( self._cozyOptions[key] && self._cozyOptions[key].flow ) {\n      flow = self._cozyOptions[key].flow;\n    }\n\n    if ( flow == 'auto' ) {\n      if ( this.metadata.layout == 'pre-paginated' ) {\n          if ( this._container.offsetHeight <= this.options.forceScrolledDocHeight ){\n            flow = 'scrolled-doc';\n          }\n      } else {\n        // flow = 'paginated';\n        flow = this.metadata.flow || 'auto';\n      }\n    }\n\n    // if ( flow == 'auto' && this.metadata.layout == 'pre-paginated' ) {\n    //   if ( this._container.offsetHeight <= this.options.forceScrolledDocHeight ){\n    //     flow = 'scrolled-doc';\n    //   }\n    // }\n\n    // var key = `${flow}/${self.metadata.layout}`;\n    if ( self._cozyOptions[key] ) {\n      if ( self._cozyOptions[key].text_size ) {\n        self.options.text_size = self._cozyOptions[key].text_size;\n      }\n      if ( self._cozyOptions[key].scale ) {\n        self.options.scale = self._cozyOptions[key].scale;\n      }\n    }\n\n    this.settings = { flow: flow, stylesheet: this.options.injectStylesheet };\n    this.settings.manager = this.options.manager || 'default';\n\n    // if ( this.settings.flow == 'auto' && this.metadata.layout == 'pre-paginated' ) {\n    //   // dumb check to see if the window is _tall_ enough to put\n    //   // two pages side by side\n    //   if ( this._container.offsetHeight <= this.options.forceScrolledDocHeight ) {\n    //     this.settings.flow = 'scrolled-doc';\n\n    //     // this.settings.manager = PrePaginatedContinuousViewManager;\n    //     // this.settings.view = ReusableIframeView;\n\n    //     this.settings.manager = ScrollingContinuousViewManager;\n    //     this.settings.view = StickyIframeView;\n    //     this.settings.width = '100%'; // 100%?\n    //     this.settings.spine = this._book.spine;\n    //   }\n    // }\n\n    if ( this.settings.flow == 'auto' || this.settings.flow == 'paginated' ) {\n      this._panes['epub'].style.overflow = this.metadata.layout == 'pre-paginated' ? 'auto' : 'hidden';\n      this.settings.manager = 'default';\n    } else {\n      this._panes['epub'].style.overflow = 'auto';\n      if ( this.settings.manager == 'default' ) {\n        // this.settings.manager = 'continuous';\n        this.settings.manager = ScrollingContinuousViewManager;\n        this.settings.view = StickyIframeView;\n        this.settings.width = '100%'; // 100%?\n        this.settings.spine = this._book.spine;\n      }\n    }\n\n    if ( ! callback ) {\n      callback = function() { };\n    }\n\n    self.settings.height = '100%';\n    self.settings.width = '100%';\n    self.settings['ignoreClass'] = 'annotator-hl';\n\n    if ( this.metadata.layout == 'pre-paginated' && this.settings.manager == 'continuous' ) {\n        // this.settings.manager = 'prepaginated';\n        // this.settings.manager = PrePaginatedContinuousViewManager;\n        // this.settings.view = ReusableIframeView;\n        this.settings.manager = ScrollingContinuousViewManager;\n        this.settings.view = StickyIframeView;\n        this.settings.spread = 'none';\n    }\n\n    if ( this.metadata.layout == 'pre-paginated' && this.settings.manager == ScrollingContinuousViewManager ) {\n      if ( this.options.minHeight ) {\n        this.settings.minHeight = this.options.minHeight;\n      }\n    }\n\n    if ( self.options.scale != '100' ) {\n      self.settings.scale = parseInt(self.options.scale, 10) / 100;\n    }\n\n    self._panes['book'].dataset.manager = this.settings.manager + ( this.settings.spread ? `-${this.settings.spread}` : '');\n    self._panes['book'].dataset.layout = this.metadata.layout || 'reflowable';\n\n    self._drawRendition(target, callback);\n  },\n\n  _drawRendition: function(target, callback) {\n    var self = this;\n\n    // self._rendition = self._book.renderTo(self._panes['epub'], self.settings);\n    self.rendition = new ePub.Rendition(self._book, self.settings);\n    self._book.rendition = self._rendition;\n    self._updateFontSize();\n    self._rendition.attachTo(self._panes['epub']);\n\n    self._bindEvents();\n    self._drawn = true;\n\n    if ( target && target.start ) { target = target.start; }\n    if ( ! target && window.location.hash ) {\n      if ( window.location.hash.substr(1, 3) == '/6/' ) {\n        var original_target = window.location.hash.substr(1);\n        target = decodeURIComponent(window.location.hash.substr(1));\n        target = \"epubcfi(\" + target + \")\";\n      } else {\n        target = window.location.hash.substr(2);\n        target = self._book.url.path().resolve(decodeURIComponent(target));\n      }\n    }\n\n    var status_index = 0;\n    self._rendition.on('started', function() {\n      self._manager = self._rendition.manager;\n\n      self._rendition.manager.on(\"building\", function(status) {\n        if ( status ) {\n          status_index += 1;\n          self._panes['loader-status'].innerHTML = `<span>${Math.round((status_index / status.total) * 100.0)}%</span>`;\n        } else {\n          self._enableBookLoader(-1);\n        }\n      })\n      self._rendition.manager.on(\"built\", function() {\n        self._disableBookLoader(true);\n      })\n    })\n\n    self._rendition.hooks.content.register(function(contents) {\n      self.fire('ready:contents', contents);\n      self.fire('readyContents', contents);\n\n      // check for tables + columns\n      if ( self._rendition.manager.layout.name == 'reflowable' && ! ( Browser.ie || Browser.edge ) ) {\n        popupTables(self, contents);\n      }\n\n    })\n\n    self.gotoPage(target, function() {\n      window._loaded = true;\n      self._initializeReaderStyles();\n\n      if ( callback ) { callback(); }\n\n      self._epubjs_ready = true;\n\n      self.gotoPage(target, function() {\n        setTimeout(function() {\n          self.fire('opened');\n          self.fire('ready');\n          self._disableBookLoader();\n          clearTimeout(self._queueTimeout);\n          self.tracking.event(\"openBook\", {\n            rootFilePath: self.options.rootFilePath,\n            flow: self.settings.flow,\n            manager: self.settings.manager\n          });\n        }, 100);\n      })\n\n    })\n  },\n\n  _scroll: function(delta) {\n    var self = this;\n    if ( self.options.flow == 'XXscrolled-doc' ) {\n      var container = self._rendition.manager.container;\n      var rect = container.getBoundingClientRect();\n      var scrollTop = container.scrollTop;\n      var newScrollTop = scrollTop;\n      var scrollBy = ( rect.height * 0.98 );\n      switch(delta) {\n        case 'PREV':\n          newScrollTop = -( scrollTop + scrollBy );\n          break;\n        case 'NEXT':\n          newScrollTop = ( scrollTop + scrollBy );\n          break;\n        case 'HOME':\n          newScrollTop = 0;\n          break;\n        case 'END':\n          newScrollTop = container.scrollHeight - scrollBy;\n          break;\n      }\n      container.scrollTop = newScrollTop;\n      return ( Math.floor(container.scrollTop) != Math.floor(scrollTop) );\n    }\n    return false;\n  },\n\n  _navigate: function(promise, callback) {\n    var self = this;\n    self._enableBookLoader(100);\n    promise.then(function() {\n      self._disableBookLoader();\n      if ( callback ) { callback(); }\n    }).catch(function(e) {\n      self._disableBookLoader();\n      if ( callback ) { callback(); }\n      console.log(\"AHOY NAVIGATE ERROR\", e);\n      throw(e);\n    })\n  },\n\n  next: function() {\n    var self = this;\n    this.tracking.action('reader/go/next');\n    self._scroll('NEXT') || self._navigate(this._rendition.next());\n  },\n\n  prev: function() {\n    this.tracking.action('reader/go/previous');\n    this._scroll('PREV') || this._navigate(this._rendition.prev());\n  },\n\n  first: function() {\n    this.tracking.action('reader/go/first');\n    this._navigate(this._rendition.display(0), undefined);\n  },\n\n  last: function() {\n    var self = this;\n    this.tracking.action('reader/go/last');\n    var target = this._book.spine.length - 1;\n    this._navigate(this._rendition.display(target), undefined);\n  },\n\n  gotoPage: function(target, callback) {\n    var self = this;\n\n    var hash;\n    if ( target != null ) {\n      var section = this._book.spine.get(target);\n      if ( ! section) {\n        // maybe it needs to be resolved\n        var guessed = target;\n        if ( guessed.indexOf(\"://\") < 0 ) {\n          var path1 = path.resolve(this._book.path.directory, this._book.packaging.navPath);\n          var path2 = path.resolve(path.dirname(path1), target);\n          guessed = this._book.canonical(path2);\n        }\n        if ( guessed.indexOf(\"#\") !== 0 ) {\n          hash = guessed.split('#')[1];\n          guessed = guessed.split('#')[0];\n        }\n\n        this._book.spine.each(function(item) {\n          if ( item.canonical == guessed ) {\n            section = item;\n            target = section.href;\n            return;\n          }\n        })\n\n        if ( hash ) {\n          target = target + '#' + hash;\n        }\n\n        // console.log(\"AHOY GUESSED\", target);\n      } else if ( target.toString().match(/^\\d+$/) ) {\n        // console.log(\"AHOY USING\", section.href);\n        target = section.href;\n      }\n\n      if ( ! section ) {\n        if ( ! this._epubjs_ready ) {\n          target = 0;\n        } else {\n          return;\n        }\n      }\n    }\n\n    self.tracking.reset();\n    var navigating = this._rendition.display(target).then(function() {\n      this._rendition.display(target);\n    }.bind(this));\n    this._navigate(navigating, callback);\n  },\n\n  percentageFromCfi: function(cfi) {\n    return this._book.percentageFromCfi(cfi);\n  },\n\n  destroy: function() {\n    if ( this._rendition ) {\n      try {\n        this._rendition.destroy();\n      } catch(e) {}\n    }\n    this._rendition = null;\n    this._drawn = false;\n  },\n\n  reopen: function(options, target) {\n    // different per reader?\n    var target = target || this.currentLocation();\n    if( target.start ) { target = target.start ; }\n    if ( target.cfi ) { target = target.cfi ; }\n\n    var doUpdate = false;\n    if ( options === true ) { doUpdate = true; options = {}; }\n    var changed = {};\n    Object.keys(options).forEach(function(key) {\n      if ( options[key] != this.options[key] ) {\n        doUpdate = true;\n        changed[key] = true;\n      }\n      // doUpdate = doUpdate || ( options[key] != this.options[key] );\n    }.bind(this));\n\n    if ( ! doUpdate ) {\n      return;\n    }\n\n    // performance hack\n    if ( Object.keys(changed).length == 1 && changed.scale ) {\n      reader.options.scale = options.scale;\n      this._updateScale();\n      return;\n    }\n\n    if ( options.rootfilePath && options.rootfilePath != this.options.rootfilePath ) {\n      // we need to REOPEN THE DANG BOOK\n      sessionStorage.setItem('rootfilePath', options.rootfilePath);\n      location.reload();\n      return;\n    }\n\n    Util.extend(this.options, options);\n\n    this.draw(target, function() {\n      // this._updateFontSize();\n      this._updateScale();\n      this._updateTheme();\n      this._selectTheme(true);\n    }.bind(this))\n  },\n\n  currentLocation: function() {\n    if ( this._rendition && this._rendition.manager ) {\n      this._cached_location = this._rendition.currentLocation();\n    }\n    return this._cached_location;\n  },\n\n  _bindEvents: function() {\n    var self = this;\n\n    // add a stylesheet to stop images from breaking their columns\n    var add_max_img_styles = false;\n    if ( this._book.packaging.metadata.layout == 'pre-paginated' ) {\n      // NOOP\n    } else if ( this.options.flow == 'auto' || this.options.flow == 'paginated' ) {\n      add_max_img_styles = true;\n    }\n\n    var custom_stylesheet_rules = [];\n\n    // force 90% height instead of default 60%\n    if ( this.metadata.layout != 'pre-paginated' ) {\n      this._rendition.hooks.content.register(function(contents) {\n        contents.addStylesheetRules({\n          \"img\" : {\n            \"max-width\": (this._layout.columnWidth ? this._layout.columnWidth + \"px\" : \"100%\") + \"!important\",\n            \"max-height\": (this._layout.height ? (this._layout.height * 0.9) + \"px\" : \"90%\") + \"!important\",\n            \"object-fit\": \"contain\",\n            \"page-break-inside\": \"avoid\"\n          },\n          \"svg\" : {\n            \"max-width\": (this._layout.columnWidth ? this._layout.columnWidth + \"px\" : \"100%\") + \"!important\",\n            \"max-height\": (this._layout.height ? (this._layout.height * 0.9) + \"px\" : \"90%\") + \"!important\",\n            \"page-break-inside\": \"avoid\"\n          },\n          \"body\": {\n            \"overflow\": \"hidden\",\n            \"column-rule\": \"1px solid #ddd\"\n          }\n        });\n      }.bind(this._rendition))\n    } else {\n      this._rendition.hooks.content.register(function(contents) {\n        contents.addStylesheetRules({\n          \"img\" : {\n            // \"border\": \"64px solid black !important\",\n            \"box-sizing\": \"border-box !important\"\n          },\n          \"figure\": {\n            \"box-sizing\": \"border-box !important\",\n            \"margin\": \"0 !important\"\n          },\n          \"body\": {\n            \"margin\": \"0\",\n            \"overflow\": \"hidden\"\n          }\n        });\n      }.bind(this._rendition));\n    }\n\n    this._updateFontSize();\n\n    if ( custom_stylesheet_rules.length ) {\n      this._rendition.hooks.content.register(function(view) {\n        view.addStylesheetRules(custom_stylesheet_rules);\n      })\n    }\n\n    this._rendition.on('resized', function(box) {\n      self.fire('resized', box);\n    })\n\n    this._rendition.on('click', function(event, contents) {\n      if ( event.isTrusted ) {\n        this.tracking.action(\"inline/go/link\");\n      }\n    }.bind(this));\n\n    this._rendition.on('keydown', function(event, contents) {\n      var target = event.target;\n      var IGNORE_TARGETS = [ 'input', 'textarea' ];\n      if ( IGNORE_TARGETS.indexOf(target.localName) >= 0 ) {\n        return;\n      }\n      this.fire('keyDown', { keyName: event.key, shiftKey: event.shiftKey, inner: true });\n    }.bind(this));\n\n    var relocated_handler = debounce(function(location) {\n      if ( self._fired ) { self._fired = false; return ; }\n      self.fire('relocated', location);\n\n      // hideEverything/showEverything\n      focus.updateFocus(self, location);\n\n      if ( Browser.safari && self._last_location_start && self._last_location_start != location.start.href ) {\n        self._fired = true;\n        setTimeout(function() {\n          // self._rendition.display(location.start.cfi);\n        }, 0);\n      }\n    }, 10);\n\n    this._rendition.on('relocated', relocated_handler);\n\n    this._rendition.on('displayerror', function(err) {\n      console.log(\"AHOY RENDITION DISPLAY ERROR\", err);\n    })\n\n    var locationChanged_handler = debounce(function(location) {\n      var view = this.manager.current();\n      var section = view.section;\n      var current = this.book.navigation.get(section.href);\n\n      self.fire(\"updateSection\", current);\n      self.fire(\"updateLocation\", location);\n    }, 150);\n\n    this._rendition.on(\"locationChanged\", locationChanged_handler);\n\n    this.on('updateLocations', function() {\n      // trigger this when all the locations have been loaded from the spine\n      this._rendition.emit('relocated', this._rendition.currentLocation());\n    })\n\n    this._rendition.on(\"rendered\", function(section, view) {\n      self._updateFrameTitle(section, view);\n    });\n\n    this._rendition.on(\"rendered\", function(section, view) {\n\n      if ( self.settings.flow == 'scrolled-doc' ) { return ; }\n\n      // add focus rules\n      focus.setupFocusRules(self);\n\n    })\n  },\n\n  _initializeReaderStyles: function() {\n    var self = this;\n    var themes = this.options.themes;\n    if ( themes ) {\n      themes.forEach(function(theme) {\n        self._rendition.themes.register(theme['klass'], theme.href ? theme.href : theme.rules);\n      })\n    }\n\n    // base for highlights\n    // this._rendition.themes.override('.epubjs-hl', \"fill: yellow; fill-opacity: 0.3; mix-blend-mode: multiply;\");\n  },\n\n  _selectTheme: function(refresh) {\n    var theme = this.options.theme || 'default';\n    this._rendition.themes.select(theme);\n  },\n\n  _updateFontSize: function() {\n    if ( false && this.metadata.layout == 'pre-paginated') {\n      // we're not doing font changes for pre-paginated\n      return;\n    }\n\n    var text_size = this.options.text_size || 100; // this.options.modes[this.flow].text_size; // this.options.text_size == 'auto' ? 100 : this.options.text_size;\n    this._rendition.themes.fontSize(`${text_size}%`);\n  },\n\n  _updateScale: function() {\n    if ( this.metadata.layout != 'pre-paginated') {\n      // we're not scaling for reflowable\n      return;\n    }\n    // var scale = this.options.modes[this.flow].scale;\n    var scale = this.options.scale;\n    if ( scale ) {\n      this.settings.scale = parseInt(scale, 10) / 100.0;\n      this._queueScale();\n    }\n  },\n\n  _queueScale: function(scale) {\n    this._queueTimeout = setTimeout(function() {\n      if ( this._rendition.manager && this._rendition.manager.stage ) {\n        this._rendition.scale(this.settings.scale);\n        var text_size = this.settings.scale == 1.0 ? 100 : this.settings.scale * 100.0;\n        this._rendition.themes.fontSize(`${text_size}%`);\n      } else {\n        this._queueScale();\n      }\n    }.bind(this), 100);\n  },\n\n  _updateFrameTitle: function(section, view) {\n    var self = this;\n\n    var title = `Section ${section.index + 1}`;\n    var current = self._book.navigation && self._book.navigation.get(section.href);\n    if ( ! current ) {\n      var subtitle;\n      for(var tag of [ 'h1', 'h2' ]) {\n        var tmp = view.document.querySelectorAll(tag);\n        if ( tmp ) {\n          var buffer = [];\n          for(var i = 0; i < tmp.length; i++) {\n            buffer.push(tmp[i].innerText);\n            if ( tag == 'h2' ) { break; } // only one of these\n          }\n          subtitle = buffer.join(' - ');\n          break;\n        }\n      }\n      if ( ! subtitle ) {\n        for(var i = section.index; i >= 0; i--) {\n          var previousSection = self._book.spine.get(i);\n          var previous = self._book.navigation.get(previousSection.href);\n          if ( previous ) {\n            subtitle = previous.label;\n            break;\n          }\n        }\n      }\n      if ( subtitle ) {\n        title += ': ' + subtitle;\n      }\n    } else {\n      title += ': ' + current.label;\n    }\n    if ( title && view.iframe ) {\n      view.iframe.title = `Contents: ${title}` ;\n    }\n  },\n\n  EOT: true\n\n})\n\nObject.defineProperty(Reader.EpubJS.prototype, 'metadata', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return this._metadata;\n  },\n\n  set: function(data) {\n    this._metadata = Util.extend({}, data, this.options.metadata);\n  }\n});\n\nObject.defineProperty(Reader.EpubJS.prototype, 'annotations', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    if ( Browser.ie ) {\n      return {\n        reset: function() { /* NOOP */ },\n        highlight: function(cfiRange) { /* NOOP */ }\n      }\n    }\n    if ( ! this._rendition.annotations.reset ) {\n      this._rendition.annotations.reset = function(){\n        for(var hash in this._annotations) {\n            var cfiRange = decodeURI(hash);\n            this.remove(cfiRange);\n        }\n        this._annotationsBySectionIndex = {};\n      }.bind(this._rendition.annotations);\n    }\n    return this._rendition.annotations;\n  }\n});\n\nObject.defineProperty(Reader.EpubJS.prototype, 'locations', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return this._book.locations;\n  }\n});\n\nObject.defineProperty(Reader.EpubJS.prototype, 'rendition', {\n  get: function() {\n    if ( ! this._rendition ) {\n      this._rendition = { draft: true };\n      this._rendition.hooks = {};\n      this._rendition.hooks.content = new Hook(this);\n    }\n    return this._rendition;\n  },\n\n  set: function(rendition) {\n    if ( this._rendition && this._rendition.draft ) {\n      var hook = this._rendition.hooks.content;\n      hook.hooks.forEach(function(fn) {\n        rendition.hooks.content.register(fn)\n      })\n    }\n    this._rendition = rendition;\n  }\n})\n\nObject.defineProperty(Reader.EpubJS.prototype, 'CFI', {\n  get: function() {\n    return ePub.CFI;\n  }\n})\n\nwindow.Reader = Reader;\n\nexport function createReader(id, options) {\n  return new Reader.EpubJS(id, options);\n}\n","import * as Util from '../core/Util';\nimport {Reader} from './Reader';\nimport * as DomUtil from '../dom/DomUtil';\n\nReader.Mock = Reader.extend({\n\n  initialize: function(id, options) {\n    Reader.prototype.initialize.apply(this, arguments);\n  },\n\n  open: function(target, callback) {\n    var self = this;\n    this._book = {\n      metadata: {\n        title: 'The Mock Life',\n        creator: 'Alex Mock',\n        publisher: 'University Press',\n        location: 'Ann Arbor, MI',\n        pubdate: '2017-05-23'\n      },\n      contents: {\n        toc: [\n          {id: 1, href: \"/epubs/mock/ops/xhtml/TitlePage.xhtml\", label: \"Title\", parent: null},\n          {id: 2, href: \"/epubs/mock/ops/xhtml/Chapter01.xhtml\", label: \"Chapter 1\", parent: null},\n          {id: 3, href: \"/epubs/mock/ops/xhtml/Chapter02.xhtml\", label: \"Chapter 2\", parent: null},\n          {id: 4, href: \"/epubs/mock/ops/xhtml/Chapter03.xhtml\", label: \"Chapter 3\", parent: null},\n          {id: 5, href: \"/epubs/mock/ops/xhtml/Chapter04.xhtml\", label: \"Chapter 4\", parent: null},\n          {id: 6, href: \"/epubs/mock/ops/xhtml/Chapter05.xhtml\", label: \"Chapter 5\", parent: null},\n          {id: 7, href: \"/epubs/mock/ops/xhtml/Chapter06.xhtml\", label: \"Chapter 6\", parent: null},\n          {id: 8, href: \"/epubs/mock/ops/xhtml/Chapter07.xhtml\", label: \"Chapter 7\", parent: null},\n          {id: 9, href: \"/epubs/mock/ops/xhtml/Index.xhtml\", label: \"Index\", parent: null},\n        ]\n      }\n    };\n\n    this._locations = [\n      'epubcfi(/6/4[TitlePage.xhtml])',\n      'epubcfi(/6/4[Chapter01.xhtml])',\n      'epubcfi(/6/4[Chapter02.xhtml])',\n      'epubcfi(/6/4[Chapter03.xhtml])',\n      'epubcfi(/6/4[Chapter04.xhtml])',\n      'epubcfi(/6/4[Chapter05.xhtml])',\n      'epubcfi(/6/4[Chapter06.xhtml])',\n      'epubcfi(/6/4[Chapter07.xhtml])',\n      'epubcfi(/6/4[Chapter08.xhtml])',\n      'epubcfi(/6/4[Index.xhtml])',\n    ];\n\n    this.__currentIndex = 0;\n\n    this.metadata = this._book.metadata;\n    this.fire('updateContents', this._book.contents);\n    this.fire('updateTitle', this._metadata);\n    this.fire('updateLocations', this._locations);\n    this.draw(target, callback);\n  },\n\n  draw: function(target, callback) {\n    var self = this;\n    this.settings = { flow: this.options.flow };\n    this.settings.height = '100%';\n    this.settings.width = '99%';\n    // this.settings.width = '100%';\n    if ( this.options.flow == 'auto' ) {\n      this._panes['book'].style.overflow = 'hidden';\n    } else {\n      this._panes['book'].style.overflow = 'auto';\n    }\n    if ( typeof(target) == 'function' && cb === undefined ) {\n      callback = target;\n      target = undefined;\n    }\n    callback();\n    self.fire('ready');\n  },\n\n  next: function() {\n    // this._rendition.next();\n  },\n\n  prev: function() {\n    // this._rendition.prev();\n  },\n\n  first: function() {\n    // this._rendition.display(0);\n  },\n\n  last: function() {\n  },\n\n  gotoPage: function(target) {\n    if ( typeof(target) == \"string\" ) {\n      this.__currentIndex = this._locations.indexOf(target);\n    } else {\n      this.__currentIndex = target;\n    }\n    this.fire(\"relocated\", this.currentLocation());\n  },\n\n  destroy: function() {\n    // if ( this._rendition ) {\n    //   this._rendition.destroy();\n    // }\n    // this._rendition = null;\n  },\n\n  currentLocation: function() {\n    var cfi = this._locations[this.__currentIndex];\n    return {\n      start: { cfi: cfi, href: cfi },\n      end: { cfi: cfi, href: cfi }\n    }\n  },\n\n  _bindEvents: function() {\n    var self = this;\n\n  },\n\n  _updateTheme: function() {\n\n  },\n\n  EOT: true\n\n})\n\nObject.defineProperty(Reader.Mock.prototype, 'metadata', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return this._metadata;\n  },\n\n  set: function(data) {\n    this._metadata = Util.extend({}, data, this.options.metadata);\n  }\n});\n\nObject.defineProperty(Reader.Mock.prototype, 'locations', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    var self = this;\n    return {\n      total: self._locations.length,\n      locationFromCfi: function(cfi) {\n        return self._locations.indexOf(cfi);\n      },\n      percentageFromCfi: function(cfi) {\n        var index = self.locations.locationFromCfi(cfi);\n        return ( index / self.locations.total );\n      },\n      cfiFromPercentage: function(percentage) {\n        var index = Math.ceil(percentage * 10);\n        return self._locations[index];\n      }\n    }\n  }\n});\n\nObject.defineProperty(Reader.Mock.prototype, 'annotations', {\n  get: function() {\n    return {\n      reset: function() {},\n      highlight: function() {}\n    }\n  }\n})\n\nexport function createReader(id, options) {\n  return new Reader.Mock(id, options);\n}\n","import {Reader} from './Reader';\nimport * as EpubJS from './Reader.EpubJS';\nimport * as Mock from './Reader.Mock';\n\nvar engines = {\n  epubjs: EpubJS.createReader,\n  mock: Mock.createReader\n}\n\nexport {Reader};\n\nexport var reader = function(id, options) {\n  options = options || {};\n  var engine = options.engine || window.COZY_EPUB_ENGINE || 'epubjs';\n  var engine_href = options.engine_href || window.COZY_EPUB_ENGINE_HREF;\n  var _this = this;\n  var _arguments = arguments;\n\n  options.engine = engine;\n  options.engine_href = engine_href;\n\n  return engines[engine].apply(_this, [id, options]);\n}"],"names":["global","this","extend","dest","i","j","len","src","arguments","length","create","Object","F","proto","prototype","bind","fn","obj","slice","Array","apply","call","args","concat","lastId","stamp","_cozy_id","throttle","time","context","lock","wrapperFn","later","setTimeout","wrapNum","x","range","includeMax","max","min","d","falseFn","formatNum","num","digits","pow","Math","round","isNumeric","isNaN","parseFloat","isFinite","trim","str","replace","splitWords","split","setOptions","options","hasOwnProperty","getParamString","existingUrl","uppercase","params","push","encodeURIComponent","toUpperCase","indexOf","join","templateRe","template","data","key","value","undefined","Error","isArray","toString","array","el","emptyImageUrl","getPrefixed","name","window","lastTime","timeoutDefer","Date","timeToCall","requestFn","requestAnimationFrame","cancelFn","cancelAnimationFrame","id","clearTimeout","requestAnimFrame","immediate","cancelAnimFrame","inVp","elem","threshold","container","HTMLElement","assign","top","right","bottom","left","document","documentElement","vp","width","clientWidth","height","clientHeight","box","getBoundingClientRect","cutOff","partial","isFullyVisible","isPartiallyVisible","elH","offsetHeight","H","percentage","edges","fully","partially","loader","js","url","handler","_resolved","callbacks","error","then","cb","resolve","catch","reject","_argv","shift","e","console","log","trace","element","createElement","onload","onerror","async","parent","attr","appendChild","Class","props","NewClass","initialize","callInitHooks","parentProto","__super__","Util","constructor","statics","includes","checkDeprecatedMixinEvents","_initHooks","_initHooksCalled","include","mergeOptions","addInitHook","init","cozy","Mixin","Evented","on","types","type","_on","off","_events","_off","typeListeners","newListener","ctx","listeners","l","_firingCount","splice","fire","propagate","listens","event","target","_propagateEvent","_eventParents","once","addEventParent","removeEventParent","layer","addEventListener","removeEventListener","clearAllEventListeners","addOneTimeEventListener","fireEvent","hasEventListeners","style","ie","ielt9","edge","navigator","webkit","userAgentContains","android","android23","opera","chrome","gecko","safari","phantom","opera12","win","platform","ie3d","webkit3d","WebKitCSSMatrix","gecko3d","any3d","L_DISABLE_3D","mobile","orientation","mobileWebkit","mobileWebkit3d","msPointer","PointerEvent","MSPointerEvent","pointer","touch","L_NO_TOUCH","DocumentTouch","mobileOpera","mobileGecko","retina","devicePixelRatio","screen","deviceXDPI","logicalXDPI","canvas","getContext","svg","vml","div","innerHTML","shape","firstChild","behavior","_typeof","adj","columnCount","classList","userAgent","toLowerCase","Point","y","clone","add","point","_add","toPoint","subtract","_subtract","divideBy","_divideBy","multiplyBy","_multiplyBy","scaleBy","unscaleBy","_round","floor","_floor","ceil","_ceil","distanceTo","sqrt","equals","contains","abs","POINTER_DOWN","Browser","POINTER_MOVE","POINTER_UP","POINTER_CANCEL","TAG_WHITE_LIST","_pointers","_pointerDocListener","_pointersCount","addPointerListener","_addPointerStart","_addPointerMove","_addPointerEnd","removePointerListener","onDown","pointerType","MSPOINTER_TYPE_MOUSE","tagName","DomEvent","_handlePointer","_globalPointerDown","_globalPointerMove","_globalPointerUp","pointerId","touches","changedTouches","onMove","buttons","onUp","_touchstart","_touchend","_pre","addDoubleTapListener","last","doubleTap","delay","onTouchStart","count","now","delta","onTouchEnd","cancelBubble","newTouch","prop","removeDoubleTapListener","touchstart","touchend","dblclick","addOne","eventsKey","removeOne","originalHandler","isExternalTarget","filterClick","attachEvent","detachEvent","stopPropagation","originalEvent","_stopped","skipped","disableScrollPropagation","disableClickPropagation","fakeStop","preventDefault","returnValue","stop","getMousePosition","clientX","clientY","rect","clientLeft","clientTop","wheelPxFactor","getWheelDelta","wheelDeltaY","deltaY","deltaMode","deltaX","deltaZ","wheelDelta","detail","skipEvents","events","related","relatedTarget","parentNode","err","lastClick","timeStamp","elapsed","_simulatedClick","_simulated","Element","matches","ep","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","TRANSFORM","testProp","TRANSITION","TRANSITION_END","get","getElementById","getStyle","currentStyle","defaultView","css","getComputedStyle","className","remove","removeChild","empty","toFront","toBack","insertBefore","hasClass","getClass","RegExp","test","addClass","classes","setClass","removeClass","baseVal","setOpacity","opacity","_setOpacityIE","filter","filterName","filters","item","Enabled","Opacity","isPropertySupported","setTransform","offset","scale","pos","setPosition","_leaflet_pos","getPosition","disableTextSelection","enableTextSelection","_userSelect","userSelectProperty","disableImageDrag","enableImageDrag","_outlineElement","_outlineStyle","preventOutline","tabIndex","restoreOutline","outline","freeGlobal","root","Symbol","objectProto","nativeObjectToString","symToStringTag","getRawTag","objectToString","isObjectLike","baseGetTag","isSymbol","isObject","toNumber","coreJsData","funcProto","funcToString","isMasked","isFunction","toSource","getValue","baseIsNative","getNative","defineProperty","eq","baseAssignValue","assignValue","nativeMax","identity","constant","shortOut","baseSetToString","setToString","overRest","isLength","MAX_SAFE_INTEGER","isArrayLike","isIndex","baseRest","isIterateeCall","baseIsArguments","stubFalse","argsTag","funcTag","nodeUtil","baseUnary","baseIsTypedArray","isArguments","isBuffer","isTypedArray","baseTimes","overArg","isPrototype","nativeKeys","arrayLikeKeys","baseKeys","createAssigner","copyObject","keys","keyboardAllowed","val","fnMap","ret","eventNameMap","change","fullscreenchange","fullscreenerror","screenfull","request","requestFullscreen","ALLOW_KEYBOARD_INPUT","exit","exitFullscreen","toggle","isFullscreen","onchange","callback","eventName","raw","defineProperties","Boolean","fullscreenElement","enumerable","enabled","fullscreenEnabled","Reader","regions","metadata","flow","engine","trackResize","mobileMediaQuery","forceScrolledDocHeight","rootfilePath","text_size","flowOptions","theme","themes","injectStylesheet","self","_original_document_title","title","_cozyOptions","localStorage","getItem","JSON","parse","_checkFeatureCompatibility","_initContainer","_initLayout","forEach","href","klass","rules","rule","new_rule","_updateTheme","_initEvents","_mode","mode","start","_start","open","reopen","saveOptions","saved_options","layout","setItem","stringify","DomUtil","_container","dataset","draw","next","prev","display","index","gotoPage","goBack","history","back","goForward","forward","_preResize","_onScroll","_containerId","_fadeAnimated","fadeAnimation","position","_initPanes","panes","_panes","prefix","setAttribute","_initBookLoader","_checkIfLoaded","_loaded","_targets","tracking","reader","_action","_last_location_start","_last_scrollTop","_reader","action","v","pop","peek","pageview","location","do_report","settings","scrollTop","_rendition","manager","cfi","reset","transform3DLimit","_onMoveEnd","p","tmp_href","substr","match","pushState","replaceState","isTrusted","state","__last_state_cfi","$log","keyName","check","activeElement","localName","parentElement","IGNORE_TARGETS","shiftKey","_scroll","scrollLeft","_handleDOMEvent","keyCode","srcElement","_fireDOMEvent","targets","synth","_findEventTargets","isMarker","containerPoint","latLngToContainerPoint","getLatLng","mouseEventToContainerPoint","layerPoint","containerPointToLayerPoint","latlng","layerPointToLatLng","nonBubblingEvents","getFixedBookPanelSize","h","paddingTop","paddingBottom","w","paddingRight","paddingLeft","invalidateSize","_drawn","_resizeRequest","_resizeBookPane","_setupHooks","_checkMobileDevice","_isMobile","matchMedia","_enableBookLoader","_clearBookLoaderTimeout","_force_progress","_loader_timeout","_disableBookLoader","force","loader_template","loaderTemplate","body","DOMParser","parseFromString","children","updateLiveStatus","message","_last_message","_last_timer","clearDelay","innerText","EOT","_metadata","set","Control","_locked","_id","getTime","parseInt","random","getRegion","region","setRegion","removeControl","addControl","getContainer","addTo","onAdd","area","getControlRegion","onRemove","_refocusOnMap","screenX","screenY","focus","_className","widget","direction","control","getControlContainer","_controlContainer","parts","tmp","slug","panel","getControlRegion_1","slot","childElement","_classify","_clearControlRegion","_controlRegions","PageControl","_control","querySelector","_createButton","_fill","html","label","_bindEvents","link","_unit","s","unit","_label","PagePrevious","PageNext","PageFirst","first","PageLast","pageNext","pagePrevious","pageFirst","pageLast","activeModal","FOCUSABLE_ELEMENTS","ACTIONABLE_ELEMENTS","Modal","fraction","actions","onShow","onClose","handlers","_initializedEvents","panelHTML","main","button_cls","modal","onClick","onKeydown","onModalTransition","button_id","button","close","closeModal","deactivate","removeEventListeners","showModal","_resize","setFocusToFirstNode","addEventListeners","activate","offsetWidth","header","footer","getFocusableNodes","nodes","querySelectorAll","map","focusableNodes","getActionableNodes","maintainFocus","closeAfterAction","hasAttribute","actionableNodes","click","selector","getAttribute","focusedItemIndex","update","titleEl","popup","_popupModal","iframe","modalDiv","onLoad","contentDocument","srcdoc","write","Contents","defaultTemplate","_goto_interval","_modal","rendition","_setupSkipLink","_process","items","tabindex","option","_createOption","subitems","toc","chapter","anchor","textContent","span","skipLink","ul","contents","Title","h1","_title","_divider","_section","bookTitle","PublicationMetadata","_publisher","_rights","publisher","rights","publicationMetadata","Preferences","hasThemes","updatePreferences","initializeForm","_createPanel","possible_fieldsets","rootfiles","_fieldsets","cls","fieldset","fields","hasFields","field","inputs","input","checked","hint","_form","new_options","saveable_options","updateForm","Fieldset","_current","TextSize","form","_input","_output","_preview","_actionReset","_updatePreview","saveable","fontSize","Display","scrolled_help","Theme","Rendition","expr","rootfile","accessMode","Scale","transform","preferences","Widget","_onAddExtra","_updateTemplate","_updateClass","node","Button","Panel","Toggle","states","stateName","_resetState","_state","Citation","designMode","formatted","createRange","selectNode","sel","getSelection","removeAllRanges","addRange","flag","execCommand","_message","detach","citations","citation","format","text","createTextNode","_formatted","_initializeForm","_formatCitation","selected","Search","_data","_canceled","_processing","_addLocation","_article","searchString","openModalResults","openModalWaiting","submitQuery","evt","cmd","ctrlKey","altKey","metaKey","_emptyArticle","_buildResults","searchUrl","XMLHttpRequest","status","response","send","hasChildNodes","lastChild","content","annotations","highlight","highlight_off","search_results","result","cfiRange","snippet","loc","locations","locationFromCfi","locText","locElement","search","BibliographicInformation","dl","metadata_fields","idx","_formatDate","metadata_fields_seen","dt","dd","bibliographicInformation","Download","_configureDownloadForm","submit","download_links","size","download","Navigator","_setup","_initializeNavigator","_createControl","_background","_status","_spanCurrentPercentage","_spanCurrentLocation","_spanTotalLocations","_update","_mouseDown","_initiated","currentLocation","percentageFromCfi","cfiFromPercentage","current","rangeBg","current_location","_total","_last_reported_location","_last_delta","_last_value","total","Fullscreen","_fullscreenchangeHandler","glyph","fullscreen","Bus","instance","bus","Events","module","foo","bar","trzy","_undefined","require","object","isValue","TypeError","process","opts1","String","dscr","c","desc","configurable","writable","normalizeOpts","gs","isCallable","Function","descriptor","emit","methods","descriptors","base","listener","__ee__","__eeOnceListener__","candidate","exports","o","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","ELEMENT_NODE","TEXT_NODE","_URL","URL","webkitURL","mozURL","uuid","r","documentHeight","scrollHeight","isElement","nodeType","isNumber","n","isFloat","f","prefixed","unprefixed","vendors","prefixes","upper","defaults","source","sources","getOwnPropertyNames","propName","getOwnPropertyDescriptor","insert","compareFunction","locationOf","_end","end","pivot","compared","a","b","indexOfSorted","bounds","widthProps","heightProps","borders","nodeBounds","elPos","doc","ownerDocument","Node","elRange","selectNodeContents","windowBounds","innerWidth","innerHeight","indexOfNode","typeId","childNodes","sib","indexOfTextNode","textNode","indexOfElementNode","elementNode","isXml","ext","createBlob","mime","Blob","createBlobUrl","tempUrl","blob","createObjectURL","revokeBlobUrl","revokeObjectURL","createBase64Url","datauri","btoa","markup","forceXMLDom","Parser","charCodeAt","qs","elements","getElementsByTagName","qsa","qsp","q","filtered","sprint","func","createTreeWalker","treeWalker","NodeFilter","SHOW_TEXT","walk","nextNode","walked","nextSibling","blob2base64","Promise","FileReader","readAsDataURL","onloadend","defer","promise","freeze","querySelectorByType","query","getAttributeNS","findChildren","parents","unshift","filterChildren","nodeName","single","getParentByTagName","tagname","RangeObject","collapsed","commonAncestorContainer","endContainer","endOffset","startContainer","startOffset","startNode","collapse","_commonAncestorContainer","_checkCollapsed","endNode","toStart","referenceNode","setStart","setEnd","endIndex","startParents","endParents","assertPath","path","normalizeStringPosix","allowAboveRoot","res","lastSlash","dots","code","_format","sep","pathObject","dir","posix","resolvedPath","resolvedAbsolute","cwd","normalize","isAbsolute","trailingSeparator","joined","arg","relative","from","to","fromStart","fromEnd","fromLen","toEnd","toLen","lastCommonSep","fromCode","toCode","out","_makeLong","dirname","hasRoot","matchedSlash","basename","extIdx","firstNonSlashEnd","extname","startDot","startPart","preDotState","Path","pathString","protocol","parsed","pathname","isDirectory","directory","filename","extension","what","charAt","splitPathRe","exec","Url","urlString","baseString","absolute","basePath","origin","hash","fullpath","DOCUMENT_NODE","EpubCFI","cfiFrom","ignoreClass","spinePos","parseComponent","steps","checkType","fromRange","fromNode","isCfiString","cfiStr","baseComponent","pathComponent","getChapterComponent","getPathComponent","getRange","componentStr","component","terminal","assertion","parseTerminal","step","parseStep","stepStr","has_brackets","termialStr","characterOffset","textLocationAssertion","indirection","ranges","splitStr","part","segment","segmentString","joinSteps","cfiString","cfiOne","cfiTwo","stepsA","stepsB","terminalA","terminalB","filteredNode","filteredPosition","currentNode","filteredStep","stepA","stepB","needsIgnoring","patchOffset","pathTo","equalStep","sibling","previousSibling","isText","curr","totalOffset","output","prevIndex","currNodeType","prevNodeType","textNodes","normalizedMap","xpath","_doc","evaluate","stepsToXpath","XPathResult","FIRST_ORDERED_NODE_TYPE","singleNodeValue","walkToNode","findNode","child","lastStepIndex","childIndex","startSteps","endSteps","missed","fixMiss","_spineNodeIndex","_pos","spineNodeIndex","Hook","hooks","hook","promises","task","executing","all","replaceBase","section","head","replaceCanonical","canonical","replaceMeta","meta","idref","replaceLinks","links","replaceLink","linkUrl","onclick","substitute","urls","replacements","Section","linear","properties","cfiBase","serialize","_request","loading","loaded","xml","trigger","rendering","rendered","load","isIE","Serializer","XMLSerializer","serializer","serializeToString","_query","find","excerpt","limit","cfiFromRange","substring","globalLayout","spread","property","_range","unload","clear","Spine","spineItems","spineByHref","spineByAbsoluteHref","spineById","register","epubcfi","manifest","baseUrl","_package","resolver","spine","manifestItem","spineItem","generateChapterComponent","nextIndex","append","encodeURI","decodeURI","lastIndexOf","each","destroy","Queue","_q","tick","running","paused","deferred","queued","run","inwait","dequeue","defered","flush","EPUBJS_VERSION","DOM_EVENTS","EVENTS","BOOK","OPEN_FAILED","CONTENTS","EXPAND","RESIZE","SELECTED","SELECTED_RANGE","LINK_CLICKED","LOCATIONS","CHANGED","MANAGERS","RESIZED","ORIENTATION_CHANGE","ADDED","SCROLL","SCROLLED","REMOVED","VIEWS","AXIS","LOAD_ERROR","RENDERED","DISPLAYED","SHOWN","HIDDEN","MARK_CLICKED","RENDITION","STARTED","ATTACHED","DISPLAY_ERROR","LOCATION_CHANGED","RELOCATED","LAYOUT","UPDATED","Locations","pause","_locations","break","_currentCfi","processingTimeout","pageList","_pageList","enqueue","chars","completed","pages","pagesByAbsolutePath","page","cfiFromElement","counter","_break","parser","dist","compare","percentageFromLocation","warn","cfiFromLocation","setCurrent","EventEmitter","Container","containerDocument","packagePath","encoding","xmlEncoding","Packaging","packageDocument","navPath","ncxPath","coverPath","metadataNode","manifestNode","spineNode","parseManifest","findNavPath","findNcxPath","findCoverPath","parseSpine","uniqueIdentifier","findUniqueIdentifier","parseMetadata","getElementText","creator","description","pubdate","identifier","language","modified_date","getPropertyText","viewport","media_active_class","manifestXml","overlay","spineXml","propArray","itemref","packageXml","uniqueIdentifierId","namespaceURI","nodeValue","tocId","pkg","epubVersion","metaCover","coverId","cover","tag","found","getElementsByTagNameNS","json","readingOrder","resources","rel","Navigation","tocByHref","tocById","landmarks","landmarksByType","ncx","parseNav","parseLandmarks","parseNcx","unpack","navHtml","navElement","navItems","list","navItem","parentItem","parentContent","landmarkItem","tocXml","navPoints","ncxItem","navLabel","table","mimeTypes","subtype","defaultValue","lookup","Resources","archive","replacementUrls","assets","cssUrls","splitUrls","parsedUrl","mimeType","createUrl","replaced","replacement","createCssFile","replacementUrl","indexInUrls","newUrl","textResponse","getText","relUrls","assetHref","resolved","relativeTo","PageList","firstPage","lastPage","totalPages","pageLabel","isCfi","packageUrl","pg","pgs","pageFromCfi","cfiFromPage","percent","pageFromPercentage","percentageFromPage","Layout","_spread","_minSpreadWidth","minSpreadWidth","_evenSpreads","evenSpreads","_flow","spreadWidth","columnWidth","gap","divisor","_width","_height","_gap","pageWidth","formating","fit","columns","overflow","addStylesheetRules","totalLength","pageLength","spreads","newProps","Themes","_themes","_overrides","_injected","inject","overrides","registerThemes","default","registerUrl","registerRules","getContents","addStylesheet","serialized","injected","priority","override","Mapping","axis","dev","horizontal","_dev","view","findRanges","rangeListToCfiList","rangePairToCfiPair","findStart","findEnd","startRange","toRange","endRange","selection","acceptNode","FILTER_ACCEPT","FILTER_REJECT","safeFilter","scrollWidth","stack","$el","$prev","findTextStartRange","findTextEndRange","splitTextNodeIntoRanges","_splitter","splitter","rangePair","startCfi","endCfi","cifPair","hasNavigator","isChrome","isWebkit","sectionIndex","_size","epubReadingSystem","setViewport","frame","$viewport","border","overflowX","overflowY","setProperty","newContent","_scale","_minimum","_maximum","_scalable","minimum","maximum","scalable","scrollTo","imageLoadListeners","mediaQueryListeners","addSelectionListeners","resizeListeners","linksHandler","removeSelectionListeners","expanding","textWidth","textHeight","onResize","resizeCheck","_resizeCheck","sheets","styleSheets","mediaChangeHandler","m","_expanding","expand","cssRules","media","mql","mediaText","addListener","observer","MutationObserver","mutations","config","attributes","childList","characterData","subtree","observe","images","img","naturalWidth","fonts","ready","targetPos","newRange","Range","offsetEl","offsetTop","offsetParent","offsetLeft","$stylesheet","onreadystatechange","readyState","styleEl","styleSheet","sheet","rl","propStr","pl","insertRule","selectors","definition","_rules","$script","_triggerEvent","triggerEvent","passive","_onSelectionChange","onSelectionChange","selectionEndTimeout","triggerSelectedEvent","cfirange","rangeCount","getRangeAt","_cfi","layoutStyle","COLUMN_AXIS","COLUMN_GAP","COLUMN_WIDTH","COLUMN_FILL","writingMode","offsetX","offsetY","scaleStr","translateStr","viewportWidth","viewportHeight","widthScale","heightScale","scaler","mapping","WRITING_MODE","_layoutStyle","version","hasFeature","feature","disconnect","removeListeners","Annotations","highlights","underlines","marks","_annotations","_annotationsBySectionIndex","render","unloaded","styles","annotation","Annotation","views","attach","_removeFromAnnotationBySectionIndex","_annotationsAt","mark","underline","unhighlight","ununderline","unmark","createElementNS","proxyMouse","tracked","dispatch","t","dispatchEvent","ev","opts","bubbles","MouseEvent","copy","createEvent","initMouseEvent","cancelable","rectContains","rects","getClientRects","Pane","g","unbind","setCoords","coords","Mark","contained","Highlight","docFrag","createDocumentFragment","filteredRanges","Underline","line","rect1","rect2","IframeView","globalLayoutProperties","method","added","displayed","fixedWidth","fixedHeight","pane","flex","createContainer","scrolling","seamless","resizing","visibility","elementBounds","supportsSrcdoc","show","sectionRender","setAxis","addListeners","_textWidth","_contentWidth","_textHeight","_contentHeight","_needsReframe","elBorders","iframeBorders","lockedWidth","lockedHeight","forceEvenPages","reframe","widthDelta","prevBounds","heightDelta","placeMark","blobUrl","contentWindow","layoutFunc","onDisplayed","stopExpanding","parentPos","emitter","addMark","removeMark","freeSelf","toStringTag","isOwn","nullTag","undefinedTag","symbolTag","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","other","valueOf","isBinary","FUNC_ERROR_TEXT","nativeMin","debounce","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","cancel","debounced","isInvoking","Stage","_options","hidden","wrapper","wrap","wordSpacing","lineHeight","verticalAlign","flexDirection","flexWrap","fullsize","_element","getElement","resizeFunc","orientationChangeFunc","retval","containerStyles","containerPadding","_windowBounds","bodyStyles","bodyPadding","rulesArray","scope","getSheet","_originalOverflow","Views","_views","hide","DefaultViewManager","optsSettings","View","renditionQueue","queue","infinite","viewSettings","stage","attachTo","_bounds","_stageSize","onResized","onOrientationChange","updateLayout","scroller","onScroll","orientationTimeout","resizeTimeout","afterScrolled","resizeOnOrientationChange","resize","stageSize","winBounds","displaying","visible","moveTo","distX","distY","isPaginated","createView","afterDisplayed","afterResized","updateAxis","prepend","scrollBy","scrolledLocation","paginatedLocation","pageHeight","used","scrollY","sections","startPos","endPos","currPage","endPage","scrollX","startPage","tempStartPage","offsetPrev","offsetNext","viewsLength","isVisible","silent","ignore","scrolled","calculate","setLayout","forceUpdate","viewContents","PI_D2","PI","EASING_EQUATIONS","easeOutSine","sin","easeInOutSine","cos","easeInOutQuint","easeInCubic","Snap","duration","minVelocity","minDistance","easing","supportsTouch","setup","disableScroll","afterScrolledTimeout","isVertical","touchCanceler","resizeCanceler","snapping","startTouchX","startTouchY","startTime","endTouchX","endTouchY","endTime","_onResize","_onTouchStart","_onTouchMove","onTouchMove","_onTouchEnd","_afterDisplayed","triggerViewEvent","enableScroll","swipped","wasSwiped","snap","snapWidth","distance","velocity","howMany","snapTo","smoothScrollTo","destination","timeFunction","scroll","performance","ContinuousViewManager","offsetDelta","fill","_full","full","expanded","_offset","updating","trimTimeout","_offsetLeft","_offsetTop","checking","newViews","rtl","visibleLength","contentLength","firstIndex","lastIndex","above","below","erase","prevTop","prevLeft","addScrollListeners","snapper","prevScrollTop","prevScrollLeft","scrollDeltaVert","scrollDeltaHorz","_scrolled","didScroll","scrollTimeout","needsSnap","book","stylesheet","script","handleLinks","passEvents","adjustImages","injectIdentifier","injectScript","opened","starting","started","viewManager","ViewManager","requireManager","requireView","package","determineLayoutProperties","afterRemoved","reportLocation","_display","triggerMarkEvent","_layout","applyLayout","updateFlow","isRendered","changed","reportedLocation","reportedLocationAfterRAF","located","locationStart","locationEnd","pageStart","pageEnd","atEnd","atStart","deregister","computed","verticalPadding","ident","packaging","withCredentials","headers","supportsURL","BLOB_RESPONSE","xhr","xhrPrototype","xmlHttpRequestOverrideMimeType","setRequestHeader","responseType","overrideMimeType","DONE","responseXML","Archive","zip","urlCache","checkRequirements","JSZip","isBase64","loadAsync","zipUrl","getBlob","handleResponse","decodededUrl","decodeURIComponent","entry","file","uint8array","useBase64","base64","getBase64","fromCache","Store","requester","storage","httpRequest","online","store","localforage","createInstance","onLine","mapped","encodedUrl","put","retrieve","readAsText","CONTAINER_PATH","INPUT_TYPE","BINARY","BASE64","EPUB","OPF","MANIFEST","DIRECTORY","Book","requestMethod","requestCredentials","requestHeaders","openAs","opening","isOpen","navigation","archived","determineType","openEpub","openPackaging","openManifest","openContainer","unarchive","loadNavigation","credentials","replacementsSetting","originalUrl","substituteResources","replaceCss","retrieved","factory","hasWorkingUrl","forceJURL","u","relativePathDotMapping","isRelativeScheme","scheme","invalid","_isInvalid","IDNAToASCII","percentEscape","unicode","percentEscapeQuery","EOF","ALPHA","ALPHANUMERIC","stateOverride","cursor","buffer","seenAt","seenBracket","loop","_scheme","_isRelative","_fragment","_schemeData","_host","_port","_path","_username","_password","nextC","nextNextC","cp","tempC","temp","jURL","_url","authority","host","hostname","port","OriginalURL","ePub","VERSION","CFI","utils","PrefabViews","sort","reused","PrePaginatedContinuousViewManager","_manifest","_spine","_redrawViews","section_","sizeToViewport","getPrototypeOf","faking","_buildManifest","viewports","viewport_width","viewport_height","prev_","next_","_max_height","_max_viewport_height","_max_width","_max_viewport_width","debugManager","backgroundImage","colorR","colorG","colorB","backgroundColor","scrollIntoView","waiting","has_section","_checkStillLoading","divs","marker","prePaginated","adjusted_top","adjusted_end","__check_visible","recenter","w3","ReusableIframeView","_layout_height","require$$0","require$$1","callable","preloading","IntersectionObserver","handleObserver","containr","rootMargin","entries","isIntersecting","intersectionRatio","onEnter","onExit","unobserve","viewportState","preload","preloaded","ScrollingContinuousViewManager","minHeight","xscale","ar","gotoTarget","_forceLocationEvent","initializeViews","_target","reframeElement","calcuateWidth","maxHeight","calculateHeight","StickyIframeView","checkMinHeight","new_height","popupTables","tables","clipped_tables","_originalHTML","outerHTML","color","margin","padding","bgcolor","tableHTML","tableId","ts","regex","index0","newHTML","INTERACTIVE","installedResizeHandler","isInteractive","hideEverythingInContents","hideEverythingVisible","findMatchingContents","updateFocus","disableFocusHandling","_last_location_start_cfi","_last_location_end_cfi","__updateFocus","elemsWithBoundingRects","_boundingClientRect","clearClientRects","selfOrElement","containerX","containerX2","_showThisNode","x2","hasSeenVisibleChild","checkNode","doProcess","setupFocusRules","debugFocusHandling","_manager","inner","mod","xyz","EpubJS","_epubjs_ready","sessionStorage","book_href","book_options","useArchive","_book","removeItem","_contents","parseRootfiles","generate","containerDoc","draft","_drawRendition","_updateFontSize","original_target","status_index","_initializeReaderStyles","_queueTimeout","rootFilePath","newScrollTop","_navigate","guessed","path1","path2","navigating","doUpdate","_updateScale","reload","_selectTheme","_cached_location","custom_stylesheet_rules","relocated_handler","_fired","locationChanged_handler","_updateFrameTitle","refresh","select","_queueScale","subtitle","previousSection","previous","createReader","Mock","__currentIndex","engines","epubjs","mock","COZY_EPUB_ENGINE","engine_href","COZY_EPUB_ENGINE_HREF","_this"],"mappings":"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"}
=======
{"version":3,"file":"cozy-sun-bear.js","sources":["../node_modules/url-polyfill/url-polyfill.js","../node_modules/classlist-polyfill/src/index.js","../node_modules/intersection-observer/intersection-observer.js","../src/core/Util.js","../src/core/Class.js","../src/core/Events.js","../src/core/Browser.js","../src/geometry/Point.js","../src/dom/DomEvent.Pointer.js","../src/dom/DomEvent.DoubleTap.js","../src/dom/DomEvent.js","../src/dom/DomUtil.js","../node_modules/lodash/isObject.js","../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/now.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObjectLike.js","../node_modules/lodash/isSymbol.js","../node_modules/lodash/toNumber.js","../node_modules/lodash/debounce.js","../node_modules/lodash/isFunction.js","../node_modules/lodash/_coreJsData.js","../node_modules/lodash/_isMasked.js","../node_modules/lodash/_toSource.js","../node_modules/lodash/_baseIsNative.js","../node_modules/lodash/_getValue.js","../node_modules/lodash/_getNative.js","../node_modules/lodash/_defineProperty.js","../node_modules/lodash/_baseAssignValue.js","../node_modules/lodash/eq.js","../node_modules/lodash/_assignValue.js","../node_modules/lodash/_copyObject.js","../node_modules/lodash/identity.js","../node_modules/lodash/_apply.js","../node_modules/lodash/_overRest.js","../node_modules/lodash/constant.js","../node_modules/lodash/_baseSetToString.js","../node_modules/lodash/_shortOut.js","../node_modules/lodash/_setToString.js","../node_modules/lodash/_baseRest.js","../node_modules/lodash/isLength.js","../node_modules/lodash/isArrayLike.js","../node_modules/lodash/_isIndex.js","../node_modules/lodash/_isIterateeCall.js","../node_modules/lodash/_createAssigner.js","../node_modules/lodash/_isPrototype.js","../node_modules/lodash/_baseTimes.js","../node_modules/lodash/_baseIsArguments.js","../node_modules/lodash/isArguments.js","../node_modules/lodash/isArray.js","../node_modules/lodash/stubFalse.js","../node_modules/lodash/isBuffer.js","../node_modules/lodash/_baseIsTypedArray.js","../node_modules/lodash/_baseUnary.js","../node_modules/lodash/_nodeUtil.js","../node_modules/lodash/isTypedArray.js","../node_modules/lodash/_arrayLikeKeys.js","../node_modules/lodash/_overArg.js","../node_modules/lodash/_nativeKeys.js","../node_modules/lodash/_baseKeys.js","../node_modules/lodash/keys.js","../node_modules/lodash/assign.js","../src/screenfull.js","../src/reader/Reader.js","../src/control/Control.js","../src/control/Control.Paging.js","../src/control/Modal.js","../src/control/Control.Contents.js","../src/control/Control.Title.js","../src/control/Control.PublicationMetadata.js","../src/control/Control.Preferences.js","../src/control/Control.Widget.js","../src/control/Control.Citation.js","../src/control/Control.Search.js","../src/control/Control.BibliographicInformation.js","../src/control/Control.Download.js","../src/control/Control.Navigator.js","../src/control/Control.Fullscreen.js","../src/control/index.js","../src/core/Bus.js","../src/core/index.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/assign/is-implemented.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/keys/is-implemented.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/function/noop.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/is-value.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/keys/shim.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/keys/index.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/valid-value.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/assign/shim.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/assign/index.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/normalize-options.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/is-callable.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/string/#/contains/is-implemented.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/string/#/contains/shim.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/string/#/contains/index.js","../../epub.js/node_modules/event-emitter/node_modules/d/index.js","../../epub.js/node_modules/event-emitter/node_modules/es5-ext/object/valid-callable.js","../../epub.js/node_modules/event-emitter/index.js","../../epub.js/src/utils/core.js","../../epub.js/node_modules/path-webpack/path.js","../../epub.js/src/utils/path.js","../../epub.js/src/utils/url.js","../../epub.js/src/epubcfi.js","../../epub.js/src/utils/hook.js","../../epub.js/src/utils/replacements.js","../../epub.js/src/section.js","../../epub.js/src/spine.js","../../epub.js/src/utils/queue.js","../../epub.js/src/utils/constants.js","../../epub.js/src/locations.js","../../epub.js/src/container.js","../../epub.js/src/packaging.js","../../epub.js/src/navigation.js","../../epub.js/libs/mime/mime.js","../../epub.js/src/resources.js","../../epub.js/src/pagelist.js","../../epub.js/src/layout.js","../../epub.js/src/themes.js","../../epub.js/src/mapping.js","../../epub.js/src/contents.js","../../epub.js/src/annotations.js","../../epub.js/node_modules/marks-pane/src/svg.js","../../epub.js/node_modules/marks-pane/src/events.js","../../epub.js/node_modules/marks-pane/src/marks.js","../../epub.js/src/managers/views/iframe.js","../../epub.js/node_modules/lodash/isObject.js","../../epub.js/node_modules/lodash/_freeGlobal.js","../../epub.js/node_modules/lodash/_root.js","../../epub.js/node_modules/lodash/now.js","../../epub.js/node_modules/lodash/_Symbol.js","../../epub.js/node_modules/lodash/_getRawTag.js","../../epub.js/node_modules/lodash/_objectToString.js","../../epub.js/node_modules/lodash/_baseGetTag.js","../../epub.js/node_modules/lodash/isObjectLike.js","../../epub.js/node_modules/lodash/isSymbol.js","../../epub.js/node_modules/lodash/toNumber.js","../../epub.js/node_modules/lodash/debounce.js","../../epub.js/node_modules/lodash/throttle.js","../../epub.js/src/managers/helpers/stage.js","../../epub.js/src/managers/helpers/views.js","../../epub.js/src/managers/default/index.js","../../epub.js/src/managers/helpers/snap.js","../../epub.js/src/managers/continuous/index.js","../../epub.js/src/rendition.js","../../epub.js/src/utils/request.js","../../epub.js/src/archive.js","../../epub.js/src/store.js","../../epub.js/src/book.js","../../epub.js/libs/url/url-polyfill.js","../../epub.js/src/epub.js","../node_modules/path-webpack/path.js","../node_modules/es5-ext/object/assign/is-implemented.js","../node_modules/es5-ext/object/keys/is-implemented.js","../node_modules/es5-ext/object/keys/shim.js","../node_modules/es5-ext/object/keys/index.js","../node_modules/es5-ext/object/valid-value.js","../node_modules/es5-ext/object/assign/shim.js","../node_modules/es5-ext/object/assign/index.js","../node_modules/es5-ext/object/normalize-options.js","../node_modules/es5-ext/object/is-callable.js","../node_modules/es5-ext/string/#/contains/is-implemented.js","../node_modules/es5-ext/string/#/contains/shim.js","../node_modules/es5-ext/string/#/contains/index.js","../node_modules/d/index.js","../node_modules/es5-ext/object/valid-callable.js","../node_modules/event-emitter/index.js","../src/epubjs/managers/helpers/scrolling_views.js","../src/epubjs/managers/continuous/scrolling.js","../node_modules/viewprt/dist/viewprt.esm.js","../src/epubjs/managers/views/sticky.js","../src/utils/manglers.js","../src/utils/focus.js","../src/reader/Reader.EpubJS.js","../src/reader/Reader.Mock.js","../src/reader/index.js"],"sourcesContent":["(function(global) {\r\n  /**\r\n   * Polyfill URLSearchParams\r\n   *\r\n   * Inspired from : https://github.com/WebReflection/url-search-params/blob/master/src/url-search-params.js\r\n   */\r\n\r\n  var checkIfIteratorIsSupported = function() {\r\n    try {\r\n      return !!Symbol.iterator;\r\n    } catch(error) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n\r\n  var iteratorSupported = checkIfIteratorIsSupported();\r\n\r\n  var createIterator = function(items) {\r\n    var iterator = {\r\n      next: function() {\r\n        var value = items.shift();\r\n        return { done: value === void 0, value: value };\r\n      }\r\n    };\r\n\r\n    if(iteratorSupported) {\r\n      iterator[Symbol.iterator] = function() {\r\n        return iterator;\r\n      };\r\n    }\r\n\r\n    return iterator;\r\n  };\r\n\r\n  /**\r\n   * Search param name and values should be encoded according to https://url.spec.whatwg.org/#urlencoded-serializing\r\n   * encodeURIComponent() produces the same result except encoding spaces as `%20` instead of `+`.\r\n   */\r\n  var serializeParam = function(value) {\r\n    return encodeURIComponent(value).replace(/%20/g, '+');\r\n  };\r\n\r\n  var deserializeParam = function(value) {\r\n    return decodeURIComponent(value).replace(/\\+/g, ' ');\r\n  };\r\n\r\n  var polyfillURLSearchParams= function() {\r\n\r\n    var URLSearchParams = function(searchString) {\r\n      Object.defineProperty(this, '_entries', { value: {} });\r\n\r\n      if(typeof searchString === 'string') {\r\n        if(searchString !== '') {\r\n          searchString = searchString.replace(/^\\?/, '');\r\n          var attributes = searchString.split('&');\r\n          var attribute;\r\n          for(var i = 0; i < attributes.length; i++) {\r\n            attribute = attributes[i].split('=');\r\n            this.append(\r\n              deserializeParam(attribute[0]),\r\n              (attribute.length > 1) ? deserializeParam(attribute[1]) : ''\r\n            );\r\n          }\r\n        }\r\n      } else if(searchString instanceof URLSearchParams) {\r\n        var _this = this;\r\n        searchString.forEach(function(value, name) {\r\n          _this.append(value, name);\r\n        });\r\n      }\r\n    };\r\n\r\n    var proto = URLSearchParams.prototype;\r\n\r\n    proto.append = function(name, value) {\r\n      if(name in this._entries) {\r\n        this._entries[name].push(value.toString());\r\n      } else {\r\n        this._entries[name] = [value.toString()];\r\n      }\r\n    };\r\n\r\n    proto.delete = function(name) {\r\n      delete this._entries[name];\r\n    };\r\n\r\n    proto.get = function(name) {\r\n      return (name in this._entries) ? this._entries[name][0] : null;\r\n    };\r\n\r\n    proto.getAll = function(name) {\r\n      return (name in this._entries) ? this._entries[name].slice(0) : [];\r\n    };\r\n\r\n    proto.has = function(name) {\r\n      return (name in this._entries);\r\n    };\r\n\r\n    proto.set = function(name, value) {\r\n      this._entries[name] = [value.toString()];\r\n    };\r\n\r\n    proto.forEach = function(callback, thisArg) {\r\n      var entries;\r\n      for(var name in this._entries) {\r\n        if(this._entries.hasOwnProperty(name)) {\r\n          entries = this._entries[name];\r\n          for(var i = 0; i < entries.length; i++) {\r\n            callback.call(thisArg, entries[i], name, this);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    proto.keys = function() {\r\n      var items = [];\r\n      this.forEach(function(value, name) { items.push(name); });\r\n      return createIterator(items);\r\n    };\r\n\r\n    proto.values = function() {\r\n      var items = [];\r\n      this.forEach(function(value) { items.push(value); });\r\n      return createIterator(items);\r\n    };\r\n\r\n    proto.entries = function() {\r\n      var items = [];\r\n      this.forEach(function(value, name) { items.push([name, value]); });\r\n      return createIterator(items);\r\n    };\r\n\r\n    if(iteratorSupported) {\r\n      proto[Symbol.iterator] = proto.entries;\r\n    }\r\n\r\n    proto.toString = function() {\r\n      var searchString = '';\r\n      this.forEach(function(value, name) {\r\n        if(searchString.length > 0) searchString+= '&';\r\n        searchString += serializeParam(name) + '=' + serializeParam(value);\r\n      });\r\n      return searchString;\r\n    };\r\n\r\n    global.URLSearchParams = URLSearchParams;\r\n  };\r\n\r\n  if(!('URLSearchParams' in global) || (new URLSearchParams('?a=1').toString() !== 'a=1')) {\r\n    polyfillURLSearchParams();\r\n  }\r\n\r\n  // HTMLAnchorElement\r\n\r\n})(\r\n  (typeof global !== 'undefined') ? global\r\n    : ((typeof window !== 'undefined') ? window\r\n    : ((typeof self !== 'undefined') ? self : this))\r\n);\r\n\r\n(function(global) {\r\n  /**\r\n   * Polyfill URL\r\n   *\r\n   * Inspired from : https://github.com/arv/DOM-URL-Polyfill/blob/master/src/url.js\r\n   */\r\n\r\n  var checkIfURLIsSupported = function() {\r\n    try {\r\n      var u = new URL('b', 'http://a');\r\n      u.pathname = 'c%20d';\r\n      return (u.href === 'http://a/c%20d') && u.searchParams;\r\n    } catch(e) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n\r\n  var polyfillURL = function() {\r\n    var _URL = global.URL;\r\n\r\n    var URL = function(url, base) {\r\n      if(typeof url !== 'string') url = String(url);\r\n\r\n      var doc = document.implementation.createHTMLDocument('');\r\n      window.doc = doc;\r\n      if(base) {\r\n        var baseElement = doc.createElement('base');\r\n        baseElement.href = base;\r\n        doc.head.appendChild(baseElement);\r\n      }\r\n\r\n      var anchorElement = doc.createElement('a');\r\n      anchorElement.href = url;\r\n      doc.body.appendChild(anchorElement);\r\n      anchorElement.href = anchorElement.href; // force href to refresh\r\n\r\n      if(anchorElement.protocol === ':' || !/:/.test(anchorElement.href)) {\r\n        throw new TypeError('Invalid URL');\r\n      }\r\n\r\n      Object.defineProperty(this, '_anchorElement', {\r\n        value: anchorElement\r\n      });\r\n    };\r\n\r\n    var proto = URL.prototype;\r\n\r\n    var linkURLWithAnchorAttribute = function(attributeName) {\r\n      Object.defineProperty(proto, attributeName, {\r\n        get: function() {\r\n          return this._anchorElement[attributeName];\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement[attributeName] = value;\r\n        },\r\n        enumerable: true\r\n      });\r\n    };\r\n\r\n    ['hash', 'host', 'hostname', 'port', 'protocol', 'search']\r\n    .forEach(function(attributeName) {\r\n      linkURLWithAnchorAttribute(attributeName);\r\n    });\r\n\r\n    Object.defineProperties(proto, {\r\n\r\n      'toString': {\r\n        get: function() {\r\n          var _this = this;\r\n          return function() {\r\n            return _this.href;\r\n          };\r\n        }\r\n      },\r\n\r\n      'href' : {\r\n        get: function() {\r\n          return this._anchorElement.href.replace(/\\?$/,'');\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement.href = value;\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'pathname' : {\r\n        get: function() {\r\n          return this._anchorElement.pathname.replace(/(^\\/?)/,'/');\r\n        },\r\n        set: function(value) {\r\n          this._anchorElement.pathname = value;\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'origin': {\r\n        get: function() {\r\n          // get expected port from protocol\r\n          var expectedPort = {'http:': 80, 'https:': 443, 'ftp:': 21}[this._anchorElement.protocol];\r\n          // add port to origin if, expected port is different than actual port\r\n          // and it is not empty f.e http://foo:8080\r\n          // 8080 != 80 && 8080 != ''\r\n          var addPortToOrigin = this._anchorElement.port != expectedPort &&\r\n            this._anchorElement.port !== ''\r\n\r\n          return this._anchorElement.protocol +\r\n            '//' +\r\n            this._anchorElement.hostname +\r\n            (addPortToOrigin ? (':' + this._anchorElement.port) : '');\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'password': { // TODO\r\n        get: function() {\r\n          return '';\r\n        },\r\n        set: function(value) {\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'username': { // TODO\r\n        get: function() {\r\n          return '';\r\n        },\r\n        set: function(value) {\r\n        },\r\n        enumerable: true\r\n      },\r\n\r\n      'searchParams': {\r\n        get: function() {\r\n          var searchParams = new URLSearchParams(this.search);\r\n          var _this = this;\r\n          ['append', 'delete', 'set'].forEach(function(methodName) {\r\n            var method = searchParams[methodName];\r\n            searchParams[methodName] = function() {\r\n              method.apply(searchParams, arguments);\r\n              _this.search = searchParams.toString();\r\n            };\r\n          });\r\n          return searchParams;\r\n        },\r\n        enumerable: true\r\n      }\r\n    });\r\n\r\n    URL.createObjectURL = function(blob) {\r\n      return _URL.createObjectURL.apply(_URL, arguments);\r\n    };\r\n\r\n    URL.revokeObjectURL = function(url) {\r\n      return _URL.revokeObjectURL.apply(_URL, arguments);\r\n    };\r\n\r\n    global.URL = URL;\r\n\r\n  };\r\n\r\n  if(!checkIfURLIsSupported()) {\r\n    polyfillURL();\r\n  }\r\n\r\n  if((global.location !== void 0) && !('origin' in global.location)) {\r\n    var getOrigin = function() {\r\n      return global.location.protocol + '//' + global.location.hostname + (global.location.port ? (':' + global.location.port) : '');\r\n    };\r\n\r\n    try {\r\n      Object.defineProperty(global.location, 'origin', {\r\n        get: getOrigin,\r\n        enumerable: true\r\n      });\r\n    } catch(e) {\r\n      setInterval(function() {\r\n        global.location.origin = getOrigin();\r\n      }, 100);\r\n    }\r\n  }\r\n\r\n})(\r\n  (typeof global !== 'undefined') ? global\r\n    : ((typeof window !== 'undefined') ? window\r\n    : ((typeof self !== 'undefined') ? self : this))\r\n);\r\n","/*\n * classList.js: Cross-browser full element.classList implementation.\n * 1.1.20170427\n *\n * By Eli Grey, http://eligrey.com\n * License: Dedicated to the public domain.\n *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md\n */\n\n/*global self, document, DOMException */\n\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n\nif (\"document\" in window.self) {\n\n// Full polyfill for browsers with no classList support\n// Including IE < Edge missing SVGElement.classList\nif (!(\"classList\" in document.createElement(\"_\")) \n\t|| document.createElementNS && !(\"classList\" in document.createElementNS(\"http://www.w3.org/2000/svg\",\"g\"))) {\n\n(function (view) {\n\n\"use strict\";\n\nif (!('Element' in view)) return;\n\nvar\n\t  classListProp = \"classList\"\n\t, protoProp = \"prototype\"\n\t, elemCtrProto = view.Element[protoProp]\n\t, objCtr = Object\n\t, strTrim = String[protoProp].trim || function () {\n\t\treturn this.replace(/^\\s+|\\s+$/g, \"\");\n\t}\n\t, arrIndexOf = Array[protoProp].indexOf || function (item) {\n\t\tvar\n\t\t\t  i = 0\n\t\t\t, len = this.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tif (i in this && this[i] === item) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\t// Vendors: please allow content code to instantiate DOMExceptions\n\t, DOMEx = function (type, message) {\n\t\tthis.name = type;\n\t\tthis.code = DOMException[type];\n\t\tthis.message = message;\n\t}\n\t, checkTokenAndGetIndex = function (classList, token) {\n\t\tif (token === \"\") {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"SYNTAX_ERR\"\n\t\t\t\t, \"An invalid or illegal string was specified\"\n\t\t\t);\n\t\t}\n\t\tif (/\\s/.test(token)) {\n\t\t\tthrow new DOMEx(\n\t\t\t\t  \"INVALID_CHARACTER_ERR\"\n\t\t\t\t, \"String contains an invalid character\"\n\t\t\t);\n\t\t}\n\t\treturn arrIndexOf.call(classList, token);\n\t}\n\t, ClassList = function (elem) {\n\t\tvar\n\t\t\t  trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n\t\t\t, classes = trimmedClasses ? trimmedClasses.split(/\\s+/) : []\n\t\t\t, i = 0\n\t\t\t, len = classes.length\n\t\t;\n\t\tfor (; i < len; i++) {\n\t\t\tthis.push(classes[i]);\n\t\t}\n\t\tthis._updateClassName = function () {\n\t\t\telem.setAttribute(\"class\", this.toString());\n\t\t};\n\t}\n\t, classListProto = ClassList[protoProp] = []\n\t, classListGetter = function () {\n\t\treturn new ClassList(this);\n\t}\n;\n// Most DOMException implementations don't allow calling DOMException's toString()\n// on non-DOMExceptions. Error's toString() is sufficient here.\nDOMEx[protoProp] = Error[protoProp];\nclassListProto.item = function (i) {\n\treturn this[i] || null;\n};\nclassListProto.contains = function (token) {\n\ttoken += \"\";\n\treturn checkTokenAndGetIndex(this, token) !== -1;\n};\nclassListProto.add = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tif (checkTokenAndGetIndex(this, token) === -1) {\n\t\t\tthis.push(token);\n\t\t\tupdated = true;\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.remove = function () {\n\tvar\n\t\t  tokens = arguments\n\t\t, i = 0\n\t\t, l = tokens.length\n\t\t, token\n\t\t, updated = false\n\t\t, index\n\t;\n\tdo {\n\t\ttoken = tokens[i] + \"\";\n\t\tindex = checkTokenAndGetIndex(this, token);\n\t\twhile (index !== -1) {\n\t\t\tthis.splice(index, 1);\n\t\t\tupdated = true;\n\t\t\tindex = checkTokenAndGetIndex(this, token);\n\t\t}\n\t}\n\twhile (++i < l);\n\n\tif (updated) {\n\t\tthis._updateClassName();\n\t}\n};\nclassListProto.toggle = function (token, force) {\n\ttoken += \"\";\n\n\tvar\n\t\t  result = this.contains(token)\n\t\t, method = result ?\n\t\t\tforce !== true && \"remove\"\n\t\t:\n\t\t\tforce !== false && \"add\"\n\t;\n\n\tif (method) {\n\t\tthis[method](token);\n\t}\n\n\tif (force === true || force === false) {\n\t\treturn force;\n\t} else {\n\t\treturn !result;\n\t}\n};\nclassListProto.toString = function () {\n\treturn this.join(\" \");\n};\n\nif (objCtr.defineProperty) {\n\tvar classListPropDesc = {\n\t\t  get: classListGetter\n\t\t, enumerable: true\n\t\t, configurable: true\n\t};\n\ttry {\n\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t} catch (ex) { // IE 8 doesn't support enumerable:true\n\t\t// adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36\n\t\t// modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected\n\t\tif (ex.number === undefined || ex.number === -0x7FF5EC54) {\n\t\t\tclassListPropDesc.enumerable = false;\n\t\t\tobjCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n\t\t}\n\t}\n} else if (objCtr[protoProp].__defineGetter__) {\n\telemCtrProto.__defineGetter__(classListProp, classListGetter);\n}\n\n}(window.self));\n\n}\n\n// There is full or partial native classList support, so just check if we need\n// to normalize the add/remove and toggle APIs.\n\n(function () {\n\t\"use strict\";\n\n\tvar testElement = document.createElement(\"_\");\n\n\ttestElement.classList.add(\"c1\", \"c2\");\n\n\t// Polyfill for IE 10/11 and Firefox <26, where classList.add and\n\t// classList.remove exist but support only one argument at a time.\n\tif (!testElement.classList.contains(\"c2\")) {\n\t\tvar createMethod = function(method) {\n\t\t\tvar original = DOMTokenList.prototype[method];\n\n\t\t\tDOMTokenList.prototype[method] = function(token) {\n\t\t\t\tvar i, len = arguments.length;\n\n\t\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\t\ttoken = arguments[i];\n\t\t\t\t\toriginal.call(this, token);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t\tcreateMethod('add');\n\t\tcreateMethod('remove');\n\t}\n\n\ttestElement.classList.toggle(\"c3\", false);\n\n\t// Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n\t// support the second argument.\n\tif (testElement.classList.contains(\"c3\")) {\n\t\tvar _toggle = DOMTokenList.prototype.toggle;\n\n\t\tDOMTokenList.prototype.toggle = function(token, force) {\n\t\t\tif (1 in arguments && !this.contains(token) === !force) {\n\t\t\t\treturn force;\n\t\t\t} else {\n\t\t\t\treturn _toggle.call(this, token);\n\t\t\t}\n\t\t};\n\n\t}\n\n\ttestElement = null;\n}());\n\n}\n","/**\n * Copyright 2016 Google Inc. All Rights Reserved.\n *\n * Licensed under the W3C SOFTWARE AND DOCUMENT NOTICE AND LICENSE.\n *\n *  https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document\n *\n */\n\n(function(window, document) {\n'use strict';\n\n\n// Exits early if all IntersectionObserver and IntersectionObserverEntry\n// features are natively supported.\nif ('IntersectionObserver' in window &&\n    'IntersectionObserverEntry' in window &&\n    'intersectionRatio' in window.IntersectionObserverEntry.prototype) {\n\n  // Minimal polyfill for Edge 15's lack of `isIntersecting`\n  // See: https://github.com/w3c/IntersectionObserver/issues/211\n  if (!('isIntersecting' in window.IntersectionObserverEntry.prototype)) {\n    Object.defineProperty(window.IntersectionObserverEntry.prototype,\n      'isIntersecting', {\n      get: function () {\n        return this.intersectionRatio > 0;\n      }\n    });\n  }\n  return;\n}\n\n\n/**\n * An IntersectionObserver registry. This registry exists to hold a strong\n * reference to IntersectionObserver instances currently observing a target\n * element. Without this registry, instances without another reference may be\n * garbage collected.\n */\nvar registry = [];\n\n\n/**\n * Creates the global IntersectionObserverEntry constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-entry\n * @param {Object} entry A dictionary of instance properties.\n * @constructor\n */\nfunction IntersectionObserverEntry(entry) {\n  this.time = entry.time;\n  this.target = entry.target;\n  this.rootBounds = entry.rootBounds;\n  this.boundingClientRect = entry.boundingClientRect;\n  this.intersectionRect = entry.intersectionRect || getEmptyRect();\n  this.isIntersecting = !!entry.intersectionRect;\n\n  // Calculates the intersection ratio.\n  var targetRect = this.boundingClientRect;\n  var targetArea = targetRect.width * targetRect.height;\n  var intersectionRect = this.intersectionRect;\n  var intersectionArea = intersectionRect.width * intersectionRect.height;\n\n  // Sets intersection ratio.\n  if (targetArea) {\n    // Round the intersection ratio to avoid floating point math issues:\n    // https://github.com/w3c/IntersectionObserver/issues/324\n    this.intersectionRatio = Number((intersectionArea / targetArea).toFixed(4));\n  } else {\n    // If area is zero and is intersecting, sets to 1, otherwise to 0\n    this.intersectionRatio = this.isIntersecting ? 1 : 0;\n  }\n}\n\n\n/**\n * Creates the global IntersectionObserver constructor.\n * https://w3c.github.io/IntersectionObserver/#intersection-observer-interface\n * @param {Function} callback The function to be invoked after intersection\n *     changes have queued. The function is not invoked if the queue has\n *     been emptied by calling the `takeRecords` method.\n * @param {Object=} opt_options Optional configuration options.\n * @constructor\n */\nfunction IntersectionObserver(callback, opt_options) {\n\n  var options = opt_options || {};\n\n  if (typeof callback != 'function') {\n    throw new Error('callback must be a function');\n  }\n\n  if (options.root && options.root.nodeType != 1) {\n    throw new Error('root must be an Element');\n  }\n\n  // Binds and throttles `this._checkForIntersections`.\n  this._checkForIntersections = throttle(\n      this._checkForIntersections.bind(this), this.THROTTLE_TIMEOUT);\n\n  // Private properties.\n  this._callback = callback;\n  this._observationTargets = [];\n  this._queuedEntries = [];\n  this._rootMarginValues = this._parseRootMargin(options.rootMargin);\n\n  // Public properties.\n  this.thresholds = this._initThresholds(options.threshold);\n  this.root = options.root || null;\n  this.rootMargin = this._rootMarginValues.map(function(margin) {\n    return margin.value + margin.unit;\n  }).join(' ');\n}\n\n\n/**\n * The minimum interval within which the document will be checked for\n * intersection changes.\n */\nIntersectionObserver.prototype.THROTTLE_TIMEOUT = 100;\n\n\n/**\n * The frequency in which the polyfill polls for intersection changes.\n * this can be updated on a per instance basis and must be set prior to\n * calling `observe` on the first target.\n */\nIntersectionObserver.prototype.POLL_INTERVAL = null;\n\n/**\n * Use a mutation observer on the root element\n * to detect intersection changes.\n */\nIntersectionObserver.prototype.USE_MUTATION_OBSERVER = true;\n\n\n/**\n * Starts observing a target element for intersection changes based on\n * the thresholds values.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.observe = function(target) {\n  var isTargetAlreadyObserved = this._observationTargets.some(function(item) {\n    return item.element == target;\n  });\n\n  if (isTargetAlreadyObserved) {\n    return;\n  }\n\n  if (!(target && target.nodeType == 1)) {\n    throw new Error('target must be an Element');\n  }\n\n  this._registerInstance();\n  this._observationTargets.push({element: target, entry: null});\n  this._monitorIntersections();\n  this._checkForIntersections();\n};\n\n\n/**\n * Stops observing a target element for intersection changes.\n * @param {Element} target The DOM element to observe.\n */\nIntersectionObserver.prototype.unobserve = function(target) {\n  this._observationTargets =\n      this._observationTargets.filter(function(item) {\n\n    return item.element != target;\n  });\n  if (!this._observationTargets.length) {\n    this._unmonitorIntersections();\n    this._unregisterInstance();\n  }\n};\n\n\n/**\n * Stops observing all target elements for intersection changes.\n */\nIntersectionObserver.prototype.disconnect = function() {\n  this._observationTargets = [];\n  this._unmonitorIntersections();\n  this._unregisterInstance();\n};\n\n\n/**\n * Returns any queue entries that have not yet been reported to the\n * callback and clears the queue. This can be used in conjunction with the\n * callback to obtain the absolute most up-to-date intersection information.\n * @return {Array} The currently queued entries.\n */\nIntersectionObserver.prototype.takeRecords = function() {\n  var records = this._queuedEntries.slice();\n  this._queuedEntries = [];\n  return records;\n};\n\n\n/**\n * Accepts the threshold value from the user configuration object and\n * returns a sorted array of unique threshold values. If a value is not\n * between 0 and 1 and error is thrown.\n * @private\n * @param {Array|number=} opt_threshold An optional threshold value or\n *     a list of threshold values, defaulting to [0].\n * @return {Array} A sorted list of unique and valid threshold values.\n */\nIntersectionObserver.prototype._initThresholds = function(opt_threshold) {\n  var threshold = opt_threshold || [0];\n  if (!Array.isArray(threshold)) threshold = [threshold];\n\n  return threshold.sort().filter(function(t, i, a) {\n    if (typeof t != 'number' || isNaN(t) || t < 0 || t > 1) {\n      throw new Error('threshold must be a number between 0 and 1 inclusively');\n    }\n    return t !== a[i - 1];\n  });\n};\n\n\n/**\n * Accepts the rootMargin value from the user configuration object\n * and returns an array of the four margin values as an object containing\n * the value and unit properties. If any of the values are not properly\n * formatted or use a unit other than px or %, and error is thrown.\n * @private\n * @param {string=} opt_rootMargin An optional rootMargin value,\n *     defaulting to '0px'.\n * @return {Array<Object>} An array of margin objects with the keys\n *     value and unit.\n */\nIntersectionObserver.prototype._parseRootMargin = function(opt_rootMargin) {\n  var marginString = opt_rootMargin || '0px';\n  var margins = marginString.split(/\\s+/).map(function(margin) {\n    var parts = /^(-?\\d*\\.?\\d+)(px|%)$/.exec(margin);\n    if (!parts) {\n      throw new Error('rootMargin must be specified in pixels or percent');\n    }\n    return {value: parseFloat(parts[1]), unit: parts[2]};\n  });\n\n  // Handles shorthand.\n  margins[1] = margins[1] || margins[0];\n  margins[2] = margins[2] || margins[0];\n  margins[3] = margins[3] || margins[1];\n\n  return margins;\n};\n\n\n/**\n * Starts polling for intersection changes if the polling is not already\n * happening, and if the page's visibility state is visible.\n * @private\n */\nIntersectionObserver.prototype._monitorIntersections = function() {\n  if (!this._monitoringIntersections) {\n    this._monitoringIntersections = true;\n\n    // If a poll interval is set, use polling instead of listening to\n    // resize and scroll events or DOM mutations.\n    if (this.POLL_INTERVAL) {\n      this._monitoringInterval = setInterval(\n          this._checkForIntersections, this.POLL_INTERVAL);\n    }\n    else {\n      addEvent(window, 'resize', this._checkForIntersections, true);\n      addEvent(document, 'scroll', this._checkForIntersections, true);\n\n      if (this.USE_MUTATION_OBSERVER && 'MutationObserver' in window) {\n        this._domObserver = new MutationObserver(this._checkForIntersections);\n        this._domObserver.observe(document, {\n          attributes: true,\n          childList: true,\n          characterData: true,\n          subtree: true\n        });\n      }\n    }\n  }\n};\n\n\n/**\n * Stops polling for intersection changes.\n * @private\n */\nIntersectionObserver.prototype._unmonitorIntersections = function() {\n  if (this._monitoringIntersections) {\n    this._monitoringIntersections = false;\n\n    clearInterval(this._monitoringInterval);\n    this._monitoringInterval = null;\n\n    removeEvent(window, 'resize', this._checkForIntersections, true);\n    removeEvent(document, 'scroll', this._checkForIntersections, true);\n\n    if (this._domObserver) {\n      this._domObserver.disconnect();\n      this._domObserver = null;\n    }\n  }\n};\n\n\n/**\n * Scans each observation target for intersection changes and adds them\n * to the internal entries queue. If new entries are found, it\n * schedules the callback to be invoked.\n * @private\n */\nIntersectionObserver.prototype._checkForIntersections = function() {\n  var rootIsInDom = this._rootIsInDom();\n  var rootRect = rootIsInDom ? this._getRootRect() : getEmptyRect();\n\n  this._observationTargets.forEach(function(item) {\n    var target = item.element;\n    var targetRect = getBoundingClientRect(target);\n    var rootContainsTarget = this._rootContainsTarget(target);\n    var oldEntry = item.entry;\n    var intersectionRect = rootIsInDom && rootContainsTarget &&\n        this._computeTargetAndRootIntersection(target, rootRect);\n\n    var newEntry = item.entry = new IntersectionObserverEntry({\n      time: now(),\n      target: target,\n      boundingClientRect: targetRect,\n      rootBounds: rootRect,\n      intersectionRect: intersectionRect\n    });\n\n    if (!oldEntry) {\n      this._queuedEntries.push(newEntry);\n    } else if (rootIsInDom && rootContainsTarget) {\n      // If the new entry intersection ratio has crossed any of the\n      // thresholds, add a new entry.\n      if (this._hasCrossedThreshold(oldEntry, newEntry)) {\n        this._queuedEntries.push(newEntry);\n      }\n    } else {\n      // If the root is not in the DOM or target is not contained within\n      // root but the previous entry for this target had an intersection,\n      // add a new record indicating removal.\n      if (oldEntry && oldEntry.isIntersecting) {\n        this._queuedEntries.push(newEntry);\n      }\n    }\n  }, this);\n\n  if (this._queuedEntries.length) {\n    this._callback(this.takeRecords(), this);\n  }\n};\n\n\n/**\n * Accepts a target and root rect computes the intersection between then\n * following the algorithm in the spec.\n * TODO(philipwalton): at this time clip-path is not considered.\n * https://w3c.github.io/IntersectionObserver/#calculate-intersection-rect-algo\n * @param {Element} target The target DOM element\n * @param {Object} rootRect The bounding rect of the root after being\n *     expanded by the rootMargin value.\n * @return {?Object} The final intersection rect object or undefined if no\n *     intersection is found.\n * @private\n */\nIntersectionObserver.prototype._computeTargetAndRootIntersection =\n    function(target, rootRect) {\n\n  // If the element isn't displayed, an intersection can't happen.\n  if (window.getComputedStyle(target).display == 'none') return;\n\n  var targetRect = getBoundingClientRect(target);\n  var intersectionRect = targetRect;\n  var parent = getParentNode(target);\n  var atRoot = false;\n\n  while (!atRoot) {\n    var parentRect = null;\n    var parentComputedStyle = parent.nodeType == 1 ?\n        window.getComputedStyle(parent) : {};\n\n    // If the parent isn't displayed, an intersection can't happen.\n    if (parentComputedStyle.display == 'none') return;\n\n    if (parent == this.root || parent == document) {\n      atRoot = true;\n      parentRect = rootRect;\n    } else {\n      // If the element has a non-visible overflow, and it's not the <body>\n      // or <html> element, update the intersection rect.\n      // Note: <body> and <html> cannot be clipped to a rect that's not also\n      // the document rect, so no need to compute a new intersection.\n      if (parent != document.body &&\n          parent != document.documentElement &&\n          parentComputedStyle.overflow != 'visible') {\n        parentRect = getBoundingClientRect(parent);\n      }\n    }\n\n    // If either of the above conditionals set a new parentRect,\n    // calculate new intersection data.\n    if (parentRect) {\n      intersectionRect = computeRectIntersection(parentRect, intersectionRect);\n\n      if (!intersectionRect) break;\n    }\n    parent = getParentNode(parent);\n  }\n  return intersectionRect;\n};\n\n\n/**\n * Returns the root rect after being expanded by the rootMargin value.\n * @return {Object} The expanded root rect.\n * @private\n */\nIntersectionObserver.prototype._getRootRect = function() {\n  var rootRect;\n  if (this.root) {\n    rootRect = getBoundingClientRect(this.root);\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var html = document.documentElement;\n    var body = document.body;\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n  return this._expandRectByRootMargin(rootRect);\n};\n\n\n/**\n * Accepts a rect and expands it by the rootMargin value.\n * @param {Object} rect The rect object to expand.\n * @return {Object} The expanded rect.\n * @private\n */\nIntersectionObserver.prototype._expandRectByRootMargin = function(rect) {\n  var margins = this._rootMarginValues.map(function(margin, i) {\n    return margin.unit == 'px' ? margin.value :\n        margin.value * (i % 2 ? rect.width : rect.height) / 100;\n  });\n  var newRect = {\n    top: rect.top - margins[0],\n    right: rect.right + margins[1],\n    bottom: rect.bottom + margins[2],\n    left: rect.left - margins[3]\n  };\n  newRect.width = newRect.right - newRect.left;\n  newRect.height = newRect.bottom - newRect.top;\n\n  return newRect;\n};\n\n\n/**\n * Accepts an old and new entry and returns true if at least one of the\n * threshold values has been crossed.\n * @param {?IntersectionObserverEntry} oldEntry The previous entry for a\n *    particular target element or null if no previous entry exists.\n * @param {IntersectionObserverEntry} newEntry The current entry for a\n *    particular target element.\n * @return {boolean} Returns true if a any threshold has been crossed.\n * @private\n */\nIntersectionObserver.prototype._hasCrossedThreshold =\n    function(oldEntry, newEntry) {\n\n  // To make comparing easier, an entry that has a ratio of 0\n  // but does not actually intersect is given a value of -1\n  var oldRatio = oldEntry && oldEntry.isIntersecting ?\n      oldEntry.intersectionRatio || 0 : -1;\n  var newRatio = newEntry.isIntersecting ?\n      newEntry.intersectionRatio || 0 : -1;\n\n  // Ignore unchanged ratios\n  if (oldRatio === newRatio) return;\n\n  for (var i = 0; i < this.thresholds.length; i++) {\n    var threshold = this.thresholds[i];\n\n    // Return true if an entry matches a threshold or if the new ratio\n    // and the old ratio are on the opposite sides of a threshold.\n    if (threshold == oldRatio || threshold == newRatio ||\n        threshold < oldRatio !== threshold < newRatio) {\n      return true;\n    }\n  }\n};\n\n\n/**\n * Returns whether or not the root element is an element and is in the DOM.\n * @return {boolean} True if the root element is an element and is in the DOM.\n * @private\n */\nIntersectionObserver.prototype._rootIsInDom = function() {\n  return !this.root || containsDeep(document, this.root);\n};\n\n\n/**\n * Returns whether or not the target element is a child of root.\n * @param {Element} target The target element to check.\n * @return {boolean} True if the target element is a child of root.\n * @private\n */\nIntersectionObserver.prototype._rootContainsTarget = function(target) {\n  return containsDeep(this.root || document, target);\n};\n\n\n/**\n * Adds the instance to the global IntersectionObserver registry if it isn't\n * already present.\n * @private\n */\nIntersectionObserver.prototype._registerInstance = function() {\n  if (registry.indexOf(this) < 0) {\n    registry.push(this);\n  }\n};\n\n\n/**\n * Removes the instance from the global IntersectionObserver registry.\n * @private\n */\nIntersectionObserver.prototype._unregisterInstance = function() {\n  var index = registry.indexOf(this);\n  if (index != -1) registry.splice(index, 1);\n};\n\n\n/**\n * Returns the result of the performance.now() method or null in browsers\n * that don't support the API.\n * @return {number} The elapsed time since the page was requested.\n */\nfunction now() {\n  return window.performance && performance.now && performance.now();\n}\n\n\n/**\n * Throttles a function and delays its execution, so it's only called at most\n * once within a given time period.\n * @param {Function} fn The function to throttle.\n * @param {number} timeout The amount of time that must pass before the\n *     function can be called again.\n * @return {Function} The throttled function.\n */\nfunction throttle(fn, timeout) {\n  var timer = null;\n  return function () {\n    if (!timer) {\n      timer = setTimeout(function() {\n        fn();\n        timer = null;\n      }, timeout);\n    }\n  };\n}\n\n\n/**\n * Adds an event handler to a DOM node ensuring cross-browser compatibility.\n * @param {Node} node The DOM node to add the event handler to.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to add.\n * @param {boolean} opt_useCapture Optionally adds the even to the capture\n *     phase. Note: this only works in modern browsers.\n */\nfunction addEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.addEventListener == 'function') {\n    node.addEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.attachEvent == 'function') {\n    node.attachEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Removes a previously added event handler from a DOM node.\n * @param {Node} node The DOM node to remove the event handler from.\n * @param {string} event The event name.\n * @param {Function} fn The event handler to remove.\n * @param {boolean} opt_useCapture If the event handler was added with this\n *     flag set to true, it should be set to true here in order to remove it.\n */\nfunction removeEvent(node, event, fn, opt_useCapture) {\n  if (typeof node.removeEventListener == 'function') {\n    node.removeEventListener(event, fn, opt_useCapture || false);\n  }\n  else if (typeof node.detatchEvent == 'function') {\n    node.detatchEvent('on' + event, fn);\n  }\n}\n\n\n/**\n * Returns the intersection between two rect objects.\n * @param {Object} rect1 The first rect.\n * @param {Object} rect2 The second rect.\n * @return {?Object} The intersection rect or undefined if no intersection\n *     is found.\n */\nfunction computeRectIntersection(rect1, rect2) {\n  var top = Math.max(rect1.top, rect2.top);\n  var bottom = Math.min(rect1.bottom, rect2.bottom);\n  var left = Math.max(rect1.left, rect2.left);\n  var right = Math.min(rect1.right, rect2.right);\n  var width = right - left;\n  var height = bottom - top;\n\n  return (width >= 0 && height >= 0) && {\n    top: top,\n    bottom: bottom,\n    left: left,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n\n/**\n * Shims the native getBoundingClientRect for compatibility with older IE.\n * @param {Element} el The element whose bounding rect to get.\n * @return {Object} The (possibly shimmed) rect of the element.\n */\nfunction getBoundingClientRect(el) {\n  var rect;\n\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (err) {\n    // Ignore Windows 7 IE11 \"Unspecified error\"\n    // https://github.com/w3c/IntersectionObserver/pull/205\n  }\n\n  if (!rect) return getEmptyRect();\n\n  // Older IE\n  if (!(rect.width && rect.height)) {\n    rect = {\n      top: rect.top,\n      right: rect.right,\n      bottom: rect.bottom,\n      left: rect.left,\n      width: rect.right - rect.left,\n      height: rect.bottom - rect.top\n    };\n  }\n  return rect;\n}\n\n\n/**\n * Returns an empty rect object. An empty rect is returned when an element\n * is not in the DOM.\n * @return {Object} The empty rect.\n */\nfunction getEmptyRect() {\n  return {\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    width: 0,\n    height: 0\n  };\n}\n\n/**\n * Checks to see if a parent element contains a child element (including inside\n * shadow DOM).\n * @param {Node} parent The parent element.\n * @param {Node} child The child element.\n * @return {boolean} True if the parent node contains the child node.\n */\nfunction containsDeep(parent, child) {\n  var node = child;\n  while (node) {\n    if (node == parent) return true;\n\n    node = getParentNode(node);\n  }\n  return false;\n}\n\n\n/**\n * Gets the parent node of an element or its host element if the parent node\n * is a shadow root.\n * @param {Node} node The node whose parent to get.\n * @return {Node|null} The parent node or null if no parent exists.\n */\nfunction getParentNode(node) {\n  var parent = node.parentNode;\n\n  if (parent && parent.nodeType == 11 && parent.host) {\n    // If the parent is a shadow root, return the host element.\n    return parent.host;\n  }\n  return parent;\n}\n\n\n// Exposes the constructors globally.\nwindow.IntersectionObserver = IntersectionObserver;\nwindow.IntersectionObserverEntry = IntersectionObserverEntry;\n\n}(window, document));\n","/*\n * @namespace Util\n *\n * Various utility functions, used by Leaflet internally.\n */\n\n// @function extend(dest: Object, src?: Object): Object\n// Merges the properties of the `src` object (or multiple objects) into `dest` object and returns the latter. Has an `L.extend` shortcut.\nexport function extend(dest) {\n    var i, j, len, src;\n\n    for (j = 1, len = arguments.length; j < len; j++) {\n        src = arguments[j];\n        for (i in src) {\n            dest[i] = src[i];\n        }\n    }\n    return dest;\n}\n\n// @function create(proto: Object, properties?: Object): Object\n// Compatibility polyfill for [Object.create](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/create)\nexport var create = Object.create || (function () {\n    function F() {}\n    return function (proto) {\n        F.prototype = proto;\n        return new F();\n    };\n})();\n\n// @function bind(fn: Function, â€¦): Function\n// Returns a new function bound to the arguments passed, like [Function.prototype.bind](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).\n// Has a `L.bind()` shortcut.\nexport function bind(fn, obj) {\n    var slice = Array.prototype.slice;\n\n    if (fn.bind) {\n        return fn.bind.apply(fn, slice.call(arguments, 1));\n    }\n\n    var args = slice.call(arguments, 2);\n\n    return function () {\n        return fn.apply(obj, args.length ? args.concat(slice.call(arguments)) : arguments);\n    };\n}\n\n// @property lastId: Number\n// Last unique ID used by [`stamp()`](#util-stamp)\nexport var lastId = 0;\n\n// @function stamp(obj: Object): Number\n// Returns the unique ID of an object, assiging it one if it doesn't have it.\nexport function stamp(obj) {\n    /*eslint-disable */\n    obj._cozy_id = obj._cozy_id || ++lastId;\n    return obj._cozy_id; /* not leaflet */\n    /*eslint-enable */\n}\n\n// @function throttle(fn: Function, time: Number, context: Object): Function\n// Returns a function which executes function `fn` with the given scope `context`\n// (so that the `this` keyword refers to `context` inside `fn`'s code). The function\n// `fn` will be called no more than one time per given amount of `time`. The arguments\n// received by the bound function will be any arguments passed when binding the\n// function, followed by any arguments passed when invoking the bound function.\n// Has an `L.throttle` shortcut.\nexport function throttle(fn, time, context) {\n    var lock, args, wrapperFn, later;\n\n    later = function () {\n        // reset lock and call if queued\n        lock = false;\n        if (args) {\n            wrapperFn.apply(context, args);\n            args = false;\n        }\n    };\n\n    wrapperFn = function () {\n        if (lock) {\n            // called too soon, queue to call later\n            args = arguments;\n\n        } else {\n            // call and lock until later\n            fn.apply(context, arguments);\n            setTimeout(later, time);\n            lock = true;\n        }\n    };\n\n    return wrapperFn;\n}\n\n// @function wrapNum(num: Number, range: Number[], includeMax?: Boolean): Number\n// Returns the number `num` modulo `range` in such a way so it lies within\n// `range[0]` and `range[1]`. The returned value will be always smaller than\n// `range[1]` unless `includeMax` is set to `true`.\nexport function wrapNum(x, range, includeMax) {\n    var max = range[1],\n        min = range[0],\n        d = max - min;\n    return x === max && includeMax ? x : ((x - min) % d + d) % d + min;\n}\n\n// @function falseFn(): Function\n// Returns a function which always returns `false`.\nexport function falseFn() { return false; }\n\n// @function formatNum(num: Number, digits?: Number): Number\n// Returns the number `num` rounded to `digits` decimals, or to 5 decimals by default.\nexport function formatNum(num, digits) {\n    var pow = Math.pow(10, digits || 5);\n    return Math.round(num * pow) / pow;\n}\n\n// @function isNumeric(num: Number): Boolean\n// Returns whether num is actually numeric\nexport function isNumeric(num) {\n  return !isNaN(parseFloat(num)) && isFinite(num);\n}\n\n// @function trim(str: String): String\n// Compatibility polyfill for [String.prototype.trim](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)\nexport function trim(str) {\n    return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '');\n}\n\n// @function splitWords(str: String): String[]\n// Trims and splits the string on whitespace and returns the array of parts.\nexport function splitWords(str) {\n    return trim(str).split(/\\s+/);\n}\n\n// @function setOptions(obj: Object, options: Object): Object\n// Merges the given properties to the `options` of the `obj` object, returning the resulting options. See `Class options`. Has an `L.setOptions` shortcut.\nexport function setOptions(obj, options) {\n    if (!obj.hasOwnProperty('options')) {\n        obj.options = obj.options ? create(obj.options) : {};\n    }\n    for (var i in options) {\n        obj.options[i] = options[i];\n    }\n    return obj.options;\n}\n\n// @function getParamString(obj: Object, existingUrl?: String, uppercase?: Boolean): String\n// Converts an object into a parameter URL string, e.g. `{a: \"foo\", b: \"bar\"}`\n// translates to `'?a=foo&b=bar'`. If `existingUrl` is set, the parameters will\n// be appended at the end. If `uppercase` is `true`, the parameter names will\n// be uppercased (e.g. `'?A=foo&B=bar'`)\nexport function getParamString(obj, existingUrl, uppercase) {\n    var params = [];\n    for (var i in obj) {\n        params.push(encodeURIComponent(uppercase ? i.toUpperCase() : i) + '=' + encodeURIComponent(obj[i]));\n    }\n    return ((!existingUrl || existingUrl.indexOf('?') === -1) ? '?' : '&') + params.join('&');\n}\n\nvar templateRe = /\\{ *([\\w_\\-]+) *\\}/g;\n\n// @function template(str: String, data: Object): String\n// Simple templating facility, accepts a template string of the form `'Hello {a}, {b}'`\n// and a data object like `{a: 'foo', b: 'bar'}`, returns evaluated string\n// `('Hello foo, bar')`. You can also specify functions instead of strings for\n// data values â€” they will be evaluated passing `data` as an argument.\nexport function template(str, data) {\n    return str.replace(templateRe, function (str, key) {\n        var value = data[key];\n\n        if (value === undefined) {\n            throw new Error('No value provided for variable ' + str);\n\n        } else if (typeof value === 'function') {\n            value = value(data);\n        }\n        return value;\n    });\n}\n\n// @function isArray(obj): Boolean\n// Compatibility polyfill for [Array.isArray](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)\nexport var isArray = Array.isArray || function (obj) {\n    return (Object.prototype.toString.call(obj) === '[object Array]');\n};\n\n// @function indexOf(array: Array, el: Object): Number\n// Compatibility polyfill for [Array.prototype.indexOf](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)\nexport function indexOf(array, el) {\n    for (var i = 0; i < array.length; i++) {\n        if (array[i] === el) { return i; }\n    }\n    return -1;\n}\n\n// @property emptyImageUrl: String\n// Data URI string containing a base64-encoded empty GIF image.\n// Used as a hack to free memory from unused images on WebKit-powered\n// mobile devices (by setting image `src` to this string).\nexport var emptyImageUrl = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\n\n// inspired by http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n\nfunction getPrefixed(name) {\n    return window['webkit' + name] || window['moz' + name] || window['ms' + name];\n}\n\nvar lastTime = 0;\n\n// fallback for IE 7-8\nfunction timeoutDefer(fn) {\n    var time = +new Date(),\n        timeToCall = Math.max(0, 16 - (time - lastTime));\n\n    lastTime = time + timeToCall;\n    return window.setTimeout(fn, timeToCall);\n}\n\nexport var requestFn = window.requestAnimationFrame || getPrefixed('RequestAnimationFrame') || timeoutDefer;\nexport var cancelFn = window.cancelAnimationFrame || getPrefixed('CancelAnimationFrame') ||\n        getPrefixed('CancelRequestAnimationFrame') || function (id) { window.clearTimeout(id); };\n\n// @function requestAnimFrame(fn: Function, context?: Object, immediate?: Boolean): Number\n// Schedules `fn` to be executed when the browser repaints. `fn` is bound to\n// `context` if given. When `immediate` is set, `fn` is called immediately if\n// the browser doesn't have native support for\n// [`window.requestAnimationFrame`](https://developer.mozilla.org/docs/Web/API/window/requestAnimationFrame),\n// otherwise it's delayed. Returns a request ID that can be used to cancel the request.\nexport function requestAnimFrame(fn, context, immediate) {\n    if (immediate && requestFn === timeoutDefer) {\n        fn.call(context);\n    } else {\n        return requestFn.call(window, bind(fn, context));\n    }\n}\n\n// @function cancelAnimFrame(id: Number): undefined\n// Cancels a previous `requestAnimFrame`. See also [window.cancelAnimationFrame](https://developer.mozilla.org/docs/Web/API/window/cancelAnimationFrame).\nexport function cancelAnimFrame(id) {\n    if (id) {\n        cancelFn.call(window, id);\n    }\n}\n\nexport function inVp(elem, threshold = {}, container = null) {\n\n    if ( threshold instanceof HTMLElement ) {\n        container = threshold;\n        threshold = {};\n    }\n\n    threshold = Object.assign({\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n    }, threshold);\n\n    container = container || document.documentElement;\n\n    // Get the viewport dimensions\n    const vp = {\n        width: container.clientWidth,\n        height: container.clientHeight\n    };\n\n    // Get the viewport offset and size of the element.\n    // Normailze right and bottom to show offset from their\n    // respective edges istead of the top-left edges.\n    const box = elem.getBoundingClientRect();\n    const {\n        top,\n        left,\n        width,\n        height\n    } = box;\n    const right = vp.width - box.right;\n    const bottom = vp.height - box.bottom;\n\n    // Calculate which sides of the element are cut-off\n    // by the viewport.\n    const cutOff = {\n        top: top < threshold.top,\n        left: left < threshold.left,\n        bottom: bottom < threshold.bottom,\n        right: right < threshold.right\n    };\n\n    // Calculate which sides of the element are partially shown\n    const partial = {\n        top: cutOff.top && top > -height + threshold.top,\n        left: cutOff.left && left > -width + threshold.left,\n        bottom: cutOff.bottom && bottom > -height + threshold.bottom,\n        right: cutOff.right && right > -width + threshold.right\n    };\n\n    const isFullyVisible = top >= threshold.top &&\n        right >= threshold.right &&\n        bottom >= threshold.bottom &&\n        left >= threshold.left;\n\n    const isPartiallyVisible = partial.top ||\n        partial.right ||\n        partial.bottom ||\n        partial.left;\n\n\n    var elH = elem.offsetHeight;\n    var H = container.offsetHeight;\n    var percentage = Math.max(0, top > 0 ? Math.min(elH, H - top) : (box.bottom < H ? box.bottom : H));\n\n    // Calculate which edge of the element are visible.\n    // Every edge can have three states:\n    // - 'fully':     The edge is completely visible.\n    // - 'partially': Some part of the edge can be seen.\n    // - false:       The edge is not visible at all.\n    const edges = {\n        top: !isFullyVisible && !isPartiallyVisible ? false : ((!cutOff.top && !cutOff.left && !cutOff.right) && 'fully') ||\n            (!cutOff.top && 'partially') ||\n            false,\n        right: !isFullyVisible && !isPartiallyVisible ? false : ((!cutOff.right && !cutOff.top && !cutOff.bottom) && 'fully') ||\n            (!cutOff.right && 'partially') ||\n            false,\n        bottom: !isFullyVisible && !isPartiallyVisible ? false : ((!cutOff.bottom && !cutOff.left && !cutOff.right) && 'fully') ||\n            (!cutOff.bottom && 'partially') ||\n            false,\n        left: !isFullyVisible && !isPartiallyVisible ? false : ((!cutOff.left && !cutOff.top && !cutOff.bottom) && 'fully') ||\n            (!cutOff.left && 'partially') ||\n            false,\n        percentage: percentage\n    };\n\n    return {\n        fully: isFullyVisible,\n        partially: isPartiallyVisible,\n        edges\n    };\n}\n\nexport var loader = {\n    js: function(url) {\n        var handler = { _resolved: false };\n        handler.callbacks = [];\n        handler.error = [];\n        handler.then = function(cb) {\n            handler.callbacks.push(cb);\n            if ( handler._resolved ) { return handler.resolve(); }\n            return handler;\n        }\n        handler.catch = function(cb) {\n            handler.error.push(cb);\n            if ( handler._resolved ) { return handler.reject(); }\n            return handler;\n        }\n        handler.resolve = function(_argv) {\n            // var _argv;\n            handler._resolved = true;\n            while ( handler.callbacks.length ) {\n                var cb = handler.callbacks.shift();\n                var retval;\n                try {\n                    _argv = cb(_argv);\n                } catch(e) {\n                    console.log(e);\n                    handler.reject(e);\n                    break;\n                }\n            }\n            return handler;\n        }\n\n        handler.reject = function(e) {\n            while ( handler.error.length ) {\n                var cb = handler.error.shift();\n                cb(e);\n            }\n            console.log(e);\n            console.trace();\n            return handler;\n        }\n\n        if ( url == undefined ) {\n            handler._resolved = true;\n            return handler;\n        }\n\n        var element = document.createElement('script');\n\n        element.onload = function() {\n          handler.resolve(url);\n        };\n        element.onerror = function() {\n          handler.catch.apply(arguments);\n        };\n\n        element.async = true;\n        var parent = 'body';\n        var attr = 'src';\n        element[attr] = url;\n        document[parent].appendChild(element);\n\n        console.log(\"AHOY APPENDED\", url);\n\n        return handler;\n    }\n}","import * as Util from './Util';\r\n\r\n// @class Class\r\n// @aka L.Class\r\n\r\n// @section\r\n// @uninheritable\r\n\r\n// Thanks to John Resig and Dean Edwards for inspiration!\r\n\r\nexport function Class() {}\r\n\r\nClass.extend = function (props) {\r\n\r\n\t// @function extend(props: Object): Function\r\n\t// [Extends the current class](#class-inheritance) given the properties to be included.\r\n\t// Returns a Javascript function that is a class constructor (to be called with `new`).\r\n\tvar NewClass = function () {\r\n\r\n\t\t// call the constructor\r\n\t\tif (this.initialize) {\r\n\t\t\tthis.initialize.apply(this, arguments);\r\n\t\t}\r\n\r\n\t\t// call all constructor hooks\r\n\t\tthis.callInitHooks();\r\n\t};\r\n\r\n\tvar parentProto = NewClass.__super__ = this.prototype;\r\n\r\n\tvar proto = Util.create(parentProto);\r\n\tproto.constructor = NewClass;\r\n\r\n\tNewClass.prototype = proto;\r\n\r\n\t// inherit parent's statics\r\n\tfor (var i in this) {\r\n\t\tif (this.hasOwnProperty(i) && i !== 'prototype') {\r\n\t\t\tNewClass[i] = this[i];\r\n\t\t}\r\n\t}\r\n\r\n\t// mix static properties into the class\r\n\tif (props.statics) {\r\n\t\tUtil.extend(NewClass, props.statics);\r\n\t\tdelete props.statics;\r\n\t}\r\n\r\n\t// mix includes into the prototype\r\n\tif (props.includes) {\r\n\t\tcheckDeprecatedMixinEvents(props.includes);\r\n\t\tUtil.extend.apply(null, [proto].concat(props.includes));\r\n\t\tdelete props.includes;\r\n\t}\r\n\r\n\t// merge options\r\n\tif (proto.options) {\r\n\t\tprops.options = Util.extend(Util.create(proto.options), props.options);\r\n\t}\r\n\r\n\t// mix given properties into the prototype\r\n\tUtil.extend(proto, props);\r\n\t\r\n\tproto._initHooks = [];\r\n\r\n\t// add method for calling all hooks\r\n\tproto.callInitHooks = function () {\r\n\r\n\t\tif (this._initHooksCalled) { return; }\r\n\r\n\t\tif (parentProto.callInitHooks) {\r\n\t\t\tparentProto.callInitHooks.call(this);\r\n\t\t}\r\n\r\n\t\tthis._initHooksCalled = true;\r\n\r\n\t\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\r\n\t\t\tproto._initHooks[i].call(this);\r\n\t\t}\r\n\t};\r\n\r\n\treturn NewClass;\r\n};\r\n\r\n\r\n// @function include(properties: Object): this\r\n// [Includes a mixin](#class-includes) into the current class.\r\nClass.include = function (props) {\r\n\tUtil.extend(this.prototype, props);\r\n\treturn this;\r\n};\r\n\r\n// @function mergeOptions(options: Object): this\r\n// [Merges `options`](#class-options) into the defaults of the class.\r\nClass.mergeOptions = function (options) {\r\n\tUtil.extend(this.prototype.options, options);\r\n\treturn this;\r\n};\r\n\r\n// @function addInitHook(fn: Function): this\r\n// Adds a [constructor hook](#class-constructor-hooks) to the class.\r\nClass.addInitHook = function (fn) { // (Function) || (String, args...)\r\n\tvar args = Array.prototype.slice.call(arguments, 1);\r\n\r\n\tvar init = typeof fn === 'function' ? fn : function () {\r\n\t\tthis[fn].apply(this, args);\r\n\t};\r\n\r\n\tthis.prototype._initHooks = this.prototype._initHooks || [];\r\n\tthis.prototype._initHooks.push(init);\r\n\treturn this;\r\n};\r\n\r\nfunction checkDeprecatedMixinEvents(includes) {\r\n\tif (!cozy || !cozy.Mixin) { return; }\r\n\r\n\tincludes = cozy.Util.isArray(includes) ? includes : [includes];\r\n\r\n\t// for (var i = 0; i < includes.length; i++) {\r\n\t// \tif (includes[i] === cozy.Mixin.Events) {\r\n\t// \t\tconsole.warn('Deprecated include of cozy.Mixin.Events: ' +\r\n\t// \t\t\t'this property will be removed in future releases, ' +\r\n\t// \t\t\t'please inherit from cozy.Evented instead.', new Error().stack);\r\n\t// \t}\r\n\t// }\r\n}\r\n","import {Class} from './Class';\r\nimport * as Util from './Util';\r\n\r\n/*\r\n * @class Evented\r\n * @aka L.Evented\r\n * @inherits Class\r\n *\r\n * A set of methods shared between event-powered classes (like `Map` and `Marker`). Generally, events allow you to execute some function when something happens with an object (e.g. the user clicks on the map, causing the map to fire `'click'` event).\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * map.on('click', function(e) {\r\n * \talert(e.latlng);\r\n * } );\r\n * ```\r\n *\r\n * Leaflet deals with event listeners by reference, so if you want to add a listener and then remove it, define it as a function:\r\n *\r\n * ```js\r\n * function onClick(e) { ... }\r\n *\r\n * map.on('click', onClick);\r\n * map.off('click', onClick);\r\n * ```\r\n */\r\n\r\nexport var Evented = Class.extend({\r\n\r\n\t/* @method on(type: String, fn: Function, context?: Object): this\r\n\t * Adds a listener function (`fn`) to a particular event type of the object. You can optionally specify the context of the listener (object the this keyword will point to). You can also pass several space-separated types (e.g. `'click dblclick'`).\r\n\t *\r\n\t * @alternative\r\n\t * @method on(eventMap: Object): this\r\n\t * Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n\t */\r\n\ton: function (types, fn, context) {\r\n\r\n\t\t// types can be a map of types/handlers\r\n\t\tif (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\t// we don't process space-separated events here for performance;\r\n\t\t\t\t// it's a hot path since Layer uses the on(obj) syntax\r\n\t\t\t\tthis._on(type, types[type], fn);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t// types can be a string of space-separated words\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tthis._on(types[i], fn, context);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t/* @method off(type: String, fn?: Function, context?: Object): this\r\n\t * Removes a previously added listener function. If no function is specified, it will remove all the listeners of that particular event from the object. Note that if you passed a custom context to `on`, you must pass the same context to `off` in order to remove the listener.\r\n\t *\r\n\t * @alternative\r\n\t * @method off(eventMap: Object): this\r\n\t * Removes a set of type/listener pairs.\r\n\t *\r\n\t * @alternative\r\n\t * @method off: this\r\n\t * Removes all listeners to all events on the object.\r\n\t */\r\n\toff: function (types, fn, context) {\r\n\r\n\t\tif (!types) {\r\n\t\t\t// clear all listeners if called without arguments\r\n\t\t\tdelete this._events;\r\n\r\n\t\t} else if (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\tthis._off(type, types[type], fn);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\ttypes = Util.splitWords(types);\r\n\r\n\t\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\t\tthis._off(types[i], fn, context);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// attach listener (without syntactic sugar now)\r\n\t_on: function (type, fn, context) {\r\n\t\tthis._events = this._events || {};\r\n\r\n\t\t/* get/init listeners for type */\r\n\t\tvar typeListeners = this._events[type];\r\n\t\tif (!typeListeners) {\r\n\t\t\ttypeListeners = [];\r\n\t\t\tthis._events[type] = typeListeners;\r\n\t\t}\r\n\r\n\t\tif (context === this) {\r\n\t\t\t// Less memory footprint.\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\t\tvar newListener = {fn: fn, ctx: context},\r\n\t\t    listeners = typeListeners;\r\n\r\n\t\t// check if fn already there\r\n\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\tif (listeners[i].fn === fn && listeners[i].ctx === context) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlisteners.push(newListener);\r\n\t},\r\n\r\n\t_off: function (type, fn, context) {\r\n\t\tvar listeners,\r\n\t\t    i,\r\n\t\t    len;\r\n\r\n\t\tif (!this._events) { return; }\r\n\r\n\t\tlisteners = this._events[type];\r\n\r\n\t\tif (!listeners) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!fn) {\r\n\t\t\t// Set all removed listeners to noop so they are not called if remove happens in fire\r\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\tlisteners[i].fn = Util.falseFn;\r\n\t\t\t}\r\n\t\t\t// clear all listeners for a type if function isn't specified\r\n\t\t\tdelete this._events[type];\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (context === this) {\r\n\t\t\tcontext = undefined;\r\n\t\t}\r\n\r\n\t\tif (listeners) {\r\n\r\n\t\t\t// find fn and remove it\r\n\t\t\tfor (i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\tvar l = listeners[i];\r\n\t\t\t\tif (l.ctx !== context) { continue; }\r\n\t\t\t\tif (l.fn === fn) {\r\n\r\n\t\t\t\t\t// set the removed listener to noop so that's not called if remove happens in fire\r\n\t\t\t\t\tl.fn = Util.falseFn;\r\n\r\n\t\t\t\t\tif (this._firingCount) {\r\n\t\t\t\t\t\t/* copy array in case events are being fired */\r\n\t\t\t\t\t\tthis._events[type] = listeners = listeners.slice();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlisteners.splice(i, 1);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t// @method fire(type: String, data?: Object, propagate?: Boolean): this\r\n\t// Fires an event of the specified type. You can optionally provide an data\r\n\t// object â€” the first argument of the listener function will contain its\r\n\t// properties. The event can optionally be propagated to event parents.\r\n\tfire: function (type, data, propagate) {\r\n\t\tif (!this.listens(type, propagate)) { return this; }\r\n\r\n\t\tvar event = Util.extend({}, data, {type: type, target: this});\r\n\r\n\t\tif (this._events) {\r\n\t\t\tvar listeners = this._events[type];\r\n\r\n\t\t\tif (listeners) {\r\n\t\t\t\tthis._firingCount = (this._firingCount + 1) || 1;\r\n\t\t\t\tfor (var i = 0, len = listeners.length; i < len; i++) {\r\n\t\t\t\t\tvar l = listeners[i];\r\n\t\t\t\t\tl.fn.call(l.ctx || this, event);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis._firingCount--;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (propagate) {\r\n\t\t\t// propagate the event to parents (set with addEventParent)\r\n\t\t\tthis._propagateEvent(event);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method listens(type: String): Boolean\r\n\t// Returns `true` if a particular event type has any listeners attached to it.\r\n\tlistens: function (type, propagate) {\r\n\t\tvar listeners = this._events && this._events[type];\r\n\t\tif (listeners && listeners.length) { return true; }\r\n\r\n\t\tif (propagate) {\r\n\t\t\t// also check parents for listeners if event propagates\r\n\t\t\tfor (var id in this._eventParents) {\r\n\t\t\t\tif (this._eventParents[id].listens(type, propagate)) { return true; }\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t},\r\n\r\n\t// @method once(â€¦): this\r\n\t// Behaves as [`on(â€¦)`](#evented-on), except the listener will only get fired once and then removed.\r\n\tonce: function (types, fn, context) {\r\n\r\n\t\tif (typeof types === 'object') {\r\n\t\t\tfor (var type in types) {\r\n\t\t\t\tthis.once(type, types[type], fn);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tvar handler = Util.bind(function () {\r\n\t\t\tthis\r\n\t\t\t    .off(types, fn, context)\r\n\t\t\t    .off(types, handler, context);\r\n\t\t}, this);\r\n\r\n\t\t// add a listener that's executed once and removed after that\r\n\t\treturn this\r\n\t\t    .on(types, fn, context)\r\n\t\t    .on(types, handler, context);\r\n\t},\r\n\r\n\t// @method addEventParent(obj: Evented): this\r\n\t// Adds an event parent - an `Evented` that will receive propagated events\r\n\taddEventParent: function (obj) {\r\n\t\tthis._eventParents = this._eventParents || {};\r\n\t\tthis._eventParents[Util.stamp(obj)] = obj;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method removeEventParent(obj: Evented): this\r\n\t// Removes an event parent, so it will stop receiving propagated events\r\n\tremoveEventParent: function (obj) {\r\n\t\tif (this._eventParents) {\r\n\t\t\tdelete this._eventParents[Util.stamp(obj)];\r\n\t\t}\r\n\t\treturn this;\r\n\t},\r\n\r\n\t_propagateEvent: function (e) {\r\n\t\tfor (var id in this._eventParents) {\r\n\t\t\tthis._eventParents[id].fire(e.type, Util.extend({layer: e.target}, e), true);\r\n\t\t}\r\n\t}\r\n});\r\n\r\nvar proto = Evented.prototype;\r\n\r\n// aliases; we should ditch those eventually\r\n\r\n// @method addEventListener(â€¦): this\r\n// Alias to [`on(â€¦)`](#evented-on)\r\nproto.addEventListener = proto.on;\r\n\r\n// @method removeEventListener(â€¦): this\r\n// Alias to [`off(â€¦)`](#evented-off)\r\n\r\n// @method clearAllEventListeners(â€¦): this\r\n// Alias to [`off()`](#evented-off)\r\nproto.removeEventListener = proto.clearAllEventListeners = proto.off;\r\n\r\n// @method addOneTimeEventListener(â€¦): this\r\n// Alias to [`once(â€¦)`](#evented-once)\r\nproto.addOneTimeEventListener = proto.once;\r\n\r\n// @method fireEvent(â€¦): this\r\n// Alias to [`fire(â€¦)`](#evented-fire)\r\nproto.fireEvent = proto.fire;\r\n\r\n// @method hasEventListeners(â€¦): Boolean\r\n// Alias to [`listens(â€¦)`](#evented-listens)\r\nproto.hasEventListeners = proto.listens;\r\n","\n/*\n * @namespace Browser\n * @aka L.Browser\n *\n * A namespace with static properties for browser/feature detection used by Leaflet internally.\n *\n * @example\n *\n * ```js\n * if (L.Browser.ielt9) {\n *   alert('Upgrade your browser, dude!');\n * }\n * ```\n */\n\nvar style = document.documentElement.style;\n\n// @property ie: Boolean; `true` for all Internet Explorer versions (not Edge).\nexport var ie = 'ActiveXObject' in window;\n\n// @property ielt9: Boolean; `true` for Internet Explorer versions less than 9.\nexport var ielt9 = ie && !document.addEventListener;\n\n// @property edge: Boolean; `true` for the Edge web browser.\nexport var edge = 'msLaunchUri' in navigator && !('documentMode' in document);\n\n// @property webkit: Boolean;\n// `true` for webkit-based browsers like Chrome and Safari (including mobile versions).\nexport var webkit = userAgentContains('webkit');\n\n// @property android: Boolean\n// `true` for any browser running on an Android platform.\nexport var android = userAgentContains('android');\n\n// @property android23: Boolean; `true` for browsers running on Android 2 or Android 3.\nexport var android23 = userAgentContains('android 2') || userAgentContains('android 3');\n\n// @property opera: Boolean; `true` for the Opera browser\nexport var opera = !!window.opera;\n\n// @property chrome: Boolean; `true` for the Chrome browser.\nexport var chrome = userAgentContains('chrome');\n\n// @property gecko: Boolean; `true` for gecko-based browsers like Firefox.\nexport var gecko = userAgentContains('gecko') && !webkit && !opera && !ie;\n\n// @property safari: Boolean; `true` for the Safari browser.\nexport var safari = !chrome && userAgentContains('safari');\n\nexport var phantom = userAgentContains('phantom');\n\n// @property opera12: Boolean\n// `true` for the Opera browser supporting CSS transforms (version 12 or later).\nexport var opera12 = 'OTransition' in style;\n\n// @property win: Boolean; `true` when the browser is running in a Windows platform\nexport var win = navigator.platform.indexOf('Win') === 0;\n\n// @property ie3d: Boolean; `true` for all Internet Explorer versions supporting CSS transforms.\nexport var ie3d = ie && ('transition' in style);\n\n// @property webkit3d: Boolean; `true` for webkit-based browsers supporting CSS transforms.\nexport var webkit3d = ('WebKitCSSMatrix' in window) && ('m11' in new window.WebKitCSSMatrix()) && !android23;\n\n// @property gecko3d: Boolean; `true` for gecko-based browsers supporting CSS transforms.\nexport var gecko3d = 'MozPerspective' in style;\n\n// @property any3d: Boolean\n// `true` for all browsers supporting CSS transforms.\nexport var any3d = !window.L_DISABLE_3D && (ie3d || webkit3d || gecko3d) && !opera12 && !phantom;\n\n// @property mobile: Boolean; `true` for all browsers running in a mobile device.\nexport var mobile = typeof orientation !== 'undefined' || userAgentContains('mobile');\n\n// @property mobileWebkit: Boolean; `true` for all webkit-based browsers in a mobile device.\nexport var mobileWebkit = mobile && webkit;\n\n// @property mobileWebkit3d: Boolean\n// `true` for all webkit-based browsers in a mobile device supporting CSS transforms.\nexport var mobileWebkit3d = mobile && webkit3d;\n\n// @property msPointer: Boolean\n// `true` for browsers implementing the Microsoft touch events model (notably IE10).\nexport var msPointer = !window.PointerEvent && window.MSPointerEvent;\n\n// @property pointer: Boolean\n// `true` for all browsers supporting [pointer events](https://msdn.microsoft.com/en-us/library/dn433244%28v=vs.85%29.aspx).\nexport var pointer = !!(window.PointerEvent || msPointer);\n\n// @property touch: Boolean\n// `true` for all browsers supporting [touch events](https://developer.mozilla.org/docs/Web/API/Touch_events).\n// This does not necessarily mean that the browser is running in a computer with\n// a touchscreen, it only means that the browser is capable of understanding\n// touch events.\nexport var touch = !window.L_NO_TOUCH && (pointer || 'ontouchstart' in window ||\n        (window.DocumentTouch && document instanceof window.DocumentTouch));\n\n// @property mobileOpera: Boolean; `true` for the Opera browser in a mobile device.\nexport var mobileOpera = mobile && opera;\n\n// @property mobileGecko: Boolean\n// `true` for gecko-based browsers running in a mobile device.\nexport var mobileGecko = mobile && gecko;\n\n// @property retina: Boolean\n// `true` for browsers on a high-resolution \"retina\" screen.\nexport var retina = (window.devicePixelRatio || (window.screen.deviceXDPI / window.screen.logicalXDPI)) > 1;\n\n\n// @property canvas: Boolean\n// `true` when the browser supports [`<canvas>`](https://developer.mozilla.org/docs/Web/API/Canvas_API).\nexport var canvas = (function () {\n    return !!document.createElement('canvas').getContext;\n}());\n\n// @property svg: Boolean\n// `true` when the browser supports [SVG](https://developer.mozilla.org/docs/Web/SVG).\n// export var svg = !!(document.createElementNS && svgCreate('svg').createSVGRect);\nexport var svg = true;\n\n// @property vml: Boolean\n// `true` if the browser supports [VML](https://en.wikipedia.org/wiki/Vector_Markup_Language).\nexport var vml = !svg && (function () {\n    try {\n        var div = document.createElement('div');\n        div.innerHTML = '<v:shape adj=\"1\"/>';\n\n        var shape = div.firstChild;\n        shape.style.behavior = 'url(#default#VML)';\n\n        return shape && (typeof shape.adj === 'object');\n\n    } catch (e) {\n        return false;\n    }\n}());\n\nexport var columnCount = ( 'columnCount' in style );\nexport var classList = ( document.documentElement.classList !== undefined );\n\nfunction userAgentContains(str) {\n    return navigator.userAgent.toLowerCase().indexOf(str) >= 0;\n}\n","import {isArray, formatNum} from '../core/Util';\r\n\r\n/*\r\n * @class Point\r\n * @aka L.Point\r\n *\r\n * Represents a point with `x` and `y` coordinates in pixels.\r\n *\r\n * @example\r\n *\r\n * ```js\r\n * var point = L.point(200, 300);\r\n * ```\r\n *\r\n * All Leaflet methods and options that accept `Point` objects also accept them in a simple Array form (unless noted otherwise), so these lines are equivalent:\r\n *\r\n * ```js\r\n * map.panBy([200, 300]);\r\n * map.panBy(L.point(200, 300));\r\n * ```\r\n */\r\n\r\nexport function Point(x, y, round) {\r\n\t// @property x: Number; The `x` coordinate of the point\r\n\tthis.x = (round ? Math.round(x) : x);\r\n\t// @property y: Number; The `y` coordinate of the point\r\n\tthis.y = (round ? Math.round(y) : y);\r\n}\r\n\r\nPoint.prototype = {\r\n\r\n\t// @method clone(): Point\r\n\t// Returns a copy of the current point.\r\n\tclone: function () {\r\n\t\treturn new Point(this.x, this.y);\r\n\t},\r\n\r\n\t// @method add(otherPoint: Point): Point\r\n\t// Returns the result of addition of the current and the given points.\r\n\tadd: function (point) {\r\n\t\t// non-destructive, returns a new point\r\n\t\treturn this.clone()._add(toPoint(point));\r\n\t},\r\n\r\n\t_add: function (point) {\r\n\t\t// destructive, used directly for performance in situations where it's safe to modify existing point\r\n\t\tthis.x += point.x;\r\n\t\tthis.y += point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method subtract(otherPoint: Point): Point\r\n\t// Returns the result of subtraction of the given point from the current.\r\n\tsubtract: function (point) {\r\n\t\treturn this.clone()._subtract(toPoint(point));\r\n\t},\r\n\r\n\t_subtract: function (point) {\r\n\t\tthis.x -= point.x;\r\n\t\tthis.y -= point.y;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method divideBy(num: Number): Point\r\n\t// Returns the result of division of the current point by the given number.\r\n\tdivideBy: function (num) {\r\n\t\treturn this.clone()._divideBy(num);\r\n\t},\r\n\r\n\t_divideBy: function (num) {\r\n\t\tthis.x /= num;\r\n\t\tthis.y /= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method multiplyBy(num: Number): Point\r\n\t// Returns the result of multiplication of the current point by the given number.\r\n\tmultiplyBy: function (num) {\r\n\t\treturn this.clone()._multiplyBy(num);\r\n\t},\r\n\r\n\t_multiplyBy: function (num) {\r\n\t\tthis.x *= num;\r\n\t\tthis.y *= num;\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method scaleBy(scale: Point): Point\r\n\t// Multiply each coordinate of the current point by each coordinate of\r\n\t// `scale`. In linear algebra terms, multiply the point by the\r\n\t// [scaling matrix](https://en.wikipedia.org/wiki/Scaling_%28geometry%29#Matrix_representation)\r\n\t// defined by `scale`.\r\n\tscaleBy: function (point) {\r\n\t\treturn new Point(this.x * point.x, this.y * point.y);\r\n\t},\r\n\r\n\t// @method unscaleBy(scale: Point): Point\r\n\t// Inverse of `scaleBy`. Divide each coordinate of the current point by\r\n\t// each coordinate of `scale`.\r\n\tunscaleBy: function (point) {\r\n\t\treturn new Point(this.x / point.x, this.y / point.y);\r\n\t},\r\n\r\n\t// @method round(): Point\r\n\t// Returns a copy of the current point with rounded coordinates.\r\n\tround: function () {\r\n\t\treturn this.clone()._round();\r\n\t},\r\n\r\n\t_round: function () {\r\n\t\tthis.x = Math.round(this.x);\r\n\t\tthis.y = Math.round(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method floor(): Point\r\n\t// Returns a copy of the current point with floored coordinates (rounded down).\r\n\tfloor: function () {\r\n\t\treturn this.clone()._floor();\r\n\t},\r\n\r\n\t_floor: function () {\r\n\t\tthis.x = Math.floor(this.x);\r\n\t\tthis.y = Math.floor(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method ceil(): Point\r\n\t// Returns a copy of the current point with ceiled coordinates (rounded up).\r\n\tceil: function () {\r\n\t\treturn this.clone()._ceil();\r\n\t},\r\n\r\n\t_ceil: function () {\r\n\t\tthis.x = Math.ceil(this.x);\r\n\t\tthis.y = Math.ceil(this.y);\r\n\t\treturn this;\r\n\t},\r\n\r\n\t// @method distanceTo(otherPoint: Point): Number\r\n\t// Returns the cartesian distance between the current and the given points.\r\n\tdistanceTo: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\tvar x = point.x - this.x,\r\n\t\t    y = point.y - this.y;\r\n\r\n\t\treturn Math.sqrt(x * x + y * y);\r\n\t},\r\n\r\n\t// @method equals(otherPoint: Point): Boolean\r\n\t// Returns `true` if the given point has the same coordinates.\r\n\tequals: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\treturn point.x === this.x &&\r\n\t\t       point.y === this.y;\r\n\t},\r\n\r\n\t// @method contains(otherPoint: Point): Boolean\r\n\t// Returns `true` if both coordinates of the given point are less than the corresponding current point coordinates (in absolute values).\r\n\tcontains: function (point) {\r\n\t\tpoint = toPoint(point);\r\n\r\n\t\treturn Math.abs(point.x) <= Math.abs(this.x) &&\r\n\t\t       Math.abs(point.y) <= Math.abs(this.y);\r\n\t},\r\n\r\n\t// @method toString(): String\r\n\t// Returns a string representation of the point for debugging purposes.\r\n\ttoString: function () {\r\n\t\treturn 'Point(' +\r\n\t\t        formatNum(this.x) + ', ' +\r\n\t\t        formatNum(this.y) + ')';\r\n\t}\r\n};\r\n\r\n// @factory L.point(x: Number, y: Number, round?: Boolean)\r\n// Creates a Point object with the given `x` and `y` coordinates. If optional `round` is set to true, rounds the `x` and `y` values.\r\n\r\n// @alternative\r\n// @factory L.point(coords: Number[])\r\n// Expects an array of the form `[x, y]` instead.\r\n\r\n// @alternative\r\n// @factory L.point(coords: Object)\r\n// Expects a plain object of the form `{x: Number, y: Number}` instead.\r\nexport function toPoint(x, y, round) {\r\n\tif (x instanceof Point) {\r\n\t\treturn x;\r\n\t}\r\n\tif (isArray(x)) {\r\n\t\treturn new Point(x[0], x[1]);\r\n\t}\r\n\tif (x === undefined || x === null) {\r\n\t\treturn x;\r\n\t}\r\n\tif (typeof x === 'object' && 'x' in x && 'y' in x) {\r\n\t\treturn new Point(x.x, x.y);\r\n\t}\r\n\treturn new Point(x, y, round);\r\n}\r\n","import * as DomEvent from './DomEvent';\nimport * as Util from '../core/Util';\nimport * as Browser from '../core/Browser';\n\n/*\n * Extends L.DomEvent to provide touch support for Internet Explorer and Windows-based devices.\n */\n\n\nvar POINTER_DOWN =   Browser.msPointer ? 'MSPointerDown'   : 'pointerdown',\n    POINTER_MOVE =   Browser.msPointer ? 'MSPointerMove'   : 'pointermove',\n    POINTER_UP =     Browser.msPointer ? 'MSPointerUp'     : 'pointerup',\n    POINTER_CANCEL = Browser.msPointer ? 'MSPointerCancel' : 'pointercancel',\n    TAG_WHITE_LIST = ['INPUT', 'SELECT', 'OPTION'],\n\n    _pointers = {},\n    _pointerDocListener = false;\n\n// DomEvent.DoubleTap needs to know about this\nexport var _pointersCount = 0;\n\n// Provides a touch events wrapper for (ms)pointer events.\n// ref http://www.w3.org/TR/pointerevents/ https://www.w3.org/Bugs/Public/show_bug.cgi?id=22890\n\nexport function addPointerListener(obj, type, handler, id) {\n\tif (type === 'touchstart') {\n\t\t_addPointerStart(obj, handler, id);\n\n\t} else if (type === 'touchmove') {\n\t\t_addPointerMove(obj, handler, id);\n\n\t} else if (type === 'touchend') {\n\t\t_addPointerEnd(obj, handler, id);\n\t}\n\n\treturn this;\n}\n\nexport function removePointerListener(obj, type, id) {\n\tvar handler = obj['_leaflet_' + type + id];\n\n\tif (type === 'touchstart') {\n\t\tobj.removeEventListener(POINTER_DOWN, handler, false);\n\n\t} else if (type === 'touchmove') {\n\t\tobj.removeEventListener(POINTER_MOVE, handler, false);\n\n\t} else if (type === 'touchend') {\n\t\tobj.removeEventListener(POINTER_UP, handler, false);\n\t\tobj.removeEventListener(POINTER_CANCEL, handler, false);\n\t}\n\n\treturn this;\n}\n\nfunction _addPointerStart(obj, handler, id) {\n\tvar onDown = Util.bind(function (e) {\n\t\tif (e.pointerType !== 'mouse' && e.pointerType !== e.MSPOINTER_TYPE_MOUSE && e.pointerType !== e.MSPOINTER_TYPE_MOUSE) {\n\t\t\t// In IE11, some touch events needs to fire for form controls, or\n\t\t\t// the controls will stop working. We keep a whitelist of tag names that\n\t\t\t// need these events. For other target tags, we prevent default on the event.\n\t\t\tif (TAG_WHITE_LIST.indexOf(e.target.tagName) < 0) {\n\t\t\t\tDomEvent.preventDefault(e);\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t_handlePointer(e, handler);\n\t});\n\n\tobj['_leaflet_touchstart' + id] = onDown;\n\tobj.addEventListener(POINTER_DOWN, onDown, false);\n\n\t// need to keep track of what pointers and how many are active to provide e.touches emulation\n\tif (!_pointerDocListener) {\n\t\t// we listen documentElement as any drags that end by moving the touch off the screen get fired there\n\t\tdocument.documentElement.addEventListener(POINTER_DOWN, _globalPointerDown, true);\n\t\tdocument.documentElement.addEventListener(POINTER_MOVE, _globalPointerMove, true);\n\t\tdocument.documentElement.addEventListener(POINTER_UP, _globalPointerUp, true);\n\t\tdocument.documentElement.addEventListener(POINTER_CANCEL, _globalPointerUp, true);\n\n\t\t_pointerDocListener = true;\n\t}\n}\n\nfunction _globalPointerDown(e) {\n\t_pointers[e.pointerId] = e;\n\t_pointersCount++;\n}\n\nfunction _globalPointerMove(e) {\n\tif (_pointers[e.pointerId]) {\n\t\t_pointers[e.pointerId] = e;\n\t}\n}\n\nfunction _globalPointerUp(e) {\n\tdelete _pointers[e.pointerId];\n\t_pointersCount--;\n}\n\nfunction _handlePointer(e, handler) {\n\te.touches = [];\n\tfor (var i in _pointers) {\n\t\te.touches.push(_pointers[i]);\n\t}\n\te.changedTouches = [e];\n\n\thandler(e);\n}\n\nfunction _addPointerMove(obj, handler, id) {\n\tvar onMove = function (e) {\n\t\t// don't fire touch moves when mouse isn't down\n\t\tif ((e.pointerType === e.MSPOINTER_TYPE_MOUSE || e.pointerType === 'mouse') && e.buttons === 0) { return; }\n\n\t\t_handlePointer(e, handler);\n\t};\n\n\tobj['_leaflet_touchmove' + id] = onMove;\n\tobj.addEventListener(POINTER_MOVE, onMove, false);\n}\n\nfunction _addPointerEnd(obj, handler, id) {\n\tvar onUp = function (e) {\n\t\t_handlePointer(e, handler);\n\t};\n\n\tobj['_leaflet_touchend' + id] = onUp;\n\tobj.addEventListener(POINTER_UP, onUp, false);\n\tobj.addEventListener(POINTER_CANCEL, onUp, false);\n}\n\n","import * as Browser from '../core/Browser';\r\nimport {_pointersCount} from './DomEvent.Pointer';\r\n\r\n/*\r\n * Extends the event handling code with double tap support for mobile browsers.\r\n */\r\n\r\nvar _touchstart = Browser.msPointer ? 'MSPointerDown' : Browser.pointer ? 'pointerdown' : 'touchstart',\r\n    _touchend = Browser.msPointer ? 'MSPointerUp' : Browser.pointer ? 'pointerup' : 'touchend',\r\n    _pre = '_leaflet_';\r\n\r\n// inspired by Zepto touch code by Thomas Fuchs\r\nexport function addDoubleTapListener(obj, handler, id) {\r\n\tvar last, touch,\r\n\t    doubleTap = false,\r\n\t    delay = 250;\r\n\r\n\tfunction onTouchStart(e) {\r\n\t\tvar count;\r\n\r\n\t\tif (Browser.pointer) {\r\n\t\t\tif ((!Browser.edge) || e.pointerType === 'mouse') { return; }\r\n\t\t\tcount = _pointersCount;\r\n\t\t} else {\r\n\t\t\tcount = e.touches.length;\r\n\t\t}\r\n\r\n\t\tif (count > 1) { return; }\r\n\r\n\t\tvar now = Date.now(),\r\n\t\t    delta = now - (last || now);\r\n\r\n\t\ttouch = e.touches ? e.touches[0] : e;\r\n\t\tdoubleTap = (delta > 0 && delta <= delay);\r\n\t\tlast = now;\r\n\t}\r\n\r\n\tfunction onTouchEnd(e) {\r\n\t\tif (doubleTap && !touch.cancelBubble) {\r\n\t\t\tif (Browser.pointer) {\r\n\t\t\t\tif ((!Browser.edge) || e.pointerType === 'mouse') { return; }\r\n\t\t\t\t// work around .type being readonly with MSPointer* events\r\n\t\t\t\tvar newTouch = {},\r\n\t\t\t\t    prop, i;\r\n\r\n\t\t\t\tfor (i in touch) {\r\n\t\t\t\t\tprop = touch[i];\r\n\t\t\t\t\tnewTouch[i] = prop && prop.bind ? prop.bind(touch) : prop;\r\n\t\t\t\t}\r\n\t\t\t\ttouch = newTouch;\r\n\t\t\t}\r\n\t\t\ttouch.type = 'dblclick';\r\n\t\t\thandler(touch);\r\n\t\t\tlast = null;\r\n\t\t}\r\n\t}\r\n\r\n\tobj[_pre + _touchstart + id] = onTouchStart;\r\n\tobj[_pre + _touchend + id] = onTouchEnd;\r\n\tobj[_pre + 'dblclick' + id] = handler;\r\n\r\n\tobj.addEventListener(_touchstart, onTouchStart, false);\r\n\tobj.addEventListener(_touchend, onTouchEnd, false);\r\n\r\n\t// On some platforms (notably, chrome<55 on win10 + touchscreen + mouse),\r\n\t// the browser doesn't fire touchend/pointerup events but does fire\r\n\t// native dblclicks. See #4127.\r\n\t// Edge 14 also fires native dblclicks, but only for pointerType mouse, see #5180.\r\n\tobj.addEventListener('dblclick', handler, false);\r\n\r\n\treturn this;\r\n}\r\n\r\nexport function removeDoubleTapListener(obj, id) {\r\n\tvar touchstart = obj[_pre + _touchstart + id],\r\n\t    touchend = obj[_pre + _touchend + id],\r\n\t    dblclick = obj[_pre + 'dblclick' + id];\r\n\r\n\tobj.removeEventListener(_touchstart, touchstart, false);\r\n\tobj.removeEventListener(_touchend, touchend, false);\r\n\tif (!Browser.edge) {\r\n\t\tobj.removeEventListener('dblclick', dblclick, false);\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n","import {Point} from '../geometry/Point';\r\nimport * as Util from '../core/Util';\r\nimport * as Browser from '../core/Browser';\r\nimport {addPointerListener, removePointerListener} from './DomEvent.Pointer';\r\nimport {addDoubleTapListener, removeDoubleTapListener} from './DomEvent.DoubleTap';\r\n\r\n/*\r\n * @namespace DomEvent\r\n * Utility functions to work with the [DOM events](https://developer.mozilla.org/docs/Web/API/Event), used by Leaflet internally.\r\n */\r\n\r\n// Inspired by John Resig, Dean Edwards and YUI addEvent implementations.\r\n\r\n// @function on(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n// Adds a listener function (`fn`) to a particular DOM event type of the\r\n// element `el`. You can optionally specify the context of the listener\r\n// (object the `this` keyword will point to). You can also pass several\r\n// space-separated types (e.g. `'click dblclick'`).\r\n\r\n// @alternative\r\n// @function on(el: HTMLElement, eventMap: Object, context?: Object): this\r\n// Adds a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\nexport function on(obj, types, fn, context) {\r\n\r\n\tif (typeof types === 'object') {\r\n\t\tfor (var type in types) {\r\n\t\t\taddOne(obj, type, types[type], fn);\r\n\t\t}\r\n\t} else {\r\n\t\ttypes = Util.splitWords(types);\r\n\r\n\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\taddOne(obj, types[i], fn, context);\r\n\t\t}\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n\r\nvar eventsKey = '_leaflet_events';\r\n\r\n// @function off(el: HTMLElement, types: String, fn: Function, context?: Object): this\r\n// Removes a previously added listener function. If no function is specified,\r\n// it will remove all the listeners of that particular DOM event from the element.\r\n// Note that if you passed a custom context to on, you must pass the same\r\n// context to `off` in order to remove the listener.\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement, eventMap: Object, context?: Object): this\r\n// Removes a set of type/listener pairs, e.g. `{click: onClick, mousemove: onMouseMove}`\r\n\r\n// @alternative\r\n// @function off(el: HTMLElement): this\r\n// Removes all known event listeners\r\nexport function off(obj, types, fn, context) {\r\n\r\n\tif (typeof types === 'object') {\r\n\t\tfor (var type in types) {\r\n\t\t\tremoveOne(obj, type, types[type], fn);\r\n\t\t}\r\n\t} else if (types) {\r\n\t\ttypes = Util.splitWords(types);\r\n\r\n\t\tfor (var i = 0, len = types.length; i < len; i++) {\r\n\t\t\tremoveOne(obj, types[i], fn, context);\r\n\t\t}\r\n\t} else {\r\n\t\tfor (var j in obj[eventsKey]) {\r\n\t\t\tremoveOne(obj, j, obj[eventsKey][j]);\r\n\t\t}\r\n\t\tdelete obj[eventsKey];\r\n\t}\r\n}\r\n\r\nfunction addOne(obj, type, fn, context) {\r\n\tvar id = type + Util.stamp(fn) + (context ? '_' + Util.stamp(context) : '');\r\n\r\n\tif (obj[eventsKey] && obj[eventsKey][id]) { return this; }\r\n\r\n\tvar handler = function (e) {\r\n\t\treturn fn.call(context || obj, e || window.event);\r\n\t};\r\n\r\n\tvar originalHandler = handler;\r\n\r\n\tif (Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\t// Needs DomEvent.Pointer.js\r\n\t\taddPointerListener(obj, type, handler, id);\r\n\r\n\t} else if (Browser.touch && (type === 'dblclick') && addDoubleTapListener &&\r\n\t           !(Browser.pointer && Browser.chrome)) {\r\n\t\t// Chrome >55 does not need the synthetic dblclicks from addDoubleTapListener\r\n\t\t// See #5180\r\n\t\taddDoubleTapListener(obj, handler, id);\r\n\r\n\t} else if ('addEventListener' in obj) {\r\n\r\n\t\tif (type === 'mousewheel') {\r\n\t\t\tobj.addEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);\r\n\r\n\t\t} else if ((type === 'mouseenter') || (type === 'mouseleave')) {\r\n\t\t\thandler = function (e) {\r\n\t\t\t\te = e || window.event;\r\n\t\t\t\tif (isExternalTarget(obj, e)) {\r\n\t\t\t\t\toriginalHandler(e);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tobj.addEventListener(type === 'mouseenter' ? 'mouseover' : 'mouseout', handler, false);\r\n\r\n\t\t} else {\r\n\t\t\tif (type === 'click' && Browser.android) {\r\n\t\t\t\thandler = function (e) {\r\n\t\t\t\t\tfilterClick(e, originalHandler);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tobj.addEventListener(type, handler, false);\r\n\t\t}\r\n\r\n\t} else if ('attachEvent' in obj) {\r\n\t\tobj.attachEvent('on' + type, handler);\r\n\t}\r\n\r\n\tobj[eventsKey] = obj[eventsKey] || {};\r\n\tobj[eventsKey][id] = handler;\r\n}\r\n\r\nfunction removeOne(obj, type, fn, context) {\r\n\r\n\tvar id = type + Util.stamp(fn) + (context ? '_' + Util.stamp(context) : ''),\r\n\t    handler = obj[eventsKey] && obj[eventsKey][id];\r\n\r\n\tif (!handler) { return this; }\r\n\r\n\tif (Browser.pointer && type.indexOf('touch') === 0) {\r\n\t\tremovePointerListener(obj, type, id);\r\n\r\n\t} else if (Browser.touch && (type === 'dblclick') && removeDoubleTapListener) {\r\n\t\tremoveDoubleTapListener(obj, id);\r\n\r\n\t} else if ('removeEventListener' in obj) {\r\n\r\n\t\tif (type === 'mousewheel') {\r\n\t\t\tobj.removeEventListener('onwheel' in obj ? 'wheel' : 'mousewheel', handler, false);\r\n\r\n\t\t} else {\r\n\t\t\tobj.removeEventListener(\r\n\t\t\t\ttype === 'mouseenter' ? 'mouseover' :\r\n\t\t\t\ttype === 'mouseleave' ? 'mouseout' : type, handler, false);\r\n\t\t}\r\n\r\n\t} else if ('detachEvent' in obj) {\r\n\t\tobj.detachEvent('on' + type, handler);\r\n\t}\r\n\r\n\tobj[eventsKey][id] = null;\r\n}\r\n\r\n// @function stopPropagation(ev: DOMEvent): this\r\n// Stop the given event from propagation to parent elements. Used inside the listener functions:\r\n// ```js\r\n// L.DomEvent.on(div, 'click', function (ev) {\r\n// \tL.DomEvent.stopPropagation(ev);\r\n// });\r\n// ```\r\nexport function stopPropagation(e) {\r\n\r\n\tif (e.stopPropagation) {\r\n\t\te.stopPropagation();\r\n\t} else if (e.originalEvent) {  // In case of Leaflet event.\r\n\t\te.originalEvent._stopped = true;\r\n\t} else {\r\n\t\te.cancelBubble = true;\r\n\t}\r\n\tskipped(e);\r\n\r\n\treturn this;\r\n}\r\n\r\n// @function disableScrollPropagation(el: HTMLElement): this\r\n// Adds `stopPropagation` to the element's `'mousewheel'` events (plus browser variants).\r\nexport function disableScrollPropagation(el) {\r\n\treturn addOne(el, 'mousewheel', stopPropagation);\r\n}\r\n\r\n// @function disableClickPropagation(el: HTMLElement): this\r\n// Adds `stopPropagation` to the element's `'click'`, `'doubleclick'`,\r\n// `'mousedown'` and `'touchstart'` events (plus browser variants).\r\nexport function disableClickPropagation(el) {\r\n\ton(el, 'mousedown touchstart dblclick', stopPropagation);\r\n\taddOne(el, 'click', fakeStop);\r\n\treturn this;\r\n}\r\n\r\n// @function preventDefault(ev: DOMEvent): this\r\n// Prevents the default action of the DOM Event `ev` from happening (such as\r\n// following a link in the href of the a element, or doing a POST request\r\n// with page reload when a `<form>` is submitted).\r\n// Use it inside listener functions.\r\nexport function preventDefault(e) {\r\n\tif (e.preventDefault) {\r\n\t\te.preventDefault();\r\n\t} else {\r\n\t\te.returnValue = false;\r\n\t}\r\n\treturn this;\r\n}\r\n\r\n// @function stop(ev): this\r\n// Does `stopPropagation` and `preventDefault` at the same time.\r\nexport function stop(e) {\r\n\tpreventDefault(e);\r\n\tstopPropagation(e);\r\n\treturn this;\r\n}\r\n\r\n// @function getMousePosition(ev: DOMEvent, container?: HTMLElement): Point\r\n// Gets normalized mouse position from a DOM event relative to the\r\n// `container` or to the whole page if not specified.\r\nexport function getMousePosition(e, container) {\r\n\tif (!container) {\r\n\t\treturn new Point(e.clientX, e.clientY);\r\n\t}\r\n\r\n\tvar rect = container.getBoundingClientRect();\r\n\r\n\treturn new Point(\r\n\t\te.clientX - rect.left - container.clientLeft,\r\n\t\te.clientY - rect.top - container.clientTop);\r\n}\r\n\r\n// Chrome on Win scrolls double the pixels as in other platforms (see #4538),\r\n// and Firefox scrolls device pixels, not CSS pixels\r\nvar wheelPxFactor =\r\n\t(Browser.win && Browser.chrome) ? 2 :\r\n\tBrowser.gecko ? window.devicePixelRatio : 1;\r\n\r\n// @function getWheelDelta(ev: DOMEvent): Number\r\n// Gets normalized wheel delta from a mousewheel DOM event, in vertical\r\n// pixels scrolled (negative if scrolling down).\r\n// Events from pointing devices without precise scrolling are mapped to\r\n// a best guess of 60 pixels.\r\nexport function getWheelDelta(e) {\r\n\treturn (Browser.edge) ? e.wheelDeltaY / 2 : // Don't trust window-geometry-based delta\r\n\t       (e.deltaY && e.deltaMode === 0) ? -e.deltaY / wheelPxFactor : // Pixels\r\n\t       (e.deltaY && e.deltaMode === 1) ? -e.deltaY * 20 : // Lines\r\n\t       (e.deltaY && e.deltaMode === 2) ? -e.deltaY * 60 : // Pages\r\n\t       (e.deltaX || e.deltaZ) ? 0 :\t// Skip horizontal/depth wheel events\r\n\t       e.wheelDelta ? (e.wheelDeltaY || e.wheelDelta) / 2 : // Legacy IE pixels\r\n\t       (e.detail && Math.abs(e.detail) < 32765) ? -e.detail * 20 : // Legacy Moz lines\r\n\t       e.detail ? e.detail / -32765 * 60 : // Legacy Moz pages\r\n\t       0;\r\n}\r\n\r\nvar skipEvents = {};\r\n\r\nexport function fakeStop(e) {\r\n\t// fakes stopPropagation by setting a special event flag, checked/reset with skipped(e)\r\n\tskipEvents[e.type] = true;\r\n}\r\n\r\nexport function skipped(e) {\r\n\tvar events = skipEvents[e.type];\r\n\t// reset when checking, as it's only used in map container and propagates outside of the map\r\n\tskipEvents[e.type] = false;\r\n\treturn events;\r\n}\r\n\r\n// check if element really left/entered the event target (for mouseenter/mouseleave)\r\nexport function isExternalTarget(el, e) {\r\n\r\n\tvar related = e.relatedTarget;\r\n\r\n\tif (!related) { return true; }\r\n\r\n\ttry {\r\n\t\twhile (related && (related !== el)) {\r\n\t\t\trelated = related.parentNode;\r\n\t\t}\r\n\t} catch (err) {\r\n\t\treturn false;\r\n\t}\r\n\treturn (related !== el);\r\n}\r\n\r\nvar lastClick;\r\n\r\n// this is a horrible workaround for a bug in Android where a single touch triggers two click events\r\nfunction filterClick(e, handler) {\r\n\tvar timeStamp = (e.timeStamp || (e.originalEvent && e.originalEvent.timeStamp)),\r\n\t    elapsed = lastClick && (timeStamp - lastClick);\r\n\r\n\t// are they closer together than 500ms yet more than 100ms?\r\n\t// Android typically triggers them ~300ms apart while multiple listeners\r\n\t// on the same event should be triggered far faster;\r\n\t// or check if click is simulated on the element, and if it is, reject any non-simulated events\r\n\r\n\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {\r\n\t\tstop(e);\r\n\t\treturn;\r\n\t}\r\n\tlastClick = timeStamp;\r\n\r\n\thandler(e);\r\n}\r\n\r\n// @function addListener(â€¦): this\r\n// Alias to [`L.DomEvent.on`](#domevent-on)\r\nexport {on as addListener};\r\n\r\n// @function removeListener(â€¦): this\r\n// Alias to [`L.DomEvent.off`](#domevent-off)\r\nexport {off as removeListener};\r\n","import * as DomEvent from './DomEvent';\nimport * as Util from '../core/Util';\nimport {Point} from '../geometry/Point';\nimport * as Browser from '../core/Browser';\n\n/*\n * @namespace DomUtil\n *\n * Utility functions to work with the [DOM](https://developer.mozilla.org/docs/Web/API/Document_Object_Model)\n * tree, used by Leaflet internally.\n *\n * Most functions expecting or returning a `HTMLElement` also work for\n * SVG elements. The only difference is that classes refer to CSS classes\n * in HTML and SVG classes in SVG.\n */\n\n if (!Element.prototype.matches) {\n    var ep = Element.prototype;\n \n    if (ep.webkitMatchesSelector) // Chrome <34, SF<7.1, iOS<8\n      ep.matches = ep.webkitMatchesSelector;\n \n    if (ep.msMatchesSelector) // IE9/10/11 & Edge\n      ep.matches = ep.msMatchesSelector;\n \n    if (ep.mozMatchesSelector) // FF<34\n      ep.matches = ep.mozMatchesSelector;\n }\n\n// @property TRANSFORM: String\n// Vendor-prefixed fransform style name (e.g. `'webkitTransform'` for WebKit).\nexport var TRANSFORM = testProp(\n    ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform']);\n\n// webkitTransition comes first because some browser versions that drop vendor prefix don't do\n// the same for the transitionend event, in particular the Android 4.1 stock browser\n\n// @property TRANSITION: String\n// Vendor-prefixed transform style name.\nexport var TRANSITION = testProp(\n    ['webkitTransition', 'transition', 'OTransition', 'MozTransition', 'msTransition']);\n\nexport var TRANSITION_END =\n    TRANSITION === 'webkitTransition' || TRANSITION === 'OTransition' ? TRANSITION + 'End' : 'transitionend';\n\n\n// @function get(id: String|HTMLElement): HTMLElement\n// Returns an element given its DOM id, or returns the element itself\n// if it was passed directly.\nexport function get(id) {\n    return typeof id === 'string' ? document.getElementById(id) : id;\n}\n\n// @function getStyle(el: HTMLElement, styleAttrib: String): String\n// Returns the value for a certain style attribute on an element,\n// including computed values or values set through CSS.\nexport function getStyle(el, style) {\n    var value = el.style[style] || (el.currentStyle && el.currentStyle[style]);\n\n    if ((!value || value === 'auto') && document.defaultView) {\n        var css = document.defaultView.getComputedStyle(el, null);\n        value = css ? css[style] : null;\n    }\n    return value === 'auto' ? null : value;\n}\n\n// @function create(tagName: String, className?: String, container?: HTMLElement): HTMLElement\n// Creates an HTML element with `tagName`, sets its class to `className`, and optionally appends it to `container` element.\nexport function create(tagName, className, container) {\n    var el = document.createElement(tagName);\n    el.className = className || '';\n\n    if (container) {\n        container.appendChild(el);\n    }\n    return el;\n}\n\n// @function remove(el: HTMLElement)\n// Removes `el` from its parent element\nexport function remove(el) {\n    var parent = el.parentNode;\n    if (parent) {\n        parent.removeChild(el);\n    }\n}\n\n// @function empty(el: HTMLElement)\n// Removes all of `el`'s children elements from `el`\nexport function empty(el) {\n    while (el.firstChild) {\n        el.removeChild(el.firstChild);\n    }\n}\n\n// @function toFront(el: HTMLElement)\n// Makes `el` the last child of its parent, so it renders in front of the other children.\nexport function toFront(el) {\n    el.parentNode.appendChild(el);\n}\n\n// @function toBack(el: HTMLElement)\n// Makes `el` the first child of its parent, so it renders behind the other children.\nexport function toBack(el) {\n    var parent = el.parentNode;\n    parent.insertBefore(el, parent.firstChild);\n}\n\n// @function hasClass(el: HTMLElement, name: String): Boolean\n// Returns `true` if the element's class attribute contains `name`.\nexport function hasClass(el, name) {\n    if (el.classList !== undefined) {\n        return el.classList.contains(name);\n    }\n    var className = getClass(el);\n    return className.length > 0 && new RegExp('(^|\\\\s)' + name + '(\\\\s|$)').test(className);\n}\n\n// @function addClass(el: HTMLElement, name: String)\n// Adds `name` to the element's class attribute.\nexport function addClass(el, name) {\n    if (el.classList !== undefined) {\n        var classes = Util.splitWords(name);\n        for (var i = 0, len = classes.length; i < len; i++) {\n            el.classList.add(classes[i]);\n        }\n    } else if (!hasClass(el, name)) {\n        var className = getClass(el);\n        setClass(el, (className ? className + ' ' : '') + name);\n    }\n}\n\n// @function removeClass(el: HTMLElement, name: String)\n// Removes `name` from the element's class attribute.\nexport function removeClass(el, name) {\n    if (el.classList !== undefined) {\n        el.classList.remove(name);\n    } else {\n        setClass(el, Util.trim((' ' + getClass(el) + ' ').replace(' ' + name + ' ', ' ')));\n    }\n}\n\n// @function setClass(el: HTMLElement, name: String)\n// Sets the element's class.\nexport function setClass(el, name) {\n    if (el.className.baseVal === undefined) {\n        el.className = name;\n    } else {\n        // in case of SVG element\n        el.className.baseVal = name;\n    }\n}\n\n// @function getClass(el: HTMLElement): String\n// Returns the element's class.\nexport function getClass(el) {\n    return el.className.baseVal === undefined ? el.className : el.className.baseVal;\n}\n\n// @function setOpacity(el: HTMLElement, opacity: Number)\n// Set the opacity of an element (including old IE support).\n// `opacity` must be a number from `0` to `1`.\nexport function setOpacity(el, value) {\n    if ('opacity' in el.style) {\n        el.style.opacity = value;\n    } else if ('filter' in el.style) {\n        _setOpacityIE(el, value);\n    }\n}\n\nfunction _setOpacityIE(el, value) {\n    var filter = false,\n        filterName = 'DXImageTransform.Microsoft.Alpha';\n\n    // filters collection throws an error if we try to retrieve a filter that doesn't exist\n    try {\n        filter = el.filters.item(filterName);\n    } catch (e) {\n        // don't set opacity to 1 if we haven't already set an opacity,\n        // it isn't needed and breaks transparent pngs.\n        if (value === 1) { return; }\n    }\n\n    value = Math.round(value * 100);\n\n    if (filter) {\n        filter.Enabled = (value !== 100);\n        filter.Opacity = value;\n    } else {\n        el.style.filter += ' progid:' + filterName + '(opacity=' + value + ')';\n    }\n}\n\n// @function testProp(props: String[]): String|false\n// Goes through the array of style names and returns the first name\n// that is a valid style name for an element. If no such name is found,\n// it returns false. Useful for vendor-prefixed styles like `transform`.\nexport function testProp(props) {\n    var style = document.documentElement.style;\n\n    for (var i = 0; i < props.length; i++) {\n        if (props[i] in style) {\n            return props[i];\n        }\n    }\n    return false;\n}\n\nexport function isPropertySupported(prop) {\n    var style = document.documentElement.style;\n    return prop in style;\n}\n\n// @function setTransform(el: HTMLElement, offset: Point, scale?: Number)\n// Resets the 3D CSS transform of `el` so it is translated by `offset` pixels\n// and optionally scaled by `scale`. Does not have an effect if the\n// browser doesn't support 3D CSS transforms.\nexport function setTransform(el, offset, scale) {\n    var pos = offset || new Point(0, 0);\n\n    el.style[TRANSFORM] =\n        (Browser.ie3d ?\n            'translate(' + pos.x + 'px,' + pos.y + 'px)' :\n            'translate3d(' + pos.x + 'px,' + pos.y + 'px,0)') +\n        (scale ? ' scale(' + scale + ')' : '');\n}\n\n// @function setPosition(el: HTMLElement, position: Point)\n// Sets the position of `el` to coordinates specified by `position`,\n// using CSS translate or top/left positioning depending on the browser\n// (used by Leaflet internally to position its layers).\nexport function setPosition(el, point) {\n\n    /*eslint-disable */\n    el._leaflet_pos = point;\n    /*eslint-enable */\n\n    if (Browser.any3d) {\n        setTransform(el, point);\n    } else {\n        el.style.left = point.x + 'px';\n        el.style.top = point.y + 'px';\n    }\n}\n\n// @function getPosition(el: HTMLElement): Point\n// Returns the coordinates of an element previously positioned with setPosition.\nexport function getPosition(el) {\n    // this method is only used for elements previously positioned using setPosition,\n    // so it's safe to cache the position for performance\n\n    return el._leaflet_pos || new Point(0, 0);\n}\n\n// @function disableTextSelection()\n// Prevents the user from generating `selectstart` DOM events, usually generated\n// when the user drags the mouse through a page with text. Used internally\n// by Leaflet to override the behaviour of any click-and-drag interaction on\n// the map. Affects drag interactions on the whole document.\n\n// @function enableTextSelection()\n// Cancels the effects of a previous [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection).\nexport var disableTextSelection;\nexport var enableTextSelection;\nvar _userSelect;\nif ('onselectstart' in document) {\n    disableTextSelection = function () {\n        DomEvent.on(window, 'selectstart', DomEvent.preventDefault);\n    };\n    enableTextSelection = function () {\n        DomEvent.off(window, 'selectstart', DomEvent.preventDefault);\n    };\n} else {\n    var userSelectProperty = testProp(\n        ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect']);\n\n    disableTextSelection = function () {\n        if (userSelectProperty) {\n            var style = document.documentElement.style;\n            _userSelect = style[userSelectProperty];\n            style[userSelectProperty] = 'none';\n        }\n    };\n    enableTextSelection = function () {\n        if (userSelectProperty) {\n            document.documentElement.style[userSelectProperty] = _userSelect;\n            _userSelect = undefined;\n        }\n    };\n}\n\n// @function disableImageDrag()\n// As [`L.DomUtil.disableTextSelection`](#domutil-disabletextselection), but\n// for `dragstart` DOM events, usually generated when the user drags an image.\nexport function disableImageDrag() {\n    DomEvent.on(window, 'dragstart', DomEvent.preventDefault);\n}\n\n// @function enableImageDrag()\n// Cancels the effects of a previous [`L.DomUtil.disableImageDrag`](#domutil-disabletextselection).\nexport function enableImageDrag() {\n    DomEvent.off(window, 'dragstart', DomEvent.preventDefault);\n}\n\nvar _outlineElement, _outlineStyle;\n// @function preventOutline(el: HTMLElement)\n// Makes the [outline](https://developer.mozilla.org/docs/Web/CSS/outline)\n// of the element `el` invisible. Used internally by Leaflet to prevent\n// focusable elements from displaying an outline when the user performs a\n// drag interaction on them.\nexport function preventOutline(element) {\n    while (element.tabIndex === -1) {\n        element = element.parentNode;\n    }\n    if (!element || !element.style) { return; }\n    restoreOutline();\n    _outlineElement = element;\n    _outlineStyle = element.style.outline;\n    element.style.outline = 'none';\n    DomEvent.on(window, 'keydown', restoreOutline);\n}\n\n// @function restoreOutline()\n// Cancels the effects of a previous [`L.DomUtil.preventOutline`]().\nexport function restoreOutline() {\n    if (!_outlineElement) { return; }\n    _outlineElement.style.outline = _outlineStyle;\n    _outlineElement = undefined;\n    _outlineStyle = undefined;\n    DomEvent.off(window, 'keydown', restoreOutline);\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nmodule.exports = createAssigner;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var assignValue = require('./_assignValue'),\n    copyObject = require('./_copyObject'),\n    createAssigner = require('./_createAssigner'),\n    isArrayLike = require('./isArrayLike'),\n    isPrototype = require('./_isPrototype'),\n    keys = require('./keys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own enumerable string keyed properties of source objects to the\n * destination object. Source objects are applied from left to right.\n * Subsequent sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object` and is loosely based on\n * [`Object.assign`](https://mdn.io/Object/assign).\n *\n * @static\n * @memberOf _\n * @since 0.10.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.assignIn\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * function Bar() {\n *   this.c = 3;\n * }\n *\n * Foo.prototype.b = 2;\n * Bar.prototype.d = 4;\n *\n * _.assign({ 'a': 0 }, new Foo, new Bar);\n * // => { 'a': 1, 'c': 3 }\n */\nvar assign = createAssigner(function(object, source) {\n  if (isPrototype(source) || isArrayLike(source)) {\n    copyObject(source, keys(source), object);\n    return;\n  }\n  for (var key in source) {\n    if (hasOwnProperty.call(source, key)) {\n      assignValue(object, key, source[key]);\n    }\n  }\n});\n\nmodule.exports = assign;\n","var document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\nvar keyboardAllowed = typeof Element !== 'undefined' && 'ALLOW_KEYBOARD_INPUT' in Element;\n\nvar fn = (function () {\n  var val;\n\n  var fnMap = [\n    [\n      'requestFullscreen',\n      'exitFullscreen',\n      'fullscreenElement',\n      'fullscreenEnabled',\n      'fullscreenchange',\n      'fullscreenerror'\n    ],\n    // New WebKit\n    [\n      'webkitRequestFullscreen',\n      'webkitExitFullscreen',\n      'webkitFullscreenElement',\n      'webkitFullscreenEnabled',\n      'webkitfullscreenchange',\n      'webkitfullscreenerror'\n\n    ],\n    // Old WebKit (Safari 5.1)\n    [\n      'webkitRequestFullScreen',\n      'webkitCancelFullScreen',\n      'webkitCurrentFullScreenElement',\n      'webkitCancelFullScreen',\n      'webkitfullscreenchange',\n      'webkitfullscreenerror'\n\n    ],\n    [\n      'mozRequestFullScreen',\n      'mozCancelFullScreen',\n      'mozFullScreenElement',\n      'mozFullScreenEnabled',\n      'mozfullscreenchange',\n      'mozfullscreenerror'\n    ],\n    [\n      'msRequestFullscreen',\n      'msExitFullscreen',\n      'msFullscreenElement',\n      'msFullscreenEnabled',\n      'MSFullscreenChange',\n      'MSFullscreenError'\n    ]\n  ];\n\n  var i = 0;\n  var l = fnMap.length;\n  var ret = {};\n\n  for (; i < l; i++) {\n    val = fnMap[i];\n    if (val && val[1] in document) {\n      for (i = 0; i < val.length; i++) {\n        ret[fnMap[0][i]] = val[i];\n      }\n      return ret;\n    }\n  }\n\n  return false;\n})();\n\nvar eventNameMap = {\n  change: fn.fullscreenchange,\n  error: fn.fullscreenerror\n};\n\nvar screenfull = {\n  request: function (elem) {\n    var request = fn.requestFullscreen;\n\n    elem = elem || document.documentElement;\n\n    // Work around Safari 5.1 bug: reports support for\n    // keyboard in fullscreen even though it doesn't.\n    // Browser sniffing, since the alternative with\n    // setTimeout is even worse.\n    if (/5\\.1[.\\d]* Safari/.test(navigator.userAgent)) {\n      elem[request]();\n    } else {\n      elem[request](keyboardAllowed ? Element.ALLOW_KEYBOARD_INPUT : {});\n    }\n  },\n  exit: function () {\n    document[fn.exitFullscreen]();\n  },\n  toggle: function (elem) {\n    if (this.isFullscreen) {\n      this.exit();\n    } else {\n      this.request(elem);\n    }\n  },\n  onchange: function (callback) {\n    this.on('change', callback);\n  },\n  onerror: function (callback) {\n    this.on('error', callback);\n  },\n  on: function (event, callback) {\n    var eventName = eventNameMap[event];\n    if (eventName) {\n      document.addEventListener(eventName, callback, false);\n    }\n  },\n  off: function (event, callback) {\n    var eventName = eventNameMap[event];\n    if (eventName) {\n      document.removeEventListener(eventName, callback, false);\n    }\n  },\n  raw: fn\n};\n\nObject.defineProperties(screenfull, {\n  isFullscreen: {\n    get: function () {\n      return Boolean(document[fn.fullscreenElement]);\n    }\n  },\n  element: {\n    enumerable: true,\n    get: function () {\n      return document[fn.fullscreenElement];\n    }\n  },\n  enabled: {\n    enumerable: true,\n    get: function () {\n      // Coerce to boolean in case of old WebKit\n      return Boolean(document[fn.fullscreenEnabled]);\n    }\n  }\n});\n\nexport {screenfull};","import * as Util from '../core/Util';\nimport {Evented} from '../core/Events';\n// import {Class} from '../core/Class';\nimport * as Browser from '../core/Browser';\nimport * as DomEvent from '../dom/DomEvent';\nimport * as DomUtil from '../dom/DomUtil';\n\nimport debounce from 'lodash/debounce';\nimport assign from 'lodash/assign';\n\nimport {screenfull} from '../screenfull';\n\n/*\n * @class Reader\n * @aka cozy.Map\n * @inherits Evented\n *\n * The central class of the API â€” it is used to create a book on a page and manipulate it.\n *\n * @example\n *\n * ```js\n * // initialize the map on the \"map\" div with a given center and zoom\n * var map = L.map('map', {\n *  center: [51.505, -0.09],\n *  zoom: 13\n * });\n * ```\n *\n */\n\nvar _padding = 1.0;\nexport var Reader = Evented.extend({\n  options: {\n    regions: [\n      'header',\n      'toolbar.top',\n      'toolbar.left',\n      'main',\n      'toolbar.right',\n      'toolbar.bottom',\n      'footer'\n    ],\n    metadata: {},\n    flow: 'auto',\n    engine: 'epubjs',\n    trackResize: true,\n    mobileMediaQuery: '(min-device-width : 300px) and (max-device-width : 600px)',\n    forceScrolledDocHeight: 1200,\n    rootfilePath: '',\n    text_size: 100,\n    scale: 100.0,\n    flowOptions: {},\n    theme: 'default',\n    themes: [],\n    injectStylesheet: null\n  },\n\n  initialize: function(id, options) {\n    var self = this\n\n    self._original_document_title = document.title;\n\n    if ( false && localStorage.getItem('cozy.options') ) {\n      options = assign(options, JSON.parse(localStorage.getItem('cozy.options')));\n      if ( options[this.flow] && options[this.flow].text_size ) {\n        options.text_size = options[this.flow].text_size;\n      }\n      if ( options[this.flow] && options[this.flow].scale ) {      \n        options.scale = options[this.flow].scale;\n      }\n    }\n\n    this._cozyOptions = {};\n    if ( localStorage.getItem('cozy.options') ) {\n      this._cozyOptions = JSON.parse(localStorage.getItem('cozy.options'));\n      if ( this._cozyOptions.theme ) {\n        this.options.theme = this._cozyOptions.theme;\n      }\n      // if ( this._cozyOptions.flow ) {\n      //   this.options.flow = this._cozyOptions.flow;\n      // }\n    }\n\n    options = Util.setOptions(this, options);\n\n    this._checkFeatureCompatibility();\n\n    this.metadata = this.options.metadata; // initial seed\n\n    this._initContainer(id);\n    this._initLayout();\n\n    if ( this.options.themes && this.options.themes.length > 0 ) {\n        this.options.themes.forEach(function(theme) {\n            if ( theme.href ) { return; }\n            var klass = theme.klass;\n            var rules = {};\n            for(var rule in theme.rules) {\n                var new_rule = '.' + klass;\n                if ( rule == 'body' ) { new_rule = 'body' + new_rule; }\n                else { new_rule += ' ' + rule ; }\n                rules[new_rule] = theme.rules[rule];\n            }\n            theme.rules = rules;\n        });\n    }\n\n    this._updateTheme();\n\n    // hack for https://github.com/Leaflet/Leaflet/issues/1980\n    // this._onResize = Util.bind(this._onResize, this);\n\n    this._initEvents();\n\n    this.callInitHooks();\n\n    this._mode = this.options.mode;\n  },\n\n  start: function(target, cb) {\n    var self = this;\n\n    if ( typeof(target) == 'function' && cb === undefined ) {\n      cb = target;\n      target = undefined;\n    }\n\n    self._start(target, cb);\n\n    // Util.loader.js(this.options.engine_href).then(function() {\n    //   self._start(target, cb);\n    //   self._loaded = true;\n    // })\n  },\n\n  _start: function(target, cb) {\n    var self = this;\n    target = target || 0;\n\n    // self.open(function() {\n    //   self.draw(target, cb);\n    // });\n\n    self.open(target, cb);\n  },\n\n  reopen: function(options, target) {\n    /* NOP */\n  },\n\n  saveOptions: function(options) {\n    var saved_options = {};\n    if ( localStorage.getItem('cozy.options') ) {\n      saved_options = JSON.parse(localStorage.getItem('cozy.options'));\n    }\n\n    assign(saved_options, options);\n    var key = this.metadata.layout || 'reflowable';\n    var flow = saved_options.flow;\n    if ( saved_options.flow == 'auto' ) {\n      // do not save\n      delete saved_options.flow;\n      flow = this.metadata.flow || 'paginated';\n    }\n    // key += '/' + flow;\n\n    // var key = `${this.flow}/${this.metadata.layout}`;\n    // var key = this.metadata.layout;\n    if ( saved_options.text_size || saved_options.scale ) {\n      saved_options[key] = {};\n      if ( saved_options.text_size ) {\n        saved_options[key].text_size = saved_options.text_size;\n        delete saved_options.text_size;\n      }\n      if ( saved_options.scale ) {\n        saved_options[key].scale = saved_options.scale;\n        delete saved_options.scale;\n      }\n      if ( saved_options.flow ) {\n        saved_options[key].flow = saved_options.flow;\n        delete saved_options.flow;\n      }\n    }\n\n    // saved_options[this.flow] = {}\n    // if ( saved_options.text_size ) {\n    // }\n    localStorage.setItem('cozy.options', JSON.stringify(saved_options));\n    this._cozyOptions = saved_options;\n  },\n\n  _updateTheme: function() {\n    DomUtil.removeClass(this._container, 'cozy-theme-' + ( this._container.dataset.theme || 'default' ));\n    DomUtil.addClass(this._container, 'cozy-theme-' + this.options.theme);\n    this._container.dataset.theme = this.options.theme;\n  },\n\n  draw: function(target) {\n    // NOOP\n  },\n\n  next: function() {\n    // NOOP\n  },\n\n  prev: function() {\n    // NOOP\n  },\n\n  display: function(index) {\n    // NOOP\n  },\n\n  gotoPage: function(target) {\n    // NOOP\n  },\n\n  goBack: function() {\n    history.back();\n  },\n\n  goForward: function() {\n    history.forward();\n  },\n\n  requestFullscreen: function() {\n    if ( screenfull.enabled ) {\n      // this._preResize();\n      screenfull.toggle(this._container);\n    }\n  },\n\n  _preResize: function() {\n\n  },\n\n  _initContainer: function (id) {\n    var container = this._container = DomUtil.get(id);\n\n    if (!container) {\n      throw new Error('Reader container not found.');\n    } else if (container._cozy_id) {\n      throw new Error('Reader container is already initialized.');\n    }\n\n    DomEvent.on(container, 'scroll', this._onScroll, this);\n    this._containerId = Util.stamp(container);\n  },\n\n  _initLayout: function () {\n    var container = this._container;\n\n    this._fadeAnimated = this.options.fadeAnimation && Browser.any3d;\n\n    DomUtil.addClass(container, 'cozy-reader cozy-container' +\n      (Browser.touch ? ' cozy-touch' : '') +\n      (Browser.retina ? ' cozy-retina' : '') +\n      (Browser.ielt9 ? ' cozy-oldie' : '') +\n      (Browser.safari ? ' cozy-safari' : '') +\n      (this._fadeAnimated ? ' cozy-fade-anim' : '') +\n      ' cozy-engine-' + this.options.engine +\n      ' cozy-theme-' + this.options.theme);\n\n    var position = DomUtil.getStyle(container, 'position');\n\n    this._initPanes();\n\n    if ( ! Browser.columnCount ) {\n      this.options.flow = 'scrolled-doc';\n    }\n  },\n\n  _initPanes: function () {\n    var self = this;\n\n    var panes = this._panes = {};\n\n    var l = 'cozy-';\n    var container = this._container;\n\n    var prefix = 'cozy-module-';\n\n    DomUtil.addClass(container, 'cozy-container');\n    panes['live-status'] = DomUtil.create('div', prefix + 'live-status u-screenreader', container);\n    panes['live-status'].setAttribute('aria-live', 'polite');\n    panes['top'] = DomUtil.create('div', prefix + 'top', container);\n    panes['main'] = DomUtil.create('div', prefix + 'main', container);\n    panes['bottom'] = DomUtil.create('div', prefix + 'bottom', container);\n    panes['left'] = DomUtil.create('div', prefix + 'left', panes['main']);\n    panes['right'] = DomUtil.create('div', prefix + 'right', panes['main']);\n    panes['book-cover'] = DomUtil.create('div', prefix + 'book-cover', panes['main']);\n    panes['book'] = DomUtil.create('div', prefix + 'book', panes['book-cover']);\n    panes['loader'] = DomUtil.create('div', prefix + 'book-loading', panes['book']);\n    panes['epub'] = DomUtil.create('div', prefix + 'book-epub', panes['book']);\n    this._initBookLoader();\n  },\n\n  _checkIfLoaded: function () {\n    if (!this._loaded) {\n      throw new Error('Set map center and zoom first.');\n    }\n  },\n\n  // DOM event handling\n\n  // @section Interaction events\n  _initEvents: function (remove) {\n    this._targets = {};\n    this._targets[Util.stamp(this._container)] = this;\n\n    this.tracking = function(reader) {\n      var _action = [];\n      var _last_location_start;\n      var _last_scrollTop;\n      var _reader = reader;\n      return {\n        action: function(v) {\n          if ( v ) {\n            _action = [v];\n            this.event(v);\n            // _reader.fire('trackAction', { action: v })\n          } else {\n            return _action.pop();\n          }\n        },\n\n        peek: function() {\n          return _action[0];\n        },\n\n        event: function(action, data) {\n          if ( data == null ) { data = {}; }\n          data.action = action;\n          _reader.fire(\"trackAction\", data);\n        },\n\n        pageview: function(location) {\n          var do_report = true;\n          if ( _reader.settings.flow == 'scrolled-doc' ) {\n            var scrollTop = 0;\n            if ( _reader._rendition.manager && _reader._rendition.manager.container ) {\n              scrollTop = _reader._rendition.manager.container.scrollTop;\n              // console.log(\"AHOY CHECKING SCROLLTOP\", _last_scrollTop, scrollTop, Math.abs(_last_scrollTop - scrollTop) < _reader._rendition.manager.layout.height);\n            }\n            if ( _last_scrollTop && Math.abs(_last_scrollTop - scrollTop) < _reader._rendition.manager.layout.height ) {\n              do_report = false;\n            } else {\n              _last_scrollTop = scrollTop;\n            }\n          }\n          if ( location.start != _last_location_start && do_report ) {\n            _last_location_start = location.start;\n            var tracking = { cfi: location.start, href: location.href, action: this.action()};\n            _reader.fire('trackPageview', tracking)\n            return tracking;\n          }\n          return false;\n        },\n\n        reset: function() {\n          if ( _reader.settings.flow == 'scrolled-doc' ) {\n            _last_scrollTop = null;\n          }\n        }\n      }\n    }(this);\n\n    var onOff = remove ? DomEvent.off : DomEvent.on;\n\n    // @event click: MouseEvent\n    // Fired when the user clicks (or taps) the map.\n    // @event dblclick: MouseEvent\n    // Fired when the user double-clicks (or double-taps) the map.\n    // @event mousedown: MouseEvent\n    // Fired when the user pushes the mouse button on the map.\n    // @event mouseup: MouseEvent\n    // Fired when the user releases the mouse button on the map.\n    // @event mouseover: MouseEvent\n    // Fired when the mouse enters the map.\n    // @event mouseout: MouseEvent\n    // Fired when the mouse leaves the map.\n    // @event mousemove: MouseEvent\n    // Fired while the mouse moves over the map.\n    // @event contextmenu: MouseEvent\n    // Fired when the user pushes the right mouse button on the map, prevents\n    // default browser context menu from showing if there are listeners on\n    // this event. Also fired on mobile when the user holds a single touch\n    // for a second (also called long press).\n    // @event keypress: KeyboardEvent\n    // Fired when the user presses a key from the keyboard while the map is focused.\n    // onOff(this._container, 'click dblclick mousedown mouseup ' +\n    //   'mouseover mouseout mousemove contextmenu keypress', this._handleDOMEvent, this);\n\n    // if (this.options.trackResize) {\n    //   var self = this;\n    //   var fn = debounce(function(){ self.invalidateSize({}); }, 150);\n    //   onOff(window, 'resize', fn, this);\n    // }\n\n    if (Browser.any3d && this.options.transform3DLimit) {\n      (remove ? this.off : this.on).call(this, 'moveend', this._onMoveEnd);\n    }\n\n    var self = this;\n    if (screenfull.enabled) {\n      screenfull.on('change', function() {\n        // setTimeout(function() {\n        //   self.invalidateSize({});\n        // }, 100);\n        self.fire('fullscreenchange', { isFullscreen: screenfull.isFullscreen });\n        console.log('AHOY: Am I fullscreen?', screenfull.isFullscreen ? 'YES' : 'NO');\n      });\n    }\n\n    self.on(\"updateLocation\", function(location) {\n      // possibly invoke a pageview event\n      var tracking;\n      if ( tracking = self.tracking.pageview(location) ) {\n        if ( location.percentage ) {\n          var p = Math.ceil(location.percentage * 100);\n          document.title = `${p}% - ${self._original_document_title}`;\n        }\n        var tmp_href = window.location.href.split(\"#\");\n        tmp_href[1] = location.start.substr(8, location.start.length - 8 - 1);\n        var context = [{ cfi: location.start }, '', tmp_href.join('#')];\n\n        if ( tracking.action && tracking.action.match(/\\/go\\/link/) ) {\n          // console.log(\"AHOY ACTION\", tracking.action, context[0].cfi);\n          history.pushState.apply(history, context);\n        } else {\n          history.replaceState.apply(history, context);\n        }\n      }\n    })\n\n    window.addEventListener('popstate', function(event) {\n      console.log(\"AHOY POP STATE\", event)\n      if ( event.isTrusted && event.state != null ) {\n        if ( event.state.cfi == self.__last_state_cfi ) {\n          console.log(\"AHOY POP STATE IGNORE\", self.__last_state_cfi);\n          event.preventDefault();\n          return;\n        }\n        self.__last_state_cfi = event.state.cfi;\n        if ( event.state == null || event.state.cfi == null ) {\n          $log.innerHTML += `<li>NULL</li>`;\n          event.preventDefault();\n          return;\n        }\n        self.gotoPage(event.state.cfi);\n      }\n    })\n\n    document.addEventListener('keydown', function(event) {\n      var keyName = event.key;\n      var target = event.target;\n\n      // check if the activeElement is \".special-panel\"\n      var check = document.activeElement;\n      while ( check.localName != 'body' ) {\n        if ( check.classList.contains('special-panel') ) {\n          return;\n        }\n        check = check.parentElement;\n      }\n\n      var IGNORE_TARGETS = [ 'input', 'textarea' ];\n      if ( IGNORE_TARGETS.indexOf(target.localName) >= 0 ) {\n        return;\n      }\n\n      self.fire('keyDown', { keyName: keyName, shiftKey: event.shiftKey });\n    });\n\n    self.on('keyDown', function(data) {\n      switch(data.keyName) {\n        case 'ArrowRight':\n        case 'PageDown':\n          self.next();\n          break;\n        case 'ArrowLeft':\n        case 'PageUp':\n          self.prev();\n          break;\n        case 'Home':\n          self._scroll('HOME');\n          break;\n        case 'End':\n          self._scroll('END')\n          break;\n      }\n    });\n  },\n\n  // _onResize: function() {\n  //   if ( ! this._resizeRequest ) {\n  //     this._resizeRequest = Util.requestAnimFrame(function() {\n  //       this.invalidateSize({})\n  //     }, this);\n  //   }\n  // },\n\n  _onScroll: function () {\n    this._container.scrollTop  = 0;\n    this._container.scrollLeft = 0;\n  },\n\n  _handleDOMEvent: function (e) {\n    if (!this._loaded || DomEvent.skipped(e)) { return; }\n\n    var type = e.type === 'keypress' && e.keyCode === 13 ? 'click' : e.type;\n\n    if (type === 'mousedown') {\n      // prevents outline when clicking on keyboard-focusable element\n      DomUtil.preventOutline(e.target || e.srcElement);\n    }\n\n    this._fireDOMEvent(e, type);\n  },\n\n  _fireDOMEvent: function (e, type, targets) {\n\n    if (e.type === 'click') {\n      // Fire a synthetic 'preclick' event which propagates up (mainly for closing popups).\n      // @event preclick: MouseEvent\n      // Fired before mouse click on the map (sometimes useful when you\n      // want something to happen on click before any existing click\n      // handlers start running).\n      var synth = Util.extend({}, e);\n      synth.type = 'preclick';\n      this._fireDOMEvent(synth, synth.type, targets);\n    }\n\n    if (e._stopped) { return; }\n\n    // Find the layer the event is propagating from and its parents.\n    targets = (targets || []).concat(this._findEventTargets(e, type));\n\n    if (!targets.length) { return; }\n\n    var target = targets[0];\n    if (type === 'contextmenu' && target.listens(type, true)) {\n      DomEvent.preventDefault(e);\n    }\n\n    var data = {\n      originalEvent: e\n    };\n\n    if (e.type !== 'keypress') {\n      var isMarker = (target.options && 'icon' in target.options);\n      data.containerPoint = isMarker ?\n          this.latLngToContainerPoint(target.getLatLng()) : this.mouseEventToContainerPoint(e);\n      data.layerPoint = this.containerPointToLayerPoint(data.containerPoint);\n      data.latlng = isMarker ? target.getLatLng() : this.layerPointToLatLng(data.layerPoint);\n    }\n\n    for (var i = 0; i < targets.length; i++) {\n      targets[i].fire(type, data, true);\n      if (data.originalEvent._stopped ||\n        (targets[i].options.nonBubblingEvents && Util.indexOf(targets[i].options.nonBubblingEvents, type) !== -1)) { return; }\n    }\n  },\n\n  getFixedBookPanelSize: function() {\n    // have to make the book\n    var style = window.getComputedStyle(this._panes['book']);\n    var h = this._panes['book'].clientHeight - parseFloat(style.paddingTop) - parseFloat(style.paddingBottom);\n    var w = this._panes['book'].clientWidth - parseFloat(style.paddingRight) - parseFloat(style.paddingLeft);\n    return { height: Math.floor(h * 1.00), width: Math.floor(w * 1.00) };\n  },\n\n  invalidateSize: function(options) {\n    // TODO: IS THIS EVER USED?\n    var self = this;\n\n    if ( ! self._drawn ) { return; }\n\n    Util.cancelAnimFrame(this._resizeRequest);\n\n    if (! this._loaded) { return this; }\n\n    this.fire('resized');\n  },\n\n  _resizeBookPane: function() {\n\n  },\n\n  _setupHooks: function() {\n\n  },\n\n  _checkFeatureCompatibility: function() {\n    if ( ! DomUtil.isPropertySupported('columnCount') || this._checkMobileDevice() ) {\n      // force\n      this.options.flow = 'scrolled-doc';\n    }\n    if ( this._checkMobileDevice() ) {\n      this.options.text_size = 120;\n    }\n  },\n\n  _checkMobileDevice: function() {\n    if ( this._isMobile === undefined ) {\n      this._isMobile = false;\n      if ( this.options.mobileMediaQuery ) {\n        this._isMobile = window.matchMedia(this.options.mobileMediaQuery).matches;\n      }\n    }\n    return this._isMobile;\n  },\n\n  _enableBookLoader: function(delay=0) {\n    var self = this;\n    self._clearBookLoaderTimeout();\n    if ( delay < 0 ) {\n      delay = 0;\n      self._force_progress = true;\n    }\n    self._loader_timeout = setTimeout(function() {\n      self._panes['loader'].style.display = 'block';\n    }, delay);\n  },\n\n  _disableBookLoader: function(force=false) {\n    var self = this;\n    self._clearBookLoaderTimeout();\n    if ( ! self._force_progress || force ) {\n      self._panes['loader'].style.display = 'none';\n      self._force_progress = false;\n      self._panes['loader-status'].innerHTML = '';\n    }\n  },\n\n  _clearBookLoaderTimeout: function() {\n    var self = this;\n    if ( self._loader_timeout ) {\n      clearTimeout(self._loader_timeout);\n      self._loader_timeout = null;\n    }\n  },\n\n  _initBookLoader: function() {\n    // is this not awesome?\n    var template = this.options.loader_template || this.loaderTemplate();\n\n    var body = new DOMParser().parseFromString(template, \"text/html\").body;\n    while ( body.children.length ) {\n      this._panes['loader'].appendChild(body.children[0]);\n    }\n    this._panes['loader-status'] = DomUtil.create('div', 'cozy-module-book-loading-status', this._panes['loader']);\n  },\n\n  loaderTemplate: function() {\n    return `<div class=\"cozy-loader-spinner\">\n    <div class=\"spinner-backdrop spinner-backdrop--1\"></div>\n    <div class=\"spinner-backdrop spinner-backdrop--2\"></div>\n    <div class=\"spinner-backdrop spinner-backdrop--3\"></div>\n    <div class=\"spinner-backdrop spinner-backdrop--4\"></div>\n    <div class=\"spinner-quarter spinner-quarter--1\"></div>\n    <div class=\"spinner-quarter spinner-quarter--2\"></div>\n    <div class=\"spinner-quarter spinner-quarter--3\"></div>\n    <div class=\"spinner-quarter spinner-quarter--4\"></div>\n  </div>`;\n  },\n\n  updateLiveStatus: function(message) {\n    if ( ! this._panes['live-status'] ) { return ; }\n    if ( message != this._last_message ) {\n      if ( this._last_timer ) { clearTimeout(this._last_timer); this._last_timer = null; }\n      var clearDelay = 500;\n      setTimeout(() => {\n        this._panes['live-status'].innerText = message;\n        this._last_message = message;\n        console.log(\"-- status:\", message);\n      }, 50);\n      this._last_timer = setTimeout(() => {\n        this._panes['live-status'].innerText = '';\n      }, clearDelay);\n    }\n  },\n\n  EOT: true\n});\n\nObject.defineProperty(Reader.prototype, 'metadata', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return this._metadata;\n  },\n\n  set: function(data) {\n    this._metadata = Util.extend({}, data, this.options.metadata);\n  }\n});\n\nObject.defineProperty(Reader.prototype, 'flow', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return ( this.options.flow == 'auto' ? 'paginated' : this.options.flow );\n  }\n});\n\nObject.defineProperty(Reader.prototype, 'flowOptions', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n\n    var flow = this.flow;\n    if ( ! this.options.flowOptions[flow] ) {\n      this.options.flowOptions[flow] = {};\n    }\n    if ( ! this.options.flowOptions[flow].text_size ) {\n      this.options.flowOptions[flow].text_size = this.options.text_size;\n    }\n    if ( ! this.options.flowOptions[flow].scale ) {\n      this.options.flowOptions[flow].scale = this.options.scale;\n    }\n\n    return this.options.flowOptions[flow]\n  }\n});\n\nexport function createReader(id, options) {\n  return new Reader(id, options);\n}\n","import {Class} from '../core/Class';\nimport {Reader} from '../reader/Reader';\nimport * as Util from '../core/Util';\nimport * as DomUtil from '../dom/DomUtil';\n\n/*\n * @class Control\n * @aka L.Control\n * @inherits Class\n *\n * L.Control is a base class for implementing reader controls. Handles regioning.\n * All other controls extend from this class.\n */\n\nexport var Control = Class.extend({\n    // @section\n    // @aka Control options\n    options: {\n        // @option region: String = 'topright'\n        // The region of the control (one of the reader corners). Possible values are `'topleft'`,\n        // `'topright'`, `'bottomleft'` or `'bottomright'`\n    },\n\n    initialize: function (options) {\n        Util.setOptions(this, options);\n        if ( options.container ) {\n            this._container = options.container;\n            this._locked = true;\n        }\n        this._id = (new Date()).getTime() + '-' + parseInt(Math.random((new Date()).getTime()) * 1000, 10);\n    },\n\n    /* @section\n     * Classes extending L.Control will inherit the following methods:\n     *\n     * @method getRegion: string\n     * Returns the region of the control.\n     */\n    getRegion: function () {\n        return this.options.region;\n    },\n\n    // @method setRegion(region: string): this\n    // Sets the region of the control.\n    setRegion: function (region) {\n        var reader = this._reader;\n\n        if (reader) {\n            reader.removeControl(this);\n        }\n\n        this.options.region = region;\n\n        if (reader) {\n            reader.addControl(this);\n        }\n\n        return this;\n    },\n\n    // @method getContainer: HTMLElement\n    // Returns the HTMLElement that contains the control.\n    getContainer: function () {\n        return this._container;\n    },\n\n    // @method addTo(reader: Map): this\n    // Adds the control to the given reader.\n    addTo: function (reader) {\n        this.remove();\n        this._reader = reader;\n\n        var container = this._container = this.onAdd(reader);\n\n        DomUtil.addClass(container, 'cozy-control');\n\n        if ( ! this._locked ) {\n            var region = this.getRegion();\n            var area = reader.getControlRegion(region);\n            area.appendChild(container);\n        }\n\n        return this;\n    },\n\n    // @method remove: this\n    // Removes the control from the reader it is currently active on.\n    remove: function () {\n        if (!this._reader) {\n            return this;\n        }\n\n        if (! this._container) {\n            return this;\n        }\n\n        if ( ! this._locked ) {\n            DomUtil.remove(this._container);\n        }\n\n        if (this.onRemove) {\n            this.onRemove(this._reader);\n        }\n\n        this._reader = null;\n\n        return this;\n    },\n\n    _refocusOnMap: function (e) {\n        // if reader exists and event is not a keyboard event\n        if (this._reader && e && e.screenX > 0 && e.screenY > 0) {\n            this._reader.getContainer().focus();\n        }\n    },\n\n    _className: function(widget) {\n        var className = [ 'cozy-control' ];\n        if ( this.options.direction ) {\n            className.push('cozy-control-' + this.options.direction);\n        }\n        if ( widget ) {\n            className.push('cozy-control-' + widget);\n        }\n        return className.join(' ');\n    }\n});\n\nexport var control = function (options) {\n    return new Control(options);\n};\n\n/* @section Extension methods\n * @uninheritable\n *\n * Every control should extend from `L.Control` and (re-)implement the following methods.\n *\n * @method onAdd(reader: Map): HTMLElement\n * Should return the container DOM element for the control and add listeners on relevant reader events. Called on [`control.addTo(reader)`](#control-addTo).\n *\n * @method onRemove(reader: Map)\n * Optional method. Should contain all clean up code that removes the listeners previously added in [`onAdd`](#control-onadd). Called on [`control.remove()`](#control-remove).\n */\n\n/* @namespace Map\n * @section Methods for Layers and Controls\n */\nReader.include({\n    // @method addControl(control: Control): this\n    // Adds the given control to the reader\n    addControl: function (control) {\n        control.addTo(this);\n        return this;\n    },\n\n    // @method removeControl(control: Control): this\n    // Removes the given control from the reader\n    removeControl: function (control) {\n        control.remove();\n        return this;\n    },\n\n    getControlContainer: function() {\n        var l = 'cozy-';\n        if ( ! this._controlContainer ) {\n            this._controlContainer =\n                DomUtil.create('div', l + 'control-container', this._container);\n        }\n        return this._controlContainer;\n    },\n\n    getControlRegion: function (target) {\n\n        if ( ! this._panes[target] ) {\n            // target is dot-delimited string\n            // first dot is the panel\n            var parts = target.split('.');\n            var tmp = [];\n            var parent = this._container;\n            var x = 0;\n            while ( parts.length ) {\n                var slug = parts.shift();\n                tmp.push(slug);\n                var panel = tmp.join(\".\");\n                var className = 'cozy-panel-' + slug;\n                if ( ! this._panes[panel] ) {\n                    this._panes[panel] = DomUtil.create('div', className, parent);\n                }\n                parent = this._panes[panel];\n                x += 1;\n                if ( x > 100 ) { break; }\n            }\n        }\n        return this._panes[target];\n    },\n\n    getControlRegion_1: function (target) {\n\n        var tmp = target.split('.');\n        var region = tmp.shift();\n        var slot = tmp.pop() || '-slot';\n\n        var container = this._panes[region];\n        if ( ! this._panes[target] ) {\n            var className = 'cozy-' + region + '--item cozy-slot-' + slot\n            if ( ! this._panes[region + '.' + slot] ) {\n                var div = DomUtil.create('div', className);\n                if ( slot == 'left' || slot == 'bottom' ) {\n                    var childElement = this._panes[region].firstChild;\n                    this._panes[region].insertBefore(div, childElement);\n                } else {\n                    this._panes[region].appendChild(div);\n                }\n                this._panes[region + '.' + slot] = div;\n            }\n            className = this._classify(tmp);\n            this._panes[target] = DomUtil.create('div', className, this._panes[region + '.' + slot]);\n        }\n\n        return this._panes[target];\n    },\n\n    _classify: function(tmp) {\n        var l = 'cozy-';\n        var className = [];\n        for(var i in tmp) {\n            className.push(l + tmp[i]);\n        }\n        className = className.join(' ');\n        return className;\n    },\n\n    _clearControlRegion: function () {\n        for (var i in this._controlRegions) {\n            DomUtil.remove(this._controlRegions[i]);\n        }\n        DomUtil.remove(this._controlContainer);\n        delete this._controlRegions;\n        delete this._controlContainer;\n    }\n});\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nvar PageControl = Control.extend({\n  onAdd: function(reader) {\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n      container = DomUtil.create('div', className),\n\n      this._control  = this._createButton(this._fill(options.html || options.label), this._fill(options.label),\n              className, container);\n    }\n    this._bindEvents();\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    return link;\n  },\n\n  _bindEvents: function() {\n    var self = this;\n    DomEvent.disableClickPropagation(this._control);\n    DomEvent.on(this._control, 'click', DomEvent.stop);\n    DomEvent.on(this._control, 'click', this._action, this);\n\n    this._reader.on('reopen', function(data) {\n      // update the button text / titles\n      var html = self.options.html || self.options.label;\n      self._control.innerHTML = self._fill(html);\n      self._control.setAttribute('title', self._fill(self.options.label));\n      self._control.setAttribute('aria-label', self._fill(self.options.label));\n    });\n\n  },\n\n  _unit: function() {\n    return ( this._reader.options.flow == 'scrolled-doc' ) ? 'Section' : 'Page';\n  },\n\n  _fill: function(s) {\n    var unit = this._unit();\n    return s.replace(/\\$\\{unit\\}/g, unit);\n  },\n\n  _label: function() {\n    return this.options.label + \" \" + ( this._reader.options.flow == 'scrolled-doc' ) ? 'Section' : 'Page';\n  },\n\n  EOT: true\n});\n\nexport var PagePrevious = PageControl.extend({\n  options: {\n    region: 'edge.left',\n    direction: 'previous',\n    label: 'Previous ${unit}',\n    html: '<i class=\"icon-chevron-left oi\" data-glyph=\"chevron-left\" title=\"Previous ${unit}\" aria-hidden=\"true\"></i>'\n  },\n\n  _action: function(e) {\n    this._reader.prev();\n  }\n});\n\nexport var PageNext = PageControl.extend({\n  options: {\n    region: 'edge.right',\n    direction: 'next',\n    label: 'Next ${unit}',\n    html: '<i class=\"icon-chevron-right oi\" data-glyph=\"chevron-right\" title=\"Next ${unit}\" aria-hidden=\"true\"></i>'\n  },\n\n  _action: function(e) {\n    this._reader.next();\n  }\n});\n\nexport var PageFirst = PageControl.extend({\n  options: {\n    direction: 'first',\n    label: 'First ${unit}'\n  },\n  _action: function(e) {\n      this._reader.first();\n  }\n});\n\nexport var PageLast = PageControl.extend({\n  options: {\n    direction: 'last',\n    label: 'Last ${unit}'\n  },\n  _action: function(e) {\n      this._reader.last();\n  }\n});\n\nexport var pageNext = function(options) {\n  return new PageNext(options);\n}\n\nexport var pagePrevious = function(options) {\n  return new PagePrevious(options);\n}\n\nexport var pageFirst = function(options) {\n  return new PageFirst(options);\n}\n\nexport var pageLast = function(options) {\n  return new PageLast(options);\n}\n","import {Class} from '../core/Class';\nimport {Reader} from '../reader/Reader';\nimport * as Util from '../core/Util';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nimport assign from 'lodash/assign';\n\nvar activeModal;\nvar dismissModalListener = false;\n\n// from https://github.com/ghosh/micromodal/blob/master/src/index.js\nconst FOCUSABLE_ELEMENTS = [\n    'a[href]',\n    'area[href]',\n    'input:not([disabled]):not([type=\"hidden\"])',\n    'select:not([disabled])',\n    'textarea:not([disabled])',\n    'button:not([disabled])',\n    'iframe',\n    'object',\n    'embed',\n    '[contenteditable]',\n    '[tabindex]:not([tabindex^=\"-\"])'\n  ];\n\nconst ACTIONABLE_ELEMENTS = [\n    'a[href]',\n    'area[href]',\n    'input[type=\"submit\"]:not([disabled])',\n    'button:not([disabled])'\n  ];\n\nexport var Modal = Class.extend({\n  options: {\n    // @option region: String = 'topright'\n    // The region of the control (one of the reader edges). Possible values are `'left' ad 'right'`\n    region: 'left',\n    fraction: 0,\n    width: null,\n    className: {},\n    actions: null,\n    callbacks: { onShow: function() {}, onClose: function() {} },\n    handlers: {}\n  },\n\n  initialize: function (options) {\n    options = Util.setOptions(this, options);\n    this._id = (new Date()).getTime() + '-' + parseInt(Math.random((new Date()).getTime()) * 1000, 10);\n    this._initializedEvents = false;\n    this.callbacks = assign({}, this.options.callbacks);\n    this.actions = this.options.actions ? assign({}, this.options.actions) : null;\n    this.handlers = assign({}, this.options.handlers);\n    if ( typeof(this.options.className) == 'string' ) {\n      this.options.className = { container: this.options.className };\n    }\n  },\n\n  addTo: function(reader) {\n    var self = this;\n    this._reader = reader;\n    var template = this.options.template;\n\n    var panelHTML = `<div class=\"cozy-modal modal-slide ${this.options.region || 'left'}\" id=\"modal-${this._id}\" aria-labelledby=\"modal-${this._id}-title\" role=\"dialog\" aria-describedby=\"modal-${this._id}-content\" aria-hidden=\"true\">\n      <div class=\"modal__overlay\" tabindex=\"-1\" data-modal-close>\n        <div class=\"modal__container ${this.options.className.container ? this.options.className.container : ''}\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-${this._id}-title\" aria-describedby=\"modal-${this._id}-content\" id=\"modal-${this._id}-container\">\n          <div role=\"document\">\n            <header class=\"modal__header\">\n              <h3 class=\"modal__title\" id=\"modal-${this._id}-title\">${this.options.title}</h3>\n              <button class=\"modal__close\" aria-label=\"Close modal\" aria-controls=\"modal-${this._id}-container\" data-modal-close></button>\n            </header>\n            <main class=\"modal__content ${this.options.className.main ? this.options.className.main : ''}\" id=\"modal-${this._id}-content\">\n              ${template}\n            </main>`;\n\n    if ( this.options.actions ) {\n      panelHTML += '<footer class=\"modal__footer\">'\n      for(var i in this.options.actions) {\n        var action = this.options.actions[i];\n        var button_cls = action.className || 'button--default';\n        panelHTML += `<button id=\"action-${this._id}-${i}\" class=\"button button--lg ${button_cls}\">${action.label}</button>`;\n      }\n      panelHTML += '</footer>';\n    }\n\n    panelHTML += '</div></div></div></div>';\n\n    var body = new DOMParser().parseFromString(panelHTML, \"text/html\").body;\n\n    this.modal = reader._container.appendChild(body.children[0]);\n    this._container = this.modal; // compatibility\n\n    this.container = this.modal.querySelector('.modal__container');\n    this._bindEvents();\n    return this;\n  },\n\n  _bindEvents: function() {\n    var self = this;\n    this.onClick = this.onClick.bind(this);\n    this.onKeydown = this.onKeydown.bind(this);\n    this.onModalTransition = this.onModalTransition.bind(this);\n\n    this.modal.addEventListener('transitionend', function() {\n    }.bind(this));\n\n    // bind any actions\n    if ( this.actions ) {\n      for(var i in this.actions) {\n        let action = this.actions[i];\n        let button_id = '#action-' + this._id + '-' + i;\n        let button = this.modal.querySelector(button_id);\n        if ( button ) {\n          DomEvent.on(button, 'click', function(event) {\n            event.preventDefault();\n            action.callback(event);\n            if ( action.close ) {\n              self.closeModal();\n            }\n          })\n        }\n      }\n    }\n  },\n\n  deactivate: function() {\n    this.closeModal();\n  },\n\n  closeModal: function() {\n    var self = this;\n    this.modal.setAttribute('aria-hidden', 'true');\n    this.removeEventListeners();\n    if ( this.activeElement ) {\n      this.activeElement.focus();\n    }\n    this.callbacks.onClose(this.modal);\n  },\n\n  showModal: function() {\n    this.activeElement = document.activeElement\n    this._resize();\n    this.modal.setAttribute('aria-hidden', 'false')\n    this.setFocusToFirstNode()\n    this.addEventListeners()\n    this.callbacks.onShow(this.modal)\n  },\n\n  activate: function() {\n    return this.showModal();\n    var self = this;\n    activeModal = this;\n    DomUtil.addClass(self._reader._container, 'st-modal-activating');\n    this._resize();\n    DomUtil.addClass(this._reader._container, 'st-modal-open');\n    setTimeout(function() {\n      DomUtil.addClass(self._container, 'active');\n      DomUtil.removeClass(self._reader._container, 'st-modal-activating');\n      self._container.setAttribute('aria-hidden', 'false');\n      self.setFocusToFirstNode();\n    }, 25);\n  },\n\n  addEventListeners: function () {\n    // --- do we need touch listeners?\n    // this.modal.addEventListener('touchstart', this.onClick)\n    // this.modal.addEventListener('touchend', this.onClick)\n    this.modal.addEventListener('click', this.onClick)\n    document.addEventListener('keydown', this.onKeydown)\n    'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend'.split(' ').forEach(function(event) {\n      this.modal.addEventListener(event, this.onModalTransition);\n    }.bind(this))\n  },\n\n  removeEventListeners: function () {\n    this.modal.removeEventListener('touchstart', this.onClick)\n    this.modal.removeEventListener('click', this.onClick)\n    'webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend'.split(' ').forEach(function(event) {\n      this.modal.removeEventListener(event, this.onModalTransition);\n    }.bind(this))\n    document.removeEventListener('keydown', this.onKeydown)\n  },\n\n  _resize: function() {\n    var container = this._reader._container;\n    this.container.style.height = container.offsetHeight + 'px';\n    // console.log(\"AHOY MODAL\", this.container.style.height);\n    if ( ! this.options.className.container  ) {\n      this.container.style.width = this.options.width || parseInt(container.offsetWidth * this.options.fraction) + 'px';\n    }\n\n    var header = this.container.querySelector('header');\n    var footer = this.container.querySelector('footer');\n    var main = this.container.querySelector('main');\n    var height = this.container.clientHeight - header.clientHeight;\n    if ( footer ) {\n      height -= footer.clientHeight;\n    }\n    main.style.height = height + 'px';\n  },\n\n  getFocusableNodes: function() {\n    const nodes = this.modal.querySelectorAll(FOCUSABLE_ELEMENTS);\n    return Object.keys(nodes).map((key) => nodes[key]);\n  },\n\n  setFocusToFirstNode: function() {\n    var focusableNodes = this.getFocusableNodes();\n    if ( focusableNodes.length ) {\n      focusableNodes[0].focus();\n    } else {\n      activeModal._container.focus();\n    }\n  },\n\n  getActionableNodes: function() {\n    const nodes = this.modal.querySelectorAll(ACTIONABLE_ELEMENTS);\n    return Object.keys(nodes).map((key) => nodes[key]);\n  },\n\n  onKeydown: function(event) {\n    if ( event.keyCode == 27 ) { this.closeModal(); }\n    if ( event.keyCode == 9 ) {\n      this.maintainFocus(event);\n    }\n  },\n\n  onClick: function(event) {\n\n    var closeAfterAction = false;\n    var target = event.target;\n\n    // As far as I can tell, the code below isn't catching direct clicks on\n    // items with class='data-modal-close' as they're not ACTIONABLE_ELEMENTS.\n    // Adding them to ACTIONABLE_ELEMENTS causes undesirable behavior where\n    // their child items also close the modal thanks to the loop below.\n    // Children of .modal__overlay include the modal header, border area and\n    // padding. We don't want clicks on these closing the modal.\n    // Just close the modal now for direct clicks on a '.data-modal-close'.\n    if (target.hasAttribute('data-modal-close')) {\n      this.fire('closed');\n      this.closeModal();\n      return;\n    }\n\n    // if the target isn't an actionable type, walk the DOM until\n    // one is found\n    var actionableNodes = this.getActionableNodes();\n    while ( actionableNodes.indexOf(target) < 0 && target != this.modal ) {\n      target = target.parentElement;\n    }\n\n    // no target found, punt\n    if ( actionableNodes.indexOf(target) < 0 ) {\n      return;\n    }\n\n    if (this.handlers.click) {\n      var did_match = false;\n      for(var selector in this.handlers.click) {\n        if ( target.matches(selector) ) {\n          closeAfterAction = this.handlers.click[selector](this, target);\n          break;\n        }\n      }\n    }\n\n    if (closeAfterAction || target.hasAttribute('data-modal-close')) this.closeModal();\n\n    event.preventDefault();\n  },\n\n  onModalTransition: function(event) {\n    if ( this.modal.getAttribute('aria-hidden') == 'true' ) {\n      this._reader.fire('modal-closed');\n    } else {\n      this._reader.fire('modal-opened');\n    }\n  },\n\n  on: function(event, selector, handler) {\n    if (! this.handlers[event] ) {\n      this.handlers[event] = {};\n    }\n    if (typeof(selector) == 'function') {\n      handler = selector;\n      selector = '*';\n    }\n    this.handlers[event][selector] = handler;\n  },\n\n  fire: function(event) {\n    if ( this.handlers[event] && this.handlers[event]['*'] ) {\n      this.handlers[event]['*'](this);\n    }\n  },\n\n  maintainFocus: function(event) {\n    var focusableNodes = this.getFocusableNodes();\n    var focusedItemIndex = focusableNodes.indexOf(document.activeElement);\n    if (event.shiftKey && focusedItemIndex === 0) {\n      focusableNodes[focusableNodes.length - 1].focus()\n      event.preventDefault()\n    }\n\n    if (!event.shiftKey && focusedItemIndex === focusableNodes.length - 1) {\n      focusableNodes[0].focus()\n      event.preventDefault()\n    }\n  },\n\n  update: function(options) {\n    if ( options.title ) {\n      this.options.title = options.title;\n      var titleEl = this.container.querySelector('.modal__title');\n      titleEl.innerText = options.title;\n    }\n\n    if (options.fraction) {\n      this.options.fraction = options.fraction;\n      this.container.style.width = parseInt(this.container.offsetWidth * this.options.fraction) + 'px';\n    }\n  },\n\n  EOT: true\n});\n\nReader.include({\n  modal: function (options) {\n    var modal = new Modal(options);\n    return modal.addTo(this);\n    // return this;\n  },\n\n  popup: function(options) {\n    options = assign({title: 'Info', fraction: 1.0}, options);\n\n    if ( ! this._popupModal ) {\n      this._popupModal = this.modal({\n        title: options.title,\n        region: 'full',\n        template: '<div style=\"height: 100%; width: 100%\"></div>',\n        fraction: options.fraction || 1.0,\n        actions: [ \n            { label: 'OK', callback: function(event) { }, close: true },\n        ]\n      })\n    } else {\n      this._popupModal.update({ title: options.title, fraction: options.fraction });\n    }\n\n    var iframe;\n    var modalDiv = this._popupModal.container.querySelector('main > div');\n    var iframe = modalDiv.querySelector('iframe');\n    if ( iframe ) {\n      modalDiv.removeChild(iframe);\n    }\n    iframe = document.createElement('iframe');\n    iframe.style.width = '100%';\n    iframe.style.height = '100%';\n    iframe = modalDiv.appendChild(iframe);\n\n    if ( options.onLoad ) {\n      iframe.addEventListener('load', function() {\n        options.onLoad(iframe.contentDocument, this._popupModal);\n      }.bind(this));\n    }\n\n    if ( options.srcdoc ) {\n      if (\"srcdoc\" in iframe) {\n        iframe.srcdoc = options.srcdoc;\n      } else {\n        iframe.contentDocument.open();\n        iframe.contentDocument.write(options.srcdoc);\n        iframe.contentDocument.close();\n      }\n    } else if ( options.href ) {\n      iframe.setAttribute('src', options.href);\n    }\n\n    this._popupModal.activate();\n\n  },\n\n  EOT: true\n});\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport {Modal} from './Modal';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Contents = Control.extend({\n\n  defaultTemplate: `<button class=\"button--sm\" data-toggle=\"open\" aria-label=\"Table of Contents\"><i class=\"icon-menu oi\" data-glyph=\"menu\" title=\"Table of Contents\" aria-hidden=\"true\"></i></button>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    this._control.setAttribute('id', 'action-' + this._id);\n    container.style.position = 'relative';\n\n    this._bindEvents();\n\n    return container;\n  },\n\n  _bindEvents() {\n    var self = this;\n    \n    this._reader.on('updateContents', function(data) {\n\n      DomEvent.on(this._control, 'click', function(event) {\n        event.preventDefault();\n        self._goto_interval = false;\n        self._reader.tracking.action('contents/open');\n        self._modal.activate();\n      }, this);\n\n      this._modal = this._reader.modal({\n        template: '<ul></ul>',\n        title: 'Contents',\n        region: 'left',\n        className: 'cozy-modal-contents',\n        callbacks: {\n          onShow: function() {},\n          onClose: function (modal) {\n          if (self._goto_interval) {\n            self._reader.rendition.manager.container.setAttribute(\"tabindex\", 0);\n            self._reader.rendition.manager.container.focus();\n          }\n        }\n      }});\n\n      this._modal.on('click', 'a[href]', function(modal, target) {\n        target = target.getAttribute('data-href');\n        this._goto_interval = true;\n        this._reader.tracking.action('contents/go/link');\n        this._reader.gotoPage(target);\n        return true;\n      }.bind(this));\n\n      this._modal.on('closed', function() {\n        self._reader.tracking.action('contents/close');\n      });\n\n      this._setupSkipLink();\n\n      var parent = self._modal._container.querySelector('ul');\n      // var s = data.toc.filter(function(value) { return value.parent == null }).map(function(value) { return [ value, 0, parent ] });\n      // while ( s.length ) {\n      //   var tuple = s.shift();\n      //   var chapter = tuple[0];\n      //   var tabindex = tuple[1];\n      //   var parent = tuple[2];\n\n      //   var option = self._createOption(chapter, tabindex, parent);\n      //   data.toc.filter(function(value) { return value.parent == chapter.id }).reverse().forEach(function(chapter_) {\n      //     s.unshift([chapter_, tabindex + 1, option]);\n      //   });\n      // }\n      var _process = function(items, tabindex, parent) {\n        items.forEach(function(item) {\n          var option = self._createOption(item, tabindex, parent);\n          if ( item.subitems && item.subitems.length ) {\n            _process(item.subitems, tabindex + 1, option);\n          }\n        })\n      };\n      _process(data.toc, 0, parent);\n    }.bind(this))\n  },\n\n  _createOption(chapter, tabindex, parent) {\n\n    function pad(value, length) {\n        return (value.toString().length < length) ? pad(\"-\"+value, length):value;\n    }\n    var option = DomUtil.create('li');\n    if ( chapter.href ) {\n      var anchor = DomUtil.create('a', null, option);\n      if ( chapter.html ) {\n        anchor.innerHTML = chapter.html;\n      } else {\n        anchor.textContent = chapter.label;\n      }\n      // var tab = pad('', tabindex); tab = tab.length ? tab + ' ' : '';\n      // option.textContent = tab + chapter.label;\n      anchor.setAttribute('href', chapter.href);\n      anchor.setAttribute('data-href', chapter.href);\n    } else {\n      var span = DomUtil.create('span', null, option);\n      span.textContent = chapter.label;\n    }\n\n    if ( parent.tagName === 'LI' ) {\n      // need to nest\n      var tmp = parent.querySelector('ul');\n      if ( ! tmp ) {\n        tmp = DomUtil.create('ul', null, parent);\n      }\n      parent = tmp;\n    }\n\n    parent.appendChild(option);\n    return option;\n  },\n\n  _setupSkipLink: function() {\n    if ( ! this.options.skipLink ) { return; }\n      \n    var target = document.querySelector(this.options.skipLink);\n    if ( ! target ) { return; }\n\n    var link = document.createElement('a');\n    link.textContent = 'Skip to contents';\n    link.setAttribute('href', '#action-' + this._id);\n\n    var ul = target.querySelector('ul');\n    if ( ul ) {\n      // add to list\n      target = document.createElement('li');\n      ul.appendChild(target);\n    }\n    target.appendChild(link);\n    link.addEventListener('click', function(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      this._control.click();\n    }.bind(this))\n\n  },\n\n  EOT: true\n});\n\nexport var contents = function(options) {\n  return new Contents(options);\n};\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\n// Title + Chapter\n\nexport var Title = Control.extend({\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className(),\n        container = DomUtil.create('div', className),\n        options = this.options;\n\n    // var template = '<h1><span class=\"cozy-title\">Contents: </span><select size=\"1\" name=\"contents\"></select></label>';\n    // var control = new DOMParser().parseFromString(template, \"text/html\").body.firstChild;\n\n    var h1 = DomUtil.create('h1', 'cozy-h1', container);\n    DomUtil.setOpacity(h1, 0);\n    this._title = DomUtil.create('span', 'cozy-title', h1);\n    this._divider = DomUtil.create('span', 'cozy-divider', h1);\n    this._divider.textContent = \" Â· \";\n    this._section = DomUtil.create('span', 'cozy-section', h1);\n\n    // --- TODO: disable until we can work out how to \n    // --- more reliably match the current section to the contents\n    // this._reader.on('updateSection', function(data) {\n    //   if ( data && data.label ) {\n    //     self._section.textContent = data.label;\n    //     DomUtil.setOpacity(self._section, 1.0);\n    //     DomUtil.setOpacity(self._divider, 1.0);\n    //   } else {\n    //     DomUtil.setOpacity(self._section, 0);\n    //     DomUtil.setOpacity(self._divider, 0);\n    //   }\n    // })\n\n    this._reader.on('updateTitle', function(data) {\n      if ( data ) {\n        self._title.textContent = data.title || data.bookTitle;\n        DomUtil.setOpacity(self._section, 0);\n        DomUtil.setOpacity(self._divider, 0);\n        DomUtil.setOpacity(h1, 1);\n      }\n    })\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n    // DomEvent.on(link, 'click', this._refocusOnMap, this);\n\n    return link;\n  },\n\n  EOT: true\n});\n\nexport var title = function(options) {\n  return new Title(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\n// Title + Chapter\n\nexport var PublicationMetadata = Control.extend({\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className(),\n        container = DomUtil.create('div', className),\n        options = this.options;\n\n    // var template = '<h1><span class=\"cozy-title\">Contents: </span><select size=\"1\" name=\"contents\"></select></label>';\n    // var control = new DOMParser().parseFromString(template, \"text/html\").body.firstChild;\n\n    this._publisher = DomUtil.create('div', 'cozy-publisher', container);\n    this._rights = DomUtil.create('div', 'cozy-rights', container);\n\n    this._reader.on('updateTitle', function(data) {\n      if ( data ) {\n        self._publisher.textContent = data.publisher;\n        self._rights.textContent = data.rights;\n      }\n    })\n\n    return container;\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('a', className, container);\n    link.innerHTML = html;\n    link.href = '#';\n    link.title = title;\n\n    /*\n     * Will force screen readers like VoiceOver to read this as \"Zoom in - button\"\n     */\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n    // DomEvent.on(link, 'click', this._refocusOnMap, this);\n\n    return link;\n  },\n\n  EOT: true\n});\n\nexport var publicationMetadata = function(options) {\n  return new PublicationMetadata(options);\n}\n","import {Class} from '../core/Class';\nimport {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\nimport * as Util from '../core/Util';\n\nimport assign from 'lodash/assign';\nimport keys from 'lodash/keys';\n\nexport var Preferences = Control.extend({\n  options: {\n    label: 'Preferences',\n    hasThemes: false\n  },\n\n  defaultTemplate: `<button class=\"button--sm cozy-preferences oi\" data-toggle=\"open\" data-glyph=\"cog\" aria-label=\"Preferences and Settings\"></button>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var className = this._className();\n    var container = DomUtil.create('div', className);\n    var template = this.options.template || this.defaultTemplate;\n    var body = new DOMParser().parseFromString(template, \"text/html\").body;\n    while ( body.children.length ) {\n      container.appendChild(body.children[0]);\n    }\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self.activate();\n    }, this);\n\n    // self.initializeForm();\n    this._modal = this._reader.modal({\n      // template: '<form></form>',\n      title: 'Preferences',\n      className: 'cozy-modal-preferences',\n      actions: [\n        {\n          label: 'Save Changes',\n          callback: function(event) {\n            self.updatePreferences(event);\n          }\n        }\n      ],\n      region: 'right'\n    });\n\n    return container;\n  },\n\n  activate: function() {\n    var self = this;\n    self.initializeForm();\n    self._modal.activate();\n  },\n\n  _createPanel: function() {\n    var self = this;\n    if ( this._modal._container.querySelector('form') ) { return; }\n\n    var template = '';\n\n    var possible_fieldsets = [];\n    if ( this._reader.metadata.layout == 'pre-paginated' ) {\n      // different panel\n      possible_fieldsets.push('Scale');\n    } else {\n      possible_fieldsets.push('TextSize');\n    }\n    possible_fieldsets.push('Display');\n\n    if ( this._reader.rootfiles && this._reader.rootfiles.length > 1 ) {\n      // this.options.hasPackagePaths = true;\n      possible_fieldsets.push('Rendition');\n    }\n\n    if ( this._reader.options.themes && this._reader.options.themes.length > 0 ) {\n      this.options.hasThemes = true;\n      possible_fieldsets.push('Theme');\n    }\n\n    this._fieldsets = [];\n    possible_fieldsets.forEach(function(cls) {\n      var fieldset = new Preferences.fieldset[cls](this);\n      template += fieldset.template();\n      this._fieldsets.push(fieldset);\n    }.bind(this))\n\n    if ( this.options.fields ) {\n      this.options.hasFields = true;\n      for(var i in this.options.fields) {\n        var field = this.options.fields[i];\n        var id = \"preferences-custom-\" + i;\n        template += `<fieldset class=\"custom-field\">\n          <legend>${field.label}</legend>\n        `;\n        for(var j in field.inputs) {\n          var input = field.inputs[j];\n          var checked = input.value == field.value ? ' checked=\"checked\"' : '';\n          template += `<label><input id=\"preferences-custom-${i}-${j}\" type=\"radio\" name=\"x${field.name}\" value=\"${input.value}\" ${checked}/>${input.label}</label>`;\n        }\n        if ( field.hint ) {\n          template += `<p class=\"hint\" style=\"font-size: 90%\">${field.hint}</p>`;\n        }\n      }\n    }\n\n    template = '<form>' + template + '</form>';\n\n    // this._modal = this._reader.modal({\n    //   template: template,\n    //   title: 'Preferences',\n    //   className: 'cozy-modal-preferences',\n    //   actions: [\n    //     {\n    //       label: 'Save Changes',\n    //       callback: function(event) {\n    //         self.updatePreferences(event);\n    //       }\n    //     }\n    //   ],\n    //   region: 'right'\n    // });\n\n    this._modal._container.querySelector('main').innerHTML = template;\n    this._form = this._modal._container.querySelector('form');\n  },\n\n  initializeForm: function() {\n    this._createPanel();\n    this._fieldsets.forEach(function(fieldset) {\n      fieldset.initializeForm(this._form);\n    }.bind(this));\n  },\n\n  updatePreferences: function(event) {\n    event.preventDefault();\n\n    var doUpdate = false;\n    var new_options = {};\n    var saveable_options = {};\n    this._fieldsets.forEach(function(fieldset) {\n      // doUpdate = doUpdate || fieldset.updateForm(this._form, new_options);\n      // assign(new_options, fieldset.updateForm(this._form));\n      fieldset.updateForm(this._form, new_options, saveable_options);\n    }.bind(this));\n\n    if ( this.options.hasFields ) {\n      for(var i in this.options.fields) {\n        var field = this.options.fields[i];\n        var id = \"preferences-custom-\" + i;\n        var input = this._form.querySelector(`input[name=\"x${field.name}\"]:checked`);\n        if ( input.value != field.value ) {\n          field.value = input.value;\n          field.callback(field.value);\n        }\n      }\n    }\n\n    this._modal.deactivate();\n\n    setTimeout(function() {\n      this._reader.saveOptions(saveable_options);\n      this._reader.reopen(new_options);\n    }.bind(this), 100);\n  },\n\n  EOT: true\n});\n\nPreferences.fieldset = {};\n\nvar Fieldset = Class.extend({\n\n  options: {},\n\n  initialize: function (control, options) {\n      Util.setOptions(this, options);\n      this._control = control;\n      this._current = {};\n      this._id = (new Date()).getTime() + '-' + parseInt(Math.random((new Date()).getTime()) * 1000, 10);\n  },\n\n  template: function() {\n\n  },\n\n  EOT: true\n\n\n});\n\nPreferences.fieldset.TextSize = Fieldset.extend({\n\n  initializeForm: function(form) {\n    if ( ! this._input ) {\n      this._input = form.querySelector(`#x${this._id}-input`);\n      this._output = form.querySelector(`#x${this._id}-output`);\n      this._preview = form.querySelector(`#x${this._id}-preview`);\n      this._actionReset = form.querySelector(`#x${this._id}-reset`);\n\n      this._input.addEventListener('input', this._updatePreview.bind(this));\n      this._input.addEventListener('change', this._updatePreview.bind(this));\n\n      this._actionReset.addEventListener('click', function(event) {\n        event.preventDefault();\n        this._input.value = 100;\n        this._updatePreview();\n      }.bind(this));\n    }\n\n    var text_size = this._control._reader.options.text_size || 100;\n    if ( text_size == 'auto' ) { text_size = 100; }\n    this._current.text_size = text_size;\n    this._input.value = text_size;\n    this._updatePreview();\n  },\n\n  updateForm: function(form, options, saveable) {\n    // return { text_size: this._input.value };\n    options.text_size = saveable.text_size = this._input.value;\n    // options.text_size = this._input.value;\n    // return ( this._input.value != this._current.text_size );\n  },\n\n  template: function() {\n    return `<fieldset class=\"cozy-fieldset-text_size\">\n        <legend>Text Size</legend>\n        <div class=\"preview--text_size\" id=\"x${this._id}-preview\">\n          â€˜Yes, thatâ€™s it,â€™ said the Hatter with a sigh: â€˜itâ€™s always tea-time, and weâ€™ve no time to wash the things between whiles.â€™\n        </div>\n        <p style=\"white-space: no-wrap\">\n          <span>T-</span>\n          <input name=\"text_size\" type=\"range\" id=\"x${this._id}-input\" value=\"100\" min=\"50\" max=\"400\" step=\"10\" aria-valuemin=\"50\" aria-valuemax=\"400\" style=\"width: 75%; display: inline-block\" />\n          <span>T+</span>\n        </p>\n        <p>\n          <span>Text Size: </span>\n          <span id=\"x${this._id}-output\">100</span>\n          <button id=\"x${this._id}-reset\" class=\"reset button--inline\" style=\"margin-left: 8px\">Reset</button> \n        </p>\n      </fieldset>`;\n  },\n\n  _updatePreview: function() {\n    this._preview.style.fontSize = `${( parseInt(this._input.value, 10) / 100 )}em`;\n    this._output.innerHTML = `${this._input.value}%`;\n    this._input.setAttribute('aria-valuenow',`${this._input.value}`);\n    this._input.setAttribute('aria-valuetext',`${this._input.value} percent`);\n  },\n\n  EOT: true\n\n});\n\nPreferences.fieldset.Display = Fieldset.extend({\n\n  initializeForm: function(form) {\n    var flow = this._control._reader.options.flow || this._control._reader.metadata.flow || 'auto';\n    // if ( flow == 'auto' ) { flow = 'paginated'; }\n\n    var input = form.querySelector(`#x${this._id}-input-${flow}`);\n    input.checked = true;\n    this._current.flow = flow;\n\n  },\n\n  updateForm: function(form, options, saveable) {\n    var input = form.querySelector(`input[name=\"x${this._id}-flow\"]:checked`);\n    options.flow = input.value;\n    if ( options.flow != 'auto' ) {\n      saveable.flow = options.flow;\n    }\n    // if ( input.value == 'auto' ) {\n    //   // we do NOT want to save flow as a preference\n    //   return {};\n    // }\n    // return { flow: input.value };\n  },\n\n  template: function() {\n    var scrolled_help = '';\n    if ( this._control._reader.metadata.layout != 'pre-paginated' ) {\n      scrolled_help = \"<br /><small>This is an experimental feature that may cause display and loading issues for the book when enabled.</small>\";\n    }\n    return `<fieldset>\n            <legend>Display</legend>\n            <label><input name=\"x${this._id}-flow\" type=\"radio\" id=\"x${this._id}-input-auto\" value=\"auto\" /> Auto<br /><small>Let the reader determine display mode based on your browser dimensions and the type of content you're reading</small></label>\n            <label><input name=\"x${this._id}-flow\" type=\"radio\" id=\"x${this._id}-input-paginated\" value=\"paginated\" /> Page-by-Page</label>\n            <label><input name=\"x${this._id}-flow\" type=\"radio\" id=\"x${this._id}-input-scrolled-doc\" value=\"scrolled-doc\" /> Scroll${scrolled_help}</label>\n          </fieldset>`;\n  },\n\n  EOT: true\n\n});\n\nPreferences.fieldset.Theme = Fieldset.extend({\n\n  initializeForm: function(form) {\n    var theme = this._control._reader.options.theme || 'default';\n\n    var input = form.querySelector(`#x${this._id}-input-theme-${theme}`);\n    input.checked = true;\n    this._current.theme = theme;\n  },\n\n  updateForm: function(form, options, saveable) {\n    var input = form.querySelector(`input[name=\"x${this._id}-theme\"]:checked`);\n    options.theme = saveable.theme = input.value;\n    // return { theme: input.value };\n  },\n\n  template: function() {\n    var template = `<fieldset>\n            <legend>Theme</legend>\n            <label><input name=\"x${this._id}-theme\" type=\"radio\" id=\"x${this._id}-input-theme-default\" value=\"default\" />Default</label>`;\n\n    this._control._reader.options.themes.forEach(function(theme) {\n      template += `<label><input name=\"x${this._id}-theme\" type=\"radio\" id=\"x${this._id}-input-theme-${theme.klass}\" value=\"${theme.klass}\" />${theme.name}</label>`\n    }.bind(this));\n\n    template += '</fieldset>';\n\n    return template;\n\n  },\n\n  EOT: true\n\n});\n\nPreferences.fieldset.Rendition = Fieldset.extend({\n\n  initializeForm: function(form) {\n    var rootfiles = this._control._reader.rootfiles;\n    var rootfilePath = this._control._reader.options.rootfilePath;\n    var expr = rootfilePath ? `[value=\"${rootfilePath}\"]` : \":first-child\";\n    var input = form.querySelector(`input[name=\"x${this._id}-rootfilePath\"]${expr}`);\n    input.checked = true;\n    this._current.rootfilePath = rootfilePath || rootfiles[0].rootfilePath;\n  },\n\n  updateForm: function(form, options, saveable) {\n    var input = form.querySelector(`input[name=\"x${this._id}-rootfilePath\"]:checked`);\n    if ( input.value != this._current.rootfilePath ) {\n      options.rootfilePath = input.value;\n      this._current.rootfilePath = input.value;\n    }\n  },\n\n  template: function() {\n    var template = `<fieldset>\n            <legend>Rendition</legend>\n    `;\n\n    this._control._reader.rootfiles.forEach(function(rootfile, i) {\n      template += `<label><input name=\"x${this._id}-rootfilePath\" type=\"radio\" id=\"x${this._id}-input-rootfilePath-${i}\" value=\"${rootfile.rootfilePath}\" />${rootfile.label || rootfile.accessMode || rootfile.rootfilePath}</label>`;\n    }.bind(this))\n\n    template += '</fieldset>';\n\n    return template;\n\n  },\n\n  EOT: true\n\n});\n\nPreferences.fieldset.Scale = Fieldset.extend({\n\n  initializeForm: function(form) {\n    if ( ! this._input ) {\n      this._input = form.querySelector(`#x${this._id}-input`);\n      this._output = form.querySelector(`#x${this._id}-output`);\n      this._preview = form.querySelector(`#x${this._id}-preview > div`);\n      this._actionReset = form.querySelector(`#x${this._id}-reset`);\n\n      this._input.addEventListener('input', this._updatePreview.bind(this));\n      this._input.addEventListener('change', this._updatePreview.bind(this));\n\n      this._actionReset.addEventListener('click', function(event) {\n        event.preventDefault();\n        this._input.value = 100;\n        this._updatePreview();\n      }.bind(this));\n    }\n\n    var scale = this._control._reader.options.scale || 100;\n    if ( ! scale ) { scale = 100; }\n    this._current.scale = scale;\n    this._input.value = scale;\n    this._updatePreview();\n  },\n\n  updateForm: function(form, options, saveable) {\n    // return { text_size: this._input.value };\n    options.scale = saveable.scale = this._input.value;\n    // options.text_size = this._input.value;\n    // return ( this._input.value != this._current.text_size );\n  },\n\n  template: function() {\n    return `<fieldset class=\"cozy-fieldset-text_size\">\n        <legend>Zoom In/Out</legend>\n        <div class=\"preview--scale\" id=\"x${this._id}-preview\" style=\"overflow: hidden; height: 5rem\">\n          <div>\n            â€˜Yes, thatâ€™s it,â€™ said the Hatter with a sigh: â€˜itâ€™s always tea-time, and weâ€™ve no time to wash the things between whiles.â€™\n          </div>\n        </div>\n        <p style=\"white-space: no-wrap\">\n          <span style=\"font-size: 150%\">âŠ–<span class=\"u-screenreader\"> Zoom Out</span></span>\n          <input name=\"scale\" type=\"range\" id=\"x${this._id}-input\" value=\"100\" min=\"50\" max=\"400\" step=\"10\" style=\"width: 75%; display: inline-block\" />\n          <span style=\"font-size: 150%\">âŠ•<span class=\"u-screenreader\">Zoom In </span></span>\n        </p>\n        <p>\n          <span>Scale: </span>\n          <span id=\"x${this._id}-output\">100</span>\n          <button id=\"x${this._id}-reset\" class=\"reset button--inline\" style=\"margin-left: 8px\">Reset</button> \n        </p>\n      </fieldset>`;\n  },\n\n  _updatePreview: function() {\n    this._preview.style.transform = `scale(${( parseInt(this._input.value, 10) / 100 )}) translate(0,0)`;\n    this._output.innerHTML = `${this._input.value}%`;\n  },\n\n  EOT: true\n\n});\n\nexport var preferences = function(options) {\n  return new Preferences(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Widget = Control.extend({\n\n\n  options: {\n      // @option region: String = 'topright'\n      // The region of the control (one of the reader corners). Possible values are `'topleft'`,\n      // `'topright'`, `'bottomleft'` or `'bottomright'`\n  },\n\n  onAdd: function(reader) {\n    var container = this._container;\n    if ( container ) {\n      // NOOP\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n\n    }\n\n    this._onAddExtra(container);\n    this._updateTemplate(container);\n    this._updateClass(container);\n    this._bindEvents(container);\n\n    return container;\n  },\n\n  _updateTemplate: function(container) {\n    var data = this.data();\n    for(var slot in data) {\n      if ( data.hasOwnProperty(slot) ) {\n        var value = data[slot];\n        if ( typeof(value) == \"function\" ) { value = value(); }\n        var node = container.querySelector(`[data-slot=${slot}]`);\n        if ( node ) {\n          if ( node.hasAttribute('value') ) {\n            node.setAttribute('value', value);\n          } else {\n            node.innerHTML = value;\n          }\n        }\n      }\n    }\n  },\n\n  _updateClass: function(container) {\n    if ( this.options.className ) {\n      DomUtil.addClass(container, this.options.className);\n    }\n  },\n\n  _onAddExtra: function() { },\n\n  _bindEvents: function(container) {\n    var control = container.querySelector(\"[data-toggle=button]\");\n    if ( ! control ) { return ; }\n    DomEvent.disableClickPropagation(control);\n    DomEvent.on(control, 'click', DomEvent.stop);\n    DomEvent.on(control, 'click', this._action, this);\n  },\n\n  _action: function() {\n  },\n\n  data: function() {\n    return this.options.data || {};\n  },\n\n  EOT: true\n});\n\nWidget.Button = Widget.extend({\n  defaultTemplate: `<button data-toggle=\"button\" data-slot=\"label\"></button>`,\n\n  _action: function() {\n    this.options.onClick(this, this._reader);\n  },\n\n  EOT: true\n});\n\nWidget.Panel = Widget.extend({\n  defaultTemplate: `<div><span data-slot=\"text\"></span></div>`,\n\n\n  EOT: true\n});\n\nWidget.Toggle = Widget.extend({\n  defaultTemplate: `<button data-toggle=\"button\" data-slot=\"label\"></button>`,\n\n  _onAddExtra: function(container) {\n    this.state(this.options.states[0].stateName, container);\n\n    return container;\n  },\n\n  state: function(stateName, container) {\n    container = container || this._container;\n    this._resetState(container);\n    this._state = this.options.states.filter(function(s) { return s.stateName == stateName })[0];\n    this._updateClass(container);\n    this._updateTemplate(container);\n  },\n\n  _resetState: function(container) {\n    if ( ! this._state ) { return; }\n    if ( this._state.className ) {\n      DomUtil.removeClass(container, this._state.className);\n    }\n  },\n\n  _updateClass: function(container) {\n    if ( this._state.className ) {\n      DomUtil.addClass(container, this._state.className);\n    }\n  },\n\n  _action: function() {\n    this._state.onClick(this, this._reader);\n  },\n\n  data: function() {\n    return this._state.data || {};\n  },\n\n  EOT: true\n});\n\n// export var widget = function(options) {\n//   return new Widget(options);\n// }\n\nexport var widget = {\n  button: function(options) { return new Widget.Button(options); },\n  panel: function(options) { return new Widget.Panel(options); },\n  toggle: function(options) { return new Widget.Toggle(options); }\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Citation = Control.extend({\n  options: {\n    label: 'Citation',\n    html: '<span class=\"citation\" aria-label=\"Get Citation\"></span>'\n  },\n\n  defaultTemplate: '<button class=\"button--sm cozy-citation citation\" data-toggle=\"open\" aria-label=\"Get Citation\"></button>',\n\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._reader.on('updateContents', function(data) {\n      self._createPanel();\n    });\n\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self._modal.activate();\n    }, this)\n\n    return container;\n  },\n\n  _action: function() {\n    var self = this;\n    self._modal.activate();\n  },\n\n  _createButton: function (html, title, className, container, fn) {\n    var link = DomUtil.create('button', className, container);\n    link.innerHTML = html;\n    link.title = title;\n\n    link.setAttribute('role', 'button');\n    link.setAttribute('aria-label', title);\n\n    DomEvent.disableClickPropagation(link);\n    DomEvent.on(link, 'click', DomEvent.stop);\n    DomEvent.on(link, 'click', fn, this);\n\n    return link;\n  },\n\n  _createPanel: function() {\n    var self = this;\n\n    var template = `<form>\n      <fieldset>\n        <legend>Select Citation Format</legend>\n      </fieldset>\n    </form>\n    <blockquote id=\"formatted\" style=\"padding: 8px; border-left: 4px solid black; background-color: #fff\"></blockquote>\n    <div class=\"alert alert-info\" id=\"message\" style=\"display: none\"></div>`;\n\n    this._modal = this._reader.modal({\n      template: template,\n      title: 'Copy Citation to Clipboard',\n      className: 'cozy-modal-citation',\n      actions: [\n        {\n          label: 'Copy Citation',\n          callback: function(event) {\n            document.designMode = \"on\";\n            var formatted = self._modal._container.querySelector(\"#formatted\");\n\n            var range = document.createRange();\n            range.selectNode(formatted);\n            var sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n\n            // formatted.select();\n\n            try {\n              var flag = document.execCommand('copy');\n            } catch(err) {\n              console.log(\"AHOY COPY FAILED\", err);\n            }\n\n            self._message.innerHTML = 'Success! Citation copied to your clipboard.';\n            self._message.style.display = 'block';\n            sel.removeAllRanges();\n            range.detach();\n            document.designMode = \"off\";\n          }\n        }\n      ],\n      region: 'left',\n      fraction: 1.0\n    });\n\n    this._form = this._modal._container.querySelector('form');\n    var fieldset = this._form.querySelector('fieldset');\n\n    var citations = this.options.citations || this._reader.metadata.citations;\n\n    citations.forEach(function(citation, index) {\n      var label = DomUtil.create('label', null, fieldset);\n      var input = DomUtil.create('input', null, label);\n      input.setAttribute('name', 'format');\n      input.setAttribute('value', citation.format);\n      input.setAttribute('type', 'radio');\n      if ( index == 0 ) {\n        input.setAttribute('checked', 'checked');\n      }\n      var text = document.createTextNode(\" \" + citation.format);\n      label.appendChild(text);\n      input.setAttribute('data-text', citation.text);\n    });\n\n    this._formatted = this._modal._container.querySelector(\"#formatted\");\n    this._message = this._modal._container.querySelector(\"#message\");\n    DomEvent.on(this._form, 'change', function(event) {\n      var target = event.target;\n      if ( target.tagName == 'INPUT' ) {\n        this._initializeForm();\n      }\n    }, this);\n\n    this._initializeForm();\n  },\n\n  _initializeForm: function() {\n    var formatted = this._formatCitation();\n    this._formatted.innerHTML = formatted;\n    this._message.style.display = 'none';\n    this._message.innerHTML = '';\n  },\n\n  _formatCitation: function(format) {\n    if ( format == null ) {\n      var selected = this._form.querySelector(\"input:checked\");\n      format = selected.value;\n    }\n    var selected = this._form.querySelector(\"input[value=\" + format + \"]\");\n    return selected.getAttribute('data-text');\n    // return selected.dataset.text;\n  },\n\n  EOT: true\n});\n\nexport var citation = function(options) {\n  return new Citation(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Search = Control.extend({\n  options: {\n    label: 'Search',\n    html: '<span>Search</span>'\n  },\n\n  defaultTemplate: `<form class=\"search\">\n    <label class=\"u-screenreader\" for=\"cozy-search-string\">Search in this text</label>\n    <input id=\"cozy-search-string\" name=\"search\" type=\"text\" placeholder=\"Search in this text...\"/>\n    <button class=\"button--sm\" data-toggle=\"open\" aria-label=\"Search\"><i class=\"icon-magnifying-glass oi\" data-glyph=\"magnifying-glass\" title=\"Search\" aria-hidden=\"true\"></i></button>\n  </form>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    container.style.position = 'relative';\n\n    this._data = null;\n    this._canceled = false;\n    this._processing = false;\n    this._addLocation = false;\n\n    this._reader.on('ready', function() {\n\n      this._modal = this._reader.modal({\n        template: '<article></article>',\n        title: 'Search Results',\n        className: { container: 'cozy-modal-search' },\n        region: 'left',\n      });\n\n      this._modal.callbacks.onClose = function() {\n        if ( self._processing ) {\n          self._canceled = true;\n        }\n      };\n\n      this._article = this._modal._container.querySelector('article');\n\n      this._modal.on('click', 'a[href]', function(modal, target) {\n        target = target.getAttribute('href');\n        this._reader.tracking.action('search/go/link');\n        this._reader.gotoPage(target);\n        return true;\n      }.bind(this));\n\n      this._modal.on('closed', function() {\n        this._reader.tracking.action('contents/close');\n      }.bind(this))\n\n    }.bind(this));\n\n    // only add locations when they've been processed\n    this._reader.on('updateLocations', function() {\n      this._addLocation = true;\n    }.bind(this));\n\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n\n      var searchString = this._container.querySelector(\"#cozy-search-string\").value;\n      searchString = searchString.replace(/^\\s*/, '').replace(/\\s*$/, '');\n\n      if ( ! searchString ) {\n        // just punt\n        return;\n      }\n\n      if ( searchString == this.searchString ) {\n        // cached results\n        self.openModalResults();\n      } else {\n        this.searchString = searchString;\n        self.openModalWaiting();\n        self.submitQuery();\n      }\n    }, this);\n\n    window.addEventListener('keydown', function(evt) {\n      let cmd = (evt.ctrlKey ? 1 : 0) |\n                (evt.altKey ? 2 : 0) |\n                (evt.shiftKey ? 4 : 0) |\n                (evt.metaKey ? 8 : 0);\n\n      if (cmd === 1 || cmd === 8 || cmd === 5 || cmd === 12) {\n        if ( evt.keyCode == '70' ) {\n          // command/control-F\n          evt.preventDefault();\n          this._container.querySelector(\"#cozy-search-string\").focus();\n        }\n      }\n    }.bind(this));\n\n    return container;\n  },\n\n  openModalWaiting: function() {\n    this._processing = true;\n    this._emptyArticle();\n    var value = this.searchString;\n    this._article.innerHTML = '<p>Submitting query for <em>' + value + '</em>...</p>' + this._reader.loaderTemplate();\n    this._modal.activate();\n  },\n\n  openModalResults: function() {\n    if ( this._canceled ) {\n      this._canceled = false;\n      return;\n    }\n    this._buildResults();\n    this._modal.activate();\n    this._reader.tracking.action(\"search/open\");\n  },\n\n  submitQuery: function() {\n    var self = this;\n\n    var url = this.options.searchUrl + encodeURIComponent(this.searchString);\n\n    var request = new XMLHttpRequest();\n    request.open('GET', url, true);\n\n    request.onload = function() {\n      if (this.status >= 200 && this.status < 400) {\n        // Success!\n        var data = JSON.parse(this.response);\n        console.log(\"SEARCH DATA\", data);\n\n        self._data = data;\n\n      } else {\n        // We reached our target server, but it returned an error\n\n        self._data = null;\n        console.log(this.response);\n      }\n\n      self._reader.tracking.action(\"search/submitQuery\");\n      self.openModalResults();\n\n    };\n\n    request.onerror = function() {\n      // There was a connection error of some sort\n      self._data = null;\n      self.openModalResults();\n    };\n\n    request.send();\n\n  },\n\n  _emptyArticle: function() {\n    while (this._article && this._article.hasChildNodes()) {\n      this._article.removeChild(this._article.lastChild);\n    }\n  },\n\n  _buildResults: function() {\n    var self = this;\n    var content;\n\n    this._processing = false;\n\n    self._emptyArticle();\n\n    var reader = this._reader;\n    reader.annotations.reset();\n\n    if ( this._data ) {\n      var highlight = true\n      if (this._data.highlight_off == \"yes\") {\n        highlight = false;\n      }\n      if ( this._data.search_results.length ) {\n        content = DomUtil.create('ol');\n\n        this._data.search_results.forEach(function(result) {\n          var option = DomUtil.create('li');\n          var anchor = DomUtil.create('a', null, option);\n          var cfiRange = \"epubcfi(\" + result.cfi + \")\";\n\n          if (result.snippet) {\n            // results for epubs\n            if ( self._addLocation ) {\n              var loc = reader.locations.locationFromCfi(cfiRange);\n              var locText = \"Location \" + loc + \" â€¢ \";\n              if (cfiRange.match(/^epubcfi\\(page/)) {\n                // results for pdfs\n                // see heliotrope: app/views/e_pubs/show_pdf.html.erb, _gatherResults()\n                loc = cfiRange.split(\"=\")[1]\n                locText = \"Page \" + loc.slice(0, -1) + \" â€¢ \";\n              }\n              var locElement = DomUtil.create('i');\n              locElement.textContent = locText;\n              anchor.appendChild(locElement);\n            }\n            anchor.appendChild(document.createTextNode(result.snippet));\n\n            anchor.setAttribute(\"href\", cfiRange);\n            content.appendChild(option);\n          }\n          if (highlight) {\n            reader.annotations.highlight(cfiRange, {}, null, 'epubjs-search-hl');\n          }\n        });\n      } else {\n        content = DomUtil.create(\"p\")\n        content.textContent = 'No results found for \"' + self.searchString + '\"';\n      }\n    } else {\n      content = DomUtil.create(\"p\")\n      content.textContent = 'There was a problem processing this query.';\n    }\n\n    self._article.appendChild(content);\n  },\n\n  EOT: true\n});\n\nexport var search = function(options) {\n  return new Search(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\n// Title + Chapter\n\nexport var BibliographicInformation = Control.extend({\n  options: {\n    label: 'Info',\n    direction: 'left',\n    html: '<span class=\"oi\" data-glyph=\"info\">Info</span>'\n  },\n\n  defaultTemplate: `<button class=\"button--sm cozy-bib-info oi\" data-glyph=\"info\" data-toggle=\"open\" aria-label=\"Bibliographic Information\"> Info</button>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._reader.on('updateContents', function(data) {\n      self._createPanel();\n    });\n\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self._modal.activate();\n    }, this)\n\n    return container;\n  },\n\n  _createPanel: function() {\n    var self = this;\n\n    var template = `<dl>\n    </dl>`;\n\n    this._modal = this._reader.modal({\n      template: template,\n      title: 'Info',\n      region: 'left',\n      fraction: 1.0\n    });\n\n    var dl = this._modal._container.querySelector('dl');\n\n    var metadata_fields = [\n      [ 'title', 'Title' ],\n      [ 'creator', 'Author' ],\n      [ 'pubdate', 'Publication Date' ],\n      [ 'modified_date', 'Modified Date' ],\n      [ 'publisher', 'Publisher' ],\n      [ 'rights', 'Rights' ],\n      [ 'doi', 'DOI' ],\n      [ 'description', 'Description' ],\n    ];\n\n    var metadata_fields_seen = {};\n\n    var metadata = this._reader.metadata;\n\n    for(var idx in metadata_fields) {\n      var key = metadata_fields[idx][0];\n      var label = metadata_fields[idx][1];\n      if ( metadata[key] ) {\n        var value = metadata[key];\n        if ( key == 'pubdate' || key == 'modified_date' ) {\n          value = this._formatDate(value);\n          if ( ! value ) { continue; }\n          // value = d.toISOString().slice(0,10); // for YYYY-MM-DD\n        }\n        metadata_fields_seen[key] = true;\n        var dt = DomUtil.create('dt', 'cozy-bib-info-label', dl);\n        dt.innerHTML = label;\n        var dd = DomUtil.create('dd', 'cozy-bib-info-value cozy-bib-info-value-' + key, dl);\n        dd.innerHTML = value;\n      }\n    }\n\n  },\n\n  _formatDate: function(value) {\n    var match = value.match(/\\d{4}/);\n    if ( match ) {\n      return match[0];\n    }\n    return null;\n  },\n\n  EOT: true\n});\n\nexport var bibliographicInformation = function(options) {\n  return new BibliographicInformation(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Download = Control.extend({\n  options: {\n    label: 'Download Book',\n    html: '<span>Download Book</span>'\n  },\n\n  defaultTemplate: `<button class=\"button--sm cozy-download oi\" data-toggle=\"open\" data-glyph=\"data-transfer-download\"> Download Book</button>`,\n\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._reader.on('updateContents', function(data) {\n      self._createPanel();\n    });\n\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self._modal.activate();\n    }, this)\n\n    return container;\n  },\n\n  _createPanel: function() {\n    var self = this;\n\n    var template = `<form>\n      <fieldset>\n        <legend>Choose File Format</legend>\n      </fieldset>\n    </form>`;\n\n    this._modal = this._reader.modal({\n      template: template,\n      title: 'Download Book',\n      className: 'cozy-modal-download',\n      actions: [\n        {\n          label: 'Download',\n          callback: function(event) {\n            var selected = self._form.querySelector(\"input:checked\");\n            var href = selected.getAttribute('data-href');\n            self._configureDownloadForm(href);\n            self._form.submit();\n          }\n        }\n      ],\n      region: 'left',\n      fraction: 1.0\n    });\n\n    this._form = this._modal._container.querySelector('form');    \n    var fieldset = this._form.querySelector('fieldset');\n    this._reader.options.download_links.forEach(function(link, index) {\n      var label = DomUtil.create('label', null, fieldset);\n      var input = DomUtil.create('input', null, label);\n      input.setAttribute('name', 'format');\n      input.setAttribute('value', link.format);\n      input.setAttribute('data-href', link.href);\n      input.setAttribute('type', 'radio');\n      if ( index == 0 ) {\n        input.setAttribute('checked', 'checked');\n      }\n      var text = link.format;\n      if ( link.size ) {\n        text += \" (\" + link.size + \")\";\n      }\n      var text = document.createTextNode(\" \" + text);\n      label.appendChild(text);\n    });\n\n  },\n\n  _configureDownloadForm: function(href) {\n    var self = this;\n    self._form.setAttribute('method', 'GET');\n    self._form.setAttribute('action', href);\n    self._form.setAttribute('target', '_blank');\n  },\n\n\n  EOT: true\n});\n\nexport var download = function(options) {\n  return new Download(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Navigator = Control.extend({\n  onAdd: function(reader) {\n    var container = this._container;\n    if ( container ) {\n    } else {\n\n      var className = this._className('navigator'),\n          options = this.options;\n      \n      container = DomUtil.create('div', className);\n    }\n    this._setup(container);\n\n    this._reader.on('updateLocations', function(locations) {      \n      // if ( ! this._reader.currentLocation() || ! this._reader.currentLocation().start ) {\n      //   console.log(\"AHOY updateLocations NO START\", this._reader.currentLocation().then);\n      //   setTimeout(function() {\n      //     this._initializeNavigator(locations);\n      //   }.bind(this), 100);\n      //   return;\n      // }\n      this._initializeNavigator(locations);\n    }.bind(this));\n\n    return container;\n  },\n\n  _setup: function(container) {\n    this._control = container.querySelector(\"input[type=range]\");\n    if ( ! this._control ) {\n      this._createControl(container);\n    }\n    this._background = container.querySelector(\".cozy-navigator-range__background\");\n    this._status = container.querySelector(\".cozy-navigator-range__status\");\n    this._spanCurrentPercentage = container.querySelector(\".currentPercentage\");\n    this._spanCurrentLocation = container.querySelector(\".currentLocation\");\n    this._spanTotalLocations = container.querySelector(\".totalLocations\");\n\n    this._bindEvents();\n  },\n\n  _createControl: function (container) {\n    var template = `<div class=\"cozy-navigator-range\">\n        <label class=\"u-screenreader\" for=\"cozy-navigator-range-input\">Location: </label>\n        <input class=\"cozy-navigator-range__input\" id=\"cozy-navigator-range-input\" type=\"range\" name=\"locations-range-value\" min=\"0\" max=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\" aria-valuenow=\"0\" aria-valuetext=\"0% â€¢Â Location 0 of ?\" value=\"0\" data-background-position=\"0\" />\n        <div class=\"cozy-navigator-range__background\"></div>\n      </div>\n      <div class=\"cozy-navigator-range__status\"><span class=\"currentPercentage\">0%</span> â€¢ Location <span class=\"currentLocation\">0</span> of <span class=\"totalLocations\">?</span></div>\n    `;\n\n    var body = new DOMParser().parseFromString(template, \"text/html\").body;\n    while ( body.children.length ) {\n      container.appendChild(body.children[0]);\n    }\n\n    this._control = container.querySelector(\"input[type=range]\");\n  },\n\n  _bindEvents: function() {\n    var self = this;\n\n    this._control.addEventListener(\"input\", function() {\n      self._update();\n    }, false);\n    this._control.addEventListener(\"change\", function() { self._action(); }, false);\n    this._control.addEventListener(\"mousedown\", function(){\n        self._mouseDown = true;\n    }, false);\n    this._control.addEventListener(\"mouseup\", function(){\n        self._mouseDown = false;\n    }, false);\n    this._control.addEventListener(\"keydown\", function(){\n      self._mouseDown = true;\n    }, false);\n    this._control.addEventListener(\"keyup\", function(){\n      self._mouseDown = false;\n    }, false);\n\n    this._reader.on('relocated', function(location) {\n      if ( ! self._initiated ) { return; }\n      if ( ! self._mouseDown ) {\n        location = self._reader.currentLocation();\n        self._control.value = Math.ceil(self._reader.locations.percentageFromCfi(self._reader.currentLocation().start.cfi) * 100);\n        self._update();\n      }\n    })\n\n  },\n\n  _action: function() {\n    var value = this._control.value;\n    var locations = this._reader.locations;\n    var cfi = locations.cfiFromPercentage(value / 100);\n    this._reader.tracking.action(\"navigator/go\");\n    this._reader.gotoPage(cfi);\n  },\n\n  _update: function() {\n    var self = this;\n\n    var current = this._reader.currentLocation();\n    if ( ! current || ! current.start ) {\n      setTimeout(function() {\n        this._update();\n      }.bind(this), 100);\n      return;\n    }\n\n    var rangeBg = this._background;\n    var range = self._control;\n\n    var value = parseInt(range.value, 10);\n    var percentage = value;\n\n    // if ( current.start.location != this._last_reported_location ) {\n    //   this._last_reported_location = current.start.location;\n    //   var message = `Location ${current.start.location}; ${percentage}%`;\n    //   this._reader.updateLiveStatus(message);\n    // }\n\n    rangeBg.setAttribute('style', 'background-position: ' + (-percentage) + '% 0%, left top;');\n    self._control.setAttribute('data-background-position', Math.ceil(percentage));\n\n    this._spanCurrentPercentage.innerHTML = percentage + '%';\n    if ( current && current.start ) {\n      var current_location = this._reader.locations.locationFromCfi(current.start.cfi);\n      this._spanCurrentLocation.innerHTML = ( current_location );\n\n      range.setAttribute('aria-valuenow', value);\n      range.setAttribute('aria-valuetext', `${value}% â€¢Â Location ${current_location} of ${this._total}`);\n\n      if ( current_location != this._last_reported_location ) {\n        this._last_reported_location = current_location;\n        var message = `Location ${current_location}; ${percentage}%`;\n        this._reader.updateLiveStatus(message);\n      }\n    }\n    self._last_delta = self._last_value > value; self._last_value = value;\n  },\n\n  _initializeNavigator: function(locations) {\n    console.log(\"AHOY updateLocations PROCESSING LOCATION\");\n    this._initiated = true;\n    this._total = this._reader.locations.total;\n    if ( this._reader.currentLocation() && this._reader.currentLocation().start ) {\n      this._control.value = Math.ceil(this._reader.locations.percentageFromCfi(this._reader.currentLocation().start.cfi) * 100);\n      this._last_value = this._control.value;\n    } else {\n      this._last_value = this._control.value;\n    }\n\n    this._spanTotalLocations.innerHTML = this._total;\n\n    this._update();\n    setTimeout(function() {\n      DomUtil.addClass(this._container, 'initialized');\n    }.bind(this), 0);\n  },\n\n  EOT: true\n});\n\nexport var navigator = function(options) {\n  return new Navigator(options);\n}\n","import {Control} from './Control';\nimport {Reader} from '../reader/Reader';\nimport * as DomUtil from '../dom/DomUtil';\nimport * as DomEvent from '../dom/DomEvent';\n\nexport var Fullscreen = Control.extend({\n  options: {\n    label: 'View Fullscreen',\n    html: '<span>View Fullscreen</span>'\n  },\n\n  defaultTemplate: `<button class=\"button--sm cozy-fullscreen oi\" data-toggle=\"open\" data-glyph=\"fullscreen-enter\" aria-label=\"Enter Fullscreen\"></button>`,\n\n  onAdd: function(reader) {\n    var self = this;\n    var container = this._container;\n    if ( container ) {\n      this._control = container.querySelector(\"[data-target=\" + this.options.direction + \"]\");\n    } else {\n\n      var className = this._className(),\n          options = this.options;\n\n      container = DomUtil.create('div', className);\n\n      var template = this.options.template || this.defaultTemplate;\n\n      var body = new DOMParser().parseFromString(template, \"text/html\").body;\n      while ( body.children.length ) {\n        container.appendChild(body.children[0]);\n      }\n    }\n\n    this._control = container.querySelector(\"[data-toggle=open]\");\n    DomEvent.on(this._control, 'click', function(event) {\n      event.preventDefault();\n      self.activate();\n    }, this)\n\n    // // fullscreenchange is not standard across all browsers\n    // document.addEventListener('fullscreenchange', (event) => {\n    //   // document.fullscreenElement will point to the element that\n    //   // is in fullscreen mode if there is one. If there isn't one,\n    //   // the value of the property is null.    \n    //   this._fullscreenchangeHandler();\n    // });\n\n    this._reader.on('fullscreenchange', (data) => {\n      this._fullscreenchangeHandler(data.isFullscreen);\n    })\n\n    return container;\n  },\n\n  activate: function() {\n    if ( ! document.fullscreenElement ) {\n      this._reader.requestFullscreen();\n    } else {\n      if ( document.exitFullscreen ) {\n        document.exitFullscreen();\n      }\n    }\n  },\n\n  _fullscreenchangeHandler: function(isFullscreen) {\n    if (isFullscreen) {\n      this._control.dataset.glyph = 'fullscreen-exit';\n      this._control.setAttribute('aria-label', 'Exit Fullscreen');\n    } else {\n      this._control.dataset.glyph = 'fullscreen-enter';\n      this._control.setAttribute('aria-label', 'Enter Fullscreen');\n    }    \n  },\n\n  EOT: true\n});\n\nexport var fullscreen = function(options) {\n  return new Fullscreen(options);\n}\n","import {Control, control} from './Control';\nimport {PageNext, PagePrevious, pageNext, pagePrevious, PageFirst, pageFirst, PageLast, pageLast} from './Control.Paging';\nimport {Contents, contents} from './Control.Contents';\nimport {Title, title} from './Control.Title';\nimport {PublicationMetadata, publicationMetadata} from './Control.PublicationMetadata';\nimport {Preferences, preferences} from './Control.Preferences';\nimport {Widget, widget} from './Control.Widget';\nimport {Citation, citation} from './Control.Citation';\nimport {Search, search} from './Control.Search';\nimport {BibliographicInformation, bibliographicInformation} from './Control.BibliographicInformation';\nimport {Download, download} from './Control.Download';\nimport {Navigator, navigator} from './Control.Navigator';\nimport {Fullscreen, fullscreen} from './Control.Fullscreen';\n\n// import {Zoom, zoom} from './Control.Zoom';\n// import {Attribution, attribution} from './Control.Attribution';\n\nControl.PageNext = PageNext;\nControl.PagePrevious = PagePrevious;\nControl.PageFirst = PageFirst;\nControl.PageLast = PageLast;\ncontrol.pagePrevious = pagePrevious;\ncontrol.pageNext = pageNext;\ncontrol.pageFirst = pageFirst;\ncontrol.pageLast = pageLast;\n\nControl.Contents = Contents;\ncontrol.contents = contents;\n\nControl.Title = Title;\ncontrol.title = title;\n\nControl.PublicationMetadata = PublicationMetadata;\ncontrol.publicationMetadata = publicationMetadata;\n\nControl.Preferences = Preferences;\ncontrol.preferences = preferences;\n\nControl.Widget = Widget;\ncontrol.widget = widget;\n\nControl.Citation = Citation;\ncontrol.citation = citation;\n\nControl.Search = Search;\ncontrol.search = search;\n\nControl.BibliographicInformation = BibliographicInformation;\ncontrol.bibliographicInformation = bibliographicInformation;\n\nControl.Download = Download;\ncontrol.download = download;\n\nControl.Navigator = Navigator;\ncontrol.navigator = navigator;\n\nControl.Fullscreen = Fullscreen;\ncontrol.fullscreen = fullscreen;\n\nexport {Control, control};\n","import {Evented} from './Events';\n\nvar Bus = Evented.extend({\n});\n\nvar instance;\nexport var bus = function() {\n  return instance || ( instance = new Bus() );\n}\n","import * as Browser from './Browser';\nexport {Browser};\n\nexport {Class} from './Class';\n\nimport {Evented} from './Events';\nexport {Evented};\nexport var Mixin = {Events: Evented.prototype};\n\nimport * as Util from './Util';\nexport {Util};\nexport {extend, bind, stamp, setOptions, inVp} from './Util';\nexport {bus} from './Bus';\n","\"use strict\";\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== \"function\") return false;\n\tobj = { foo: \"raz\" };\n\tassign(obj, { bar: \"dwa\" }, { trzy: \"trzy\" });\n\treturn (obj.foo + obj.bar + obj.trzy) === \"razdwatrzy\";\n};\n","\"use strict\";\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys(\"primitive\");\n\t\treturn true;\n\t} catch (e) {\n return false;\n}\n};\n","\"use strict\";\n\n// eslint-disable-next-line no-empty-function\nmodule.exports = function () {};\n","\"use strict\";\n\nvar _undefined = require(\"../function/noop\")(); // Support ES3 engines\n\nmodule.exports = function (val) {\n return (val !== _undefined) && (val !== null);\n};\n","\"use strict\";\n\nvar isValue = require(\"../is-value\");\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n\treturn keys(isValue(object) ? Object(object) : object);\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.keys\n\t: require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nmodule.exports = function (value) {\n\tif (!isValue(value)) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","\"use strict\";\n\nvar keys  = require(\"../keys\")\n  , value = require(\"../valid-value\")\n  , max   = Math.max;\n\nmodule.exports = function (dest, src /*, â€¦srcn*/) {\n\tvar error, i, length = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry {\n\t\t\tdest[key] = src[key];\n\t\t} catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < length; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? Object.assign\n\t: require(\"./shim\");\n","\"use strict\";\n\nvar isValue = require(\"./is-value\");\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\n// eslint-disable-next-line no-unused-vars\nmodule.exports = function (opts1 /*, â€¦options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (!isValue(options)) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","// Deprecated\n\n\"use strict\";\n\nmodule.exports = function (obj) {\n return typeof obj === \"function\";\n};\n","\"use strict\";\n\nvar str = \"razdwatrzy\";\n\nmodule.exports = function () {\n\tif (typeof str.contains !== \"function\") return false;\n\treturn (str.contains(\"dwa\") === true) && (str.contains(\"foo\") === false);\n};\n","\"use strict\";\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","\"use strict\";\n\nmodule.exports = require(\"./is-implemented\")()\n\t? String.prototype.contains\n\t: require(\"./shim\");\n","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","\"use strict\";\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== \"function\") throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","/**\n * Core Utilities and Helpers\n * @module Core\n*/\n\n/**\n * Vendor prefixed requestAnimationFrame\n * @returns {function} requestAnimationFrame\n * @memberof Core\n */\nexport const requestAnimationFrame = (typeof window != \"undefined\") ? (window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame) : false;\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\nconst _URL = typeof URL != \"undefined\" ? URL : (typeof window != \"undefined\" ? (window.URL || window.webkitURL || window.mozURL) : undefined);\n\n/**\n * Generates a UUID\n * based on: http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript\n * @returns {string} uuid\n * @memberof Core\n */\nexport function uuid() {\n\tvar d = new Date().getTime();\n\tvar uuid = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(c) {\n\t\tvar r = (d + Math.random()*16)%16 | 0;\n\t\td = Math.floor(d/16);\n\t\treturn (c==\"x\" ? r : (r&0x7|0x8)).toString(16);\n\t});\n\treturn uuid;\n}\n\n/**\n * Gets the height of a document\n * @returns {number} height\n * @memberof Core\n */\nexport function documentHeight() {\n\treturn Math.max(\n\t\t\tdocument.documentElement.clientHeight,\n\t\t\tdocument.body.scrollHeight,\n\t\t\tdocument.documentElement.scrollHeight,\n\t\t\tdocument.body.offsetHeight,\n\t\t\tdocument.documentElement.offsetHeight\n\t);\n}\n\n/**\n * Checks if a node is an element\n * @param {object} obj\n * @returns {boolean}\n * @memberof Core\n */\nexport function isElement(obj) {\n\treturn !!(obj && obj.nodeType == 1);\n}\n\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\nexport function isNumber(n) {\n\treturn !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * @param {any} n\n * @returns {boolean}\n * @memberof Core\n */\nexport function isFloat(n) {\n\tlet f = parseFloat(n);\n\n\tif (isNumber(n) === false) {\n\t\treturn false;\n\t}\n\n\tif (typeof n === \"string\" && n.indexOf(\".\") > -1) {\n\t\treturn true;\n\t}\n\n\treturn Math.floor(f) !== f;\n}\n\n/**\n * Get a prefixed css property\n * @param {string} unprefixed\n * @returns {string}\n * @memberof Core\n */\nexport function prefixed(unprefixed) {\n\tvar vendors = [\"Webkit\", \"webkit\", \"Moz\", \"O\", \"ms\" ];\n\tvar prefixes = [\"-webkit-\", \"-webkit-\", \"-moz-\", \"-o-\", \"-ms-\"];\n\tvar upper = unprefixed[0].toUpperCase() + unprefixed.slice(1);\n\tvar length = vendors.length;\n\n\tif (typeof(document) === \"undefined\" || typeof(document.body.style[unprefixed]) != \"undefined\") {\n\t\treturn unprefixed;\n\t}\n\n\tfor ( var i=0; i < length; i++ ) {\n\t\tif (typeof(document.body.style[vendors[i] + upper]) != \"undefined\") {\n\t\t\treturn prefixes[i] + unprefixed;\n\t\t}\n\t}\n\n\treturn unprefixed;\n}\n\n/**\n * Apply defaults to an object\n * @param {object} obj\n * @returns {object}\n * @memberof Core\n */\nexport function defaults(obj) {\n\tfor (var i = 1, length = arguments.length; i < length; i++) {\n\t\tvar source = arguments[i];\n\t\tfor (var prop in source) {\n\t\t\tif (obj[prop] === void 0) obj[prop] = source[prop];\n\t\t}\n\t}\n\treturn obj;\n}\n\n/**\n * Extend properties of an object\n * @param {object} target\n * @returns {object}\n * @memberof Core\n */\nexport function extend(target) {\n\tvar sources = [].slice.call(arguments, 1);\n\tsources.forEach(function (source) {\n\t\tif(!source) return;\n\t\tObject.getOwnPropertyNames(source).forEach(function(propName) {\n\t\t\tObject.defineProperty(target, propName, Object.getOwnPropertyDescriptor(source, propName));\n\t\t});\n\t});\n\treturn target;\n}\n\n/**\n * Fast quicksort insert for sorted array -- based on:\n *  http://stackoverflow.com/questions/1344500/efficient-way-to-insert-a-number-into-a-sorted-array-of-numbers\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @returns {number} location (in array)\n * @memberof Core\n */\nexport function insert(item, array, compareFunction) {\n\tvar location = locationOf(item, array, compareFunction);\n\tarray.splice(location, 0, item);\n\n\treturn location;\n}\n\n/**\n * Finds where something would fit into a sorted array\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} location (in array)\n * @memberof Core\n */\nexport function locationOf(item, array, compareFunction, _start, _end) {\n\tvar start = _start || 0;\n\tvar end = _end || array.length;\n\tvar pivot = parseInt(start + (end - start) / 2);\n\tvar compared;\n\tif(!compareFunction){\n\t\tcompareFunction = function(a, b) {\n\t\t\tif(a > b) return 1;\n\t\t\tif(a < b) return -1;\n\t\t\tif(a == b) return 0;\n\t\t};\n\t}\n\tif(end-start <= 0) {\n\t\treturn pivot;\n\t}\n\n\tcompared = compareFunction(array[pivot], item);\n\tif(end-start === 1) {\n\t\treturn compared >= 0 ? pivot : pivot + 1;\n\t}\n\tif(compared === 0) {\n\t\treturn pivot;\n\t}\n\tif(compared === -1) {\n\t\treturn locationOf(item, array, compareFunction, pivot, end);\n\t} else{\n\t\treturn locationOf(item, array, compareFunction, start, pivot);\n\t}\n}\n\n/**\n * Finds index of something in a sorted array\n * Returns -1 if not found\n * @param {any} item\n * @param {array} array\n * @param {function} [compareFunction]\n * @param {function} [_start]\n * @param {function} [_end]\n * @returns {number} index (in array) or -1\n * @memberof Core\n */\nexport function indexOfSorted(item, array, compareFunction, _start, _end) {\n\tvar start = _start || 0;\n\tvar end = _end || array.length;\n\tvar pivot = parseInt(start + (end - start) / 2);\n\tvar compared;\n\tif(!compareFunction){\n\t\tcompareFunction = function(a, b) {\n\t\t\tif(a > b) return 1;\n\t\t\tif(a < b) return -1;\n\t\t\tif(a == b) return 0;\n\t\t};\n\t}\n\tif(end-start <= 0) {\n\t\treturn -1; // Not found\n\t}\n\n\tcompared = compareFunction(array[pivot], item);\n\tif(end-start === 1) {\n\t\treturn compared === 0 ? pivot : -1;\n\t}\n\tif(compared === 0) {\n\t\treturn pivot; // Found\n\t}\n\tif(compared === -1) {\n\t\treturn indexOfSorted(item, array, compareFunction, pivot, end);\n\t} else{\n\t\treturn indexOfSorted(item, array, compareFunction, start, pivot);\n\t}\n}\n/**\n * Find the bounds of an element\n * taking padding and margin into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\nexport function bounds(el) {\n\n\tvar style = window.getComputedStyle(el);\n\tvar widthProps = [\"width\", \"paddingRight\", \"paddingLeft\", \"marginRight\", \"marginLeft\", \"borderRightWidth\", \"borderLeftWidth\"];\n\tvar heightProps = [\"height\", \"paddingTop\", \"paddingBottom\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\"];\n\n\tvar width = 0;\n\tvar height = 0;\n\n\twidthProps.forEach(function(prop){\n\t\twidth += parseFloat(style[prop]) || 0;\n\t});\n\n\theightProps.forEach(function(prop){\n\t\theight += parseFloat(style[prop]) || 0;\n\t});\n\n\treturn {\n\t\theight: height,\n\t\twidth: width\n\t};\n\n}\n\n/**\n * Find the bounds of an element\n * taking padding, margin and borders into account\n * @param {element} el\n * @returns {{ width: Number, height: Number}}\n * @memberof Core\n */\nexport function borders(el) {\n\n\tvar style = window.getComputedStyle(el);\n\tvar widthProps = [\"paddingRight\", \"paddingLeft\", \"marginRight\", \"marginLeft\", \"borderRightWidth\", \"borderLeftWidth\"];\n\tvar heightProps = [\"paddingTop\", \"paddingBottom\", \"marginTop\", \"marginBottom\", \"borderTopWidth\", \"borderBottomWidth\"];\n\n\tvar width = 0;\n\tvar height = 0;\n\n\twidthProps.forEach(function(prop){\n\t\twidth += parseFloat(style[prop]) || 0;\n\t});\n\n\theightProps.forEach(function(prop){\n\t\theight += parseFloat(style[prop]) || 0;\n\t});\n\n\treturn {\n\t\theight: height,\n\t\twidth: width\n\t};\n\n}\n\n/**\n * Find the bounds of any node\n * allows for getting bounds of text nodes by wrapping them in a range\n * @param {node} node\n * @returns {BoundingClientRect}\n * @memberof Core\n */\nexport function nodeBounds(node) {\n\tlet elPos;\n\tlet doc = node.ownerDocument;\n\tif(node.nodeType == Node.TEXT_NODE){\n\t\tlet elRange = doc.createRange();\n\t\telRange.selectNodeContents(node);\n\t\telPos = elRange.getBoundingClientRect();\n\t} else {\n\t\telPos = node.getBoundingClientRect();\n\t}\n\treturn elPos;\n}\n\n/**\n * Find the equivelent of getBoundingClientRect of a browser window\n * @returns {{ width: Number, height: Number, top: Number, left: Number, right: Number, bottom: Number }}\n * @memberof Core\n */\nexport function windowBounds() {\n\n\tvar width = window.innerWidth;\n\tvar height = window.innerHeight;\n\n\treturn {\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: width,\n\t\tbottom: height,\n\t\twidth: width,\n\t\theight: height\n\t};\n\n}\n\n/**\n * Gets the index of a node in its parent\n * @param {Node} node\n * @param {string} typeId\n * @return {number} index\n * @memberof Core\n */\nexport function indexOfNode(node, typeId) {\n\tvar parent = node.parentNode;\n\tvar children = parent.childNodes;\n\tvar sib;\n\tvar index = -1;\n\tfor (var i = 0; i < children.length; i++) {\n\t\tsib = children[i];\n\t\tif (sib.nodeType === typeId) {\n\t\t\tindex++;\n\t\t}\n\t\tif (sib == node) break;\n\t}\n\n\treturn index;\n}\n\n/**\n * Gets the index of a text node in its parent\n * @param {node} textNode\n * @returns {number} index\n * @memberof Core\n */\nexport function indexOfTextNode(textNode) {\n\treturn indexOfNode(textNode, TEXT_NODE);\n}\n\n/**\n * Gets the index of an element node in its parent\n * @param {element} elementNode\n * @returns {number} index\n * @memberof Core\n */\nexport function indexOfElementNode(elementNode) {\n\treturn indexOfNode(elementNode, ELEMENT_NODE);\n}\n\n/**\n * Check if extension is xml\n * @param {string} ext\n * @returns {boolean}\n * @memberof Core\n */\nexport function isXml(ext) {\n\treturn [\"xml\", \"opf\", \"ncx\"].indexOf(ext) > -1;\n}\n\n/**\n * Create a new blob\n * @param {any} content\n * @param {string} mime\n * @returns {Blob}\n * @memberof Core\n */\nexport function createBlob(content, mime){\n\treturn new Blob([content], {type : mime });\n}\n\n/**\n * Create a new blob url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\nexport function createBlobUrl(content, mime){\n\tvar tempUrl;\n\tvar blob = createBlob(content, mime);\n\n\ttempUrl = _URL.createObjectURL(blob);\n\n\treturn tempUrl;\n}\n\n/**\n * Remove a blob url\n * @param {string} url\n * @memberof Core\n */\nexport function revokeBlobUrl(url){\n\treturn _URL.revokeObjectURL(url);\n}\n\n/**\n * Create a new base64 encoded url\n * @param {any} content\n * @param {string} mime\n * @returns {string} url\n * @memberof Core\n */\nexport function createBase64Url(content, mime){\n\tvar data;\n\tvar datauri;\n\n\tif (typeof(content) !== \"string\") {\n\t\t// Only handles strings\n\t\treturn;\n\t}\n\n\tdata = btoa(encodeURIComponent(content));\n\n\tdatauri = \"data:\" + mime + \";base64,\" + data;\n\n\treturn datauri;\n}\n\n/**\n * Get type of an object\n * @param {object} obj\n * @returns {string} type\n * @memberof Core\n */\nexport function type(obj){\n\treturn Object.prototype.toString.call(obj).slice(8, -1);\n}\n\n/**\n * Parse xml (or html) markup\n * @param {string} markup\n * @param {string} mime\n * @param {boolean} forceXMLDom force using xmlDom to parse instead of native parser\n * @returns {document} document\n * @memberof Core\n */\nexport function parse(markup, mime, forceXMLDom) {\n\tvar doc;\n\tvar Parser;\n\n\tif (typeof DOMParser === \"undefined\" || forceXMLDom) {\n\t\tParser = require(\"xmldom\").DOMParser;\n\t} else {\n\t\tParser = DOMParser;\n\t}\n\n\t// Remove byte order mark before parsing\n\t// https://www.w3.org/International/questions/qa-byte-order-mark\n\tif(markup.charCodeAt(0) === 0xFEFF) {\n\t\tmarkup = markup.slice(1);\n\t}\n\n\tdoc = new Parser().parseFromString(markup, mime);\n\n\treturn doc;\n}\n\n/**\n * querySelector polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element} element\n * @memberof Core\n */\nexport function qs(el, sel) {\n\tvar elements;\n\tif (!el) {\n\t\tthrow new Error(\"No Element Provided\");\n\t}\n\n\tif (typeof el.querySelector != \"undefined\") {\n\t\treturn el.querySelector(sel);\n\t} else {\n\t\telements = el.getElementsByTagName(sel);\n\t\tif (elements.length) {\n\t\t\treturn elements[0];\n\t\t}\n\t}\n}\n\n/**\n * querySelectorAll polyfill\n * @param {element} el\n * @param {string} sel selector string\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function qsa(el, sel) {\n\n\tif (typeof el.querySelector != \"undefined\") {\n\t\treturn el.querySelectorAll(sel);\n\t} else {\n\t\treturn el.getElementsByTagName(sel);\n\t}\n}\n\n/**\n * querySelector by property\n * @param {element} el\n * @param {string} sel selector string\n * @param {object[]} props\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function qsp(el, sel, props) {\n\tvar q, filtered;\n\tif (typeof el.querySelector != \"undefined\") {\n\t\tsel += \"[\";\n\t\tfor (var prop in props) {\n\t\t\tsel += prop + \"~='\" + props[prop] + \"'\";\n\t\t}\n\t\tsel += \"]\";\n\t\treturn el.querySelector(sel);\n\t} else {\n\t\tq = el.getElementsByTagName(sel);\n\t\tfiltered = Array.prototype.slice.call(q, 0).filter(function(el) {\n\t\t\tfor (var prop in props) {\n\t\t\t\tif(el.getAttribute(prop) === props[prop]){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\tif (filtered) {\n\t\t\treturn filtered[0];\n\t\t}\n\t}\n}\n\n/**\n * Sprint through all text nodes in a document\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n */\nexport function sprint(root, func) {\n\tvar doc = root.ownerDocument || root;\n\tif (typeof(doc.createTreeWalker) !== \"undefined\") {\n\t\ttreeWalker(root, func, NodeFilter.SHOW_TEXT);\n\t} else {\n\t\twalk(root, function(node) {\n\t\t\tif (node && node.nodeType === 3) { // Node.TEXT_NODE\n\t\t\t\tfunc(node);\n\t\t\t}\n\t\t}, true);\n\t}\n}\n\n/**\n * Create a treeWalker\n * @memberof Core\n * @param  {element} root element to start with\n * @param  {function} func function to run on each element\n * @param  {function | object} filter funtion or object to filter with\n */\nexport function treeWalker(root, func, filter) {\n\tvar treeWalker = document.createTreeWalker(root, filter, null, false);\n\tlet node;\n\twhile ((node = treeWalker.nextNode())) {\n\t\tfunc(node);\n\t}\n}\n\n/**\n * @memberof Core\n * @param {node} node\n * @param {callback} return false for continue,true for break inside callback\n */\nexport function walk(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tnode = node.firstChild;\n\tif(node){\n\t\tdo{\n\t\t\tlet walked = walk(node,callback);\n\t\t\tif(walked){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tnode = node.nextSibling;\n\t\t} while(node);\n\t}\n}\n\n/**\n * Convert a blob to a base64 encoded string\n * @param {Blog} blob\n * @returns {string}\n * @memberof Core\n */\nexport function blob2base64(blob) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar reader = new FileReader();\n\t\treader.readAsDataURL(blob);\n\t\treader.onloadend = function() {\n\t\t\tresolve(reader.result);\n\t\t};\n\t});\n}\n\n\n/**\n * Creates a new pending promise and provides methods to resolve or reject it.\n * From: https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Promise.jsm/Deferred#backwards_forwards_compatible\n * @memberof Core\n */\nexport function defer() {\n\t/* A method to resolve the associated Promise with the value passed.\n\t * If the promise is already settled it does nothing.\n\t *\n\t * @param {anything} value : This value is used to resolve the promise\n\t * If the value is a Promise then the associated promise assumes the state\n\t * of Promise passed as value.\n\t */\n\tthis.resolve = null;\n\n\t/* A method to reject the assocaited Promise with the value passed.\n\t * If the promise is already settled it does nothing.\n\t *\n\t * @param {anything} reason: The reason for the rejection of the Promise.\n\t * Generally its an Error object. If however a Promise is passed, then the Promise\n\t * itself will be the reason for rejection no matter the state of the Promise.\n\t */\n\tthis.reject = null;\n\n\tthis.id = uuid();\n\n\t/* A newly created Pomise object.\n\t * Initially in pending state.\n\t */\n\tthis.promise = new Promise((resolve, reject) => {\n\t\tthis.resolve = resolve;\n\t\tthis.reject = reject;\n\t});\n\tObject.freeze(this);\n}\n\n/**\n * querySelector with filter by epub type\n * @param {element} html\n * @param {string} element element type to find\n * @param {string} type epub type to find\n * @returns {element[]} elements\n * @memberof Core\n */\nexport function querySelectorByType(html, element, type){\n\tvar query;\n\tif (typeof html.querySelector != \"undefined\") {\n\t\tquery = html.querySelector(`${element}[*|type=\"${type}\"]`);\n\t}\n\t// Handle IE not supporting namespaced epub:type in querySelector\n\tif(!query || query.length === 0) {\n\t\tquery = qsa(html, element);\n\t\tfor (var i = 0; i < query.length; i++) {\n\t\t\tif(query[i].getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") === type ||\n\t\t\t\t query[i].getAttribute(\"epub:type\") === type) {\n\t\t\t\treturn query[i];\n\t\t\t}\n\t\t}\n\t} else {\n\t\treturn query;\n\t}\n}\n\n/**\n * Find direct decendents of an element\n * @param {element} el\n * @returns {element[]} children\n * @memberof Core\n */\nexport function findChildren(el) {\n\tvar result = [];\n\tvar childNodes = el.childNodes;\n\tfor (var i = 0; i < childNodes.length; i++) {\n\t\tlet node = childNodes[i];\n\t\tif (node.nodeType === 1) {\n\t\t\tresult.push(node);\n\t\t}\n\t}\n\treturn result;\n}\n\n/**\n * Find all parents (ancestors) of an element\n * @param {element} node\n * @returns {element[]} parents\n * @memberof Core\n */\nexport function parents(node) {\n\tvar nodes = [node];\n\tfor (; node; node = node.parentNode) {\n\t\tnodes.unshift(node);\n\t}\n\treturn nodes\n}\n\n/**\n * Find all direct decendents of a specific type\n * @param {element} el\n * @param {string} nodeName\n * @param {boolean} [single]\n * @returns {element[]} children\n * @memberof Core\n */\nexport function filterChildren(el, nodeName, single) {\n\tvar result = [];\n\tvar childNodes = el.childNodes;\n\tfor (var i = 0; i < childNodes.length; i++) {\n\t\tlet node = childNodes[i];\n\t\tif (node.nodeType === 1 && node.nodeName.toLowerCase() === nodeName) {\n\t\t\tif (single) {\n\t\t\t\treturn node;\n\t\t\t} else {\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t}\n\t}\n\tif (!single) {\n\t\treturn result;\n\t}\n}\n\n/**\n * Filter all parents (ancestors) with tag name\n * @param {element} node\n * @param {string} tagname\n * @returns {element[]} parents\n * @memberof Core\n */\nexport function getParentByTagName(node, tagname) {\n\tlet parent;\n\tif (node === null || tagname === '') return;\n\tparent = node.parentNode;\n\twhile (parent.nodeType === 1) {\n\t\tif (parent.tagName.toLowerCase() === tagname) {\n\t\t\treturn parent;\n\t\t}\n\t\tparent = parent.parentNode;\n\t}\n}\n\n/**\n * Lightweight Polyfill for DOM Range\n * @class\n * @memberof Core\n */\nexport class RangeObject {\n\tconstructor() {\n\t\tthis.collapsed = false;\n\t\tthis.commonAncestorContainer = undefined;\n\t\tthis.endContainer = undefined;\n\t\tthis.endOffset = undefined;\n\t\tthis.startContainer = undefined;\n\t\tthis.startOffset = undefined;\n\t}\n\n\tsetStart(startNode, startOffset) {\n\t\tthis.startContainer = startNode;\n\t\tthis.startOffset = startOffset;\n\n\t\tif (!this.endContainer) {\n\t\t\tthis.collapse(true);\n\t\t} else {\n\t\t\tthis.commonAncestorContainer = this._commonAncestorContainer();\n\t\t}\n\n\t\tthis._checkCollapsed();\n\t}\n\n\tsetEnd(endNode, endOffset) {\n\t\tthis.endContainer = endNode;\n\t\tthis.endOffset = endOffset;\n\n\t\tif (!this.startContainer) {\n\t\t\tthis.collapse(false);\n\t\t} else {\n\t\t\tthis.collapsed = false;\n\t\t\tthis.commonAncestorContainer = this._commonAncestorContainer();\n\t\t}\n\n\t\tthis._checkCollapsed();\n\t}\n\n\tcollapse(toStart) {\n\t\tthis.collapsed = true;\n\t\tif (toStart) {\n\t\t\tthis.endContainer = this.startContainer;\n\t\t\tthis.endOffset = this.startOffset;\n\t\t\tthis.commonAncestorContainer = this.startContainer.parentNode;\n\t\t} else {\n\t\t\tthis.startContainer = this.endContainer;\n\t\t\tthis.startOffset = this.endOffset;\n\t\t\tthis.commonAncestorContainer = this.endOffset.parentNode;\n\t\t}\n\t}\n\n\tselectNode(referenceNode) {\n\t\tlet parent = referenceNode.parentNode;\n\t\tlet index = Array.prototype.indexOf.call(parent.childNodes, referenceNode);\n\t\tthis.setStart(parent, index);\n\t\tthis.setEnd(parent, index + 1);\n\t}\n\n\tselectNodeContents(referenceNode) {\n\t\tlet end = referenceNode.childNodes[referenceNode.childNodes - 1];\n\t\tlet endIndex = (referenceNode.nodeType === 3) ?\n\t\t\t\treferenceNode.textContent.length : parent.childNodes.length;\n\t\tthis.setStart(referenceNode, 0);\n\t\tthis.setEnd(referenceNode, endIndex);\n\t}\n\n\t_commonAncestorContainer(startContainer, endContainer) {\n\t\tvar startParents = parents(startContainer || this.startContainer);\n\t\tvar endParents = parents(endContainer || this.endContainer);\n\n\t\tif (startParents[0] != endParents[0]) return undefined;\n\n\t\tfor (var i = 0; i < startParents.length; i++) {\n\t\t\tif (startParents[i] != endParents[i]) {\n\t\t\t\treturn startParents[i - 1];\n\t\t\t}\n\t\t}\n\t}\n\n\t_checkCollapsed() {\n\t\tif (this.startContainer === this.endContainer &&\n\t\t\t\tthis.startOffset === this.endOffset) {\n\t\t\tthis.collapsed = true;\n\t\t} else {\n\t\t\tthis.collapsed = false;\n\t\t}\n\t}\n\n\ttoString() {\n\t\t// TODO: implement walking between start and end to find text\n\t}\n}\n","'use strict';\n\nif (!process) {\n  var process = {\n    \"cwd\" : function () { return '/' }\n  };\n}\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + path);\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47/*/*/)\n      break;\n    else\n      code = 47/*/*/;\n    if (code === 47/*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 ||\n            res.charCodeAt(res.length - 1) !== 46/*.*/ ||\n            res.charCodeAt(res.length - 2) !== 46/*.*/) {\n          if (res.length > 2) {\n            var start = res.length - 1;\n            var j = start;\n            for (; j >= 0; --j) {\n              if (res.charCodeAt(j) === 47/*/*/)\n                break;\n            }\n            if (j !== start) {\n              if (j === -1)\n                res = '';\n              else\n                res = res.slice(0, j);\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46/*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base ||\n    ((pathObject.name || '') + (pathObject.ext || ''));\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47/*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0)\n      return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47/*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47/*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute)\n      path = '.';\n    if (path.length > 0 && trailingSeparator)\n      path += '/';\n\n    if (isAbsolute)\n      return '/' + path;\n    return path;\n  },\n\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47/*/*/;\n  },\n\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to)\n      return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to)\n      return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47/*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = (fromEnd - fromStart);\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47/*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = (toEnd - toStart);\n\n    // Compare paths to find the longest common path from root\n    var length = (fromLen < toLen ? fromLen : toLen);\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47/*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47/*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47/*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47/*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47/*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0)\n      return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = (code === 47/*/*/);\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1)\n      return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1)\n      return '//';\n    return path.slice(0, end);\n  },\n\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string')\n      throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path)\n        return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1)\n        return '';\n      return path.slice(start, end);\n    }\n  },\n\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError(\n        'Parameter \"pathObject\" must be an object, not ' + typeof(pathObject)\n      );\n    }\n    return _format('/', pathObject);\n  },\n\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0)\n      return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = (code === 47/*/*/);\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path.slice(1, end);\n        else\n          ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0)\n      ret.dir = path.slice(0, startPart - 1);\n    else if (isAbsolute)\n      ret.dir = '/';\n\n    return ret;\n  },\n\n\n  sep: '/',\n  delimiter: ':',\n  posix: null\n};\n\n\nmodule.exports = posix;\n","import path from \"path-webpack\";\n\n/**\n * Creates a Path object for parsing and manipulation of a path strings\n *\n * Uses a polyfill for Nodejs path: https://nodejs.org/api/path.html\n * @param\t{string} pathString\ta url string (relative or absolute)\n * @class\n */\nclass Path {\n\tconstructor(pathString) {\n\t\tvar protocol;\n\t\tvar parsed;\n\n\t\tprotocol = pathString.indexOf(\"://\");\n\t\tif (protocol > -1) {\n\t\t\tpathString = new URL(pathString).pathname;\n\t\t}\n\n\t\tparsed = this.parse(pathString);\n\n\t\tthis.path = pathString;\n\n\t\tif (this.isDirectory(pathString)) {\n\t\t\tthis.directory = pathString;\n\t\t} else {\n\t\t\tthis.directory = parsed.dir + \"/\";\n\t\t}\n\n\t\tthis.filename = parsed.base;\n\t\tthis.extension = parsed.ext.slice(1);\n\n\t}\n\n\t/**\n\t * Parse the path: https://nodejs.org/api/path.html#path_path_parse_path\n\t * @param\t{string} what\n\t * @returns {object}\n\t */\n\tparse (what) {\n\t\treturn path.parse(what);\n\t}\n\n\t/**\n\t * @param\t{string} what\n\t * @returns {boolean}\n\t */\n\tisAbsolute (what) {\n\t\treturn path.isAbsolute(what || this.path);\n\t}\n\n\t/**\n\t * Check if path ends with a directory\n\t * @param\t{string} what\n\t * @returns {boolean}\n\t */\n\tisDirectory (what) {\n\t\treturn (what.charAt(what.length-1) === \"/\");\n\t}\n\n\t/**\n\t * Resolve a path against the directory of the Path\n\t *\n\t * https://nodejs.org/api/path.html#path_path_resolve_paths\n\t * @param\t{string} what\n\t * @returns {string} resolved\n\t */\n\tresolve (what) {\n\t\treturn path.resolve(this.directory, what);\n\t}\n\n\t/**\n\t * Resolve a path relative to the directory of the Path\n\t *\n\t * https://nodejs.org/api/path.html#path_path_relative_from_to\n\t * @param\t{string} what\n\t * @returns {string} relative\n\t */\n\trelative (what) {\n\t\tvar isAbsolute = what && (what.indexOf(\"://\") > -1);\n\n\t\tif (isAbsolute) {\n\t\t\treturn what;\n\t\t}\n\n\t\treturn path.relative(this.directory, what);\n\t}\n\n\tsplitPath(filename) {\n\t\treturn this.splitPathRe.exec(filename).slice(1);\n\t}\n\n\t/**\n\t * Return the path string\n\t * @returns {string} path\n\t */\n\ttoString () {\n\t\treturn this.path;\n\t}\n}\n\nexport default Path;\n","import Path from \"./path\";\nimport path from \"path-webpack\";\n\n/**\n * creates a Url object for parsing and manipulation of a url string\n * @param\t{string} urlString\ta url string (relative or absolute)\n * @param\t{string} [baseString] optional base for the url,\n * default to window.location.href\n */\nclass Url {\n\tconstructor(urlString, baseString) {\n\t\tvar absolute = (urlString.indexOf(\"://\") > -1);\n\t\tvar pathname = urlString;\n\t\tvar basePath;\n\n\t\tthis.Url = undefined;\n\t\tthis.href = urlString;\n\t\tthis.protocol = \"\";\n\t\tthis.origin = \"\";\n\t\tthis.hash = \"\";\n\t\tthis.hash = \"\";\n\t\tthis.search = \"\";\n\t\tthis.base = baseString;\n\n\t\tif (!absolute &&\n\t\t\t\tbaseString !== false &&\n\t\t\t\ttypeof(baseString) !== \"string\" &&\n\t\t\t\twindow && window.location) {\n\t\t\tthis.base = window.location.href;\n\t\t}\n\n\t\t// URL Polyfill doesn't throw an error if base is empty\n\t\tif (absolute || this.base) {\n\t\t\ttry {\n\t\t\t\tif (this.base) { // Safari doesn't like an undefined base\n\t\t\t\t\tthis.Url = new URL(urlString, this.base);\n\t\t\t\t} else {\n\t\t\t\t\tthis.Url = new URL(urlString);\n\t\t\t\t}\n\t\t\t\tthis.href = this.Url.href;\n\n\t\t\t\tthis.protocol = this.Url.protocol;\n\t\t\t\tthis.origin = this.Url.origin;\n\t\t\t\tthis.hash = this.Url.hash;\n\t\t\t\tthis.search = this.Url.search;\n\n\t\t\t\tpathname = this.Url.pathname;\n\t\t\t} catch (e) {\n\t\t\t\t// Skip URL parsing\n\t\t\t\tthis.Url = undefined;\n\t\t\t\t// resolve the pathname from the base\n\t\t\t\tif (this.base) {\n\t\t\t\t\tbasePath = new Path(this.base);\n\t\t\t\t\tpathname = basePath.resolve(pathname);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.Path = new Path(pathname);\n\n\t\tthis.directory = this.Path.directory;\n\t\tthis.filename = this.Path.filename;\n\t\tthis.extension = this.Path.extension;\n\n\t}\n\n\t/**\n\t * @returns {Path}\n\t */\n\tpath () {\n\t\treturn this.Path;\n\t}\n\n\t/**\n\t * Resolves a relative path to a absolute url\n\t * @param {string} what\n\t * @returns {string} url\n\t */\n\tresolve (what) {\n\t\tvar isAbsolute = (what.indexOf(\"://\") > -1);\n\t\tvar fullpath;\n\n\t\tif (isAbsolute) {\n\t\t\treturn what;\n\t\t}\n\n\t\tfullpath = path.resolve(this.directory, what);\n\t\treturn this.origin + fullpath;\n\t}\n\n\t/**\n\t * Resolve a path relative to the url\n\t * @param {string} what\n\t * @returns {string} path\n\t */\n\trelative (what) {\n\t\treturn path.relative(what, this.directory);\n\t}\n\n\t/**\n\t * @returns {string}\n\t */\n\ttoString () {\n\t\treturn this.href;\n\t}\n}\n\nexport default Url;\n","import {extend, type, findChildren, RangeObject, isNumber} from \"./utils/core\";\n\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nconst DOCUMENT_NODE = 9;\n\n/**\n\t* Parsing and creation of EpubCFIs: http://www.idpf.org/epub/linking/cfi/epub-cfi.html\n\n\t* Implements:\n\t* - Character Offset: epubcfi(/6/4[chap01ref]!/4[body01]/10[para05]/2/1:3)\n\t* - Simple Ranges : epubcfi(/6/4[chap01ref]!/4[body01]/10[para05],/2/1:1,/3:4)\n\n\t* Does Not Implement:\n\t* - Temporal Offset (~)\n\t* - Spatial Offset (@)\n\t* - Temporal-Spatial Offset (~ + @)\n\t* - Text Location Assertion ([)\n\t* @class\n\t@param {string | Range | Node } [cfiFrom]\n\t@param {string | object} [base]\n\t@param {string} [ignoreClass] class to ignore when parsing DOM\n*/\nclass EpubCFI {\n\tconstructor(cfiFrom, base, ignoreClass){\n\t\tvar type;\n\n\t\tthis.str = \"\";\n\n\t\tthis.base = {};\n\t\tthis.spinePos = 0; // For compatibility\n\n\t\tthis.range = false; // true || false;\n\n\t\tthis.path = {};\n\t\tthis.start = null;\n\t\tthis.end = null;\n\n\t\t// Allow instantiation without the \"new\" keyword\n\t\tif (!(this instanceof EpubCFI)) {\n\t\t\treturn new EpubCFI(cfiFrom, base, ignoreClass);\n\t\t}\n\n\t\tif(typeof base === \"string\") {\n\t\t\tthis.base = this.parseComponent(base);\n\t\t} else if(typeof base === \"object\" && base.steps) {\n\t\t\tthis.base = base;\n\t\t}\n\n\t\ttype = this.checkType(cfiFrom);\n\n\n\t\tif(type === \"string\") {\n\t\t\tthis.str = cfiFrom;\n\t\t\treturn extend(this, this.parse(cfiFrom));\n\t\t} else if (type === \"range\") {\n\t\t\treturn extend(this, this.fromRange(cfiFrom, this.base, ignoreClass));\n\t\t} else if (type === \"node\") {\n\t\t\treturn extend(this, this.fromNode(cfiFrom, this.base, ignoreClass));\n\t\t} else if (type === \"EpubCFI\" && cfiFrom.path) {\n\t\t\treturn cfiFrom;\n\t\t} else if (!cfiFrom) {\n\t\t\treturn this;\n\t\t} else {\n\t\t\tthrow new TypeError(\"not a valid argument for EpubCFI\");\n\t\t}\n\n\t}\n\n\t/**\n\t * Check the type of constructor input\n\t * @private\n\t */\n\tcheckType(cfi) {\n\n\t\tif (this.isCfiString(cfi)) {\n\t\t\treturn \"string\";\n\t\t// Is a range object\n\t\t} else if (cfi && typeof cfi === \"object\" && (type(cfi) === \"Range\" || typeof(cfi.startContainer) != \"undefined\")){\n\t\t\treturn \"range\";\n\t\t} else if (cfi && typeof cfi === \"object\" && typeof(cfi.nodeType) != \"undefined\" ){ // || typeof cfi === \"function\"\n\t\t\treturn \"node\";\n\t\t} else if (cfi && typeof cfi === \"object\" && cfi instanceof EpubCFI){\n\t\t\treturn \"EpubCFI\";\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Parse a cfi string to a CFI object representation\n\t * @param {string} cfiStr\n\t * @returns {object} cfi\n\t */\n\tparse(cfiStr) {\n\t\tvar cfi = {\n\t\t\tspinePos: -1,\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\t\tvar baseComponent, pathComponent, range;\n\n\t\tif(typeof cfiStr !== \"string\") {\n\t\t\treturn {spinePos: -1};\n\t\t}\n\n\t\tif(cfiStr.indexOf(\"epubcfi(\") === 0 && cfiStr[cfiStr.length-1] === \")\") {\n\t\t\t// Remove intial epubcfi( and ending )\n\t\t\tcfiStr = cfiStr.slice(8, cfiStr.length-1);\n\t\t}\n\n\t\tbaseComponent = this.getChapterComponent(cfiStr);\n\n\t\t// Make sure this is a valid cfi or return\n\t\tif(!baseComponent) {\n\t\t\treturn {spinePos: -1};\n\t\t}\n\n\t\tcfi.base = this.parseComponent(baseComponent);\n\n\t\tpathComponent = this.getPathComponent(cfiStr);\n\t\tcfi.path = this.parseComponent(pathComponent);\n\n\t\trange = this.getRange(cfiStr);\n\n\t\tif(range) {\n\t\t\tcfi.range = true;\n\t\t\tcfi.start = this.parseComponent(range[0]);\n\t\t\tcfi.end = this.parseComponent(range[1]);\n\t\t}\n\n\t\t// Get spine node position\n\t\t// cfi.spineSegment = cfi.base.steps[1];\n\n\t\t// Chapter segment is always the second step\n\t\tcfi.spinePos = cfi.base.steps[1].index;\n\n\t\treturn cfi;\n\t}\n\n\tparseComponent(componentStr){\n\t\tvar component = {\n\t\t\tsteps: [],\n\t\t\tterminal: {\n\t\t\t\toffset: null,\n\t\t\t\tassertion: null\n\t\t\t}\n\t\t};\n\t\tvar parts = componentStr.split(\":\");\n\t\tvar steps = parts[0].split(\"/\");\n\t\tvar terminal;\n\n\t\tif(parts.length > 1) {\n\t\t\tterminal = parts[1];\n\t\t\tcomponent.terminal = this.parseTerminal(terminal);\n\t\t}\n\n\t\tif (steps[0] === \"\") {\n\t\t\tsteps.shift(); // Ignore the first slash\n\t\t}\n\n\t\tcomponent.steps = steps.map(function(step){\n\t\t\treturn this.parseStep(step);\n\t\t}.bind(this));\n\n\t\treturn component;\n\t}\n\n\tparseStep(stepStr){\n\t\tvar type, num, index, has_brackets, id;\n\n\t\thas_brackets = stepStr.match(/\\[(.*)\\]/);\n\t\tif(has_brackets && has_brackets[1]){\n\t\t\tid = has_brackets[1];\n\t\t}\n\n\t\t//-- Check if step is a text node or element\n\t\tnum = parseInt(stepStr);\n\n\t\tif(isNaN(num)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(num % 2 === 0) { // Even = is an element\n\t\t\ttype = \"element\";\n\t\t\tindex = num / 2 - 1;\n\t\t} else {\n\t\t\ttype = \"text\";\n\t\t\tindex = (num - 1 ) / 2;\n\t\t}\n\n\t\treturn {\n\t\t\t\"type\" : type,\n\t\t\t\"index\" : index,\n\t\t\t\"id\" : id || null\n\t\t};\n\t}\n\n\tparseTerminal(termialStr){\n\t\tvar characterOffset, textLocationAssertion;\n\t\tvar assertion = termialStr.match(/\\[(.*)\\]/);\n\n\t\tif(assertion && assertion[1]){\n\t\t\tcharacterOffset = parseInt(termialStr.split(\"[\")[0]);\n\t\t\ttextLocationAssertion = assertion[1];\n\t\t} else {\n\t\t\tcharacterOffset = parseInt(termialStr);\n\t\t}\n\n\t\tif (!isNumber(characterOffset)) {\n\t\t\tcharacterOffset = null;\n\t\t}\n\n\t\treturn {\n\t\t\t\"offset\": characterOffset,\n\t\t\t\"assertion\": textLocationAssertion\n\t\t};\n\n\t}\n\n\tgetChapterComponent(cfiStr) {\n\n\t\tvar indirection = cfiStr.split(\"!\");\n\n\t\treturn indirection[0];\n\t}\n\n\tgetPathComponent(cfiStr) {\n\n\t\tvar indirection = cfiStr.split(\"!\");\n\n\t\tif(indirection[1]) {\n\t\t\tlet ranges = indirection[1].split(\",\");\n\t\t\treturn ranges[0];\n\t\t}\n\n\t}\n\n\tgetRange(cfiStr) {\n\n\t\tvar ranges = cfiStr.split(\",\");\n\n\t\tif(ranges.length === 3){\n\t\t\treturn [\n\t\t\t\tranges[1],\n\t\t\t\tranges[2]\n\t\t\t];\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetCharecterOffsetComponent(cfiStr) {\n\t\tvar splitStr = cfiStr.split(\":\");\n\t\treturn splitStr[1] || \"\";\n\t}\n\n\tjoinSteps(steps) {\n\t\tif(!steps) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\treturn steps.map(function(part){\n\t\t\tvar segment = \"\";\n\n\t\t\tif(part.type === \"element\") {\n\t\t\t\tsegment += (part.index + 1) * 2;\n\t\t\t}\n\n\t\t\tif(part.type === \"text\") {\n\t\t\t\tsegment += 1 + (2 * part.index); // TODO: double check that this is odd\n\t\t\t}\n\n\t\t\tif(part.id) {\n\t\t\t\tsegment += \"[\" + part.id + \"]\";\n\t\t\t}\n\n\t\t\treturn segment;\n\n\t\t}).join(\"/\");\n\n\t}\n\n\tsegmentString(segment) {\n\t\tvar segmentString = \"/\";\n\n\t\tsegmentString += this.joinSteps(segment.steps);\n\n\t\tif(segment.terminal && segment.terminal.offset != null){\n\t\t\tsegmentString += \":\" + segment.terminal.offset;\n\t\t}\n\n\t\tif(segment.terminal && segment.terminal.assertion != null){\n\t\t\tsegmentString += \"[\" + segment.terminal.assertion + \"]\";\n\t\t}\n\n\t\treturn segmentString;\n\t}\n\n\t/**\n\t * Convert CFI to a epubcfi(...) string\n\t * @returns {string} epubcfi\n\t */\n\ttoString(cfi) {\n\t\tif ( ! cfi ) { cfi = this; }\n\t\tvar cfiString = \"epubcfi(\";\n\n\t\tcfiString += this.segmentString(cfi.base);\n\n\t\tcfiString += \"!\";\n\t\tcfiString += this.segmentString(cfi.path);\n\n\t\t// Add Range, if present\n\t\tif(cfi.range && cfi.start) {\n\t\t\tcfiString += \",\";\n\t\t\tcfiString += this.segmentString(cfi.start);\n\t\t}\n\n\t\tif(cfi.range && cfi.end) {\n\t\t\tcfiString += \",\";\n\t\t\tcfiString += this.segmentString(cfi.end);\n\t\t}\n\n\t\tcfiString += \")\";\n\n\t\treturn cfiString;\n\t}\n\n\n\t/**\n\t * Compare which of two CFIs is earlier in the text\n\t * @returns {number} First is earlier = -1, Second is earlier = 1, They are equal = 0\n\t */\n\tcompare(cfiOne, cfiTwo) {\n\t\tvar stepsA, stepsB;\n\t\tvar terminalA, terminalB;\n\n\t\tvar rangeAStartSteps, rangeAEndSteps;\n\t\tvar rangeBEndSteps, rangeBEndSteps;\n\t\tvar rangeAStartTerminal, rangeAEndTerminal;\n\t\tvar rangeBStartTerminal, rangeBEndTerminal;\n\n\t\tif(typeof cfiOne === \"string\") {\n\t\t\tcfiOne = new EpubCFI(cfiOne);\n\t\t}\n\t\tif(typeof cfiTwo === \"string\") {\n\t\t\tcfiTwo = new EpubCFI(cfiTwo);\n\t\t}\n\t\t// Compare Spine Positions\n\t\tif(cfiOne.spinePos > cfiTwo.spinePos) {\n\t\t\treturn 1;\n\t\t}\n\t\tif(cfiOne.spinePos < cfiTwo.spinePos) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (cfiOne.range) {\n\t\t\tstepsA = cfiOne.path.steps.concat(cfiOne.start.steps);\n\t\t\tterminalA = cfiOne.start.terminal;\n\t\t} else {\n\t\t\tstepsA = cfiOne.path.steps;\n\t\t\tterminalA = cfiOne.path.terminal;\n\t\t}\n\n\t\tif (cfiTwo.range) {\n\t\t\tstepsB = cfiTwo.path.steps.concat(cfiTwo.start.steps);\n\t\t\tterminalB = cfiTwo.start.terminal;\n\t\t} else {\n\t\t\tstepsB = cfiTwo.path.steps;\n\t\t\tterminalB = cfiTwo.path.terminal;\n\t\t}\n\n\t\t// Compare Each Step in the First item\n\t\tfor (var i = 0; i < stepsA.length; i++) {\n\t\t\tif(!stepsA[i]) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif(!stepsB[i]) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif(stepsA[i].index > stepsB[i].index) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif(stepsA[i].index < stepsB[i].index) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\t// Otherwise continue checking\n\t\t}\n\n\t\t// All steps in First equal to Second and First is Less Specific\n\t\tif(stepsA.length < stepsB.length) {\n\t\t\treturn 1;\n\t\t}\n\n\t\t// Compare the charecter offset of the text node\n\t\tif(terminalA.offset > terminalB.offset) {\n\t\t\treturn 1;\n\t\t}\n\t\tif(terminalA.offset < terminalB.offset) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// CFI's are equal\n\t\treturn 0;\n\t}\n\n\tstep(node) {\n\t\tvar nodeType = (node.nodeType === TEXT_NODE) ? \"text\" : \"element\";\n\n\t\treturn {\n\t\t\t\"id\" : node.id,\n\t\t\t\"tagName\" : node.tagName,\n\t\t\t\"type\" : nodeType,\n\t\t\t\"index\" : this.position(node)\n\t\t};\n\t}\n\n\tfilteredStep(node, ignoreClass) {\n\t\tvar filteredNode = this.filter(node, ignoreClass);\n\t\tvar nodeType;\n\n\t\t// Node filtered, so ignore\n\t\tif (!filteredNode) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Otherwise add the filter node in\n\t\tnodeType = (filteredNode.nodeType === TEXT_NODE) ? \"text\" : \"element\";\n\n\t\treturn {\n\t\t\t\"id\" : filteredNode.id,\n\t\t\t\"tagName\" : filteredNode.tagName,\n\t\t\t\"type\" : nodeType,\n\t\t\t\"index\" : this.filteredPosition(filteredNode, ignoreClass)\n\t\t};\n\t}\n\n\tpathTo(node, offset, ignoreClass) {\n\t\tvar segment = {\n\t\t\tsteps: [],\n\t\t\tterminal: {\n\t\t\t\toffset: null,\n\t\t\t\tassertion: null\n\t\t\t}\n\t\t};\n\t\tvar currentNode = node;\n\t\tvar step;\n\n\t\twhile(currentNode && currentNode.parentNode &&\n\t\t\t\t\tcurrentNode.parentNode.nodeType != DOCUMENT_NODE) {\n\n\t\t\tif (ignoreClass) {\n\t\t\t\tstep = this.filteredStep(currentNode, ignoreClass);\n\t\t\t} else {\n\t\t\t\tstep = this.step(currentNode);\n\t\t\t}\n\n\t\t\tif (step) {\n\t\t\t\tsegment.steps.unshift(step);\n\t\t\t}\n\n\t\t\tcurrentNode = currentNode.parentNode;\n\n\t\t}\n\n\t\tif (offset != null && offset >= 0) {\n\n\t\t\tsegment.terminal.offset = offset;\n\n\t\t\t// Make sure we are getting to a textNode if there is an offset\n\t\t\tif(segment.steps[segment.steps.length-1].type != \"text\") {\n\t\t\t\tsegment.steps.push({\n\t\t\t\t\t\"type\" : \"text\",\n\t\t\t\t\t\"index\" : 0\n\t\t\t\t});\n\t\t\t}\n\n\t\t}\n\n\n\t\treturn segment;\n\t}\n\n\tequalStep(stepA, stepB) {\n\t\tif (!stepA || !stepB) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif(stepA.index === stepB.index &&\n\t\t\t stepA.id === stepB.id &&\n\t\t\t stepA.type === stepB.type) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Create a CFI object from a Range\n\t * @param {Range} range\n\t * @param {string | object} base\n\t * @param {string} [ignoreClass]\n\t * @returns {object} cfi\n\t */\n\tfromRange(range, base, ignoreClass) {\n\t\tvar cfi = {\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\n\t\tvar start = range.startContainer;\n\t\tvar end = range.endContainer;\n\n\t\tvar startOffset = range.startOffset;\n\t\tvar endOffset = range.endOffset;\n\n\t\tvar needsIgnoring = false;\n\n\t\tif (ignoreClass) {\n\t\t\t// Tell pathTo if / what to ignore\n\t\t\tneedsIgnoring = (start.ownerDocument.querySelector(\".\" + ignoreClass) != null);\n\t\t}\n\n\n\t\tif (typeof base === \"string\") {\n\t\t\tcfi.base = this.parseComponent(base);\n\t\t\tcfi.spinePos = cfi.base.steps[1].index;\n\t\t} else if (typeof base === \"object\") {\n\t\t\tcfi.base = base;\n\t\t}\n\n\t\tif (range.collapsed) {\n\t\t\tif (needsIgnoring) {\n\t\t\t\tstartOffset = this.patchOffset(start, startOffset, ignoreClass);\n\t\t\t}\n\t\t\tcfi.path = this.pathTo(start, startOffset, ignoreClass);\n\t\t} else {\n\t\t\tcfi.range = true;\n\n\t\t\tif (needsIgnoring) {\n\t\t\t\tstartOffset = this.patchOffset(start, startOffset, ignoreClass);\n\t\t\t}\n\n\t\t\tcfi.start = this.pathTo(start, startOffset, ignoreClass);\n\t\t\tif (needsIgnoring) {\n\t\t\t\tendOffset = this.patchOffset(end, endOffset, ignoreClass);\n\t\t\t}\n\n\t\t\tcfi.end = this.pathTo(end, endOffset, ignoreClass);\n\n\t\t\t// Create a new empty path\n\t\t\tcfi.path = {\n\t\t\t\tsteps: [],\n\t\t\t\tterminal: null\n\t\t\t};\n\n\t\t\t// Push steps that are shared between start and end to the common path\n\t\t\tvar len = cfi.start.steps.length;\n\t\t\tvar i;\n\n\t\t\tfor (i = 0; i < len; i++) {\n\t\t\t\tif (this.equalStep(cfi.start.steps[i], cfi.end.steps[i])) {\n\t\t\t\t\tif(i === len-1) {\n\t\t\t\t\t\t// Last step is equal, check terminals\n\t\t\t\t\t\tif(cfi.start.terminal === cfi.end.terminal) {\n\t\t\t\t\t\t\t// CFI's are equal\n\t\t\t\t\t\t\tcfi.path.steps.push(cfi.start.steps[i]);\n\t\t\t\t\t\t\t// Not a range\n\t\t\t\t\t\t\tcfi.range = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcfi.path.steps.push(cfi.start.steps[i]);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcfi.start.steps = cfi.start.steps.slice(cfi.path.steps.length);\n\t\t\tcfi.end.steps = cfi.end.steps.slice(cfi.path.steps.length);\n\n\t\t\t// TODO: Add Sanity check to make sure that the end if greater than the start\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Create a CFI object from a Node\n\t * @param {Node} anchor\n\t * @param {string | object} base\n\t * @param {string} [ignoreClass]\n\t * @returns {object} cfi\n\t */\n\tfromNode(anchor, base, ignoreClass) {\n\t\tvar cfi = {\n\t\t\trange: false,\n\t\t\tbase: {},\n\t\t\tpath: {},\n\t\t\tstart: null,\n\t\t\tend: null\n\t\t};\n\n\t\tif (typeof base === \"string\") {\n\t\t\tcfi.base = this.parseComponent(base);\n\t\t\tcfi.spinePos = cfi.base.steps[1].index;\n\t\t} else if (typeof base === \"object\") {\n\t\t\tcfi.base = base;\n\t\t}\n\n\t\tcfi.path = this.pathTo(anchor, null, ignoreClass);\n\n\t\treturn cfi;\n\t}\n\n\tfilter(anchor, ignoreClass) {\n\t\tvar needsIgnoring;\n\t\tvar sibling; // to join with\n\t\tvar parent, previousSibling, nextSibling;\n\t\tvar isText = false;\n\n\t\tif (anchor.nodeType === TEXT_NODE) {\n\t\t\tisText = true;\n\t\t\tparent = anchor.parentNode;\n\t\t\tneedsIgnoring = anchor.parentNode.classList.contains(ignoreClass);\n\t\t} else {\n\t\t\tisText = false;\n\t\t\tneedsIgnoring = anchor.classList.contains(ignoreClass);\n\t\t}\n\n\t\tif (needsIgnoring && isText) {\n\t\t\tpreviousSibling = parent.previousSibling;\n\t\t\tnextSibling = parent.nextSibling;\n\n\t\t\t// If the sibling is a text node, join the nodes\n\t\t\tif (previousSibling && previousSibling.nodeType === TEXT_NODE) {\n\t\t\t\tsibling = previousSibling;\n\t\t\t} else if (nextSibling && nextSibling.nodeType === TEXT_NODE) {\n\t\t\t\tsibling = nextSibling;\n\t\t\t}\n\n\t\t\tif (sibling) {\n\t\t\t\treturn sibling;\n\t\t\t} else {\n\t\t\t\t// Parent will be ignored on next step\n\t\t\t\treturn anchor;\n\t\t\t}\n\n\t\t} else if (needsIgnoring && !isText) {\n\t\t\t// Otherwise just skip the element node\n\t\t\treturn false;\n\t\t} else {\n\t\t\t// No need to filter\n\t\t\treturn anchor;\n\t\t}\n\n\t}\n\n\tpatchOffset(anchor, offset, ignoreClass) {\n\t\tif (anchor.nodeType != TEXT_NODE) {\n\t\t\tthrow new Error(\"Anchor must be a text node\");\n\t\t}\n\n\t\tvar curr = anchor;\n\t\tvar totalOffset = offset;\n\n\t\t// If the parent is a ignored node, get offset from it's start\n\t\tif (anchor.parentNode.classList.contains(ignoreClass)) {\n\t\t\tcurr = anchor.parentNode;\n\t\t}\n\n\t\twhile (curr.previousSibling) {\n\t\t\tif(curr.previousSibling.nodeType === ELEMENT_NODE) {\n\t\t\t\t// Originally a text node, so join\n\t\t\t\tif(curr.previousSibling.classList.contains(ignoreClass)){\n\t\t\t\t\ttotalOffset += curr.previousSibling.textContent.length;\n\t\t\t\t} else {\n\t\t\t\t\tbreak; // Normal node, dont join\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// If the previous sibling is a text node, join the nodes\n\t\t\t\ttotalOffset += curr.previousSibling.textContent.length;\n\t\t\t}\n\n\t\t\tcurr = curr.previousSibling;\n\t\t}\n\n\t\treturn totalOffset;\n\n\t}\n\n\tnormalizedMap(children, nodeType, ignoreClass) {\n\t\tvar output = {};\n\t\tvar prevIndex = -1;\n\t\tvar i, len = children.length;\n\t\tvar currNodeType;\n\t\tvar prevNodeType;\n\n\t\tfor (i = 0; i < len; i++) {\n\n\t\t\tcurrNodeType = children[i].nodeType;\n\n\t\t\t// Check if needs ignoring\n\t\t\tif (currNodeType === ELEMENT_NODE &&\n\t\t\t\t\tchildren[i].classList.contains(ignoreClass)) {\n\t\t\t\tcurrNodeType = TEXT_NODE;\n\t\t\t}\n\n\t\t\tif (i > 0 &&\n\t\t\t\t\tcurrNodeType === TEXT_NODE &&\n\t\t\t\t\tprevNodeType === TEXT_NODE) {\n\t\t\t\t// join text nodes\n\t\t\t\toutput[i] = prevIndex;\n\t\t\t} else if (nodeType === currNodeType){\n\t\t\t\tprevIndex = prevIndex + 1;\n\t\t\t\toutput[i] = prevIndex;\n\t\t\t}\n\n\t\t\tprevNodeType = currNodeType;\n\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tposition(anchor) {\n\t\tvar children, index;\n\t\tif (anchor.nodeType === ELEMENT_NODE) {\n\t\t\tchildren = anchor.parentNode.children;\n\t\t\tif (!children) {\n\t\t\t\tchildren = findChildren(anchor.parentNode);\n\t\t\t}\n\t\t\tindex = Array.prototype.indexOf.call(children, anchor);\n\t\t} else {\n\t\t\tchildren = this.textNodes(anchor.parentNode);\n\t\t\tindex = children.indexOf(anchor);\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfilteredPosition(anchor, ignoreClass) {\n\t\tvar children, index, map;\n\n\t\tif (anchor.nodeType === ELEMENT_NODE) {\n\t\t\tchildren = anchor.parentNode.children;\n\t\t\tmap = this.normalizedMap(children, ELEMENT_NODE, ignoreClass);\n\t\t} else {\n\t\t\tchildren = anchor.parentNode.childNodes;\n\t\t\t// Inside an ignored node\n\t\t\tif(anchor.parentNode.classList.contains(ignoreClass)) {\n\t\t\t\tanchor = anchor.parentNode;\n\t\t\t\tchildren = anchor.parentNode.childNodes;\n\t\t\t}\n\t\t\tmap = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n\t\t}\n\n\n\t\tindex = Array.prototype.indexOf.call(children, anchor);\n\n\t\treturn map[index];\n\t}\n\n\tstepsToXpath(steps) {\n\t\tvar xpath = [\".\", \"*\"];\n\n\t\tsteps.forEach(function(step){\n\t\t\tvar position = step.index + 1;\n\n\t\t\tif(step.id){\n\t\t\t\txpath.push(\"*[position()=\" + position + \" and @id='\" + step.id + \"']\");\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\txpath.push(\"text()[\" + position + \"]\");\n\t\t\t} else {\n\t\t\t\txpath.push(\"*[\" + position + \"]\");\n\t\t\t}\n\t\t});\n\n\t\treturn xpath.join(\"/\");\n\t}\n\n\n\t/*\n\n\tTo get the last step if needed:\n\n\t// Get the terminal step\n\tlastStep = steps[steps.length-1];\n\t// Get the query string\n\tquery = this.stepsToQuery(steps);\n\t// Find the containing element\n\tstartContainerParent = doc.querySelector(query);\n\t// Find the text node within that element\n\tif(startContainerParent && lastStep.type == \"text\") {\n\t\tcontainer = startContainerParent.childNodes[lastStep.index];\n\t}\n\t*/\n\tstepsToQuerySelector(steps) {\n\t\tvar query = [\"html\"];\n\n\t\tsteps.forEach(function(step){\n\t\t\tvar position = step.index + 1;\n\n\t\t\tif(step.id){\n\t\t\t\tquery.push(\"#\" + step.id);\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\t// unsupported in querySelector\n\t\t\t\t// query.push(\"text()[\" + position + \"]\");\n\t\t\t} else {\n\t\t\t\tquery.push(\"*:nth-child(\" + position + \")\");\n\t\t\t}\n\t\t});\n\n\t\treturn query.join(\">\");\n\n\t}\n\n\ttextNodes(container, ignoreClass) {\n\t\treturn Array.prototype.slice.call(container.childNodes).\n\t\t\tfilter(function (node) {\n\t\t\t\tif (node.nodeType === TEXT_NODE) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else if (ignoreClass && node.classList.contains(ignoreClass)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t}\n\n\twalkToNode(steps, _doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar container = doc.documentElement;\n\t\tvar children;\n\t\tvar step;\n\t\tvar len = steps.length;\n\t\tvar i;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tstep = steps[i];\n\n\t\t\tif(step.type === \"element\") {\n\t\t\t\t//better to get a container using id as some times step.index may not be correct\n\t\t\t\t//For ex.https://github.com/futurepress/epub.js/issues/561\n\t\t\t\tif(step.id) {\n\t\t\t\t\tcontainer = doc.getElementById(step.id);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchildren = container.children || findChildren(container);\n\t\t\t\t\tcontainer = children[step.index];\n\t\t\t\t}\n\t\t\t} else if(step.type === \"text\") {\n\t\t\t\tcontainer = this.textNodes(container, ignoreClass)[step.index];\n\t\t\t}\n\t\t\tif(!container) {\n\t\t\t\t//Break the for loop as due to incorrect index we can get error if\n\t\t\t\t//container is undefined so that other functionailties works fine\n\t\t\t\t//like navigation\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t}\n\n\t\treturn container;\n\t}\n\n\tfindNode(steps, _doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar container;\n\t\tvar xpath;\n\n\t\tif(!ignoreClass && typeof doc.evaluate != \"undefined\") {\n\t\t\txpath = this.stepsToXpath(steps);\n\t\t\tcontainer = doc.evaluate(xpath, doc, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\n\t\t} else if(ignoreClass) {\n\t\t\tcontainer = this.walkToNode(steps, doc, ignoreClass);\n\t\t} else {\n\t\t\tcontainer = this.walkToNode(steps, doc);\n\t\t}\n\n\t\treturn container;\n\t}\n\n\tfixMiss(steps, offset, _doc, ignoreClass) {\n\t\tvar container = this.findNode(steps.slice(0,-1), _doc, ignoreClass);\n\t\tvar children = container.childNodes;\n\t\tvar map = this.normalizedMap(children, TEXT_NODE, ignoreClass);\n\t\tvar child;\n\t\tvar len;\n\t\tvar lastStepIndex = steps[steps.length-1].index;\n\n\t\tfor (let childIndex in map) {\n\t\t\tif (!map.hasOwnProperty(childIndex)) return;\n\n\t\t\tif(map[childIndex] === lastStepIndex) {\n\t\t\t\tchild = children[childIndex];\n\t\t\t\tlen = child.textContent.length;\n\t\t\t\tif(offset > len) {\n\t\t\t\t\toffset = offset - len;\n\t\t\t\t} else {\n\t\t\t\t\tif (child.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tcontainer = child.childNodes[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontainer = child;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tcontainer: container,\n\t\t\toffset: offset\n\t\t};\n\n\t}\n\n\t/**\n\t * Creates a DOM range representing a CFI\n\t * @param {document} _doc document referenced in the base\n\t * @param {string} [ignoreClass]\n\t * @return {Range}\n\t */\n\ttoRange(_doc, ignoreClass) {\n\t\tvar doc = _doc || document;\n\t\tvar range;\n\t\tvar start, end, startContainer, endContainer;\n\t\tvar cfi = this;\n\t\tvar startSteps, endSteps;\n\t\tvar needsIgnoring = ignoreClass ? (doc.querySelector(\".\" + ignoreClass) != null) : false;\n\t\tvar missed;\n\n\t\tif (typeof(doc.createRange) !== \"undefined\") {\n\t\t\trange = doc.createRange();\n\t\t} else {\n\t\t\trange = new RangeObject();\n\t\t}\n\n\t\tif (cfi.range) {\n\t\t\tstart = cfi.start;\n\t\t\tstartSteps = cfi.path.steps.concat(start.steps);\n\t\t\tstartContainer = this.findNode(startSteps, doc, needsIgnoring ? ignoreClass : null);\n\t\t\tend = cfi.end;\n\t\t\tendSteps = cfi.path.steps.concat(end.steps);\n\t\t\tendContainer = this.findNode(endSteps, doc, needsIgnoring ? ignoreClass : null);\n\t\t} else {\n\t\t\tstart = cfi.path;\n\t\t\tstartSteps = cfi.path.steps;\n\t\t\tstartContainer = this.findNode(cfi.path.steps, doc, needsIgnoring ? ignoreClass : null);\n\t\t}\n\n\t\tif(startContainer) {\n\t\t\ttry {\n\n\t\t\t\tif(start.terminal.offset != null) {\n\t\t\t\t\trange.setStart(startContainer, start.terminal.offset);\n\t\t\t\t} else {\n\t\t\t\t\trange.setStart(startContainer, 0);\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tmissed = this.fixMiss(startSteps, start.terminal.offset, doc, needsIgnoring ? ignoreClass : null);\n\t\t\t\trange.setStart(missed.container, missed.offset);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log(\"No startContainer found for\", this.toString());\n\t\t\t// No start found\n\t\t\treturn null;\n\t\t}\n\n\t\tif (endContainer) {\n\t\t\ttry {\n\n\t\t\t\tif(end.terminal.offset != null) {\n\t\t\t\t\trange.setEnd(endContainer, end.terminal.offset);\n\t\t\t\t} else {\n\t\t\t\t\trange.setEnd(endContainer, 0);\n\t\t\t\t}\n\n\t\t\t} catch (e) {\n\t\t\t\tmissed = this.fixMiss(endSteps, cfi.end.terminal.offset, doc, needsIgnoring ? ignoreClass : null);\n\t\t\t\trange.setEnd(missed.container, missed.offset);\n\t\t\t}\n\t\t}\n\n\n\t\t// doc.defaultView.getSelection().addRange(range);\n\t\treturn range;\n\t}\n\n\t/**\n\t * Check if a string is wrapped with \"epubcfi()\"\n\t * @param {string} str\n\t * @returns {boolean}\n\t */\n\tisCfiString(str) {\n\t\tif(typeof str === \"string\" &&\n\t\t\tstr.indexOf(\"epubcfi(\") === 0 &&\n\t\t\tstr[str.length-1] === \")\") {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgenerateChapterComponent(_spineNodeIndex, _pos, id) {\n\t\tvar pos = parseInt(_pos),\n\t\t\t\tspineNodeIndex = (_spineNodeIndex + 1) * 2,\n\t\t\t\tcfi = \"/\"+spineNodeIndex+\"/\";\n\n\t\tcfi += (pos + 1) * 2;\n\n\t\tif(id) {\n\t\t\tcfi += \"[\" + id + \"]\";\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Collapse a CFI Range to a single CFI Position\n\t * @param {boolean} [toStart=false]\n\t */\n\tcollapse(toStart) {\n\t\tif (!this.range) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.range = false;\n\n\t\tif (toStart) {\n\t\t\tthis.path.steps = this.path.steps.concat(this.start.steps);\n\t\t\tthis.path.terminal = this.start.terminal;\n\t\t} else {\n\t\t\tthis.path.steps = this.path.steps.concat(this.end.steps);\n\t\t\tthis.path.terminal = this.end.terminal;\n\t\t}\n\n\t}\n}\n\nexport default EpubCFI;\n","/**\n * Hooks allow for injecting functions that must all complete in order before finishing\n * They will execute in parallel but all must finish before continuing\n * Functions may return a promise if they are asycn.\n * @param {any} context scope of this\n * @example this.content = new EPUBJS.Hook(this);\n */\nclass Hook {\n\tconstructor(context){\n\t\tthis.context = context || this;\n\t\tthis.hooks = [];\n\t}\n\n\t/**\n\t * Adds a function to be run before a hook completes\n\t * @example this.content.register(function(){...});\n\t */\n\tregister(){\n\t\tfor(var i = 0; i < arguments.length; ++i) {\n\t\t\tif (typeof arguments[i]  === \"function\") {\n\t\t\t\tthis.hooks.push(arguments[i]);\n\t\t\t} else {\n\t\t\t\t// unpack array\n\t\t\t\tfor(var j = 0; j < arguments[i].length; ++j) {\n\t\t\t\t\tthis.hooks.push(arguments[i][j]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Removes a function\n\t * @example this.content.deregister(function(){...});\n\t */\n\tderegister(func){\n\t\tlet hook;\n\t\tfor (let i = 0; i < this.hooks.length; i++) {\n\t\t\thook = this.hooks[i];\n\t\t\tif (hook === func) {\n\t\t\t\tthis.hooks.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Triggers a hook to run all functions\n\t * @example this.content.trigger(args).then(function(){...});\n\t */\n\ttrigger(){\n\t\tvar args = arguments;\n\t\tvar context = this.context;\n\t\tvar promises = [];\n\n\t\tthis.hooks.forEach(function(task) {\n\t\t\tvar executing = task.apply(context, args);\n\n\t\t\tif(executing && typeof executing[\"then\"] === \"function\") {\n\t\t\t\t// Task is a function that returns a promise\n\t\t\t\tpromises.push(executing);\n\t\t\t}\n\t\t\t// Otherwise Task resolves immediately, continue\n\t\t});\n\n\n\t\treturn Promise.all(promises);\n\t}\n\n\t// Adds a function to be run before a hook completes\n\tlist(){\n\t\treturn this.hooks;\n\t}\n\n\tclear(){\n\t\treturn this.hooks = [];\n\t}\n}\nexport default Hook;\n","import { qs, qsa } from \"./core\";\nimport Url from \"./url\";\nimport Path from \"./path\";\n\nexport function replaceBase(doc, section){\n\tvar base;\n\tvar head;\n\tvar url = section.url;\n\tvar absolute = (url.indexOf(\"://\") > -1);\n\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tbase = qs(head, \"base\");\n\n\tif(!base) {\n\t\tbase = doc.createElement(\"base\");\n\t\thead.insertBefore(base, head.firstChild);\n\t}\n\n\t// Fix for Safari crashing if the url doesn't have an origin\n\tif (!absolute && window && window.location) {\n\t\turl = window.location.origin + url;\n\t}\n\n\tbase.setAttribute(\"href\", url);\n}\n\nexport function replaceCanonical(doc, section){\n\tvar head;\n\tvar link;\n\tvar url = section.canonical;\n\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tlink = qs(head, \"link[rel='canonical']\");\n\n\tif (link) {\n\t\tlink.setAttribute(\"href\", url);\n\t} else {\n\t\tlink = doc.createElement(\"link\");\n\t\tlink.setAttribute(\"rel\", \"canonical\");\n\t\tlink.setAttribute(\"href\", url);\n\t\thead.appendChild(link);\n\t}\n}\n\nexport function replaceMeta(doc, section){\n\tvar head;\n\tvar meta;\n\tvar id = section.idref;\n\tif(!doc){\n\t\treturn;\n\t}\n\n\thead = qs(doc, \"head\");\n\tmeta = qs(head, \"link[property='dc.identifier']\");\n\n\tif (meta) {\n\t\tmeta.setAttribute(\"content\", id);\n\t} else {\n\t\tmeta = doc.createElement(\"meta\");\n\t\tmeta.setAttribute(\"name\", \"dc.identifier\");\n\t\tmeta.setAttribute(\"content\", id);\n\t\thead.appendChild(meta);\n\t}\n}\n\n// TODO: move me to Contents\nexport function replaceLinks(contents, fn) {\n\n\tvar links = contents.querySelectorAll(\"a[href]\");\n\n\tif (!links.length) {\n\t\treturn;\n\t}\n\n\tvar base = qs(contents.ownerDocument, \"base\");\n\tvar location = base ? base.getAttribute(\"href\") : undefined;\n\tvar replaceLink = function(link){\n\t\tvar href = link.getAttribute(\"href\");\n\n\t\tif(href.indexOf(\"mailto:\") === 0){\n\t\t\treturn;\n\t\t}\n\n\t\tvar absolute = (href.indexOf(\"://\") > -1);\n\n\t\tif(absolute){\n\n\t\t\tlink.setAttribute(\"target\", \"_blank\");\n\n\t\t}else{\n\t\t\tvar linkUrl;\n\t\t\ttry {\n\t\t\t\tlinkUrl = new Url(href, location);\t\n\t\t\t} catch(error) {\n\t\t\t\t// NOOP\n\t\t\t}\n\n\t\t\tlink.onclick = function(){\n\n\t\t\t\tif(linkUrl && linkUrl.hash) {\n\t\t\t\t\tfn(linkUrl.Path.path + linkUrl.hash);\n\t\t\t\t} else if(linkUrl){\n\t\t\t\t\tfn(linkUrl.Path.path);\n\t\t\t\t} else {\n\t\t\t\t\tfn(href);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}\n\t}.bind(this);\n\n\tfor (var i = 0; i < links.length; i++) {\n\t\treplaceLink(links[i]);\n\t}\n\n\n}\n\nexport function substitute(content, urls, replacements) {\n\turls.forEach(function(url, i){\n\t\tif (url && replacements[i]) {\n\t\t\tcontent = content.replace(new RegExp(url, \"g\"), replacements[i]);\n\t\t}\n\t});\n\treturn content;\n}\n","import { defer } from \"./utils/core\";\nimport EpubCFI from \"./epubcfi\";\nimport Hook from \"./utils/hook\";\nimport { sprint } from \"./utils/core\";\nimport { replaceBase } from \"./utils/replacements\";\n\n/**\n * Represents a Section of the Book\n *\n * In most books this is equivelent to a Chapter\n * @param {object} item  The spine item representing the section\n * @param {object} hooks hooks for serialize and content\n */\nclass Section {\n\tconstructor(item, hooks){\n\t\tthis.idref = item.idref;\n\t\tthis.linear = item.linear === \"yes\";\n\t\tthis.properties = item.properties;\n\t\tthis.index = item.index;\n\t\tthis.href = item.href;\n\t\tthis.url = item.url;\n\t\tthis.canonical = item.canonical;\n\t\tthis.next = item.next;\n\t\tthis.prev = item.prev;\n\n\t\tthis.cfiBase = item.cfiBase;\n\n\t\tif (hooks) {\n\t\t\tthis.hooks = hooks;\n\t\t} else {\n\t\t\tthis.hooks = {};\n\t\t\tthis.hooks.serialize = new Hook(this);\n\t\t\tthis.hooks.content = new Hook(this);\n\t\t}\n\n\t\tthis.document = undefined;\n\t\tthis.contents = undefined;\n\t\tthis.output = undefined;\n\t}\n\n\t/**\n\t * Load the section from its url\n\t * @param  {method} [_request] a request method to use for loading\n\t * @return {document} a promise with the xml document\n\t */\n\tload(_request){\n\t\tvar request = _request || this.request || require(\"./utils/request\");\n\t\tvar loading = new defer();\n\t\tvar loaded = loading.promise;\n\n\t\tif(this.contents) {\n\t\t\tloading.resolve(this.contents);\n\t\t} else {\n\t\t\trequest(this.url)\n\t\t\t\t.then(function(xml){\n\t\t\t\t\t// var directory = new Url(this.url).directory;\n\n\t\t\t\t\tthis.document = xml;\n\t\t\t\t\tthis.contents = xml.documentElement;\n\n\t\t\t\t\treturn this.hooks.content.trigger(this.document, this);\n\t\t\t\t}.bind(this))\n\t\t\t\t.then(function(){\n\t\t\t\t\tloading.resolve(this.contents);\n\t\t\t\t}.bind(this))\n\t\t\t\t.catch(function(error){\n\t\t\t\t\tloading.reject(error);\n\t\t\t\t});\n\t\t}\n\n\t\treturn loaded;\n\t}\n\n\t/**\n\t * Adds a base tag for resolving urls in the section\n\t * @private\n\t */\n\tbase(){\n\t\treturn replaceBase(this.document, this);\n\t}\n\n\t/**\n\t * Render the contents of a section\n\t * @param  {method} [_request] a request method to use for loading\n\t * @return {string} output a serialized XML Document\n\t */\n\trender(_request){\n\t\tvar rendering = new defer();\n\t\tvar rendered = rendering.promise;\n\t\tthis.output; // TODO: better way to return this from hooks?\n\n\t\tthis.load(_request).\n\t\t\tthen(function(contents){\n\t\t\t\tvar userAgent = (typeof navigator !== 'undefined' && navigator.userAgent) || '';\n\t\t\t\tvar isIE = userAgent.indexOf('Trident') >= 0;\n\t\t\t\tvar Serializer;\n\t\t\t\tif (false && ( typeof XMLSerializer === \"undefined\" || isIE)) {\n\t\t\t\t\tSerializer = require(\"xmldom/dom-parser\").XMLSerializer;\n\t\t\t\t} else {\n\t\t\t\t\tSerializer = XMLSerializer;\n\t\t\t\t}\n\t\t\t\tvar serializer = new Serializer();\n\t\t\t\tthis.output = serializer.serializeToString(contents);\n\t\t\t\treturn this.output;\n\t\t\t}.bind(this)).\n\t\t\tthen(function(){\n\t\t\t\treturn this.hooks.serialize.trigger(this.output, this);\n\t\t\t}.bind(this)).\n\t\t\tthen(function(){\n\t\t\t\trendering.resolve(this.output);\n\t\t\t}.bind(this))\n\t\t\t.catch(function(error){\n\t\t\t\trendering.reject(error);\n\t\t\t});\n\n\t\treturn rendered;\n\t}\n\n\t/**\n\t * Find a string in a section\n\t * @param  {string} _query The query string to find\n\t * @return {object[]} A list of matches, with form {cfi, excerpt}\n\t */\n\tfind(_query){\n\t\tvar section = this;\n\t\tvar matches = [];\n\t\tvar query = _query.toLowerCase();\n\t\tvar find = function(node){\n\t\t\tvar text = node.textContent.toLowerCase();\n\t\t\tvar range = section.document.createRange();\n\t\t\tvar cfi;\n\t\t\tvar pos;\n\t\t\tvar last = -1;\n\t\t\tvar excerpt;\n\t\t\tvar limit = 150;\n\n\t\t\twhile (pos != -1) {\n\t\t\t\t// Search for the query\n\t\t\t\tpos = text.indexOf(query, last + 1);\n\n\t\t\t\tif (pos != -1) {\n\t\t\t\t\t// We found it! Generate a CFI\n\t\t\t\t\trange = section.document.createRange();\n\t\t\t\t\trange.setStart(node, pos);\n\t\t\t\t\trange.setEnd(node, pos + query.length);\n\n\t\t\t\t\tcfi = section.cfiFromRange(range);\n\n\t\t\t\t\t// Generate the excerpt\n\t\t\t\t\tif (node.textContent.length < limit) {\n\t\t\t\t\t\texcerpt = node.textContent;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\texcerpt = node.textContent.substring(pos - limit/2, pos + limit/2);\n\t\t\t\t\t\texcerpt = \"...\" + excerpt + \"...\";\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add the CFI to the matches list\n\t\t\t\t\tmatches.push({\n\t\t\t\t\t\tcfi: cfi,\n\t\t\t\t\t\texcerpt: excerpt\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tlast = pos;\n\t\t\t}\n\t\t};\n\n\t\tsprint(section.document, function(node) {\n\t\t\tfind(node);\n\t\t});\n\n\t\treturn matches;\n\t};\n\n\t/**\n\t* Reconciles the current chapters layout properies with\n\t* the global layout properities.\n\t* @param {object} globalLayout  The global layout settings object, chapter properties string\n\t* @return {object} layoutProperties Object with layout properties\n\t*/\n\treconcileLayoutSettings(globalLayout){\n\t\t//-- Get the global defaults\n\t\tvar settings = {\n\t\t\tlayout : globalLayout.layout,\n\t\t\tspread : globalLayout.spread,\n\t\t\torientation : globalLayout.orientation\n\t\t};\n\n\t\t//-- Get the chapter's display type\n\t\tthis.properties.forEach(function(prop){\n\t\t\tvar rendition = prop.replace(\"rendition:\", \"\");\n\t\t\tvar split = rendition.indexOf(\"-\");\n\t\t\tvar property, value;\n\n\t\t\tif(split != -1){\n\t\t\t\tproperty = rendition.slice(0, split);\n\t\t\t\tvalue = rendition.slice(split+1);\n\n\t\t\t\tsettings[property] = value;\n\t\t\t}\n\t\t});\n\t\treturn settings;\n\t}\n\n\t/**\n\t * Get a CFI from a Range in the Section\n\t * @param  {range} _range\n\t * @return {string} cfi an EpubCFI string\n\t */\n\tcfiFromRange(_range) {\n\t\treturn new EpubCFI(_range, this.cfiBase).toString();\n\t}\n\n\t/**\n\t * Get a CFI from an Element in the Section\n\t * @param  {element} el\n\t * @return {string} cfi an EpubCFI string\n\t */\n\tcfiFromElement(el) {\n\t\treturn new EpubCFI(el, this.cfiBase).toString();\n\t}\n\n\t/**\n\t * Unload the section document\n\t */\n\tunload() {\n\t\tthis.document = undefined;\n\t\tthis.contents = undefined;\n\t\tthis.output = undefined;\n\t}\n\n\tdestroy() {\n\t\tthis.unload();\n\t\tthis.hooks.serialize.clear();\n\t\tthis.hooks.content.clear();\n\n\t\tthis.hooks = undefined;\n\t\tthis.idref = undefined;\n\t\tthis.linear = undefined;\n\t\tthis.properties = undefined;\n\t\tthis.index = undefined;\n\t\tthis.href = undefined;\n\t\tthis.url = undefined;\n\t\tthis.next = undefined;\n\t\tthis.prev = undefined;\n\n\t\tthis.cfiBase = undefined;\n\t}\n}\n\nexport default Section;\n","import EpubCFI from \"./epubcfi\";\nimport Hook from \"./utils/hook\";\nimport Section from \"./section\";\nimport {replaceBase, replaceCanonical, replaceMeta} from \"./utils/replacements\";\n\n/**\n * A collection of Spine Items\n */\nclass Spine {\n\tconstructor() {\n\t\tthis.spineItems = [];\n\t\tthis.spineByHref = {};\n\t\tthis.spineByAbsoluteHref = {};\n\t\tthis.spineById = {};\n\n\t\tthis.hooks = {};\n\t\tthis.hooks.serialize = new Hook();\n\t\tthis.hooks.content = new Hook();\n\n\t\t// Register replacements\n\t\tthis.hooks.content.register(replaceBase);\n\t\tthis.hooks.content.register(replaceCanonical);\n\t\tthis.hooks.content.register(replaceMeta);\n\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.loaded = false;\n\n\t\tthis.items = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.baseUrl = undefined;\n\t\tthis.length = undefined;\n\t}\n\n\t/**\n\t * Unpack items from a opf into spine items\n\t * @param  {Packaging} _package\n\t * @param  {method} resolver URL resolver\n\t * @param  {method} canonical Resolve canonical url\n\t */\n\tunpack(_package, resolver, canonical) {\n\n\t\tthis.items = _package.spine;\n\t\tthis.manifest = _package.manifest;\n\t\tthis.spineNodeIndex = _package.spineNodeIndex;\n\t\tthis.baseUrl = _package.baseUrl || _package.basePath || \"\";\n\t\tthis.length = this.items.length;\n\n\t\tthis.items.forEach( (item, index) => {\n\t\t\tvar manifestItem = this.manifest[item.idref];\n\t\t\tvar spineItem;\n\n\t\t\titem.index = index;\n\t\t\titem.cfiBase = this.epubcfi.generateChapterComponent(this.spineNodeIndex, item.index, item.idref);\n\n\t\t\tif (item.href) {\n\t\t\t\titem.url = resolver(item.href, true);\n\t\t\t\titem.canonical = canonical(item.href);\n\t\t\t}\n\n\t\t\tif(manifestItem) {\n\t\t\t\titem.href = manifestItem.href;\n\t\t\t\titem.url = resolver(item.href, true);\n\t\t\t\titem.canonical = canonical(item.href);\n\n\t\t\t\tif(manifestItem.properties.length){\n\t\t\t\t\titem.properties.push.apply(item.properties, manifestItem.properties);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item.linear === \"yes\") {\n\t\t\t\titem.prev = function() {\n\t\t\t\t\tlet prevIndex = item.index;\n\t\t\t\t\twhile (prevIndex > 0) {\n\t\t\t\t\t\tlet prev = this.get(prevIndex-1);\n\t\t\t\t\t\tif (prev && prev.linear) {\n\t\t\t\t\t\t\treturn prev;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tprevIndex -= 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}.bind(this);\n\t\t\t\titem.next = function() {\n\t\t\t\t\tlet nextIndex = item.index;\n\t\t\t\t\twhile (nextIndex < this.spineItems.length-1) {\n\t\t\t\t\t\tlet next = this.get(nextIndex+1);\n\t\t\t\t\t\tif (next && next.linear) {\n\t\t\t\t\t\t\treturn next;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextIndex += 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}.bind(this);\n\t\t\t} else {\n\t\t\t\titem.prev = function() {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\titem.next = function() {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\tspineItem = new Section(item, this.hooks);\n\n\t\t\tthis.append(spineItem);\n\n\n\t\t});\n\n\t\tthis.loaded = true;\n\t}\n\n\t/**\n\t * Get an item from the spine\n\t * @param  {string|number} [target]\n\t * @return {Section} section\n\t * @example spine.get();\n\t * @example spine.get(1);\n\t * @example spine.get(\"chap1.html\");\n\t * @example spine.get(\"#id1234\");\n\t */\n\tget(target) {\n\t\tvar index = 0;\n\n\t\tif (typeof target === \"undefined\") {\n\t\t\twhile (index < this.spineItems.length) {\n\t\t\t\tlet next = this.spineItems[index];\n\t\t\t\tif (next && next.linear) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tindex += 1;\n\t\t\t}\n\t\t} else if(this.epubcfi.isCfiString(target)) {\n\t\t\tlet cfi = new EpubCFI(target);\n\t\t\tindex = cfi.spinePos;\n\t\t} else if(typeof target === \"number\" || isNaN(target) === false){\n\t\t\tindex = target;\n\t\t} else if(typeof target === \"string\" && target.indexOf(\"#\") === 0) {\n\t\t\tindex = this.spineById[target.substring(1)];\n\t\t} else if(typeof target === \"string\") {\n\t\t\t// Remove fragments\n\t\t\ttarget = target.split(\"#\")[0];\n\t\t\tindex = this.spineByAbsoluteHref[target] || this.spineByAbsoluteHref[encodeURI(target)] || this.spineByHref[target] || this.spineByHref[encodeURI(target)];\n\t\t\tif ( ! index ) {\n\t\t\t\t// check for relative paths\n\t\t\t\tfor(var i = 0; i < this.spineItems.length; i++)\t{\n\t\t\t\t\tif ( this.spineItems[i].href.indexOf('/' + target) > -1 ) {\n\t\t\t\t\t\tindex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.spineItems[index] || null;\n\t}\n\n\t/**\n\t * Append a Section to the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tappend(section) {\n\t\tvar index = this.spineItems.length;\n\t\tsection.index = index;\n\n\t\tthis.spineItems.push(section);\n\n\t\t// Encode and Decode href lookups\n\t\t// see pr for details: https://github.com/futurepress/epub.js/pull/358\n\t\tthis.spineByHref[decodeURI(section.href)] = index;\n\t\tthis.spineByHref[encodeURI(section.href)] = index;\n\t\tthis.spineByHref[section.href.substring(section.href.lastIndexOf('/')+1)] = index;\n\t\tthis.spineByHref[section.href] = index;\n\n\t\tthis.spineById[section.idref] = index;\n\n\t\tthis.spineByAbsoluteHref[section.url] = index;\n\n\t\treturn index;\n\t}\n\n\t/**\n\t * Prepend a Section to the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tprepend(section) {\n\t\t// var index = this.spineItems.unshift(section);\n\t\tthis.spineByHref[section.href] = 0;\n\t\tthis.spineById[section.idref] = 0;\n\n\t\t// Re-index\n\t\tthis.spineItems.forEach(function(item, index){\n\t\t\titem.index = index;\n\t\t});\n\n\t\treturn 0;\n\t}\n\n\t// insert(section, index) {\n\t//\n\t// };\n\n\t/**\n\t * Remove a Section from the Spine\n\t * @private\n\t * @param  {Section} section\n\t */\n\tremove(section) {\n\t\tvar index = this.spineItems.indexOf(section);\n\n\t\tif(index > -1) {\n\t\t\tdelete this.spineByHref[section.href];\n\t\t\tdelete this.spineById[section.idref];\n\n\t\t\treturn this.spineItems.splice(index, 1);\n\t\t}\n\t}\n\n\t/**\n\t * Loop over the Sections in the Spine\n\t * @return {method} forEach\n\t */\n\teach() {\n\t\treturn this.spineItems.forEach.apply(this.spineItems, arguments);\n\t}\n\n\t/**\n\t * Find the first Section in the Spine\n\t * @return {Section} first section\n\t */\n\tfirst() {\n\t\tlet index = 0;\n\n\t\tdo {\n\t\t\tlet next = this.get(index);\n\n\t\t\tif (next && next.linear) {\n\t\t\t\treturn next;\n\t\t\t}\n\t\t\tindex += 1;\n\t\t} while (index < this.spineItems.length) ;\n\t}\n\n\t/**\n\t * Find the last Section in the Spine\n\t * @return {Section} last section\n\t */\n\tlast() {\n\t\tlet index = this.spineItems.length-1;\n\n\t\tdo {\n\t\t\tlet prev = this.get(index);\n\t\t\tif (prev && prev.linear) {\n\t\t\t\treturn prev;\n\t\t\t}\n\t\t\tindex -= 1;\n\t\t} while (index >= 0);\n\t}\n\n\tdestroy() {\n\t\tthis.each((section) => section.destroy());\n\n\t\tthis.spineItems = undefined\n\t\tthis.spineByHref = undefined\n\t\tthis.spineById = undefined\n\n\t\tthis.hooks.serialize.clear();\n\t\tthis.hooks.content.clear();\n\t\tthis.hooks = undefined;\n\n\t\tthis.epubcfi = undefined;\n\n\t\tthis.loaded = false;\n\n\t\tthis.items = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.baseUrl = undefined;\n\t\tthis.length = undefined;\n\t}\n}\n\nexport default Spine;\n","import {defer, requestAnimationFrame} from \"./core\";\n\n/**\n * Queue for handling tasks one at a time\n * @class\n * @param {scope} context what this will resolve to in the tasks\n */\nclass Queue {\n\tconstructor(context){\n\t\tthis._q = [];\n\t\tthis.context = context;\n\t\tthis.tick = requestAnimationFrame;\n\t\tthis.running = false;\n\t\tthis.paused = false;\n\t}\n\n\t/**\n\t * Add an item to the queue\n\t * @return {Promise}\n\t */\n\tenqueue() {\n\t\tvar deferred, promise;\n\t\tvar queued;\n\t\tvar task = [].shift.call(arguments);\n\t\tvar args = arguments;\n\n\t\t// Handle single args without context\n\t\t// if(args && !Array.isArray(args)) {\n\t\t//   args = [args];\n\t\t// }\n\t\tif(!task) {\n\t\t\tthrow new Error(\"No Task Provided\");\n\t\t}\n\n\t\tif(typeof task === \"function\"){\n\n\t\t\tdeferred = new defer();\n\t\t\tpromise = deferred.promise;\n\n\t\t\tqueued = {\n\t\t\t\t\"task\" : task,\n\t\t\t\t\"args\"     : args,\n\t\t\t\t//\"context\"  : context,\n\t\t\t\t\"deferred\" : deferred,\n\t\t\t\t\"promise\" : promise\n\t\t\t};\n\n\t\t} else {\n\t\t\t// Task is a promise\n\t\t\tqueued = {\n\t\t\t\t\"promise\" : task\n\t\t\t};\n\n\t\t}\n\n\t\tthis._q.push(queued);\n\n\t\t// Wait to start queue flush\n\t\tif (this.paused == false && !this.running) {\n\t\t\t// setTimeout(this.flush.bind(this), 0);\n\t\t\t// this.tick.call(window, this.run.bind(this));\n\t\t\tthis.run();\n\t\t}\n\n\t\treturn queued.promise;\n\t}\n\n\t/**\n\t * Run one item\n\t * @return {Promise}\n\t */\n\tdequeue(){\n\t\tvar inwait, task, result;\n\n\t\tif(this._q.length && !this.paused) {\n\t\t\tinwait = this._q.shift();\n\t\t\ttask = inwait.task;\n\t\t\tif(task){\n\t\t\t\t// console.log(task)\n\n\t\t\t\tresult = task.apply(this.context, inwait.args);\n\n\t\t\t\tif(result && typeof result[\"then\"] === \"function\") {\n\t\t\t\t\t// Task is a function that returns a promise\n\t\t\t\t\treturn result.then(function(){\n\t\t\t\t\t\tinwait.deferred.resolve.apply(this.context, arguments);\n\t\t\t\t\t}.bind(this), function() {\n\t\t\t\t\t\tinwait.deferred.reject.apply(this.context, arguments);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t} else {\n\t\t\t\t\t// Task resolves immediately\n\t\t\t\t\tinwait.deferred.resolve.apply(this.context, result);\n\t\t\t\t\treturn inwait.promise;\n\t\t\t\t}\n\n\n\n\t\t\t} else if(inwait.promise) {\n\t\t\t\t// Task is a promise\n\t\t\t\treturn inwait.promise;\n\t\t\t}\n\n\t\t} else {\n\t\t\tinwait = new defer();\n\t\t\tinwait.deferred.resolve();\n\t\t\treturn inwait.promise;\n\t\t}\n\n\t}\n\n\t// Run All Immediately\n\tdump(){\n\t\twhile(this._q.length) {\n\t\t\tthis.dequeue();\n\t\t}\n\t}\n\n\t/**\n\t * Run all tasks sequentially, at convince\n\t * @return {Promise}\n\t */\n\trun(){\n\n\t\tif(!this.running){\n\t\t\tthis.running = true;\n\t\t\tthis.defered = new defer();\n\t\t}\n\n\t\tthis.tick.call(window, () => {\n\n\t\t\tif(this._q.length) {\n\n\t\t\t\tthis.dequeue()\n\t\t\t\t\t.then(function(){\n\t\t\t\t\t\tthis.run();\n\t\t\t\t\t}.bind(this));\n\n\t\t\t} else {\n\t\t\t\tthis.defered.resolve();\n\t\t\t\tthis.running = undefined;\n\t\t\t}\n\n\t\t});\n\n\t\t// Unpause\n\t\tif(this.paused == true) {\n\t\t\tthis.paused = false;\n\t\t}\n\n\t\treturn this.defered.promise;\n\t}\n\n\t/**\n\t * Flush all, as quickly as possible\n\t * @return {Promise}\n\t */\n\tflush(){\n\n\t\tif(this.running){\n\t\t\treturn this.running;\n\t\t}\n\n\t\tif(this._q.length) {\n\t\t\tthis.running = this.dequeue()\n\t\t\t\t.then(function(){\n\t\t\t\t\tthis.running = undefined;\n\t\t\t\t\treturn this.flush();\n\t\t\t\t}.bind(this));\n\n\t\t\treturn this.running;\n\t\t}\n\n\t}\n\n\t/**\n\t * Clear all items in wait\n\t */\n\tclear(){\n\t\tthis._q = [];\n\t}\n\n\t/**\n\t * Get the number of tasks in the queue\n\t * @return {number} tasks\n\t */\n\tlength(){\n\t\treturn this._q.length;\n\t}\n\n\t/**\n\t * Pause a running queue\n\t */\n\tpause(){\n\t\tthis.paused = true;\n\t}\n\n\t/**\n\t * End the queue\n\t */\n\tstop(){\n\t\tthis._q = [];\n\t\tthis.running = false;\n\t\tthis.paused = true;\n\t}\n}\n\n\n/**\n * Create a new task from a callback\n * @class\n * @private\n * @param {function} task\n * @param {array} args\n * @param {scope} context\n * @return {function} task\n */\nclass Task {\n\tconstructor(task, args, context){\n\n\t\treturn function(){\n\t\t\tvar toApply = arguments || [];\n\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tvar callback = function(value, err){\n\t\t\t\t\tif (!value && err) {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(value);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// Add the callback to the arguments list\n\t\t\t\ttoApply.push(callback);\n\n\t\t\t\t// Apply all arguments to the functions\n\t\t\t\ttask.apply(context || this, toApply);\n\n\t\t\t});\n\n\t\t};\n\n\t}\n}\n\n\nexport default Queue;\nexport { Task };\n","export const EPUBJS_VERSION = \"0.3\";\n\n// Dom events to listen for\nexport const DOM_EVENTS = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"click\", \"touchend\", \"touchstart\", \"touchmove\"];\n\nexport const EVENTS = {\n  BOOK : {\n    OPEN_FAILED : \"openFailed\"\n  },\n  CONTENTS : {\n    EXPAND : \"expand\",\n    RESIZE : \"resize\",\n    SELECTED : \"selected\",\n    SELECTED_RANGE : \"selectedRange\",\n    LINK_CLICKED : \"linkClicked\"\n  },\n  LOCATIONS : {\n    CHANGED : \"changed\"\n  },\n  MANAGERS : {\n    RESIZE : \"resize\",\n    RESIZED : \"resized\",\n    ORIENTATION_CHANGE : \"orientationchange\",\n    ADDED : \"added\",\n    SCROLL : \"scroll\",\n    SCROLLED : \"scrolled\",\n    REMOVED : \"removed\",\n  },\n  VIEWS : {\n    AXIS : \"axis\",\n    LOAD_ERROR : \"loaderror\",\n    RENDERED : \"rendered\",\n    RESIZED : \"resized\",\n    DISPLAYED : \"displayed\",\n    SHOWN : \"shown\",\n    HIDDEN : \"hidden\",\n    MARK_CLICKED : \"markClicked\"\n  },\n  RENDITION : {\n    STARTED : \"started\",\n    ATTACHED : \"attached\",\n    DISPLAYED : \"displayed\",\n    DISPLAY_ERROR : \"displayerror\",\n    RENDERED : \"rendered\",\n    REMOVED : \"removed\",\n    RESIZED : \"resized\",\n    ORIENTATION_CHANGE : \"orientationchange\",\n    LOCATION_CHANGED : \"locationChanged\",\n    RELOCATED : \"relocated\",\n    MARK_CLICKED : \"markClicked\",\n    SELECTED : \"selected\",\n    LAYOUT: \"layout\"\n  },\n  LAYOUT : {\n    UPDATED : \"updated\"\n  }\n}\n","import {qs, sprint, locationOf, defer} from \"./utils/core\";\nimport Queue from \"./utils/queue\";\nimport EpubCFI from \"./epubcfi\";\nimport { EVENTS } from \"./utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Find Locations for a Book\n * @param {Spine} spine\n * @param {request} request\n * @param {number} [pause=100]\n */\nclass Locations {\n\tconstructor(spine, request, pause) {\n\t\tthis.spine = spine;\n\t\tthis.request = request;\n\t\tthis.pause = pause || 100;\n\n\t\tthis.q = new Queue(this);\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis._locations = [];\n\t\tthis.total = 0;\n\n\t\tthis.break = 150;\n\n\t\tthis._current = 0;\n\n\t\tthis.currentLocation = '';\n\t\tthis._currentCfi ='';\n\t\tthis.processingTimeout = undefined;\n\t}\n\n\tgenerateFromPageList(pageList) {\n\n\t\tthis.break = 1600;\n\t\tthis.q.pause();\n\n\t\tvar i = 0;\n\n\t\tthis._pageList = pageList;\n\n\t\tthis.spine.each(function(section) {\n\t\t\tif (section.linear) {\n\t\t\t\tthis.q.enqueue(this.process.bind(this), section);\n\t\t\t}\n\t\t}.bind(this));\n\n\t\treturn this.q.run().then(function() {\n\t\t\tthis.total = this._locations.length - 1;\n\n\t\t\tif (this._currentCfi) {\n\t\t\t\tthis.currentLocation = this._currentCfi;\n\t\t\t}\n\n\t\t\treturn this._locations;\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Load all of sections in the book to generate locations\n\t * @param  {int} chars how many chars to split on\n\t * @return {object} locations\n\t */\n\tgenerate(chars) {\n\n\t\tif (chars) {\n\t\t\tthis.break = chars;\n\t\t}\n\n\t\tthis.q.pause();\n\n\t\tthis.spine.each(function(section) {\n\t\t\tif (section.linear) {\n\t\t\t\tthis.q.enqueue(this.process.bind(this), section);\n\t\t\t}\n\t\t}.bind(this));\n\n\t\treturn this.q.run().then(function() {\n\t\t\tthis.total = this._locations.length - 1;\n\n\t\t\tif (this._currentCfi) {\n\t\t\t\tthis.currentLocation = this._currentCfi;\n\t\t\t}\n\n\t\t\treturn this._locations;\n\t\t\t// console.log(this.percentage(this.book.rendition.location.start), this.percentage(this.book.rendition.location.end));\n\t\t}.bind(this));\n\n\t}\n\n\tcreateRange () {\n\t\treturn {\n\t\t\tstartContainer: undefined,\n\t\t\tstartOffset: undefined,\n\t\t\tendContainer: undefined,\n\t\t\tendOffset: undefined\n\t\t};\n\t}\n\n\tprocess(section) {\n\n\t\treturn section.load(this.request)\n\t\t\t.then(function(contents) {\n\t\t\t\tvar completed = new defer();\n\t\t\t\tvar locations = this.parse(contents, section.cfiBase);\n\t\t\t\tthis._locations = this._locations.concat(locations);\n\n\t\t\t\tif ( this._pageList ) {\n\n\t\t\t\t\tvar pages = this._pageList.pagesByAbsolutePath[section.canonical] || []; // || \n\n\t\t\t\t\tpages.forEach((page) => {\n\t\t\t\t\t\tvar item = this._pageList.pageList[page - 1];\n\n\t\t\t\t\t\tvar parts = item.href.split('#');\n\t\t\t\t\t\tvar target = parts[1] ? '#' + parts[1] : 'body';\n\t\t\t\t\t\tvar node = contents.ownerDocument.querySelector(target);\n\t\t\t\t\t\tvar cfi = section.cfiFromElement(node);\n\t\t\t\t\t\tthis._pageList.locations[page - 1] = cfi;\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tsection.unload();\n\n\t\t\t\tthis.processingTimeout = setTimeout(() => completed.resolve(locations), this.pause);\n\t\t\t\treturn completed.promise;\n\t\t\t}.bind(this));\n\n\t}\n\n\tparse(contents, cfiBase, chars) {\n\t\tvar locations = [];\n\t\tvar range;\n\t\tvar doc = contents.ownerDocument;\n\t\tvar body = qs(doc, \"body\");\n\t\tvar counter = 0;\n\t\tvar prev;\n\t\tvar _break = chars || this.break;\n\t\tvar parser = function(node) {\n\t\t\tvar len = node.length;\n\t\t\tvar dist;\n\t\t\tvar pos = 0;\n\n\t\t\tif (node.textContent.trim().length === 0) {\n\t\t\t\treturn false; // continue\n\t\t\t}\n\n\t\t\t// Start range\n\t\t\tif (counter == 0) {\n\t\t\t\trange = this.createRange();\n\t\t\t\trange.startContainer = node;\n\t\t\t\trange.startOffset = 0;\n\t\t\t}\n\n\t\t\tdist = _break - counter;\n\n\t\t\t// Node is smaller than a break,\n\t\t\t// skip over it\n\t\t\tif(dist > len){\n\t\t\t\tcounter += len;\n\t\t\t\tpos = len;\n\t\t\t}\n\n\n\t\t\twhile (pos < len) {\n\t\t\t\tdist = _break - counter;\n\n\t\t\t\tif (counter === 0) {\n\t\t\t\t\t// Start new range\n\t\t\t\t\tpos += 1;\n\t\t\t\t\trange = this.createRange();\n\t\t\t\t\trange.startContainer = node;\n\t\t\t\t\trange.startOffset = pos;\n\t\t\t\t}\n\n\t\t\t\t// pos += dist;\n\n\t\t\t\t// Gone over\n\t\t\t\tif(pos + dist >= len){\n\t\t\t\t\t// Continue counter for next node\n\t\t\t\t\tcounter += len - pos;\n\t\t\t\t\t// break\n\t\t\t\t\tpos = len;\n\t\t\t\t// At End\n\t\t\t\t} else {\n\t\t\t\t\t// Advance pos\n\t\t\t\t\tpos += dist;\n\n\t\t\t\t\t// End the previous range\n\t\t\t\t\trange.endContainer = node;\n\t\t\t\t\trange.endOffset = pos;\n\t\t\t\t\t// cfi = section.cfiFromRange(range);\n\t\t\t\t\tlet cfi = new EpubCFI(range, cfiBase).toString();\n\t\t\t\t\tlocations.push(cfi);\n\t\t\t\t\tcounter = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\tprev = node;\n\t\t};\n\n\t\tsprint(body, parser.bind(this));\n\n\t\t// Close remaining\n\t\tif (range && range.startContainer && prev) {\n\t\t\trange.endContainer = prev;\n\t\t\trange.endOffset = prev.length;\n\t\t\tlet cfi = new EpubCFI(range, cfiBase).toString();\n\t\t\tlocations.push(cfi);\n\t\t\tcounter = 0;\n\t\t}\n\n\t\treturn locations;\n\t}\n\n\t/**\n\t * Get a location from an EpubCFI\n\t * @param {EpubCFI} cfi\n\t * @return {number}\n\t */\n\tlocationFromCfi(cfi){\n\t\tlet loc;\n\t\tif (EpubCFI.prototype.isCfiString(cfi)) {\n\t\t\tcfi = new EpubCFI(cfi);\n\t\t}\n\t\t// Check if the location has not been set yet\n\t\tif(this._locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tloc = locationOf(cfi, this._locations, this.epubcfi.compare);\n\n\t\tif (loc > this.total) {\n\t\t\treturn this.total;\n\t\t}\n\n\t\treturn loc;\n\t}\n\n\t/**\n\t * Get a percentage position in locations from an EpubCFI\n\t * @param {EpubCFI} cfi\n\t * @return {number}\n\t */\n\tpercentageFromCfi(cfi) {\n\t\tif(this._locations.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\t// Find closest cfi\n\t\tvar loc = this.locationFromCfi(cfi);\n\t\t// Get percentage in total\n\t\treturn this.percentageFromLocation(loc);\n\t}\n\n\t/**\n\t * Get a percentage position from a location index\n\t * @param {number} location\n\t * @return {number}\n\t */\n\tpercentageFromLocation(loc) {\n\t\tif (!loc || !this.total) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn (loc / this.total);\n\t}\n\n\t/**\n\t * Get an EpubCFI from location index\n\t * @param {number} loc\n\t * @return {EpubCFI} cfi\n\t */\n\tcfiFromLocation(loc){\n\t\tvar cfi = -1;\n\t\t// check that pg is an int\n\t\tif(typeof loc != \"number\"){\n\t\t\tloc = parseInt(loc);\n\t\t}\n\n\t\tif(loc >= 0 && loc < this._locations.length) {\n\t\t\tcfi = this._locations[loc];\n\t\t}\n\n\t\treturn cfi;\n\t}\n\n\t/**\n\t * Get an EpubCFI from location percentage\n\t * @param {number} percentage\n\t * @return {EpubCFI} cfi\n\t */\n\tcfiFromPercentage(percentage){\n\t\tlet loc;\n\t\tif (percentage > 1) {\n\t\t\tconsole.warn(\"Normalize cfiFromPercentage value to between 0 - 1\");\n\t\t}\n\n\t\t// Make sure 1 goes to very end\n\t\tif (percentage >= 1) {\n\t\t\tlet cfi = new EpubCFI(this._locations[this.total]);\n\t\t\tcfi.collapse();\n\t\t\treturn cfi.toString();\n\t\t}\n\n\t\tloc = Math.ceil(this.total * percentage);\n\t\treturn this.cfiFromLocation(loc);\n\t}\n\n\t/**\n\t * Load locations from JSON\n\t * @param {json} locations\n\t */\n\tload(locations){\n\t\tif (typeof locations === \"string\") {\n\t\t\tthis._locations = JSON.parse(locations);\n\t\t} else {\n\t\t\tthis._locations = locations;\n\t\t}\n\t\tthis.total = this._locations.length - 1;\n\t\treturn this._locations;\n\t}\n\n\t/**\n\t * Save locations to JSON\n\t * @return {json}\n\t */\n\tsave(){\n\t\treturn JSON.stringify(this._locations);\n\t}\n\n\tgetCurrent(){\n\t\treturn this._current;\n\t}\n\n\tsetCurrent(curr){\n\t\tvar loc;\n\n\t\tif(typeof curr == \"string\"){\n\t\t\tthis._currentCfi = curr;\n\t\t} else if (typeof curr == \"number\") {\n\t\t\tthis._current = curr;\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tif(this._locations.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif(typeof curr == \"string\"){\n\t\t\tloc = this.locationFromCfi(curr);\n\t\t\tthis._current = loc;\n\t\t} else {\n\t\t\tloc = curr;\n\t\t}\n\n\t\tthis.emit(EVENTS.LOCATIONS.CHANGED, {\n\t\t\tpercentage: this.percentageFromLocation(loc)\n\t\t});\n\t}\n\n\t/**\n\t * Get the current location\n\t */\n\tget currentLocation() {\n\t\treturn this._current;\n\t}\n\n\t/**\n\t * Set the current location\n\t */\n\tset currentLocation(curr) {\n\t\tthis.setCurrent(curr);\n\t}\n\n\t/**\n\t * Locations length\n\t */\n\tlength () {\n\t\treturn this._locations.length;\n\t}\n\n\tdestroy () {\n\t\tthis.spine = undefined;\n\t\tthis.request = undefined;\n\t\tthis.pause = undefined;\n\n\t\tthis.q.stop();\n\t\tthis.q = undefined;\n\t\tthis.epubcfi = undefined;\n\n\t\tthis._locations = undefined\n\t\tthis.total = undefined;\n\n\t\tthis.break = undefined;\n\t\tthis._current = undefined;\n\n\t\tthis.currentLocation = undefined;\n\t\tthis._currentCfi = undefined;\n\t\tclearTimeout(this.processingTimeout);\n\t}\n}\n\nEventEmitter(Locations.prototype);\n\nexport default Locations;\n","import path from \"path-webpack\";\nimport {qs} from \"./utils/core\";\n\n/**\n * Handles Parsing and Accessing an Epub Container\n * @class\n * @param {document} [containerDocument] xml document\n */\nclass Container {\n\tconstructor(containerDocument) {\n\t\tthis.packagePath = '';\n\t\tthis.directory = '';\n\t\tthis.encoding = '';\n\n\t\tif (containerDocument) {\n\t\t\tthis.parse(containerDocument);\n\t\t}\n\t}\n\n\t/**\n\t * Parse the Container XML\n\t * @param  {document} containerDocument\n\t */\n\tparse(containerDocument){\n\t\t//-- <rootfile full-path=\"OPS/package.opf\" media-type=\"application/oebps-package+xml\"/>\n\t\tvar rootfile;\n\n\t\tif(!containerDocument) {\n\t\t\tthrow new Error(\"Container File Not Found\");\n\t\t}\n\n\t\trootfile = qs(containerDocument, \"rootfile\");\n\n\t\tif(!rootfile) {\n\t\t\tthrow new Error(\"No RootFile Found\");\n\t\t}\n\n\t\tthis.packagePath = rootfile.getAttribute(\"full-path\");\n\t\tthis.directory = path.dirname(this.packagePath);\n\t\tthis.encoding = containerDocument.xmlEncoding;\n\t}\n\n\tdestroy() {\n\t\tthis.packagePath = undefined;\n\t\tthis.directory = undefined;\n\t\tthis.encoding = undefined;\n\t}\n}\n\nexport default Container;\n","import {qs, qsa, qsp, indexOfElementNode} from \"./utils/core\";\n\n/**\n * Open Packaging Format Parser\n * @class\n * @param {document} packageDocument OPF XML\n */\nclass Packaging {\n\tconstructor(packageDocument) {\n\t\tthis.manifest = {};\n\t\tthis.navPath = '';\n\t\tthis.ncxPath = '';\n\t\tthis.coverPath = '';\n\t\tthis.spineNodeIndex = 0;\n\t\tthis.spine = [];\n\t\tthis.metadata = {};\n\n\t\tif (packageDocument) {\n\t\t\tthis.parse(packageDocument);\n\t\t}\n\t}\n\n\t/**\n\t * Parse OPF XML\n\t * @param  {document} packageDocument OPF XML\n\t * @return {object} parsed package parts\n\t */\n\tparse(packageDocument){\n\t\tvar metadataNode, manifestNode, spineNode;\n\n\t\tif(!packageDocument) {\n\t\t\tthrow new Error(\"Package File Not Found\");\n\t\t}\n\n\t\tmetadataNode = qs(packageDocument, \"metadata\");\n\t\tif(!metadataNode) {\n\t\t\tthrow new Error(\"No Metadata Found\");\n\t\t}\n\n\t\tmanifestNode = qs(packageDocument, \"manifest\");\n\t\tif(!manifestNode) {\n\t\t\tthrow new Error(\"No Manifest Found\");\n\t\t}\n\n\t\tspineNode = qs(packageDocument, \"spine\");\n\t\tif(!spineNode) {\n\t\t\tthrow new Error(\"No Spine Found\");\n\t\t}\n\n\t\tthis.manifest = this.parseManifest(manifestNode);\n\t\tthis.navPath = this.findNavPath(manifestNode);\n\t\tthis.ncxPath = this.findNcxPath(manifestNode, spineNode);\n\t\tthis.coverPath = this.findCoverPath(packageDocument);\n\n\t\tthis.spineNodeIndex = indexOfElementNode(spineNode);\n\n\t\tthis.spine = this.parseSpine(spineNode, this.manifest);\n\n\t\tthis.uniqueIdentifier = this.findUniqueIdentifier(packageDocument);\n\t\tthis.metadata = this.parseMetadata(metadataNode);\n\n\t\tthis.metadata.direction = spineNode.getAttribute(\"page-progression-direction\");\n\n\n\t\treturn {\n\t\t\t\"metadata\" : this.metadata,\n\t\t\t\"spine\"    : this.spine,\n\t\t\t\"manifest\" : this.manifest,\n\t\t\t\"navPath\"  : this.navPath,\n\t\t\t\"ncxPath\"  : this.ncxPath,\n\t\t\t\"coverPath\": this.coverPath,\n\t\t\t\"spineNodeIndex\" : this.spineNodeIndex\n\t\t};\n\t}\n\n\t/**\n\t * Parse Metadata\n\t * @private\n\t * @param  {node} xml\n\t * @return {object} metadata\n\t */\n\tparseMetadata(xml){\n\t\tvar metadata = {};\n\n\t\tmetadata.title = this.getElementText(xml, \"title\");\n\t\tmetadata.creator = this.getElementText(xml, \"creator\");\n\t\tmetadata.description = this.getElementText(xml, \"description\");\n\n\t\tmetadata.pubdate = this.getElementText(xml, \"date\");\n\n\t\tmetadata.publisher = this.getElementText(xml, \"publisher\");\n\n\t\tmetadata.identifier = this.getElementText(xml, \"identifier\");\n\t\tmetadata.language = this.getElementText(xml, \"language\");\n\t\tmetadata.rights = this.getElementText(xml, \"rights\");\n\n\t\tmetadata.modified_date = this.getPropertyText(xml, \"dcterms:modified\");\n\n\t\tmetadata.layout = this.getPropertyText(xml, \"rendition:layout\");\n\t\tmetadata.orientation = this.getPropertyText(xml, \"rendition:orientation\");\n\t\tmetadata.flow = this.getPropertyText(xml, \"rendition:flow\");\n\t\tmetadata.viewport = this.getPropertyText(xml, \"rendition:viewport\");\n\t\tmetadata.media_active_class = this.getPropertyText(xml, \"media:active-class\");\n\t\t// metadata.page_prog_dir = packageXml.querySelector(\"spine\").getAttribute(\"page-progression-direction\");\n\n\t\treturn metadata;\n\t}\n\n\t/**\n\t * Parse Manifest\n\t * @private\n\t * @param  {node} manifestXml\n\t * @return {object} manifest\n\t */\n\tparseManifest(manifestXml){\n\t\tvar manifest = {};\n\n\t\t//-- Turn items into an array\n\t\t// var selected = manifestXml.querySelectorAll(\"item\");\n\t\tvar selected = qsa(manifestXml, \"item\");\n\t\tvar items = Array.prototype.slice.call(selected);\n\n\t\t//-- Create an object with the id as key\n\t\titems.forEach(function(item){\n\t\t\tvar id = item.getAttribute(\"id\"),\n\t\t\t\t\thref = item.getAttribute(\"href\") || \"\",\n\t\t\t\t\ttype = item.getAttribute(\"media-type\") || \"\",\n\t\t\t\t\toverlay = item.getAttribute(\"media-overlay\") || \"\",\n\t\t\t\t\tproperties = item.getAttribute(\"properties\") || \"\";\n\n\t\t\tmanifest[id] = {\n\t\t\t\t\"href\" : href,\n\t\t\t\t// \"url\" : href,\n\t\t\t\t\"type\" : type,\n\t\t\t\t\"overlay\" : overlay,\n\t\t\t\t\"properties\" : properties.length ? properties.split(\" \") : []\n\t\t\t};\n\n\t\t});\n\n\t\treturn manifest;\n\n\t}\n\n\t/**\n\t * Parse Spine\n\t * @private\n\t * @param  {node} spineXml\n\t * @param  {Packaging.manifest} manifest\n\t * @return {object} spine\n\t */\n\tparseSpine(spineXml, manifest){\n\t\tvar spine = [];\n\n\t\tvar selected = qsa(spineXml, \"itemref\");\n\t\tvar items = Array.prototype.slice.call(selected);\n\n\t\t// var epubcfi = new EpubCFI();\n\n\t\t//-- Add to array to mantain ordering and cross reference with manifest\n\t\titems.forEach(function(item, index){\n\t\t\tvar idref = item.getAttribute(\"idref\");\n\t\t\t// var cfiBase = epubcfi.generateChapterComponent(spineNodeIndex, index, Id);\n\t\t\tvar props = item.getAttribute(\"properties\") || \"\";\n\t\t\tvar propArray = props.length ? props.split(\" \") : [];\n\t\t\t// var manifestProps = manifest[Id].properties;\n\t\t\t// var manifestPropArray = manifestProps.length ? manifestProps.split(\" \") : [];\n\n\t\t\tvar itemref = {\n\t\t\t\t\"idref\" : idref,\n\t\t\t\t\"linear\" : item.getAttribute(\"linear\") || \"yes\",\n\t\t\t\t\"properties\" : propArray,\n\t\t\t\t// \"href\" : manifest[Id].href,\n\t\t\t\t// \"url\" :  manifest[Id].url,\n\t\t\t\t\"index\" : index\n\t\t\t\t// \"cfiBase\" : cfiBase\n\t\t\t};\n\t\t\tspine.push(itemref);\n\t\t});\n\n\t\treturn spine;\n\t}\n\n\t/**\n\t * Find Unique Identifier\n\t * @private\n\t * @param  {node} packageXml\n\t * @return {string} Unique Identifier text\n\t */\n\tfindUniqueIdentifier(packageXml){\n\t\tvar uniqueIdentifierId = packageXml.documentElement.getAttribute(\"unique-identifier\");\n\t\tif (! uniqueIdentifierId) {\n\t\t\treturn \"\";\n\t\t}\n\t\tvar identifier = packageXml.getElementById(uniqueIdentifierId);\n\t\tif (! identifier) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (identifier.localName === \"identifier\" && identifier.namespaceURI === \"http://purl.org/dc/elements/1.1/\") {\n\t\t\treturn identifier.childNodes[0].nodeValue.trim();\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Find TOC NAV\n\t * @private\n\t * @param {element} manifestNode\n\t * @return {string}\n\t */\n\tfindNavPath(manifestNode){\n\t\t// Find item with property \"nav\"\n\t\t// Should catch nav irregardless of order\n\t\t// var node = manifestNode.querySelector(\"item[properties$='nav'], item[properties^='nav '], item[properties*=' nav ']\");\n\t\tvar node = qsp(manifestNode, \"item\", {\"properties\":\"nav\"});\n\t\treturn node ? node.getAttribute(\"href\") : false;\n\t}\n\n\t/**\n\t * Find TOC NCX\n\t * media-type=\"application/x-dtbncx+xml\" href=\"toc.ncx\"\n\t * @private\n\t * @param {element} manifestNode\n\t * @param {element} spineNode\n\t * @return {string}\n\t */\n\tfindNcxPath(manifestNode, spineNode){\n\t\t// var node = manifestNode.querySelector(\"item[media-type='application/x-dtbncx+xml']\");\n\t\tvar node = qsp(manifestNode, \"item\", {\"media-type\":\"application/x-dtbncx+xml\"});\n\t\tvar tocId;\n\n\t\t// If we can't find the toc by media-type then try to look for id of the item in the spine attributes as\n\t\t// according to http://www.idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.4.1.2,\n\t\t// \"The item that describes the NCX must be referenced by the spine toc attribute.\"\n\t\tif (!node) {\n\t\t\ttocId = spineNode.getAttribute(\"toc\");\n\t\t\tif(tocId) {\n\t\t\t\t// node = manifestNode.querySelector(\"item[id='\" + tocId + \"']\");\n\t\t\t\tnode = manifestNode.querySelector(`#${tocId}`);\n\t\t\t}\n\t\t}\n\n\t\treturn node ? node.getAttribute(\"href\") : false;\n\t}\n\n\t/**\n\t * Find the Cover Path\n\t * <item properties=\"cover-image\" id=\"ci\" href=\"cover.svg\" media-type=\"image/svg+xml\" />\n\t * Fallback for Epub 2.0\n\t * @private\n\t * @param  {node} packageXml\n\t * @return {string} href\n\t */\n\tfindCoverPath(packageXml){\n\t\tvar pkg = qs(packageXml, \"package\");\n\t\tvar epubVersion = pkg.getAttribute(\"version\");\n\n\t\tif (epubVersion === \"2.0\") {\n\t\t\tvar metaCover = qsp(packageXml, \"meta\", {\"name\":\"cover\"});\n\t\t\tif (metaCover) {\n\t\t\t\tvar coverId = metaCover.getAttribute(\"content\");\n\t\t\t\t// var cover = packageXml.querySelector(\"item[id='\" + coverId + \"']\");\n\t\t\t\tvar cover = packageXml.getElementById(coverId);\n\t\t\t\treturn cover ? cover.getAttribute(\"href\") : \"\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// var node = packageXml.querySelector(\"item[properties='cover-image']\");\n\t\t\tvar node = qsp(packageXml, \"item\", {\"properties\":\"cover-image\"});\n\t\t\treturn node ? node.getAttribute(\"href\") : \"\";\n\t\t}\n\t}\n\n\t/**\n\t * Get text of a namespaced element\n\t * @private\n\t * @param  {node} xml\n\t * @param  {string} tag\n\t * @return {string} text\n\t */\n\tgetElementText(xml, tag){\n\t\tvar found = xml.getElementsByTagNameNS(\"http://purl.org/dc/elements/1.1/\", tag);\n\t\tvar el;\n\n\t\tif(!found || found.length === 0) return \"\";\n\n\t\tel = found[0];\n\n\t\tif(el.childNodes.length){\n\t\t\treturn el.childNodes[0].nodeValue;\n\t\t}\n\n\t\treturn \"\";\n\n\t}\n\n\t/**\n\t * Get text by property\n\t * @private\n\t * @param  {node} xml\n\t * @param  {string} property\n\t * @return {string} text\n\t */\n\tgetPropertyText(xml, property){\n\t\tvar el = qsp(xml, \"meta\", {\"property\":property});\n\n\t\tif(el && el.childNodes.length){\n\t\t\treturn el.childNodes[0].nodeValue;\n\t\t}\n\n\t\treturn \"\";\n\t}\n\n\t/**\n\t * Load JSON Manifest\n\t * @param  {document} packageDocument OPF XML\n\t * @return {object} parsed package parts\n\t */\n\tload(json) {\n\t\tthis.metadata = json.metadata;\n\n\t\tlet spine = json.readingOrder || json.spine;\n\t\tthis.spine = spine.map((item, index) =>{\n\t\t\titem.index = index;\n\t\t\treturn item;\n\t\t});\n\n\t\tjson.resources.forEach((item, index) => {\n\t\t\tthis.manifest[index] = item;\n\n\t\t\tif (item.rel && item.rel[0] === \"cover\") {\n\t\t\t\tthis.coverPath = item.href;\n\t\t\t}\n\t\t});\n\n\t\tthis.spineNodeIndex = 0;\n\n\t\tthis.toc = json.toc.map((item, index) =>{\n\t\t\titem.label = item.title;\n\t\t\treturn item;\n\t\t});\n\n\t\treturn {\n\t\t\t\"metadata\" : this.metadata,\n\t\t\t\"spine\"    : this.spine,\n\t\t\t\"manifest\" : this.manifest,\n\t\t\t\"navPath\"  : this.navPath,\n\t\t\t\"ncxPath\"  : this.ncxPath,\n\t\t\t\"coverPath\": this.coverPath,\n\t\t\t\"spineNodeIndex\" : this.spineNodeIndex,\n\t\t\t\"toc\" : this.toc\n\t\t};\n\t}\n\n\tdestroy() {\n\t\tthis.manifest = undefined;\n\t\tthis.navPath = undefined;\n\t\tthis.ncxPath = undefined;\n\t\tthis.coverPath = undefined;\n\t\tthis.spineNodeIndex = undefined;\n\t\tthis.spine = undefined;\n\t\tthis.metadata = undefined;\n\t}\n}\n\nexport default Packaging;\n","import {qs, qsa, querySelectorByType, filterChildren, getParentByTagName} from \"./utils/core\";\n\n/**\n * Navigation Parser\n * @param {document} xml navigation html / xhtml / ncx\n */\nclass Navigation {\n\tconstructor(xml, path, canonical) {\n\t\tthis.toc = [];\n\t\tthis.tocByHref = {};\n\t\tthis.tocById = {};\n\n\t\tthis.landmarks = [];\n\t\tthis.landmarksByType = {};\n\n\t\tthis.canonical = canonical;\n\n\t\tthis.path = path;\n\n\t\tthis.length = 0;\n\t\tif (xml) {\n\t\t\tthis.parse(xml);\n\t\t}\n\t}\n\n\t/**\n\t * Parse out the navigation items\n\t * @param {document} xml navigation html / xhtml / ncx\n\t */\n\tparse(xml) {\n\t\tlet isXml = xml.nodeType;\n\t\tlet html;\n\t\tlet ncx;\n\n\t\tif (isXml) {\n\t\t\thtml = qs(xml, \"html\");\n\t\t\tncx = qs(xml, \"ncx\");\n\t\t}\n\n\t\tif (!isXml) {\n\t\t\tthis.toc = this.load(xml);\n\t\t} else if(html) {\n\t\t\tthis.toc = this.parseNav(xml);\n\t\t\tthis.landmarks = this.parseLandmarks(xml);\n\t\t} else if(ncx){\n\t\t\tthis.toc = this.parseNcx(xml);\n\t\t}\n\n\t\tthis.length = 0;\n\n\t\tthis.unpack(this.toc);\n\t}\n\n\t/**\n\t * Unpack navigation items\n\t * @private\n\t * @param  {array} toc\n\t */\n\tunpack(toc) {\n\t\tvar item;\n\n\t\tfor (var i = 0; i < toc.length; i++) {\n\t\t\titem = toc[i];\n\n\t\t\tif (item.href) {\n\t\t\t\tthis.tocByHref[item.href] = i;\n\t\t\t}\n\n\t\t\tif (item.id) {\n\t\t\t\tthis.tocById[item.id] = i;\n\t\t\t}\n\n\t\t\tthis.length++;\n\n\t\t\tif (item.subitems.length) {\n\t\t\t\tthis.unpack(item.subitems);\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * Get an item from the navigation\n\t * @param  {string} target\n\t * @return {object} navItem\n\t */\n\tget(target) {\n\t\tvar index;\n\n\t\tif(!target) {\n\t\t\treturn this.toc;\n\t\t}\n\n\t\tif(target.indexOf(\"#\") === 0) {\n\t\t\tindex = this.tocById[target.substring(1)];\n\t\t} else if(target in this.tocByHref){\n\t\t\tindex = this.tocByHref[target];\n\t\t}\n\n\t\treturn this.toc[index];\n\t}\n\n\t/**\n\t * Get a landmark by type\n\t * List of types: https://idpf.github.io/epub-vocabs/structure/\n\t * @param  {string} type\n\t * @return {object} landmarkItem\n\t */\n\tlandmark(type) {\n\t\tvar index;\n\n\t\tif(!type) {\n\t\t\treturn this.landmarks;\n\t\t}\n\n\t\tindex = this.landmarksByType[type];\n\n\t\treturn this.landmarks[index];\n\t}\n\n\t/**\n\t * Parse toc from a Epub > 3.0 Nav\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} navigation list\n\t */\n\tparseNav(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"toc\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar toc = {};\n\t\tvar list = [];\n\t\tvar item, parent;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.navItem(navItems[i]);\n\t\t\tif (item) {\n\t\t\t\ttoc[item.id] = item;\n\t\t\t\tif(!item.parent) {\n\t\t\t\t\tlist.push(item);\n\t\t\t\t} else {\n\t\t\t\t\tparent = toc[item.parent];\n\t\t\t\t\tparent.subitems.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a navItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} navItem\n\t */\n\tnavItem(item){\n\t\tlet id = item.getAttribute(\"id\") || undefined;\n\t\tlet content = filterChildren(item, \"a\", true);\n\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet src = content.getAttribute(\"href\") || \"\";\n\t\t\n\t\tif (!id) {\n\t\t\tid = src;\n\t\t}\n\t\tlet text = content.textContent || \"\";\n\t\tlet html = content.innerHTML;\n\t\tlet subitems = [];\n\t\tlet parentItem = getParentByTagName(item, \"li\");\n\t\tlet parent;\n\n\t\tif (parentItem) {\n\t\t\tparent = parentItem.getAttribute(\"id\");\n\t\t\tif (!parent) {\n\t\t\t\tconst parentContent = filterChildren(parentItem, \"a\", true);\n\t\t\t\tparent = parentContent && parentContent.getAttribute(\"href\");\n      \t\t\t}\n\t\t}\n\n\t\twhile (!parent && parentItem) {\n\t\t\tparentItem = getParentByTagName(parentItem, \"li\");\n\t\t\tif (parentItem) {\n\t\t\t\tparent = parentItem.getAttribute(\"id\");\n\t\t\t\tif (!parent) {\n\t\t\t\t\tconst parentContent = filterChildren(parentItem, \"a\", true);\n          \t\t\t\tparent = parentContent && parentContent.getAttribute(\"href\");\n        \t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar path = this.path.resolve(src);\n\n\t\treturn {\n\t\t\t\"id\": id,\n\t\t\t\"href\": src,\n\t\t\t\"canonical\": this.canonical(path),\n\t\t\t\"label\": text,\n\t\t\t\"html\": html,\n\t\t\t\"subitems\" : subitems,\n\t\t\t\"parent\" : parent\n\t\t};\n\t}\n\n\t/**\n\t * Parse landmarks from a Epub > 3.0 Nav\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} landmarks list\n\t */\n\tparseLandmarks(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"landmarks\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar list = [];\n\t\tvar item;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.landmarkItem(navItems[i]);\n\t\t\tif (item) {\n\t\t\t\tlist.push(item);\n\t\t\t\tthis.landmarksByType[item.type] = i;\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a landmarkItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} landmarkItem\n\t */\n\tlandmarkItem(item){\n\t\tlet content = filterChildren(item, \"a\", true);\n\n\t\tif (!content) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet type = content.getAttributeNS(\"http://www.idpf.org/2007/ops\", \"type\") || undefined;\n\t\tlet href = content.getAttribute(\"href\") || \"\";\n\t\tlet text = content.textContent || \"\";\n\n\t\treturn {\n\t\t\t\"href\": href,\n\t\t\t\"label\": text,\n\t\t\t\"type\" : type\n\t\t};\n\t}\n\n\t/**\n\t * Parse from a Epub > 3.0 NC\n\t * @private\n\t * @param  {document} navHtml\n\t * @return {array} navigation list\n\t */\n\tparseNcx(tocXml){\n\t\tvar navPoints = qsa(tocXml, \"navPoint\");\n\t\tvar length = navPoints.length;\n\t\tvar i;\n\t\tvar toc = {};\n\t\tvar list = [];\n\t\tvar item, parent;\n\n\t\tif(!navPoints || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.ncxItem(navPoints[i]);\n\t\t\ttoc[item.id] = item;\n\t\t\tif(!item.parent) {\n\t\t\t\tlist.push(item);\n\t\t\t} else {\n\t\t\t\tparent = toc[item.parent];\n\t\t\t\tparent.subitems.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Create a ncxItem\n\t * @private\n\t * @param  {element} item\n\t * @return {object} ncxItem\n\t */\n\tncxItem(item){\n\t\tvar id = item.getAttribute(\"id\") || false,\n\t\t\t\tcontent = qs(item, \"content\"),\n\t\t\t\tsrc = content.getAttribute(\"src\"),\n\t\t\t\tnavLabel = qs(item, \"navLabel\"),\n\t\t\t\ttext = navLabel.textContent ? navLabel.textContent : \"\",\n\t\t\t\tsubitems = [],\n\t\t\t\tparentNode = item.parentNode,\n\t\t\t\tparent;\n\n\t\tif(parentNode && (parentNode.nodeName === \"navPoint\" || parentNode.nodeName.split(':').slice(-1)[0] === \"navPoint\")) {\n\t\t\tparent = parentNode.getAttribute(\"id\");\n\t\t}\n\n\n\t\treturn {\n\t\t\t\"id\": id,\n\t\t\t\"href\": src,\n\t\t\t\"label\": text,\n\t\t\t\"subitems\" : subitems,\n\t\t\t\"parent\" : parent\n\t\t};\n\t}\n\n\t/**\n\t * Load Spine Items\n\t * @param  {object} json the items to be loaded\n\t * @return {Array} navItems\n\t */\n\tload(json) {\n\t\treturn json.map(item => {\n\t\t\titem.label = item.title;\n\t\t\titem.subitems = item.children ? this.load(item.children) : [];\n\t\t\treturn item;\n\t\t});\n\t}\n\n\t/**\n\t * forEach pass through\n\t * @param  {Function} fn function to run on each item\n\t * @return {method} forEach loop\n\t */\n\tforEach(fn) {\n\t\treturn this.toc.forEach(fn);\n\t}\n}\n\nexport default Navigation;\n","/*\n From Zip.js, by Gildas Lormeau\nedited down\n */\n\nvar table = {\n\t\"application\" : {\n\t\t\"ecmascript\" : [ \"es\", \"ecma\" ],\n\t\t\"javascript\" : \"js\",\n\t\t\"ogg\" : \"ogx\",\n\t\t\"pdf\" : \"pdf\",\n\t\t\"postscript\" : [ \"ps\", \"ai\", \"eps\", \"epsi\", \"epsf\", \"eps2\", \"eps3\" ],\n\t\t\"rdf+xml\" : \"rdf\",\n\t\t\"smil\" : [ \"smi\", \"smil\" ],\n\t\t\"xhtml+xml\" : [ \"xhtml\", \"xht\" ],\n\t\t\"xml\" : [ \"xml\", \"xsl\", \"xsd\", \"opf\", \"ncx\" ],\n\t\t\"zip\" : \"zip\",\n\t\t\"x-httpd-eruby\" : \"rhtml\",\n\t\t\"x-latex\" : \"latex\",\n\t\t\"x-maker\" : [ \"frm\", \"maker\", \"frame\", \"fm\", \"fb\", \"book\", \"fbdoc\" ],\n\t\t\"x-object\" : \"o\",\n\t\t\"x-shockwave-flash\" : [ \"swf\", \"swfl\" ],\n\t\t\"x-silverlight\" : \"scr\",\n\t\t\"epub+zip\" : \"epub\",\n\t\t\"font-tdpfr\" : \"pfr\",\n\t\t\"inkml+xml\" : [ \"ink\", \"inkml\" ],\n\t\t\"json\" : \"json\",\n\t\t\"jsonml+json\" : \"jsonml\",\n\t\t\"mathml+xml\" : \"mathml\",\n\t\t\"metalink+xml\" : \"metalink\",\n\t\t\"mp4\" : \"mp4s\",\n\t\t// \"oebps-package+xml\" : \"opf\",\n\t\t\"omdoc+xml\" : \"omdoc\",\n\t\t\"oxps\" : \"oxps\",\n\t\t\"vnd.amazon.ebook\" : \"azw\",\n\t\t\"widget\" : \"wgt\",\n\t\t// \"x-dtbncx+xml\" : \"ncx\",\n\t\t\"x-dtbook+xml\" : \"dtb\",\n\t\t\"x-dtbresource+xml\" : \"res\",\n\t\t\"x-font-bdf\" : \"bdf\",\n\t\t\"x-font-ghostscript\" : \"gsf\",\n\t\t\"x-font-linux-psf\" : \"psf\",\n\t\t\"x-font-otf\" : \"otf\",\n\t\t\"x-font-pcf\" : \"pcf\",\n\t\t\"x-font-snf\" : \"snf\",\n\t\t\"x-font-ttf\" : [ \"ttf\", \"ttc\" ],\n\t\t\"x-font-type1\" : [ \"pfa\", \"pfb\", \"pfm\", \"afm\" ],\n\t\t\"x-font-woff\" : \"woff\",\n\t\t\"x-mobipocket-ebook\" : [ \"prc\", \"mobi\" ],\n\t\t\"x-mspublisher\" : \"pub\",\n\t\t\"x-nzb\" : \"nzb\",\n\t\t\"x-tgif\" : \"obj\",\n\t\t\"xaml+xml\" : \"xaml\",\n\t\t\"xml-dtd\" : \"dtd\",\n\t\t\"xproc+xml\" : \"xpl\",\n\t\t\"xslt+xml\" : \"xslt\",\n\t\t\"internet-property-stream\" : \"acx\",\n\t\t\"x-compress\" : \"z\",\n\t\t\"x-compressed\" : \"tgz\",\n\t\t\"x-gzip\" : \"gz\",\n\t},\n\t\"audio\" : {\n\t\t\"flac\" : \"flac\",\n\t\t\"midi\" : [ \"mid\", \"midi\", \"kar\", \"rmi\" ],\n\t\t\"mpeg\" : [ \"mpga\", \"mpega\", \"mp2\", \"mp3\", \"m4a\", \"mp2a\", \"m2a\", \"m3a\" ],\n\t\t\"mpegurl\" : \"m3u\",\n\t\t\"ogg\" : [ \"oga\", \"ogg\", \"spx\" ],\n\t\t\"x-aiff\" : [ \"aif\", \"aiff\", \"aifc\" ],\n\t\t\"x-ms-wma\" : \"wma\",\n\t\t\"x-wav\" : \"wav\",\n\t\t\"adpcm\" : \"adp\",\n\t\t\"mp4\" : \"mp4a\",\n\t\t\"webm\" : \"weba\",\n\t\t\"x-aac\" : \"aac\",\n\t\t\"x-caf\" : \"caf\",\n\t\t\"x-matroska\" : \"mka\",\n\t\t\"x-pn-realaudio-plugin\" : \"rmp\",\n\t\t\"xm\" : \"xm\",\n\t\t\"mid\" : [ \"mid\", \"rmi\" ]\n\t},\n\t\"image\" : {\n\t\t\"gif\" : \"gif\",\n\t\t\"ief\" : \"ief\",\n\t\t\"jpeg\" : [ \"jpeg\", \"jpg\", \"jpe\" ],\n\t\t\"pcx\" : \"pcx\",\n\t\t\"png\" : \"png\",\n\t\t\"svg+xml\" : [ \"svg\", \"svgz\" ],\n\t\t\"tiff\" : [ \"tiff\", \"tif\" ],\n\t\t\"x-icon\" : \"ico\",\n\t\t\"bmp\" : \"bmp\",\n\t\t\"webp\" : \"webp\",\n\t\t\"x-pict\" : [ \"pic\", \"pct\" ],\n\t\t\"x-tga\" : \"tga\",\n\t\t\"cis-cod\" : \"cod\"\n\t},\n\t\"text\" : {\n\t\t\"cache-manifest\" : [ \"manifest\", \"appcache\" ],\n\t\t\"css\" : \"css\",\n\t\t\"csv\" : \"csv\",\n\t\t\"html\" : [ \"html\", \"htm\", \"shtml\", \"stm\" ],\n\t\t\"mathml\" : \"mml\",\n\t\t\"plain\" : [ \"txt\", \"text\", \"brf\", \"conf\", \"def\", \"list\", \"log\", \"in\", \"bas\" ],\n\t\t\"richtext\" : \"rtx\",\n\t\t\"tab-separated-values\" : \"tsv\",\n\t\t\"x-bibtex\" : \"bib\"\n\t},\n\t\"video\" : {\n\t\t\"mpeg\" : [ \"mpeg\", \"mpg\", \"mpe\", \"m1v\", \"m2v\", \"mp2\", \"mpa\", \"mpv2\" ],\n\t\t\"mp4\" : [ \"mp4\", \"mp4v\", \"mpg4\" ],\n\t\t\"quicktime\" : [ \"qt\", \"mov\" ],\n\t\t\"ogg\" : \"ogv\",\n\t\t\"vnd.mpegurl\" : [ \"mxu\", \"m4u\" ],\n\t\t\"x-flv\" : \"flv\",\n\t\t\"x-la-asf\" : [ \"lsf\", \"lsx\" ],\n\t\t\"x-mng\" : \"mng\",\n\t\t\"x-ms-asf\" : [ \"asf\", \"asx\", \"asr\" ],\n\t\t\"x-ms-wm\" : \"wm\",\n\t\t\"x-ms-wmv\" : \"wmv\",\n\t\t\"x-ms-wmx\" : \"wmx\",\n\t\t\"x-ms-wvx\" : \"wvx\",\n\t\t\"x-msvideo\" : \"avi\",\n\t\t\"x-sgi-movie\" : \"movie\",\n\t\t\"x-matroska\" : [ \"mpv\", \"mkv\", \"mk3d\", \"mks\" ],\n\t\t\"3gpp2\" : \"3g2\",\n\t\t\"h261\" : \"h261\",\n\t\t\"h263\" : \"h263\",\n\t\t\"h264\" : \"h264\",\n\t\t\"jpeg\" : \"jpgv\",\n\t\t\"jpm\" : [ \"jpm\", \"jpgm\" ],\n\t\t\"mj2\" : [ \"mj2\", \"mjp2\" ],\n\t\t\"vnd.ms-playready.media.pyv\" : \"pyv\",\n\t\t\"vnd.uvvu.mp4\" : [ \"uvu\", \"uvvu\" ],\n\t\t\"vnd.vivo\" : \"viv\",\n\t\t\"webm\" : \"webm\",\n\t\t\"x-f4v\" : \"f4v\",\n\t\t\"x-m4v\" : \"m4v\",\n\t\t\"x-ms-vob\" : \"vob\",\n\t\t\"x-smv\" : \"smv\"\n\t}\n};\n\nvar mimeTypes = (function() {\n\tvar type, subtype, val, index, mimeTypes = {};\n\tfor (type in table) {\n\t\tif (table.hasOwnProperty(type)) {\n\t\t\tfor (subtype in table[type]) {\n\t\t\t\tif (table[type].hasOwnProperty(subtype)) {\n\t\t\t\t\tval = table[type][subtype];\n\t\t\t\t\tif (typeof val == \"string\") {\n\t\t\t\t\t\tmimeTypes[val] = type + \"/\" + subtype;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (index = 0; index < val.length; index++) {\n\t\t\t\t\t\t\tmimeTypes[val[index]] = type + \"/\" + subtype;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn mimeTypes;\n})();\n\nvar defaultValue = \"text/plain\";//\"application/octet-stream\";\n\nfunction lookup(filename) {\n\treturn filename && mimeTypes[filename.split(\".\").pop().toLowerCase()] || defaultValue;\n};\n\nmodule.exports = {\n\t'lookup': lookup\n}\n","import {substitute} from \"./utils/replacements\";\nimport {createBase64Url, createBlobUrl, blob2base64} from \"./utils/core\";\nimport Url from \"./utils/url\";\nimport mime from \"../libs/mime/mime\";\nimport Path from \"./utils/path\";\nimport path from \"path-webpack\";\n\n/**\n * Handle Package Resources\n * @class\n * @param {Manifest} manifest\n * @param {object} [options]\n * @param {string} [options.replacements=\"base64\"]\n * @param {Archive} [options.archive]\n * @param {method} [options.resolver]\n */\nclass Resources {\n\tconstructor(manifest, options) {\n\t\tthis.settings = {\n\t\t\treplacements: (options && options.replacements) || \"base64\",\n\t\t\tarchive: (options && options.archive),\n\t\t\tresolver: (options && options.resolver),\n\t\t\trequest: (options && options.request)\n\t\t};\n\n\t\tthis.process(manifest);\n\t}\n\n\t/**\n\t * Process resources\n\t * @param {Manifest} manifest\n\t */\n\tprocess(manifest){\n\t\tthis.manifest = manifest;\n\t\tthis.resources = Object.keys(manifest).\n\t\t\tmap(function (key){\n\t\t\t\treturn manifest[key];\n\t\t\t});\n\n\t\tthis.replacementUrls = [];\n\n\t\tthis.html = [];\n\t\tthis.assets = [];\n\t\tthis.css = [];\n\n\t\tthis.urls = [];\n\t\tthis.cssUrls = [];\n\n\t\tthis.split();\n\t\tthis.splitUrls();\n\t}\n\n\t/**\n\t * Split resources by type\n\t * @private\n\t */\n\tsplit(){\n\n\t\t// HTML\n\t\tthis.html = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type === \"application/xhtml+xml\" ||\n\t\t\t\t\t\titem.type === \"text/html\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Exclude HTML\n\t\tthis.assets = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type !== \"application/xhtml+xml\" &&\n\t\t\t\t\t\titem.type !== \"text/html\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t// Only CSS\n\t\tthis.css = this.resources.\n\t\t\tfilter(function (item){\n\t\t\t\tif (item.type === \"text/css\") {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Convert split resources into Urls\n\t * @private\n\t */\n\tsplitUrls(){\n\n\t\t// All Assets Urls\n\t\tthis.urls = this.assets.\n\t\t\tmap(function(item) {\n\t\t\t\treturn item.href;\n\t\t\t}.bind(this));\n\n\t\t// Css Urls\n\t\tthis.cssUrls = this.css.map(function(item) {\n\t\t\treturn item.href;\n\t\t});\n\n\t}\n\n\t/**\n\t * Create a url to a resource\n\t * @param {string} url\n\t * @return {Promise<string>} Promise resolves with url string\n\t */\n\tcreateUrl (url) {\n\t\tvar parsedUrl = new Url(url);\n\t\tvar mimeType = mime.lookup(parsedUrl.filename);\n\n\t\tif (this.settings.archive) {\n\t\t\treturn this.settings.archive.createUrl(url, {\"base64\": (this.settings.replacements === \"base64\")});\n\t\t} else {\n\t\t\tif (this.settings.replacements === \"base64\") {\n\t\t\t\treturn this.settings.request(url, 'blob')\n\t\t\t\t\t.then((blob) => {\n\t\t\t\t\t\treturn blob2base64(blob);\n\t\t\t\t\t})\n\t\t\t\t\t.then((blob) => {\n\t\t\t\t\t\treturn createBase64Url(blob, mimeType);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\treturn this.settings.request(url, 'blob').then((blob) => {\n\t\t\t\t\treturn createBlobUrl(blob, mimeType);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Create blob urls for all the assets\n\t * @return {Promise}         returns replacement urls\n\t */\n\treplacements(){\n\t\tif (this.settings.replacements === \"none\") {\n\t\t\treturn new Promise(function(resolve) {\n\t\t\t\tresolve(this.urls);\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tvar replacements = this.urls.\n\t\t\tmap( (url) => {\n\t\t\t\tvar absolute = this.settings.resolver(url);\n\n\t\t\t\treturn this.createUrl(absolute).\n\t\t\t\t\tcatch((err) => {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t});\n\t\t\t});\n\n\t\treturn Promise.all(replacements)\n\t\t\t.then( (replacementUrls) => {\n\t\t\t\tthis.replacementUrls = replacementUrls.filter((url) => {\n\t\t\t\t\treturn (typeof(url) === \"string\");\n\t\t\t\t});\n\t\t\t\treturn replacementUrls;\n\t\t\t});\n\t}\n\n\t/**\n\t * Replace URLs in CSS resources\n\t * @private\n\t * @param  {Archive} [archive]\n\t * @param  {method} [resolver]\n\t * @return {Promise}\n\t */\n\treplaceCss(archive, resolver){\n\t\tvar replaced = [];\n\t\tarchive = archive || this.settings.archive;\n\t\tresolver = resolver || this.settings.resolver;\n\t\tthis.cssUrls.forEach(function(href) {\n\t\t\tvar replacement = this.createCssFile(href, archive, resolver)\n\t\t\t\t.then(function (replacementUrl) {\n\t\t\t\t\t// switch the url in the replacementUrls\n\t\t\t\t\tvar indexInUrls = this.urls.indexOf(href);\n\t\t\t\t\tif (indexInUrls > -1) {\n\t\t\t\t\t\tthis.replacementUrls[indexInUrls] = replacementUrl;\n\t\t\t\t\t}\n\t\t\t\t}.bind(this))\n\n\n\t\t\treplaced.push(replacement);\n\t\t}.bind(this));\n\t\treturn Promise.all(replaced);\n\t}\n\n\t/**\n\t * Create a new CSS file with the replaced URLs\n\t * @private\n\t * @param  {string} href the original css file\n\t * @return {Promise}  returns a BlobUrl to the new CSS file or a data url\n\t */\n\tcreateCssFile(href){\n\t\tvar newUrl;\n\n\t\tif (path.isAbsolute(href)) {\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\tvar absolute = this.settings.resolver(href);\n\n\t\t// Get the text of the css file from the archive\n\t\tvar textResponse;\n\n\t\tif (this.settings.archive) {\n\t\t\ttextResponse = this.settings.archive.getText(absolute);\n\t\t} else {\n\t\t\ttextResponse = this.settings.request(absolute, \"text\");\n\t\t}\n\n\t\t// Get asset links relative to css file\n\t\tvar relUrls = this.urls.map( (assetHref) => {\n\t\t\tvar resolved = this.settings.resolver(assetHref);\n\t\t\tvar relative = new Path(absolute).relative(resolved);\n\n\t\t\treturn relative;\n\t\t});\n\n\t\tif (!textResponse) {\n\t\t\t// file not found, don't replace\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\treturn textResponse.then( (text) => {\n\t\t\t// Replacements in the css text\n\t\t\ttext = substitute(text, relUrls, this.replacementUrls);\n\n\t\t\t// Get the new url\n\t\t\tif (this.settings.replacements === \"base64\") {\n\t\t\t\tnewUrl = createBase64Url(text, \"text/css\");\n\t\t\t} else {\n\t\t\t\tnewUrl = createBlobUrl(text, \"text/css\");\n\t\t\t}\n\n\t\t\treturn newUrl;\n\t\t}, (err) => {\n\t\t\t// handle response errors\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\n\t}\n\n\t/**\n\t * Resolve all resources URLs relative to an absolute URL\n\t * @param  {string} absolute to be resolved to\n\t * @param  {resolver} [resolver]\n\t * @return {string[]} array with relative Urls\n\t */\n\trelativeTo(absolute, resolver){\n\t\tresolver = resolver || this.settings.resolver;\n\n\t\t// Get Urls relative to current sections\n\t\treturn this.urls.\n\t\t\tmap(function(href) {\n\t\t\t\tvar resolved = resolver(href);\n\t\t\t\tvar relative = new Path(absolute).relative(resolved);\n\t\t\t\treturn relative;\n\t\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Get a URL for a resource\n\t * @param  {string} path\n\t * @return {string} url\n\t */\n\tget(path) {\n\t\tvar indexInUrls = this.urls.indexOf(path);\n\t\tif (indexInUrls === -1) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.replacementUrls.length) {\n\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\tresolve(this.replacementUrls[indexInUrls]);\n\t\t\t}.bind(this));\n\t\t} else {\n\t\t\treturn this.createUrl(path);\n\t\t}\n\t}\n\n\t/**\n\t * Substitute urls in content, with replacements,\n\t * relative to a url if provided\n\t * @param  {string} content\n\t * @param  {string} [url]   url to resolve to\n\t * @return {string}         content with urls substituted\n\t */\n\tsubstitute(content, url) {\n\t\tvar relUrls;\n\t\tif (url) {\n\t\t\trelUrls = this.relativeTo(url);\n\t\t} else {\n\t\t\trelUrls = this.urls;\n\t\t}\n\t\treturn substitute(content, relUrls, this.replacementUrls);\n\t}\n\n\tdestroy() {\n\t\tthis.settings = undefined;\n\t\tthis.manifest = undefined;\n\t\tthis.resources = undefined;\n\t\tthis.replacementUrls = undefined;\n\t\tthis.html = undefined;\n\t\tthis.assets = undefined;\n\t\tthis.css = undefined;\n\n\t\tthis.urls = undefined;\n\t\tthis.cssUrls = undefined;\n\t}\n}\n\nexport default Resources;\n","import EpubCFI from \"./epubcfi\";\nimport {\n\tqs,\n\tqsa,\n\tquerySelectorByType,\n\tindexOfSorted,\n\tlocationOf\n} from \"./utils/core\";\n\n/**\n * Page List Parser\n * @param {document} [xml]\n */\nclass PageList {\n\tconstructor(xml, path, canonical) {\n\t\tthis.pages = [];\n\t\tthis.locations = [];\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.firstPage = 0;\n\t\tthis.lastPage = 0;\n\t\tthis.totalPages = 0;\n\n\t\tthis.pagesByAbsolutePath = {};\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\n\t\tthis.path = path;\n\t\tthis.canonical = canonical;\n\n\t\tif (xml) {\n\t\t\tthis.pageList = this.parse(xml);\n\t\t}\n\n\t\tif(this.pageList && this.pageList.length) {\n\t\t\tthis.process(this.pageList);\n\t\t}\n\t}\n\n\t/**\n\t * Parse PageList Xml\n\t * @param  {document} xml\n\t */\n\tparse(xml) {\n\t\tvar html = qs(xml, \"html\");\n\t\tvar ncx = qs(xml, \"ncx\");\n\n\t\tif(html) {\n\t\t\treturn this.parseNav(xml);\n\t\t} else if(ncx){ // Not supported\n\t\t\t// return this.parseNcx(xml);\n\t\t\treturn;\n\t\t}\n\n\t}\n\n\t/**\n\t * Parse a Nav PageList\n\t * @private\n\t * @param  {node} navHtml\n\t * @return {PageList.item[]} list\n\t */\n\tparseNav(navHtml){\n\t\tvar navElement = querySelectorByType(navHtml, \"nav\", \"page-list\");\n\t\tvar navItems = navElement ? qsa(navElement, \"li\") : [];\n\t\tvar length = navItems.length;\n\t\tvar i;\n\t\tvar list = [];\n\t\tvar item;\n\n\t\tif(!navItems || length === 0) return list;\n\n\t\tfor (i = 0; i < length; ++i) {\n\t\t\titem = this.item(navItems[i], i);\n\t\t\tlist.push(item);\n\t\t}\n\n\t\treturn list;\n\t}\n\n\t/**\n\t * Page List Item\n\t * @private\n\t * @param  {node} item\n\t * @return {object} pageListItem\n\t */\n\titem(item, i){\n\t\tvar content = qs(item, \"a\"),\n\t\t\t\thref = content.getAttribute(\"href\") || \"\",\n\t\t\t\ttext = content.textContent || \"\",\n\t\t\t\tpageLabel = text,\n\t\t\t\tpage = i + 1, \n\t\t\t\tisCfi = href.indexOf(\"epubcfi\"),\n\t\t\t\tsplit,\n\t\t\t\tpackageUrl,\n\t\t\t\tcfi;\n\n\t\tif(isCfi != -1) {\n\t\t\tsplit = href.split(\"#\");\n\t\t\tpackageUrl = split[0];\n\t\t\tcfi = split.length > 1 ? split[1] : false;\n\t\t\treturn {\n\t\t\t\t\"cfi\" : cfi,\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"packageUrl\" : packageUrl,\n\t\t\t\t\"page\" : page,\n\t\t\t\t\"pageLabel\": pageLabel\n\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\t\"href\" : href,\n\t\t\t\t\"page\" : page,\n\t\t\t\t\"pageLabel\": pageLabel\n\t\t\t};\n\t\t}\n\t}\n\n\t/**\n\t * Process pageList items\n\t * @private\n\t * @param  {array} pageList\n\t */\n\tprocess(pageList){\n\t\tpageList.forEach(function(item){\n\t\t\tthis.pages.push(item.page);\n\t\t\tif (item.cfi) {\n\t\t\t\tthis.locations.push(item.cfi);\n\t\t\t}\n\t\t\tif ( item.href ) {\n\t\t\t\tvar href = (item.href.split('#'))[0];\n\t\t\t\tvar path = this.path.resolve(href);\n\t\t\t\tvar absolute = this.canonical(path);\n\t\t\t\tif ( this.pagesByAbsolutePath[absolute] == null ) {\n\t\t\t\t\tthis.pagesByAbsolutePath[absolute] = [];\n\t\t\t\t}\n\t\t\t\tthis.pagesByAbsolutePath[absolute].push(item.page);\n\t\t\t}\n\t\t}, this);\n\t\tthis.firstPage = parseInt(this.pages[0]);\n\t\tthis.lastPage = parseInt(this.pages[this.pages.length-1]);\n\t\tthis.totalPages = this.lastPage - this.firstPage;\n\t}\n\n\t/**\n\t * Get a PageList result from a EpubCFI\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} page\n\t */\n\tpageFromCfi(cfi){\n\t\tvar pg = -1;\n\n\t\t// Check if the pageList has not been set yet\n\t\tif(this.locations.length === 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\t// TODO: check if CFI is valid?\n\n\t\t// check if the cfi is in the location list\n\t\t// var index = this.locations.indexOf(cfi);\n\t\tvar index = indexOfSorted(cfi, this.locations, this.epubcfi.compare);\n\t\tif(index != -1) {\n\t\t\tpg = this.pages[index];\n\t\t} else {\n\t\t\t// Otherwise add it to the list of locations\n\t\t\t// Insert it in the correct position in the locations page\n\t\t\t//index = EPUBJS.core.insert(cfi, this.locations, this.epubcfi.compare);\n\t\t\tindex = locationOf(cfi, this.locations, this.epubcfi.compare);\n\t\t\t// Get the page at the location just before the new one, or return the first\n\t\t\tpg = index-1 >= 0 ? this.pages[index-1] : this.pages[0];\n\t\t\tif(pg !== undefined) {\n\t\t\t\t// Add the new page in so that the locations and page array match up\n\t\t\t\t//this.pages.splice(index, 0, pg);\n\t\t\t} else {\n\t\t\t\tpg = -1;\n\t\t\t}\n\n\t\t}\n\t\treturn pg;\n\t}\n\n\tpagesFromLocation(location) {\n\t\tvar pgs = [];\n\n\t\t// Check if the pageList has not been set yet\n\t\tif(this.locations.length === 0) {\n\t\t\treturn [];\n\t\t}\n\n\t\tvar pg = this.pageFromCfi(location.start.cfi);\n\t\tif ( pg == -1 ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tpgs.push(pg);\n\t\tpg = this.pageFromCfi(location.end.cfi);\n\t\tif ( pg != pgs[0] ) {\n\t\t\tpgs.push(pg);\n\t\t}\n\n\t\treturn pgs;\n\t}\n\n\tpageLabel(page) {\n\t\tvar item = this.pageList[page];\n\t\tif ( item ) {\n\t\t\treturn item.pageLabel || `#${page}`;\n\t\t}\n\t\treturn -1;\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Page List Item\n\t * @param  {string | number} pg\n\t * @return {string} cfi\n\t */\n\tcfiFromPage(pg){\n\t\tvar cfi = -1;\n\t\t// check that pg is an int\n\t\tif(typeof pg != \"number\"){\n\t\t\tpg = parseInt(pg);\n\t\t}\n\n\t\t// check if the cfi is in the page list\n\t\t// Pages could be unsorted.\n\t\tvar index = this.pages.indexOf(pg);\n\t\tif(index != -1) {\n\t\t\tcfi = this.locations[index];\n\t\t}\n\t\t// TODO: handle pages not in the list\n\t\treturn cfi;\n\t}\n\n\tcfiFromPageLabel(pageLabel) {\n\t\tvar item = this.pageList.find(item => item.pageLabel == pageLabel);\n\t\tif ( item ) {\n\t\t\treturn this.cfiFromPage(item.page);\n\t\t}\n\t\treturn -1;\n\t}\n\n\t/**\n\t * Get a Page from Book percentage\n\t * @param  {number} percent\n\t * @return {number} page\n\t */\n\tpageFromPercentage(percent){\n\t\tvar pg = Math.round(this.totalPages * percent);\n\t\treturn pg;\n\t}\n\n\titemFromPercentage(percent) {\n\t\tvar pg = this.pageFromPercentage(percent);\n\t\treturn this.pageList[pg - 1];\n\t}\n\n\titemFromCfi(cfi) {\n\t\tvar pg = this.pageFromCfi(cfi);\n\t\treturn this.pageList[pg - 1];\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a page\n\t * @param  {number} pg the page\n\t * @return {number} percentage\n\t */\n\tpercentageFromPage(pg){\n\t\tvar percentage = (pg - this.firstPage) / this.totalPages;\n\t\treturn Math.round(percentage * 1000) / 1000;\n\t}\n\n\t/**\n\t * Returns a value between 0 - 1 corresponding to the location of a cfi\n\t * @param  {string} cfi EpubCFI String\n\t * @return {number} percentage\n\t */\n\tpercentageFromCfi(cfi){\n\t\tvar pg = this.pageFromCfi(cfi);\n\t\tvar percentage = this.percentageFromPage(pg);\n\t\treturn percentage;\n\t}\n\n\t/**\n\t * Destroy\n\t */\n\tdestroy() {\n\t\tthis.pages = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.epubcfi = undefined;\n\n\t\tthis.pageList = undefined;\n\n\t\tthis.toc = undefined;\n\t\tthis.ncx = undefined;\n\t}\n}\n\nexport default PageList;\n","import { extend } from \"./utils/core\";\nimport { EVENTS } from \"./utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Figures out the CSS values to apply for a layout\n * @class\n * @param {object} settings\n * @param {string} [settings.layout='reflowable']\n * @param {string} [settings.spread]\n * @param {number} [settings.minSpreadWidth=800]\n * @param {boolean} [settings.evenSpreads=false]\n */\nclass Layout {\n\tconstructor(settings) {\n\t\tthis.settings = settings;\n\t\tthis.name = settings.layout || \"reflowable\";\n\t\tthis._spread = (settings.spread === \"none\") ? false : true;\n\t\tthis._minSpreadWidth = settings.minSpreadWidth || 800;\n\t\tthis._evenSpreads = settings.evenSpreads || false;\n\n\t\tif (settings.flow === \"scrolled\" ||\n\t\t\t\tsettings.flow === \"scrolled-continuous\" ||\n\t\t\t\tsettings.flow === \"scrolled-doc\") {\n\t\t\tthis._flow = \"scrolled\";\n\t\t} else {\n\t\t\tthis._flow = \"paginated\";\n\t\t}\n\n\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.spreadWidth = 0;\n\t\tthis.delta = 0;\n\n\t\tthis.columnWidth = 0;\n\t\tthis.gap = 0;\n\t\tthis.divisor = 1;\n\n\t\tthis.props = {\n\t\t\tname: this.name,\n\t\t\tspread: this._spread,\n\t\t\tflow: this._flow,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tspreadWidth: 0,\n\t\t\tdelta: 0,\n\t\t\tcolumnWidth: 0,\n\t\t\tgap: 0,\n\t\t\tdivisor: 1\n\t\t};\n\n\t}\n\n\t/**\n\t * Switch the flow between paginated and scrolled\n\t * @param  {string} flow paginated | scrolled\n\t * @return {string} simplified flow\n\t */\n\tflow(flow) {\n\t\tif (typeof(flow) != \"undefined\") {\n\t\t\tif (flow === \"scrolled\" ||\n\t\t\t\t\tflow === \"scrolled-continuous\" ||\n\t\t\t\t\tflow === \"scrolled-doc\") {\n\t\t\t\tthis._flow = \"scrolled\";\n\t\t\t} else {\n\t\t\t\tthis._flow = \"paginated\";\n\t\t\t}\n\t\t\t// this.props.flow = this._flow;\n\t\t\tthis.update({flow: this._flow});\n\t\t}\n\t\treturn this._flow;\n\t}\n\n\t/**\n\t * Switch between using spreads or not, and set the\n\t * width at which they switch to single.\n\t * @param  {string} spread \"none\" | \"always\" | \"auto\"\n\t * @param  {number} min integer in pixels\n\t * @return {boolean} spread true | false\n\t */\n\tspread(spread, min) {\n\n\t\tif (spread) {\n\t\t\tthis._spread = (spread === \"none\") ? false : true;\n\t\t\t// this.props.spread = this._spread;\n\t\t\tthis.update({spread: this._spread});\n\t\t}\n\n\t\tif (min >= 0) {\n\t\t\tthis._minSpreadWidth = min;\n\t\t}\n\n\t\treturn this._spread;\n\t}\n\n\t/**\n\t * Calculate the dimensions of the pagination\n\t * @param  {number} _width  width of the rendering\n\t * @param  {number} _height height of the rendering\n\t * @param  {number} _gap    width of the gap between columns\n\t */\n\tcalculate(_width, _height, _gap){\n\n\t\tvar divisor = 1;\n\t\tvar gap = _gap || 0;\n\n\t\t//-- Check the width and create even width columns\n\t\t// var fullWidth = Math.floor(_width);\n\t\tvar width = _width;\n\t\tvar height = _height;\n\n\t\tvar section = Math.floor(width / 12);\n\n\t\tvar columnWidth;\n\t\tvar spreadWidth;\n\t\tvar pageWidth;\n\t\tvar delta;\n\n\t\tif (this._spread && width >= this._minSpreadWidth) {\n\t\t\tdivisor = 2;\n\t\t} else {\n\t\t\tdivisor = 1;\n\t\t}\n\n\t\tif (this.name === \"reflowable\" && this._flow === \"paginated\" && !(_gap >= 0)) {\n\t\t\tgap = ((section % 2 === 0) ? section : section - 1);\n\t\t}\n\n\t\tif (this.name === \"pre-paginated\" ) {\n\t\t\tgap = 0;\n\t\t}\n\n\t\t//-- Double Page\n\t\tif(divisor > 1) {\n\t\t\t// width = width - gap;\n\t\t\t// columnWidth = (width - gap) / divisor;\n\t\t\t// gap = gap / divisor;\n\t\t\tcolumnWidth = (width / divisor) - gap;\n\t\t\tpageWidth = columnWidth + gap;\n\t\t} else {\n\t\t\tcolumnWidth = width;\n\t\t\tpageWidth = width;\n\t\t}\n\n\t\tif (this.name === \"pre-paginated\" && divisor > 1) {\n\t\t\twidth = columnWidth;\n\t\t}\n\n\t\tspreadWidth = (columnWidth * divisor) + gap;\n\n\t\tdelta = Math.ceil(width);\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.spreadWidth = spreadWidth;\n\t\tthis.pageWidth = pageWidth;\n\t\tthis.delta = delta;\n\n\t\tthis.columnWidth = columnWidth;\n\t\tthis.gap = gap;\n\t\tthis.divisor = divisor;\n\n\t\t// this.props.width = width;\n\t\t// this.props.height = _height;\n\t\t// this.props.spreadWidth = spreadWidth;\n\t\t// this.props.pageWidth = pageWidth;\n\t\t// this.props.delta = delta;\n\t\t//\n\t\t// this.props.columnWidth = colWidth;\n\t\t// this.props.gap = gap;\n\t\t// this.props.divisor = divisor;\n\n\t\tthis.update({\n\t\t\twidth,\n\t\t\theight,\n\t\t\tspreadWidth,\n\t\t\tpageWidth,\n\t\t\tdelta,\n\t\t\tcolumnWidth,\n\t\t\tgap,\n\t\t\tdivisor\n\t\t});\n\n\t}\n\n\t/**\n\t * Apply Css to a Document\n\t * @param  {Contents} contents\n\t * @return {Promise}\n\t */\n\tformat(contents){\n\t\tvar formating;\n\n\t\tvar viewport = contents.viewport();\n\t\t// console.log(\"AHOY contents.format VIEWPORT\", this.name, viewport.height);\n\t\tif (this.name === \"pre-paginated\" && viewport.height != 'auto' && viewport.height != undefined ) {\n\t\t\t// console.log(\"AHOY CONTENTS format\", this.columnWidth, this.height);\n\t\t\tformating = contents.fit(this.columnWidth, this.height);\n\t\t} else if (this._flow === \"paginated\") {\n\t\t\tformating = contents.columns(this.width, this.height, this.columnWidth, this.gap);\n\t\t} else { // scrolled\n\t\t\tformating = contents.size(this.width, null);\n\t\t\tif ( this.name === 'pre-paginated' ) {\n\t\t\t\tcontents.content.style.overflow = 'auto';\n\t\t\t\tcontents.addStylesheetRules({\n\t\t\t\t\t\"body\": {\n\t\t\t\t\t\t\"margin\": 0,\n\t\t\t\t\t\t\"padding\": \"1em !important\",\n\t\t\t\t\t\t\"box-sizing\": \"border-box\"\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\treturn formating; // might be a promise in some View Managers\n\t}\n\n\t/**\n\t * Count number of pages\n\t * @param  {number} totalLength\n\t * @param  {number} pageLength\n\t * @return {{spreads: Number, pages: Number}}\n\t */\n\tcount(totalLength, pageLength) {\n\n\t\tlet spreads, pages;\n\n\t\tif (this.name === \"pre-paginated\") {\n\t\t\tspreads = 1;\n\t\t\tpages = 1;\n\t\t} else if (this._flow === \"paginated\") {\n\t\t\tpageLength = pageLength || this.delta;\n\t\t\tspreads = Math.ceil( totalLength / pageLength);\n\t\t\tpages = spreads * this.divisor;\n\t\t} else { // scrolled\n\t\t\tpageLength = pageLength || this.height;\n\t\t\tspreads = Math.ceil( totalLength / pageLength);\n\t\t\tpages = spreads;\n\t\t}\n\n\t\treturn {\n\t\t\tspreads,\n\t\t\tpages\n\t\t};\n\n\t}\n\n\t/**\n\t * Update props that have changed\n\t * @private\n\t * @param  {object} props\n\t */\n\tupdate(props) {\n\t\t// Remove props that haven't changed\n\t\tObject.keys(props).forEach((propName) => {\n\t\t\tif (this.props[propName] === props[propName]) {\n\t\t\t\tdelete props[propName];\n\t\t\t}\n\t\t});\n\n\t\tif(Object.keys(props).length > 0) {\n\t\t\tlet newProps = extend(this.props, props);\n\t\t\tthis.emit(EVENTS.LAYOUT.UPDATED, newProps, props);\n\t\t}\n\t}\n}\n\nEventEmitter(Layout.prototype);\n\nexport default Layout;\n","import Url from \"./utils/url\";\n\n/**\n * Themes to apply to displayed content\n * @class\n * @param {Rendition} rendition\n */\nclass Themes {\n\tconstructor(rendition) {\n\t\tthis.rendition = rendition;\n\t\tthis._themes = {\n\t\t\t\"default\" : {\n\t\t\t\t\"rules\" : {},\n\t\t\t\t\"url\" : \"\",\n\t\t\t\t\"serialized\" : \"\"\n\t\t\t}\n\t\t};\n\t\tthis._overrides = {};\n\t\tthis._current = \"default\";\n\t\tthis._injected = [];\n\t\tthis.rendition.hooks.content.register(this.inject.bind(this));\n\t\tthis.rendition.hooks.content.register(this.overrides.bind(this));\n\n\t}\n\n\t/**\n\t * Add themes to be used by a rendition\n\t * @param {object | Array<object> | string}\n\t * @example themes.register(\"light\", \"http://example.com/light.css\")\n\t * @example themes.register(\"light\", { \"body\": { \"color\": \"purple\"}})\n\t * @example themes.register({ \"light\" : {...}, \"dark\" : {...}})\n\t */\n\tregister () {\n\t\tif (arguments.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tif (arguments.length === 1 && typeof(arguments[0]) === \"object\") {\n\t\t\treturn this.registerThemes(arguments[0]);\n\t\t}\n\t\tif (arguments.length === 1 && typeof(arguments[0]) === \"string\") {\n\t\t\treturn this.default(arguments[0]);\n\t\t}\n\t\tif (arguments.length === 2 && typeof(arguments[1]) === \"string\") {\n\t\t\treturn this.registerUrl(arguments[0], arguments[1]);\n\t\t}\n\t\tif (arguments.length === 2 && typeof(arguments[1]) === \"object\") {\n\t\t\treturn this.registerRules(arguments[0], arguments[1]);\n\t\t}\n\t}\n\n\t/**\n\t * Add a default theme to be used by a rendition\n\t * @param {object | string} theme\n\t * @example themes.register(\"http://example.com/default.css\")\n\t * @example themes.register({ \"body\": { \"color\": \"purple\"}})\n\t */\n\tdefault (theme) {\n\t\tif (!theme) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof(theme) === \"string\") {\n\t\t\treturn this.registerUrl(\"default\", theme);\n\t\t}\n\t\tif (typeof(theme) === \"object\") {\n\t\t\treturn this.registerRules(\"default\", theme);\n\t\t}\n\t}\n\n\t/**\n\t * Register themes object\n\t * @param {object} themes\n\t */\n\tregisterThemes (themes) {\n\t\tfor (var theme in themes) {\n\t\t\tif (themes.hasOwnProperty(theme)) {\n\t\t\t\tif (typeof(themes[theme]) === \"string\") {\n\t\t\t\t\tthis.registerUrl(theme, themes[theme]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.registerRules(theme, themes[theme]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Register a url\n\t * @param {string} name\n\t * @param {string} input\n\t */\n\tregisterUrl (name, input) {\n\t\tvar url = new Url(input);\n\t\tthis._themes[name] = { \"url\": url.toString() };\n\t\tif (this._injected[name]) {\n\t\t\tthis.update(name);\n\t\t}\n\t}\n\n\t/**\n\t * Register rule\n\t * @param {string} name\n\t * @param {object} rules\n\t */\n\tregisterRules (name, rules) {\n\t\tthis._themes[name] = { \"rules\": rules };\n\t\t// TODO: serialize css rules\n\t\tif (this._injected[name]) {\n\t\t\tthis.update(name);\n\t\t}\n\t}\n\n\t/**\n\t * Select a theme\n\t * @param {string} name\n\t */\n\tselect (name) {\n\t\tvar prev = this._current;\n\t\tvar contents;\n\n\t\tthis._current = name;\n\t\tthis.update(name);\n\n\t\tcontents = this.rendition.getContents();\n\t\tcontents.forEach( (content) => {\n\t\t\tcontent.removeClass(prev);\n\t\t\tcontent.addClass(name);\n\t\t});\n\t}\n\n\t/**\n\t * Update a theme\n\t * @param {string} name\n\t */\n\tupdate (name) {\n\t\tvar contents = this.rendition.getContents();\n\t\tcontents.forEach( (content) => {\n\t\t\tthis.add(name, content);\n\t\t});\n\t}\n\n\t/**\n\t * Inject all themes into contents\n\t * @param {Contents} contents\n\t */\n\tinject (contents) {\n\t\tvar links = [];\n\t\tvar themes = this._themes;\n\t\tvar theme;\n\n\t\tfor (var name in themes) {\n\t\t\tif (themes.hasOwnProperty(name) && (name === this._current || name === \"default\")) {\n\t\t\t\ttheme = themes[name];\n\t\t\t\tif((theme.rules && Object.keys(theme.rules).length > 0) || (theme.url && links.indexOf(theme.url) === -1)) {\n\t\t\t\t\tthis.add(name, contents);\n\t\t\t\t}\n\t\t\t\tthis._injected.push(name);\n\t\t\t}\n\t\t}\n\n\t\tif(this._current != \"default\") {\n\t\t\tcontents.addClass(this._current);\n\t\t}\n\t}\n\n\t/**\n\t * Add Theme to contents\n\t * @param {string} name\n\t * @param {Contents} contents\n\t */\n\tadd (name, contents) {\n\t\tvar theme = this._themes[name];\n\n\t\tif (!theme || !contents) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (theme.url) {\n\t\t\tcontents.addStylesheet(theme.url);\n\t\t} else if (theme.serialized) {\n\t\t\t// TODO: handle serialized\n\t\t} else if (theme.rules) {\n\t\t\tcontents.addStylesheetRules(theme.rules);\n\t\t\ttheme.injected = true;\n\t\t}\n\t}\n\n\t/**\n\t * Add override\n\t * @param {string} name\n\t * @param {string} value\n\t * @param {boolean} priority\n\t */\n\toverride (name, value, priority) {\n\t\tvar contents = this.rendition.getContents();\n\n\t\tthis._overrides[name] = {\n\t\t\tvalue: value,\n\t\t\tpriority: priority === true\n\t\t};\n\n\t\tcontents.forEach( (content) => {\n\t\t\tcontent.css(name, this._overrides[name].value, this._overrides[name].priority);\n\t\t});\n\t}\n\n\t/**\n\t * Add all overrides\n\t * @param {Content} content\n\t */\n\toverrides (contents) {\n\t\tvar overrides = this._overrides;\n\n\t\tfor (var rule in overrides) {\n\t\t\tif (overrides.hasOwnProperty(rule)) {\n\t\t\t\tcontents.css(rule, overrides[rule].value, overrides[rule].priority);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the font size of a rendition\n\t * @param {number} size\n\t */\n\tfontSize (size) {\n\t\tthis.override(\"font-size\", size);\n\t}\n\n\t/**\n\t * Adjust the font-family of a rendition\n\t * @param {string} f\n\t */\n\tfont (f) {\n\t\tthis.override(\"font-family\", f, true);\n\t}\n\n\tdestroy() {\n\t\tthis.rendition = undefined;\n\t\tthis._themes = undefined;\n\t\tthis._overrides = undefined;\n\t\tthis._current = undefined;\n\t\tthis._injected = undefined;\n\t}\n\n}\n\nexport default Themes;\n","import EpubCFI from \"./epubcfi\";\nimport { nodeBounds } from \"./utils/core\";\n\n/**\n * Map text locations to CFI ranges\n * @class\n * @param {Layout} layout Layout to apply\n * @param {string} [direction=\"ltr\"] Text direction\n * @param {string} [axis=\"horizontal\"] vertical or horizontal axis\n * @param {boolean} [dev] toggle developer highlighting\n */\nclass Mapping {\n\tconstructor(layout, direction, axis, dev) {\n\t\tthis.layout = layout;\n\t\tthis.horizontal = (axis === \"horizontal\") ? true : false;\n\t\tthis.direction = direction || \"ltr\";\n\t\tthis._dev = dev;\n\t}\n\n\t/**\n\t * Find CFI pairs for entire section at once\n\t */\n\tsection(view) {\n\t\tvar ranges = this.findRanges(view);\n\t\tvar map = this.rangeListToCfiList(view.section.cfiBase, ranges);\n\n\t\treturn map;\n\t}\n\n\t/**\n\t * Find CFI pairs for a page\n\t * @param {Contents} contents Contents from view\n\t * @param {string} cfiBase string of the base for a cfi\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t */\n\tpage(contents, cfiBase, start, end) {\n\t\tvar root = contents && contents.document ? contents.document.body : false;\n\t\tvar result;\n\n\t\tif (!root) {\n\t\t\treturn;\n\t\t}\n\n\t\tresult = this.rangePairToCfiPair(cfiBase, {\n\t\t\tstart: this.findStart(root, start, end),\n\t\t\tend: this.findEnd(root, start, end)\n\t\t});\n\n\t\tif (this._dev === true) {\n\t\t\tlet doc = contents.document;\n\t\t\tlet startRange = new EpubCFI(result.start).toRange(doc);\n\t\t\tlet endRange = new EpubCFI(result.end).toRange(doc);\n\n\t\t\tlet selection = doc.defaultView.getSelection();\n\t\t\tlet r = doc.createRange();\n\t\t\tselection.removeAllRanges();\n\t\t\tr.setStart(startRange.startContainer, startRange.startOffset);\n\t\t\tr.setEnd(endRange.endContainer, endRange.endOffset);\n\t\t\tselection.addRange(r);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Walk a node, preforming a function on each node it finds\n\t * @private\n\t * @param {Node} root Node to walkToNode\n\t * @param {function} func walk function\n\t * @return {*} returns the result of the walk function\n\t */\n\twalk(root, func) {\n\t\t// IE11 has strange issue, if root is text node IE throws exception on\n\t\t// calling treeWalker.nextNode(), saying\n\t\t// Unexpected call to method or property access instead of returing null value\n\t\tif(root && root.nodeType === Node.TEXT_NODE) {\n\t\t\treturn;\n\t\t}\n\t\t// safeFilter is required so that it can work in IE as filter is a function for IE\n\t\t// and for other browser filter is an object.\n\t\tvar filter = {\n\t\t\tacceptNode: function(node) {\n\t\t\t\tif (node.data.trim().length > 0) {\n\t\t\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t\t\t} else {\n\t\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tvar safeFilter = filter.acceptNode;\n\t\tsafeFilter.acceptNode = filter.acceptNode;\n\n\t\tvar treeWalker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, safeFilter, false);\n\t\tvar node;\n\t\tvar result;\n\t\twhile ((node = treeWalker.nextNode())) {\n\t\t\tresult = func(node);\n\t\t\tif(result) break;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfindRanges(view){\n\t\tvar columns = [];\n\t\tvar scrollWidth = view.contents.scrollWidth();\n\t\tvar spreads = Math.ceil( scrollWidth / this.layout.spreadWidth);\n\t\tvar count = spreads * this.layout.divisor;\n\t\tvar columnWidth = this.layout.columnWidth;\n\t\tvar gap = this.layout.gap;\n\t\tvar start, end;\n\n\t\tfor (var i = 0; i < count.pages; i++) {\n\t\t\tstart = (columnWidth + gap) * i;\n\t\t\tend = (columnWidth * (i+1)) + (gap * i);\n\t\t\tcolumns.push({\n\t\t\t\tstart: this.findStart(view.document.body, start, end),\n\t\t\t\tend: this.findEnd(view.document.body, start, end)\n\t\t\t});\n\t\t}\n\n\t\treturn columns;\n\t}\n\n\t/**\n\t * Find Start Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindStart(root, start, end){\n\t\tvar stack = [root];\n\t\tvar $el;\n\t\tvar found;\n\t\tvar $prev = root;\n\n\t\twhile (stack.length) {\n\n\t\t\t$el = stack.shift();\n\n\t\t\tfound = this.walk($el, (node) => {\n\t\t\t\tvar left, right, top, bottom;\n\t\t\t\tvar elPos;\n\t\t\t\tvar elRange;\n\n\n\t\t\t\telPos = nodeBounds(node);\n\n\t\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\t\tleft = this.horizontal ? elPos.left : elPos.top;\n\t\t\t\t\tright = this.horizontal ? elPos.right : elPos.bottom;\n\n\t\t\t\t\tif( left >= start && left <= end ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (right > start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\t\tleft = elPos.left;\n\t\t\t\t\tright = elPos.right;\n\n\t\t\t\t\tif( right <= end && right >= start ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (left < end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttop = elPos.top;\n\t\t\t\t\tbottom = elPos.bottom;\n\n\t\t\t\t\tif( top >= start && top <= end ) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else if (bottom > start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t});\n\n\t\t\tif(found) {\n\t\t\t\treturn this.findTextStartRange(found, start, end);\n\t\t\t}\n\n\t\t}\n\n\t\t// Return last element\n\t\treturn this.findTextStartRange($prev, start, end);\n\t}\n\n\t/**\n\t * Find End Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindEnd(root, start, end){\n\t\tvar stack = [root];\n\t\tvar $el;\n\t\tvar $prev = root;\n\t\tvar found;\n\n\t\twhile (stack.length) {\n\n\t\t\t$el = stack.shift();\n\n\t\t\tfound = this.walk($el, (node) => {\n\n\t\t\t\tvar left, right, top, bottom;\n\t\t\t\tvar elPos;\n\t\t\t\tvar elRange;\n\n\t\t\t\telPos = nodeBounds(node);\n\n\t\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\t\tleft = Math.round(elPos.left);\n\t\t\t\t\tright = Math.round(elPos.right);\n\n\t\t\t\t\tif(left > end && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(right > end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\t\tleft = Math.round(this.horizontal ? elPos.left : elPos.top);\n\t\t\t\t\tright = Math.round(this.horizontal ? elPos.right : elPos.bottom);\n\n\t\t\t\t\tif(right < start && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(left < start) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttop = Math.round(elPos.top);\n\t\t\t\t\tbottom = Math.round(elPos.bottom);\n\n\t\t\t\t\tif(top > end && $prev) {\n\t\t\t\t\t\treturn $prev;\n\t\t\t\t\t} else if(bottom > end) {\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$prev = node;\n\t\t\t\t\t\tstack.push(node);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t});\n\n\n\t\t\tif(found){\n\t\t\t\treturn this.findTextEndRange(found, start, end);\n\t\t\t}\n\n\t\t}\n\n\t\t// end of chapter\n\t\treturn this.findTextEndRange($prev, start, end);\n\t}\n\n\t/**\n\t * Find Text Start Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindTextStartRange(node, start, end){\n\t\tvar ranges = this.splitTextNodeIntoRanges(node);\n\t\tvar range;\n\t\tvar pos;\n\t\tvar left, top, right;\n\n\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\trange = ranges[i];\n\n\t\t\tpos = range.getBoundingClientRect();\n\n\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\tleft = pos.left;\n\t\t\t\tif( left >= start ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\tright = pos.right;\n\t\t\t\tif( right <= end ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttop = pos.top;\n\t\t\t\tif( top >= start ) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// prev = range;\n\n\t\t}\n\n\t\treturn ranges[0];\n\t}\n\n\t/**\n\t * Find Text End Range\n\t * @private\n\t * @param {Node} root root node\n\t * @param {number} start position to start at\n\t * @param {number} end position to end at\n\t * @return {Range}\n\t */\n\tfindTextEndRange(node, start, end){\n\t\tvar ranges = this.splitTextNodeIntoRanges(node);\n\t\tvar prev;\n\t\tvar range;\n\t\tvar pos;\n\t\tvar left, right, top, bottom;\n\n\t\tfor (var i = 0; i < ranges.length; i++) {\n\t\t\trange = ranges[i];\n\n\t\t\tpos = range.getBoundingClientRect();\n\n\t\t\tif (this.horizontal && this.direction === \"ltr\") {\n\n\t\t\t\tleft = pos.left;\n\t\t\t\tright = pos.right;\n\n\t\t\t\tif(left > end && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(right > end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else if (this.horizontal && this.direction === \"rtl\") {\n\n\t\t\t\tleft = pos.left\n\t\t\t\tright = pos.right;\n\n\t\t\t\tif(right < start && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(left < start) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttop = pos.top;\n\t\t\t\tbottom = pos.bottom;\n\n\t\t\t\tif(top > end && prev) {\n\t\t\t\t\treturn prev;\n\t\t\t\t} else if(bottom > end) {\n\t\t\t\t\treturn range;\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tprev = range;\n\n\t\t}\n\n\t\t// Ends before limit\n\t\treturn ranges[ranges.length-1];\n\n\t}\n\n\t/**\n\t * Split up a text node into ranges for each word\n\t * @private\n\t * @param {Node} root root node\n\t * @param {string} [_splitter] what to split on\n\t * @return {Range[]}\n\t */\n\tsplitTextNodeIntoRanges(node, _splitter){\n\t\tvar ranges = [];\n\t\tvar textContent = node.textContent || \"\";\n\t\tvar text = textContent.trim();\n\t\tvar range;\n\t\tvar doc = node.ownerDocument;\n\t\tvar splitter = _splitter || \" \";\n\n\t\tvar pos = text.indexOf(splitter);\n\n\t\tif(pos === -1 || node.nodeType != Node.TEXT_NODE) {\n\t\t\trange = doc.createRange();\n\t\t\trange.selectNodeContents(node);\n\t\t\treturn [range];\n\t\t}\n\n\t\trange = doc.createRange();\n\t\trange.setStart(node, 0);\n\t\trange.setEnd(node, pos);\n\t\tranges.push(range);\n\t\trange = false;\n\n\t\twhile ( pos != -1 ) {\n\n\t\t\tpos = text.indexOf(splitter, pos + 1);\n\t\t\tif(pos > 0) {\n\n\t\t\t\tif(range) {\n\t\t\t\t\trange.setEnd(node, pos);\n\t\t\t\t\tranges.push(range);\n\t\t\t\t}\n\n\t\t\t\trange = doc.createRange();\n\t\t\t\trange.setStart(node, pos+1);\n\t\t\t}\n\t\t}\n\n\t\tif(range) {\n\t\t\trange.setEnd(node, text.length);\n\t\t\tranges.push(range);\n\t\t}\n\n\t\treturn ranges;\n\t}\n\n\n\t/**\n\t * Turn a pair of ranges into a pair of CFIs\n\t * @private\n\t * @param {string} cfiBase base string for an EpubCFI\n\t * @param {object} rangePair { start: Range, end: Range }\n\t * @return {object} { start: \"epubcfi(...)\", end: \"epubcfi(...)\" }\n\t */\n\trangePairToCfiPair(cfiBase, rangePair){\n\n\t\tvar startRange = rangePair.start;\n\t\tvar endRange = rangePair.end;\n\n\t\tstartRange.collapse(true);\n\t\tendRange.collapse(false);\n\n\t\tlet startCfi = new EpubCFI(startRange, cfiBase).toString();\n\t\tlet endCfi = new EpubCFI(endRange, cfiBase).toString();\n\n\t\treturn {\n\t\t\tstart: startCfi,\n\t\t\tend: endCfi\n\t\t};\n\n\t}\n\n\trangeListToCfiList(cfiBase, columns){\n\t\tvar map = [];\n\t\tvar cifPair;\n\n\t\tfor (var i = 0; i < columns.length; i++) {\n\t\t\tcifPair = this.rangePairToCfiPair(cfiBase, columns[i]);\n\n\t\t\tmap.push(cifPair);\n\n\t\t}\n\n\t\treturn map;\n\t}\n\n\t/**\n\t * Set the axis for mapping\n\t * @param {string} axis horizontal | vertical\n\t * @return {boolean} is it horizontal?\n\t */\n\taxis(axis) {\n\t\tif (axis) {\n\t\t\tthis.horizontal = (axis === \"horizontal\") ? true : false;\n\t\t}\n\t\treturn this.horizontal;\n\t}\n}\n\nexport default Mapping;\n","import EventEmitter from \"event-emitter\";\nimport {isNumber, prefixed, borders, defaults} from \"./utils/core\";\nimport EpubCFI from \"./epubcfi\";\nimport Mapping from \"./mapping\";\nimport {replaceLinks} from \"./utils/replacements\";\nimport { EPUBJS_VERSION, EVENTS, DOM_EVENTS } from \"./utils/constants\";\n\nconst hasNavigator = typeof (navigator) !== \"undefined\";\n\nconst isChrome = hasNavigator && /Chrome/.test(navigator.userAgent);\nconst isWebkit = hasNavigator && !isChrome && /AppleWebKit/.test(navigator.userAgent);\n\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\n\n/**\n\t* Handles DOM manipulation, queries and events for View contents\n\t* @class\n\t* @param {document} doc Document\n\t* @param {element} content Parent Element (typically Body)\n\t* @param {string} cfiBase Section component of CFIs\n\t* @param {number} sectionIndex Index in Spine of Conntent's Section\n\t*/\nclass Contents {\n\tconstructor(doc, content, cfiBase, sectionIndex) {\n\t\t// Blank Cfi for Parsing\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.document = doc;\n\t\tthis.documentElement =  this.document.documentElement;\n\t\tthis.content = content || this.document.body;\n\t\tthis.window = this.document.defaultView;\n\n\t\tthis._size = {\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\n\t\tthis.sectionIndex = sectionIndex || 0;\n\t\tthis.cfiBase = cfiBase || \"\";\n\n\t\tthis.epubReadingSystem(\"epub.js\", EPUBJS_VERSION);\n\n\t\tthis.setViewport();\n\t\tthis.listeners();\n\t}\n\n\t/**\n\t\t* Get DOM events that are listened for and passed along\n\t\t*/\n\tstatic get listenedEvents() {\n\t\treturn DOM_EVENTS;\n\t}\n\n\t/**\n\t\t* Get or Set width\n\t\t* @param {number} [w]\n\t\t* @returns {number} width\n\t\t*/\n\twidth(w) {\n\t\t// var frame = this.documentElement;\n\t\tvar frame = this.content;\n\n\t\tif (w && isNumber(w)) {\n\t\t\tw = w + \"px\";\n\t\t}\n\n\t\tif (w) {\n\t\t\tframe.style.width = w;\n\t\t\t// this.content.style.width = w;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(frame)[\"width\"];\n\n\n\t}\n\n\t/**\n\t\t* Get or Set height\n\t\t* @param {number} [h]\n\t\t* @returns {number} height\n\t\t*/\n\theight(h) {\n\t\t// var frame = this.documentElement;\n\t\tvar frame = this.content;\n\n\t\tif (h && isNumber(h)) {\n\t\t\th = h + \"px\";\n\t\t}\n\n\t\tif (h) {\n\t\t\tframe.style.height = h;\n\t\t\t// this.content.style.height = h;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(frame)[\"height\"];\n\n\t}\n\n\t/**\n\t\t* Get or Set width of the contents\n\t\t* @param {number} [w]\n\t\t* @returns {number} width\n\t\t*/\n\tcontentWidth(w) {\n\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (w && isNumber(w)) {\n\t\t\tw = w + \"px\";\n\t\t}\n\n\t\tif (w) {\n\t\t\tcontent.style.width = w;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[\"width\"];\n\n\n\t}\n\n\t/**\n\t\t* Get or Set height of the contents\n\t\t* @param {number} [h]\n\t\t* @returns {number} height\n\t\t*/\n\tcontentHeight(h) {\n\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (h && isNumber(h)) {\n\t\t\th = h + \"px\";\n\t\t}\n\n\t\tif (h) {\n\t\t\tcontent.style.height = h;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[\"height\"];\n\n\t}\n\n\t/**\n\t\t* Get the width of the text using Range\n\t\t* @returns {number} width\n\t\t*/\n\ttextWidth() {\n\t\tvar viewport = this.$viewport;\n\t\tif ( false && viewport && viewport.width && viewport.width != 'auto' ) {\n\t\t\treturn Math.round(parseFloat(viewport.width, 10));\n\t\t}\n\n\t\tlet rect;\n\t\tlet width;\n\t\tlet range = this.document.createRange();\n\t\tlet content = this.content || this.document.body;\n\t\tlet border = borders(content);\n\n\t\t// Select the contents of frame\n\t\trange.selectNodeContents(content);\n\n\t\t// get the width of the text content\n\t\trect = range.getBoundingClientRect();\n\t\twidth = rect.width;\n\n\t\tif (border && border.width) {\n\t\t\twidth += border.width;\n\t\t}\n\n\t\treturn Math.round(width);\n\t}\n\n\t/**\n\t\t* Get the height of the text using Range\n\t\t* @returns {number} height\n\t\t*/\n\ttextHeight() {\n\t\tvar viewport = this.$viewport;\n\t\tif ( false && viewport && viewport.height && viewport.height != 'auto' ) {\n\t\t\treturn Math.round(parseFloat(viewport.height, 10));\n\t\t}\n\n\t\tlet rect;\n\t\tlet height;\n\t\tlet range = this.document.createRange();\n\t\tlet content = this.content || this.document.body;\n\t\tlet border = borders(content);\n\n\t\trange.selectNodeContents(content);\n\n\t\trect = range.getBoundingClientRect();\n\t\theight = rect.height;\n\n\t\tif (height && border.height) {\n\t\t\theight += border.height;\n\t\t}\n\n\t\tif (height && rect.top) {\n\t\t\theight += rect.top;\n\t\t}\n\n\t\treturn Math.round(height);\n\t}\n\n\t/**\n\t\t* Get documentElement scrollWidth\n\t\t* @returns {number} width\n\t\t*/\n\tscrollWidth() {\n\t\tvar width = this.documentElement.scrollWidth;\n\n\t\treturn width;\n\t}\n\n\t/**\n\t\t* Get documentElement scrollHeight\n\t\t* @returns {number} height\n\t\t*/\n\tscrollHeight() {\n\t\tvar height = this.documentElement.scrollHeight;\n\n\t\treturn height;\n\t}\n\n\t/**\n\t\t* Set overflow css style of the contents\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflow(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflow = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflow\"];\n\t}\n\n\t/**\n\t\t* Set overflowX css style of the documentElement\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflowX(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflowX = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflowX\"];\n\t}\n\n\t/**\n\t\t* Set overflowY css style of the documentElement\n\t\t* @param {string} [overflow]\n\t\t*/\n\toverflowY(overflow) {\n\n\t\tif (overflow) {\n\t\t\tthis.documentElement.style.overflowY = overflow;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[\"overflowY\"];\n\t}\n\n\t/**\n\t\t* Set Css styles on the contents element (typically Body)\n\t\t* @param {string} property\n\t\t* @param {string} value\n\t\t* @param {boolean} [priority] set as \"important\"\n\t\t*/\n\tcss(property, value, priority) {\n\t\tvar content = this.content || this.document.body;\n\n\t\tif (value) {\n\t\t\tcontent.style.setProperty(property, value, priority ? \"important\" : \"\");\n\t\t}\n\n\t\treturn this.window.getComputedStyle(content)[property];\n\t}\n\n\t/**\n\t\t* Get or Set the viewport element\n\t\t* @param {object} [options]\n\t\t* @param {string} [options.width]\n\t\t* @param {string} [options.height]\n\t\t* @param {string} [options.scale]\n\t\t* @param {string} [options.minimum]\n\t\t* @param {string} [options.maximum]\n\t\t* @param {string} [options.scalable]\n\t\t*/\n\tviewport(options) {\n\t\tvar _width, _height, _scale, _minimum, _maximum, _scalable;\n\t\t// var width, height, scale, minimum, maximum, scalable;\n\t\tvar $viewport = this.document.querySelector(\"meta[name='viewport']\");\n\t\tvar parsed = {\n\t\t\t\"width\": undefined,\n\t\t\t\"height\": undefined,\n\t\t\t\"scale\": undefined,\n\t\t\t\"minimum\": undefined,\n\t\t\t\"maximum\": undefined,\n\t\t\t\"scalable\": undefined\n\t\t};\n\t\tvar newContent = [];\n\t\tvar settings = {};\n\n\t\t/*\n\t\t* check for the viewport size\n\t\t* <meta name=\"viewport\" content=\"width=1024,height=697\" />\n\t\t*/\n\t\tif($viewport && $viewport.hasAttribute(\"content\")) {\n\t\t\tlet content = $viewport.getAttribute(\"content\");\n\t\t\tlet _width = content.match(/width\\s*=\\s*([^,]*)/);\n\t\t\tlet _height = content.match(/height\\s*=\\s*([^,]*)/);\n\t\t\tlet _scale = content.match(/initial-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _minimum = content.match(/minimum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _maximum = content.match(/maximum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _scalable = content.match(/user-scalable\\s*=\\s*([^,]*)/);\n\n\t\t\tif(_width && _width.length && typeof _width[1] !== \"undefined\"){\n\t\t\t\tparsed.width = _width[1];\n\t\t\t}\n\t\t\tif(_height && _height.length && typeof _height[1] !== \"undefined\"){\n\t\t\t\tparsed.height = _height[1];\n\t\t\t}\n\t\t\tif(_scale && _scale.length && typeof _scale[1] !== \"undefined\"){\n\t\t\t\tparsed.scale = _scale[1];\n\t\t\t}\n\t\t\tif(_minimum && _minimum.length && typeof _minimum[1] !== \"undefined\"){\n\t\t\t\tparsed.minimum = _minimum[1];\n\t\t\t}\n\t\t\tif(_maximum && _maximum.length && typeof _maximum[1] !== \"undefined\"){\n\t\t\t\tparsed.maximum = _maximum[1];\n\t\t\t}\n\t\t\tif(_scalable && _scalable.length && typeof _scalable[1] !== \"undefined\"){\n\t\t\t\tparsed.scalable = _scalable[1];\n\t\t\t}\n\t\t}\n\n\t\tsettings = defaults(options || {}, parsed);\n\n\t\tif (options) {\n\t\t\tif (settings.width) {\n\t\t\t\tnewContent.push(\"width=\" + settings.width);\n\t\t\t}\n\n\t\t\tif (settings.height) {\n\t\t\t\tnewContent.push(\"height=\" + settings.height);\n\t\t\t}\n\n\t\t\tif (settings.scale) {\n\t\t\t\tnewContent.push(\"initial-scale=\" + settings.scale);\n\t\t\t}\n\n\t\t\tif (settings.scalable === \"no\") {\n\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.scale);\n\t\t\t\tnewContent.push(\"maximum-scale=\" + settings.scale);\n\t\t\t\tnewContent.push(\"user-scalable=\" + settings.scalable);\n\t\t\t} else {\n\n\t\t\t\tif (settings.scalable) {\n\t\t\t\t\tnewContent.push(\"user-scalable=\" + settings.scalable);\n\t\t\t\t}\n\n\t\t\t\tif (settings.minimum) {\n\t\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.minimum);\n\t\t\t\t}\n\n\t\t\t\tif (settings.maximum) {\n\t\t\t\t\tnewContent.push(\"minimum-scale=\" + settings.maximum);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!$viewport) {\n\t\t\t\t$viewport = this.document.createElement(\"meta\");\n\t\t\t\t$viewport.setAttribute(\"name\", \"viewport\");\n\t\t\t\tthis.document.querySelector(\"head\").appendChild($viewport);\n\t\t\t}\n\n\t\t\t$viewport.setAttribute(\"content\", newContent.join(\", \"));\n\n\t\t\tthis.window.scrollTo(0, 0);\n\t\t}\n\n\n\t\treturn settings;\n\t}\n\n\tsetViewport() {\n\t\tthis.$viewport = { height: 'auto', width: 'auto' };\n\t\tvar $viewport = this.document.querySelector(\"meta[name='viewport']\");\n\t\tvar parsed = {\n\t\t\t\"width\": undefined,\n\t\t\t\"height\": undefined,\n\t\t\t\"scale\": undefined,\n\t\t\t\"minimum\": undefined,\n\t\t\t\"maximum\": undefined,\n\t\t\t\"scalable\": undefined\n\t\t};\n\t\tvar newContent = [];\n\t\tvar settings = {};\n\n\t\t/*\n\t\t* check for the viewport size\n\t\t* <meta name=\"viewport\" content=\"width=1024,height=697\" />\n\t\t*/\n\t\tif($viewport && $viewport.hasAttribute(\"content\")) {\n\t\t\tlet content = $viewport.getAttribute(\"content\");\n\t\t\tlet _width = content.match(/width\\s*=\\s*([^,]*)/);\n\t\t\tlet _height = content.match(/height\\s*=\\s*([^,]*)/);\n\t\t\tlet _scale = content.match(/initial-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _minimum = content.match(/minimum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _maximum = content.match(/maximum-scale\\s*=\\s*([^,]*)/);\n\t\t\tlet _scalable = content.match(/user-scalable\\s*=\\s*([^,]*)/);\n\n\t\t\tif(_width && _width.length && typeof _width[1] !== \"undefined\"){\n\t\t\t\tparsed.width = _width[1];\n\t\t\t}\n\t\t\tif(_height && _height.length && typeof _height[1] !== \"undefined\"){\n\t\t\t\tparsed.height = _height[1];\n\t\t\t}\n\t\t\tif(_scale && _scale.length && typeof _scale[1] !== \"undefined\"){\n\t\t\t\tparsed.scale = _scale[1];\n\t\t\t}\n\t\t\tif(_minimum && _minimum.length && typeof _minimum[1] !== \"undefined\"){\n\t\t\t\tparsed.minimum = _minimum[1];\n\t\t\t}\n\t\t\tif(_maximum && _maximum.length && typeof _maximum[1] !== \"undefined\"){\n\t\t\t\tparsed.maximum = _maximum[1];\n\t\t\t}\n\t\t\tif(_scalable && _scalable.length && typeof _scalable[1] !== \"undefined\"){\n\t\t\t\tparsed.scalable = _scalable[1];\n\t\t\t}\n\t\t}\n\t\tthis.$viewport.height = parseFloat(parsed.height) || 'auto';\n\t\tthis.$viewport.width = parseFloat(parsed.width) || 'auto';\n\t}\n\n\t/**\n\t * Event emitter for when the contents has expanded\n\t * @private\n\t */\n\texpand() {\n\t\tthis.emit(EVENTS.CONTENTS.EXPAND);\n\t}\n\n\t/**\n\t * Add DOM listeners\n\t * @private\n\t */\n\tlisteners() {\n\n\t\tthis.imageLoadListeners();\n\n\t\tthis.mediaQueryListeners();\n\n\t\t// this.fontLoadListeners();\n\n\t\tthis.addEventListeners();\n\n\t\tthis.addSelectionListeners();\n\n\t\t// this.transitionListeners();\n\n\t\tthis.resizeListeners();\n\n\t\t// this.resizeObservers();\n\n\t\tthis.linksHandler();\n\t}\n\n\t/**\n\t * Remove DOM listeners\n\t * @private\n\t */\n\tremoveListeners() {\n\n\t\tthis.removeEventListeners();\n\n\t\tthis.removeSelectionListeners();\n\n\t\tclearTimeout(this.expanding);\n\t}\n\n\t/**\n\t * Check if size of contents has changed and\n\t * emit 'resize' event if it has.\n\t * @private\n\t */\n\tresizeCheck() {\n\t\tlet width = this.textWidth();\n\t\tlet height = this.textHeight();\n\n\t\tif (width != this._size.width || height != this._size.height) {\n\n\t\t\tthis._size = {\n\t\t\t\twidth: width,\n\t\t\t\theight: height\n\t\t\t};\n\n\t\t\tthis.onResize && this.onResize(this._size);\n\t\t\tthis.emit(EVENTS.CONTENTS.RESIZE, this._size);\n\t\t}\n\t}\n\n\t/**\n\t * Poll for resize detection\n\t * @private\n\t */\n\tresizeListeners() {\n\t\tvar width, height;\n\t\t// Test size again\n\t\tclearTimeout(this.expanding);\n\n\t\trequestAnimationFrame(this.resizeCheck.bind(this));\n\n\t\tthis.expanding = setTimeout(this.resizeListeners.bind(this), 350);\n\t}\n\n\t/**\n\t * Use css transitions to detect resize\n\t * @private\n\t */\n\ttransitionListeners() {\n\t\tlet body = this.content;\n\n\t\tbody.style['transitionProperty'] = \"font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height\";\n\t\tbody.style['transitionDuration'] = \"0.001ms\";\n\t\tbody.style['transitionTimingFunction'] = \"linear\";\n\t\tbody.style['transitionDelay'] = \"0\";\n\n\t\tthis._resizeCheck = this.resizeCheck.bind(this);\n\t\tthis.document.addEventListener('transitionend', this._resizeCheck);\n\t}\n\n\t/**\n\t * Listen for media query changes and emit 'expand' event\n\t * Adapted from: https://github.com/tylergaw/media-query-events/blob/master/js/mq-events.js\n\t * @private\n\t */\n\tmediaQueryListeners() {\n\t\tvar sheets = this.document.styleSheets;\n\t\tvar mediaChangeHandler = function(m){\n\t\t\tif(m.matches && !this._expanding) {\n\t\t\t\tsetTimeout(this.expand.bind(this), 1);\n\t\t\t}\n\t\t}.bind(this);\n\n\t\tfor (var i = 0; i < sheets.length; i += 1) {\n\t\t\tvar rules;\n\t\t\t// Firefox errors if we access cssRules cross-domain\n\t\t\ttry {\n\t\t\t\trules = sheets[i].cssRules;\n\t\t\t} catch (e) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(!rules) return; // Stylesheets changed\n\t\t\tfor (var j = 0; j < rules.length; j += 1) {\n\t\t\t\t//if (rules[j].constructor === CSSMediaRule) {\n\t\t\t\tif(rules[j].media){\n\t\t\t\t\tvar mql = this.window.matchMedia(rules[j].media.mediaText);\n\t\t\t\t\tmql.addListener(mediaChangeHandler);\n\t\t\t\t\t//mql.onchange = mediaChangeHandler;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Use MutationObserver to listen for changes in the DOM and check for resize\n\t * @private\n\t */\n\tresizeObservers() {\n\t\t// create an observer instance\n\t\tthis.observer = new MutationObserver((mutations) => {\n\t\t\tthis.resizeCheck();\n\t\t});\n\n\t\t// configuration of the observer:\n\t\tlet config = { attributes: true, childList: true, characterData: true, subtree: true };\n\n\t\t// pass in the target node, as well as the observer options\n\t\tthis.observer.observe(this.document, config);\n\t}\n\n\t/**\n\t * Test if images are loaded or add listener for when they load\n\t * @private\n\t */\n\timageLoadListeners() {\n\t\tvar images = this.document.querySelectorAll(\"img\");\n\t\tvar img;\n\t\tfor (var i = 0; i < images.length; i++) {\n\t\t\timg = images[i];\n\n\t\t\tif (typeof img.naturalWidth !== \"undefined\" &&\n\t\t\t\t\timg.naturalWidth === 0) {\n\t\t\t\timg.onload = this.expand.bind(this);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Listen for font load and check for resize when loaded\n\t * @private\n\t */\n\tfontLoadListeners() {\n\t\tif (!this.document || !this.document.fonts) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.document.fonts.ready.then(function () {\n\t\t\tthis.resizeCheck();\n\t\t}.bind(this));\n\n\t}\n\n\t/**\n\t * Get the documentElement\n\t * @returns {element} documentElement\n\t */\n\troot() {\n\t\tif(!this.document) return null;\n\t\treturn this.document.documentElement;\n\t}\n\n\t/**\n\t * Get the location offset of a EpubCFI or an #id\n\t * @param {string | EpubCFI} target\n\t * @param {string} [ignoreClass] for the cfi\n\t * @returns { {left: Number, top: Number }\n\t */\n\tlocationOf(target, ignoreClass) {\n\t\tvar position;\n\t\tvar targetPos = {\"left\": 0, \"top\": 0};\n\n\t\tif(!this.document) return targetPos;\n\n\t\tif(this.epubcfi.isCfiString(target)) {\n\t\t\tlet range = new EpubCFI(target).toRange(this.document, ignoreClass);\n\n\t\t\tif(range) {\n\t\t\t\tif (range.startContainer.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\t\tposition = range.startContainer.getBoundingClientRect();\n\t\t\t\t\ttargetPos.left = position.left;\n\t\t\t\t\ttargetPos.top = position.top;\n\t\t\t\t} else {\n\t\t\t\t\t// Webkit does not handle collapsed range bounds correctly\n\t\t\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=138949\n\n\t\t\t\t\t// Construct a new non-collapsed range\n\t\t\t\t\tif (isWebkit) {\n\t\t\t\t\t\tlet container = range.startContainer;\n\t\t\t\t\t\tlet newRange = new Range();\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (container.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\t\t\tposition = container.getBoundingClientRect();\n\t\t\t\t\t\t\t} else if (range.startOffset + 2 < container.length) {\n\t\t\t\t\t\t\t\tnewRange.setStart(container, range.startOffset);\n\t\t\t\t\t\t\t\tnewRange.setEnd(container, range.startOffset + 2);\n\t\t\t\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t\t\t\t} else if (range.startOffset - 2 > 0) {\n\t\t\t\t\t\t\t\tnewRange.setStart(container, range.startOffset - 2);\n\t\t\t\t\t\t\t\tnewRange.setEnd(container, range.startOffset);\n\t\t\t\t\t\t\t\tposition = newRange.getBoundingClientRect();\n\t\t\t\t\t\t\t} else { // empty, return the parent element\n\t\t\t\t\t\t\t\tposition = container.parentNode.getBoundingClientRect();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(e, e.stack);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition = range.getBoundingClientRect();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else if(typeof target === \"string\" &&\n\t\t\ttarget.indexOf(\"#\") > -1) {\n\n\t\t\tlet id = target.substring(target.indexOf(\"#\")+1);\n\t\t\tlet el = this.document.getElementById(id);\n\n\t\t\tif(el) {\n\t\t\t\tposition = el.getBoundingClientRect();\n\t\t\t\tif ( position.top < 0 ) {\n\t\t\t\t\tvar offsetEl = el.offsetTop ? el : el.offsetParent;\n\t\t\t\t\tposition = { top: offsetEl.offsetTop, left: offsetEl.offsetLeft };\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (position) {\n\t\t\ttargetPos.left = position.left;\n\t\t\ttargetPos.top = position.top;\n\t\t}\n\n\t\treturn targetPos;\n\t}\n\n\t/**\n\t * Append a stylesheet link to the document head\n\t * @param {string} src url\n\t */\n\taddStylesheet(src) {\n\t\treturn new Promise(function(resolve, reject){\n\t\t\tvar $stylesheet;\n\t\t\tvar ready = false;\n\n\t\t\tif(!this.document) {\n\t\t\t\tresolve(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Check if link already exists\n\t\t\t$stylesheet = this.document.querySelector(\"link[href='\"+src+\"']\");\n\t\t\tif ($stylesheet) {\n\t\t\t\tresolve(true);\n\t\t\t\treturn; // already present\n\t\t\t}\n\n\t\t\t$stylesheet = this.document.createElement(\"link\");\n\t\t\t$stylesheet.type = \"text/css\";\n\t\t\t$stylesheet.rel = \"stylesheet\";\n\t\t\t$stylesheet.href = src;\n\t\t\t$stylesheet.onload = $stylesheet.onreadystatechange = function() {\n\t\t\t\tif ( !ready && (!this.readyState || this.readyState == \"complete\") ) {\n\t\t\t\t\tready = true;\n\t\t\t\t\t// Let apply\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t}, 1);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.document.head.appendChild($stylesheet);\n\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Append stylesheet rules to a generate stylesheet\n\t * Array: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet/insertRule\n\t * Object: https://github.com/desirable-objects/json-to-css\n\t * @param {array | object} rules\n\t */\n\taddStylesheetRules(rules) {\n\t\tvar styleEl;\n\t\tvar styleSheet;\n\t\tvar key = \"epubjs-inserted-css\";\n\n\t\tif(!this.document || !rules || rules.length === 0) return;\n\n\t\t// Check if link already exists\n\t\tstyleEl = this.document.getElementById(key);\n\t\tif (!styleEl) {\n\t\t\tstyleEl = this.document.createElement(\"style\");\n\t\t\tstyleEl.id = key;\n\t\t}\n\n\t\t// Append style element to head\n\t\tthis.document.head.appendChild(styleEl);\n\n\t\t// Grab style sheet\n\t\tstyleSheet = styleEl.sheet;\n\n\t\tif (Object.prototype.toString.call(rules) === \"[object Array]\") {\n\t\t\tfor (var i = 0, rl = rules.length; i < rl; i++) {\n\t\t\t\tvar j = 1, rule = rules[i], selector = rules[i][0], propStr = \"\";\n\t\t\t\t// If the second argument of a rule is an array of arrays, correct our variables.\n\t\t\t\tif (Object.prototype.toString.call(rule[1][0]) === \"[object Array]\") {\n\t\t\t\t\trule = rule[1];\n\t\t\t\t\tj = 0;\n\t\t\t\t}\n\n\t\t\t\tfor (var pl = rule.length; j < pl; j++) {\n\t\t\t\t\tvar prop = rule[j];\n\t\t\t\t\tpropStr += prop[0] + \":\" + prop[1] + (prop[2] ? \" !important\" : \"\") + \";\\n\";\n\t\t\t\t}\n\n\t\t\t\t// Insert CSS Rule\n\t\t\t\tstyleSheet.insertRule(selector + \"{\" + propStr + \"}\", styleSheet.cssRules.length);\n\t\t\t}\n\t\t} else {\n\t\t\tconst selectors = Object.keys(rules);\n\t\t\tselectors.forEach((selector) => {\n\t\t\t\tconst definition = rules[selector];\n\t\t\t\tif (Array.isArray(definition)) {\n\t\t\t\t\tdefinition.forEach((item) => {\n\t\t\t\t\t\tconst _rules = Object.keys(item);\n\t\t\t\t\t\tconst result = _rules.map((rule) => {\n\t\t\t\t\t\t\treturn `${rule}:${item[rule]}`;\n\t\t\t\t\t\t}).join(';');\n\t\t\t\t\t\tstyleSheet.insertRule(`${selector}{${result}}`, styleSheet.cssRules.length);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst _rules = Object.keys(definition);\n\t\t\t\t\tconst result = _rules.map((rule) => {\n\t\t\t\t\t\treturn `${rule}:${definition[rule]}`;\n\t\t\t\t\t}).join(';');\n\t\t\t\t\tstyleSheet.insertRule(`${selector}{${result}}`, styleSheet.cssRules.length);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Append a script tag to the document head\n\t * @param {string} src url\n\t * @returns {Promise} loaded\n\t */\n\taddScript(src) {\n\n\t\treturn new Promise(function(resolve, reject){\n\t\t\tvar $script;\n\t\t\tvar ready = false;\n\n\t\t\tif(!this.document) {\n\t\t\t\tresolve(false);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$script = this.document.createElement(\"script\");\n\t\t\t$script.type = \"text/javascript\";\n\t\t\t$script.async = true;\n\t\t\t$script.src = src;\n\t\t\t$script.onload = $script.onreadystatechange = function() {\n\t\t\t\tif ( !ready && (!this.readyState || this.readyState == \"complete\") ) {\n\t\t\t\t\tready = true;\n\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t}, 1);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.document.head.appendChild($script);\n\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Add a class to the contents container\n\t * @param {string} className\n\t */\n\taddClass(className) {\n\t\tvar content;\n\n\t\tif(!this.document) return;\n\n\t\tcontent = this.content || this.document.body;\n\n\t\tif (content) {\n\t\t\tcontent.classList.add(className);\n\t\t}\n\n\t}\n\n\t/**\n\t * Remove a class from the contents container\n\t * @param {string} removeClass\n\t */\n\tremoveClass(className) {\n\t\tvar content;\n\n\t\tif(!this.document) return;\n\n\t\tcontent = this.content || this.document.body;\n\n\t\tif (content) {\n\t\t\tcontent.classList.remove(className);\n\t\t}\n\n\t}\n\n\t/**\n\t * Add DOM event listeners\n\t * @private\n\t */\n\taddEventListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._triggerEvent = this.triggerEvent.bind(this);\n\n\t\tDOM_EVENTS.forEach(function(eventName){\n\t\t\tthis.document.addEventListener(eventName, this._triggerEvent, { passive: true });\n\t\t}, this);\n\n\t}\n\n\t/**\n\t * Remove DOM event listeners\n\t * @private\n\t */\n\tremoveEventListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tDOM_EVENTS.forEach(function(eventName){\n\t\t\tthis.document.removeEventListener(eventName, this._triggerEvent, { passive: true });\n\t\t}, this);\n\t\tthis._triggerEvent = undefined;\n\t}\n\n\t/**\n\t * Emit passed browser events\n\t * @private\n\t */\n\ttriggerEvent(e){\n\t\tthis.emit(e.type, e);\n\t}\n\n\t/**\n\t * Add listener for text selection\n\t * @private\n\t */\n\taddSelectionListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tthis._onSelectionChange = this.onSelectionChange.bind(this);\n\t\tthis.document.addEventListener(\"selectionchange\", this._onSelectionChange, { passive: true });\n\t}\n\n\t/**\n\t * Remove listener for text selection\n\t * @private\n\t */\n\tremoveSelectionListeners(){\n\t\tif(!this.document) {\n\t\t\treturn;\n\t\t}\n\t\tthis.document.removeEventListener(\"selectionchange\", this._onSelectionChange, { passive: true });\n\t\tthis._onSelectionChange = undefined;\n\t}\n\n\t/**\n\t * Handle getting text on selection\n\t * @private\n\t */\n\tonSelectionChange(e){\n\t\tif (this.selectionEndTimeout) {\n\t\t\tclearTimeout(this.selectionEndTimeout);\n\t\t}\n\t\tthis.selectionEndTimeout = setTimeout(function() {\n\t\t\tvar selection = this.window.getSelection();\n\t\t\tthis.triggerSelectedEvent(selection);\n\t\t}.bind(this), 250);\n\t}\n\n\t/**\n\t * Emit event on text selection\n\t * @private\n\t */\n\ttriggerSelectedEvent(selection){\n\t\tvar range, cfirange;\n\n\t\tif (selection && selection.rangeCount > 0) {\n\t\t\trange = selection.getRangeAt(0);\n\t\t\tif(!range.collapsed) {\n\t\t\t\t// cfirange = this.section.cfiFromRange(range);\n\t\t\t\tcfirange = new EpubCFI(range, this.cfiBase).toString();\n\t\t\t\tthis.emit(EVENTS.CONTENTS.SELECTED, cfirange);\n\t\t\t\tthis.emit(EVENTS.CONTENTS.SELECTED_RANGE, range);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Get a Dom Range from EpubCFI\n\t * @param {EpubCFI} _cfi\n\t * @param {string} [ignoreClass]\n\t * @returns {Range} range\n\t */\n\trange(_cfi, ignoreClass){\n\t\tvar cfi = new EpubCFI(_cfi);\n\t\treturn cfi.toRange(this.document, ignoreClass);\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Dom Range\n\t * @param {Range} range\n\t * @param {string} [ignoreClass]\n\t * @returns {EpubCFI} cfi\n\t */\n\tcfiFromRange(range, ignoreClass){\n\t\treturn new EpubCFI(range, this.cfiBase, ignoreClass).toString();\n\t}\n\n\t/**\n\t * Get an EpubCFI from a Dom node\n\t * @param {node} node\n\t * @param {string} [ignoreClass]\n\t * @returns {EpubCFI} cfi\n\t */\n\tcfiFromNode(node, ignoreClass){\n\t\treturn new EpubCFI(node, this.cfiBase, ignoreClass).toString();\n\t}\n\n\t// TODO: find where this is used - remove?\n\tmap(layout){\n\t\tvar map = new Mapping(layout);\n\t\treturn map.section();\n\t}\n\n\t/**\n\t * Size the contents to a given width and height\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n\tsize(width, height){\n\t\tvar viewport = { scale: 1.0, scalable: \"no\" };\n\n\t\tthis.layoutStyle(\"scrolling\");\n\n\t\tif (width >= 0) {\n\t\t\tthis.width(width);\n\t\t\tviewport.width = width;\n\t\t\tthis.css(\"padding\", \"0 \"+(width/12)+\"px\");\n\t\t}\n\n\t\tif (height >= 0) {\n\t\t\tthis.height(height);\n\t\t\tviewport.height = height;\n\t\t}\n\n\t\tthis.css(\"margin\", \"0\");\n\t\tthis.css(\"box-sizing\", \"border-box\");\n\n\n\t\tthis.viewport(viewport);\n\t}\n\n\t/**\n\t * Apply columns to the contents for pagination\n\t * @param {number} width\n\t * @param {number} height\n\t * @param {number} columnWidth\n\t * @param {number} gap\n\t */\n\tcolumns(width, height, columnWidth, gap){\n\t\tlet COLUMN_AXIS = prefixed(\"column-axis\");\n\t\tlet COLUMN_GAP = prefixed(\"column-gap\");\n\t\tlet COLUMN_WIDTH = prefixed(\"column-width\");\n\t\tlet COLUMN_FILL = prefixed(\"column-fill\");\n\n\t\tlet writingMode = this.writingMode();\n\t\tlet axis = (writingMode.indexOf(\"vertical\") === 0) ? \"vertical\" : \"horizontal\";\n\n\t\tthis.layoutStyle(\"paginated\");\n\n\t\t// Fix body width issues if rtl is only set on body element\n\t\tif (this.content.dir === \"rtl\") {\n\t\t\tthis.direction(\"rtl\");\n\t\t}\n\n\t\tthis.width(width);\n\t\tthis.height(height);\n\n\t\t// Deal with Mobile trying to scale to viewport\n\t\tthis.viewport({ width: width, height: height, scale: 1.0, scalable: \"no\" });\n\n\t\t// TODO: inline-block needs more testing\n\t\t// Fixes Safari column cut offs, but causes RTL issues\n\t\t// this.css(\"display\", \"inline-block\");\n\n\t\tthis.css(\"overflow-y\", \"hidden\");\n\t\tthis.css(\"margin\", \"0\", true);\n\n\t\tif (axis === \"vertical\") {\n\t\t\tthis.css(\"padding-top\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-bottom\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-left\", \"20px\");\n\t\t\tthis.css(\"padding-right\", \"20px\");\n\t\t} else {\n\t\t\tthis.css(\"padding-top\", \"20px\");\n\t\t\tthis.css(\"padding-bottom\", \"20px\");\n\t\t\tthis.css(\"padding-left\", (gap / 2) + \"px\", true);\n\t\t\tthis.css(\"padding-right\", (gap / 2) + \"px\", true);\n\t\t}\n\n\t\tthis.css(\"box-sizing\", \"border-box\");\n\t\tthis.css(\"max-width\", \"inherit\");\n\n\t\tthis.css(COLUMN_AXIS, \"horizontal\");\n\t\tthis.css(COLUMN_FILL, \"auto\");\n\n\t\tthis.css(COLUMN_GAP, gap+\"px\");\n\t\tthis.css(COLUMN_WIDTH, columnWidth+\"px\");\n\t}\n\n\t/**\n\t * Scale contents from center\n\t * @param {number} scale\n\t * @param {number} offsetX\n\t * @param {number} offsetY\n\t */\n\tscaler(scale, offsetX, offsetY){\n\t\tvar scaleStr = \"scale(\" + scale + \")\";\n\t\tvar translateStr = \"\";\n\t\t// this.css(\"position\", \"absolute\"));\n\t\tthis.css(\"transform-origin\", \"top left\");\n\n\t\tif (offsetX >= 0 || offsetY >= 0) {\n\t\t\ttranslateStr = \" translate(\" + (offsetX || 0 )+ \"px, \" + (offsetY || 0 )+ \"px)\";\n\t\t// } else if ( offsetX || offsetY ) {\n\t\t// \ttranslateStr = \" translate(\" + offsetX + \",\" + offsetY + \")\";\n\t\t}\n\n\t\tthis.css(\"transform\", scaleStr + translateStr);\n\t}\n\n\t/**\n\t * Fit contents into a fixed width and height\n\t * @param {number} width\n\t * @param {number} height\n\t */\n\tfit(width, height){\n\t\tvar viewport = this.viewport();\n\t\tvar viewportWidth;\n\t\tvar viewportHeight;\n\n\t\t// var viewportWidth = parseInt(viewport.width);\n\t\t// var viewportHeight = parseInt(viewport.height);\n\n\t\tif ( viewport.width == 'auto' && viewport.height == 'auto' ) {\n\t\t\tviewportWidth = width;\n\t\t\tviewportHeight = height; // this.textHeight(); // height;\n\t\t\tconsole.log(\"AHOY contents.fit\", height, this.textHeight());\n\t\t} else {\n\t\t\tviewportWidth = parseInt(viewport.width);\n\t\t\tviewportHeight = parseInt(viewport.height);\n\t\t}\n\n\t\tvar widthScale = width / viewportWidth;\n\t\tvar heightScale = height / viewportHeight;\n\t\tvar scale;\n\t\tif ( this.axis == 'xxxvertical' ) {\n\t\t\tscale = widthScale > heightScale ? widthScale : heightScale;\n\t\t} else {\n\t\t\tscale = widthScale < heightScale ? widthScale : heightScale;\n\t\t}\n\t\t// console.log(\"AHOY contents.fit\", width, height, \":\", viewportWidth, viewportHeight, \":\", scale);\n\n\t\t// the translate does not work as intended, elements can end up unaligned\n\t\t// var offsetY = (height - (viewportHeight * scale)) / 2;\n\t\t// var offsetX = 0;\n\t\t// if (this.sectionIndex % 2 === 1) {\n\t\t// \toffsetX = width - (viewportWidth * scale);\n\t\t// }\n\n\t\tthis.layoutStyle(\"paginated\");\n\n\t\t// scale needs width and height to be set\n\t\tthis.width(viewportWidth);\n\t\tthis.height(viewportHeight);\n\t\tthis.overflow(\"hidden\");\n\n\t\tif ( viewport.width == 'auto' || viewport.height == 'auto' ) {\n\t\t\tthis.content.style.overflow = 'auto';\n\t\t\tthis.addStylesheetRules({\n\t\t\t\t\"body\": {\n\t\t\t\t\t\"margin\": 0,\n\t\t\t\t\t\"padding\": \"1em\",\n\t\t\t\t\t\"box-sizing\": \"border-box\"\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\t// Scale to the correct size\n\t\tthis.scaler(scale, 0, 0);\n\t\t// this.scaler(scale, offsetX > 0 ? offsetX : 0, offsetY);\n\n\t\t// background images are not scaled by transform\n\t\tthis.css(\"background-size\", viewportWidth * scale + \"px \" + viewportHeight * scale + \"px\");\n\n\t\tthis.css(\"background-color\", \"transparent\");\n\t}\n\n\t/**\n\t * Set the direction of the text\n\t * @param {string} [dir=\"ltr\"] \"rtl\" | \"ltr\"\n\t */\n\tdirection(dir) {\n\t\tif (this.documentElement) {\n\t\t\tthis.documentElement.style[\"direction\"] = dir;\n\t\t}\n\t}\n\n\tmapPage(cfiBase, layout, start, end, dev) {\n\t\tvar mapping = new Mapping(layout, dev);\n\n\t\treturn mapping.page(this, cfiBase, start, end);\n\t}\n\n\t/**\n\t * Emit event when link in content is clicked\n\t * @private\n\t */\n\tlinksHandler() {\n\t\treplaceLinks(this.content, (href) => {\n\t\t\tthis.emit(EVENTS.CONTENTS.LINK_CLICKED, href);\n\t\t});\n\t}\n\n\t/**\n\t * Set the writingMode of the text\n\t * @param {string} [mode=\"horizontal-tb\"] \"horizontal-tb\" | \"vertical-rl\" | \"vertical-lr\"\n\t */\n\twritingMode(mode) {\n\t\tlet WRITING_MODE = prefixed(\"writing-mode\");\n\n\t\tif (mode && this.documentElement) {\n\t\t\tthis.documentElement.style[WRITING_MODE] = mode;\n\t\t}\n\n\t\treturn this.window.getComputedStyle(this.documentElement)[WRITING_MODE] || '';\n\t}\n\n\t/**\n\t * Set the layoutStyle of the content\n\t * @param {string} [style=\"paginated\"] \"scrolling\" | \"paginated\"\n\t * @private\n\t */\n\tlayoutStyle(style) {\n\n\t\tif (style) {\n\t\t\tthis._layoutStyle = style;\n\t\t\tnavigator.epubReadingSystem.layoutStyle = this._layoutStyle;\n\t\t}\n\n\t\treturn this._layoutStyle || \"paginated\";\n\t}\n\n\t/**\n\t * Add the epubReadingSystem object to the navigator\n\t * @param {string} name\n\t * @param {string} version\n\t * @private\n\t */\n\tepubReadingSystem(name, version) {\n\t\tnavigator.epubReadingSystem = {\n\t\t\tname: name,\n\t\t\tversion: version,\n\t\t\tlayoutStyle: this.layoutStyle(),\n\t\t\thasFeature: function (feature) {\n\t\t\t\tswitch (feature) {\n\t\t\t\t\tcase \"dom-manipulation\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"layout-changes\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"touch-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"mouse-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"keyboard-events\":\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tcase \"spine-scripting\":\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn navigator.epubReadingSystem;\n\t}\n\n\tdestroy() {\n\t\t// Stop observing\n\t\tif(this.observer) {\n\t\t\tthis.observer.disconnect();\n\t\t}\n\n\t\tthis.document.removeEventListener('transitionend', this._resizeCheck);\n\n\t\tthis.removeListeners();\n\n\t}\n}\n\nEventEmitter(Contents.prototype);\n\nexport default Contents;\n","import EventEmitter from \"event-emitter\";\nimport EpubCFI from \"./epubcfi\";\n\n/**\n\t* Handles managing adding & removing Annotations\n\t* @param {Rendition} rendition\n\t* @class\n\t*/\nclass Annotations {\n\n\tconstructor (rendition) {\n\t\tthis.rendition = rendition;\n\t\tthis.highlights = [];\n\t\tthis.underlines = [];\n\t\tthis.marks = [];\n\t\tthis._annotations = {};\n\t\tthis._annotationsBySectionIndex = {};\n\n\t\tthis.rendition.hooks.render.register(this.inject.bind(this));\n\t\tthis.rendition.hooks.unloaded.register(this.clear.bind(this));\n\t}\n\n\t/**\n\t * Add an annotation to store\n\t * @param {string} type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} [cb] Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t * @returns {Annotation} annotation\n\t */\n\tadd (type, cfiRange, data, cb, className, styles) {\n\t\tlet hash = encodeURI(cfiRange);\n\t\tlet cfi = new EpubCFI(cfiRange);\n\t\tlet sectionIndex = cfi.spinePos;\n\t\tlet annotation = new Annotation({\n\t\t\ttype,\n\t\t\tcfiRange,\n\t\t\tdata,\n\t\t\tsectionIndex,\n\t\t\tcb,\n\t\t\tclassName,\n\t\t\tstyles\n\t\t});\n\n\t\tthis._annotations[hash] = annotation;\n\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tthis._annotationsBySectionIndex[sectionIndex].push(hash);\n\t\t} else {\n\t\t\tthis._annotationsBySectionIndex[sectionIndex] = [hash];\n\t\t}\n\n\t\tlet views = this.rendition.views();\n\n\t\tviews.forEach( (view) => {\n\t\t\tif (annotation.sectionIndex === view.index) {\n\t\t\t\tannotation.attach(view);\n\t\t\t}\n\t\t});\n\n\t\treturn annotation;\n\t}\n\n\t/**\n\t * Remove an annotation from store\n\t * @param {EpubCFI} cfiRange EpubCFI range the annotation is attached to\n\t * @param {string} type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n\t */\n\tremove (cfiRange, type) {\n\t\tlet hash = encodeURI(cfiRange);\n\n\t\tif (hash in this._annotations) {\n\t\t\tlet annotation = this._annotations[hash];\n\n\t\t\tif (type && annotation.type !== type) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet views = this.rendition.views();\n\t\t\tviews.forEach( (view) => {\n\t\t\t\tthis._removeFromAnnotationBySectionIndex(annotation.sectionIndex, hash);\n\t\t\t\tif (annotation.sectionIndex === view.index) {\n\t\t\t\t\tannotation.detach(view);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdelete this._annotations[hash];\n\t\t}\n\t}\n\n\t/**\n\t * Remove an annotations by Section Index\n\t * @private\n\t */\n\t_removeFromAnnotationBySectionIndex (sectionIndex, hash) {\n\t\tthis._annotationsBySectionIndex[sectionIndex] = this._annotationsAt(sectionIndex).filter(h => h !== hash);\n\t}\n\n\t/**\n\t * Get annotations by Section Index\n\t * @private\n\t */\n\t_annotationsAt (index) {\n\t\treturn this._annotationsBySectionIndex[index];\n\t}\n\n\n\t/**\n\t * Add a highlight to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t */\n\thighlight (cfiRange, data, cb, className, styles) {\n\t\tthis.add(\"highlight\", cfiRange, data, cb, className, styles);\n\t}\n\n\t/**\n\t * Add a underline to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t * @param {string} className CSS class to assign to annotation\n\t * @param {object} styles CSS styles to assign to annotation\n\t */\n\tunderline (cfiRange, data, cb, className, styles) {\n\t\tthis.add(\"underline\", cfiRange, data, cb, className, styles);\n\t}\n\n\t/**\n\t * Add a mark to the store\n\t * @param {EpubCFI} cfiRange EpubCFI range to attach annotation to\n\t * @param {object} data Data to assign to annotation\n\t * @param {function} cb Callback after annotation is added\n\t */\n\tmark (cfiRange, data, cb) {\n\t\tthis.add(\"mark\", cfiRange, data, cb);\n\t}\n\n\t/**\n\t * iterate over annotations in the store\n\t */\n\teach () {\n\t\treturn this._annotations.forEach.apply(this._annotations, arguments);\n\t}\n\n\t/**\n\t * Hook for injecting annotation into a view\n\t * @param {View} view\n\t * @private\n\t */\n\tinject (view) {\n\t\tlet sectionIndex = view.index;\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tlet annotations = this._annotationsBySectionIndex[sectionIndex];\n\t\t\tannotations.forEach((hash) => {\n\t\t\t\tlet annotation = this._annotations[hash];\n\t\t\t\tannotation.attach(view);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Hook for removing annotation from a view\n\t * @param {View} view\n\t * @private\n\t */\n\tclear (view) {\n\t\tlet sectionIndex = view.index;\n\t\tif (sectionIndex in this._annotationsBySectionIndex) {\n\t\t\tlet annotations = this._annotationsBySectionIndex[sectionIndex];\n\t\t\tannotations.forEach((hash) => {\n\t\t\t\tlet annotation = this._annotations[hash];\n\t\t\t\tannotation.detach(view);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * [Not Implemented] Show annotations\n\t * @TODO: needs implementation in View\n\t */\n\tshow () {\n\n\t}\n\n\t/**\n\t * [Not Implemented] Hide annotations\n\t * @TODO: needs implementation in View\n\t */\n\thide () {\n\n\t}\n\n}\n\n/**\n * Annotation object\n * @class\n * @param {object} options\n * @param {string} options.type Type of annotation to add: \"highlight\", \"underline\", \"mark\"\n * @param {EpubCFI} options.cfiRange EpubCFI range to attach annotation to\n * @param {object} options.data Data to assign to annotation\n * @param {int} options.sectionIndex Index in the Spine of the Section annotation belongs to\n * @param {function} [options.cb] Callback after annotation is added\n * @param {string} className CSS class to assign to annotation\n * @param {object} styles CSS styles to assign to annotation\n * @returns {Annotation} annotation\n */\nclass Annotation {\n\n\tconstructor ({\n\t\ttype,\n\t\tcfiRange,\n\t\tdata,\n\t\tsectionIndex,\n\t\tcb,\n\t\tclassName,\n\t\tstyles\n\t}) {\n\t\tthis.type = type;\n\t\tthis.cfiRange = cfiRange;\n\t\tthis.data = data;\n\t\tthis.sectionIndex = sectionIndex;\n\t\tthis.mark = undefined;\n\t\tthis.cb = cb;\n\t\tthis.className = className;\n\t\tthis.styles = styles;\n\t}\n\n\t/**\n\t * Update stored data\n\t * @param {object} data\n\t */\n\tupdate (data) {\n\t\tthis.data = data;\n\t}\n\n\t/**\n\t * Add to a view\n\t * @param {View} view\n\t */\n\tattach (view) {\n\t\tlet {cfiRange, data, type, mark, cb, className, styles} = this;\n\t\tlet result;\n\n\t\tif (type === \"highlight\") {\n\t\t\tresult = view.highlight(cfiRange, data, cb, className, styles);\n\t\t} else if (type === \"underline\") {\n\t\t\tresult = view.underline(cfiRange, data, cb, className, styles);\n\t\t} else if (type === \"mark\") {\n\t\t\tresult = view.mark(cfiRange, data, cb);\n\t\t}\n\n\t\tthis.mark = result;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Remove from a view\n\t * @param {View} view\n\t */\n\tdetach (view) {\n\t\tlet {cfiRange, type} = this;\n\t\tlet result;\n\n\t\tif (view) {\n\t\t\tif (type === \"highlight\") {\n\t\t\t\tresult = view.unhighlight(cfiRange);\n\t\t\t} else if (type === \"underline\") {\n\t\t\t\tresult = view.ununderline(cfiRange);\n\t\t\t} else if (type === \"mark\") {\n\t\t\t\tresult = view.unmark(cfiRange);\n\t\t\t}\n\t\t}\n\n\t\tthis.mark = undefined;\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * [Not Implemented] Get text of an annotation\n\t * @TODO: needs implementation in contents\n\t */\n\ttext () {\n\n\t}\n\n}\n\nEventEmitter(Annotation.prototype);\n\n\nexport default Annotations\n","export function createElement(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\n\nexport default {\n    createElement: createElement\n};\n","// import 'babelify/polyfill'; // needed for Object.assign\n\nexport default {\n    proxyMouse: proxyMouse\n};\n\n\n/**\n * Start proxying all mouse events that occur on the target node to each node in\n * a set of tracked nodes.\n *\n * The items in tracked do not strictly have to be DOM Nodes, but they do have\n * to have dispatchEvent, getBoundingClientRect, and getClientRects methods.\n *\n * @param target {Node} The node on which to listen for mouse events.\n * @param tracked {Node[]} A (possibly mutable) array of nodes to which to proxy\n *                         events.\n */\nexport function proxyMouse(target, tracked) {\n    function dispatch(e) {\n        // We walk through the set of tracked elements in reverse order so that\n        // events are sent to those most recently added first.\n        //\n        // This is the least surprising behaviour as it simulates the way the\n        // browser would work if items added later were drawn \"on top of\"\n        // earlier ones.\n        for (var i = tracked.length - 1; i >= 0; i--) {\n            var t = tracked[i];\n            var x = e.clientX\n            var y = e.clientY;\n\n            if (e.touches && e.touches.length) {\n              x = e.touches[0].clientX;\n              y = e.touches[0].clientY;\n            }\n\n            if (!contains(t, target, x, y)) {\n                continue;\n            }\n\n            // The event targets this mark, so dispatch a cloned event:\n            t.dispatchEvent(clone(e));\n            // We only dispatch the cloned event to the first matching mark.\n            break;\n        }\n    }\n\n    if (target.nodeName === \"iframe\" || target.nodeName === \"IFRAME\") {\n\n      try {\n        // Try to get the contents if same domain\n        this.target = target.contentDocument;\n      } catch(err){\n        this.target = target;\n      }\n\n    } else {\n      this.target = target;\n    }\n\n    for (var ev of ['mouseup', 'mousedown', 'click', 'touchstart']) {\n        this.target.addEventListener(ev, (e) => dispatch(e), false);\n    }\n\n}\n\n\n/**\n * Clone a mouse event object.\n *\n * @param e {MouseEvent} A mouse event object to clone.\n * @returns {MouseEvent}\n */\nexport function clone(e) {\n    var opts = Object.assign({}, e, {bubbles: false});\n    try {\n        return new MouseEvent(e.type, opts);\n    } catch(err) { // compat: webkit\n        var copy = document.createEvent('MouseEvents');\n        copy.initMouseEvent(e.type, false, opts.cancelable, opts.view,\n                            opts.detail, opts.screenX, opts.screenY,\n                            opts.clientX, opts.clientY, opts.ctrlKey,\n                            opts.altKey, opts.shiftKey, opts.metaKey,\n                            opts.button, opts.relatedTarget);\n        return copy;\n    }\n}\n\n\n/**\n * Check if the item contains the point denoted by the passed coordinates\n * @param item {Object} An object with getBoundingClientRect and getClientRects\n *                      methods.\n * @param x {Number}\n * @param y {Number}\n * @returns {Boolean}\n */\nfunction contains(item, target, x, y) {\n    // offset\n    var offset = target.getBoundingClientRect();\n\n    function rectContains(r, x, y) {\n        var top = r.top - offset.top;\n        var left = r.left - offset.left;\n        var bottom = top + r.height;\n        var right = left + r.width;\n        return (top <= y && left <= x && bottom > y && right > x);\n    }\n\n    // Check overall bounding box first\n    var rect = item.getBoundingClientRect();\n    if (!rectContains(rect, x, y)) {\n        return false;\n    }\n\n    // Then continue to check each child rect\n    var rects = item.getClientRects();\n    for (var i = 0, len = rects.length; i < len; i++) {\n        if (rectContains(rects[i], x, y)) {\n            return true;\n        }\n    }\n    return false;\n}\n","import svg from './svg';\nimport events from './events';\n\nexport class Pane {\n    constructor(target, container = document.body) {\n        this.target = target;\n        this.element = svg.createElement('svg');\n        this.marks = [];\n\n        // Match the coordinates of the target element\n        this.element.style.position = 'absolute';\n        // Disable pointer events\n        this.element.setAttribute('pointer-events', 'none');\n\n        // Set up mouse event proxying between the target element and the marks\n        events.proxyMouse(this.target, this.marks);\n\n        this.container = container;\n        this.container.appendChild(this.element);\n\n        this.render();\n    }\n\n    addMark(mark) {\n        var g = svg.createElement('g');\n        this.element.appendChild(g);\n        mark.bind(g, this.container);\n\n        this.marks.push(mark);\n\n        mark.render();\n        return mark;\n    }\n\n    removeMark(mark) {\n        var idx = this.marks.indexOf(mark);\n        if (idx === -1) {\n            return;\n        }\n        var el = mark.unbind();\n        this.element.removeChild(el);\n        this.marks.splice(idx, 1);\n    }\n\n    render() {\n        setCoords(this.element, coords(this.target, this.container));\n        for (var m of this.marks) {\n            m.render();\n        }\n    }\n}\n\n\nexport class Mark {\n    constructor() {\n        this.element = null;\n    }\n\n    bind(element, container) {\n        this.element = element;\n        this.container = container;\n    }\n\n    unbind() {\n        var el = this.element;\n        this.element = null;\n        return el;\n    }\n\n    render() {}\n\n    dispatchEvent(e) {\n        if (!this.element) return;\n        this.element.dispatchEvent(e);\n    }\n\n    getBoundingClientRect() {\n        return this.element.getBoundingClientRect();\n    }\n\n    getClientRects() {\n        var rects = [];\n        var el = this.element.firstChild;\n        while (el) {\n            rects.push(el.getBoundingClientRect());\n            el = el.nextSibling;\n        }\n        return rects;\n    }\n\n    filteredRanges() {\n      var rects = Array.from(this.range.getClientRects());\n\n      // De-duplicate the boxes\n      return rects.filter((box) => {\n        for (var i = 0; i < rects.length; i++) {\n          if (rects[i] === box) {\n            return true;\n          }\n          let contained = contains(rects[i], box);\n          if (contained) {\n            return false;\n          }\n        }\n        return true;\n      })\n    }\n\n}\n\nexport class Highlight extends Mark {\n    constructor(range, className, data, attributes) {\n        super();\n        this.range = range;\n        this.className = className;\n        this.data = data || {};\n        this.attributes = attributes || {};\n    }\n\n    bind(element, container) {\n        super.bind(element, container);\n\n        for (var attr in this.data) {\n          if (this.data.hasOwnProperty(attr)) {\n            this.element.dataset[attr] = this.data[attr];\n          }\n        }\n\n        for (var attr in this.attributes) {\n          if (this.attributes.hasOwnProperty(attr)) {\n            this.element.setAttribute(attr, this.attributes[attr]);\n          }\n        }\n\n        if (this.className) {\n          this.element.classList.add(this.className);\n        }\n    }\n\n    render() {\n        // Empty element\n        while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n        }\n\n        var docFrag = this.element.ownerDocument.createDocumentFragment();\n        var filtered = this.filteredRanges();\n        var offset = this.element.getBoundingClientRect();\n        var container = this.container.getBoundingClientRect();\n        container = { top: container.top, left: container.left };\n        // take into account padding\n        var styles = window.getComputedStyle(this.container);\n        container.left += parseInt(styles.paddingLeft);\n        container.top += parseInt(styles.paddingTop);\n\n        for (var i = 0, len = filtered.length; i < len; i++) {\n            var r = filtered[i];\n            var el = svg.createElement('rect');\n            el.setAttribute('x', r.left - offset.left + container.left);\n            el.setAttribute('y', r.top - offset.top + container.top);\n            el.setAttribute('height', r.height);\n            el.setAttribute('width', r.width);\n            docFrag.appendChild(el);\n        }\n\n        this.element.appendChild(docFrag);\n\n    }\n}\n\nexport class Underline extends Highlight {\n    constructor(range, className, data, attributes) {\n        super(range, className, data,  attributes);\n    }\n\n    render() {\n        // Empty element\n        while (this.element.firstChild) {\n            this.element.removeChild(this.element.firstChild);\n        }\n\n        var docFrag = this.element.ownerDocument.createDocumentFragment();\n        var filtered = this.filteredRanges();\n        var offset = this.element.getBoundingClientRect();\n        var container = this.container.getBoundingClientRect();\n\n        for (var i = 0, len = filtered.length; i < len; i++) {\n            var r = filtered[i];\n\n            var rect = svg.createElement('rect');\n            rect.setAttribute('x', r.left - offset.left + container.left);\n            rect.setAttribute('y', r.top - offset.top + container.top);\n            rect.setAttribute('height', r.height);\n            rect.setAttribute('width', r.width);\n            rect.setAttribute('fill', 'none');\n\n\n            var line = svg.createElement('line');\n            line.setAttribute('x1', r.left - offset.left + container.left);\n            line.setAttribute('x2', r.left - offset.left + container.left + r.width);\n            line.setAttribute('y1', r.top - offset.top + container.top + r.height - 1);\n            line.setAttribute('y2', r.top - offset.top + container.top + r.height - 1);\n\n            line.setAttribute('stroke-width', 1);\n            line.setAttribute('stroke', 'black'); //TODO: match text color?\n            line.setAttribute('stroke-linecap', 'square');\n\n            docFrag.appendChild(rect);\n\n            docFrag.appendChild(line);\n        }\n\n        this.element.appendChild(docFrag);\n\n    }\n}\n\n\nfunction coords(el, container) {\n    var offset = container.getBoundingClientRect();\n    var rect = el.getBoundingClientRect();\n\n    return {\n        top: rect.top - offset.top,\n        left: rect.left - offset.left,\n        height: el.scrollHeight,\n        width: el.scrollWidth\n    };\n}\n\n\nfunction setCoords(el, coords) {\n    el.style.setProperty('top', `${coords.top}px`, 'important');\n    el.style.setProperty('left', `${coords.left}px`, 'important');\n    el.style.setProperty('height', `${coords.height}px`, 'important');\n    el.style.setProperty('width', `${coords.width}px`, 'important');\n}\n\nfunction contains(rect1, rect2) {\n  return (\n    (rect2.right <= rect1.right) &&\n    (rect2.left >= rect1.left) &&\n    (rect2.top >= rect1.top) &&\n    (rect2.bottom <= rect1.bottom)\n  );\n}\n","import EventEmitter from \"event-emitter\";\nimport {extend, borders, uuid, isNumber, bounds, defer, createBlobUrl, revokeBlobUrl} from \"../../utils/core\";\nimport EpubCFI from \"../../epubcfi\";\nimport Contents from \"../../contents\";\nimport { EVENTS } from \"../../utils/constants\";\nimport { Pane, Highlight, Underline } from \"marks-pane\";\n\nclass IframeView {\n\tconstructor(section, options) {\n\t\tthis.settings = extend({\n\t\t\tignoreClass : \"\",\n\t\t\taxis: options.layout && options.layout.props.flow === \"scrolled\" ? \"vertical\" : \"horizontal\",\n\t\t\tdirection: undefined,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tlayout: undefined,\n\t\t\tglobalLayoutProperties: {},\n\t\t\tmethod: undefined\n\t\t}, options || {});\n\n\t\tthis.id = \"epubjs-view-\" + uuid();\n\t\tthis.section = section;\n\t\tthis.index = section.index;\n\n\t\tthis.element = this.container(this.settings.axis);\n\n\t\tthis.added = false;\n\t\tthis.displayed = false;\n\t\tthis.rendered = false;\n\n\t\t// this.width  = this.settings.width;\n\t\t// this.height = this.settings.height;\n\n\t\tthis.fixedWidth  = 0;\n\t\tthis.fixedHeight = 0;\n\n\t\t// Blank Cfi for Parsing\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.layout = this.settings.layout;\n\t\t// console.log(\"AHOY iframe NEW\", this.layout.height);\n\t\t// Dom events to listen for\n\t\t// this.listenedEvents = [\"keydown\", \"keyup\", \"keypressed\", \"mouseup\", \"mousedown\", \"click\", \"touchend\", \"touchstart\"];\n\n\t\tthis.pane = undefined;\n\t\tthis.highlights = {};\n\t\tthis.underlines = {};\n\t\tthis.marks = {};\n\n\t}\n\n\tcontainer(axis) {\n\t\tvar element = document.createElement(\"div\");\n\n\t\telement.classList.add(\"epub-view\");\n\n\t\t// this.element.style.minHeight = \"100px\";\n\t\telement.style.height = \"0px\";\n\t\telement.style.width = \"0px\";\n\t\telement.style.overflow = \"hidden\";\n\t\telement.style.position = \"relative\";\n\t\telement.style.display = \"block\";\n\n\t\tif(axis && axis == \"horizontal\"){\n\t\t\telement.style.flex = \"none\";\n\t\t} else {\n\t\t\telement.style.flex = \"initial\";\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tcreate() {\n\n\t\tif(this.iframe) {\n\t\t\treturn this.iframe;\n\t\t}\n\n\t\tif(!this.element) {\n\t\t\tthis.element = this.createContainer();\n\t\t}\n\n\t\tthis.iframe = document.createElement(\"iframe\");\n\t\tthis.iframe.id = this.id;\n\t\tthis.iframe.scrolling = \"no\"; // Might need to be removed: breaks ios width calculations\n\t\tthis.iframe.style.overflow = \"hidden\";\n\t\tthis.iframe.seamless = \"seamless\";\n\t\t// Back up if seamless isn't supported\n\t\tthis.iframe.style.border = \"none\";\n\n\t\tthis.iframe.setAttribute(\"enable-annotation\", \"true\");\n\n\t\tthis.resizing = true;\n\n\t\t// this.iframe.style.display = \"none\";\n\t\tthis.element.style.visibility = \"hidden\";\n\t\tthis.iframe.style.visibility = \"hidden\";\n\n\t\tthis.iframe.style.width = \"0\";\n\t\tthis.iframe.style.height = \"0\";\n\t\tthis._width = 0;\n\t\tthis._height = 0;\n\n\t\tthis.element.setAttribute(\"ref\", this.index);\n\n\t\tthis.added = true;\n\n\t\tthis.elementBounds = bounds(this.element);\n\n\t\t// if(width || height){\n\t\t//   this.resize(width, height);\n\t\t// } else if(this.width && this.height){\n\t\t//   this.resize(this.width, this.height);\n\t\t// } else {\n\t\t//   this.iframeBounds = bounds(this.iframe);\n\t\t// }\n\n\n\t\tif((\"srcdoc\" in this.iframe)) {\n\t\t\tthis.supportsSrcdoc = true;\n\t\t} else {\n\t\t\tthis.supportsSrcdoc = false;\n\t\t}\n\n\t\tif (!this.settings.method) {\n\t\t\tthis.settings.method = this.supportsSrcdoc ? \"srcdoc\" : \"write\";\n\t\t}\n\n\t\treturn this.iframe;\n\t}\n\n\trender(request, show) {\n\n\t\t// view.onLayout = this.layout.format.bind(this.layout);\n\t\tthis.create();\n\n\t\t// Fit to size of the container, apply padding\n\t\tthis.size();\n\n\t\tif(!this.sectionRender) {\n\t\t\tthis.sectionRender = this.section.render(request);\n\t\t}\n\n\t\t// Render Chain\n\t\treturn this.sectionRender\n\t\t\t.then(function(contents){\n\t\t\t\treturn this.load(contents);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\n\t\t\t\t// apply the layout function to the contents\n\t\t\t\t// console.log(\"AHOY IFRAME render\", this.layout.height);\n\t\t\t\tthis.layout.format(this.contents);\n\n\t\t\t\t// find and report the writingMode axis\n\t\t\t\tlet writingMode = this.contents.writingMode();\n\t\t\t\tlet axis = (writingMode.indexOf(\"vertical\") === 0) ? \"vertical\" : \"horizontal\";\n\n\t\t\t\tthis.setAxis(axis);\n\t\t\t\tthis.emit(EVENTS.VIEWS.AXIS, axis);\n\n\n\t\t\t\t// Listen for events that require an expansion of the iframe\n\t\t\t\tthis.addListeners();\n\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t// Expand the iframe to the full size of the content\n\t\t\t\t\tthis.expand();\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\n\t\t\t}.bind(this), function(e){\n\t\t\t\tthis.emit(EVENTS.VIEWS.LOAD_ERROR, e);\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\treject(e);\n\t\t\t\t});\n\t\t\t}.bind(this))\n\t\t\t.then(function() {\n\t\t\t\tthis.emit(EVENTS.VIEWS.RENDERED, this.section);\n\t\t\t}.bind(this));\n\n\t}\n\n\treset () {\n\t\tif (this.iframe) {\n\t\t\tthis.iframe.style.width = \"0\";\n\t\t\tthis.iframe.style.height = \"0\";\n\t\t\tthis._width = 0;\n\t\t\tthis._height = 0;\n\t\t\tthis._textWidth = undefined;\n\t\t\tthis._contentWidth = undefined;\n\t\t\tthis._textHeight = undefined;\n\t\t\tthis._contentHeight = undefined;\n\t\t}\n\t\tthis._needsReframe = true;\n\t}\n\n\t// Determine locks base on settings\n\tsize(_width, _height) {\n\t\tvar width = _width || this.settings.width;\n\t\tvar height = _height || this.settings.height;\n\n\t\tif(this.layout.name === \"pre-paginated\") {\n\t\t\tthis.lock(\"both\", width, height);\n\t\t\t// console.log(\"AHOY IRAME size lock\", width, height);\n\t\t} else if(this.settings.axis === \"horizontal\") {\n\t\t\tthis.lock(\"height\", width, height);\n\t\t} else {\n\t\t\tthis.lock(\"width\", width, height);\n\t\t}\n\n\t\tthis.settings.width = width;\n\t\tthis.settings.height = height;\n\t}\n\n\t// Lock an axis to element dimensions, taking borders into account\n\tlock(what, width, height) {\n\t\tvar elBorders = borders(this.element);\n\t\tvar iframeBorders;\n\n\t\tif(this.iframe) {\n\t\t\tiframeBorders = borders(this.iframe);\n\t\t} else {\n\t\t\tiframeBorders = {width: 0, height: 0};\n\t\t}\n\n\t\tif(what == \"width\" && isNumber(width)){\n\t\t\tthis.lockedWidth = width - elBorders.width - iframeBorders.width;\n\t\t\t// this.resize(this.lockedWidth, width); //  width keeps ratio correct\n\t\t}\n\n\t\tif(what == \"height\" && isNumber(height)){\n\t\t\tthis.lockedHeight = height - elBorders.height - iframeBorders.height;\n\t\t\t// this.resize(width, this.lockedHeight);\n\t\t}\n\n\t\tif(what === \"both\" &&\n\t\t\t isNumber(width) &&\n\t\t\t isNumber(height)){\n\n\t\t\tthis.lockedWidth = width - elBorders.width - iframeBorders.width;\n\t\t\tthis.lockedHeight = height - elBorders.height - iframeBorders.height;\n\t\t\t// this.resize(this.lockedWidth, this.lockedHeight);\n\t\t}\n\n\t\tif(this.displayed && this.iframe) {\n\n\t\t\t// this.contents.layout();\n\t\t\tthis.expand();\n\t\t}\n\n\n\n\t}\n\n\t// Resize a single axis based on content dimensions\n\texpand(force) {\n\t\tvar width = this.lockedWidth;\n\t\tvar height = this.lockedHeight;\n\t\tvar columns;\n\n\t\tvar textWidth, textHeight;\n\n\t\tif(!this.iframe || this._expanding) return;\n\n\t\tthis._expanding = true;\n\n\t\tif(this.layout.name === 'pre-paginated' && this.settings.axis === 'vertical') {\n\t\t\theight = this.contents.textHeight();\n\t\t\twidth = this.contents.textWidth();\n            // width = this.layout.columnWidth;\n\n\t\t} else if(this.layout.name === \"pre-paginated\") {\n\t\t\twidth = this.layout.columnWidth;\n\t\t\theight = this.layout.height;\n\t\t}\n\t\t// Expand Horizontally\n\t\telse if(this.settings.axis === \"horizontal\") {\n\t\t\t// Get the width of the text\n\t\t\twidth = this.contents.textWidth();\n\n\t\t\tif (width % this.layout.pageWidth > 0) {\n\t\t\t\twidth = Math.ceil(width / this.layout.pageWidth) * this.layout.pageWidth;\n\t\t\t}\n\n\t\t\tif (this.settings.forceEvenPages) {\n\t\t\t\tcolumns = (width / this.layout.pageWidth);\n\t\t\t\tif ( this.layout.divisor > 1 &&\n\t\t\t\t\t\t this.layout.name === \"reflowable\" &&\n\t\t\t\t\t\t(columns % 2 > 0)) {\n\t\t\t\t\t// add a blank page\n\t\t\t\t\twidth += this.layout.pageWidth;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} // Expand Vertically\n\t\telse if(this.settings.axis === \"vertical\") {\n\t\t\theight = this.contents.textHeight();\n\t\t\t// width = this.contents.textWidth();\n\t\t\t// console.log(\"AHOY AHOY expand\", this.index, width, height, \"/\", this._width, this._height);\n\t\t}\n\n\t\t// Only Resize if dimensions have changed or\n\t\t// if Frame is still hidden, so needs reframing\n\t\tif(this._needsReframe || width != this._width || height != this._height){\n\t\t\tthis.reframe(width, height);\n\t\t}\n\n\t\tthis._expanding = false;\n\t}\n\n\treframe(width, height) {\n\t\tvar size;\n\n\t\tif(isNumber(width)){\n\t\t\tthis.element.style.width = width + \"px\";\n\t\t\tthis.iframe.style.width = width + \"px\";\n\t\t\tthis._width = width;\n\t\t}\n\n\t\tif(isNumber(height)){\n\t\t\tthis.element.style.height = height + \"px\";\n\t\t\tthis.iframe.style.height = height + \"px\";\n\t\t\tthis._height = height;\n\t\t}\n\n\t\tlet widthDelta = this.prevBounds ? width - this.prevBounds.width : width;\n\t\tlet heightDelta = this.prevBounds ? height - this.prevBounds.height : height;\n\n\t\tsize = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthDelta: widthDelta,\n\t\t\theightDelta: heightDelta,\n\t\t};\n\n\t\tthis.pane && this.pane.render();\n\n\t\trequestAnimationFrame(() => {\n\t\t\tlet mark;\n\t\t\tfor (let m in this.marks) {\n\t\t\t\tif (this.marks.hasOwnProperty(m)) {\n\t\t\t\t\tmark = this.marks[m];\n\t\t\t\t\tthis.placeMark(mark.element, mark.range);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.onResize(this, size);\n\n\t\tthis.emit(EVENTS.VIEWS.RESIZED, size);\n\n\t\tthis.prevBounds = size;\n\n\t\tthis.elementBounds = bounds(this.element);\n\n\t}\n\n\n\tload(contents) {\n\t\tvar loading = new defer();\n\t\tvar loaded = loading.promise;\n\n\t\tif(!this.iframe) {\n\t\t\tloading.reject(new Error(\"No Iframe Available\"));\n\t\t\treturn loaded;\n\t\t}\n\n\t\tthis.iframe.onload = function(event) {\n\n\t\t\tthis.onLoad(event, loading);\n\n\t\t}.bind(this);\n\n\t\tif (this.settings.method === \"blobUrl\") {\n\t\t\tthis.blobUrl = createBlobUrl(contents, \"application/xhtml+xml\");\n\t\t\tthis.iframe.src = this.blobUrl;\n\t\t\tthis.element.appendChild(this.iframe);\n\t\t} else if(this.settings.method === \"srcdoc\"){\n\t\t\tthis.iframe.srcdoc = contents;\n\t\t\tthis.element.appendChild(this.iframe);\n\t\t} else {\n\n\t\t\tthis.element.appendChild(this.iframe);\n\n\t\t\tthis.document = this.iframe.contentDocument;\n\n\t\t\tif(!this.document) {\n\t\t\t\tloading.reject(new Error(\"No Document Available\"));\n\t\t\t\treturn loaded;\n\t\t\t}\n\n\t\t\tthis.iframe.contentDocument.open();\n\t\t\tthis.iframe.contentDocument.write(contents);\n\t\t\tthis.iframe.contentDocument.close();\n\n\t\t}\n\n\t\treturn loaded;\n\t}\n\n\tonLoad(event, promise) {\n\n\t\tthis.window = this.iframe.contentWindow;\n\t\tthis.document = this.iframe.contentDocument;\n\n\t\tthis.contents = new Contents(this.document, this.document.body, this.section.cfiBase, this.section.index);\n\n\t\tthis.rendering = false;\n\n\t\tvar link = this.document.querySelector(\"link[rel='canonical']\");\n\t\tif (link) {\n\t\t\tlink.setAttribute(\"href\", this.section.canonical);\n\t\t} else {\n\t\t\tlink = this.document.createElement(\"link\");\n\t\t\tlink.setAttribute(\"rel\", \"canonical\");\n\t\t\tlink.setAttribute(\"href\", this.section.canonical);\n\t\t\tthis.document.querySelector(\"head\").appendChild(link);\n\t\t}\n\n\t\tthis.contents.on(EVENTS.CONTENTS.EXPAND, () => {\n\t\t\tif(this.displayed && this.iframe) {\n\t\t\t\tthis.expand();\n\t\t\t\tif (this.contents) {\n\t\t\t\t\tthis.layout.format(this.contents);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.contents.on(EVENTS.CONTENTS.RESIZE, (e) => {\n\t\t\tif(this.displayed && this.iframe) {\n\t\t\t\tthis.expand();\n\t\t\t\tif (this.contents) {\n\t\t\t\t\tthis.layout.format(this.contents);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tpromise.resolve(this.contents);\n\t}\n\n\tsetLayout(layout) {\n\t\tthis.layout = layout;\n\n\t\tif (this.contents) {\n\t\t\tthis.layout.format(this.contents);\n\t\t\tthis.expand();\n\t\t}\n\t}\n\n\tsetAxis(axis) {\n\n\t\t// Force vertical for scrolled\n\t\tif (this.layout.props.flow === \"scrolled\") {\n\t\t\taxis = \"vertical\";\n\t\t}\n\n\t\tthis.settings.axis = axis;\n\n\t\tif(axis == \"horizontal\"){\n\t\t\tthis.element.style.flex = \"none\";\n\t\t} else {\n\t\t\tthis.element.style.flex = \"initial\";\n\t\t}\n\n\t\tthis.size();\n\n\t}\n\n\taddListeners() {\n\t\t//TODO: Add content listeners for expanding\n\t}\n\n\tremoveListeners(layoutFunc) {\n\t\t//TODO: remove content listeners for expanding\n\t}\n\n\tdisplay(request) {\n\t\tvar displayed = new defer();\n\n\t\tif (!this.displayed) {\n\n\t\t\tthis.render(request)\n\t\t\t\t.then(function () {\n\n\t\t\t\t\tthis.emit(EVENTS.VIEWS.DISPLAYED, this);\n\t\t\t\t\tthis.onDisplayed(this);\n\n\t\t\t\t\tthis.displayed = true;\n\t\t\t\t\tdisplayed.resolve(this);\n\n\t\t\t\t}.bind(this), function (err) {\n\t\t\t\t\tdisplayed.reject(err, this);\n\t\t\t\t});\n\n\t\t} else {\n\t\t\tdisplayed.resolve(this);\n\t\t}\n\n\n\t\treturn displayed.promise;\n\t}\n\n\tshow() {\n\n\t\tthis.element.style.visibility = \"visible\";\n\n\t\tif(this.iframe){\n\t\t\tthis.iframe.style.visibility = \"visible\";\n\n\t\t\t// Remind Safari to redraw the iframe\n\t\t\tthis.iframe.style.transform = \"translateZ(0)\";\n\t\t\tthis.iframe.offsetWidth;\n\t\t\tthis.iframe.style.transform = null;\n\t\t}\n\n\t\t// console.log(\"AHOY VIEWS iframe show\", this.index);\n\t\tthis.emit(EVENTS.VIEWS.SHOWN, this);\n\t}\n\n\thide() {\n\t\t// this.iframe.style.display = \"none\";\n\t\tthis.element.style.visibility = \"hidden\";\n\t\tthis.iframe.style.visibility = \"hidden\";\n\n\t\tthis.stopExpanding = true;\n\t\t// console.log(\"AHOY VIEWS iframe hide\", this.index);\n\t\tthis.emit(EVENTS.VIEWS.HIDDEN, this);\n\t}\n\n\toffset() {\n\t\treturn {\n\t\t\ttop: this.element.offsetTop,\n\t\t\tleft: this.element.offsetLeft\n\t\t}\n\t}\n\n\twidth() {\n\t\treturn this._width;\n\t}\n\n\theight() {\n\t\treturn this._height;\n\t}\n\n\tposition() {\n\t\treturn this.element.getBoundingClientRect();\n\t}\n\n\tlocationOf(target) {\n\t\tvar parentPos = this.iframe.getBoundingClientRect();\n\t\tvar targetPos = this.contents.locationOf(target, this.settings.ignoreClass);\n\n\t\treturn {\n\t\t\t\"left\": targetPos.left,\n\t\t\t\"top\": targetPos.top\n\t\t};\n\t}\n\n\tonDisplayed(view) {\n\t\t// Stub, override with a custom functions\n\t}\n\n\tonResize(view, e) {\n\t\t// Stub, override with a custom functions\n\t}\n\n\tbounds(force) {\n\t\tif(force || !this.elementBounds) {\n\t\t\tthis.elementBounds = bounds(this.element);\n\t\t}\n\n\t\treturn this.elementBounds;\n\t}\n\n\thighlight(cfiRange, data={}, cb, className = \"epubjs-hl\", styles = {}) {\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\t\tconst attributes = Object.assign({\"fill\": \"yellow\", \"fill-opacity\": \"0.3\", \"mix-blend-mode\": \"multiply\"}, styles);\n\t\tlet range = this.contents.range(cfiRange);\n\n\t\tlet emitter = () => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tdata[\"epubcfi\"] = cfiRange;\n\n\t\tif (!this.pane) {\n\t\t\tthis.pane = new Pane(this.iframe, this.element);\n\t\t}\n\n\t\tlet m = new Highlight(range, className, data, attributes);\n\t\tlet h = this.pane.addMark(m);\n\n\t\tthis.highlights[cfiRange] = { \"mark\": h, \"element\": h.element, \"listeners\": [emitter, cb] };\n\n\t\th.element.setAttribute(\"ref\", className);\n\t\th.element.addEventListener(\"click\", emitter);\n\t\th.element.addEventListener(\"touchstart\", emitter);\n\n\t\tif (cb) {\n\t\t\th.element.addEventListener(\"click\", cb);\n\t\t\th.element.addEventListener(\"touchstart\", cb);\n\t\t}\n\t\treturn h;\n\t}\n\n\tunderline(cfiRange, data={}, cb, className = \"epubjs-ul\", styles = {}) {\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\t\tconst attributes = Object.assign({\"stroke\": \"black\", \"stroke-opacity\": \"0.3\", \"mix-blend-mode\": \"multiply\"}, styles);\n\t\tlet range = this.contents.range(cfiRange);\n\t\tlet emitter = () => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tdata[\"epubcfi\"] = cfiRange;\n\n\t\tif (!this.pane) {\n\t\t\tthis.pane = new Pane(this.iframe, this.element);\n\t\t}\n\n\t\tlet m = new Underline(range, className, data, attributes);\n\t\tlet h = this.pane.addMark(m);\n\n\t\tthis.underlines[cfiRange] = { \"mark\": h, \"element\": h.element, \"listeners\": [emitter, cb] };\n\n\t\th.element.setAttribute(\"ref\", className);\n\t\th.element.addEventListener(\"click\", emitter);\n\t\th.element.addEventListener(\"touchstart\", emitter);\n\n\t\tif (cb) {\n\t\t\th.element.addEventListener(\"click\", cb);\n\t\t\th.element.addEventListener(\"touchstart\", cb);\n\t\t}\n\t\treturn h;\n\t}\n\n\tmark(cfiRange, data={}, cb) {\n\t\tif (!this.contents) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (cfiRange in this.marks) {\n\t\t\tlet item = this.marks[cfiRange];\n\t\t\treturn item;\n\t\t}\n\n\t\tlet range = this.contents.range(cfiRange);\n\t\tif (!range) {\n\t\t\treturn;\n\t\t}\n\t\tlet container = range.commonAncestorContainer;\n\t\tlet parent = (container.nodeType === 1) ? container : container.parentNode;\n\n\t\tlet emitter = (e) => {\n\t\t\tthis.emit(EVENTS.VIEWS.MARK_CLICKED, cfiRange, data);\n\t\t};\n\n\t\tif (range.collapsed && container.nodeType === 1) {\n\t\t\trange = new Range();\n\t\t\trange.selectNodeContents(container);\n\t\t} else if (range.collapsed) { // Webkit doesn't like collapsed ranges\n\t\t\trange = new Range();\n\t\t\trange.selectNodeContents(parent);\n\t\t}\n\n\t\tlet mark = this.document.createElement(\"a\");\n\t\tmark.setAttribute(\"ref\", \"epubjs-mk\");\n\t\tmark.style.position = \"absolute\";\n\n\t\tmark.dataset[\"epubcfi\"] = cfiRange;\n\n\t\tif (data) {\n\t\t\tObject.keys(data).forEach((key) => {\n\t\t\t\tmark.dataset[key] = data[key];\n\t\t\t});\n\t\t}\n\n\t\tif (cb) {\n\t\t\tmark.addEventListener(\"click\", cb);\n\t\t\tmark.addEventListener(\"touchstart\", cb);\n\t\t}\n\n\t\tmark.addEventListener(\"click\", emitter);\n\t\tmark.addEventListener(\"touchstart\", emitter);\n\n\t\tthis.placeMark(mark, range);\n\n\t\tthis.element.appendChild(mark);\n\n\t\tthis.marks[cfiRange] = { \"element\": mark, \"range\": range, \"listeners\": [emitter, cb] };\n\n\t\treturn parent;\n\t}\n\n\tplaceMark(element, range) {\n\t\tlet top, right, left;\n\n\t\tif(this.layout.name === \"pre-paginated\" ||\n\t\t\tthis.settings.axis !== \"horizontal\") {\n\t\t\tlet pos = range.getBoundingClientRect();\n\t\t\ttop = pos.top;\n\t\t\tright = pos.right;\n\t\t} else {\n\t\t\t// Element might break columns, so find the left most element\n\t\t\tlet rects = range.getClientRects();\n\n\t\t\tlet rect;\n\t\t\tfor (var i = 0; i != rects.length; i++) {\n\t\t\t\trect = rects[i];\n\t\t\t\tif (!left || rect.left < left) {\n\t\t\t\t\tleft = rect.left;\n\t\t\t\t\t// right = rect.right;\n\t\t\t\t\tright = Math.ceil(left / this.layout.props.pageWidth) * this.layout.props.pageWidth - (this.layout.gap / 2);\n\t\t\t\t\ttop = rect.top;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telement.style.top = `${top}px`;\n\t\telement.style.left = `${right}px`;\n\t}\n\n\tunhighlight(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.highlights) {\n\t\t\titem = this.highlights[cfiRange];\n\n\t\t\tthis.pane.removeMark(item.mark);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) {\n\t\t\t\t\titem.element.removeEventListener(\"click\", l);\n\t\t\t\t\titem.element.removeEventListener(\"touchstart\", l);\n\t\t\t\t};\n\t\t\t});\n\t\t\tdelete this.highlights[cfiRange];\n\t\t}\n\t}\n\n\tununderline(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.underlines) {\n\t\t\titem = this.underlines[cfiRange];\n\t\t\tthis.pane.removeMark(item.mark);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) {\n\t\t\t\t\titem.element.removeEventListener(\"click\", l);\n\t\t\t\t\titem.element.removeEventListener(\"touchstart\", l);\n\t\t\t\t};\n\t\t\t});\n\t\t\tdelete this.underlines[cfiRange];\n\t\t}\n\t}\n\n\tunmark(cfiRange) {\n\t\tlet item;\n\t\tif (cfiRange in this.marks) {\n\t\t\titem = this.marks[cfiRange];\n\t\t\tthis.element.removeChild(item.element);\n\t\t\titem.listeners.forEach((l) => {\n\t\t\t\tif (l) {\n\t\t\t\t\titem.element.removeEventListener(\"click\", l);\n\t\t\t\t\titem.element.removeEventListener(\"touchstart\", l);\n\t\t\t\t};\n\t\t\t});\n\t\t\tdelete this.marks[cfiRange];\n\t\t}\n\t}\n\n\tdestroy() {\n\n\t\tfor (let cfiRange in this.highlights) {\n\t\t\tthis.unhighlight(cfiRange);\n\t\t}\n\n\t\tfor (let cfiRange in this.underlines) {\n\t\t\tthis.ununderline(cfiRange);\n\t\t}\n\n\t\tfor (let cfiRange in this.marks) {\n\t\t\tthis.unmark(cfiRange);\n\t\t}\n\n\t\tif (this.blobUrl) {\n\t\t\trevokeBlobUrl(this.blobUrl);\n\t\t}\n\n\t\tif(this.displayed){\n\t\t\tthis.displayed = false;\n\n\t\t\tthis.removeListeners();\n\n\t\t\tthis.stopExpanding = true;\n\t\t\tthis.element.removeChild(this.iframe);\n\n\t\t\tthis.iframe = undefined;\n\t\t\tthis.contents = undefined;\n\n\t\t\tthis._textWidth = null;\n\t\t\tthis._textHeight = null;\n\t\t\tthis._width = null;\n\t\t\tthis._height = null;\n\t\t}\n\n\t\t// this.element.style.height = \"0px\";\n\t\t// this.element.style.width = \"0px\";\n\t}\n}\n\nEventEmitter(IframeView.prototype);\n\nexport default IframeView;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","import {uuid, isNumber, isElement, windowBounds} from \"../../utils/core\";\nimport throttle from 'lodash/throttle'\n\nclass Stage {\n\tconstructor(_options) {\n\t\tthis.settings = _options || {};\n\t\tthis.id = \"epubjs-container-\" + uuid();\n\n\t\tthis.container = this.create(this.settings);\n\n\t\tif(this.settings.hidden) {\n\t\t\tthis.wrapper = this.wrap(this.container);\n\t\t}\n\n\t}\n\n\t/*\n\t* Creates an element to render to.\n\t* Resizes to passed width and height or to the elements size\n\t*/\n\tcreate(options){\n\t\tlet height  = options.height;// !== false ? options.height : \"100%\";\n\t\tlet width   = options.width;// !== false ? options.width : \"100%\";\n\t\tlet overflow  = options.overflow || false;\n\t\tlet axis = options.axis || \"vertical\";\n\t\tlet direction = options.direction;\n\t\tlet scale = options.scale || 1.0;\n\n\t\tif(options.height && isNumber(options.height)) {\n\t\t\theight = options.height + \"px\";\n\t\t}\n\n\t\tif(options.width && isNumber(options.width)) {\n\t\t\twidth = options.width + \"px\";\n\t\t}\n\n\t\t// Create new container element\n\t\tlet container = document.createElement(\"div\");\n\n\t\tcontainer.id = this.id;\n\t\tcontainer.classList.add(\"epub-container\");\n\n\t\t// Style Element\n\t\t// container.style.fontSize = \"0\";\n\t\tcontainer.style.wordSpacing = \"0\";\n\t\tcontainer.style.lineHeight = \"0\";\n\t\tcontainer.style.verticalAlign = \"top\";\n\t\tcontainer.style.position = \"relative\";\n\n\t\tif(axis === \"horizontal\") {\n\t\t\t// container.style.whiteSpace = \"nowrap\";\n\t\t\tcontainer.style.display = \"flex\";\n\t\t\tcontainer.style.flexDirection = \"row\";\n\t\t\tcontainer.style.flexWrap = \"nowrap\";\n\t\t}\n\n\t\tif(width){\n\t\t\tcontainer.style.width = width;\n\t\t}\n\n\t\tif(height){\n\t\t\tcontainer.style.height = height;\n\t\t}\n\n\t\tif (overflow) {\n\t\t\tcontainer.style.overflow = overflow;\n\t\t}\n\n\t\tif (direction) {\n\t\t\tcontainer.dir = direction;\n\t\t\tcontainer.style[\"direction\"] = direction;\n\t\t}\n\n\t\tif (direction && this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = direction;\n\t\t}\n\n\t\tif (scale && scale != 1.0) {\n\t\t\tcontainer.style[\"transform-origin\"] = \"top left\";\n\t\t\tcontainer.style[\"transform\"] = \"scale(\" + scale + \")\";\n\t\t\tcontainer.style.overflow = \"auto\"; // \"visible\" breaks something?\n\t\t} else {\n\t\t\tcontainer.style[\"transform-origin\"] = null;\n\t\t\tcontainer.style[\"transform\"] = null;\n\t\t}\n\n\t\treturn container;\n\t}\n\n\twrap(container) {\n\t\tvar wrapper = document.createElement(\"div\");\n\n\t\twrapper.style.visibility = \"hidden\";\n\t\twrapper.style.overflow = \"hidden\";\n\t\twrapper.style.width = \"0\";\n\t\twrapper.style.height = \"0\";\n\n\t\twrapper.appendChild(container);\n\t\treturn wrapper;\n\t}\n\n\n\tgetElement(_element){\n\t\tvar element;\n\n\t\tif(isElement(_element)) {\n\t\t\telement = _element;\n\t\t} else if (typeof _element === \"string\") {\n\t\t\telement = document.getElementById(_element);\n\t\t}\n\n\t\tif(!element){\n\t\t\tthrow new Error(\"Not an Element\");\n\t\t}\n\n\t\treturn element;\n\t}\n\n\tattachTo(what){\n\n\t\tvar element = this.getElement(what);\n\t\tvar base;\n\n\t\tif(!element){\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.settings.hidden) {\n\t\t\tbase = this.wrapper;\n\t\t} else {\n\t\t\tbase = this.container;\n\t\t}\n\n\t\telement.appendChild(base);\n\n\t\tthis.element = element;\n\n\t\treturn element;\n\n\t}\n\n\tgetContainer() {\n\t\treturn this.container;\n\t}\n\n\tonResize(func){\n\t\t// Only listen to window for resize event if width and height are not fixed.\n\t\t// This applies if it is set to a percent or auto.\n\t\tif(!isNumber(this.settings.width) ||\n\t\t\t !isNumber(this.settings.height) ) {\n\t\t\tthis.resizeFunc = throttle(func, 50);\n\t\t\twindow.addEventListener(\"resize\", this.resizeFunc, false);\n\t\t}\n\n\t}\n\n\tonOrientationChange(func){\n\t\tthis.orientationChangeFunc = func;\n\t\twindow.addEventListener(\"orientationchange\", this.orientationChangeFunc, false);\n\t}\n\n\tsize(width, height){\n\t\tvar bounds;\n\t\tlet _width = width || this.settings.width;\n\t\tlet _height = height || this.settings.height;\n\n\t\t// If width or height are set to false, inherit them from containing element\n\t\tif(width === null) {\n\t\t\tbounds = this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.width) {\n\t\t\t\twidth = Math.floor(bounds.width);\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (isNumber(width)) {\n\t\t\t\tthis.container.style.width = width + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.width = width;\n\t\t\t}\n\t\t}\n\n\t\tif(height === null) {\n\t\t\tbounds = bounds || this.element.getBoundingClientRect();\n\n\t\t\tif(bounds.height) {\n\t\t\t\theight = bounds.height;\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t}\n\n\t\t} else {\n\t\t\tif (isNumber(height)) {\n\t\t\t\tthis.container.style.height = height + \"px\";\n\t\t\t} else {\n\t\t\t\tthis.container.style.height = height;\n\t\t\t}\n\t\t}\n\n\t\tvar _round = function(value) {\n\t\t\treturn Math.round(value);\n\n\t\t\t// -- this calculates the closest even number to value\n\t\t\tvar retval = 2 * Math.round(value / 2);\n\t\t\tif ( retval > value ) {\n\t\t\t\tretval -= 2;\n\t\t\t}\n\t\t\treturn retval;\n\t\t}\n\n\t\tif(!isNumber(width)) {\n\t\t\tbounds = this.container.getBoundingClientRect();\n\t\t\twidth = _round(bounds.width); // Math.floor(bounds.width);\n\t\t\t//height = bounds.height;\n\t\t}\n\n\t\tif(!isNumber(height)) {\n\t\t\tbounds = bounds || this.container.getBoundingClientRect();\n\t\t\t//width = bounds.width;\n\t\t\theight = _round(bounds.height); // bounds.height;\n\t\t}\n\n\n\t\tthis.containerStyles = window.getComputedStyle(this.container);\n\n\t\tthis.containerPadding = {\n\t\t\tleft: parseFloat(this.containerStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(this.containerStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(this.containerStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(this.containerStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\t// Bounds not set, get them from window\n\t\tlet _windowBounds = windowBounds();\n\t\tlet bodyStyles = window.getComputedStyle(document.body);\n\t\tlet bodyPadding = {\n\t\t\tleft: parseFloat(bodyStyles[\"padding-left\"]) || 0,\n\t\t\tright: parseFloat(bodyStyles[\"padding-right\"]) || 0,\n\t\t\ttop: parseFloat(bodyStyles[\"padding-top\"]) || 0,\n\t\t\tbottom: parseFloat(bodyStyles[\"padding-bottom\"]) || 0\n\t\t};\n\n\t\tif (!_width) {\n\t\t\twidth = _windowBounds.width -\n\t\t\t\t\t\t\t\tbodyPadding.left -\n\t\t\t\t\t\t\t\tbodyPadding.right;\n\t\t}\n\n\t\tif ((this.settings.fullsize && !_height) || !_height) {\n\t\t\theight = _windowBounds.height -\n\t\t\t\t\t\t\t\tbodyPadding.top -\n\t\t\t\t\t\t\t\tbodyPadding.bottom;\n\t\t}\n\n\t\tif ( this.settings.scale ) {\n\t\t\twidth /= this.settings.scale;\n\t\t\theight /= this.settings.scale;\n\t\t}\n\n\t\treturn {\n\t\t\twidth: width -\n\t\t\t\t\t\t\tthis.containerPadding.left -\n\t\t\t\t\t\t\tthis.containerPadding.right,\n\t\t\theight: height -\n\t\t\t\t\t\t\tthis.containerPadding.top -\n\t\t\t\t\t\t\tthis.containerPadding.bottom\n\t\t};\n\n\t}\n\n\tbounds(){\n\t\tlet box;\n\t\tif (this.container.style.overflow !== \"visible\") {\n\t\t\tbox = this.container && this.container.getBoundingClientRect();\n\t\t}\n\n\t\tif(!box || !box.width || !box.height) {\n\t\t\treturn windowBounds();\n\t\t} else {\n\t\t\treturn box;\n\t\t}\n\n\t}\n\n\tgetSheet(){\n\t\tvar style = document.createElement(\"style\");\n\n\t\t// WebKit hack --> https://davidwalsh.name/add-rules-stylesheets\n\t\tstyle.appendChild(document.createTextNode(\"\"));\n\n\t\tdocument.head.appendChild(style);\n\n\t\treturn style.sheet;\n\t}\n\n\taddStyleRules(selector, rulesArray){\n\t\tvar scope = \"#\" + this.id + \" \";\n\t\tvar rules = \"\";\n\n\t\tif(!this.sheet){\n\t\t\tthis.sheet = this.getSheet();\n\t\t}\n\n\t\trulesArray.forEach(function(set) {\n\t\t\tfor (var prop in set) {\n\t\t\t\tif(set.hasOwnProperty(prop)) {\n\t\t\t\t\trules += prop + \":\" + set[prop] + \";\";\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.sheet.insertRule(scope + selector + \" {\" + rules + \"}\", 0);\n\t}\n\n\taxis(axis) {\n\t\tif(axis === \"horizontal\") {\n\t\t\tthis.container.style.display = \"flex\";\n\t\t\tthis.container.style.flexDirection = \"row\";\n\t\t\tthis.container.style.flexWrap = \"nowrap\";\n\t\t} else {\n\t\t\tthis.container.style.display = \"block\";\n\t\t}\n\t}\n\n\t// orientation(orientation) {\n\t// \tif (orientation === \"landscape\") {\n\t//\n\t// \t} else {\n\t//\n\t// \t}\n\t//\n\t// \tthis.orientation = orientation;\n\t// }\n\n\tdirection(dir) {\n\t\tif (this.container) {\n\t\t\tthis.container.dir = dir;\n\t\t\tthis.container.style[\"direction\"] = dir;\n\t\t}\n\n\t\tif (this.settings.fullsize) {\n\t\t\tdocument.body.style[\"direction\"] = dir;\n\t\t}\n\t}\n\n\toverflow(overflow) {\n\t\tif (this.container) {\n\t\t\tthis.container.style[\"overflow\"] = overflow;\n\t\t}\n\t}\n\n\tscale(s) {\n\t\tif (this.container) {\n\t\t\tif ( s != 1.0 ) {\n\t\t\t\tthis._originalOverflow = this.container.style.overflow;\n\t\t\t\tthis.container.style[\"transform-origin\"] = \"top left\";\n\t\t\t\tthis.container.style[\"transform\"] = \"scale(\" + s + \")\";\n\t\t\t\tthis.container.style.overflow = \"auto\"; // \"visible\"\n\t\t\t} else {\n\t\t\t\tthis.container.style.overflow = this._originalOverflow;\n\t\t\t\tthis.container.style[\"transform-origin\"] = null;\n\t\t\t\tthis.container.style[\"transform\"] = null;\n\t\t\t}\n\t\t\tthis.settings.scale = s;\n\t\t}\n\t}\n\n\tdestroy() {\n\t\tvar base;\n\n\t\tif (this.element) {\n\n\t\t\tif(this.settings.hidden) {\n\t\t\t\tbase = this.wrapper;\n\t\t\t} else {\n\t\t\t\tbase = this.container;\n\t\t\t}\n\n\t\t\tif(this.element.contains(this.container)) {\n\t\t\t\tthis.element.removeChild(this.container);\n\t\t\t}\n\n\t\t\twindow.removeEventListener(\"resize\", this.resizeFunc);\n\t\t\twindow.removeEventListener(\"orientationChange\", this.orientationChangeFunc);\n\n\t\t}\n\t}\n}\n\nexport default Stage;\n","class Views {\n\tconstructor(container) {\n\t\tthis.container = container;\n\t\tthis._views = [];\n\t\tthis.length = 0;\n\t\tthis.hidden = false;\n\t}\n\n\tall() {\n\t\treturn this._views;\n\t}\n\n\tfirst() {\n\t\treturn this._views[0];\n\t}\n\n\tlast() {\n\t\treturn this._views[this._views.length-1];\n\t}\n\n\tindexOf(view) {\n\t\treturn this._views.indexOf(view);\n\t}\n\n\tslice() {\n\t\treturn this._views.slice.apply(this._views, arguments);\n\t}\n\n\tget(i) {\n\t\treturn this._views[i];\n\t}\n\n\tappend(view){\n\t\tthis._views.push(view);\n\t\tif(this.container){\n\t\t\tthis.container.appendChild(view.element);\n\t\t}\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tprepend(view){\n\t\tthis._views.unshift(view);\n\t\tif(this.container){\n\t\t\tthis.container.insertBefore(view.element, this.container.firstChild);\n\t\t}\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tinsert(view, index) {\n\t\tthis._views.splice(index, 0, view);\n\n\t\tif(this.container){\n\t\t\tif(index < this.container.children.length){\n\t\t\t\tthis.container.insertBefore(view.element, this.container.children[index]);\n\t\t\t} else {\n\t\t\t\tthis.container.appendChild(view.element);\n\t\t\t}\n\t\t}\n\n\t\tthis.length++;\n\t\treturn view;\n\t}\n\n\tremove(view) {\n\t\tvar index = this._views.indexOf(view);\n\n\t\tif(index > -1) {\n\t\t\tthis._views.splice(index, 1);\n\t\t}\n\n\n\t\tthis.destroy(view);\n\n\t\tthis.length--;\n\t}\n\n\tdestroy(view) {\n\t\tif(view.displayed){\n\t\t\tview.destroy();\n\t\t}\n\n\t\tif(this.container){\n\t\t\t this.container.removeChild(view.element);\n\t\t}\n\t\tview = null;\n\t}\n\n\t// Iterators\n\n\tforEach() {\n\t\treturn this._views.forEach.apply(this._views, arguments);\n\t}\n\n\tclear(){\n\t\t// Remove all views\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tif(!this.length) return;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tthis.destroy(view);\n\t\t}\n\n\t\tthis._views = [];\n\t\tthis.length = 0;\n\t}\n\n\tfind(section){\n\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed && view.section.index == section.index) {\n\t\t\t\treturn view;\n\t\t\t}\n\t\t}\n\n\t}\n\n\tdisplayed(){\n\t\tvar displayed = [];\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tdisplayed.push(view);\n\t\t\t}\n\t\t}\n\t\treturn displayed;\n\t}\n\n\tshow(){\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tview.show();\n\t\t\t}\n\t\t}\n\t\tthis.hidden = false;\n\t}\n\n\thide(){\n\t\tvar view;\n\t\tvar len = this.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tview = this._views[i];\n\t\t\tif(view.displayed){\n\t\t\t\tview.hide();\n\t\t\t}\n\t\t}\n\t\tthis.hidden = true;\n\t}\n}\n\nexport default Views;\n","import EventEmitter from \"event-emitter\";\nimport {extend, defer, windowBounds, isNumber} from \"../../utils/core\";\nimport Mapping from \"../../mapping\";\nimport Queue from \"../../utils/queue\";\nimport Stage from \"../helpers/stage\";\nimport Views from \"../helpers/views\";\nimport { EVENTS } from \"../../utils/constants\";\n\nclass DefaultViewManager {\n\tconstructor(options) {\n\n\t\tthis.name = \"default\";\n\t\tthis.optsSettings = options.settings;\n\t\tthis.View = options.view;\n\t\tthis.request = options.request;\n\t\tthis.renditionQueue = options.queue;\n\t\tthis.q = new Queue(this);\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\tinfinite: true,\n\t\t\thidden: false,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\taxis: undefined,\n\t\t\tflow: \"scrolled\",\n\t\t\tignoreClass: \"\",\n\t\t\tfullsize: undefined\n\t\t});\n\n\t\textend(this.settings, options.settings || {});\n\n\t\tthis.viewSettings = {\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\taxis: this.settings.axis,\n\t\t\tflow: this.settings.flow,\n\t\t\tlayout: this.layout,\n\t\t\tmethod: this.settings.method, // srcdoc, blobUrl, write\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tforceEvenPages: true\n\t\t};\n\n\t\tthis.rendered = false;\n\n\t}\n\n\trender(element, size){\n\t\tlet tag = element.tagName;\n\n\t\tif (typeof this.settings.fullsize === \"undefined\" &&\n\t\t\t\ttag && (tag.toLowerCase() == \"body\" ||\n\t\t\t\ttag.toLowerCase() == \"html\")) {\n\t\t\t\tthis.settings.fullsize = true;\n\t\t}\n\n\t\tif (this.settings.fullsize) {\n\t\t\tthis.settings.overflow = \"visible\";\n\t\t\tthis.overflow = this.settings.overflow;\n\t\t}\n\n\t\tthis.settings.size = size;\n\n\t\t// Save the stage\n\t\tthis.stage = new Stage({\n\t\t\twidth: size.width,\n\t\t\theight: size.height,\n\t\t\toverflow: this.overflow,\n\t\t\thidden: this.settings.hidden,\n\t\t\taxis: this.settings.axis,\n\t\t\tfullsize: this.settings.fullsize,\n\t\t\tdirection: this.settings.direction,\n\t\t\tscale: this.settings.scale\n\t\t});\n\n\t\tthis.stage.attachTo(element);\n\n\t\t// Get this stage container div\n\t\tthis.container = this.stage.getContainer();\n\n\t\t// Views array methods\n\t\tthis.views = new Views(this.container);\n\n\t\t// Calculate Stage Size\n\t\tthis._bounds = this.bounds();\n\t\tthis._stageSize = this.stage.size();\n\n\t\t// Set the dimensions for views\n\t\tthis.viewSettings.width = this._stageSize.width;\n\t\tthis.viewSettings.height = this._stageSize.height;\n\n\t\t// Function to handle a resize event.\n\t\t// Will only attach if width and height are both fixed.\n\t\tthis.stage.onResize(this.onResized.bind(this));\n\n\t\tthis.stage.onOrientationChange(this.onOrientationChange.bind(this));\n\n\t\t// Add Event Listeners\n\t\tthis.addEventListeners();\n\n\t\t// Add Layout method\n\t\t// this.applyLayoutMethod();\n\t\tif (this.layout) {\n\t\t\tthis.updateLayout();\n\t\t}\n\n\t\tthis.rendered = true;\n\n\t}\n\n\taddEventListeners(){\n\t\tvar scroller;\n\n\t\twindow.addEventListener(\"unload\", function(e){\n\t\t\tthis.destroy();\n\t\t}.bind(this));\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tscroller.addEventListener(\"scroll\", this._onScroll);\n\t}\n\n\tremoveEventListeners(){\n\t\tvar scroller;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.removeEventListener(\"scroll\", this._onScroll);\n\t\tthis._onScroll = undefined;\n\t}\n\n\tdestroy(){\n\t\tclearTimeout(this.orientationTimeout);\n\t\tclearTimeout(this.resizeTimeout);\n\t\tclearTimeout(this.afterScrolled);\n\n\t\tthis.clear();\n\n\t\tthis.removeEventListeners();\n\n\t\tthis.stage.destroy();\n\n\t\tthis.rendered = false;\n\n\t\t/*\n\n\t\t\tclearTimeout(this.trimTimeout);\n\t\t\tif(this.settings.hidden) {\n\t\t\t\tthis.element.removeChild(this.wrapper);\n\t\t\t} else {\n\t\t\t\tthis.element.removeChild(this.container);\n\t\t\t}\n\t\t*/\n\t}\n\n\tonOrientationChange(e) {\n\t\tlet {orientation} = window;\n\n\t\tif(this.optsSettings.resizeOnOrientationChange) {\n\t\t\tthis.resize();\n\t\t}\n\n\t\t// Per ampproject:\n\t\t// In IOS 10.3, the measured size of an element is incorrect if the\n\t\t// element size depends on window size directly and the measurement\n\t\t// happens in window.resize event. Adding a timeout for correct\n\t\t// measurement. See https://github.com/ampproject/amphtml/issues/8479\n\t\tclearTimeout(this.orientationTimeout);\n\t\tthis.orientationTimeout = setTimeout(function(){\n\t\t\tthis.orientationTimeout = undefined;\n\n\t\t\tif(this.optsSettings.resizeOnOrientationChange) {\n\t\t\t\tthis.resize();\n\t\t\t}\n\n\t\t\tthis.emit(EVENTS.MANAGERS.ORIENTATION_CHANGE, orientation);\n\t\t}.bind(this), 500);\n\n\t}\n\n\tonResized(e) {\n\t\tthis.resize();\n\t}\n\n\tresize(width, height){\n\t\tlet stageSize = this.stage.size(width, height);\n\n\t\t// For Safari, wait for orientation to catch up\n\t\t// if the window is a square\n\t\tthis.winBounds = windowBounds();\n\t\tif (this.orientationTimeout &&\n\t\t\t\tthis.winBounds.width === this.winBounds.height) {\n\t\t\t// reset the stage size for next resize\n\t\t\tthis._stageSize = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._stageSize &&\n\t\t\t\tthis._stageSize.width === stageSize.width &&\n\t\t\t\tthis._stageSize.height === stageSize.height ) {\n\t\t\t// Size is the same, no need to resize\n\t\t\treturn;\n\t\t}\n\n\t\tthis._stageSize = stageSize;\n\n\t\tthis._bounds = this.bounds();\n\n\t\t// Clear current views\n\t\tthis.clear();\n\n\t\t// Update for new views\n\t\tthis.viewSettings.width = this._stageSize.width;\n\t\tthis.viewSettings.height = this._stageSize.height;\n\n\t\tthis.updateLayout();\n\n\t\tthis.emit(EVENTS.MANAGERS.RESIZED, {\n\t\t\twidth: this._stageSize.width,\n\t\t\theight: this._stageSize.height\n\t\t});\n\t}\n\n\tcreateView(section) {\n\t\treturn new this.View(section, this.viewSettings);\n\t}\n\n\tdisplay(section, target){\n\n\t\tvar displaying = new defer();\n\t\tvar displayed = displaying.promise;\n\n\t\t// Check if moving to target is needed\n\t\tif (target === section.href || isNumber(target)) {\n\t\t\ttarget = undefined;\n\t\t}\n\n\t\t// Check to make sure the section we want isn't already shown\n\t\tvar visible = this.views.find(section);\n\n\t\t// View is already shown, just move to correct location in view\n\t\tif(visible && section) {\n\t\t\tlet offset = visible.offset();\n\n\t\t\tif (this.settings.direction === \"ltr\") {\n\t\t\t\tthis.scrollTo(offset.left, offset.top, true);\n\t\t\t} else {\n\t\t\t\tlet width = visible.width();\n\t\t\t\tthis.scrollTo(offset.left + width, offset.top, true);\n\t\t\t}\n\n\t\t\tif(target) {\n\t\t\t\tlet offset = visible.locationOf(target);\n\t\t\t\tthis.moveTo(offset);\n\t\t\t}\n\n\t\t\tdisplaying.resolve();\n\t\t\treturn displayed;\n\t\t}\n\n\t\t// Hide all current views\n\t\tthis.clear();\n\n\t\tthis.add(section)\n\t\t\t.then(function(view){\n\n\t\t\t\t// Move to correct place within the section, if needed\n\t\t\t\tif(target) {\n\t\t\t\t\tlet offset = view.locationOf(target);\n\t\t\t\t\tthis.moveTo(offset);\n\t\t\t\t}\n\n\t\t\t}.bind(this), (err) => {\n\t\t\t\tdisplaying.reject(err);\n\t\t\t})\n\t\t\t.then(function(){\n\t\t\t\tvar next;\n\t\t\t\tif (this.layout.name === \"pre-paginated\" &&\n\t\t\t\t\t\tthis.layout.divisor > 1 && section.index > 0) {\n\t\t\t\t\t// First page (cover) should stand alone for pre-paginated books\n\t\t\t\t\tnext = section.next();\n\t\t\t\t\tif (next) {\n\t\t\t\t\t\treturn this.add(next);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\n\t\t\t\tthis.views.show();\n\n\t\t\t\tdisplaying.resolve();\n\n\t\t\t}.bind(this));\n\t\t// .then(function(){\n\t\t// \treturn this.hooks.display.trigger(view);\n\t\t// }.bind(this))\n\t\t// .then(function(){\n\t\t// \tthis.views.show();\n\t\t// }.bind(this));\n\t\treturn displayed;\n\t}\n\n\tafterDisplayed(view){\n\t\tthis.emit(EVENTS.MANAGERS.ADDED, view);\n\t}\n\n\tafterResized(view){\n\t\tthis.emit(EVENTS.MANAGERS.RESIZE, view.section);\n\t}\n\n\tmoveTo(offset){\n\t\tvar distX = 0,\n\t\t\t  distY = 0;\n\n\t\tif(!this.isPaginated) {\n\t\t\tdistY = offset.top;\n\t\t} else {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\n\t\t\tif (distX + this.layout.delta > this.container.scrollWidth) {\n\t\t\t\tdistX = this.container.scrollWidth - this.layout.delta;\n\t\t\t}\n\t\t}\n\t\tthis.scrollTo(distX, distY, true);\n\t}\n\n\tadd(section){\n\t\tvar view = this.createView(section);\n\n\t\tthis.views.append(view);\n\n\t\t// view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\n\t}\n\n\tappend(section){\n\t\tvar view = this.createView(section);\n\t\tthis.views.append(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\t}\n\n\tprepend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tthis.counter(bounds);\n\t\t});\n\n\t\tthis.views.prepend(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\treturn view.display(this.request);\n\t}\n\n\tcounter(bounds){\n\t\tif(this.settings.axis === \"vertical\") {\n\t\t\tthis.scrollBy(0, bounds.heightDelta, true);\n\t\t} else {\n\t\t\tthis.scrollBy(bounds.widthDelta, 0, true);\n\t\t}\n\n\t}\n\n\t// resizeView(view) {\n\t//\n\t// \tif(this.settings.globalLayoutProperties.layout === \"pre-paginated\") {\n\t// \t\tview.lock(\"both\", this.bounds.width, this.bounds.height);\n\t// \t} else {\n\t// \t\tview.lock(\"width\", this.bounds.width, this.bounds.height);\n\t// \t}\n\t//\n\t// };\n\n\tnext(){\n\t\tvar next;\n\t\tvar left;\n\n\t\tlet dir = this.settings.direction;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\" && (!dir || dir === \"ltr\")) {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft + this.container.offsetWidth + this.layout.delta;\n\n\t\t\tif(left <= this.container.scrollWidth) {\n\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\t\t} else if (this.isPaginated && this.settings.axis === \"horizontal\" && dir === \"rtl\") {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft;\n\n\t\t\tif(left > 0) {\n\t\t\t\tthis.scrollBy(this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"vertical\") {\n\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\n\t\t\tlet top  = this.container.scrollTop + this.container.offsetHeight;\n\n\t\t\tif(top < this.container.scrollHeight) {\n\t\t\t\tthis.scrollBy(0, this.layout.height, true);\n\t\t\t} else {\n\t\t\t\tnext = this.views.last().section.next();\n\t\t\t}\n\n\t\t} else {\n\t\t\tnext = this.views.last().section.next();\n\t\t}\n\n\t\tif(next) {\n\t\t\tthis.clear();\n\n\t\t\treturn this.append(next)\n\t\t\t\t.then(function(){\n\t\t\t\t\tvar right;\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.divisor > 1) {\n\t\t\t\t\t\tright = next.next();\n\t\t\t\t\t\tif (right) {\n\t\t\t\t\t\t\treturn this.append(right);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind(this), (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t})\n\t\t\t\t.then(function(){\n\t\t\t\t\tthis.views.show();\n\t\t\t\t}.bind(this));\n\t\t}\n\n\n\t}\n\n\tprev(){\n\t\tvar prev;\n\t\tvar left;\n\t\tlet dir = this.settings.direction;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\" && (!dir || dir === \"ltr\")) {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft;\n\n\t\t\tif(left > 0) {\n\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"horizontal\" && dir === \"rtl\") {\n\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\n\t\t\tleft = this.container.scrollLeft + this.container.offsetWidth + this.layout.delta;\n\n\t\t\tif(left <= this.container.scrollWidth) {\n\t\t\t\tthis.scrollBy(-this.layout.delta, 0, true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else if (this.isPaginated && this.settings.axis === \"vertical\") {\n\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\n\t\t\tlet top = this.container.scrollTop;\n\n\t\t\tif(top > 0) {\n\t\t\t\tthis.scrollBy(0, -(this.layout.height), true);\n\t\t\t} else {\n\t\t\t\tprev = this.views.first().section.prev();\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tprev = this.views.first().section.prev();\n\n\t\t}\n\n\t\tif(prev) {\n\t\t\tthis.clear();\n\n\t\t\treturn this.prepend(prev)\n\t\t\t\t.then(function(){\n\t\t\t\t\tvar left;\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.divisor > 1) {\n\t\t\t\t\t\tleft = prev.prev();\n\t\t\t\t\t\tif (left) {\n\t\t\t\t\t\t\treturn this.prepend(left);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind(this), (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t})\n\t\t\t\t.then(function(){\n\t\t\t\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\t\t\t\t\t\tif (this.settings.direction === \"rtl\") {\n\t\t\t\t\t\t\tthis.scrollTo(0, 0, true);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.scrollTo(this.container.scrollWidth - this.layout.delta, 0, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.views.show();\n\t\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcurrent(){\n\t\tvar visible = this.visible();\n\t\tif(visible.length){\n\t\t\t// Current is the last visible view\n\t\t\treturn visible[visible.length-1];\n\t\t}\n\t\treturn null;\n\t}\n\n\tclear () {\n\n\t\t// this.q.clear();\n\n\t\tif (this.views) {\n\t\t\tthis.views.hide();\n\t\t\tthis.scrollTo(0,0, true);\n\t\t\tthis.views.clear();\n\t\t}\n\t}\n\n\tcurrentLocation(){\n\n\t\tif (this.settings.axis === \"vertical\") {\n\t\t\tthis.location = this.scrolledLocation();\n\t\t} else {\n\t\t\tthis.location = this.paginatedLocation();\n\t\t}\n\t\treturn this.location;\n\t}\n\n\tscrolledLocation() {\n\t\tlet visible = this.visible();\n\t\tlet container = this.container.getBoundingClientRect();\n\t\tlet pageHeight = (container.height < window.innerHeight) ? container.height : window.innerHeight;\n\n\t\tlet offset = 0;\n\t\tlet used = 0;\n\n\t\tif(this.settings.fullsize) {\n\t\t\toffset = window.scrollY;\n\t\t}\n\n\t\tlet sections = visible.map((view) => {\n\t\t\tlet {index, href} = view.section;\n\t\t\tlet position = view.position();\n\t\t\tlet height = view.height();\n\n\t\t\tlet startPos = offset + container.top - position.top + used;\n\t\t\tlet endPos = startPos + pageHeight - used;\n\t\t\tif (endPos > height) {\n\t\t\t\tendPos = height;\n\t\t\t\tused = (endPos - startPos);\n\t\t\t}\n\n\t\t\tlet totalPages = this.layout.count(height, pageHeight).pages;\n\n\t\t\tlet currPage = Math.ceil(startPos / pageHeight);\n\t\t\tlet pages = [];\n\t\t\tlet endPage = Math.ceil(endPos / pageHeight);\n\n\t\t\tpages = [];\n\t\t\tfor (var i = currPage; i <= endPage; i++) {\n\t\t\t\tlet pg = i + 1;\n\t\t\t\tpages.push(pg);\n\t\t\t}\n\n\t\t\tlet mapping = this.mapping.page(view.contents, view.section.cfiBase, startPos, endPos);\n\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\thref,\n\t\t\t\tpages,\n\t\t\t\ttotalPages,\n\t\t\t\tmapping\n\t\t\t};\n\t\t});\n\n\t\treturn sections;\n\t}\n\n\tpaginatedLocation(){\n\t\tlet visible = this.visible();\n\t\tlet container = this.container.getBoundingClientRect();\n\n\t\tlet left = 0;\n\t\tlet used = 0;\n\n\t\tif(this.settings.fullsize) {\n\t\t\tleft = window.scrollX;\n\t\t}\n\n\t\tlet sections = visible.map((view) => {\n\t\t\tlet {index, href} = view.section;\n\t\t\tlet offset = view.offset().left;\n\t\t\tlet position = view.position().left;\n\t\t\tlet width = view.width();\n\n\t\t\t// Find mapping\n\t\t\tlet start = left + container.left - position + used;\n\t\t\tlet end = start + this.layout.width - used;\n\n\t\t\tlet mapping = this.mapping.page(view.contents, view.section.cfiBase, start, end);\n\n\t\t\t// Find displayed pages\n\t\t\t//console.log(\"pre\", end, offset + width);\n\t\t\t// if (end > offset + width) {\n\t\t\t// \tend = offset + width;\n\t\t\t// \tused = this.layout.pageWidth;\n\t\t\t// }\n\t\t\t// console.log(\"post\", end);\n\n\t\t\tlet totalPages = this.layout.count(width).pages;\n\t\t\tlet startPage = Math.floor(start / this.layout.pageWidth);\n\t\t\tlet pages = [];\n\t\t\tlet endPage = Math.floor(end / this.layout.pageWidth);\n\n\t\t\t// start page should not be negative\n\t\t\tif (startPage < 0) {\n\t\t\t\tstartPage = 0;\n\t\t\t\tendPage = endPage + 1;\n\t\t\t}\n\n\t\t\t// Reverse page counts for rtl\n\t\t\tif (this.settings.direction === \"rtl\") {\n\t\t\t\tlet tempStartPage = startPage;\n\t\t\t\tstartPage = totalPages - endPage;\n\t\t\t\tendPage = totalPages - tempStartPage;\n\t\t\t}\n\n\n\t\t\tfor (var i = startPage + 1; i <= endPage; i++) {\n\t\t\t\tlet pg = i;\n\t\t\t\tpages.push(pg);\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tindex,\n\t\t\t\thref,\n\t\t\t\tpages,\n\t\t\t\ttotalPages,\n\t\t\t\tmapping\n\t\t\t};\n\t\t});\n\n\t\treturn sections;\n\t}\n\n\tisVisible(view, offsetPrev, offsetNext, _container){\n\t\tvar position = view.position();\n\t\tvar container = _container || this.bounds();\n\n\t\tif(this.settings.axis === \"horizontal\" &&\n\t\t\tposition.right > container.left - offsetPrev &&\n\t\t\tposition.left < container.right + offsetNext) {\n\n\t\t\treturn true;\n\n\t\t} else if(this.settings.axis === \"vertical\" &&\n\t\t\tposition.bottom > container.top - offsetPrev &&\n\t\t\tposition.top < container.bottom + offsetNext) {\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tvisible(){\n\t\tvar container = this.bounds();\n\t\tvar views = this.views.displayed();\n\t\tvar viewsLength = views.length;\n\t\tvar visible = [];\n\t\tvar isVisible;\n\t\tvar view;\n\n\t\tfor (var i = 0; i < viewsLength; i++) {\n\t\t\tview = views[i];\n\t\t\tisVisible = this.isVisible(view, 0, 0, container);\n\n\t\t\tif(isVisible === true) {\n\t\t\t\tvisible.push(view);\n\t\t\t}\n\n\t\t}\n\t\treturn visible;\n\t}\n\n\tscrollBy(x, y, silent){\n\t\tlet dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n\t\tif(silent) {\n\t\t\tthis.ignore = true;\n\t\t}\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tif(x) this.container.scrollLeft += x * dir;\n\t\t\tif(y) this.container.scrollTop += y;\n\t\t} else {\n\t\t\twindow.scrollBy(x * dir, y * dir);\n\t\t}\n\t\tthis.scrolled = true;\n\t}\n\n\tscrollTo(x, y, silent){\n\t\tif(silent) {\n\t\t\tthis.ignore = true;\n\t\t}\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tthis.container.scrollLeft = x;\n\t\t\tthis.container.scrollTop = y;\n\t\t} else {\n\t\t\twindow.scrollTo(x,y);\n\t\t}\n\t\tthis.scrolled = true;\n\t}\n\n\tonScroll(){\n\t\tlet scrollTop;\n\t\tlet scrollLeft;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscrollTop = this.container.scrollTop;\n\t\t\tscrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscrollTop = window.scrollY;\n\t\t\tscrollLeft = window.scrollX;\n\t\t}\n\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.scrollLeft = scrollLeft;\n\n\t\tif(!this.ignore) {\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\t\ttop: scrollTop,\n\t\t\t\tleft: scrollLeft\n\t\t\t});\n\n\t\t\tclearTimeout(this.afterScrolled);\n\t\t\tthis.afterScrolled = setTimeout(function () {\n\t\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\t\ttop: this.scrollTop,\n\t\t\t\t\tleft: this.scrollLeft\n\t\t\t\t});\n\t\t\t}.bind(this), 20);\n\n\n\n\t\t} else {\n\t\t\tthis.ignore = false;\n\t\t}\n\n\t}\n\n\tbounds() {\n\t\tvar bounds;\n\n\t\tbounds = this.stage.bounds();\n\n\t\treturn bounds;\n\t}\n\n\tapplyLayout(layout) {\n\n\t\tthis.layout = layout;\n\t\tthis.updateLayout();\n\t\t // this.manager.layout(this.layout.format);\n\t}\n\n\tupdateLayout() {\n\n\t\tif (!this.stage) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._stageSize = this.stage.size();\n\n\t\tif(!this.isPaginated) {\n\t\t\tthis.layout.calculate(this._stageSize.width, this._stageSize.height);\n\t\t} else {\n\t\t\tthis.layout.calculate(\n\t\t\t\tthis._stageSize.width,\n\t\t\t\tthis._stageSize.height,\n\t\t\t\tthis.settings.gap\n\t\t\t);\n\n\t\t\t// Set the look ahead offset for what is visible\n\t\t\tthis.settings.offset = this.layout.delta;\n\n\t\t\t// this.stage.addStyleRules(\"iframe\", [{\"margin-right\" : this.layout.gap + \"px\"}]);\n\n\t\t}\n\n\t\t// Set the dimensions for views\n\t\tthis.viewSettings.width = this.layout.width;\n\t\tthis.viewSettings.height = this.layout.height;\n\n\t\tthis.setLayout(this.layout);\n\t}\n\n\tsetLayout(layout){\n\n\t\tthis.viewSettings.layout = layout;\n\n\t\tthis.mapping = new Mapping(layout.props, this.settings.direction, this.settings.axis);\n\n\t\tif(this.views) {\n\n\t\t\tthis.views.forEach(function(view){\n\t\t\t\tif (view) {\n\t\t\t\t\tview.setLayout(layout);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\n\t}\n\n\tupdateAxis(axis, forceUpdate){\n\n\t\tif (!this.isPaginated) {\n\t\t\taxis = \"vertical\";\n\t\t}\n\n\t\tif (!forceUpdate && axis === this.settings.axis) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.settings.axis = axis;\n\n\t\tthis.stage && this.stage.axis(axis);\n\n\t\tthis.viewSettings.axis = axis;\n\n\t\tif (this.mapping) {\n\t\t\tthis.mapping = new Mapping(this.layout.props, this.settings.direction, this.settings.axis);\n\t\t}\n\n\t\tif (this.layout) {\n\t\t\tif (axis === \"vertical\") {\n\t\t\t\tthis.layout.spread(\"none\");\n\t\t\t} else {\n\t\t\t\tthis.layout.spread(this.layout.settings.spread);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateFlow(flow){\n\t\tlet isPaginated = (flow === \"paginated\" || flow === \"auto\");\n\n\t\tthis.isPaginated = isPaginated;\n\n\t\tif (flow === \"scrolled-doc\" ||\n\t\t\t\tflow === \"scrolled-continuous\" ||\n\t\t\t\tflow === \"scrolled\") {\n\t\t\tthis.updateAxis(\"vertical\");\n\t\t} else {\n\t\t\tthis.updateAxis(\"horizontal\");\n\t\t}\n\n\t\tthis.viewSettings.flow = flow;\n\n\t\tif (!this.settings.overflow) {\n\t\t\tthis.overflow = isPaginated ? \"hidden\" : \"auto\";\n\t\t} else {\n\t\t\tthis.overflow = this.settings.overflow;\n\t\t}\n\n\t\tthis.stage && this.stage.overflow(this.overflow);\n\n\t\tthis.updateLayout();\n\n\t}\n\n\tgetContents(){\n\t\tvar contents = [];\n\t\tif (!this.views) {\n\t\t\treturn contents;\n\t\t}\n\t\tthis.views.forEach(function(view){\n\t\t\tconst viewContents = view && view.contents;\n\t\t\tif (viewContents) {\n\t\t\t\tcontents.push(viewContents);\n\t\t\t}\n\t\t});\n\t\treturn contents;\n\t}\n\n\tdirection(dir=\"ltr\") {\n\t\tthis.settings.direction = dir;\n\n\t\tthis.stage && this.stage.direction(dir);\n\n\t\tthis.viewSettings.direction = dir;\n\n\t\tthis.updateLayout();\n\t}\n\n\tisRendered() {\n\t\treturn this.rendered;\n\t}\n\n\tscale(s) {\n\t\tif ( s == null ) { s = 1.0; }\n\t\tthis.settings.scale = s;\n\n\t\tif (this.stage) {\n\t\t\tthis.stage.scale(s);\n\t\t}\n\t}\n}\n\n//-- Enable binding events to Manager\nEventEmitter(DefaultViewManager.prototype);\n\nexport default DefaultViewManager;\n","import {extend, defer, requestAnimationFrame, prefixed} from \"../../utils/core\";\nimport { EVENTS, DOM_EVENTS } from \"../../utils/constants\";\nimport EventEmitter from \"event-emitter\";\n\n// easing equations from https://github.com/danro/easing-js/blob/master/easing.js\nconst PI_D2 = (Math.PI / 2);\nconst EASING_EQUATIONS = {\n\t\teaseOutSine: function (pos) {\n\t\t\t\treturn Math.sin(pos * PI_D2);\n\t\t},\n\t\teaseInOutSine: function (pos) {\n\t\t\t\treturn (-0.5 * (Math.cos(Math.PI * pos) - 1));\n\t\t},\n\t\teaseInOutQuint: function (pos) {\n\t\t\t\tif ((pos /= 0.5) < 1) {\n\t\t\t\t\t\treturn 0.5 * Math.pow(pos, 5);\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (Math.pow((pos - 2), 5) + 2);\n\t\t},\n\t\teaseInCubic: function(pos) {\n\t\t\treturn Math.pow(pos, 3);\n  \t}\n};\n\nclass Snap {\n\tconstructor(manager, options) {\n\n\t\tthis.settings = extend({\n\t\t\tduration: 80,\n\t\t\tminVelocity: 0.2,\n\t\t\tminDistance: 10,\n\t\t\teasing: EASING_EQUATIONS['easeInCubic']\n\t\t}, options || {});\n\n\t\tthis.supportsTouch = this.supportsTouch();\n\n\t\tif (this.supportsTouch) {\n\t\t\tthis.setup(manager);\n\t\t}\n\t}\n\n\tsetup(manager) {\n\t\tthis.manager = manager;\n\n\t\tthis.layout = this.manager.layout;\n\n\t\tthis.fullsize = this.manager.settings.fullsize;\n\t\tif (this.fullsize) {\n\t\t\tthis.element = this.manager.stage.element;\n\t\t\tthis.scroller = window;\n\t\t\tthis.disableScroll();\n\t\t} else {\n\t\t\tthis.element = this.manager.stage.container;\n\t\t\tthis.scroller = this.element;\n\t\t\tthis.element.style[\"WebkitOverflowScrolling\"] = \"touch\";\n\t\t}\n\n\t\t// this.overflow = this.manager.overflow;\n\n\t\t// set lookahead offset to page width\n\t\tthis.manager.settings.offset = this.layout.width;\n\t\tthis.manager.settings.afterScrolledTimeout = this.settings.duration * 2;\n\n\t\tthis.isVertical = this.manager.settings.axis === \"vertical\";\n\n\t\t// disable snapping if not paginated or axis in not horizontal\n\t\tif (!this.manager.isPaginated || this.isVertical) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\t\tthis.resizeCanceler = false;\n\t\tthis.snapping = false;\n\n\n\t\tthis.scrollLeft;\n\t\tthis.scrollTop;\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\n\t\tthis.addListeners();\n\t}\n\n\tsupportsTouch() {\n\t\tif (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdisableScroll() {\n\t\tthis.element.style.overflow = \"hidden\";\n\t}\n\n\tenableScroll() {\n\t\tthis.element.style.overflow = \"\";\n\t}\n\n\taddListeners() {\n\t\tthis._onResize = this.onResize.bind(this);\n\t\twindow.addEventListener('resize', this._onResize);\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tthis.scroller.addEventListener('scroll', this._onScroll);\n\n\t\tthis._onTouchStart = this.onTouchStart.bind(this);\n\t\tthis.scroller.addEventListener('touchstart', this._onTouchStart, { passive: true });\n\t\tthis.on('touchstart', this._onTouchStart);\n\n\t\tthis._onTouchMove = this.onTouchMove.bind(this);\n\t\tthis.scroller.addEventListener('touchmove', this._onTouchMove, { passive: true });\n\t\tthis.on('touchmove', this._onTouchMove);\n\n\t\tthis._onTouchEnd = this.onTouchEnd.bind(this);\n\t\tthis.scroller.addEventListener('touchend', this._onTouchEnd, { passive: true });\n\t\tthis.on('touchend', this._onTouchEnd);\n\n\t\tthis._afterDisplayed = this.afterDisplayed.bind(this);\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n\t}\n\n\tremoveListeners() {\n\t\twindow.removeEventListener('resize', this._onResize);\n\t\tthis._onResize = undefined;\n\n\t\tthis.scroller.removeEventListener('scroll', this._onScroll);\n\t\tthis._onScroll = undefined;\n\n\t\tthis.scroller.removeEventListener('touchstart', this._onTouchStart, { passive: true });\n\t\tthis.off('touchstart', this._onTouchStart);\n\t\tthis._onTouchStart = undefined;\n\n\t\tthis.scroller.removeEventListener('touchmove', this._onTouchMove, { passive: true });\n\t\tthis.off('touchmove', this._onTouchMove);\n\t\tthis._onTouchMove = undefined;\n\n\t\tthis.scroller.removeEventListener('touchend', this._onTouchEnd, { passive: true });\n\t\tthis.off('touchend', this._onTouchEnd);\n\t\tthis._onTouchEnd = undefined;\n\n\t\tthis.manager.off(EVENTS.MANAGERS.ADDED, this._afterDisplayed);\n\t\tthis._afterDisplayed = undefined;\n\t}\n\n\tafterDisplayed(view) {\n\t\tlet contents = view.contents;\n\t\t[\"touchstart\", \"touchmove\", \"touchend\"].forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\t}\n\n\ttriggerViewEvent(e, contents){\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\tonScroll(e) {\n\t\tthis.scrollLeft = this.fullsize ? window.scrollX : this.scroller.scrollLeft;\n\t\tthis.scrollTop = this.fullsize ? window.scrollY : this.scroller.scrollTop;\n\t}\n\n\tonResize(e) {\n\t\tthis.resizeCanceler = true;\n\t}\n\n\tonTouchStart(e) {\n\t\tlet { screenX, screenY } = e.touches[0];\n\n\t\tif (this.fullsize) {\n\t\t\tthis.enableScroll();\n\t\t}\n\n\t\tthis.touchCanceler = true;\n\n\t\tif (!this.startTouchX) {\n\t\t\tthis.startTouchX = screenX;\n\t\t\tthis.startTouchY = screenY;\n\t\t\tthis.startTime = this.now();\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = this.now();\n\t}\n\n\tonTouchMove(e) {\n\t\tlet { screenX, screenY } = e.touches[0];\n\t\tlet deltaY = Math.abs(screenY - this.endTouchY);\n\n\t\tthis.touchCanceler = true;\n\n\n\t\tif (!this.fullsize && deltaY < 10) {\n\t\t\tthis.element.scrollLeft -= screenX - this.endTouchX;\n\t\t}\n\n\t\tthis.endTouchX = screenX;\n\t\tthis.endTouchY = screenY;\n\t\tthis.endTime = this.now();\n\t}\n\n\tonTouchEnd(e) {\n\t\tif (this.fullsize) {\n\t\t\tthis.disableScroll();\n\t\t}\n\n\t\tthis.touchCanceler = false;\n\n\t\tlet swipped = this.wasSwiped();\n\n\t\tif (swipped !== 0) {\n\t\t\tthis.snap(swipped);\n\t\t} else {\n\t\t\tthis.snap();\n\t\t}\n\n\t\tthis.startTouchX = undefined;\n\t\tthis.startTouchY = undefined;\n\t\tthis.startTime = undefined;\n\t\tthis.endTouchX = undefined;\n\t\tthis.endTouchY = undefined;\n\t\tthis.endTime = undefined;\n\t}\n\n\twasSwiped() {\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet distance = (this.endTouchX - this.startTouchX);\n\t\tlet absolute = Math.abs(distance);\n\t\tlet time = this.endTime - this.startTime;\n\t\tlet velocity = (distance / time);\n\t\tlet minVelocity = this.settings.minVelocity;\n\n\t\tif (absolute <= this.settings.minDistance || absolute >= snapWidth) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (velocity > minVelocity) {\n\t\t\t// previous\n\t\t\treturn -1;\n\t\t} else if (velocity < -minVelocity) {\n\t\t\t// next\n\t\t\treturn 1;\n\t\t}\n\t}\n\n\tneedsSnap() {\n\t\tlet left = this.scrollLeft;\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\treturn (left % snapWidth) !== 0;\n\t}\n\n\tsnap(howMany=0) {\n\t\tlet left = this.scrollLeft;\n\t\tlet snapWidth = this.layout.pageWidth * this.layout.divisor;\n\t\tlet snapTo = Math.round(left / snapWidth) * snapWidth;\n\n\t\tif (howMany) {\n\t\t\tsnapTo += (howMany * snapWidth);\n\t\t}\n\n\t\treturn this.smoothScrollTo(snapTo);\n\t}\n\n\tsmoothScrollTo(destination) {\n\t\tconst deferred = new defer();\n\t\tconst start = this.scrollLeft;\n\t\tconst startTime = this.now();\n\n\t\tconst duration = this.settings.duration;\n\t\tconst easing = this.settings.easing;\n\n\t\tthis.snapping = true;\n\n\t\t// add animation loop\n\t\tfunction tick() {\n\t\t\tconst now = this.now();\n\t\t\tconst time = Math.min(1, ((now - startTime) / duration));\n\t\t\tconst timeFunction = easing(time);\n\n\n\t\t\tif (this.touchCanceler || this.resizeCanceler) {\n\t\t\t\tthis.resizeCanceler = false;\n\t\t\t\tthis.snapping = false;\n\t\t\t\tdeferred.resolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (time < 1) {\n\t\t\t\t\twindow.requestAnimationFrame(tick.bind(this));\n\t\t\t\t\tthis.scrollTo(start + ((destination - start) * time), 0);\n\t\t\t} else {\n\t\t\t\t\tthis.scrollTo(destination, 0);\n\t\t\t\t\tthis.snapping = false;\n\t\t\t\t\tdeferred.resolve();\n\t\t\t}\n\t\t}\n\n\t\ttick.call(this);\n\n\t\treturn deferred.promise;\n\t}\n\n\tscrollTo(left=0, top=0) {\n\t\tif (this.fullsize) {\n\t\t\twindow.scroll(left, top);\n\t\t} else {\n\t\t\tthis.scroller.scrollLeft = left;\n\t\t\tthis.scroller.scrollTop = top;\n\t\t}\n\t}\n\n\tnow() {\n\t\treturn ('now' in window.performance) ? performance.now() : new Date().getTime();\n\t}\n\n\tdestroy() {\n\t\tif (!this.scroller) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.fullsize) {\n\t\t\tthis.enableScroll();\n\t\t}\n\n\t\tthis.removeListeners();\n\n\t\tthis.scroller = undefined;\n\t}\n}\n\nEventEmitter(Snap.prototype);\n\nexport default Snap;\n","import {extend, defer, requestAnimationFrame} from \"../../utils/core\";\nimport DefaultViewManager from \"../default\";\nimport Snap from \"../helpers/snap\";\nimport { EVENTS } from \"../../utils/constants\";\nimport debounce from \"lodash/debounce\";\n\nclass ContinuousViewManager extends DefaultViewManager {\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.name = \"continuous\";\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\tinfinite: true,\n\t\t\toverflow: undefined,\n\t\t\taxis: undefined,\n\t\t\tflow: \"scrolled\",\n\t\t\toffset: 500,\n\t\t\toffsetDelta: 250,\n\t\t\twidth: undefined,\n\t\t\theight: undefined,\n\t\t\tsnap: false,\n\t\t\tafterScrolledTimeout: 10\n\t\t});\n\n\t\textend(this.settings, options.settings || {});\n\n\t\t// Gap can be 0, but defaults doesn't handle that\n\t\tif (options.settings.gap != \"undefined\" && options.settings.gap === 0) {\n\t\t\tthis.settings.gap = options.settings.gap;\n\t\t}\n\n\t\tthis.viewSettings = {\n\t\t\tignoreClass: this.settings.ignoreClass,\n\t\t\taxis: this.settings.axis,\n\t\t\tflow: this.settings.flow,\n\t\t\tlayout: this.layout,\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\tforceEvenPages: false\n\t\t};\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\n\tdisplay(section, target){\n\t\treturn DefaultViewManager.prototype.display.call(this, section, target)\n\t\t\t.then(function () {\n\t\t\t\treturn this.fill();\n\t\t\t}.bind(this));\n\t}\n\n\tfill(_full){\n\t\tvar full = _full || new defer();\n\n\t\tthis.q.enqueue(() => {\n\t\t\treturn this.check();\n\t\t}).then((result) => {\n\t\t\tif (result) {\n\t\t\t\tthis.fill(full);\n\t\t\t} else {\n\t\t\t\tfull.resolve();\n\t\t\t}\n\t\t});\n\n\t\treturn full.promise;\n\t}\n\n\tmoveTo(offset){\n\t\t// var bounds = this.stage.bounds();\n\t\t// var dist = Math.floor(offset.top / bounds.height) * bounds.height;\n\t\tvar distX = 0,\n\t\t\t\tdistY = 0;\n\n\t\tvar offsetX = 0,\n\t\t\t\toffsetY = 0;\n\n\t\tif(!this.isPaginated) {\n\t\t\tdistY = offset.top;\n\t\t\toffsetY = offset.top+this.settings.offsetDelta;\n\t\t} else {\n\t\t\tdistX = Math.floor(offset.left / this.layout.delta) * this.layout.delta;\n\t\t\toffsetX = distX+this.settings.offsetDelta;\n\t\t}\n\n\t\tif (distX > 0 || distY > 0) {\n\t\t\tthis.scrollBy(distX, distY, true);\n\t\t}\n\t}\n\n\tafterResized(view){\n\t\tthis.emit(EVENTS.MANAGERS.RESIZE, view.section);\n\t}\n\n\t// Remove Previous Listeners if present\n\tremoveShownListeners(view){\n\n\t\t// view.off(\"shown\", this.afterDisplayed);\n\t\t// view.off(\"shown\", this.afterDisplayedAbove);\n\t\tview.onDisplayed = function(){};\n\n\t}\n\n\tadd(section){\n\t\tvar view = this.createView(section);\n\n\t\tthis.views.append(view);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\t// view.on(EVENTS.VIEWS.SHOWN, this.afterDisplayed.bind(this));\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\t\tview.onResize = this.afterResized.bind(this);\n\n\t\treturn view.display(this.request);\n\t}\n\n\tappend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tthis.views.append(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tprepend(section){\n\t\tvar view = this.createView(section);\n\n\t\tview.on(EVENTS.VIEWS.RESIZED, (bounds) => {\n\t\t\tthis.counter(bounds);\n\t\t\tview.expanded = true;\n\t\t});\n\n\t\tview.on(EVENTS.VIEWS.AXIS, (axis) => {\n\t\t\tthis.updateAxis(axis);\n\t\t});\n\n\t\tthis.views.prepend(view);\n\n\t\tview.onDisplayed = this.afterDisplayed.bind(this);\n\n\t\treturn view;\n\t}\n\n\tcounter(bounds){\n\t\tif(this.settings.axis === \"vertical\") {\n\t\t\tthis.scrollBy(0, bounds.heightDelta, true);\n\t\t} else {\n\t\t\tthis.scrollBy(bounds.widthDelta, 0, true);\n\t\t}\n\n\t}\n\n\tupdate(_offset){\n\t\tvar container = this.bounds();\n\t\tvar views = this.views.all();\n\t\tvar viewsLength = views.length;\n\t\tvar visible = [];\n\t\tvar offset = typeof _offset != \"undefined\" ? _offset : (this.settings.offset || 0);\n\t\tvar isVisible;\n\t\tvar view;\n\n\t\tvar updating = new defer();\n\t\tvar promises = [];\n\t\tfor (var i = 0; i < viewsLength; i++) {\n\t\t\tview = views[i];\n\n\t\t\tisVisible = this.isVisible(view, offset, offset, container);\n\n\t\t\tif(isVisible === true) {\n\t\t\t\t// console.log(\"visible \" + view.index);\n\n\t\t\t\tif (!view.displayed) {\n\t\t\t\t\tlet displayed = view.display(this.request)\n\t\t\t\t\t\t.then(function (view) {\n\t\t\t\t\t\t\tview.show();\n\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t\tview.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\tpromises.push(displayed);\n\t\t\t\t} else {\n\t\t\t\t\tview.show();\n\t\t\t\t}\n\t\t\t\tvisible.push(view);\n\t\t\t} else {\n\t\t\t\tthis.q.enqueue(view.destroy.bind(view));\n\t\t\t\t// console.log(\"hidden \" + view.index);\n\n\t\t\t\tclearTimeout(this.trimTimeout);\n\t\t\t\tthis.trimTimeout = setTimeout(function(){\n\t\t\t\t\tthis.q.enqueue(this.trim.bind(this));\n\t\t\t\t}.bind(this), 250);\n\t\t\t}\n\n\t\t}\n\n\t\tif(promises.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tupdating.reject(err);\n\t\t\t\t});\n\t\t} else {\n\t\t\tupdating.resolve();\n\t\t\treturn updating.promise;\n\t\t}\n\n\t}\n\n\tcheck(_offsetLeft, _offsetTop){\n\t\tvar checking = new defer();\n\t\tvar newViews = [];\n\n\t\tvar horizontal = (this.settings.axis === \"horizontal\");\n\t\tvar delta = this.settings.offset || 0;\n\n\t\tif (_offsetLeft && horizontal) {\n\t\t\tdelta = _offsetLeft;\n\t\t}\n\n\t\tif (_offsetTop && !horizontal) {\n\t\t\tdelta = _offsetTop;\n\t\t}\n\n\t\tvar bounds = this._bounds; // bounds saved this until resize\n\n\t\tlet rtl = this.settings.direction === \"rtl\";\n\t\tlet dir = horizontal && rtl ? -1 : 1; //RTL reverses scrollTop\n\n\t\tvar offset = horizontal ? this.scrollLeft : this.scrollTop * dir;\n\t\tvar visibleLength = horizontal ? Math.floor(bounds.width) : bounds.height;\n\t\tvar contentLength = horizontal ? this.container.scrollWidth : this.container.scrollHeight;\n\n\t\tlet prepend = () => {\n\t\t\tlet first = this.views.first();\n\t\t\tlet prev = first && first.section.prev();\n\n\t\t\tif(prev) {\n\t\t\t\tnewViews.push(this.prepend(prev));\n\t\t\t}\n\t\t};\n\n\t\tlet append = () => {\n\t\t\tlet last = this.views.last();\n\t\t\tlet next = last && last.section.next();\n\n\t\t\tif(next) {\n\t\t\t\tnewViews.push(this.append(next));\n\t\t\t}\n\n\t\t};\n\n\t\tif (offset + visibleLength + delta >= contentLength) {\n\t\t\tif (horizontal && rtl) {\n\t\t\t\tprepend();\n\t\t\t} else {\n\t\t\t\tappend();\n\t\t\t}\n\t\t}\n\n\t\tif (offset - delta < 0 ) {\n\t\t\tif (horizontal && rtl) {\n\t\t\t\tappend();\n\t\t\t} else {\n\t\t\t\tprepend();\n\t\t\t}\n\t\t}\n\n\t\tlet promises = newViews.map((view) => {\n\t\t\treturn view.displayed;\n\t\t});\n\n\t\tif(newViews.length){\n\t\t\treturn Promise.all(promises)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this.layout.name === \"pre-paginated\" && this.layout.props.spread) {\n\t\t\t\t\t\treturn this.check();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\t// Check to see if anything new is on screen after rendering\n\t\t\t\t\treturn this.update(delta);\n\t\t\t\t}, (err) => {\n\t\t\t\t\treturn err;\n\t\t\t\t});\n\t\t} else {\n\t\t\tthis.q.enqueue(function(){\n\t\t\t\tthis.update();\n\t\t\t}.bind(this));\n\t\t\tchecking.resolve(false);\n\t\t\treturn checking.promise;\n\t\t}\n\n\n\t}\n\n\ttrim(){\n\t\tvar task = new defer();\n\t\tvar displayed = this.views.displayed();\n\t\tvar first = displayed[0];\n\t\tvar last = displayed[displayed.length-1];\n\t\tvar firstIndex = this.views.indexOf(first);\n\t\tvar lastIndex = this.views.indexOf(last);\n\t\tvar above = this.views.slice(0, firstIndex);\n\t\tvar below = this.views.slice(lastIndex+1);\n\n\t\t// Erase all but last above\n\t\tfor (var i = 0; i < above.length-1; i++) {\n\t\t\tthis.erase(above[i], above);\n\t\t}\n\n\t\t// Erase all except first below\n\t\tfor (var j = 1; j < below.length; j++) {\n\t\t\tthis.erase(below[j]);\n\t\t}\n\n\t\ttask.resolve();\n\t\treturn task.promise;\n\t}\n\n\terase(view, above){ //Trim\n\n\t\tvar prevTop;\n\t\tvar prevLeft;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tprevTop = this.container.scrollTop;\n\t\t\tprevLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tprevTop = window.scrollY;\n\t\t\tprevLeft = window.scrollX;\n\t\t}\n\n\t\tvar bounds = view.bounds();\n\n\t\tthis.views.remove(view);\n\n\t\tif(above) {\n\t\t\tif(this.settings.axis === \"vertical\") {\n\t\t\t\tthis.scrollTo(0, prevTop - bounds.height, true);\n\t\t\t} else {\n\t\t\t\tthis.scrollTo(prevLeft - Math.floor(bounds.width), 0, true);\n\t\t\t}\n\t\t}\n\n\t}\n\n\taddEventListeners(stage){\n\n\t\twindow.addEventListener(\"unload\", function(e){\n\t\t\tthis.ignore = true;\n\t\t\t// this.scrollTo(0,0);\n\t\t\tthis.destroy();\n\t\t}.bind(this));\n\n\t\tthis.addScrollListeners();\n\n\t\tif (this.isPaginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap && (typeof this.settings.snap === \"object\") && this.settings.snap);\n\t\t}\n\t}\n\n\taddScrollListeners() {\n\t\tvar scroller;\n\n\t\tthis.tick = requestAnimationFrame;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tthis.prevScrollTop = this.container.scrollTop;\n\t\t\tthis.prevScrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tthis.prevScrollTop = window.scrollY;\n\t\t\tthis.prevScrollLeft = window.scrollX;\n\t\t}\n\n\t\tthis.scrollDeltaVert = 0;\n\t\tthis.scrollDeltaHorz = 0;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t\tthis.scrollTop = this.container.scrollTop;\n\t\t\tthis.scrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t\tthis.scrollTop = window.scrollY;\n\t\t\tthis.scrollLeft = window.scrollX;\n\t\t}\n\n\t\tthis._onScroll = this.onScroll.bind(this);\n\t\tscroller.addEventListener(\"scroll\", this._onScroll);\n\t\tthis._scrolled = debounce(this.scrolled.bind(this), 30);\n\t\t// this.tick.call(window, this.onScroll.bind(this));\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tremoveEventListeners(){\n\t\tvar scroller;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscroller = this.container;\n\t\t} else {\n\t\t\tscroller = window;\n\t\t}\n\n\t\tscroller.removeEventListener(\"scroll\", this._onScroll);\n\t\tthis._onScroll = undefined;\n\t}\n\n\tonScroll(){\n\t\tlet scrollTop;\n\t\tlet scrollLeft;\n\t\tlet dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n\t\tif(!this.settings.fullsize) {\n\t\t\tscrollTop = this.container.scrollTop;\n\t\t\tscrollLeft = this.container.scrollLeft;\n\t\t} else {\n\t\t\tscrollTop = window.scrollY * dir;\n\t\t\tscrollLeft = window.scrollX * dir;\n\t\t}\n\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.scrollLeft = scrollLeft;\n\n\t\tif(!this.ignore) {\n\n\t\t\tthis._scrolled();\n\n\t\t} else {\n\t\t\tthis.ignore = false;\n\t\t}\n\n\t\tthis.scrollDeltaVert += Math.abs(scrollTop-this.prevScrollTop);\n\t\tthis.scrollDeltaHorz += Math.abs(scrollLeft-this.prevScrollLeft);\n\n\t\tthis.prevScrollTop = scrollTop;\n\t\tthis.prevScrollLeft = scrollLeft;\n\n\t\tclearTimeout(this.scrollTimeout);\n\t\tthis.scrollTimeout = setTimeout(function(){\n\t\t\tthis.scrollDeltaVert = 0;\n\t\t\tthis.scrollDeltaHorz = 0;\n\t\t}.bind(this), 150);\n\n\t\tclearTimeout(this.afterScrolled);\n\n\t\tthis.didScroll = false;\n\n\t}\n\n\tscrolled() {\n\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\n\t\tthis.emit(EVENTS.MANAGERS.SCROLL, {\n\t\t\ttop: this.scrollTop,\n\t\t\tleft: this.scrollLeft\n\t\t});\n\n\t\tclearTimeout(this.afterScrolled);\n\t\tthis.afterScrolled = setTimeout(function () {\n\n\t\t\t// Don't report scroll if we are about the snap\n\t\t\tif (this.snapper && this.snapper.supportsTouch && this.snapper.needsSnap()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.emit(EVENTS.MANAGERS.SCROLLED, {\n\t\t\t\ttop: this.scrollTop,\n\t\t\t\tleft: this.scrollLeft\n\t\t\t});\n\n\t\t}.bind(this), this.settings.afterScrolledTimeout);\n\t}\n\n\tnext(){\n\n\t\tlet dir = this.settings.direction;\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\t}\n\n\tprev(){\n\n\t\tlet dir = this.settings.direction;\n\t\tlet delta = this.layout.props.name === \"pre-paginated\" &&\n\t\t\t\t\t\t\t\tthis.layout.props.spread ? this.layout.props.delta * 2 : this.layout.props.delta;\n\n\t\tif(!this.views.length) return;\n\n\t\tif(this.isPaginated && this.settings.axis === \"horizontal\") {\n\n\t\t\tthis.scrollBy(-delta, 0, true);\n\n\t\t} else {\n\n\t\t\tthis.scrollBy(0, -this.layout.height, true);\n\n\t\t}\n\n\t\tthis.q.enqueue(function() {\n\t\t\tthis.check();\n\t\t}.bind(this));\n\t}\n\n\t// updateAxis(axis, forceUpdate){\n\t//\n\t// \tsuper.updateAxis(axis, forceUpdate);\n\t//\n\t// \tif (axis === \"vertical\") {\n\t// \t\tthis.settings.infinite = true;\n\t// \t} else {\n\t// \t\tthis.settings.infinite = false;\n\t// \t}\n\t// }\n\n\tupdateFlow(flow){\n\t\tif (this.rendered && this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t\tthis.snapper = undefined;\n\t\t}\n\n\t\tsuper.updateFlow(flow);\n\n\t\tif (this.rendered && this.isPaginated && this.settings.snap) {\n\t\t\tthis.snapper = new Snap(this, this.settings.snap && (typeof this.settings.snap === \"object\") && this.settings.snap);\n\t\t}\n\t}\n\n\tdestroy(){\n\t\tsuper.destroy();\n\n\t\tif (this.snapper) {\n\t\t\tthis.snapper.destroy();\n\t\t}\n\t}\n\n}\n\nexport default ContinuousViewManager;\n","import EventEmitter from \"event-emitter\";\nimport { extend, defer, isFloat } from \"./utils/core\";\nimport Hook from \"./utils/hook\";\nimport EpubCFI from \"./epubcfi\";\nimport Queue from \"./utils/queue\";\nimport Layout from \"./layout\";\n// import Mapping from \"./mapping\";\nimport Themes from \"./themes\";\nimport Contents from \"./contents\";\nimport Annotations from \"./annotations\";\nimport { EVENTS, DOM_EVENTS } from \"./utils/constants\";\n\n// Default Views\nimport IframeView from \"./managers/views/iframe\";\n\n// Default View Managers\nimport DefaultViewManager from \"./managers/default/index\";\nimport ContinuousViewManager from \"./managers/continuous/index\";\n\n/**\n * Displays an Epub as a series of Views for each Section.\n * Requires Manager and View class to handle specifics of rendering\n * the section content.\n * @class\n * @param {Book} book\n * @param {object} [options]\n * @param {number} [options.width]\n * @param {number} [options.height]\n * @param {string} [options.ignoreClass] class for the cfi parser to ignore\n * @param {string | function | object} [options.manager='default']\n * @param {string | function} [options.view='iframe']\n * @param {string} [options.layout] layout to force\n * @param {string} [options.spread] force spread value\n * @param {number} [options.minSpreadWidth] overridden by spread: none (never) / both (always)\n * @param {string} [options.stylesheet] url of stylesheet to be injected\n * @param {boolean} [options.resizeOnOrientationChange] false to disable orientation events\n * @param {string} [options.script] url of script to be injected\n * @param {boolean | object} [options.snap=false] use snap scrolling\n */\nclass Rendition {\n\tconstructor(book, options) {\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\twidth: null,\n\t\t\theight: null,\n\t\t\tignoreClass: \"\",\n\t\t\tmanager: \"default\",\n\t\t\tview: \"iframe\",\n\t\t\tflow: null,\n\t\t\tlayout: null,\n\t\t\tspread: null,\n\t\t\tminSpreadWidth: 800,\n\t\t\tstylesheet: null,\n\t\t\tresizeOnOrientationChange: true,\n\t\t\tscript: null,\n\t\t\tsnap: false\n\t\t});\n\n\t\textend(this.settings, options);\n\n\t\tif (typeof(this.settings.manager) === \"object\") {\n\t\t\tthis.manager = this.settings.manager;\n\t\t}\n\n\t\tthis.book = book;\n\n\t\t/**\n\t\t * Adds Hook methods to the Rendition prototype\n\t\t * @member {object} hooks\n\t\t * @property {Hook} hooks.content\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.hooks = {};\n\t\tthis.hooks.display = new Hook(this);\n\t\tthis.hooks.serialize = new Hook(this);\n\t\tthis.hooks.content = new Hook(this);\n\t\tthis.hooks.unloaded = new Hook(this);\n\t\tthis.hooks.layout = new Hook(this);\n\t\tthis.hooks.render = new Hook(this);\n\t\tthis.hooks.show = new Hook(this);\n\n\t\tthis.hooks.content.register(this.handleLinks.bind(this));\n\t\tthis.hooks.content.register(this.passEvents.bind(this));\n\t\tthis.hooks.content.register(this.adjustImages.bind(this));\n\n\t\tthis.injected = {};\n\t\tthis.injected['identifier'] = this.injectIdentifier.bind(this);\n\t\tthis.book.spine.hooks.content.register(this.injected['identifier']);\n\n\t\tif (this.settings.stylesheet) {\n\t\t\tthis.injected['stylesheet'] = this.injectStylesheet.bind(this);\n\t\t\tthis.book.spine.hooks.content.register(this.injected['stylesheet']);\n\t\t}\n\n\t\tif (this.settings.script) {\n\t\t\tthis.injected['script'] = this.injectScript.bind(this);\n\t\t\tthis.book.spine.hooks.content.register(this.injected['script']);\n\t\t}\n\n\t\t/**\n\t\t * @member {Themes} themes\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.themes = new Themes(this);\n\n\t\t/**\n\t\t * @member {Annotations} annotations\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.annotations = new Annotations(this);\n\n\t\tthis.epubcfi = new EpubCFI();\n\n\t\tthis.q = new Queue(this);\n\n\t\t/**\n\t\t * A Rendered Location Range\n\t\t * @typedef location\n\t\t * @type {Object}\n\t\t * @property {object} start\n\t\t * @property {string} start.index\n\t\t * @property {string} start.href\n\t\t * @property {object} start.displayed\n\t\t * @property {EpubCFI} start.cfi\n\t\t * @property {number} start.location\n\t\t * @property {number} start.percentage\n\t\t * @property {number} start.displayed.page\n\t\t * @property {number} start.displayed.total\n\t\t * @property {object} end\n\t\t * @property {string} end.index\n\t\t * @property {string} end.href\n\t\t * @property {object} end.displayed\n\t\t * @property {EpubCFI} end.cfi\n\t\t * @property {number} end.location\n\t\t * @property {number} end.percentage\n\t\t * @property {number} end.displayed.page\n\t\t * @property {number} end.displayed.total\n\t\t * @property {boolean} atStart\n\t\t * @property {boolean} atEnd\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.location = undefined;\n\n\t\t// Hold queue until book is opened\n\t\tthis.q.enqueue(this.book.opened);\n\n\t\tthis.starting = new defer();\n\t\t/**\n\t\t * @member {promise} started returns after the rendition has started\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.started = this.starting.promise;\n\t\t// Block the queue until rendering is started\n\t\tthis.q.enqueue(this.start);\n\t}\n\n\t/**\n\t * Set the manager function\n\t * @param {function} manager\n\t */\n\tsetManager(manager) {\n\t\tthis.manager = manager;\n\t}\n\n\t/**\n\t * Require the manager from passed string, or as a class function\n\t * @param  {string|object} manager [description]\n\t * @return {method}\n\t */\n\trequireManager(manager) {\n\t\tvar viewManager;\n\n\t\t// If manager is a string, try to load from imported managers\n\t\tif (typeof manager === \"string\" && manager === \"default\") {\n\t\t\tviewManager = DefaultViewManager;\n\t\t} else if (typeof manager === \"string\" && manager === \"continuous\") {\n\t\t\tviewManager = ContinuousViewManager;\n\t\t} else {\n\t\t\t// otherwise, assume we were passed a class function\n\t\t\tviewManager = manager;\n\t\t}\n\n\t\treturn viewManager;\n\t}\n\n\t/**\n\t * Require the view from passed string, or as a class function\n\t * @param  {string|object} view\n\t * @return {view}\n\t */\n\trequireView(view) {\n\t\tvar View;\n\n\t\t// If view is a string, try to load from imported views,\n\t\tif (typeof view == \"string\" && view === \"iframe\") {\n\t\t\tView = IframeView;\n\t\t} else {\n\t\t\t// otherwise, assume we were passed a class function\n\t\t\tView = view;\n\t\t}\n\n\t\treturn View;\n\t}\n\n\t/**\n\t * Start the rendering\n\t * @return {Promise} rendering has started\n\t */\n\tstart(){\n\n\t\tif(!this.manager) {\n\t\t\tthis.ViewManager = this.requireManager(this.settings.manager);\n\t\t\tthis.View = this.requireView(this.settings.view);\n\n\t\t\tthis.manager = new this.ViewManager({\n\t\t\t\tview: this.View,\n\t\t\t\tqueue: this.q,\n\t\t\t\trequest: this.book.load.bind(this.book),\n\t\t\t\tsettings: this.settings\n\t\t\t});\n\t\t}\n\n\t\tthis.direction(this.book.package.metadata.direction);\n\n\t\t// Parse metadata to get layout props\n\t\tthis.settings.globalLayoutProperties = this.determineLayoutProperties(this.book.package.metadata);\n\n\t\tthis.flow(this.settings.globalLayoutProperties.flow);\n\n\t\tthis.layout(this.settings.globalLayoutProperties);\n\n\t\t// Listen for displayed views\n\t\tthis.manager.on(EVENTS.MANAGERS.ADDED, this.afterDisplayed.bind(this));\n\t\tthis.manager.on(EVENTS.MANAGERS.REMOVED, this.afterRemoved.bind(this));\n\n\t\t// Listen for resizing\n\t\tthis.manager.on(EVENTS.MANAGERS.RESIZED, this.onResized.bind(this));\n\n\t\t// Listen for rotation\n\t\tthis.manager.on(EVENTS.MANAGERS.ORIENTATION_CHANGE, this.onOrientationChange.bind(this));\n\n\t\t// Listen for scroll changes\n\t\tthis.manager.on(EVENTS.MANAGERS.SCROLLED, this.reportLocation.bind(this));\n\n\t\t/**\n\t\t * Emit that rendering has started\n\t\t * @event started\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.STARTED);\n\n\t\t// Start processing queue\n\t\tthis.starting.resolve();\n\t}\n\n\t/**\n\t * Call to attach the container to an element in the dom\n\t * Container must be attached before rendering can begin\n\t * @param  {element} element to attach to\n\t * @return {Promise}\n\t */\n\tattachTo(element){\n\n\t\treturn this.q.enqueue(function () {\n\n\t\t\t// Start rendering\n\t\t\tthis.manager.render(element, {\n\t\t\t\t\"width\"  : this.settings.width,\n\t\t\t\t\"height\" : this.settings.height\n\t\t\t});\n\n\t\t\t/**\n\t\t\t * Emit that rendering has attached to an element\n\t\t\t * @event attached\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.ATTACHED);\n\n\t\t}.bind(this));\n\n\t}\n\n\t/**\n\t * Display a point in the book\n\t * The request will be added to the rendering Queue,\n\t * so it will wait until book is opened, rendering started\n\t * and all other rendering tasks have finished to be called.\n\t * @param  {string} target Url or EpubCFI\n\t * @return {Promise}\n\t */\n\tdisplay(target){\n\t\tif (this.displaying) {\n\t\t\tthis.displaying.resolve();\n\t\t}\n\t\treturn this.q.enqueue(this._display, target);\n\t}\n\n\t/**\n\t * Tells the manager what to display immediately\n\t * @private\n\t * @param  {string} target Url or EpubCFI\n\t * @return {Promise}\n\t */\n\t_display(target){\n\t\tif (!this.book) {\n\t\t\treturn;\n\t\t}\n\t\tvar isCfiString = this.epubcfi.isCfiString(target);\n\t\tvar displaying = new defer();\n\t\tvar displayed = displaying.promise;\n\t\tvar section;\n\t\tvar moveTo;\n\n\t\tthis.displaying = displaying;\n\n\t\t// Check if this is a book percentage\n\t\tif (this.book.locations.length() && isFloat(target)) {\n\t\t\ttarget = this.book.locations.cfiFromPercentage(parseFloat(target));\n\t\t}\n\n\t\tsection = this.book.spine.get(target);\n\n\t\tif(!section){\n\t\t\tdisplaying.reject(new Error(\"No Section Found\"));\n\t\t\treturn displayed;\n\t\t}\n\n\t\tthis.manager.display(section, target)\n\t\t\t.then(() => {\n\t\t\t\tdisplaying.resolve(section);\n\t\t\t\tthis.displaying = undefined;\n\n\t\t\t\t/**\n\t\t\t\t * Emit that a section has been displayed\n\t\t\t\t * @event displayed\n\t\t\t\t * @param {Section} section\n\t\t\t\t * @memberof Rendition\n\t\t\t\t */\n\t\t\t\tthis.emit(EVENTS.RENDITION.DISPLAYED, section);\n\t\t\t\tthis.reportLocation();\n\t\t\t}, (err) => {\n\t\t\t\t/**\n\t\t\t\t * Emit that has been an error displaying\n\t\t\t\t * @event displayError\n\t\t\t\t * @param {Section} section\n\t\t\t\t * @memberof Rendition\n\t\t\t\t */\n\t\t\t\tthis.emit(EVENTS.RENDITION.DISPLAY_ERROR, err);\n\t\t\t});\n\n\t\treturn displayed;\n\t}\n\n\t/*\n\trender(view, show) {\n\n\t\t// view.onLayout = this.layout.format.bind(this.layout);\n\t\tview.create();\n\n\t\t// Fit to size of the container, apply padding\n\t\tthis.manager.resizeView(view);\n\n\t\t// Render Chain\n\t\treturn view.section.render(this.book.request)\n\t\t\t.then(function(contents){\n\t\t\t\treturn view.load(contents);\n\t\t\t}.bind(this))\n\t\t\t.then(function(doc){\n\t\t\t\treturn this.hooks.content.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\tthis.layout.format(view.contents);\n\t\t\t\treturn this.hooks.layout.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\treturn view.display();\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\treturn this.hooks.render.trigger(view, this);\n\t\t\t}.bind(this))\n\t\t\t.then(function(){\n\t\t\t\tif(show !== false) {\n\t\t\t\t\tthis.q.enqueue(function(view){\n\t\t\t\t\t\tview.show();\n\t\t\t\t\t}, view);\n\t\t\t\t}\n\t\t\t\t// this.map = new Map(view, this.layout);\n\t\t\t\tthis.hooks.show.trigger(view, this);\n\t\t\t\tthis.trigger(\"rendered\", view.section);\n\n\t\t\t}.bind(this))\n\t\t\t.catch(function(e){\n\t\t\t\tthis.trigger(\"loaderror\", e);\n\t\t\t}.bind(this));\n\n\t}\n\t*/\n\n\t/**\n\t * Report what section has been displayed\n\t * @private\n\t * @param  {*} view\n\t */\n\tafterDisplayed(view){\n\n\t\tview.on(EVENTS.VIEWS.MARK_CLICKED, (cfiRange, data) => this.triggerMarkEvent(cfiRange, data, view));\n\n\t\tthis.hooks.render.trigger(view, this)\n\t\t\t.then(() => {\n\t\t\t\tif (view.contents) {\n\t\t\t\t\tthis.hooks.content.trigger(view.contents, this).then(() => {\n\t\t\t\t\t\t/**\n\t\t\t\t\t\t * Emit that a section has been rendered\n\t\t\t\t\t\t * @event rendered\n\t\t\t\t\t\t * @param {Section} section\n\t\t\t\t\t\t * @param {View} view\n\t\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t\t */\n\t\t\t\t\t\tview.emit(EVENTS.RENDITION.RENDITION, view.section, view);\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.RENDERED, view.section, view);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.RENDERED, view.section, view);\n\t\t\t\t}\n\t\t\t});\n\n\t}\n\n\t/**\n\t * Report what has been removed\n\t * @private\n\t * @param  {*} view\n\t */\n\tafterRemoved(view){\n\t\tthis.hooks.unloaded.trigger(view, this).then(() => {\n\t\t\t/**\n\t\t\t * Emit that a section has been removed\n\t\t\t * @event removed\n\t\t\t * @param {Section} section\n\t\t\t * @param {View} view\n\t\t\t * @memberof Rendition\n\t\t\t */\n\t\t\tthis.emit(EVENTS.RENDITION.REMOVED, view.section, view);\n\t\t});\n\t}\n\n\t/**\n\t * Report resize events and display the last seen location\n\t * @private\n\t */\n\tonResized(size){\n\n\t\t/**\n\t\t * Emit that the rendition has been resized\n\t\t * @event resized\n\t\t * @param {number} width\n\t\t * @param {height} height\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.RESIZED, {\n\t\t\twidth: size.width,\n\t\t\theight: size.height\n\t\t});\n\n\t\tif (this.location && this.location.start) {\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\n\t}\n\n\t/**\n\t * Report orientation events and display the last seen location\n\t * @private\n\t */\n\tonOrientationChange(orientation){\n\t\t/**\n\t\t * Emit that the rendition has been rotated\n\t\t * @event orientationchange\n\t\t * @param {string} orientation\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.ORIENTATION_CHANGE, orientation);\n\t}\n\n\t/**\n\t * Move the Rendition to a specific offset\n\t * Usually you would be better off calling display()\n\t * @param {object} offset\n\t */\n\tmoveTo(offset){\n\t\tthis.manager.moveTo(offset);\n\t}\n\n\t/**\n\t * Trigger a resize of the views\n\t * @param {number} [width]\n\t * @param {number} [height]\n\t */\n\tresize(width, height){\n\t\tif (width) {\n\t\t\tthis.settings.width = width;\n\t\t}\n\t\tif (height) {\n\t\t\tthis.settings.height = height;\n\t\t}\n\t\tthis.manager.resize(width, height);\n\t}\n\n\t/**\n\t * Clear all rendered views\n\t */\n\tclear(){\n\t\tthis.manager.clear();\n\t}\n\n\t/**\n\t * Go to the next \"page\" in the rendition\n\t * @return {Promise}\n\t */\n\tnext(){\n\t\treturn this.q.enqueue(this.manager.next.bind(this.manager))\n\t\t\t.then(this.reportLocation.bind(this));\n\t}\n\n\t/**\n\t * Go to the previous \"page\" in the rendition\n\t * @return {Promise}\n\t */\n\tprev(){\n\t\treturn this.q.enqueue(this.manager.prev.bind(this.manager))\n\t\t\t.then(this.reportLocation.bind(this));\n\t}\n\n\t//-- http://www.idpf.org/epub/301/spec/epub-publications.html#meta-properties-rendering\n\t/**\n\t * Determine the Layout properties from metadata and settings\n\t * @private\n\t * @param  {object} metadata\n\t * @return {object} properties\n\t */\n\tdetermineLayoutProperties(metadata){\n\t\tvar properties;\n\t\tvar layout = this.settings.layout || metadata.layout || \"reflowable\";\n\t\tvar spread = this.settings.spread || metadata.spread || \"auto\";\n\t\tvar orientation = this.settings.orientation || metadata.orientation || \"auto\";\n\t\tvar flow = this.settings.flow || metadata.flow || \"auto\";\n\t\tvar viewport = metadata.viewport || \"\";\n\t\tvar minSpreadWidth = this.settings.minSpreadWidth || metadata.minSpreadWidth || 800;\n\t\tvar direction = this.settings.direction || metadata.direction || \"ltr\";\n\n\t\tif ((this.settings.width === 0 || this.settings.width > 0) &&\n\t\t\t\t(this.settings.height === 0 || this.settings.height > 0)) {\n\t\t\t// viewport = \"width=\"+this.settings.width+\", height=\"+this.settings.height+\"\";\n\t\t}\n\n\t\tproperties = {\n\t\t\tlayout : layout,\n\t\t\tspread : spread,\n\t\t\torientation : orientation,\n\t\t\tflow : flow,\n\t\t\tviewport : viewport,\n\t\t\tminSpreadWidth : minSpreadWidth,\n\t\t\tdirection: direction\n\t\t};\n\n\t\treturn properties;\n\t}\n\n\t/**\n\t * Adjust the flow of the rendition to paginated or scrolled\n\t * (scrolled-continuous vs scrolled-doc are handled by different view managers)\n\t * @param  {string} flow\n\t */\n\tflow(flow){\n\t\tvar _flow = flow;\n\t\tif (flow === \"scrolled\" ||\n\t\t\t\tflow === \"scrolled-doc\" ||\n\t\t\t\tflow === \"scrolled-continuous\") {\n\t\t\t_flow = \"scrolled\";\n\t\t}\n\n\t\tif (flow === \"auto\" || flow === \"paginated\") {\n\t\t\t_flow = \"paginated\";\n\t\t}\n\n\t\tthis.settings.flow = flow;\n\n\t\tif (this._layout) {\n\t\t\tthis._layout.flow(_flow);\n\t\t}\n\n\t\tif (this.manager && this._layout) {\n\t\t\tthis.manager.applyLayout(this._layout);\n\t\t}\n\n\t\tif (this.manager) {\n\t\t\tthis.manager.updateFlow(_flow);\n\t\t}\n\n\t\tif (this.manager && this.manager.isRendered() && this.location) {\n\t\t\tthis.manager.clear();\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the layout of the rendition to reflowable or pre-paginated\n\t * @param  {object} settings\n\t */\n\tlayout(settings){\n\t\tif (settings) {\n\t\t\tthis._layout = new Layout(settings);\n\t\t\tthis._layout.spread(settings.spread, this.settings.minSpreadWidth);\n\n\t\t\t// this.mapping = new Mapping(this._layout.props);\n\n\t\t\tthis._layout.on(EVENTS.LAYOUT.UPDATED, (props, changed) => {\n\t\t\t\tthis.emit(EVENTS.RENDITION.LAYOUT, props, changed);\n\t\t\t})\n\t\t}\n\n\t\tif (this.manager && this._layout) {\n\t\t\tthis.manager.applyLayout(this._layout);\n\t\t}\n\n\t\treturn this._layout;\n\t}\n\n\t/**\n\t * Adjust if the rendition uses spreads\n\t * @param  {string} spread none | auto (TODO: implement landscape, portrait, both)\n\t * @param  {int} [min] min width to use spreads at\n\t */\n\tspread(spread, min){\n\n\t\tthis.settings.spread = spread;\n\n\t\tif (min) {\n\t\t\tthis.settings.minSpreadWidth = min;\n\t\t}\n\n\t\tif (this._layout) {\n\t\t\tthis._layout.spread(spread, min);\n\t\t}\n\n\t\tif (this.manager && this.manager.isRendered()) {\n\t\t\tthis.manager.updateLayout();\n\t\t}\n\t}\n\n\t/**\n\t * Adjust the direction of the rendition\n\t * @param  {string} dir\n\t */\n\tdirection(dir){\n\n\t\tthis.settings.direction = dir || \"ltr\";\n\n\t\tif (this.manager) {\n\t\t\tthis.manager.direction(this.settings.direction);\n\t\t}\n\n\t\tif (this.manager && this.manager.isRendered() && this.location) {\n\t\t\tthis.manager.clear();\n\t\t\tthis.display(this.location.start.cfi);\n\t\t}\n\t}\n\n\t/**\n\t * Report the current location\n\t * @fires relocated\n\t * @fires locationChanged\n\t */\n\treportLocation(){\n\t\treturn this.q.enqueue(function reportedLocation(){\n\t\t\trequestAnimationFrame(function reportedLocationAfterRAF() {\n\t\t\t\tvar location = this.manager.currentLocation();\n\t\t\t\tif (location && location.then && typeof location.then === \"function\") {\n\t\t\t\t\tlocation.then(function(result) {\n\t\t\t\t\t\tlet located = this.located(result);\n\n\t\t\t\t\t\tif (!located || !located.start || !located.end) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.location = located;\n\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.LOCATION_CHANGED, {\n\t\t\t\t\t\t\tindex: this.location.start.index,\n\t\t\t\t\t\t\thref: this.location.start.href,\n\t\t\t\t\t\t\tstart: this.location.start.cfi,\n\t\t\t\t\t\t\tend: this.location.end.cfi,\n\t\t\t\t\t\t\tpercentage: this.location.start.percentage\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.emit(EVENTS.RENDITION.RELOCATED, this.location);\n\t\t\t\t\t}.bind(this));\n\t\t\t\t} else if (location) {\n\t\t\t\t\tlet located = this.located(location);\n\n\t\t\t\t\tif (!located || !located.start || !located.end) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.location = located;\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @event locationChanged\n\t\t\t\t\t * @deprecated\n\t\t\t\t\t * @type {object}\n\t\t\t\t\t * @property {number} index\n\t\t\t\t\t * @property {string} href\n\t\t\t\t\t * @property {EpubCFI} start\n\t\t\t\t\t * @property {EpubCFI} end\n\t\t\t\t\t * @property {number} percentage\n\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t */\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.LOCATION_CHANGED, {\n\t\t\t\t\t\tindex: this.location.start.index,\n\t\t\t\t\t\thref: this.location.start.href,\n\t\t\t\t\t\tstart: this.location.start.cfi,\n\t\t\t\t\t\tend: this.location.end.cfi,\n\t\t\t\t\t\tpercentage: this.location.start.percentage\n\t\t\t\t\t});\n\n\t\t\t\t\t/**\n\t\t\t\t\t * @event relocated\n\t\t\t\t\t * @type {displayedLocation}\n\t\t\t\t\t * @memberof Rendition\n\t\t\t\t\t */\n\t\t\t\t\tthis.emit(EVENTS.RENDITION.RELOCATED, this.location);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Get the Current Location object\n\t * @return {displayedLocation | promise} location (may be a promise)\n\t */\n\tcurrentLocation(){\n\t\tvar location = this.manager.currentLocation();\n\t\tif (location && location.then && typeof location.then === \"function\") {\n\t\t\tlocation.then(function(result) {\n\t\t\t\tlet located = this.located(result);\n\t\t\t\treturn located;\n\t\t\t}.bind(this));\n\t\t} else if (location) {\n\t\t\tlet located = this.located(location);\n\t\t\treturn located;\n\t\t}\n\t}\n\n\t/**\n\t * Creates a Rendition#locationRange from location\n\t * passed by the Manager\n\t * @returns {displayedLocation}\n\t * @private\n\t */\n\tlocated(location){\n\t\tif (!location.length) {\n\t\t\treturn {};\n\t\t}\n\t\tlet start = location[0];\n\t\tlet end = location[location.length-1];\n\n\t\tlet located = {\n\t\t\tstart: {\n\t\t\t\tindex: start.index,\n\t\t\t\thref: start.href,\n\t\t\t\tcfi: start.mapping.start,\n\t\t\t\tdisplayed: {\n\t\t\t\t\tpage: start.pages[0] || 1,\n\t\t\t\t\ttotal: start.totalPages\n\t\t\t\t}\n\t\t\t},\n\t\t\tend: {\n\t\t\t\tindex: end.index,\n\t\t\t\thref: end.href,\n\t\t\t\tcfi: end.mapping.end,\n\t\t\t\tdisplayed: {\n\t\t\t\t\tpage: end.pages[end.pages.length-1] || 1,\n\t\t\t\t\ttotal: end.totalPages\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet locationStart = this.book.locations.locationFromCfi(start.mapping.start);\n\t\tlet locationEnd = this.book.locations.locationFromCfi(end.mapping.end);\n\n\t\tif (locationStart != null) {\n\t\t\tlocated.start.location = locationStart;\n\t\t\tlocated.start.percentage = this.book.locations.percentageFromLocation(locationStart);\n\t\t}\n\t\tif (locationEnd != null) {\n\t\t\tlocated.end.location = locationEnd;\n\t\t\tlocated.end.percentage = this.book.locations.percentageFromLocation(locationEnd);\n\t\t}\n\n\t\tlet pageStart = this.book.pageList.pageFromCfi(start.mapping.start);\n\t\tlet pageEnd = this.book.pageList.pageFromCfi(end.mapping.end);\n\n\t\tif (pageStart != -1) {\n\t\t\tlocated.start.page = pageStart;\n\t\t}\n\t\tif (pageEnd != -1) {\n\t\t\tlocated.end.page = pageEnd;\n\t\t}\n\n\t\tif (end.index === this.book.spine.last().index &&\n\t\t\t\tlocated.end.displayed.page >= located.end.displayed.total) {\n\t\t\tlocated.atEnd = true;\n\t\t}\n\n\t\tif (start.index === this.book.spine.first().index &&\n\t\t\t\tlocated.start.displayed.page === 1) {\n\t\t\tlocated.atStart = true;\n\t\t}\n\n\t\treturn located;\n\t}\n\n\t/**\n\t * Remove and Clean Up the Rendition\n\t */\n\tdestroy(){\n\t\t// Clear the queue\n\t\t// this.q.clear();\n\t\t// this.q = undefined;\n\n\t\tthis.manager && this.manager.destroy();\n\t\tthis.book.spine.hooks.content.deregister(this.injected['identifier']);\n\t\tthis.book.spine.hooks.content.deregister(this.injected['script']);\n\t\tthis.book.spine.hooks.content.deregister(this.injected['stylesheet']);\n\n\t\tthis.book = undefined;\n\n\t\t// this.views = null;\n\n\t\t// this.hooks.display.clear();\n\t\t// this.hooks.serialize.clear();\n\t\t// this.hooks.content.clear();\n\t\t// this.hooks.layout.clear();\n\t\t// this.hooks.render.clear();\n\t\t// this.hooks.show.clear();\n\t\t// this.hooks = {};\n\n\t\t// this.themes.destroy();\n\t\t// this.themes = undefined;\n\n\t\t// this.epubcfi = undefined;\n\n\t\t// this.starting = undefined;\n\t\t// this.started = undefined;\n\n\n\t}\n\n\t/**\n\t * Pass the events from a view's Contents\n\t * @private\n\t * @param  {Contents} view contents\n\t */\n\tpassEvents(contents){\n\t\tDOM_EVENTS.forEach((e) => {\n\t\t\tcontents.on(e, (ev) => this.triggerViewEvent(ev, contents));\n\t\t});\n\n\t\tcontents.on(EVENTS.CONTENTS.SELECTED, (e) => this.triggerSelectedEvent(e, contents));\n\t}\n\n\t/**\n\t * Emit events passed by a view\n\t * @private\n\t * @param  {event} e\n\t */\n\ttriggerViewEvent(e, contents){\n\t\tthis.emit(e.type, e, contents);\n\t}\n\n\t/**\n\t * Emit a selection event's CFI Range passed from a a view\n\t * @private\n\t * @param  {EpubCFI} cfirange\n\t */\n\ttriggerSelectedEvent(cfirange, contents){\n\t\t/**\n\t\t * Emit that a text selection has occured\n\t\t * @event selected\n\t\t * @param {EpubCFI} cfirange\n\t\t * @param {Contents} contents\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.SELECTED, cfirange, contents);\n\t}\n\n\t/**\n\t * Emit a markClicked event with the cfiRange and data from a mark\n\t * @private\n\t * @param  {EpubCFI} cfirange\n\t */\n\ttriggerMarkEvent(cfiRange, data, contents){\n\t\t/**\n\t\t * Emit that a mark was clicked\n\t\t * @event markClicked\n\t\t * @param {EpubCFI} cfirange\n\t\t * @param {object} data\n\t\t * @param {Contents} contents\n\t\t * @memberof Rendition\n\t\t */\n\t\tthis.emit(EVENTS.RENDITION.MARK_CLICKED, cfiRange, data, contents);\n\t}\n\n\t/**\n\t * Get a Range from a Visible CFI\n\t * @param  {string} cfi EpubCfi String\n\t * @param  {string} ignoreClass\n\t * @return {range}\n\t */\n\tgetRange(cfi, ignoreClass){\n\t\tvar _cfi = new EpubCFI(cfi);\n\t\tvar found = this.manager.visible().filter(function (view) {\n\t\t\tif(_cfi.spinePos === view.index) return true;\n\t\t});\n\n\t\t// Should only every return 1 item\n\t\tif (found.length) {\n\t\t\treturn found[0].contents.range(_cfi, ignoreClass);\n\t\t}\n\t}\n\n\t/**\n\t * Hook to adjust images to fit in columns\n\t * @param  {Contents} contents\n\t * @private\n\t */\n\tadjustImages(contents) {\n\n\t\tif (this._layout.name === \"pre-paginated\") {\n\t\t\treturn new Promise(function(resolve){\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\n\t\tlet computed = contents.window.getComputedStyle(contents.content, null);\n\t\tlet height = (contents.content.offsetHeight - (parseFloat(computed.paddingTop) + parseFloat(computed.paddingBottom))) * .95;\n\t\tlet verticalPadding = parseFloat(computed.verticalPadding);\n\n\t\tcontents.addStylesheetRules({\n\t\t\t\"img\" : {\n\t\t\t\t\"max-width\": (this._layout.columnWidth ? (this._layout.columnWidth - verticalPadding) + \"px\" : \"100%\") + \"!important\",\n\t\t\t\t\"max-height\": height + \"px\" + \"!important\",\n\t\t\t\t\"object-fit\": \"contain\",\n\t\t\t\t\"page-break-inside\": \"avoid\",\n\t\t\t\t\"break-inside\": \"avoid\",\n\t\t\t\t\"box-sizing\": \"border-box\"\n\t\t\t},\n\t\t\t\"svg\" : {\n\t\t\t\t\"max-width\": (this._layout.columnWidth ? (this._layout.columnWidth - verticalPadding) + \"px\" : \"100%\") + \"!important\",\n\t\t\t\t\"max-height\": height + \"px\" + \"!important\",\n\t\t\t\t\"page-break-inside\": \"avoid\",\n\t\t\t\t\"break-inside\": \"avoid\"\n\t\t\t}\n\t\t});\n\n\t\treturn new Promise(function(resolve, reject){\n\t\t\t// Wait to apply\n\t\t\tsetTimeout(function() {\n\t\t\t\tresolve();\n\t\t\t}, 1);\n\t\t});\n\t}\n\n\t/**\n\t * Get the Contents object of each rendered view\n\t * @returns {Contents[]}\n\t */\n\tgetContents () {\n\t\treturn this.manager ? this.manager.getContents() : [];\n\t}\n\n\t/**\n\t * Get the views member from the manager\n\t * @returns {Views}\n\t */\n\tviews () {\n\t\tlet views = this.manager ? this.manager.views : undefined;\n\t\treturn views || [];\n\t}\n\n\t/**\n\t * Hook to handle link clicks in rendered content\n\t * @param  {Contents} contents\n\t * @private\n\t */\n\thandleLinks(contents) {\n\t\tif (contents) {\n\t\t\tcontents.on(EVENTS.CONTENTS.LINK_CLICKED, (href) => {\n\t\t\t\tlet relative = this.book.path.relative(href);\n\t\t\t\tthis.display(relative);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Hook to handle injecting stylesheet before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectStylesheet(doc, section) {\n\t\tlet style = doc.createElement(\"link\");\n\t\tstyle.setAttribute(\"type\", \"text/css\");\n\t\tstyle.setAttribute(\"rel\", \"stylesheet\");\n\t\tstyle.setAttribute(\"href\", this.settings.stylesheet);\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(style);\n\t}\n\n\t/**\n\t * Hook to handle injecting scripts before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectScript(doc, section) {\n\t\tlet script = doc.createElement(\"script\");\n\t\tscript.setAttribute(\"type\", \"text/javascript\");\n\t\tscript.setAttribute(\"src\", this.settings.script);\n\t\tscript.textContent = \" \"; // Needed to prevent self closing tag\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(script);\n\t}\n\n\t/**\n\t * Hook to handle the document identifier before\n\t * a Section is serialized\n\t * @param  {document} doc\n\t * @param  {Section} section\n\t * @private\n\t */\n\tinjectIdentifier(doc, section) {\n\t\tlet ident = this.book.packaging.metadata.identifier;\n\t\tlet meta = doc.createElement(\"meta\");\n\t\tmeta.setAttribute(\"name\", \"dc.relation.ispartof\");\n\t\tif (ident) {\n\t\t\tmeta.setAttribute(\"content\", ident);\n\t\t}\n\t\tdoc.getElementsByTagName(\"head\")[0].appendChild(meta);\n\t}\n\n\tscale(s) {\n\t\treturn this.manager && this.manager.scale(s);\n\t}\n}\n\n//-- Enable binding events to Renderer\nEventEmitter(Rendition.prototype);\n\nexport default Rendition;\n","import {defer, isXml, parse} from \"./core\";\nimport Path from \"./path\";\n\nfunction request(url, type, withCredentials, headers) {\n\tvar supportsURL = (typeof window != \"undefined\") ? window.URL : false; // TODO: fallback for url if window isn't defined\n\tvar BLOB_RESPONSE = supportsURL ? \"blob\" : \"arraybuffer\";\n\n\tvar deferred = new defer();\n\n\tvar xhr = new XMLHttpRequest();\n\n\t//-- Check from PDF.js:\n\t//   https://github.com/mozilla/pdf.js/blob/master/web/compatibility.js\n\tvar xhrPrototype = XMLHttpRequest.prototype;\n\n\tvar header;\n\n\tif (!(\"overrideMimeType\" in xhrPrototype)) {\n\t\t// IE10 might have response, but not overrideMimeType\n\t\tObject.defineProperty(xhrPrototype, \"overrideMimeType\", {\n\t\t\tvalue: function xmlHttpRequestOverrideMimeType() {}\n\t\t});\n\t}\n\n\tif(withCredentials) {\n\t\txhr.withCredentials = true;\n\t}\n\n\txhr.onreadystatechange = handler;\n\txhr.onerror = err;\n\n\txhr.open(\"GET\", url, true);\n\n\tfor(header in headers) {\n\t\txhr.setRequestHeader(header, headers[header]);\n\t}\n\n\tif(type == \"json\") {\n\t\txhr.setRequestHeader(\"Accept\", \"application/json\");\n\t}\n\n\t// If type isn\"t set, determine it from the file extension\n\tif(!type) {\n\t\ttype = new Path(url).extension;\n\t}\n\n\tif(type == \"blob\"){\n\t\txhr.responseType = BLOB_RESPONSE;\n\t}\n\n\n\tif(isXml(type)) {\n\t\t// xhr.responseType = \"document\";\n\t\txhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n\t}\n\n\tif(type == \"xhtml\") {\n\t\t// xhr.responseType = \"document\";\n\t}\n\n\tif(type == \"html\" || type == \"htm\") {\n\t\t// xhr.responseType = \"document\";\n\t}\n\n\tif(type == \"binary\") {\n\t\txhr.responseType = \"arraybuffer\";\n\t}\n\n\txhr.send();\n\n\tfunction err(e) {\n\t\tdeferred.reject(e);\n\t}\n\n\tfunction handler() {\n\t\tif (this.readyState === XMLHttpRequest.DONE) {\n\t\t\tvar responseXML = false;\n\n\t\t\tif(this.responseType === \"\" || this.responseType === \"document\") {\n\t\t\t\tresponseXML = this.responseXML;\n\t\t\t}\n\n\t\t\tif (this.status === 200 || this.status === 0 || responseXML) { //-- Firefox is reporting 0 for blob urls\n\t\t\t\tvar r;\n\n\t\t\t\tif (!this.response && !responseXML) {\n\t\t\t\t\tdeferred.reject({\n\t\t\t\t\t\tstatus: this.status,\n\t\t\t\t\t\tmessage : \"Empty Response\",\n\t\t\t\t\t\tstack : new Error().stack\n\t\t\t\t\t});\n\t\t\t\t\treturn deferred.promise;\n\t\t\t\t}\n\n\t\t\t\tif (this.status === 403) {\n\t\t\t\t\tdeferred.reject({\n\t\t\t\t\t\tstatus: this.status,\n\t\t\t\t\t\tresponse: this.response,\n\t\t\t\t\t\tmessage : \"Forbidden\",\n\t\t\t\t\t\tstack : new Error().stack\n\t\t\t\t\t});\n\t\t\t\t\treturn deferred.promise;\n\t\t\t\t}\n\t\t\t\tif(responseXML){\n\t\t\t\t\tr = this.responseXML;\n\t\t\t\t} else\n\t\t\t\tif(isXml(type)){\n\t\t\t\t\t// xhr.overrideMimeType(\"text/xml\"); // for OPF parsing\n\t\t\t\t\t// If this.responseXML wasn't set, try to parse using a DOMParser from text\n\t\t\t\t\tr = parse(this.response, \"text/xml\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"xhtml\"){\n\t\t\t\t\tr = parse(this.response, \"application/xhtml+xml\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"html\" || type == \"htm\"){\n\t\t\t\t\tr = parse(this.response, \"text/html\");\n\t\t\t\t}else\n\t\t\t\tif(type == \"json\"){\n\t\t\t\t\tr = JSON.parse(this.response);\n\t\t\t\t}else\n\t\t\t\tif(type == \"blob\"){\n\n\t\t\t\t\tif(supportsURL) {\n\t\t\t\t\t\tr = this.response;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//-- Safari doesn't support responseType blob, so create a blob from arraybuffer\n\t\t\t\t\t\tr = new Blob([this.response]);\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tr = this.response;\n\t\t\t\t}\n\n\t\t\t\tdeferred.resolve(r);\n\t\t\t} else {\n\n\t\t\t\tdeferred.reject({\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t\tmessage : this.response,\n\t\t\t\t\tstack : new Error().stack\n\t\t\t\t});\n\n\t\t\t}\n\t\t}\n\t}\n\n\treturn deferred.promise;\n}\n\nexport default request;\n","import {defer, isXml, parse} from \"./utils/core\";\nimport request from \"./utils/request\";\nimport mime from \"../libs/mime/mime\";\nimport Path from \"./utils/path\";\n\n/**\n * Handles Unzipping a requesting files from an Epub Archive\n * @class\n */\nclass Archive {\n\n\tconstructor() {\n\t\tthis.zip = undefined;\n\t\tthis.urlCache = {};\n\n\t\tthis.checkRequirements();\n\n\t}\n\n\t/**\n\t * Checks to see if JSZip exists in global namspace,\n\t * Requires JSZip if it isn't there\n\t * @private\n\t */\n\tcheckRequirements(){\n\t\ttry {\n\t\t\tif (typeof JSZip === \"undefined\") {\n\t\t\t\tlet JSZip = require(\"jszip\");\n\t\t\t\tthis.zip = new JSZip();\n\t\t\t} else {\n\t\t\t\tthis.zip = new JSZip();\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"JSZip lib not loaded\");\n\t\t}\n\t}\n\n\t/**\n\t * Open an archive\n\t * @param  {binary} input\n\t * @param  {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n\t * @return {Promise} zipfile\n\t */\n\topen(input, isBase64){\n\t\treturn this.zip.loadAsync(input, {\"base64\": isBase64});\n\t}\n\n\t/**\n\t * Load and Open an archive\n\t * @param  {string} zipUrl\n\t * @param  {boolean} [isBase64] tells JSZip if the input data is base64 encoded\n\t * @return {Promise} zipfile\n\t */\n\topenUrl(zipUrl, isBase64){\n\t\treturn request(zipUrl, \"binary\")\n\t\t\t.then(function(data){\n\t\t\t\treturn this.zip.loadAsync(data, {\"base64\": isBase64});\n\t\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Request a url from the archive\n\t * @param  {string} url  a url to request from the archive\n\t * @param  {string} [type] specify the type of the returned result\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\trequest(url, type){\n\t\tvar deferred = new defer();\n\t\tvar response;\n\t\tvar path = new Path(url);\n\n\t\t// If type isn't set, determine it from the file extension\n\t\tif(!type) {\n\t\t\ttype = path.extension;\n\t\t}\n\n\t\tif(type == \"blob\"){\n\t\t\tresponse = this.getBlob(url);\n\t\t} else {\n\t\t\tresponse = this.getText(url);\n\t\t}\n\n\t\tif (response) {\n\t\t\tresponse.then(function (r) {\n\t\t\t\tlet result = this.handleResponse(r, type);\n\t\t\t\tdeferred.resolve(result);\n\t\t\t}.bind(this));\n\t\t} else {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in the epub: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Handle the response from request\n\t * @private\n\t * @param  {any} response\n\t * @param  {string} [type]\n\t * @return {any} the parsed result\n\t */\n\thandleResponse(response, type){\n\t\tvar r;\n\n\t\tif(type == \"json\") {\n\t\t\tr = JSON.parse(response);\n\t\t}\n\t\telse\n\t\tif(isXml(type)) {\n\t\t\tr = parse(response, \"text/xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"xhtml\") {\n\t\t\tr = parse(response, \"application/xhtml+xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"html\" || type == \"htm\") {\n\t\t\tr = parse(response, \"text/html\");\n\t\t } else {\n\t\t\t r = response;\n\t\t }\n\n\t\treturn r;\n\t}\n\n\t/**\n\t * Get a Blob from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {Blob}\n\t */\n\tgetBlob(url, mimeType){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\tmimeType = mimeType || mime.lookup(entry.name);\n\t\t\treturn entry.async(\"uint8array\").then(function(uint8array) {\n\t\t\t\treturn new Blob([uint8array], {type : mimeType});\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get Text from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [encoding]\n\t * @return {string}\n\t */\n\tgetText(url, encoding){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\treturn entry.async(\"string\").then(function(text) {\n\t\t\t\treturn text;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Get a base64 encoded result from Archive by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string} base64 encoded\n\t */\n\tgetBase64(url, mimeType){\n\t\tvar decodededUrl = window.decodeURIComponent(url.substr(1)); // Remove first slash\n\t\tvar entry = this.zip.file(decodededUrl);\n\n\t\tif(entry) {\n\t\t\tmimeType = mimeType || mime.lookup(entry.name);\n\t\t\treturn entry.async(\"base64\").then(function(data) {\n\t\t\t\treturn \"data:\" + mimeType + \";base64,\" + data;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Create a Url from an unarchived item\n\t * @param  {string} url\n\t * @param  {object} [options.base64] use base64 encoding or blob url\n\t * @return {Promise} url promise with Url string\n\t */\n\tcreateUrl(url, options){\n\t\tvar deferred = new defer();\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar tempUrl;\n\t\tvar response;\n\t\tvar useBase64 = options && options.base64;\n\n\t\tif(url in this.urlCache) {\n\t\t\tdeferred.resolve(this.urlCache[url]);\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tif (useBase64) {\n\t\t\tresponse = this.getBase64(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(tempUrl) {\n\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tresponse = this.getBlob(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(blob) {\n\n\t\t\t\t\ttempUrl = _URL.createObjectURL(blob);\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\t\t}\n\n\n\t\tif (!response) {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in the epub: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Revoke Temp Url for a achive item\n\t * @param  {string} url url of the item in the archive\n\t */\n\trevokeUrl(url){\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar fromCache = this.urlCache[url];\n\t\tif(fromCache) _URL.revokeObjectURL(fromCache);\n\t}\n\n\tdestroy() {\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tfor (let fromCache in this.urlCache) {\n\t\t\t_URL.revokeObjectURL(fromCache);\n\t\t}\n\t\tthis.zip = undefined;\n\t\tthis.urlCache = {};\n\t}\n}\n\nexport default Archive;\n","import {defer, isXml, parse} from \"./utils/core\";\nimport httpRequest from \"./utils/request\";\nimport mime from \"../libs/mime/mime\";\nimport Path from \"./utils/path\";\nimport EventEmitter from \"event-emitter\";\n\n/**\n * Handles saving and requesting files from local storage\n * @class\n * @param {string} name This should be the name of the application for modals\n * @param {function} [requester]\n * @param {function} [resolver]\n */\nclass Store {\n\n\tconstructor(name, requester, resolver) {\n\t\tthis.urlCache = {};\n\n\t\tthis.storage = undefined;\n\n\t\tthis.name = name;\n\t\tthis.requester = requester || httpRequest;\n\t\tthis.resolver = resolver;\n\n\t\tthis.online = true;\n\n\t\tthis.checkRequirements();\n\n\t\tthis.addListeners();\n\t}\n\n\t/**\n\t * Checks to see if localForage exists in global namspace,\n\t * Requires localForage if it isn't there\n\t * @private\n\t */\n\tcheckRequirements(){\n\t\ttry {\n\t\t\tlet store;\n\t\t\tif (typeof localforage === \"undefined\") {\n\t\t\t\tstore = require(\"localforage\");\n\t\t\t} else {\n\t\t\t\tstore = localforage;\n\t\t\t}\n\t\t\tthis.storage = store.createInstance({\n\t\t\t\t\tname: this.name\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tthrow new Error(\"localForage lib not loaded\");\n\t\t}\n\t}\n\n\t/**\n\t * Add online and offline event listeners\n\t * @private\n\t */\n\taddListeners() {\n\t\tthis._status = this.status.bind(this);\n\t\twindow.addEventListener('online',  this._status);\n\t  window.addEventListener('offline', this._status);\n\t}\n\n\t/**\n\t * Remove online and offline event listeners\n\t * @private\n\t */\n\tremoveListeners() {\n\t\twindow.removeEventListener('online',  this._status);\n\t  window.removeEventListener('offline', this._status);\n\t\tthis._status = undefined;\n\t}\n\n\t/**\n\t * Update the online / offline status\n\t * @private\n\t */\n\tstatus(event) {\n\t\tlet online = navigator.onLine;\n\t\tthis.online = online;\n\t\tif (online) {\n\t\t\tthis.emit(\"online\", this);\n\t\t} else {\n\t\t\tthis.emit(\"offline\", this);\n\t\t}\n\t}\n\n\t/**\n\t * Add all of a book resources to the store\n\t * @param  {Resources} resources  book resources\n\t * @param  {boolean} [force] force resaving resources\n\t * @return {Promise<object>} store objects\n\t */\n\tadd(resources, force) {\n\t\tlet mapped = resources.resources.map((item) => {\n\t\t\tlet { href } = item;\n\t\t\tlet url = this.resolver(href);\n\t\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\t\treturn this.storage.getItem(encodedUrl).then((item) => {\n\t\t\t\tif (!item || force) {\n\t\t\t\t\treturn this.requester(url, \"binary\")\n\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\treturn this.storage.setItem(encodedUrl, data);\n\t\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t});\n\n\t\t});\n\t\treturn Promise.all(mapped);\n\t}\n\n\t/**\n\t * Put binary data from a url to storage\n\t * @param  {string} url  a url to request from storage\n\t * @param  {boolean} [withCredentials]\n\t * @param  {object} [headers]\n\t * @return {Promise<Blob>}\n\t */\n\tput(url, withCredentials, headers) {\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then((result) => {\n\t\t\tif (!result) {\n\t\t\t\treturn this.requester(url, \"binary\", withCredentials, headers).then((data) => {\n\t\t\t\t\treturn this.storage.setItem(encodedUrl, data);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t/**\n\t * Request a url\n\t * @param  {string} url  a url to request from storage\n\t * @param  {string} [type] specify the type of the returned result\n\t * @param  {boolean} [withCredentials]\n\t * @param  {object} [headers]\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\trequest(url, type, withCredentials, headers){\n\t\tif (this.online) {\n\t\t\t// From network\n\t\t\treturn this.requester(url, type, withCredentials, headers).then((data) => {\n\t\t\t\t// save to store if not present\n\t\t\t\tthis.put(url);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t} else {\n\t\t\t// From store\n\t\t\treturn this.retrieve(url, type);\n\t\t}\n\n\t}\n\n\t/**\n\t * Request a url from storage\n\t * @param  {string} url  a url to request from storage\n\t * @param  {string} [type] specify the type of the returned result\n\t * @return {Promise<Blob | string | JSON | Document | XMLDocument>}\n\t */\n\tretrieve(url, type) {\n\t\tvar deferred = new defer();\n\t\tvar response;\n\t\tvar path = new Path(url);\n\n\t\t// If type isn't set, determine it from the file extension\n\t\tif(!type) {\n\t\t\ttype = path.extension;\n\t\t}\n\n\t\tif(type == \"blob\"){\n\t\t\tresponse = this.getBlob(url);\n\t\t} else {\n\t\t\tresponse = this.getText(url);\n\t\t}\n\n\n\t\treturn response.then((r) => {\n\t\t\tvar deferred = new defer();\n\t\t\tvar result;\n\t\t\tif (r) {\n\t\t\t\tresult = this.handleResponse(r, type);\n\t\t\t\tdeferred.resolve(result);\n\t\t\t} else {\n\t\t\t\tdeferred.reject({\n\t\t\t\t\tmessage : \"File not found in storage: \" + url,\n\t\t\t\t\tstack : new Error().stack\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Handle the response from request\n\t * @private\n\t * @param  {any} response\n\t * @param  {string} [type]\n\t * @return {any} the parsed result\n\t */\n\thandleResponse(response, type){\n\t\tvar r;\n\n\t\tif(type == \"json\") {\n\t\t\tr = JSON.parse(response);\n\t\t}\n\t\telse\n\t\tif(isXml(type)) {\n\t\t\tr = parse(response, \"text/xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"xhtml\") {\n\t\t\tr = parse(response, \"application/xhtml+xml\");\n\t\t}\n\t\telse\n\t\tif(type == \"html\" || type == \"htm\") {\n\t\t\tr = parse(response, \"text/html\");\n\t\t } else {\n\t\t\t r = response;\n\t\t }\n\n\t\treturn r;\n\t}\n\n\t/**\n\t * Get a Blob from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {Blob}\n\t */\n\tgetBlob(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then(function(uint8array) {\n\t\t\tif(!uint8array) return;\n\n\t\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\t\treturn new Blob([uint8array], {type : mimeType});\n\t\t});\n\n\t}\n\n\t/**\n\t * Get Text from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string}\n\t */\n\tgetText(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then(function(uint8array) {\n\t\t\tvar deferred = new defer();\n\t\t\tvar reader = new FileReader();\n\t\t\tvar blob;\n\n\t\t\tif(!uint8array) return;\n\n\t\t\tblob = new Blob([uint8array], {type : mimeType});\n\n\t\t\treader.addEventListener(\"loadend\", () => {\n\t\t\t\tdeferred.resolve(reader.result);\n\t\t\t});\n\n\t\t\treader.readAsText(blob, mimeType);\n\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Get a base64 encoded result from Storage by Url\n\t * @param  {string} url\n\t * @param  {string} [mimeType]\n\t * @return {string} base64 encoded\n\t */\n\tgetBase64(url, mimeType){\n\t\tlet encodedUrl = window.encodeURIComponent(url);\n\n\t\tmimeType = mimeType || mime.lookup(url);\n\n\t\treturn this.storage.getItem(encodedUrl).then((uint8array) => {\n\t\t\tvar deferred = new defer();\n\t\t\tvar reader = new FileReader();\n\t\t\tvar blob;\n\n\t\t\tif(!uint8array) return;\n\n\t\t\tblob = new Blob([uint8array], {type : mimeType});\n\n\t\t\treader.addEventListener(\"loadend\", () => {\n\t\t\t\tdeferred.resolve(reader.result);\n\t\t\t});\n\t\t\treader.readAsDataURL(blob, mimeType);\n\n\t\t\treturn deferred.promise;\n\t\t});\n\t}\n\n\t/**\n\t * Create a Url from a stored item\n\t * @param  {string} url\n\t * @param  {object} [options.base64] use base64 encoding or blob url\n\t * @return {Promise} url promise with Url string\n\t */\n\tcreateUrl(url, options){\n\t\tvar deferred = new defer();\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar tempUrl;\n\t\tvar response;\n\t\tvar useBase64 = options && options.base64;\n\n\t\tif(url in this.urlCache) {\n\t\t\tdeferred.resolve(this.urlCache[url]);\n\t\t\treturn deferred.promise;\n\t\t}\n\n\t\tif (useBase64) {\n\t\t\tresponse = this.getBase64(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(tempUrl) {\n\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tresponse = this.getBlob(url);\n\n\t\t\tif (response) {\n\t\t\t\tresponse.then(function(blob) {\n\n\t\t\t\t\ttempUrl = _URL.createObjectURL(blob);\n\t\t\t\t\tthis.urlCache[url] = tempUrl;\n\t\t\t\t\tdeferred.resolve(tempUrl);\n\n\t\t\t\t}.bind(this));\n\n\t\t\t}\n\t\t}\n\n\n\t\tif (!response) {\n\t\t\tdeferred.reject({\n\t\t\t\tmessage : \"File not found in storage: \" + url,\n\t\t\t\tstack : new Error().stack\n\t\t\t});\n\t\t}\n\n\t\treturn deferred.promise;\n\t}\n\n\t/**\n\t * Revoke Temp Url for a achive item\n\t * @param  {string} url url of the item in the store\n\t */\n\trevokeUrl(url){\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tvar fromCache = this.urlCache[url];\n\t\tif(fromCache) _URL.revokeObjectURL(fromCache);\n\t}\n\n\tdestroy() {\n\t\tvar _URL = window.URL || window.webkitURL || window.mozURL;\n\t\tfor (let fromCache in this.urlCache) {\n\t\t\t_URL.revokeObjectURL(fromCache);\n\t\t}\n\t\tthis.urlCache = {};\n\t\tthis.removeListeners();\n\t}\n}\n\nEventEmitter(Store.prototype);\n\nexport default Store;\n","import EventEmitter from \"event-emitter\";\nimport {extend, defer} from \"./utils/core\";\nimport Url from \"./utils/url\";\nimport Path from \"./utils/path\";\nimport Spine from \"./spine\";\nimport Locations from \"./locations\";\nimport Container from \"./container\";\nimport Packaging from \"./packaging\";\nimport Navigation from \"./navigation\";\nimport Resources from \"./resources\";\nimport PageList from \"./pagelist\";\nimport Rendition from \"./rendition\";\nimport Archive from \"./archive\";\nimport request from \"./utils/request\";\nimport EpubCFI from \"./epubcfi\";\nimport Store from \"./store\";\nimport { EPUBJS_VERSION, EVENTS } from \"./utils/constants\";\n\nconst CONTAINER_PATH = \"META-INF/container.xml\";\n\nconst INPUT_TYPE = {\n\tBINARY: \"binary\",\n\tBASE64: \"base64\",\n\tEPUB: \"epub\",\n\tOPF: \"opf\",\n\tMANIFEST: \"json\",\n\tDIRECTORY: \"directory\"\n};\n\n/**\n * An Epub representation with methods for the loading, parsing and manipulation\n * of its contents.\n * @class\n * @param {string} [url]\n * @param {object} [options]\n * @param {method} [options.requestMethod] a request function to use instead of the default\n * @param {boolean} [options.requestCredentials=undefined] send the xhr request withCredentials\n * @param {object} [options.requestHeaders=undefined] send the xhr request headers\n * @param {string} [options.encoding=binary] optional to pass 'binary' or base64' for archived Epubs\n * @param {string} [options.replacements=none] use base64, blobUrl, or none for replacing assets in archived Epubs\n * @param {method} [options.canonical] optional function to determine canonical urls for a path\n * @param {string} [options.openAs] optional string to determine the input type\n * @param {string} [options.store=false] cache the contents in local storage, value should be the name of the reader\n * @returns {Book}\n * @example new Book(\"/path/to/book.epub\", {})\n * @example new Book({ replacements: \"blobUrl\" })\n */\nclass Book {\n\tconstructor(url, options) {\n\t\t// Allow passing just options to the Book\n\t\tif (typeof(options) === \"undefined\" &&\n\t\t\t  typeof(url) !== \"string\" &&\n\t\t    url instanceof Blob === false) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\tthis.settings = extend(this.settings || {}, {\n\t\t\trequestMethod: undefined,\n\t\t\trequestCredentials: undefined,\n\t\t\trequestHeaders: undefined,\n\t\t\tencoding: undefined,\n\t\t\treplacements: undefined,\n\t\t\tcanonical: undefined,\n\t\t\topenAs: undefined,\n\t\t\tstore: undefined\n\t\t});\n\n\t\textend(this.settings, options);\n\n\n\t\t// Promises\n\t\tthis.opening = new defer();\n\t\t/**\n\t\t * @member {promise} opened returns after the book is loaded\n\t\t * @memberof Book\n\t\t */\n\t\tthis.opened = this.opening.promise;\n\t\tthis.isOpen = false;\n\n\t\tthis.loading = {\n\t\t\tmanifest: new defer(),\n\t\t\tspine: new defer(),\n\t\t\tmetadata: new defer(),\n\t\t\tcover: new defer(),\n\t\t\tnavigation: new defer(),\n\t\t\tpageList: new defer(),\n\t\t\tresources: new defer()\n\t\t};\n\n\t\tthis.loaded = {\n\t\t\tmanifest: this.loading.manifest.promise,\n\t\t\tspine: this.loading.spine.promise,\n\t\t\tmetadata: this.loading.metadata.promise,\n\t\t\tcover: this.loading.cover.promise,\n\t\t\tnavigation: this.loading.navigation.promise,\n\t\t\tpageList: this.loading.pageList.promise,\n\t\t\tresources: this.loading.resources.promise\n\t\t};\n\n\t\t/**\n\t\t * @member {promise} ready returns after the book is loaded and parsed\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.ready = Promise.all([\n\t\t\tthis.loaded.manifest,\n\t\t\tthis.loaded.spine,\n\t\t\tthis.loaded.metadata,\n\t\t\tthis.loaded.cover,\n\t\t\tthis.loaded.navigation,\n\t\t\tthis.loaded.resources\n\t\t]);\n\n\n\t\t// Queue for methods used before opening\n\t\tthis.isRendered = false;\n\t\t// this._q = queue(this);\n\n\t\t/**\n\t\t * @member {method} request\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.request = this.settings.requestMethod || request;\n\n\t\t/**\n\t\t * @member {Spine} spine\n\t\t * @memberof Book\n\t\t */\n\t\tthis.spine = new Spine();\n\n\t\t/**\n\t\t * @member {Locations} locations\n\t\t * @memberof Book\n\t\t */\n\t\tthis.locations = new Locations(this.spine, this.load.bind(this));\n\n\t\t/**\n\t\t * @member {Navigation} navigation\n\t\t * @memberof Book\n\t\t */\n\t\tthis.navigation = undefined;\n\n\t\t/**\n\t\t * @member {PageList} pagelist\n\t\t * @memberof Book\n\t\t */\n\t\tthis.pageList = undefined;\n\n\t\t/**\n\t\t * @member {Url} url\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.url = undefined;\n\n\t\t/**\n\t\t * @member {Path} path\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.path = undefined;\n\n\t\t/**\n\t\t * @member {boolean} archived\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.archived = false;\n\n\t\t/**\n\t\t * @member {Archive} archive\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.archive = undefined;\n\n\t\t/**\n\t\t * @member {Store} storage\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.storage = undefined;\n\n\t\t/**\n\t\t * @member {Resources} resources\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.resources = undefined;\n\n\t\t/**\n\t\t * @member {Rendition} rendition\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.rendition = undefined;\n\n\t\t/**\n\t\t * @member {Container} container\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.container = undefined;\n\n\t\t/**\n\t\t * @member {Packaging} packaging\n\t\t * @memberof Book\n\t\t * @private\n\t\t */\n\t\tthis.packaging = undefined;\n\n\t\t// this.toc = undefined;\n\t\tif (this.settings.store) {\n\t\t\tthis.store(this.settings.store);\n\t\t}\n\n\t\tif(url) {\n\t\t\tthis.open(url, this.settings.openAs).catch((error) => {\n\t\t\t\tvar err = new Error(\"Cannot load book at \"+ url );\n\t\t\t\tthis.emit(EVENTS.BOOK.OPEN_FAILED, err);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Open a epub or url\n\t * @param {string | ArrayBuffer} input Url, Path or ArrayBuffer\n\t * @param {string} [what=\"binary\", \"base64\", \"epub\", \"opf\", \"json\", \"directory\"] force opening as a certain type\n\t * @returns {Promise} of when the book has been loaded\n\t * @example book.open(\"/path/to/book.epub\")\n\t */\n\topen(input, what) {\n\t\tvar opening;\n\t\tvar type = what || this.determineType(input);\n\n\t\tif (type === INPUT_TYPE.BINARY) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.openEpub(input);\n\t\t} else if (type === INPUT_TYPE.BASE64) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.openEpub(input, type);\n\t\t} else if (type === INPUT_TYPE.EPUB) {\n\t\t\tthis.archived = true;\n\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\topening = this.request(input, \"binary\", this.settings.requestCredentials)\n\t\t\t\t.then(this.openEpub.bind(this));\n\t\t} else if(type == INPUT_TYPE.OPF) {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openPackaging(this.url.Path.toString());\n\t\t} else if(type == INPUT_TYPE.MANIFEST) {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openManifest(this.url.Path.toString());\n\t\t} else {\n\t\t\tthis.url = new Url(input);\n\t\t\topening = this.openContainer(CONTAINER_PATH)\n\t\t\t\t.then(this.openPackaging.bind(this));\n\t\t}\n\n\t\treturn opening;\n\t}\n\n\t/**\n\t * Open an archived epub\n\t * @private\n\t * @param  {binary} data\n\t * @param  {string} [encoding]\n\t * @return {Promise}\n\t */\n\topenEpub(data, encoding) {\n\t\treturn this.unarchive(data, encoding || this.settings.encoding)\n\t\t\t.then(() => {\n\t\t\t\treturn this.openContainer(CONTAINER_PATH);\n\t\t\t})\n\t\t\t.then((packagePath) => {\n\t\t\t\treturn this.openPackaging(packagePath);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the epub container\n\t * @private\n\t * @param  {string} url\n\t * @return {string} packagePath\n\t */\n\topenContainer(url) {\n\t\treturn this.load(url)\n\t\t\t.then((xml) => {\n\t\t\t\tthis.container = new Container(xml);\n\t\t\t\treturn this.resolve(this.settings.packagePath || this.container.packagePath);\n\t\t\t\t// return this.resolve(this.container.packagePath);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the Open Packaging Format Xml\n\t * @private\n\t * @param  {string} url\n\t * @return {Promise}\n\t */\n\topenPackaging(url) {\n\t\tthis.path = new Path(url);\n\t\treturn this.load(url)\n\t\t\t.then((xml) => {\n\t\t\t\tthis.packaging = new Packaging(xml);\n\t\t\t\treturn this.unpack(this.packaging);\n\t\t\t});\n\t}\n\n\t/**\n\t * Open the manifest JSON\n\t * @private\n\t * @param  {string} url\n\t * @return {Promise}\n\t */\n\topenManifest(url) {\n\t\tthis.path = new Path(url);\n\t\treturn this.load(url)\n\t\t\t.then((json) => {\n\t\t\t\tthis.packaging = new Packaging();\n\t\t\t\tthis.packaging.load(json);\n\t\t\t\treturn this.unpack(this.packaging);\n\t\t\t});\n\t}\n\n\t/**\n\t * Load a resource from the Book\n\t * @param  {string} path path to the resource to load\n\t * @return {Promise}     returns a promise with the requested resource\n\t */\n\tload(path) {\n\t\tvar resolved = this.resolve(path);\n\t\tif(this.archived) {\n\t\t\treturn this.archive.request(resolved);\n\t\t} else {\n\t\t\treturn this.request(resolved, null, this.settings.requestCredentials, this.settings.requestHeaders);\n\t\t}\n\t}\n\n\t/**\n\t * Resolve a path to it's absolute position in the Book\n\t * @param  {string} path\n\t * @param  {boolean} [absolute] force resolving the full URL\n\t * @return {string}          the resolved path string\n\t */\n\tresolve(path, absolute) {\n\t\tif (!path) {\n\t\t\treturn;\n\t\t}\n\t\tvar resolved = path;\n\t\tvar isAbsolute = (path.indexOf(\"://\") > -1);\n\n\t\tif (isAbsolute) {\n\t\t\treturn path;\n\t\t}\n\n\t\tif (this.path) {\n\t\t\tresolved = this.path.resolve(path);\n\t\t}\n\n\t\tif(absolute != false && this.url) {\n\t\t\tresolved = this.url.resolve(resolved);\n\t\t}\n\n\t\treturn resolved;\n\t}\n\n\t/**\n\t * Get a canonical link to a path\n\t * @param  {string} path\n\t * @return {string} the canonical path string\n\t */\n\tcanonical(path) {\n\t\tvar url = path;\n\n\t\tif (!path) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (this.settings.canonical) {\n\t\t\turl = this.settings.canonical(path);\n\t\t} else {\n\t\t\turl = this.resolve(path, true);\n\t\t}\n\n\t\treturn url;\n\t}\n\n\t/**\n\t * Determine the type of they input passed to open\n\t * @private\n\t * @param  {string} input\n\t * @return {string}  binary | directory | epub | opf\n\t */\n\tdetermineType(input) {\n\t\tvar url;\n\t\tvar path;\n\t\tvar extension;\n\n\t\tif (this.settings.encoding === \"base64\") {\n\t\t\treturn INPUT_TYPE.BASE64;\n\t\t}\n\n\t\tif(typeof(input) != \"string\") {\n\t\t\treturn INPUT_TYPE.BINARY;\n\t\t}\n\n\t\turl = new Url(input);\n\t\tpath = url.path();\n\t\textension = path.extension;\n\n\t\tif (!extension) {\n\t\t\treturn INPUT_TYPE.DIRECTORY;\n\t\t}\n\n\t\tif(extension === \"epub\"){\n\t\t\treturn INPUT_TYPE.EPUB;\n\t\t}\n\n\t\tif(extension === \"opf\"){\n\t\t\treturn INPUT_TYPE.OPF;\n\t\t}\n\n\t\tif(extension === \"json\"){\n\t\t\treturn INPUT_TYPE.MANIFEST;\n\t\t}\n\t}\n\n\n\t/**\n\t * unpack the contents of the Books packaging\n\t * @private\n\t * @param {Packaging} packaging object\n\t */\n\tunpack(packaging) {\n\t\tthis.package = packaging; //TODO: deprecated this\n\n\t\tthis.spine.unpack(this.packaging, this.resolve.bind(this), this.canonical.bind(this));\n\n\t\tthis.resources = new Resources(this.packaging.manifest, {\n\t\t\tarchive: this.archive,\n\t\t\tresolver: this.resolve.bind(this),\n\t\t\trequest: this.request.bind(this),\n\t\t\treplacements: this.settings.replacements || (this.archived ? \"blobUrl\" : \"base64\")\n\t\t});\n\n\t\tthis.loadNavigation(this.packaging).then(() => {\n\t\t\t// this.toc = this.navigation.toc;\n\t\t\tthis.loading.navigation.resolve(this.navigation);\n\t\t});\n\n\t\tif (this.packaging.coverPath) {\n\t\t\tthis.cover = this.resolve(this.packaging.coverPath);\n\t\t}\n\t\t// Resolve promises\n\t\tthis.loading.manifest.resolve(this.packaging.manifest);\n\t\tthis.loading.metadata.resolve(this.packaging.metadata);\n\t\tthis.loading.spine.resolve(this.spine);\n\t\tthis.loading.cover.resolve(this.cover);\n\t\tthis.loading.resources.resolve(this.resources);\n\t\tthis.loading.pageList.resolve(this.pageList);\n\n\t\tthis.isOpen = true;\n\n\t\tif(this.archived || this.settings.replacements && this.settings.replacements != \"none\") {\n\t\t\tthis.replacements().then(() => {\n\t\t\t\tthis.opening.resolve(this);\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(err);\n\t\t\t});\n\t\t} else {\n\t\t\t// Resolve book opened promise\n\t\t\tthis.opening.resolve(this);\n\t\t}\n\n\t}\n\n\t/**\n\t * Load Navigation and PageList from package\n\t * @private\n\t * @param {Packaging} packaging\n\t */\n\tloadNavigation(packaging) {\n\t\tlet navPath = packaging.navPath || packaging.ncxPath;\n\t\tlet toc = packaging.toc;\n\n\t\t// From json manifest\n\t\tif (toc) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.navigation = new Navigation(toc);\n\n\t\t\t\tif (packaging.pageList) {\n\t\t\t\t\tthis.pageList = new PageList(packaging.pageList); // TODO: handle page lists from Manifest\n\t\t\t\t}\n\n\t\t\t\tresolve(this.navigation);\n\t\t\t});\n\t\t}\n\n\t\tif (!navPath) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.navigation = new Navigation();\n\t\t\t\tthis.pageList = new PageList();\n\n\t\t\t\tresolve(this.navigation);\n\t\t\t});\n\t\t}\n\n\t\tnavPath = new Path(this.resolve(navPath));\n\t\treturn this.load(navPath.path, \"xml\")\n\t\t\t.then((xml) => {\n\t\t\t\tthis.navigation = new Navigation(xml, navPath, this.canonical.bind(this));\n\t\t\t\tthis.pageList = new PageList(xml, navPath, this.canonical.bind(this));\n\t\t\t\treturn this.navigation;\n\t\t\t});\n\t}\n\n\t/**\n\t * Gets a Section of the Book from the Spine\n\t * Alias for `book.spine.get`\n\t * @param {string} target\n\t * @return {Section}\n\t */\n\tsection(target) {\n\t\treturn this.spine.get(target);\n\t}\n\n\t/**\n\t * Sugar to render a book to an element\n\t * @param  {element | string} element element or string to add a rendition to\n\t * @param  {object} [options]\n\t * @return {Rendition}\n\t */\n\trenderTo(element, options) {\n\t\tthis.rendition = new Rendition(this, options);\n\t\tthis.rendition.attachTo(element);\n\n\t\treturn this.rendition;\n\t}\n\n\t/**\n\t * Set if request should use withCredentials\n\t * @param {boolean} credentials\n\t */\n\tsetRequestCredentials(credentials) {\n\t\tthis.settings.requestCredentials = credentials;\n\t}\n\n\t/**\n\t * Set headers request should use\n\t * @param {object} headers\n\t */\n\tsetRequestHeaders(headers) {\n\t\tthis.settings.requestHeaders = headers;\n\t}\n\n\t/**\n\t * Unarchive a zipped epub\n\t * @private\n\t * @param  {binary} input epub data\n\t * @param  {string} [encoding]\n\t * @return {Archive}\n\t */\n\tunarchive(input, encoding) {\n\t\tthis.archive = new Archive();\n\t\treturn this.archive.open(input, encoding);\n\t}\n\n\t/**\n\t * Store the epubs contents\n\t * @private\n\t * @param  {binary} input epub data\n\t * @param  {string} [encoding]\n\t * @return {Store}\n\t */\n\tstore(name) {\n\t\t// Use \"blobUrl\" or \"base64\" for replacements\n\t\tlet replacementsSetting = this.settings.replacements && this.settings.replacements !== \"none\";\n\t\t// Save original url\n\t\tlet originalUrl = this.url;\n\t\t// Save original request method\n\t\tlet requester = this.settings.requestMethod || request.bind(this);\n\t\t// Create new Store\n\t\tthis.storage = new Store(name, requester, this.resolve.bind(this));\n\t\t// Replace request method to go through store\n\t\tthis.request = this.storage.request.bind(this.storage);\n\n\t\tthis.opened.then(() => {\n\t\t\tif (this.archived) {\n\t\t\t\tthis.storage.requester = this.archive.request.bind(this.archive);\n\t\t\t}\n\t\t\t// Substitute hook\n\t\t\tlet substituteResources = (output, section) => {\n\t\t\t\tsection.output = this.resources.substitute(output, section.url);\n\t\t\t};\n\n\t\t\t// Set to use replacements\n\t\t\tthis.resources.settings.replacements = replacementsSetting || \"blobUrl\";\n\t\t\t// Create replacement urls\n\t\t\tthis.resources.replacements().\n\t\t\t\tthen(() => {\n\t\t\t\t\treturn this.resources.replaceCss();\n\t\t\t\t});\n\n\t\t\tthis.storage.on(\"offline\", () => {\n\t\t\t\t// Remove url to use relative resolving for hrefs\n\t\t\t\tthis.url = new Url(\"/\", \"\");\n\t\t\t\t// Add hook to replace resources in contents\n\t\t\t\tthis.spine.hooks.serialize.register(substituteResources);\n\t\t\t});\n\n\t\t\tthis.storage.on(\"online\", () => {\n\t\t\t\t// Restore original url\n\t\t\t\tthis.url = originalUrl;\n\t\t\t\t// Remove hook\n\t\t\t\tthis.spine.hooks.serialize.deregister(substituteResources);\n\t\t\t});\n\n\t\t});\n\n\t\treturn this.storage;\n\t}\n\n\t/**\n\t * Get the cover url\n\t * @return {string} coverUrl\n\t */\n\tcoverUrl() {\n\t\tvar retrieved = this.loaded.cover.\n\t\t\tthen((url) => {\n\t\t\t\tif(this.archived) {\n\t\t\t\t\t// return this.archive.createUrl(this.cover);\n\t\t\t\t\treturn this.resources.get(this.cover);\n\t\t\t\t}else{\n\t\t\t\t\treturn this.cover;\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn retrieved;\n\t}\n\n\t/**\n\t * Load replacement urls\n\t * @private\n\t * @return {Promise} completed loading urls\n\t */\n\treplacements() {\n\t\tthis.spine.hooks.serialize.register((output, section) => {\n\t\t\tsection.output = this.resources.substitute(output, section.url);\n\t\t});\n\n\t\treturn this.resources.replacements().\n\t\t\tthen(() => {\n\t\t\t\treturn this.resources.replaceCss();\n\t\t\t});\n\t}\n\n\t/**\n\t * Find a DOM Range for a given CFI Range\n\t * @param  {EpubCFI} cfiRange a epub cfi range\n\t * @return {Range}\n\t */\n\tgetRange(cfiRange) {\n\t\tvar cfi = new EpubCFI(cfiRange);\n\t\tvar item = this.spine.get(cfi.spinePos);\n\t\tvar _request = this.load.bind(this);\n\t\tif (!item) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\treject(\"CFI could not be found\");\n\t\t\t});\n\t\t}\n\t\treturn item.load(_request).then(function (contents) {\n\t\t\tvar range = cfi.toRange(item.document);\n\t\t\treturn range;\n\t\t});\n\t}\n\n\t/**\n\t * Generates the Book Key using the identifer in the manifest or other string provided\n\t * @param  {string} [identifier] to use instead of metadata identifier\n\t * @return {string} key\n\t */\n\tkey(identifier) {\n\t\tvar ident = identifier || this.packaging.metadata.identifier || this.url.filename;\n\t\treturn `epubjs:${EPUBJS_VERSION}:${ident}`;\n\t}\n\n\t/**\n\t * Destroy the Book and all associated objects\n\t */\n\tdestroy() {\n\t\tthis.opened = undefined;\n\t\tthis.loading = undefined;\n\t\tthis.loaded = undefined;\n\t\tthis.ready = undefined;\n\n\t\tthis.isOpen = false;\n\t\tthis.isRendered = false;\n\n\t\tthis.spine && this.spine.destroy();\n\t\tthis.locations && this.locations.destroy();\n\t\tthis.pageList && this.pageList.destroy();\n\t\tthis.archive && this.archive.destroy();\n\t\tthis.resources && this.resources.destroy();\n\t\tthis.container && this.container.destroy();\n\t\tthis.packaging && this.packaging.destroy();\n\t\tthis.rendition && this.rendition.destroy();\n\n\t\tthis.spine = undefined;\n\t\tthis.locations = undefined;\n\t\tthis.pageList = undefined;\n\t\tthis.archive = undefined;\n\t\tthis.resources = undefined;\n\t\tthis.container = undefined;\n\t\tthis.packaging = undefined;\n\t\tthis.rendition = undefined;\n\n\t\tthis.navigation = undefined;\n\t\tthis.url = undefined;\n\t\tthis.path = undefined;\n\t\tthis.archived = false;\n\t}\n\n}\n\n//-- Enable binding events to book\nEventEmitter(Book.prototype);\n\nexport default Book;\n","/* From https://github.com/webcomponents/URL/blob/master/url.js\n * Added UMD, file link handling */\n\n/* Any copyright is dedicated to the Public Domain.\n * http://creativecommons.org/publicdomain/zero/1.0/ */\n'use strict';\n(function (root, factory) {\n    // Fix for this being undefined in modules\n    if (!root) {\n      root = window || global;\n    }\n    if (typeof module === 'object' && module.exports) {\n        // Node\n        module.exports = factory(root);\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define([], factory);\n    } else {\n        // Browser globals (root is window)\n        root.URL = factory(root);\n  }\n}(this, function (scope) {\n  // feature detect for URL constructor\n  var hasWorkingUrl = false;\n  if (!scope.forceJURL) {\n    try {\n      var u = new URL('b', 'http://a');\n      u.pathname = 'c%20d';\n      hasWorkingUrl = u.href === 'http://a/c%20d';\n    } catch(e) {}\n  }\n\n  if (hasWorkingUrl)\n    return scope.URL;\n\n  var relative = Object.create(null);\n  relative['ftp'] = 21;\n  relative['file'] = 0;\n  relative['gopher'] = 70;\n  relative['http'] = 80;\n  relative['https'] = 443;\n  relative['ws'] = 80;\n  relative['wss'] = 443;\n\n  var relativePathDotMapping = Object.create(null);\n  relativePathDotMapping['%2e'] = '.';\n  relativePathDotMapping['.%2e'] = '..';\n  relativePathDotMapping['%2e.'] = '..';\n  relativePathDotMapping['%2e%2e'] = '..';\n\n  function isRelativeScheme(scheme) {\n    return relative[scheme] !== undefined;\n  }\n\n  function invalid() {\n    clear.call(this);\n    this._isInvalid = true;\n  }\n\n  function IDNAToASCII(h) {\n    if ('' == h) {\n      invalid.call(this)\n    }\n    // XXX\n    return h.toLowerCase()\n  }\n\n  function percentEscape(c) {\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ? `\n       [0x22, 0x23, 0x3C, 0x3E, 0x3F, 0x60].indexOf(unicode) == -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  function percentEscapeQuery(c) {\n    // XXX This actually needs to encode c using encoding and then\n    // convert the bytes one-by-one.\n\n    var unicode = c.charCodeAt(0);\n    if (unicode > 0x20 &&\n       unicode < 0x7F &&\n       // \" # < > ` (do not escape '?')\n       [0x22, 0x23, 0x3C, 0x3E, 0x60].indexOf(unicode) == -1\n      ) {\n      return c;\n    }\n    return encodeURIComponent(c);\n  }\n\n  var EOF = undefined,\n      ALPHA = /[a-zA-Z]/,\n      ALPHANUMERIC = /[a-zA-Z0-9\\+\\-\\.]/;\n\n  function parse(input, stateOverride, base) {\n    function err(message) {\n      errors.push(message)\n    }\n\n    var state = stateOverride || 'scheme start',\n        cursor = 0,\n        buffer = '',\n        seenAt = false,\n        seenBracket = false,\n        errors = [];\n\n    loop: while ((input[cursor - 1] != EOF || cursor == 0) && !this._isInvalid) {\n      var c = input[cursor];\n      switch (state) {\n        case 'scheme start':\n          if (c && ALPHA.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n            state = 'scheme';\n          } else if (!stateOverride) {\n            buffer = '';\n            state = 'no scheme';\n            continue;\n          } else {\n            err('Invalid scheme.');\n            break loop;\n          }\n          break;\n\n        case 'scheme':\n          if (c && ALPHANUMERIC.test(c)) {\n            buffer += c.toLowerCase(); // ASCII-safe\n          } else if (':' == c) {\n            this._scheme = buffer;\n            buffer = '';\n            if (stateOverride) {\n              break loop;\n            }\n            if (isRelativeScheme(this._scheme)) {\n              this._isRelative = true;\n            }\n            if ('file' == this._scheme) {\n              state = 'relative';\n            } else if (this._isRelative && base && base._scheme == this._scheme) {\n              state = 'relative or authority';\n            } else if (this._isRelative) {\n              state = 'authority first slash';\n            } else {\n              state = 'scheme data';\n            }\n          } else if (!stateOverride) {\n            buffer = '';\n            cursor = 0;\n            state = 'no scheme';\n            continue;\n          } else if (EOF == c) {\n            break loop;\n          } else {\n            err('Code point not allowed in scheme: ' + c)\n            break loop;\n          }\n          break;\n\n        case 'scheme data':\n          if ('?' == c) {\n            this._query = '?';\n            state = 'query';\n          } else if ('#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else {\n            // XXX error handling\n            if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n              this._schemeData += percentEscape(c);\n            }\n          }\n          break;\n\n        case 'no scheme':\n          if (!base || !(isRelativeScheme(base._scheme))) {\n            err('Missing scheme.');\n            invalid.call(this);\n          } else {\n            state = 'relative';\n            continue;\n          }\n          break;\n\n        case 'relative or authority':\n          if ('/' == c && '/' == input[cursor+1]) {\n            state = 'authority ignore slashes';\n          } else {\n            err('Expected /, got: ' + c);\n            state = 'relative';\n            continue\n          }\n          break;\n\n        case 'relative':\n          this._isRelative = true;\n          if ('file' != this._scheme)\n            this._scheme = base._scheme;\n          if (EOF == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._username = base._username;\n            this._password = base._password;\n            break loop;\n          } else if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c)\n              err('\\\\ is an invalid code point.');\n            state = 'relative slash';\n          } else if ('?' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = '?';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'query';\n          } else if ('#' == c) {\n            this._host = base._host;\n            this._port = base._port;\n            this._path = base._path.slice();\n            this._query = base._query;\n            this._fragment = '#';\n            this._username = base._username;\n            this._password = base._password;\n            state = 'fragment';\n          } else {\n            var nextC = input[cursor+1]\n            var nextNextC = input[cursor+2]\n            if (\n              'file' != this._scheme || !ALPHA.test(c) ||\n              (nextC != ':' && nextC != '|') ||\n              (EOF != nextNextC && '/' != nextNextC && '\\\\' != nextNextC && '?' != nextNextC && '#' != nextNextC)) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n              this._path = base._path.slice();\n              this._path.pop();\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'relative slash':\n          if ('/' == c || '\\\\' == c) {\n            if ('\\\\' == c) {\n              err('\\\\ is an invalid code point.');\n            }\n            if ('file' == this._scheme) {\n              state = 'file host';\n            } else {\n              state = 'authority ignore slashes';\n            }\n          } else {\n            if ('file' != this._scheme) {\n              this._host = base._host;\n              this._port = base._port;\n              this._username = base._username;\n              this._password = base._password;\n            }\n            state = 'relative path';\n            continue;\n          }\n          break;\n\n        case 'authority first slash':\n          if ('/' == c) {\n            state = 'authority second slash';\n          } else {\n            err(\"Expected '/', got: \" + c);\n            state = 'authority ignore slashes';\n            continue;\n          }\n          break;\n\n        case 'authority second slash':\n          state = 'authority ignore slashes';\n          if ('/' != c) {\n            err(\"Expected '/', got: \" + c);\n            continue;\n          }\n          break;\n\n        case 'authority ignore slashes':\n          if ('/' != c && '\\\\' != c) {\n            state = 'authority';\n            continue;\n          } else {\n            err('Expected authority, got: ' + c);\n          }\n          break;\n\n        case 'authority':\n          if ('@' == c) {\n            if (seenAt) {\n              err('@ already seen.');\n              buffer += '%40';\n            }\n            seenAt = true;\n            for (var i = 0; i < buffer.length; i++) {\n              var cp = buffer[i];\n              if ('\\t' == cp || '\\n' == cp || '\\r' == cp) {\n                err('Invalid whitespace in authority.');\n                continue;\n              }\n              // XXX check URL code points\n              if (':' == cp && null === this._password) {\n                this._password = '';\n                continue;\n              }\n              var tempC = percentEscape(cp);\n              (null !== this._password) ? this._password += tempC : this._username += tempC;\n            }\n            buffer = '';\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            cursor -= buffer.length;\n            buffer = '';\n            state = 'host';\n            continue;\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'file host':\n          if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            if (buffer.length == 2 && ALPHA.test(buffer[0]) && (buffer[1] == ':' || buffer[1] == '|')) {\n              state = 'relative path';\n            } else if (buffer.length == 0) {\n              state = 'relative path start';\n            } else {\n              this._host = IDNAToASCII.call(this, buffer);\n              buffer = '';\n              state = 'relative path start';\n            }\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid whitespace in file host.');\n          } else {\n            buffer += c;\n          }\n          break;\n\n        case 'host':\n        case 'hostname':\n          if (':' == c && !seenBracket) {\n            // XXX host parsing\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'port';\n            if ('hostname' == stateOverride) {\n              break loop;\n            }\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c) {\n            this._host = IDNAToASCII.call(this, buffer);\n            buffer = '';\n            state = 'relative path start';\n            if (stateOverride) {\n              break loop;\n            }\n            continue;\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            if ('[' == c) {\n              seenBracket = true;\n            } else if (']' == c) {\n              seenBracket = false;\n            }\n            buffer += c;\n          } else {\n            err('Invalid code point in host/hostname: ' + c);\n          }\n          break;\n\n        case 'port':\n          if (/[0-9]/.test(c)) {\n            buffer += c;\n          } else if (EOF == c || '/' == c || '\\\\' == c || '?' == c || '#' == c || stateOverride) {\n            if ('' != buffer) {\n              var temp = parseInt(buffer, 10);\n              if (temp != relative[this._scheme]) {\n                this._port = temp + '';\n              }\n              buffer = '';\n            }\n            if (stateOverride) {\n              break loop;\n            }\n            state = 'relative path start';\n            continue;\n          } else if ('\\t' == c || '\\n' == c || '\\r' == c) {\n            err('Invalid code point in port: ' + c);\n          } else {\n            invalid.call(this);\n          }\n          break;\n\n        case 'relative path start':\n          if ('\\\\' == c)\n            err(\"'\\\\' not allowed in path.\");\n          state = 'relative path';\n          if ('/' != c && '\\\\' != c) {\n            continue;\n          }\n          break;\n\n        case 'relative path':\n          if (EOF == c || '/' == c || '\\\\' == c || (!stateOverride && ('?' == c || '#' == c))) {\n            if ('\\\\' == c) {\n              err('\\\\ not allowed in relative path.');\n            }\n            var tmp;\n            if (tmp = relativePathDotMapping[buffer.toLowerCase()]) {\n              buffer = tmp;\n            }\n            if ('..' == buffer) {\n              this._path.pop();\n              if ('/' != c && '\\\\' != c) {\n                this._path.push('');\n              }\n            } else if ('.' == buffer && '/' != c && '\\\\' != c) {\n              this._path.push('');\n            } else if ('.' != buffer) {\n              if ('file' == this._scheme && this._path.length == 0 && buffer.length == 2 && ALPHA.test(buffer[0]) && buffer[1] == '|') {\n                buffer = buffer[0] + ':';\n              }\n              this._path.push(buffer);\n            }\n            buffer = '';\n            if ('?' == c) {\n              this._query = '?';\n              state = 'query';\n            } else if ('#' == c) {\n              this._fragment = '#';\n              state = 'fragment';\n            }\n          } else if ('\\t' != c && '\\n' != c && '\\r' != c) {\n            buffer += percentEscape(c);\n          }\n          break;\n\n        case 'query':\n          if (!stateOverride && '#' == c) {\n            this._fragment = '#';\n            state = 'fragment';\n          } else if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._query += percentEscapeQuery(c);\n          }\n          break;\n\n        case 'fragment':\n          if (EOF != c && '\\t' != c && '\\n' != c && '\\r' != c) {\n            this._fragment += c;\n          }\n          break;\n      }\n\n      cursor++;\n    }\n  }\n\n  function clear() {\n    this._scheme = '';\n    this._schemeData = '';\n    this._username = '';\n    this._password = null;\n    this._host = '';\n    this._port = '';\n    this._path = [];\n    this._query = '';\n    this._fragment = '';\n    this._isInvalid = false;\n    this._isRelative = false;\n  }\n\n  // Does not process domain names or IP addresses.\n  // Does not handle encoding for the query parameter.\n  function jURL(url, base /* , encoding */) {\n    if (base !== undefined && !(base instanceof jURL))\n      base = new jURL(String(base));\n\n    this._url = url;\n    clear.call(this);\n\n    var input = url.replace(/^[ \\t\\r\\n\\f]+|[ \\t\\r\\n\\f]+$/g, '');\n    // encoding = encoding || 'utf-8'\n\n    parse.call(this, input, null, base);\n  }\n\n  jURL.prototype = {\n    toString: function() {\n      return this.href;\n    },\n    get href() {\n      if (this._isInvalid)\n        return this._url;\n\n      var authority = '';\n      if ('' != this._username || null != this._password) {\n        authority = this._username +\n            (null != this._password ? ':' + this._password : '') + '@';\n      }\n\n      return this.protocol +\n          (this._isRelative ? '//' + authority + this.host : '') +\n          this.pathname + this._query + this._fragment;\n    },\n    set href(href) {\n      clear.call(this);\n      parse.call(this, href);\n    },\n\n    get protocol() {\n      return this._scheme + ':';\n    },\n    set protocol(protocol) {\n      if (this._isInvalid)\n        return;\n      parse.call(this, protocol + ':', 'scheme start');\n    },\n\n    get host() {\n      return this._isInvalid ? '' : this._port ?\n          this._host + ':' + this._port : this._host;\n    },\n    set host(host) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, host, 'host');\n    },\n\n    get hostname() {\n      return this._host;\n    },\n    set hostname(hostname) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, hostname, 'hostname');\n    },\n\n    get port() {\n      return this._port;\n    },\n    set port(port) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      parse.call(this, port, 'port');\n    },\n\n    get pathname() {\n      return this._isInvalid ? '' : this._isRelative ?\n          '/' + this._path.join('/') : this._schemeData;\n    },\n    set pathname(pathname) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      this._path = [];\n      parse.call(this, pathname, 'relative path start');\n    },\n\n    get search() {\n      return this._isInvalid || !this._query || '?' == this._query ?\n          '' : this._query;\n    },\n    set search(search) {\n      if (this._isInvalid || !this._isRelative)\n        return;\n      this._query = '?';\n      if ('?' == search[0])\n        search = search.slice(1);\n      parse.call(this, search, 'query');\n    },\n\n    get hash() {\n      return this._isInvalid || !this._fragment || '#' == this._fragment ?\n          '' : this._fragment;\n    },\n    set hash(hash) {\n      if (this._isInvalid)\n        return;\n      this._fragment = '#';\n      if ('#' == hash[0])\n        hash = hash.slice(1);\n      parse.call(this, hash, 'fragment');\n    },\n\n    get origin() {\n      var host;\n      if (this._isInvalid || !this._scheme) {\n        return '';\n      }\n      // javascript: Gecko returns String(\"\"), WebKit/Blink String(\"null\")\n      // Gecko throws error for \"data://\"\n      // data: Gecko returns \"\", Blink returns \"data://\", WebKit returns \"null\"\n      // Gecko returns String(\"\") for file: mailto:\n      // WebKit/Blink returns String(\"SCHEME://\") for file: mailto:\n      switch (this._scheme) {\n        case 'file':\n          return 'file://' // EPUBJS Added\n        case 'data':\n        case 'javascript':\n        case 'mailto':\n          return 'null';\n      }\n      host = this.host;\n      if (!host) {\n        return '';\n      }\n      return this._scheme + '://' + host;\n    }\n  };\n\n  // Copy over the static methods\n  var OriginalURL = scope.URL;\n  if (OriginalURL) {\n    jURL.createObjectURL = function(blob) {\n      // IE extension allows a second optional options argument.\n      // http://msdn.microsoft.com/en-us/library/ie/hh772302(v=vs.85).aspx\n      return OriginalURL.createObjectURL.apply(OriginalURL, arguments);\n    };\n    jURL.revokeObjectURL = function(url) {\n      OriginalURL.revokeObjectURL(url);\n    };\n  }\n\n  return jURL;\n}));\n","import Book from \"./book\";\nimport Rendition from \"./rendition\";\nimport CFI from \"./epubcfi\";\nimport Contents from \"./contents\";\nimport * as utils from \"./utils/core\";\nimport { EPUBJS_VERSION } from \"./utils/constants\";\nimport '../libs/url/url-polyfill'\n\nimport IframeView from \"./managers/views/iframe\";\nimport DefaultViewManager from \"./managers/default\";\nimport ContinuousViewManager from \"./managers/continuous\";\n\n/**\n * Creates a new Book\n * @param {string|ArrayBuffer} url URL, Path or ArrayBuffer\n * @param {object} options to pass to the book\n * @returns {Book} a new Book object\n * @example ePub(\"/path/to/book.epub\", {})\n */\nfunction ePub(url, options) {\n\treturn new Book(url, options);\n}\n\nePub.VERSION = EPUBJS_VERSION;\n\nif (typeof(global) !== \"undefined\") {\n\tglobal.EPUBJS_VERSION = EPUBJS_VERSION;\n}\n\nePub.Book = Book;\nePub.Rendition = Rendition;\nePub.Contents = Contents;\nePub.CFI = CFI;\nePub.utils = utils;\n\nexport default ePub;\n","'use strict';\n\nif (!process) {\n  var process = {\n    \"cwd\" : function () { return '/' }\n  };\n}\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + path);\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47/*/*/)\n      break;\n    else\n      code = 47/*/*/;\n    if (code === 47/*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 ||\n            res.charCodeAt(res.length - 1) !== 46/*.*/ ||\n            res.charCodeAt(res.length - 2) !== 46/*.*/) {\n          if (res.length > 2) {\n            var start = res.length - 1;\n            var j = start;\n            for (; j >= 0; --j) {\n              if (res.charCodeAt(j) === 47/*/*/)\n                break;\n            }\n            if (j !== start) {\n              if (j === -1)\n                res = '';\n              else\n                res = res.slice(0, j);\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46/*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base ||\n    ((pathObject.name || '') + (pathObject.ext || ''));\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47/*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0)\n      return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47/*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47/*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute)\n      path = '.';\n    if (path.length > 0 && trailingSeparator)\n      path += '/';\n\n    if (isAbsolute)\n      return '/' + path;\n    return path;\n  },\n\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47/*/*/;\n  },\n\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to)\n      return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to)\n      return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47/*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = (fromEnd - fromStart);\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47/*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = (toEnd - toStart);\n\n    // Compare paths to find the longest common path from root\n    var length = (fromLen < toLen ? fromLen : toLen);\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47/*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47/*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47/*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47/*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47/*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0)\n      return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = (code === 47/*/*/);\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1)\n      return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1)\n      return '//';\n    return path.slice(0, end);\n  },\n\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string')\n      throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path)\n        return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47/*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1)\n        return '';\n      return path.slice(start, end);\n    }\n  },\n\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError(\n        'Parameter \"pathObject\" must be an object, not ' + typeof(pathObject)\n      );\n    }\n    return _format('/', pathObject);\n  },\n\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0)\n      return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = (code === 47/*/*/);\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47/*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46/*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 ||\n        end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        (preDotState === 1 &&\n         startDot === end - 1 &&\n         startDot === startPart + 1)) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path.slice(1, end);\n        else\n          ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0)\n      ret.dir = path.slice(0, startPart - 1);\n    else if (isAbsolute)\n      ret.dir = '/';\n\n    return ret;\n  },\n\n\n  sep: '/',\n  delimiter: ':',\n  posix: null\n};\n\n\nmodule.exports = posix;\n","'use strict';\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== 'function') return false;\n\tobj = { foo: 'raz' };\n\tassign(obj, { bar: 'dwa' }, { trzy: 'trzy' });\n\treturn (obj.foo + obj.bar + obj.trzy) === 'razdwatrzy';\n};\n","'use strict';\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys('primitive');\n\t\treturn true;\n\t} catch (e) { return false; }\n};\n","'use strict';\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n\treturn keys(object == null ? object : Object(object));\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.keys\n\t: require('./shim');\n","'use strict';\n\nmodule.exports = function (value) {\n\tif (value == null) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n","'use strict';\n\nvar keys  = require('../keys')\n  , value = require('../valid-value')\n\n  , max = Math.max;\n\nmodule.exports = function (dest, src/*, â€¦srcn*/) {\n\tvar error, i, l = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry { dest[key] = src[key]; } catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < l; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.assign\n\t: require('./shim');\n","'use strict';\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\nmodule.exports = function (options/*, â€¦options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (options == null) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n","// Deprecated\n\n'use strict';\n\nmodule.exports = function (obj) { return typeof obj === 'function'; };\n","'use strict';\n\nvar str = 'razdwatrzy';\n\nmodule.exports = function () {\n\tif (typeof str.contains !== 'function') return false;\n\treturn ((str.contains('dwa') === true) && (str.contains('foo') === false));\n};\n","'use strict';\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? String.prototype.contains\n\t: require('./shim');\n","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n","'use strict';\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n","import EventEmitter from \"event-emitter\";\n\n// import {\n//   ElementObserver,\n//   PositionObserver,\n//   ObserverCollection // Advanced: Used for grouping custom viewport handling\n// } from \"viewprt\";\n\nimport {inVp} from '../../../core/Util';\nwindow.inVp = inVp;\n\nclass Views {\n    constructor(container, preloading=false) {\n        this.container = container;\n        this._views = [];\n        this.length = 0;\n        this.hidden = false;\n        this.preloading = preloading;\n        this.observer = new IntersectionObserver(this.handleObserver.bind(this), {\n            root: this.containr,\n            rootMargin: '0px',\n            threshold: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]\n        });\n    }\n\n    all() {\n        return this._views;\n    }\n\n    first() {\n        // return this._views[0];\n        return this.displayed()[0];\n    }\n\n    last() {\n        var d = this.displayed();\n        return d[d.length - 1];\n        // return this._views[this._views.length-1];\n    }\n\n    prev(view) {\n        var index = this.indexOf(view);\n        return this.get(index - 1);\n    }\n\n    next(view) {\n        var index = this.indexOf(view);\n        return this.get(index + 1);\n    }\n\n    indexOf(view) {\n        return this._views.indexOf(view);\n    }\n\n    slice() {\n        return this._views.slice.apply(this._views, arguments);\n    }\n\n    get(i) {\n        return i < 0 ? null : this._views[i];\n    }\n\n    append(view){\n        this._views.push(view);\n        if(this.container){\n            this.container.appendChild(view.element);\n            var threshold = {};\n            var h = this.container.offsetHeight;\n            threshold.top = - ( h * 0.25 );\n            threshold.bottom = - ( h * 0.25 );\n            // view.observer = ElementObserver(view.element, {\n            //     container: this.container,\n            //     onEnter: this.onEnter.bind(this, view), // callback when the element enters the viewport\n            //     onExit: this.onExit.bind(this, view), // callback when the element exits the viewport\n            //     offset: 0, // offset from the edges of the viewport in pixels\n            //     once: false, // if true, observer is detroyed after first callback is triggered\n            //     observerCollection: null // new ObserverCollection() // Advanced: Used for grouping custom viewport handling\n            // })\n            // const { fully, partially, edges } = inVp(view.element, threshold, this.container);\n            // if ( edges.percentage > 0 ) {\n            //     this.onEnter(view);\n            // }\n\n            this.observer.observe(view.element);\n        }\n        this.length++;\n        return view;\n    }\n\n    handleObserver(entries, observer) {\n        entries.forEach(entry => {\n            var div = entry.target;\n            var index = div.getAttribute('ref');\n            var view = this.get(index);\n            if ( entry.isIntersecting && entry.intersectionRatio > 0.0  ) {\n                if ( ! view.displayed ) {\n                    console.log(\"AHOY OBSERVING\", entries.length, index, 'onEnter');\n                    this.onEnter(view);\n                }\n            } else if ( view && view.displayed ) {\n                console.log(\"AHOY OBSERVING\", entries.length, index, 'onExit');\n                this.onExit(view);\n            }\n        })\n    }\n\n    prepend(view){\n        this._views.unshift(view);\n        if(this.container){\n            this.container.insertBefore(view.element, this.container.firstChild);\n        }\n        this.length++;\n        return view;\n    }\n\n    // insert(view, index) {\n    //     this._views.splice(index, 0, view);\n\n    //     if(this.container){\n    //         if(index < this.container.children.length){\n    //             this.container.insertBefore(view.element, this.container.children[index]);\n    //         } else {\n    //             this.container.appendChild(view.element);\n    //         }\n    //     }\n\n    //     this.length++;\n    //     return view;\n    // }\n\n    // remove(view) {\n    //     var index = this._views.indexOf(view);\n\n    //     if(index > -1) {\n    //         this._views.splice(index, 1);\n    //     }\n\n\n    //     this.destroy(view);\n\n    //     this.length--;\n    // }\n\n    destroy(view) {\n        // if(view.displayed){\n        //     view.destroy();\n        // }\n        this.observer.unobserve(view.element);\n        view.destroy();\n\n        if(this.container){\n             this.container.removeChild(view.element);\n        }\n        view = null;\n    }\n\n    // Iterators\n\n    forEach() {\n        // return this._views.forEach.apply(this._views, arguments);\n        return this.displayed().forEach.apply(this._views, arguments);\n    }\n\n    clear(){\n        // Remove all views\n        var view;\n        var len = this.length;\n\n        if(!this.length) return;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            this.destroy(view);\n        }\n\n        this._views = [];\n        this.length = 0;\n        this.observer.disconnect();\n    }\n\n    updateLayout(options) {\n        var width = options.width;\n        var height = options.height;\n        this._views.forEach(function(view) {\n            view.size(width, height);\n            if ( view.contents ) {\n                view.contents.size(width, height);\n            }\n        })\n    }\n\n    find(section){\n\n        var view;\n        var len = this.length;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            // view.displayed\n            if(view.section.index == section.index) {\n                return view;\n            }\n        }\n\n    }\n\n    displayed(){\n        var displayed = [];\n        var view;\n        var len = this.length;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            const { fully, partially, edges } = inVp(view.element, this.container);\n            if ( ( fully || partially ) && edges.percentage > 0 && view.displayed ) {\n                displayed.push(view);\n            }\n            // if(view.displayed){\n            //     displayed.push(view);\n            // }\n        }\n        return displayed;\n    }\n\n    show(){\n        var view;\n        var len = this.length;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            if(view.displayed){\n                view.show();\n            }\n        }\n        this.hidden = false;\n    }\n\n    hide(){\n        var view;\n        var len = this.length;\n\n        for (var i = 0; i < len; i++) {\n            view = this._views[i];\n            if(view.displayed){\n                // console.log(\"AHOY VIEWS hide\", view.index);\n                view.hide();\n            }\n        }\n        this.hidden = true;\n    }\n\n    onEnter(view, el, viewportState) {\n        // console.log(\"AHOY VIEWS onEnter\", view.index, view.preloaded, view.displayed);\n        var preload = ! view.displayed || view.preloaded;\n        if ( ! view.displayed ) {\n            // console.log(\"AHOY SHOULD BE SHOWING\", view);\n            this.emit(\"view.display\", { view: view, viewportState: viewportState });\n        }\n        if ( this.preloading && preload ) {\n            // can we grab the next one?\n            this.preload(this.next(view), view.index);\n            this.preload(this.prev(view), view.index);\n        }\n        if ( ! view.displayed && view.preloaded ) {\n            // console.log(\"AHOY VIEWS onEnter TOGGLE\", view.index, view.preloaded, view.displayed);\n            view.preloaded = false;\n        }\n    }\n\n    preload(view, index) {\n        if ( view ) {\n            view.preloaded = true;\n            // console.log(\"AHOY VIEWS preload\", index, \">\", view.index);\n            this.emit(\"view.preload\", { view: view });\n        }\n    }\n\n    onExit(view, el, viewportState) {\n        // console.log(\"AHOY VIEWS onExit\", view.index, view.preloaded);\n        if ( view.preloaded ) { return ; }\n        view.unload();\n    }\n}\n\nEventEmitter(Views.prototype);\nexport default Views;\n","import EventEmitter from \"event-emitter\";\nimport {extend, defer, windowBounds, isNumber, requestAnimationFrame} from \"epubjs/src/utils/core\";\nimport Mapping from \"epubjs/src/mapping\";\nimport Queue from \"epubjs/src/utils/queue\";\nimport Stage from \"epubjs/src/managers/helpers/stage\";\nimport Views from \"../helpers/scrolling_views\";\nimport { EVENTS } from \"epubjs/src/utils/constants\";\nimport {inVp} from '../../../core/Util';\n\n// import inVp from \"in-vp\";\n\nclass ScrollingContinuousViewManager {\n  constructor(options) {\n\n    this.name = \"scrolling\";\n    this.optsSettings = options.settings;\n    this.View = options.view;\n    this.request = options.request;\n    this.renditionQueue = options.queue;\n    this.q = new Queue(this);\n\n    this.settings = extend(this.settings || {}, {\n      infinite: true,\n      hidden: false,\n      width: undefined,\n      height: undefined,\n      axis: undefined,\n      flow: \"scrolled\",\n      ignoreClass: \"\",\n      fullsize: undefined,\n      minHeight: 1024\n    });\n\n    extend(this.settings, options.settings || {});\n\n    this.viewSettings = {\n      ignoreClass: this.settings.ignoreClass,\n      axis: this.settings.axis,\n      flow: this.settings.flow,\n      layout: this.layout,\n      method: this.settings.method, // srcdoc, blobUrl, write\n      width: 0,\n      height: 0,\n      forceEvenPages: true\n    };\n\n    this.rendered = false;\n    this.settings.scale = this.settings.scale || 1.0;\n    this.settings.xscale = this.settings.scale;\n\n    this.fraction = 0.8;\n    // this.settings.maxWidth = 1024;\n  }\n\n  render(element, size){\n    let tag = element.tagName;\n\n    if (typeof this.settings.fullsize === \"undefined\" &&\n        tag && (tag.toLowerCase() == \"body\" ||\n        tag.toLowerCase() == \"html\")) {\n        this.settings.fullsize = true;\n    }\n\n    if (this.settings.fullsize) {\n      this.settings.overflow = \"visible\";\n      this.overflow = this.settings.overflow;\n    }\n\n    this.settings.size = size;\n\n    // Save the stage\n    this.stage = new Stage({\n      width: size.width,\n      height: size.height,\n      overflow: this.overflow,\n      hidden: this.settings.hidden,\n      axis: this.settings.axis,\n      fullsize: this.settings.fullsize,\n      direction: this.settings.direction,\n      scale: 1.0 // this.settings.scale --- scrolling scales different\n    });\n\n    this.stage.attachTo(element);\n\n    // Get this stage container div\n    this.container = this.stage.getContainer();\n\n    // Views array methods\n    this.views = new Views(this.container, this.layout.name == 'pre-paginated');\n\n    // Calculate Stage Size\n    this._bounds = this.bounds();\n    this._stageSize = this.stage.size();\n\n    var ar = this._stageSize.width / this._stageSize.height;\n    // console.log(\"AHOY STAGE\", this._stageSize.width, this._stageSize.height, \">\", ar);\n\n    // Set the dimensions for views\n    this.viewSettings.width = this._stageSize.width;\n    this.viewSettings.height = this._stageSize.height;\n\n    // Function to handle a resize event.\n    // Will only attach if width and height are both fixed.\n    this.stage.onResize(this.onResized.bind(this));\n\n    this.stage.onOrientationChange(this.onOrientationChange.bind(this));\n\n    // Add Event Listeners\n    this.addEventListeners();\n\n    // Add Layout method\n    // this.applyLayoutMethod();\n    if (this.layout) {\n      this.updateLayout();\n    }\n\n    this.rendered = true;\n    this._spine = [];\n\n    this.views.on(\"view.preload\", function({view}) {\n      view.display(this.request).then(function() {\n        view.show();\n      })\n    }.bind(this));\n\n    this.views.on(\"view.display\", function({ view, viewportState }) {\n      // console.log(\"AHOY VIEWS scrolling.view.display\", view.index);\n      view.display(this.request).then(function() {\n        view.show();\n        this.gotoTarget(view);\n        if ( true || this._forceLocationEvent ) {\n          this.emit(EVENTS.MANAGERS.SCROLLED, {\n            top: this.scrollTop,\n            left: this.scrollLeft\n          });\n          this._forceLocationEvent = false;\n        }\n      }.bind(this))\n    }.bind(this));\n  }\n\n  display(section, target) {\n    var displaying = new defer();\n    var displayed = displaying.promise;\n\n    if ( ! this.views.length ) {\n      this.initializeViews(section);\n    }\n\n    // Check if moving to target is needed\n    if (target === section.href || isNumber(target)) {\n      target = undefined;\n    }\n\n    var current = this.current();\n\n    this.ignore = false;\n    var visible = this.views.find(section);\n\n    // console.log(\"AHOY scrolling display\", section, visible, current, current == visible);\n\n    if(target) {\n      this._target = [ visible, target ];\n    }\n\n    visible.element.scrollIntoView();\n\n    if ( visible == current ) {\n      this.gotoTarget(visible);\n    }\n\n    displaying.resolve();\n    return displayed;\n  }\n\n  gotoTarget(view) {\n    if ( this._target && this._target[0] == view ) {\n      let offset = view.locationOf(this._target[1]);\n\n      // -- this does not work; top varies.\n      // offset.top += view.element.getBoundingClientRect().top;\n\n      setTimeout(function() {\n        offset.top += this.container.scrollTop;\n        this.moveTo(offset);\n        this._target = null;\n      }.bind(this), 10);\n\n      // var prev; var style;\n      // for(var i = 0; i < view.index; i++) {\n      //   prev = this.views.get(i);\n      //   style = window.getComputedStyle(prev.element);\n      //   offset.top += ( parseInt(style.height) / this.settings.scale ) + parseInt(style.marginBottom) + parseInt(style.marginTop);\n      //   // offset.top += prev.height() || prev.element.offsetHeight;\n      // }\n      // this.moveTo(offset);\n      // this._target = null;\n    }\n  }\n\n  afterDisplayed(view){\n    // if ( this._target && this._target[0] == view ) {\n    //   let offset = view.locationOf(this._target[1]);\n    //   this.moveTo(offset);\n    //   this._target = null;\n    // }\n    this.emit(EVENTS.MANAGERS.ADDED, view);\n  }\n\n  afterResized(view){\n\n    var bounds = this.container.getBoundingClientRect();\n    var rect = view.element.getBoundingClientRect();\n\n    this.ignore = true;\n\n    // view.element.dataset.resizable = \"true\"\n    view.reframeElement();\n\n    var delta;\n    if ( rect.bottom <= bounds.bottom && rect.top < 0 ) {\n      requestAnimationFrame(function afterDisplayedAfterRAF() {\n        delta = view.element.getBoundingClientRect().height - rect.height;\n        // console.log(\"AHOY afterResized\", view.index, view.element.getBoundingClientRect().height, rect.height, delta);\n        this.container.scrollTop += Math.ceil(delta);        \n      }.bind(this));\n    }\n\n    // the default manager emits EVENTS.MANAGERS.RESIZE when the view is resized\n    // which causes the rendition to scroll to display the current location\n    // since we've (in theory) adjusted that during the paint frame\n    // don't emit\n    // -- this.emit(EVENTS.MANAGERS.RESIZE, view.section);\n  }\n\n  moveTo(offset) {\n    var distX = 0, distY = 0;\n    distY = offset.top;\n    // this.scrollTo(distX, this.container.scrollTop + distY, true);\n    this.scrollTo(distX, distY, false);\n  }\n\n  initializeViews(section) {\n    var self = this;\n\n    this.ignore = true;\n\n    // if ( self._spine.length == 0 ) {\n    //   console.time(\"AHOY initializeViews CRAWL\");\n    //   // can we build a manifest here?\n    //   var prev_ = section.prev();\n    //   while ( prev_ ) {\n    //     // self._spine.unshift(prev_.href);\n    //     self._spine.unshift(prev_);\n    //     prev_ = prev_.prev();\n    //   }\n\n    //   self._spine.push(section);\n\n    //   var next_ = section.next();\n    //   while ( next_ ) {\n    //     // self._spine.push(next_.href);\n    //     self._spine.push(next_);\n    //     next_ = next_.next();\n    //   }\n\n    //   console.timeEnd(\"AHOY initializeViews CRAWL\");\n    // }\n\n    // this._spine.forEach(function (section) {\n\n   this.settings.spine.each(function (section) {\n\n      // if ( this.layout.name == 'pre-paginated' ) {\n      //   // do something\n      //   // viewSettings.layout.height = h;\n      //   // viewSettings.layout.columnWidth = w;\n\n      //   var r = this.layout.height / this.layout.columnWidth;\n\n      //   viewSettings.layout.columnWidth = this.layout.columnWidth * 0.8;\n      //   viewSettings.layout.height = this.layout.height * ( this.layout.columnWidth)\n\n      // }\n      var viewSettings = Object.assign({}, this.viewSettings);\n      viewSettings.layout = Object.assign( Object.create( Object.getPrototypeOf(this.viewSettings.layout)), this.viewSettings.layout);\n      if ( this.layout.name == 'pre-paginated' ) {\n        viewSettings.layout.columnWidth = this.calcuateWidth(viewSettings.layout.columnWidth); // *= ( this.fraction * this.settings.xscale );\n        viewSettings.layout.width = this.calcuateWidth(viewSettings.layout.width); // *= ( this.fraction * this.settings.xscale );\n        viewSettings.minHeight *= this.settings.xscale;\n        viewSettings.maxHeight = viewSettings.height * this.settings.xscale;\n        viewSettings.height = viewSettings.height * this.settings.xscale;\n        viewSettings.layout.height = viewSettings.height;\n        // console.log(\"AHOY new view\", section.index, viewSettings.height);\n      }\n\n      var view = new this.View(section, viewSettings);\n      view.onDisplayed = this.afterDisplayed.bind(this);\n      view.onResize = this.afterResized.bind(this);\n      view.on(EVENTS.VIEWS.AXIS, (axis) => {\n        this.updateAxis(axis);\n      });\n      // view.on('BAMBOOZLE', (e) => {\n      //   this.afterResizedBamboozled(view);\n      // })\n      this.views.append(view);\n    }.bind(this));\n\n    this.ignore = false;\n  }\n\n  direction(dir=\"ltr\") {\n    this.settings.direction = dir;\n\n    this.stage && this.stage.direction(dir);\n\n    this.viewSettings.direction = dir;\n\n    this.updateLayout();\n  }\n\n  onOrientationChange(e) {\n\n  }\n\n  onResized(e) {\n    // if ( this.resizeTimeout ) {\n    //   clearTimeout(this.resizeTimeout);\n    // } else {\n    //   // this._current = this.current() && this.current().section;\n    //   // this._current = { view: this.current(), location: this.currentLocation() };\n    // }\n    // this.resizeTimeout = setTimeout(this.resize.bind(this), 100);\n    this.resize();\n  }\n\n  resize(width, height){\n    let stageSize = this.stage.size(width, height);\n    if ( this.resizeTimeout ) {\n      clearTimeout(this.resizeTimeout);\n      this.resizeTimeout = null;\n    }\n\n    this.ignore = true;\n\n    // For Safari, wait for orientation to catch up\n    // if the window is a square\n    this.winBounds = windowBounds();\n    if (this.orientationTimeout &&\n        this.winBounds.width === this.winBounds.height) {\n      // reset the stage size for next resize\n      this._stageSize = undefined;\n      return;\n    }\n\n    if (this._stageSize &&\n        this._stageSize.width === stageSize.width &&\n        this._stageSize.height === stageSize.height ) {\n      // Size is the same, no need to resize\n      return;\n    }\n\n    this._stageSize = stageSize;\n\n    this._bounds = this.bounds();\n\n    // if ( ! this._resizeTarget ) {\n    //   var current = this.current();\n    //   if ( current ) {\n    //     this._resizeTarget = current.section;\n    //   }\n    // }\n\n    this.clear();\n\n    // Update for new views\n    this.viewSettings.width = this._stageSize.width;\n    this.viewSettings.height = this._stageSize.height;\n\n    this.updateLayout();\n\n    // var section; var target;\n    // if ( this._current ) {\n    //   section = this._current.view.section;\n    //   target = this._current.location[0].mapping.start;\n    //   this._current = null;\n    // } else {\n    //   section = this._spine[0];\n    // }\n    // this.initializeViews(section);\n    // this.display(section, target);\n\n    // this.views.updateLayout(this.viewSettings);\n\n    this.emit(EVENTS.MANAGERS.RESIZED, {\n      width: this._stageSize.width,\n      height: this._stageSize.height\n    });\n  }\n\n  updateAxis(axis, forceUpdate) {\n    if (!this.isPaginated) {\n      axis = \"vertical\";\n    }\n\n    if (!forceUpdate && axis === this.settings.axis) {\n      return;\n    }\n\n    this.settings.axis = axis;\n\n    this.stage && this.stage.axis(axis);\n\n    this.viewSettings.axis = axis;\n\n    if (this.mapping) {\n      this.mapping = new Mapping(this.layout.props, this.settings.direction, this.settings.axis);\n    }\n\n    if (this.layout) {\n      this.layout.spread(\"none\");\n    }\n\n  }\n\n  updateFlow(flow) {\n    this.isPaginated = false;\n    this.updateAxis(\"vertical\");\n\n    this.viewSettings.flow = flow;\n\n    if (!this.settings.overflow) {\n      this.overflow = this.isPaginated ? \"hidden\" : \"auto\";\n    } else {\n      this.overflow = this.settings.overflow;\n    }\n\n    this.stage && this.stage.overflow(this.overflow);\n\n    this.updateLayout();\n  }\n\n  getContents() {\n    var contents = [];\n    if (!this.views) {\n      return contents;\n    }\n    this.views.forEach(function(view){\n      const viewContents = view && view.contents;\n      if (viewContents) {\n        contents.push(viewContents);\n      }\n    });\n    return contents;\n  }\n\n  current(){\n    var visible = this.visible();\n    var view;\n    if(visible.length){\n      // Current is the last visible view\n      var current = null;\n      for(var i = 0; i < visible.length; i++) {\n        view = visible[i];\n        const { fully, partially, edges } = inVp(view.element, this.container);\n        if ( ! current ) { current = view; current.percentage = edges.percentage; }\n        else if ( edges.percentage > current.percentage ) {\n          current = view;\n          current.percentage = edges.percentage;\n        }\n      }\n      if ( current ) { return current; }\n      return visible[visible.length-1];\n    }\n    return null;\n  }\n\n  visible() {\n    var visible = [];\n    var views = this.views.displayed();\n    var viewsLength = views.length;\n    var visible = [];\n    var isVisible;\n    var view;\n\n    return this.views.displayed();\n\n    for(var i = 0; i < viewsLength; i++) {\n      view = views[i];\n      if ( view.displayed ) {\n        visible.push(view);\n      }\n    }\n\n    return visible;\n  }\n\n  scrollBy(x, y, silent){\n    let dir = this.settings.direction === \"rtl\" ? -1 : 1;\n\n    if(silent) {\n      this.ignore = true;\n    }\n\n    if(!this.settings.fullsize) {\n      if(x) this.container.scrollLeft += x * dir;\n      if(y) this.container.scrollTop += y;\n    } else {\n      window.scrollBy(x * dir, y * dir);\n    }\n    this.scrolled = true;\n  }\n\n  scrollTo(x, y, silent) {\n    if(silent) {\n      this.ignore = true;\n    }\n\n    if(!this.settings.fullsize) {\n      this.container.scrollLeft = x;\n      this.container.scrollTop = y;\n    } else {\n      window.scrollTo(x,y);\n    }\n    this.scrolled = true;\n  }\n\n  onScroll() {\n    let scrollTop;\n    let scrollLeft;\n\n    if(!this.settings.fullsize) {\n      scrollTop = this.container.scrollTop;\n      scrollLeft = this.container.scrollLeft;\n    } else {\n      scrollTop = window.scrollY;\n      scrollLeft = window.scrollX;\n    }\n\n    this.scrollTop = scrollTop;\n    this.scrollLeft = scrollLeft;\n\n    if(!this.ignore) {\n      this.emit(EVENTS.MANAGERS.SCROLL, {\n        top: scrollTop,\n        left: scrollLeft\n      });\n\n      clearTimeout(this.afterScrolled);\n      this.afterScrolled = setTimeout(function () {\n        this.emit(EVENTS.MANAGERS.SCROLLED, {\n          top: this.scrollTop,\n          left: this.scrollLeft\n        });\n      }.bind(this), 20);\n\n    } else {\n      this.ignore = false;\n    }\n  }\n\n  bounds() {\n    var bounds;\n\n    bounds = this.stage.bounds();\n\n    return bounds;\n  }\n\n  applyLayout(layout) {\n    this.layout = layout;\n    this.updateLayout();\n  }\n\n  updateLayout() {\n    if (!this.stage) {\n      return;\n    }\n\n    this._stageSize = this.stage.size();\n    this.layout.calculate(this._stageSize.width, this._stageSize.height);\n    // this.layout.width = this.container.offsetWidth * 0.80;\n\n    // Set the dimensions for views\n    this.viewSettings.width = this.layout.width; //  * this.settings.scale;\n    this.viewSettings.height = this.calculateHeight(this.layout.height);\n    this.viewSettings.minHeight = this.viewSettings.height; // * this.settings.scale;\n\n    this.setLayout(this.layout);\n  }\n\n  setLayout(layout){\n\n    this.viewSettings.layout = layout;\n\n    this.mapping = new Mapping(layout.props, this.settings.direction, this.settings.axis);\n\n    if(this.views) {\n\n     this.views._views.forEach(function(view) {\n        var viewSettings = Object.assign({}, this.viewSettings);\n        viewSettings.layout = Object.assign( Object.create( Object.getPrototypeOf(this.viewSettings.layout)), this.viewSettings.layout);\n        if ( this.layout.name == 'pre-paginated' ) {\n          viewSettings.layout.columnWidth = this.calcuateWidth(viewSettings.layout.columnWidth); // *= ( this.fraction * this.settings.xscale );\n          viewSettings.layout.width = this.calcuateWidth(viewSettings.layout.width); // *= ( this.fraction * this.settings.xscale );\n          viewSettings.minHeight *= this.settings.xscale;\n          viewSettings.maxHeight = viewSettings.height * this.settings.xscale;\n          viewSettings.height = viewSettings.height * this.settings.xscale;\n          viewSettings.layout.height = viewSettings.height;\n        }\n\n        view.size(viewSettings.layout.width, viewSettings.layout.height);\n        view.reframe(viewSettings.layout.width, viewSettings.layout.height);\n        view.setLayout(viewSettings.layout);\n      })\n\n      // this.views.forEach(function(view){\n      //   if (view) {\n      //     view.reframe(layout.width, layout.height);\n      //     view.setLayout(layout);\n      //   }\n      // });\n\n    }\n\n  }\n\n  addEventListeners() {\n    var scroller;\n\n    window.addEventListener(\"unload\", function(e){\n      this.destroy();\n    }.bind(this));\n\n    if(!this.settings.fullsize) {\n      scroller = this.container;\n    } else {\n      scroller = window;\n    }\n\n    this._onScroll = this.onScroll.bind(this);\n    scroller.addEventListener(\"scroll\", this._onScroll);\n\n  }\n\n  removeEventListeners(){\n    var scroller;\n\n    if(!this.settings.fullsize) {\n      scroller = this.container;\n    } else {\n      scroller = window;\n    }\n\n    scroller.removeEventListener(\"scroll\", this._onScroll);\n    this._onScroll = undefined;\n  }\n\n  destroy(){\n    clearTimeout(this.orientationTimeout);\n    clearTimeout(this.resizeTimeout);\n    clearTimeout(this.afterScrolled);\n\n    this.clear();\n\n    this.removeEventListeners();\n\n    this.stage.destroy();\n\n    this.rendered = false;\n\n    /*\n\n      clearTimeout(this.trimTimeout);\n      if(this.settings.hidden) {\n        this.element.removeChild(this.wrapper);\n      } else {\n        this.element.removeChild(this.container);\n      }\n    */\n  }\n\n  next() {\n    var next;\n    var left;\n\n    var displaying = new defer();\n    var displayed = displaying.promise;\n\n    let dir = this.settings.direction;\n\n    if(!this.views.length) return;\n\n    this.scrollTop = this.container.scrollTop;\n\n    let top  = this.container.scrollTop + this.container.offsetHeight;\n\n    this.scrollBy(0, this.layout.height, false);\n\n    this.q.enqueue(function() {\n      displaying.resolve();\n      return displayed;\n    })\n  }\n\n  prev() {\n    var next;\n    var left;\n\n    var displaying = new defer();\n    var displayed = displaying.promise;\n\n    let dir = this.settings.direction;\n\n    if(!this.views.length) return;\n\n    this.scrollTop = this.container.scrollTop;\n\n    let top  = this.container.scrollTop - this.container.offsetHeight;\n    this.scrollBy(0, -this.layout.height, false);\n\n    this.q.enqueue(function() {\n      displaying.resolve();\n      return displayed;\n    })\n  }\n\n  clear () {\n\n    // // this.q.clear();\n\n    if (this.views) {\n      this.views.hide();\n      this.scrollTo(0,0, true);\n      this.views.clear();\n    }\n  }\n\n  currentLocation() {\n    let visible = this.visible();\n    let container = this.container.getBoundingClientRect();\n    let pageHeight = (container.height < window.innerHeight) ? container.height : window.innerHeight;\n\n    let offset = 0;\n    let used = 0;\n\n    if(this.settings.fullsize) {\n      offset = window.scrollY;\n    }\n\n    let sections = visible.map((view) => {\n      let {index, href} = view.section;\n      let position = view.position();\n      let height = view.height();\n\n      let startPos = offset + container.top - position.top + used;\n      let endPos = startPos + pageHeight - used;\n      if (endPos > height) {\n        endPos = height;\n        used = (endPos - startPos);\n      }\n\n      let totalPages = this.layout.count(height, pageHeight).pages;\n\n      let currPage = Math.ceil(startPos / pageHeight);\n      let pages = [];\n      let endPage = Math.ceil(endPos / pageHeight);\n\n      pages = [];\n      for (var i = currPage; i <= endPage; i++) {\n        let pg = i + 1;\n        pages.push(pg);\n      }\n\n      totalPages = pages.length;\n\n      let mapping = this.mapping.page(view.contents, view.section.cfiBase, startPos, endPos);\n\n      return {\n        index,\n        href,\n        pages,\n        totalPages,\n        mapping\n      };\n    });\n\n    if ( sections.length == 0 ) {\n      self._forceLocationEvent = true;\n    }\n\n    return sections;\n  }\n\n  isRendered() {\n    return this.rendered;\n  }\n\n  scale(s) {\n    if ( s == null ) { s = 1.0; }\n    this.settings.scale = this.settings.xscale = s;\n\n    // if (this.stage) {\n    //   this.stage.scale(s);\n    // }\n\n    this.clear();\n    this.updateLayout();\n    this.emit(EVENTS.MANAGERS.RESIZED, {\n      width: this._stageSize.width,\n      height: this._stageSize.height\n    });\n  }\n\n  calcuateWidth(width) {\n    var retval = width * this.fraction * this.settings.xscale;\n    // if ( retval > this.settings.maxWidth * this.settings.xscale ) {\n    //   retval = this.settings.maxWidth * this.settings.xscale;\n    // }\n    return retval;\n  }\n\n  calculateHeight(height) {\n    var minHeight = this.layout.name == 'xxpre-paginated' ? 0 : this.settings.minHeight;\n    return height > minHeight ? this.layout.height : this.settings.minHeight;\n  }\n\n}\n\nScrollingContinuousViewManager.toString = function() { return 'continuous'; }\n\n//-- Enable binding events to Manager\nEventEmitter(ScrollingContinuousViewManager.prototype);\n\nexport default ScrollingContinuousViewManager;\n\n","function Viewport(t,e){var i=this;this.container=t,this.observers=[],this.lastX=0,this.lastY=0;var o=!1,n=function(){o||(o=!0,requestAnimationFrame(function(){for(var t=i.observers,e=i.getState(),n=t.length;n--;)t[n].check(e);i.lastX=e.positionX,i.lastY=e.positionY,o=!1}))},r=e.handleScrollResize,s=this.handler=r?r(n):n;addEventListener(\"scroll\",s,!0),addEventListener(\"resize\",s,!0),addEventListener(\"DOMContentLoaded\",function(){(i.mutationObserver=new MutationObserver(n)).observe(document,{attributes:!0,childList:!0,subtree:!0})})}function Observer(t){return this.offset=~~t.offset||0,this.container=t.container||document.body,this.once=Boolean(t.once),this.observerCollection=t.observerCollection||defaultObserverCollection,this.activate()}function ObserverCollection(t){for(var e=arguments.length,i=Array(e);e--;)i[e]=arguments[e];if(void 0===t&&(t={}),!(this instanceof ObserverCollection))return new(Function.prototype.bind.apply(ObserverCollection,[null].concat(i)));this.viewports=new Map,this.handleScrollResize=t.handleScrollResize}Viewport.prototype={getState:function(){var t,e,i,o,n=this.container,r=this.lastX,s=this.lastY;return n===document.body?(t=window.innerWidth,e=window.innerHeight,i=window.pageXOffset,o=window.pageYOffset):(t=n.offsetWidth,e=n.offsetHeight,i=n.scrollLeft,o=n.scrollTop),{width:t,height:e,positionX:i,positionY:o,directionX:r<i?\"right\":r>i?\"left\":\"none\",directionY:s<o?\"down\":s>o?\"up\":\"none\"}},destroy:function(){var t=this.handler,e=this.mutationObserver;removeEventListener(\"scroll\",t),removeEventListener(\"resize\",t),e&&e.disconnect()}},Observer.prototype={activate:function(){var t=this.container,e=this.observerCollection,i=e.viewports,o=i.get(t);o||(o=new Viewport(t,e),i.set(t,o));var n=o.observers;return n.indexOf(this)<0&&n.push(this),o},destroy:function(){var t=this.container,e=this.observerCollection.viewports,i=e.get(t);if(i){var o=i.observers,n=o.indexOf(this);n>-1&&o.splice(n,1),o.length||(i.destroy(),e.delete(t))}}};var defaultObserverCollection=new ObserverCollection;function PositionObserver(t){for(var e=arguments.length,i=Array(e);e--;)i[e]=arguments[e];if(void 0===t&&(t={}),!(this instanceof PositionObserver))return new(Function.prototype.bind.apply(PositionObserver,[null].concat(i)));this.onTop=t.onTop,this.onBottom=t.onBottom,this.onLeft=t.onLeft,this.onRight=t.onRight,this.onMaximized=t.onMaximized,this._wasTop=!0,this._wasBottom=!1,this._wasLeft=!0,this._wasRight=!1;var o=Observer.call(this,t);this.check(o.getState())}function ElementObserver(t,e){for(var i=arguments.length,o=Array(i);i--;)o[i]=arguments[i];if(void 0===e&&(e={}),!(this instanceof ElementObserver))return new(Function.prototype.bind.apply(ElementObserver,[null].concat(o)));this.element=t,this.onEnter=e.onEnter,this.onExit=e.onExit,this._didEnter=!1;var n=Observer.call(this,e);isElementInDOM(t)&&this.check(n.getState())}function isElementInViewport(t,e,i,o){var n,r,s,h,l=t.getBoundingClientRect();if(!l.width||!l.height)return!1;var a=window.innerWidth,c=window.innerHeight,v=a;if(o===document.body)n=c,r=0,s=v,h=0;else{if(!(l.top<c&&l.bottom>0&&l.left<v&&l.right>0))return!1;var d=o.getBoundingClientRect();n=d.bottom,r=d.top,s=d.right,h=d.left}return l.top<n+e&&l.bottom>r-e&&l.left<s+e&&l.right>h-e}function isElementInDOM(t){return t&&t.parentNode}PositionObserver.prototype=Object.create(Observer.prototype),PositionObserver.prototype.constructor=PositionObserver,PositionObserver.prototype.check=function(t){var e=this,i=e.onTop,o=e.onBottom,n=e.onLeft,r=e.onRight,s=e.onMaximized,h=e._wasTop,l=e._wasBottom,a=e._wasLeft,c=e._wasRight,v=e.container,d=e.offset,p=e.once,f=v.scrollHeight,b=v.scrollWidth,u=t.width,w=t.height,O=t.positionX,m=t.positionY,g=m-d<=0,y=f>w&&w+m+d>=f,E=O-d<=0,_=b>u&&u+O+d>=b,C=!1;o&&!l&&y?o.call(this,v,t):i&&!h&&g?i.call(this,v,t):r&&!c&&_?r.call(this,v,t):n&&!a&&E?n.call(this,v,t):s&&f===w?s.call(this,v,t):C=!0,p&&!C&&this.destroy(),this._wasTop=g,this._wasBottom=y,this._wasLeft=E,this._wasRight=_},ElementObserver.prototype=Object.create(Observer.prototype),ElementObserver.prototype.constructor=ElementObserver,ElementObserver.prototype.check=function(t){var e=this.container,i=this.onEnter,o=this.onExit,n=this.element,r=this.offset,s=this.once,h=this._didEnter;if(!isElementInDOM(n))return this.destroy();var l=isElementInViewport(n,r,t,e);!h&&l?(this._didEnter=!0,i&&(i.call(this,n,t),s&&this.destroy())):h&&!l&&(this._didEnter=!1,o&&(o.call(this,n,t),s&&this.destroy()))};export{PositionObserver,ElementObserver,ObserverCollection};\n//# sourceMappingURL=viewprt.esm.js.map\n","import IframeView from \"epubjs/src/managers/views/iframe\";\nimport Contents from \"epubjs/src/contents\";\n\nimport { EVENTS } from \"epubjs/src/utils/constants\";\n\nimport {extend, borders, uuid, isNumber, bounds, defer, createBlobUrl, revokeBlobUrl} from \"epubjs/src/utils/core\";\n\nimport {\n  ElementObserver,\n  PositionObserver,\n  ObserverCollection // Advanced: Used for grouping custom viewport handling\n} from \"viewprt\";\n\nclass StickyIframeView extends IframeView {\n    constructor(section, options) {\n        super(section, options);\n\n        this.element.style.height = `${this.layout.height}px`;\n        this.element.style.width = `${this.layout.width}px`;\n        this.element.style.visibility = \"hidden\";\n\n        // console.log(\"AHOY sticky NEW\", this.layout.height);\n    }\n\n    container(axis) {\n        var check = document.querySelector(`div[ref='${this.index}']`);\n        if ( check ) {\n            check.dataset.reused = 'true';\n            return check;\n        }\n\n        var element = document.createElement(\"div\");\n\n        element.classList.add(\"epub-view\");\n\n        // this.element.style.minHeight = \"100px\";\n        element.style.height = \"0px\";\n        element.style.width = \"0px\";\n        element.style.overflow = \"hidden\";\n        element.style.position = \"relative\";\n        element.style.display = \"block\";\n\n        element.setAttribute('ref', this.index);\n\n        if(axis && axis == \"horizontal\"){\n            element.style.flex = \"none\";\n        } else {\n            element.style.flex = \"initial\";\n        }\n\n        return element;\n    }\n\n    create() {\n\n        if(this.iframe) {\n            return this.iframe;\n        }\n\n        if(!this.element) {\n            this.element = this.createContainer();\n        }\n\n        if ( this.element.hasAttribute('layout-height') ) {\n            var height = parseInt(this.element.getAttribute('layout-height'), 10);\n            this._layout_height = height;\n        }\n\n        this.iframe = this.element.querySelector(\"iframe\");\n        if ( this.iframe ) {\n            return this.iframe;\n        }\n\n        this.iframe = document.createElement(\"iframe\");\n        this.iframe.id = this.id;\n        this.iframe.scrolling = \"no\"; // Might need to be removed: breaks ios width calculations\n        this.iframe.style.overflow = \"hidden\";\n        this.iframe.seamless = \"seamless\";\n        // Back up if seamless isn't supported\n        this.iframe.style.border = \"none\";\n\n        this.iframe.setAttribute(\"enable-annotation\", \"true\");\n\n        this.resizing = true;\n\n        // this.iframe.style.display = \"none\";\n        this.element.style.visibility = \"hidden\";\n        this.iframe.style.visibility = \"hidden\";\n        this.element.classList.add('epub-view---loading');\n\n        this.iframe.style.width = \"0\";\n        this.iframe.style.height = \"0\";\n        this._width = 0;\n        this._height = 0;\n\n        this.element.setAttribute(\"ref\", this.index);\n        this.element.setAttribute(\"data-href\", this.section.href);\n\n        // this.element.appendChild(this.iframe);\n        this.added = true;\n\n        this.elementBounds = bounds(this.element);\n\n        // if(width || height){\n        //   this.resize(width, height);\n        // } else if(this.width && this.height){\n        //   this.resize(this.width, this.height);\n        // } else {\n        //   this.iframeBounds = bounds(this.iframe);\n        // }\n\n\n        if((\"srcdoc\" in this.iframe)) {\n            this.supportsSrcdoc = true;\n        } else {\n            this.supportsSrcdoc = false;\n        }\n\n        if (!this.settings.method) {\n            this.settings.method = this.supportsSrcdoc ? \"srcdoc\" : \"write\";\n        }\n\n        return this.iframe;\n    }\n\n    reframe(width, height) {\n        var size;\n\n        var minHeight = this.settings.minHeight || 0;\n        var maxHeight = this.settings.maxHeight || -1;\n\n        // console.log(\"AHOY AHOY reframe\", this.index, width, height);\n\n        if(isNumber(width)){\n            this.element.style.width = width + \"px\";\n            if ( this.iframe ) {\n                this.iframe.style.width = width + \"px\";\n            }\n            this._width = width;\n        }\n\n        if(isNumber(height)){\n            var checkMinHeight = false; // not doing this\n            if ( isNumber(width) && width > height ) { checkMinHeight = false; }\n            height = checkMinHeight && ( height <= minHeight ) ? minHeight : height;\n\n            var styles = window.getComputedStyle(this.element);\n            // setting the element height is delayed\n            if ( this.iframe ) {\n                this.iframe.style.height = height + \"px\";\n            }\n            // console.log(\"AHOY VIEW DISPLAY REFRAME\", this.index, this.element.style.height, this.iframe && this.iframe.style.height);\n            this._height = height;\n        }\n\n        let widthDelta = this.prevBounds ? width - this.prevBounds.width : width;\n        let heightDelta = this.prevBounds ? height - this.prevBounds.height : height;\n\n        size = {\n            width: width,\n            height: height,\n            widthDelta: widthDelta,\n            heightDelta: heightDelta,\n        };\n\n        this.pane && this.pane.render();\n\n        requestAnimationFrame(() => {\n            let mark;\n            for (let m in this.marks) {\n                if (this.marks.hasOwnProperty(m)) {\n                    mark = this.marks[m];\n                    this.placeMark(mark.element, mark.range);\n                }\n            }\n        });\n\n        this.onResize(this, size);\n\n        this.emit(EVENTS.VIEWS.RESIZED, size);\n\n        this.prevBounds = size;\n\n        this.elementBounds = bounds(this.element);\n\n    }\n\n    queryReframeElement() {\n        if ( ! this.iframe ) { return -1; }\n        var height = this.iframe.offsetHeight;\n        var styles = window.getComputedStyle(this.element);\n        var new_height = ( height + parseInt(styles.paddingTop) + parseInt(styles.paddingBottom) )\n        return new_height;\n    }\n\n    reframeElement() {\n        if ( ! this.iframe ) { return; }\n        var height = this.iframe.offsetHeight;\n        var styles = window.getComputedStyle(this.element);\n        var new_height = ( \n            height + \n            parseInt(styles.paddingTop, 10) + \n            parseInt(styles.paddingBottom, 10) + \n            parseInt(styles.borderTop, 10) + \n            parseInt(styles.borderBottom, 10)\n        );\n        var current_height = this.element.offsetHeight;\n        if ( new_height < current_height ) { return ; }\n        this.element.style.height = `${new_height}px`;\n    }\n\n    display(request) {\n        var displayed = new defer();\n\n        if (!this.displayed) {\n\n            this.render(request)\n                .then(function () {\n\n                    this.emit(EVENTS.VIEWS.DISPLAYED, this);\n                    this.onDisplayed(this);\n\n                    this.displayed = true;\n                    displayed.resolve(this);\n\n                }.bind(this), function (err) {\n                    displayed.reject(err, this);\n                });\n\n        } else {\n            displayed.resolve(this);\n        }\n\n\n        return displayed.promise;\n    }\n\n    show() {\n        super.show();\n        this.element.classList.remove('epub-view---loading');\n    }\n\n    hide() {\n        super.hide();\n    }\n\n    onLoad(event, promise) {\n\n      this.window = this.iframe.contentWindow;\n      this.document = this.iframe.contentDocument;\n\n      this.contents = new Contents(this.document, this.document.body, this.section.cfiBase, this.section.index);\n      this.contents.axis = this.settings.axis;\n\n      this.rendering = false;\n\n      var link = this.document.querySelector(\"link[rel='canonical']\");\n      if (link) {\n        link.setAttribute(\"href\", this.section.canonical);\n      } else {\n        link = this.document.createElement(\"link\");\n        link.setAttribute(\"rel\", \"canonical\");\n        link.setAttribute(\"href\", this.section.canonical);\n        this.document.querySelector(\"head\").appendChild(link);\n      }\n\n      this.contents.on(EVENTS.CONTENTS.EXPAND, () => {\n        if(this.displayed && this.iframe) {\n          this.expand();\n          if (this.contents) {\n            // console.log(\"AHOY EXPAND\", this.index, this.layout.columnWidth, this.layout.height);\n            this.layout.format(this.contents);\n          }\n        }\n      });\n\n      this.contents.on(EVENTS.CONTENTS.RESIZE, (e) => {\n        if(this.displayed && this.iframe) {\n          this.expand();\n          if (this.contents) {\n            // console.log(\"AHOY RESIZE\", this.index, this.layout.columnWidth, this.layout.height);\n            this.layout.format(this.contents);\n          }\n        }\n      });\n\n      promise.resolve(this.contents);\n    }\n\n    unload() {\n\n        for (let cfiRange in this.highlights) {\n            this.unhighlight(cfiRange);\n        }\n\n        for (let cfiRange in this.underlines) {\n            this.ununderline(cfiRange);\n        }\n\n        for (let cfiRange in this.marks) {\n            this.unmark(cfiRange);\n        }\n\n        if (this.pane) {\n            this.element.removeChild(this.pane.element);\n            this.pane = undefined;\n        }\n\n        if (this.blobUrl) {\n            revokeBlobUrl(this.blobUrl);\n        }\n\n        if(this.displayed){\n            this.displayed = false;\n\n            this.removeListeners();\n\n            this.stopExpanding = true;\n            this.element.removeChild(this.iframe);\n            this.element.style.visibility = \"hidden\";\n\n            this.iframe = undefined;\n            this.contents = undefined;\n\n            // this._textWidth = null;\n            // this._textHeight = null;\n            // this._width = null;\n            // this._height = null;\n        }\n\n        // this.element.style.height = \"0px\";\n        // this.element.style.width = \"0px\";\n    }\n\n    // setLayout(layout) {\n        \n    // }\n\n}\n\nexport default StickyIframeView;\n\n","import Url from \"epubjs/src/utils/url\";\n\nexport function popupTables(reader, contents) {\n  var tables = contents.document.querySelectorAll('table');\n  var h = reader._rendition.manager.layout.height;\n  var clipped_tables = [];\n  for(var i = 0; i < tables.length; i++) {\n    var table = tables[i];\n    if ( table.offsetHeight >= ( h * 0.75 ) ) {\n      clipped_tables.push(table);\n    }\n  }\n\n  if ( ! clipped_tables.length ) { return ; }\n\n  contents._originalHTML = contents.document.documentElement.outerHTML;\n\n  contents.addStylesheetRules({\n    'table.clipped': {\n      'break-inside': 'avoid',\n      'width': `${reader._rendition.manager.layout.columnWidth * 0.95}px !important`,\n      'table-layout': 'fixed'\n    },\n    'table.clipped tbody': {\n      'height': `${h * 0.25}px !important`,\n      overflow: 'scroll !important',\n      display: 'block !important',\n      position: 'relative !important',\n      width: '100%'\n    },\n    'table.clipped tr': {\n      display: 'block !important'\n    },\n    'table.clipped::after': {\n      content: \"\",\n      display: 'block',\n      break: 'all'\n    },\n    'div.clipped': {\n      position: 'absolute',\n      display: 'flex',\n      'align-items': 'center',\n      'justify-content': 'center',\n      top: '0px',\n      bottom: '0px',\n      right: '0px',\n      left: '0px',\n      'background-color': 'rgba(255, 255, 255, 0.75)'\n    },\n    'div.clipped button': {\n      cursor: 'pointer',\n      'background-color': '#000000',\n      color: '#ffffff',\n      margin: '2px 0',\n      border: '1px solid transparent',\n      'border-radius': '4px',\n      padding: '1rem 1rem',\n      'text-transform': 'uppercase'\n    },\n    'div.clipped button:active': {\n      transform: 'translateY(1px)',\n      filter: 'saturate(150%)'\n    },\n    'div.clipped button:hover, div.clipped button:focus': {\n      color: '#000000',\n      'border-color': 'currentColor',\n      'background-color': 'white'\n    }\n  });\n\n  reader._originalHTML = reader._originalHTML || {};\n\n  clipped_tables.forEach((table) => {\n    // find a dang background color\n    var element = table;\n    var styles\n    var bgcolor;\n    while ( bgcolor === undefined && element instanceof HTMLElement ) {\n      styles = window.getComputedStyle(element);\n      if ( styles.backgroundColor != 'rgba(0, 0, 0, 0)' && styles.backgroundColor != 'transparent' ) {\n        bgcolor = styles.backgroundColor;\n        break;\n      }\n      element = element.parentNode;\n    }\n\n    if ( ! bgcolor ) {\n      // no background color defined in the EPUB, so what is cozy-sun-bear using?\n      element = reader._panes['epub'];\n      while ( bgcolor === undefined && element instanceof HTMLElement ) {\n        styles = window.getComputedStyle(element);\n        if ( styles.backgroundColor != 'rgba(0, 0, 0, 0)' && styles.backgroundColor != 'transparent' ) {\n          bgcolor = styles.backgroundColor;\n          break;\n        }\n        element = element.parentNode;\n      }\n    }\n\n    if ( ! bgcolor ) { bgcolor = '#fff'; }\n\n    var tableHTML = table.outerHTML;\n\n    table.classList.add('clipped');\n\n    var div = document.createElement('div');\n    div.classList.add('clipped');\n    table.querySelector('tbody').appendChild(div);\n\n    var button = document.createElement('button');\n    button.innerText = 'Open table';\n\n    var tableId = table.getAttribute('data-id');\n    if ( ! tableId ) { \n      var ts = ( new Date() ).getTime();\n      tableId = \"table\" + ts + Math.random(ts);\n      table.setAttribute('data-id', tableId);\n    }\n\n    reader._originalHTML[tableId] = tableHTML;\n    // button.dataset.tableHTML = tableHTML;\n    button.addEventListener('click', function(event) {\n      event.preventDefault();\n\n      var regex = /<body[^>]+>/;\n      var index0 = contents._originalHTML.search(regex);\n      var tableHTML = reader._originalHTML[tableId];\n      var newHTML = contents._originalHTML.substr(0, index0) + `<body style=\"padding: 1.5rem; background: ${bgcolor}\"><section>${tableHTML}</section></body></html>`;\n\n      reader.popup({\n        title: 'View Table',\n        srcdoc: newHTML,\n        onLoad: function(contentDocument, modal) {\n          // adpated from epub.js#replaceLinks --- need to catch _any_ link\n          // to close the modal\n          var base = contentDocument.querySelector(\"base\");\n          var location = base ? base.getAttribute(\"href\") : undefined;\n\n          var links = contentDocument.querySelectorAll('a[href]');\n          for(var i = 0; i < links.length; i++) {\n            var link = links[i];\n            var href = link.getAttribute('href');\n            link.addEventListener('click', function(event) {\n              modal.closeModal();\n              var absolute = (href.indexOf('://') > -1);\n              if ( absolute ) {\n                link.setAttribute('target', '_blank');\n              } else {\n                var linkUrl = new Url(href, location);\n                if (linkUrl) {\n                  event.preventDefault();\n                  reader.gotoPage(linkUrl.Path.path + ( linkUrl.hash ? linkUrl.hash : '' ));\n                }\n              }\n            })\n          } \n        }\n      })\n\n    })\n\n    div.appendChild(button);\n\n  });\n}\n\nexport function extractElement() {\n\n}","\nvar INTERACTIVE = {};\nINTERACTIVE['A'] = true;\nINTERACTIVE['SELECT'] = true;\nINTERACTIVE['BUTTON'] = true;\nINTERACTIVE['INPUT'] = true;\n\nvar installedResizeHandler = false;\n\nfunction isInteractive(node) {\n  if ( INTERACTIVE[node.nodeName] ) {\n    // possibly...\n    if ( node.nodeName == 'A' ) { return node.hasAttribute('href'); }\n    return true;\n  }\n  return false;\n}\n\nfunction hideEverythingInContents(contents) {\n  var elements = contents.document.querySelectorAll('body *');\n  for(var i = 0; i < elements.length; i++) {\n    if ( elements[i].nodeType == Node.ELEMENT_NODE ) {\n      var element = elements[i];\n      element.setAttribute('aria-hidden', true);\n      element.setAttribute('tabindex', '-1');\n    }\n  }\n}\n\nfunction hideEverythingVisible(contents) {\n  var elements = contents.document.querySelectorAll('[aria-hidden=\"false\"]');\n  for(var i = 0; i < elements.length; i++) {\n    if ( elements[i].nodeType == Node.ELEMENT_NODE ) {\n      elements[i].setAttribute('aria-hidden', true);\n      if ( INTERACTIVE[elements[i].nodeName] ) {\n        elements[i].setAttribute('tabindex', '-1');\n      }\n    }\n  }\n}\n\nfunction findMatchingContents(contents, cfi) {\n  for(var content of contents) {\n    if ( cfi.indexOf(content.cfiBase) > -1 ) {\n      return content;\n    }\n  }\n  return null; // ???\n}\n\nfunction showEverythingVisible(container, range) {\n  var selfOrElement = function(node) {\n    return ( node.nodeType == Node.TEXT_NODE ) ? node.parentNode : node;\n  }\n\n  var showNode = function(node) {\n    node.setAttribute('aria-hidden', false);\n    if ( INTERACTIVE[node.nodeName] ) {\n      var bounds = node.getBoundingClientRect();\n      var x = bounds.x;\n      var x2 = x + container.scrollLeft;\n      // console.log(\"AHOY NODE BOUNDS\", node, x, x2, \n      //   \"A\",\n      //   x > container.scrollLeft + container.offsetWidth,\n      //   x < container.scrollLeft,\n      //   \"B\",\n      //   x2 > container.scrollLeft + container.offsetWidth,\n      //   x2 < container.scrollLeft\n      //   )\n      if ( x > container.scrollLeft + container.offsetWidth || \n           x < container.scrollLeft ) {\n      } else {\n        node.setAttribute('tabindex', 0);\n        node.addEventListener('focus', (event) => {\n          // console.log(\"AHOY FOCUS\", node, container.scrollLeft, container.dataset.scrollLeft);\n          var scrollLeft = parseInt(container.dataset.scrollLeft, 10);\n          setTimeout(() => {\n            container.scrollLeft = scrollLeft;\n          }, 0);\n        })\n      }\n    }\n    // node.setAttribute('tabindex', 0);\n    for(var child of node.children){\n      showNode(child);\n    }\n  }\n\n  var showNodeAndSelf = function(node) {\n    if ( node.getAttribute('aria-hidden') == 'true' ) {\n      showNode(node);\n      var parent = node.parentNode;\n      while ( parent != node.ownerDocument.body ) {\n        // console.log(\"AHOY ACTIVATING UP\", parent);\n        parent.setAttribute('aria-hidden', false);\n        //node.setAttribute('tabindex', 0);\n        parent = parent.parentNode;\n      }\n    }\n  }\n\n  var ancestor = selfOrElement(range.commonAncestorContainer);\n  var startContainer = selfOrElement(range.startContainer);\n  var endContainer = selfOrElement(range.endContainer);\n\n  var _iterator = document.createNodeIterator(\n    ancestor,\n    NodeFilter.SHOW_ALL,\n    {\n      acceptNode: function(node) {\n        return NodeFilter.FILTER_ACCEPT;\n      }\n    }\n  )\n\n  var _nodes = [];\n  while ( _iterator.nextNode() ) {\n    // console.log(\"AHOY ITERATOR\", _nodes.length, _iterator.referenceNode, startContainer, _iterator.referenceNode !== startContainer);\n    if (_nodes.length === 0 && _iterator.referenceNode !== startContainer) continue;\n    _nodes.push(_iterator.referenceNode);\n    if (_iterator.referenceNode === endContainer) break;\n  }\n\n  // console.log(\"AHOY NODES\", _nodes, _nodes[0] == startContainer);\n  if ( _nodes.length == 1 && _nodes[0] == startContainer ) {\n    _nodes.pop();\n    for(var child of startContainer.children) {\n      _nodes.push(child);\n    }\n  }\n\n  _nodes.forEach((node) => {\n    if ( node.nodeType == Node.ELEMENT_NODE ) {\n      showNodeAndSelf(node);\n    } else {\n      showNodeAndSelf(node.parentNode);\n    }\n  })\n}\n\nexport function updateFocus(reader, location) {\n  if ( reader.settings.flow == 'scrolled-doc' ) { return ; }\n  if ( reader.options.disableFocusHandling ) { return ; }\n  setTimeout(() => {\n    if ( location.start.cfi == reader._last_location_start_cfi && \n         location.end.cfi == reader._last_location_end_cfi ) {\n      return;\n    }\n    reader._last_location_start_cfi = location.start.cfi;\n    reader._last_location_end_cfi = location.end.cfi;\n    __updateFocus(reader, location);\n  }, 0);\n\n  reader._last_location_start = location.start.href;\n}\n\nvar elemsWithBoundingRects = [];\nvar getBoundingClientRect = function(element) {\n  if ( ! element._boundingClientRect ) {\n\n    // If not, get it then store it for future use.\n    element._boundingClientRect = element.getBoundingClientRect();\n    elemsWithBoundingRects.push( element );\n  }\n  return element._boundingClientRect;\n}\n\nvar clearClientRects = function() {\n  var i;\n  for ( i = 0; i < elemsWithBoundingRects.length; i++ ) {\n    if ( elemsWithBoundingRects[ i ] ) {\n      elemsWithBoundingRects[ i ]._boundingClientRect = null;\n    }\n  }\n  elemsWithBoundingRects = [];\n}\n\nexport function __updateFocus(reader, location) {\n  // don't use location\n\n  var selfOrElement = function(node) {\n    return ( node.nodeType == Node.TEXT_NODE ) ? node.parentNode : node;\n  }\n\n  var container = reader._rendition.manager.container;\n  var contents = findMatchingContents(reader._rendition.manager.getContents(), location.start.cfi);\n  hideEverythingVisible(contents);\n\n  var containerX = container.scrollLeft;\n  var containerX2 = container.scrollLeft + container.offsetWidth;\n\n  var _showThisNode = function(node) {\n    var bounds = getBoundingClientRect(node); // node.getBoundingClientRect();\n    var x = bounds.left;\n    var x2 = bounds.left + bounds.width;\n\n    var isVisible = false;\n    if ( x <= containerX && x2 >= containerX2 ) { isVisible = true; }\n    else if ( x >= containerX && x < containerX2 ) { isVisible = true; }\n    else if ( x2 > containerX && x2 <= containerX2 ) { isVisible = true; }\n    // else if ( x <= containerX && x2 <= containerX2 ) { isVisible = true; }\n    // else if ( x >= containerX && x2 <= containerX2 ) { isVisible = true; }\n    // else if ( x >= containerX && x2 > containerX2 ) { isVisible = true; }\n\n    if ( isVisible ) {\n      // console.log(\"AHOY\", isVisible, node, bounds, containerX, containerX2);\n      node.setAttribute('aria-hidden', 'false');\n      if ( isInteractive(node) ) {\n        node.setAttribute('tabindex', '0');\n      }\n      var hasSeenVisibleChild = false;\n      for(var child of node.children) {\n        var retval = _showThisNode(child);\n        if ( retval ) { hasSeenVisibleChild = true; }\n        if ( ! retval && hasSeenVisibleChild ) {\n          break;\n        }\n      }\n    }\n\n    return isVisible;\n  }\n\n  var startRange = new ePub.CFI(location.start.cfi).toRange(contents.document);\n  var startNode = selfOrElement(startRange.startContainer);\n\n  var _nodes = [];\n  var checkNode = startNode;\n  while ( checkNode != contents.document.body ) {\n    var bounds = getBoundingClientRect(checkNode); // checkNode.getBoundingClientRect();\n    var x = bounds.left;\n    var x2 = bounds.left + bounds.width;\n\n    var isVisible = false;\n    // if ( x <= containerX && x2 >= containerX2 ) { isVisible = true; }\n    if ( x >= containerX && x < containerX2 ) { isVisible = true; }\n    else if ( x2 > containerX && x2 <= containerX2 ) { isVisible = true; }\n\n    if ( isVisible ) {\n      startNode = checkNode;\n      checkNode = checkNode.parentNode;\n    } else {\n      break;\n    }\n\n  }\n\n  var parentNode = startNode; // .parentNode;\n  while ( parentNode != contents.document.body ) {\n    parentNode.setAttribute('aria-hidden', false);\n    parentNode = parentNode.parentNode;\n  }\n\n  _showThisNode(startNode);\n\n  var children = startNode.parentNode.children;\n  var doProcess = false;\n  for (var nextNode of children) {\n    if ( nextNode == startNode ) { doProcess = true; }\n    else if ( doProcess ) {\n      var isVisible = _showThisNode(nextNode);\n      if ( ! isVisible ) { break; }\n    }\n  }\n}\n\nexport function setupFocusRules(reader) {\n\n  if ( ! installedResizeHandler ) {\n    installedResizeHandler = true;\n    reader.on('resize', () => {\n      clearClientRects();\n    })\n  }\n\n  var contents = reader._rendition.getContents();\n  contents.forEach( (content) => {\n  \n    if ( reader.options.debugFocusHandling ) {\n      content.addStylesheetRules({\n        '[aria-hidden=\"true\"]': {\n          'opacity': '0.25 !important'\n        },\n        ':focus': {\n          'outline': '2px solid goldenrod',\n          'padding': '4px',\n          'background': 'lightgoldenrodyellow'\n        }\n      })\n    }\n\n    hideEverythingInContents(content);\n\n    // --- attempts to heal safari/edge\n    content.document.addEventListener('keydown', function(event) {\n      if ( event.keyCode == 9 ) {\n\n        var activeElement = content.document.activeElement;\n        if ( activeElement ) {\n          reader._manager.container.dataset.scrollLeft = reader._manager.container.scrollLeft;\n        } else {\n          reader._manager.container.dataset.scrollLeft = 0;\n        }\n      }\n    })\n  });\n\n  reader.on('keyDown', function(data) {\n    if ( data.keyName == 'Tab' ) {\n      reader._manager.container.dataset.scrollLeft = reader._manager.container.scrollLeft;\n    }\n\n    if ( data.keyName == 'Tab' && data.inner ) {\n      var container = reader._rendition.manager.container;\n      // container.dataset.scrollLeft = 0;\n\n      var mod;\n      var delta;\n      var x; var xyz;\n      setTimeout(function() {\n        var scrollLeft = container.scrollLeft;\n        mod = scrollLeft % parseInt(reader._rendition.manager.layout.delta, 10);\n        if ( mod > 0 && ( mod / reader._rendition.manager.layout.delta ) < 0.99 ) {\n          // var x = Math.floor(event.target.scrollLeft / parseInt(self._rendition.manager.layout.delta, 10)) + 1;\n          // var delta = ( x * self._rendition.manager.layout.delta) - event.target.scrollLeft;\n          x = Math.floor(container.scrollLeft / parseInt(reader._rendition.manager.layout.delta, 10));\n          if ( data.shiftKey ) { x -= 0 ; }\n          else { x += 1; }\n          var y = container.scrollLeft;\n          delta = ( x * self._rendition.manager.layout.delta ) - y;\n          xyz = ( x * reader._rendition.manager.layout.delta );\n          // if ( data.shiftKey ) { delta *= -1 ; }\n          if ( true || ! data.shiftKey ) {\n            reader._rendition.manager.scrollBy(delta);\n          }\n        }\n      }, 0);\n    }\n  })\n}","import * as Util from '../core/Util';\nimport {Reader} from './Reader';\nimport ePub from 'epubjs';\nwindow.ePub = ePub;\nimport * as DomUtil from '../dom/DomUtil';\nimport * as Browser from '../core/Browser';\n\nimport path from \"path-webpack\";\n\nimport PrePaginatedContinuousViewManager from '../epubjs/managers/continuous/prepaginated';\nimport ReusableIframeView from '../epubjs/managers/views/iframe';\n\nimport ScrollingContinuousViewManager from '../epubjs/managers/continuous/scrolling';\nimport StickyIframeView from '../epubjs/managers/views/sticky';\n\nimport { popupTables } from \"../utils/manglers\";\nimport * as focus from \"../utils/focus\";\n\nimport debounce from 'lodash/debounce';\n\nimport Hook from \"epubjs/src/utils/hook\";\n\nReader.EpubJS = Reader.extend({\n\n  initialize: function(id, options) {\n    Reader.prototype.initialize.apply(this, arguments);\n    this._epubjs_ready = false;\n    window.xpath = path;\n  },\n\n  open: function(target, callback) {\n    var self = this;\n    if ( typeof(target) == 'function' ) {\n      callback = target;\n      target = undefined;\n    }\n    if ( callback == null ) {\n      callback = function() { };\n    }\n\n    self.rootfiles = [];\n\n    this.options.rootfilePath = this.options.rootfilePath || sessionStorage.getItem('rootfilePath');\n\n    var book_href = this.options.href;\n    var book_options = { packagePath: this.options.rootfilePath };\n    if ( this.options.useArchive ) {\n      book_href = book_href.replace(/\\/(\\w+)\\/$/, '/$1/$1.sm.epub');\n      book_options.openAs = 'epub';\n    }\n    this._book = ePub(book_href, book_options);\n    sessionStorage.removeItem('rootfilePath');\n\n    this._book.loaded.navigation.then(function(toc) {\n      self._contents = toc;\n      self.metadata = self._book.packaging.metadata;\n\n      self.fire('updateContents', toc);\n      self.fire('updateTitle', self._book.packaging.metadata);\n    })\n    this._book.ready.then(function() {\n      self.parseRootfiles();\n\n      self.draw(target, callback);\n\n      if ( self.metadata.layout == 'pre-paginated' ) {\n        // fake it with the spine\n        var locations = [];\n        self._book.spine.each(function(item) {\n          locations.push(`epubcfi(${item.cfiBase}!/4/2)`);\n          self.locations._locations.push(`epubcfi(${item.cfiBase}!/4/2)`);\n        });\n        self.locations.total = locations.length;\n        var t;\n        var f = function() {\n          if ( self._rendition && self._rendition.manager && self._rendition.manager.stage ) {\n            var location = self._rendition.currentLocation();\n            if ( location && location.start) {\n              self.fire('updateLocations', locations);\n              clearTimeout(t);\n              return;\n            }\n          }\n          t = setTimeout(f, 100);\n        }\n\n        t = setTimeout(f, 100);\n      } else {\n        self._book.locations.generate(1600).then(function(locations) {\n          self.fire('updateLocations', locations);\n        })\n      }\n    })\n    // .then(callback);\n  },\n\n  parseRootfiles: function() {\n    var self = this;\n    self._book.load(self._book.url.resolve(\"META-INF/container.xml\")).then(function(containerDoc) {\n        var rootfiles = containerDoc.querySelectorAll(\"rootfile\");\n        if ( rootfiles.length > 1 ) {\n          for(var i = 0; i < rootfiles.length; i++) {\n            var rootfile = rootfiles[i];\n            var rootfilePath = rootfile.getAttribute('full-path');\n            var label = rootfile.getAttribute('rendition:label');\n            var layout = rootfile.getAttribute('rendition:layout');\n            self.rootfiles.push({\n              rootfilePath: rootfilePath,\n              label: label,\n              layout: layout\n            })\n          }\n        }\n    })\n  },\n\n  draw: function(target, callback) {\n    var self = this;\n\n    if ( self._rendition && ! self._rendition.draft ) {\n      // self._unbindEvents();\n      var container = self._rendition.manager.container;\n      Object.keys(self._rendition.hooks).forEach(function(key) {\n        self._rendition.hooks[key].clear();\n      })\n      self._rendition.destroy();\n      self._rendition = null;\n    }\n\n\n    var key = self.metadata.layout || 'reflowable';\n    var flow = this.options.flow;\n    if ( self._cozyOptions[key] && self._cozyOptions[key].flow ) {\n      flow = self._cozyOptions[key].flow;\n      this.options.flow = flow; // restore from stored preferences\n    }\n\n    if ( flow == 'auto' ) {\n      if ( this.metadata.layout == 'pre-paginated' ) {\n          if ( this._container.offsetHeight <= this.options.forceScrolledDocHeight ){\n            flow = 'scrolled-doc';\n          }\n      } else {\n        // flow = 'paginated';\n        flow = this.metadata.flow || 'auto';\n      }\n    }\n\n    // if ( flow == 'auto' && this.metadata.layout == 'pre-paginated' ) {\n    //   if ( this._container.offsetHeight <= this.options.forceScrolledDocHeight ){\n    //     flow = 'scrolled-doc';\n    //   }\n    // }\n\n    // var key = `${flow}/${self.metadata.layout}`;\n    if ( self._cozyOptions[key] ) {\n      if ( self._cozyOptions[key].text_size ) {\n        self.options.text_size = self._cozyOptions[key].text_size;\n      }\n      if ( self._cozyOptions[key].scale ) {\n        self.options.scale = self._cozyOptions[key].scale;\n      }\n    }\n\n    this.settings = { flow: flow, stylesheet: this.options.injectStylesheet };\n    this.settings.manager = this.options.manager || 'default';\n\n    // if ( this.settings.flow == 'auto' && this.metadata.layout == 'pre-paginated' ) {\n    //   // dumb check to see if the window is _tall_ enough to put\n    //   // two pages side by side\n    //   if ( this._container.offsetHeight <= this.options.forceScrolledDocHeight ) {\n    //     this.settings.flow = 'scrolled-doc';\n\n    //     // this.settings.manager = PrePaginatedContinuousViewManager;\n    //     // this.settings.view = ReusableIframeView;\n\n    //     this.settings.manager = ScrollingContinuousViewManager;\n    //     this.settings.view = StickyIframeView;\n    //     this.settings.width = '100%'; // 100%?\n    //     this.settings.spine = this._book.spine;\n    //   }\n    // }\n\n    if ( this.settings.flow == 'auto' || this.settings.flow == 'paginated' ) {\n      this._panes['epub'].style.overflow = this.metadata.layout == 'pre-paginated' ? 'auto' : 'hidden';\n      this.settings.manager = 'default';\n    } else {\n      this._panes['epub'].style.overflow = 'auto';\n      if ( this.settings.manager == 'default' ) {\n        // this.settings.manager = 'continuous';\n        this.settings.manager = ScrollingContinuousViewManager;\n        this.settings.view = StickyIframeView;\n        this.settings.width = '100%'; // 100%?\n        this.settings.spine = this._book.spine;\n      }\n    }\n\n    if ( ! callback ) {\n      callback = function() { };\n    }\n\n    self.settings.height = '100%';\n    self.settings.width = '100%';\n    self.settings['ignoreClass'] = 'annotator-hl';\n\n    if ( this.metadata.layout == 'pre-paginated' && this.settings.manager == 'continuous' ) {\n        // this.settings.manager = 'prepaginated';\n        // this.settings.manager = PrePaginatedContinuousViewManager;\n        // this.settings.view = ReusableIframeView;\n        this.settings.manager = ScrollingContinuousViewManager;\n        this.settings.view = StickyIframeView;\n        this.settings.spread = 'none';\n    }\n\n    if ( this.metadata.layout == 'pre-paginated' && this.settings.manager == ScrollingContinuousViewManager ) {\n      if ( this.options.minHeight ) {\n        this.settings.minHeight = this.options.minHeight;\n      }\n    }\n\n    if ( self.options.scale != '100' ) {\n      self.settings.scale = parseInt(self.options.scale, 10) / 100;\n    }\n\n    self._panes['book'].dataset.manager = this.settings.manager + ( this.settings.spread ? `-${this.settings.spread}` : '');\n    self._panes['book'].dataset.layout = this.metadata.layout || 'reflowable';\n\n    self._drawRendition(target, callback);\n  },\n\n  _drawRendition: function(target, callback) {\n    var self = this;\n\n    // self._rendition = self._book.renderTo(self._panes['epub'], self.settings);\n    self.rendition = new ePub.Rendition(self._book, self.settings);\n    self._book.rendition = self._rendition;\n    self._updateFontSize();\n    self._rendition.attachTo(self._panes['epub']);\n\n    self._bindEvents();\n    self._drawn = true;\n\n    if ( target && target.start ) { target = target.start; }\n    if ( ! target && window.location.hash ) {\n      if ( window.location.hash.substr(1, 3) == '/6/' ) {\n        var original_target = window.location.hash.substr(1);\n        target = decodeURIComponent(window.location.hash.substr(1));\n        target = \"epubcfi(\" + target + \")\";\n      } else {\n        target = window.location.hash.substr(2);\n        target = self._book.url.path().resolve(decodeURIComponent(target));\n      }\n    }\n\n    var status_index = 0;\n    self._rendition.on('started', function() {\n      self._manager = self._rendition.manager;\n\n      self._rendition.manager.on(\"building\", function(status) {\n        if ( status ) {\n          status_index += 1;\n          self._panes['loader-status'].innerHTML = `<span>${Math.round((status_index / status.total) * 100.0)}%</span>`;\n        } else {\n          self._enableBookLoader(-1);\n        }\n      })\n      self._rendition.manager.on(\"built\", function() {\n        self._disableBookLoader(true);\n      })\n    })\n\n    self._rendition.hooks.content.register(function(contents) {\n      self.fire('ready:contents', contents);\n      self.fire('readyContents', contents);\n\n      // check for tables + columns\n      if ( self._rendition.manager.layout.name == 'reflowable' && ! ( Browser.ie || Browser.edge ) ) {\n        popupTables(self, contents);\n      }\n\n    })\n\n    self.gotoPage(target, function() {\n      window._loaded = true;\n      self._initializeReaderStyles();\n\n      if ( callback ) { callback(); }\n\n      self._epubjs_ready = true;\n\n      self.gotoPage(target, function() {\n        setTimeout(function() {\n          self.fire('opened');\n          self.fire('ready');\n          self._disableBookLoader();\n          clearTimeout(self._queueTimeout);\n          self.tracking.event(\"openBook\", {\n            rootFilePath: self.options.rootFilePath,\n            flow: self.settings.flow,\n            manager: self.settings.manager\n          });\n        }, 100);\n      })\n\n    })\n  },\n\n  _scroll: function(delta) {\n    var self = this;\n    if ( self.options.flow == 'XXscrolled-doc' ) {\n      var container = self._rendition.manager.container;\n      var rect = container.getBoundingClientRect();\n      var scrollTop = container.scrollTop;\n      var newScrollTop = scrollTop;\n      var scrollBy = ( rect.height * 0.98 );\n      switch(delta) {\n        case 'PREV':\n          newScrollTop = -( scrollTop + scrollBy );\n          break;\n        case 'NEXT':\n          newScrollTop = ( scrollTop + scrollBy );\n          break;\n        case 'HOME':\n          newScrollTop = 0;\n          break;\n        case 'END':\n          newScrollTop = container.scrollHeight - scrollBy;\n          break;\n      }\n      container.scrollTop = newScrollTop;\n      return ( Math.floor(container.scrollTop) != Math.floor(scrollTop) );\n    }\n    return false;\n  },\n\n  _navigate: function(promise, callback) {\n    var self = this;\n    self._enableBookLoader(100);\n    promise.then(function() {\n      self._disableBookLoader();\n      if ( callback ) { callback(); }\n    }).catch(function(e) {\n      self._disableBookLoader();\n      if ( callback ) { callback(); }\n      console.log(\"AHOY NAVIGATE ERROR\", e);\n      throw(e);\n    })\n  },\n\n  next: function() {\n    var self = this;\n    this.tracking.action('reader/go/next');\n    self._scroll('NEXT') || self._navigate(this._rendition.next());\n  },\n\n  prev: function() {\n    this.tracking.action('reader/go/previous');\n    this._scroll('PREV') || this._navigate(this._rendition.prev());\n  },\n\n  first: function() {\n    this.tracking.action('reader/go/first');\n    this._navigate(this._rendition.display(0), undefined);\n  },\n\n  last: function() {\n    var self = this;\n    this.tracking.action('reader/go/last');\n    var target = this._book.spine.length - 1;\n    this._navigate(this._rendition.display(target), undefined);\n  },\n\n  gotoPage: function(target, callback) {\n    var self = this;\n\n    var hash;\n    if ( target != null ) {\n      var section = this._book.spine.get(target);\n      if ( ! section) {\n        // maybe it needs to be resolved\n        var guessed = target;\n        if ( guessed.indexOf(\"://\") < 0 ) {\n          var path1 = path.resolve(this._book.path.directory, this._book.packaging.navPath);\n          var path2 = path.resolve(path.dirname(path1), target);\n          guessed = this._book.canonical(path2);\n        }\n        if ( guessed.indexOf(\"#\") !== 0 ) {\n          hash = guessed.split('#')[1];\n          guessed = guessed.split('#')[0];\n        }\n\n        this._book.spine.each(function(item) {\n          if ( item.canonical == guessed ) {\n            section = item;\n            target = section.href;\n            return;\n          }\n        })\n\n        if ( hash ) {\n          target = target + '#' + hash;\n        }\n\n        // console.log(\"AHOY GUESSED\", target);\n      } else if ( target.toString().match(/^\\d+$/) ) {\n        // console.log(\"AHOY USING\", section.href);\n        target = section.href;\n      }\n\n      if ( ! section ) {\n        if ( ! this._epubjs_ready ) {\n          target = 0;\n        } else {\n          return;\n        }\n      }\n    }\n\n    self.tracking.reset();\n    var navigating = this._rendition.display(target).then(function() {\n      this._rendition.display(target);\n    }.bind(this));\n    this._navigate(navigating, callback);\n  },\n\n  percentageFromCfi: function(cfi) {\n    return this._book.percentageFromCfi(cfi);\n  },\n\n  destroy: function() {\n    if ( this._rendition ) {\n      try {\n        this._rendition.destroy();\n      } catch(e) {}\n    }\n    this._rendition = null;\n    this._drawn = false;\n  },\n\n  reopen: function(options, target) {\n    // different per reader?\n    var target = target || this.currentLocation();\n    if( target.start ) { target = target.start ; }\n    if ( target.cfi ) { target = target.cfi ; }\n\n    var doUpdate = false;\n    if ( options === true ) { doUpdate = true; options = {}; }\n    var changed = {};\n    Object.keys(options).forEach(function(key) {\n      if ( options[key] != this.options[key] ) {\n        doUpdate = true;\n        changed[key] = true;\n      }\n      // doUpdate = doUpdate || ( options[key] != this.options[key] );\n    }.bind(this));\n\n    if ( ! doUpdate ) {\n      return;\n    }\n\n    // performance hack\n    if ( Object.keys(changed).length == 1 && changed.scale ) {\n      reader.options.scale = options.scale;\n      this._updateScale();\n      return;\n    }\n\n    if ( options.rootfilePath && options.rootfilePath != this.options.rootfilePath ) {\n      // we need to REOPEN THE DANG BOOK\n      sessionStorage.setItem('rootfilePath', options.rootfilePath);\n      location.reload();\n      return;\n    }\n\n    Util.extend(this.options, options);\n\n    this.draw(target, function() {\n      // this._updateFontSize();\n      this._updateScale();\n      this._updateTheme();\n      this._selectTheme(true);\n    }.bind(this))\n  },\n\n  currentLocation: function() {\n    if ( this._rendition && this._rendition.manager ) {\n      this._cached_location = this._rendition.currentLocation();\n    }\n    return this._cached_location;\n  },\n\n  _bindEvents: function() {\n    var self = this;\n\n    // add a stylesheet to stop images from breaking their columns\n    var add_max_img_styles = false;\n    if ( this._book.packaging.metadata.layout == 'pre-paginated' ) {\n      // NOOP\n    } else if ( this.options.flow == 'auto' || this.options.flow == 'paginated' ) {\n      add_max_img_styles = true;\n    }\n\n    var custom_stylesheet_rules = [];\n\n    // force 90% height instead of default 60%\n    if ( this.metadata.layout != 'pre-paginated' ) {\n      this._rendition.hooks.content.register(function(contents) {\n        contents.addStylesheetRules({\n          \"img\" : {\n            \"max-width\": (this._layout.columnWidth ? this._layout.columnWidth + \"px\" : \"100%\") + \"!important\",\n            \"max-height\": (this._layout.height ? (this._layout.height * 0.9) + \"px\" : \"90%\") + \"!important\",\n            \"object-fit\": \"contain\",\n            \"page-break-inside\": \"avoid\"\n          },\n          \"svg\" : {\n            \"max-width\": (this._layout.columnWidth ? this._layout.columnWidth + \"px\" : \"100%\") + \"!important\",\n            \"max-height\": (this._layout.height ? (this._layout.height * 0.9) + \"px\" : \"90%\") + \"!important\",\n            \"page-break-inside\": \"avoid\"\n          },\n          \"body\": {\n            \"overflow\": \"hidden\",\n            \"column-rule\": \"1px solid #ddd\"\n          }\n        });\n      }.bind(this._rendition))\n    } else {\n      this._rendition.hooks.content.register(function(contents) {\n        contents.addStylesheetRules({\n          \"img\" : {\n            // \"border\": \"64px solid black !important\",\n            \"box-sizing\": \"border-box !important\"\n          },\n          \"figure\": {\n            \"box-sizing\": \"border-box !important\",\n            \"margin\": \"0 !important\"\n          },\n          \"body\": {\n            \"margin\": \"0\",\n            \"overflow\": \"hidden\"\n          }\n        });\n      }.bind(this._rendition));\n    }\n\n    this._updateFontSize();\n\n    if ( custom_stylesheet_rules.length ) {\n      this._rendition.hooks.content.register(function(view) {\n        view.addStylesheetRules(custom_stylesheet_rules);\n      })\n    }\n\n    this._rendition.on('resized', function(box) {\n      self.fire('resized', box);\n    })\n\n    this._rendition.on('click', function(event, contents) {\n      if ( event.isTrusted ) {\n        this.tracking.action(\"inline/go/link\");\n      }\n    }.bind(this));\n\n    this._rendition.on('keydown', function(event, contents) {\n      var target = event.target;\n      var IGNORE_TARGETS = [ 'input', 'textarea' ];\n      if ( IGNORE_TARGETS.indexOf(target.localName) >= 0 ) {\n        return;\n      }\n      this.fire('keyDown', { keyName: event.key, shiftKey: event.shiftKey, inner: true });\n    }.bind(this));\n\n    var relocated_handler = debounce(function(location) {\n      if ( self._fired ) { self._fired = false; return ; }\n      self.fire('relocated', location);\n\n      // hideEverything/showEverything\n      focus.updateFocus(self, location);\n\n      if ( Browser.safari && self._last_location_start && self._last_location_start != location.start.href ) {\n        self._fired = true;\n        setTimeout(function() {\n          // self._rendition.display(location.start.cfi);\n        }, 0);\n      }\n    }, 10);\n\n    this._rendition.on('relocated', relocated_handler);\n\n    this._rendition.on('displayerror', function(err) {\n      console.log(\"AHOY RENDITION DISPLAY ERROR\", err);\n    })\n\n    var locationChanged_handler = debounce(function(location) {\n      var view = this.manager.current();\n      var section = view.section;\n      var current = this.book.navigation.get(section.href);\n\n      self.fire(\"updateSection\", current);\n      self.fire(\"updateLocation\", location);\n    }, 150);\n\n    this._rendition.on(\"locationChanged\", locationChanged_handler);\n\n    this.on('updateLocations', function() {\n      // trigger this when all the locations have been loaded from the spine\n      this._rendition.emit('relocated', this._rendition.currentLocation());\n    })\n\n    this._rendition.on(\"rendered\", function(section, view) {\n      self._updateFrameTitle(section, view);\n    });\n\n    this._rendition.on(\"rendered\", function(section, view) {\n\n      if ( self.settings.flow == 'scrolled-doc' ) { return ; }\n\n      // add focus rules\n      focus.setupFocusRules(self);\n\n    })\n  },\n\n  _initializeReaderStyles: function() {\n    var self = this;\n    var themes = this.options.themes;\n    if ( themes ) {\n      themes.forEach(function(theme) {\n        self._rendition.themes.register(theme['klass'], theme.href ? theme.href : theme.rules);\n      })\n    }\n\n    // base for highlights\n    // this._rendition.themes.override('.epubjs-hl', \"fill: yellow; fill-opacity: 0.3; mix-blend-mode: multiply;\");\n  },\n\n  _selectTheme: function(refresh) {\n    var theme = this.options.theme || 'default';\n    this._rendition.themes.select(theme);\n  },\n\n  _updateFontSize: function() {\n    if ( false && this.metadata.layout == 'pre-paginated') {\n      // we're not doing font changes for pre-paginated\n      return;\n    }\n\n    var text_size = this.options.text_size || 100; // this.options.modes[this.flow].text_size; // this.options.text_size == 'auto' ? 100 : this.options.text_size;\n    this._rendition.themes.fontSize(`${text_size}%`);\n  },\n\n  _updateScale: function() {\n    if ( this.metadata.layout != 'pre-paginated') {\n      // we're not scaling for reflowable\n      return;\n    }\n    // var scale = this.options.modes[this.flow].scale;\n    var scale = this.options.scale;\n    if ( scale ) {\n      this.settings.scale = parseInt(scale, 10) / 100.0;\n      this._queueScale();\n    }\n  },\n\n  _queueScale: function(scale) {\n    this._queueTimeout = setTimeout(function() {\n      if ( this._rendition.manager && this._rendition.manager.stage ) {\n        this._rendition.scale(this.settings.scale);\n        var text_size = this.settings.scale == 1.0 ? 100 : this.settings.scale * 100.0;\n        this._rendition.themes.fontSize(`${text_size}%`);\n      } else {\n        this._queueScale();\n      }\n    }.bind(this), 100);\n  },\n\n  _updateFrameTitle: function(section, view) {\n    var self = this;\n\n    var title = `Section ${section.index + 1}`;\n    var current = self._book.navigation && self._book.navigation.get(section.href);\n    if ( ! current ) {\n      var subtitle;\n      for(var tag of [ 'h1', 'h2' ]) {\n        var tmp = view.document.querySelectorAll(tag);\n        if ( tmp ) {\n          var buffer = [];\n          for(var i = 0; i < tmp.length; i++) {\n            buffer.push(tmp[i].innerText);\n            if ( tag == 'h2' ) { break; } // only one of these\n          }\n          subtitle = buffer.join(' - ');\n          break;\n        }\n      }\n      if ( ! subtitle ) {\n        for(var i = section.index; i >= 0; i--) {\n          var previousSection = self._book.spine.get(i);\n          var previous = self._book.navigation.get(previousSection.href);\n          if ( previous ) {\n            subtitle = previous.label;\n            break;\n          }\n        }\n      }\n      if ( subtitle ) {\n        title += ': ' + subtitle;\n      }\n    } else {\n      title += ': ' + current.label;\n    }\n    if ( title && view.iframe ) {\n      view.iframe.title = `Contents: ${title}` ;\n    }\n  },\n\n  EOT: true\n\n})\n\nObject.defineProperty(Reader.EpubJS.prototype, 'metadata', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return this._metadata;\n  },\n\n  set: function(data) {\n    this._metadata = Util.extend({}, data, this.options.metadata);\n  }\n});\n\nObject.defineProperty(Reader.EpubJS.prototype, 'annotations', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    if ( Browser.ie ) {\n      return {\n        reset: function() { /* NOOP */ },\n        highlight: function(cfiRange) { /* NOOP */ }\n      }\n    }\n    if ( ! this._rendition.annotations.reset ) {\n      this._rendition.annotations.reset = function(){\n        for(var hash in this._annotations) {\n            var cfiRange = decodeURI(hash);\n            this.remove(cfiRange);\n        }\n        this._annotationsBySectionIndex = {};\n      }.bind(this._rendition.annotations);\n    }\n    return this._rendition.annotations;\n  }\n});\n\nObject.defineProperty(Reader.EpubJS.prototype, 'locations', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return this._book.locations;\n  }\n});\n\nObject.defineProperty(Reader.EpubJS.prototype, 'rendition', {\n  get: function() {\n    if ( ! this._rendition ) {\n      this._rendition = { draft: true };\n      this._rendition.hooks = {};\n      this._rendition.hooks.content = new Hook(this);\n    }\n    return this._rendition;\n  },\n\n  set: function(rendition) {\n    if ( this._rendition && this._rendition.draft ) {\n      var hook = this._rendition.hooks.content;\n      hook.hooks.forEach(function(fn) {\n        rendition.hooks.content.register(fn)\n      })\n    }\n    this._rendition = rendition;\n  }\n})\n\nObject.defineProperty(Reader.EpubJS.prototype, 'CFI', {\n  get: function() {\n    return ePub.CFI;\n  }\n})\n\nwindow.Reader = Reader;\n\nexport function createReader(id, options) {\n  return new Reader.EpubJS(id, options);\n}\n","import * as Util from '../core/Util';\nimport {Reader} from './Reader';\nimport * as DomUtil from '../dom/DomUtil';\n\nReader.Mock = Reader.extend({\n\n  initialize: function(id, options) {\n    Reader.prototype.initialize.apply(this, arguments);\n  },\n\n  open: function(target, callback) {\n    var self = this;\n    this._book = {\n      metadata: {\n        title: 'The Mock Life',\n        creator: 'Alex Mock',\n        publisher: 'University Press',\n        location: 'Ann Arbor, MI',\n        pubdate: '2017-05-23'\n      },\n      contents: {\n        toc: [\n          {id: 1, href: \"/epubs/mock/ops/xhtml/TitlePage.xhtml\", label: \"Title\", parent: null},\n          {id: 2, href: \"/epubs/mock/ops/xhtml/Chapter01.xhtml\", label: \"Chapter 1\", parent: null},\n          {id: 3, href: \"/epubs/mock/ops/xhtml/Chapter02.xhtml\", label: \"Chapter 2\", parent: null},\n          {id: 4, href: \"/epubs/mock/ops/xhtml/Chapter03.xhtml\", label: \"Chapter 3\", parent: null},\n          {id: 5, href: \"/epubs/mock/ops/xhtml/Chapter04.xhtml\", label: \"Chapter 4\", parent: null},\n          {id: 6, href: \"/epubs/mock/ops/xhtml/Chapter05.xhtml\", label: \"Chapter 5\", parent: null},\n          {id: 7, href: \"/epubs/mock/ops/xhtml/Chapter06.xhtml\", label: \"Chapter 6\", parent: null},\n          {id: 8, href: \"/epubs/mock/ops/xhtml/Chapter07.xhtml\", label: \"Chapter 7\", parent: null},\n          {id: 9, href: \"/epubs/mock/ops/xhtml/Index.xhtml\", label: \"Index\", parent: null},\n        ]\n      }\n    };\n\n    this._locations = [\n      'epubcfi(/6/4[TitlePage.xhtml])',\n      'epubcfi(/6/4[Chapter01.xhtml])',\n      'epubcfi(/6/4[Chapter02.xhtml])',\n      'epubcfi(/6/4[Chapter03.xhtml])',\n      'epubcfi(/6/4[Chapter04.xhtml])',\n      'epubcfi(/6/4[Chapter05.xhtml])',\n      'epubcfi(/6/4[Chapter06.xhtml])',\n      'epubcfi(/6/4[Chapter07.xhtml])',\n      'epubcfi(/6/4[Chapter08.xhtml])',\n      'epubcfi(/6/4[Index.xhtml])',\n    ];\n\n    this.__currentIndex = 0;\n\n    this.metadata = this._book.metadata;\n    this.fire('updateContents', this._book.contents);\n    this.fire('updateTitle', this._metadata);\n    this.fire('updateLocations', this._locations);\n    this.draw(target, callback);\n  },\n\n  draw: function(target, callback) {\n    var self = this;\n    this.settings = { flow: this.options.flow };\n    this.settings.height = '100%';\n    this.settings.width = '99%';\n    // this.settings.width = '100%';\n    if ( this.options.flow == 'auto' ) {\n      this._panes['book'].style.overflow = 'hidden';\n    } else {\n      this._panes['book'].style.overflow = 'auto';\n    }\n    if ( typeof(target) == 'function' && cb === undefined ) {\n      callback = target;\n      target = undefined;\n    }\n    callback();\n    self.fire('ready');\n  },\n\n  next: function() {\n    // this._rendition.next();\n  },\n\n  prev: function() {\n    // this._rendition.prev();\n  },\n\n  first: function() {\n    // this._rendition.display(0);\n  },\n\n  last: function() {\n  },\n\n  gotoPage: function(target) {\n    if ( typeof(target) == \"string\" ) {\n      this.__currentIndex = this._locations.indexOf(target);\n    } else {\n      this.__currentIndex = target;\n    }\n    this.fire(\"relocated\", this.currentLocation());\n  },\n\n  destroy: function() {\n    // if ( this._rendition ) {\n    //   this._rendition.destroy();\n    // }\n    // this._rendition = null;\n  },\n\n  currentLocation: function() {\n    var cfi = this._locations[this.__currentIndex];\n    return {\n      start: { cfi: cfi, href: cfi },\n      end: { cfi: cfi, href: cfi }\n    }\n  },\n\n  _bindEvents: function() {\n    var self = this;\n\n  },\n\n  _updateTheme: function() {\n\n  },\n\n  EOT: true\n\n})\n\nObject.defineProperty(Reader.Mock.prototype, 'metadata', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    return this._metadata;\n  },\n\n  set: function(data) {\n    this._metadata = Util.extend({}, data, this.options.metadata);\n  }\n});\n\nObject.defineProperty(Reader.Mock.prototype, 'locations', {\n  get: function() {\n    // return the combined metadata of configured + book metadata\n    var self = this;\n    return {\n      total: self._locations.length,\n      locationFromCfi: function(cfi) {\n        return self._locations.indexOf(cfi);\n      },\n      percentageFromCfi: function(cfi) {\n        var index = self.locations.locationFromCfi(cfi);\n        return ( index / self.locations.total );\n      },\n      cfiFromPercentage: function(percentage) {\n        var index = Math.ceil(percentage * 10);\n        return self._locations[index];\n      }\n    }\n  }\n});\n\nObject.defineProperty(Reader.Mock.prototype, 'annotations', {\n  get: function() {\n    return {\n      reset: function() {},\n      highlight: function() {}\n    }\n  }\n})\n\nexport function createReader(id, options) {\n  return new Reader.Mock(id, options);\n}\n","import {Reader} from './Reader';\nimport * as EpubJS from './Reader.EpubJS';\nimport * as Mock from './Reader.Mock';\n\nvar engines = {\n  epubjs: EpubJS.createReader,\n  mock: Mock.createReader\n}\n\nexport {Reader};\n\nexport var reader = function(id, options) {\n  options = options || {};\n  var engine = options.engine || window.COZY_EPUB_ENGINE || 'epubjs';\n  var engine_href = options.engine_href || window.COZY_EPUB_ENGINE_HREF;\n  var _this = this;\n  var _arguments = arguments;\n\n  options.engine = engine;\n  options.engine_href = engine_href;\n\n  return engines[engine].apply(_this, [id, options]);\n}"],"names":["global","this","Util.create","Util.extend","Util.splitWords","Util.falseFn","Util.bind","Util.stamp","style","Browser.msPointer","DomEvent.preventDefault","Browser.pointer","touch","Browser.edge","Browser.touch","Browser.chrome","Browser.android","Browser.win","Browser.gecko","create","Util.trim","Browser.ie3d","Browser.any3d","DomEvent.on","DomEvent.off","freeGlobal","root","Symbol","objectProto","nativeObjectToString","symToStringTag","getRawTag","objectToString","isObjectLike","baseGetTag","isSymbol","isObject","toNumber","now","coreJsData","funcProto","funcToString","hasOwnProperty","isMasked","isFunction","toSource","getValue","baseIsNative","getNative","defineProperty","eq","baseAssignValue","assignValue","nativeMax","apply","identity","constant","shortOut","baseSetToString","setToString","overRest","isLength","MAX_SAFE_INTEGER","isArrayLike","isIndex","baseRest","isIterateeCall","baseIsArguments","isArray","stubFalse","argsTag","funcTag","nodeUtil","baseUnary","baseIsTypedArray","isArguments","isBuffer","isTypedArray","baseTimes","overArg","isPrototype","nativeKeys","arrayLikeKeys","baseKeys","createAssigner","copyObject","keys","document","Util.setOptions","assign","DomUtil.removeClass","DomUtil.addClass","DomUtil.get","Browser.retina","Browser.ielt9","Browser.safari","DomUtil.getStyle","Browser.columnCount","DomUtil.create","remove","DomEvent.skipped","DomUtil.preventOutline","Util.indexOf","Util.cancelAnimFrame","DomUtil.isPropertySupported","template","DomUtil.remove","DomEvent.disableClickPropagation","DomEvent.stop","DomUtil.setOpacity","control","navigator","require$$0","require$$1","value","indexOf","normalizeOpts","callable","d","requestAnimationFrame","extend","bounds","process","ELEMENT_NODE","TEXT_NODE","DOCUMENT_NODE","type","EventEmitter","isXml","path","treeWalker","Contents","contains","svg","freeSelf","nullTag","undefinedTag","symbolTag","NAN","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","FUNC_ERROR_TEXT","nativeMin","debounce","throttle","httpRequest","ePub","CFI","assertPath","normalizeStringPosix","_format","posix","max","forEach","str","isCallable","Views","Browser.ie","focus.updateFocus","focus.setupFocusRules","createReader","EpubJS.createReader","Mock.createReader","reader"],"mappings":"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"}
>>>>>>> 5abd452... build
